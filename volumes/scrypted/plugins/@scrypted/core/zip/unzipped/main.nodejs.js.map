{"version":3,"file":"main.nodejs.js","mappings":"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","sources":["../../../common/node_modules/node-fetch-commonjs/index-3a548b1a.js","../../../common/node_modules/node-fetch-commonjs/index.js","../../../common/node_modules/node-fetch-commonjs/multipart-parser-dc9090bd.js","../../../common/node_modules/web-streams-polyfill/dist/ponyfill.es2018.js","../node_modules/array-flatten/dist.es2015/index.js","../node_modules/methods/index.js","../node_modules/mime/Mime.js","../node_modules/mime/lite.js","../node_modules/mime/types/standard.js","../node_modules/parseurl/index.js","../node_modules/path-to-regexp/index.js","../node_modules/router/index.js","../node_modules/router/lib/layer.js","../node_modules/router/lib/route.js","../node_modules/router/node_modules/debug/src/browser.js","../node_modules/router/node_modules/debug/src/debug.js","../node_modules/router/node_modules/debug/src/index.js","../node_modules/router/node_modules/debug/src/node.js","../node_modules/router/node_modules/ms/index.js","../node_modules/setprototypeof/index.js","../node_modules/utils-merge/index.js","../../../sdk/dist/src/acl.js","../../../sdk/dist/src/index.js","../../../sdk/dist/src/storage-settings.js","../../../sdk/dist/types/gen/index.js","../../../common/src/eval/monaco/script-device.ts","../src/api/util.ts","../../../common/src/eval/scrypted-eval.ts","../src/aggregate-core.ts","../src/aggregate.ts","../src/automation.ts","../src/automations-core.ts","../src/builtins/javascript.ts","../src/builtins/scheduler.ts","../src/builtins/shellscript.ts","../src/converters.ts","../src/launcher-mixin.ts","../src/main.ts","../src/media-core.ts","../src/monaco.ts","../src/script-core.ts","../src/script.ts","../src/scrypted-eval.ts","../src/update-plugins.ts","../src/user.ts","../ui/src/components/helpers.ts","../../../server/src/event-registry.ts","../../../server/src/plugin/descriptor.ts","../../../server/src/plugin/plugin-api.ts","../../../server/src/plugin/system.ts","../../../server/src/rpc.ts","../../../sdk/polyfill/realfs.js","../../../sdk/polyfill/typescript.js","../../../sdk/types/dist/index.js","../../../server/node_modules/@scrypted/types/dist/index.js","../external node-commonjs \"buffer\"","../external node-commonjs \"child_process\"","../external node-commonjs \"crypto\"","../external node-commonjs \"fs\"","../external node-commonjs \"http\"","../external node-commonjs \"https\"","../external node-commonjs \"net\"","../external node-commonjs \"os\"","../external node-commonjs \"path\"","../external node-commonjs \"path/posix\"","../external node-commonjs \"stream\"","../external node-commonjs \"tty\"","../external node-commonjs \"url\"","../external node-commonjs \"util\"","../external node-commonjs \"vm\"","../external node-commonjs \"worker_threads\"","../external node-commonjs \"zlib\"","../webpack/bootstrap","../webpack/runtime/define property getters","../webpack/runtime/hasOwnProperty shorthand","../webpack/runtime/node module decorator","../webpack/startup"],"sourcesContent":["/* eslint-disable */\n'use strict';\n\nvar http = require('http');\nvar https = require('https');\nvar zlib = require('zlib');\nvar Stream = require('stream');\nvar util = require('util');\nvar url = require('url');\nvar net = require('net');\n\nfunction _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }\n\nvar http__default = /*#__PURE__*/_interopDefaultLegacy(http);\nvar https__default = /*#__PURE__*/_interopDefaultLegacy(https);\nvar zlib__default = /*#__PURE__*/_interopDefaultLegacy(zlib);\nvar Stream__default = /*#__PURE__*/_interopDefaultLegacy(Stream);\n\n/**\n * Returns a `Buffer` instance from the given data URI `uri`.\n *\n * @param {String} uri Data URI to turn into a Buffer instance\n * @returns {Buffer} Buffer instance from Data URI\n * @api public\n */\nfunction dataUriToBuffer(uri) {\n    if (!/^data:/i.test(uri)) {\n        throw new TypeError('`uri` does not appear to be a Data URI (must begin with \"data:\")');\n    }\n    // strip newlines\n    uri = uri.replace(/\\r?\\n/g, '');\n    // split the URI up into the \"metadata\" and the \"data\" portions\n    const firstComma = uri.indexOf(',');\n    if (firstComma === -1 || firstComma <= 4) {\n        throw new TypeError('malformed data: URI');\n    }\n    // remove the \"data:\" scheme and parse the metadata\n    const meta = uri.substring(5, firstComma).split(';');\n    let charset = '';\n    let base64 = false;\n    const type = meta[0] || 'text/plain';\n    let typeFull = type;\n    for (let i = 1; i < meta.length; i++) {\n        if (meta[i] === 'base64') {\n            base64 = true;\n        }\n        else {\n            typeFull += `;${meta[i]}`;\n            if (meta[i].indexOf('charset=') === 0) {\n                charset = meta[i].substring(8);\n            }\n        }\n    }\n    // defaults to US-ASCII only if type is not provided\n    if (!meta[0] && !charset.length) {\n        typeFull += ';charset=US-ASCII';\n        charset = 'US-ASCII';\n    }\n    // get the encoded data portion and decode URI-encoded chars\n    const encoding = base64 ? 'base64' : 'ascii';\n    const data = unescape(uri.substring(firstComma + 1));\n    const buffer = Buffer.from(data, encoding);\n    // set `.type` and `.typeFull` properties to MIME type\n    buffer.type = type;\n    buffer.typeFull = typeFull;\n    // set the `.charset` property\n    buffer.charset = charset;\n    return buffer;\n}\n\n/* c8 ignore start */\n// 64 KiB (same size chrome slice theirs blob into Uint8array's)\nconst POOL_SIZE$1 = 65536;\n\nif (!globalThis.ReadableStream) {\n  // try {\n  //   Object.assign(globalThis, require('stream/web'))\n  // } catch (error) {\n\t\t// TODO: Remove when only supporting node >= 16.5.0\n    Object.assign(globalThis, require('web-streams-polyfill/dist/ponyfill.es2018.js'));\n  // }\n}\n\ntry {\n  const {Blob} = require('buffer');\n  if (Blob && !Blob.prototype.stream) {\n\t\tBlob.prototype.stream = function name(params) {\n\t\t\tlet position = 0;\n\t\t\tconst blob = this;\n\n\t\t\treturn new ReadableStream({\n\t\t\t\ttype: 'bytes',\n\t\t\t\tasync pull(ctrl) {\n\t\t\t\t\tconst chunk = blob.slice(position, Math.min(blob.size, position + POOL_SIZE$1));\n\t\t\t\t\tconst buffer = await chunk.arrayBuffer();\n\t\t\t\t\tposition += buffer.byteLength;\n\t\t\t\t\tctrl.enqueue(new Uint8Array(buffer));\n\n\t\t\t\t\tif (position === blob.size) {\n\t\t\t\t\t\tctrl.close();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t};\n\t}\n} catch (error) {}\n/* c8 ignore end */\n\n/** @typedef {import('buffer').Blob} NodeBlob} */\n\n// 64 KiB (same size chrome slice theirs blob into Uint8array's)\nconst POOL_SIZE = 65536;\n\n/** @param {(Blob | NodeBlob | Uint8Array)[]} parts */\nasync function * toIterator (parts, clone = true) {\n\tfor (let part of parts) {\n\t\tif ('stream' in part) {\n\t\t\tyield * part.stream();\n\t\t} else if (ArrayBuffer.isView(part)) {\n\t\t\tif (clone) {\n\t\t\t\tlet position = part.byteOffset;\n\t\t\t\tlet end = part.byteOffset + part.byteLength;\n\t\t\t\twhile (position !== end) {\n\t\t\t\t\tconst size = Math.min(end - position, POOL_SIZE);\n\t\t\t\t\tconst chunk = part.buffer.slice(position, position + size);\n\t\t\t\t\tposition += chunk.byteLength;\n\t\t\t\t\tyield new Uint8Array(chunk);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tyield part;\n\t\t\t}\n\t\t} else {\n\t\t\t/* c8 ignore start */\n\t\t\t// For blobs that have arrayBuffer but no stream method (nodes buffer.Blob)\n\t\t\tlet position = 0;\n\t\t\twhile (position !== part.size) {\n\t\t\t\tconst chunk = part.slice(position, Math.min(part.size, position + POOL_SIZE));\n\t\t\t\tconst buffer = await chunk.arrayBuffer();\n\t\t\t\tposition += buffer.byteLength;\n\t\t\t\tyield new Uint8Array(buffer);\n\t\t\t}\n\t\t\t/* c8 ignore end */\n\t\t}\n\t}\n}\n\nconst _Blob = class Blob {\n\n\t/** @type {Array.<(Blob|Uint8Array)>} */\n\t#parts = [];\n\t#type = '';\n\t#size = 0;\n\n\t/**\n\t * The Blob() constructor returns a new Blob object. The content\n\t * of the blob consists of the concatenation of the values given\n\t * in the parameter array.\n\t *\n\t * @param {*} blobParts\n\t * @param {{ type?: string }} [options]\n\t */\n\tconstructor(blobParts = [], options = {}) {\n\t\tlet size = 0;\n\n\t\tconst parts = blobParts.map(element => {\n\t\t\tlet part;\n\t\t\tif (ArrayBuffer.isView(element)) {\n\t\t\t\tpart = new Uint8Array(element.buffer.slice(element.byteOffset, element.byteOffset + element.byteLength));\n\t\t\t} else if (element instanceof ArrayBuffer) {\n\t\t\t\tpart = new Uint8Array(element.slice(0));\n\t\t\t} else if (element instanceof Blob) {\n\t\t\t\tpart = element;\n\t\t\t} else {\n\t\t\t\tpart = new TextEncoder().encode(element);\n\t\t\t}\n\n\t\t\tsize += ArrayBuffer.isView(part) ? part.byteLength : part.size;\n\t\t\treturn part;\n\t\t});\n\n\t\tconst type = options.type === undefined ? '' : String(options.type);\n\n\t\tthis.#type = /[^\\u0020-\\u007E]/.test(type) ? '' : type;\n\t\tthis.#size = size;\n\t\tthis.#parts = parts;\n\t}\n\n\t/**\n\t * The Blob interface's size property returns the\n\t * size of the Blob in bytes.\n\t */\n\tget size() {\n\t\treturn this.#size;\n\t}\n\n\t/**\n\t * The type property of a Blob object returns the MIME type of the file.\n\t */\n\tget type() {\n\t\treturn this.#type;\n\t}\n\n\t/**\n\t * The text() method in the Blob interface returns a Promise\n\t * that resolves with a string containing the contents of\n\t * the blob, interpreted as UTF-8.\n\t *\n\t * @return {Promise<string>}\n\t */\n\tasync text() {\n\t\t// More optimized than using this.arrayBuffer()\n\t\t// that requires twice as much ram\n\t\tconst decoder = new TextDecoder();\n\t\tlet str = '';\n\t\tfor await (let part of toIterator(this.#parts, false)) {\n\t\t\tstr += decoder.decode(part, { stream: true });\n\t\t}\n\t\t// Remaining\n\t\tstr += decoder.decode();\n\t\treturn str;\n\t}\n\n\t/**\n\t * The arrayBuffer() method in the Blob interface returns a\n\t * Promise that resolves with the contents of the blob as\n\t * binary data contained in an ArrayBuffer.\n\t *\n\t * @return {Promise<ArrayBuffer>}\n\t */\n\tasync arrayBuffer() {\n\t\t// Easier way... Just a unnecessary overhead\n\t\t// const view = new Uint8Array(this.size);\n\t\t// await this.stream().getReader({mode: 'byob'}).read(view);\n\t\t// return view.buffer;\n\n\t\tconst data = new Uint8Array(this.size);\n\t\tlet offset = 0;\n\t\tfor await (const chunk of toIterator(this.#parts, false)) {\n\t\t\tdata.set(chunk, offset);\n\t\t\toffset += chunk.length;\n\t\t}\n\n\t\treturn data.buffer;\n\t}\n\n\tstream() {\n\t\tconst it = toIterator(this.#parts, true);\n\n\t\treturn new ReadableStream({\n\t\t\ttype: 'bytes',\n\t\t\tasync pull(ctrl) {\n\t\t\t\tconst chunk = await it.next();\n\t\t\t\tchunk.done ? ctrl.close() : ctrl.enqueue(chunk.value);\n\t\t\t}\n\t\t})\n\t}\n\n\t/**\n\t * The Blob interface's slice() method creates and returns a\n\t * new Blob object which contains data from a subset of the\n\t * blob on which it's called.\n\t *\n\t * @param {number} [start]\n\t * @param {number} [end]\n\t * @param {string} [type]\n\t */\n\tslice(start = 0, end = this.size, type = '') {\n\t\tconst {size} = this;\n\n\t\tlet relativeStart = start < 0 ? Math.max(size + start, 0) : Math.min(start, size);\n\t\tlet relativeEnd = end < 0 ? Math.max(size + end, 0) : Math.min(end, size);\n\n\t\tconst span = Math.max(relativeEnd - relativeStart, 0);\n\t\tconst parts = this.#parts;\n\t\tconst blobParts = [];\n\t\tlet added = 0;\n\n\t\tfor (const part of parts) {\n\t\t\t// don't add the overflow to new blobParts\n\t\t\tif (added >= span) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tconst size = ArrayBuffer.isView(part) ? part.byteLength : part.size;\n\t\t\tif (relativeStart && size <= relativeStart) {\n\t\t\t\t// Skip the beginning and change the relative\n\t\t\t\t// start & end position as we skip the unwanted parts\n\t\t\t\trelativeStart -= size;\n\t\t\t\trelativeEnd -= size;\n\t\t\t} else {\n\t\t\t\tlet chunk;\n\t\t\t\tif (ArrayBuffer.isView(part)) {\n\t\t\t\t\tchunk = part.subarray(relativeStart, Math.min(size, relativeEnd));\n\t\t\t\t\tadded += chunk.byteLength;\n\t\t\t\t} else {\n\t\t\t\t\tchunk = part.slice(relativeStart, Math.min(size, relativeEnd));\n\t\t\t\t\tadded += chunk.size;\n\t\t\t\t}\n\t\t\t\tblobParts.push(chunk);\n\t\t\t\trelativeStart = 0; // All next sequential parts should start at 0\n\t\t\t}\n\t\t}\n\n\t\tconst blob = new Blob([], {type: String(type).toLowerCase()});\n\t\tblob.#size = span;\n\t\tblob.#parts = blobParts;\n\n\t\treturn blob;\n\t}\n\n\tget [Symbol.toStringTag]() {\n\t\treturn 'Blob';\n\t}\n\n\tstatic [Symbol.hasInstance](object) {\n\t\treturn (\n\t\t\tobject &&\n\t\t\ttypeof object === 'object' &&\n\t\t\ttypeof object.constructor === 'function' &&\n\t\t\t(\n\t\t\t\ttypeof object.stream === 'function' ||\n\t\t\t\ttypeof object.arrayBuffer === 'function'\n\t\t\t) &&\n\t\t\t/^(Blob|File)$/.test(object[Symbol.toStringTag])\n\t\t);\n\t}\n};\n\nObject.defineProperties(_Blob.prototype, {\n\tsize: {enumerable: true},\n\ttype: {enumerable: true},\n\tslice: {enumerable: true}\n});\n\n/** @type {typeof globalThis.Blob} */\nconst Blob = _Blob;\nvar Blob$1 = Blob;\n\nconst _File = class File extends Blob$1 {\n  #lastModified = 0;\n  #name = '';\n\n  /**\n   * @param {*[]} fileBits\n   * @param {string} fileName\n   * @param {{lastModified?: number, type?: string}} options\n   */// @ts-ignore\n  constructor(fileBits, fileName, options = {}) {\n    if (arguments.length < 2) {\n      throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);\n    }\n    super(fileBits, options);\n\n    const modified = Number(options.lastModified);\n    this.#lastModified = Number.isNaN(modified) ? Date.now() : modified;\n    this.#name = fileName;\n  }\n\n  get name() {\n    return this.#name;\n  }\n\n  get lastModified() {\n    return this.#lastModified;\n  }\n\n  get [Symbol.toStringTag]() {\n    return \"File\";\n  }\n};\n\n/** @type {typeof globalThis.File} */// @ts-ignore\nconst File = _File;\n\n/*! formdata-polyfill. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> */\n\nvar {toStringTag:t,iterator:i,hasInstance:h}=Symbol,\nr=Math.random,\nm='append,set,get,getAll,delete,keys,values,entries,forEach,constructor'.split(','),\nf=(a,b,c)=>(a+='',/^(Blob|File)$/.test(b && b[t])?[(c=c!==void 0?c+'':b[t]=='File'?b.name:'blob',a),b.name!==c||b[t]=='blob'?new File([b],c,b):b]:[a,b+'']),\ne=(c,f)=>(f?c:c.replace(/\\r?\\n|\\r/g,'\\r\\n')).replace(/\\n/g,'%0A').replace(/\\r/g,'%0D').replace(/\"/g,'%22'),\nx=(n, a, e)=>{if(a.length<e){throw new TypeError(`Failed to execute '${n}' on 'FormData': ${e} arguments required, but only ${a.length} present.`)}};\n\n/** @type {typeof globalThis.FormData} */\nconst FormData = class FormData {\n#d=[];\nconstructor(...a){if(a.length)throw new TypeError(`Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.`)}\nget [t]() {return 'FormData'}\n[i](){return this.entries()}\nstatic [h](o) {return o&&typeof o==='object'&&o[t]==='FormData'&&!m.some(m=>typeof o[m]!='function')}\nappend(...a){x('append',arguments,2);this.#d.push(f(...a));}\ndelete(a){x('delete',arguments,1);a+='';this.#d=this.#d.filter(([b])=>b!==a);}\nget(a){x('get',arguments,1);a+='';for(var b=this.#d,l=b.length,c=0;c<l;c++)if(b[c][0]===a)return b[c][1];return null}\ngetAll(a,b){x('getAll',arguments,1);b=[];a+='';this.#d.forEach(c=>c[0]===a&&b.push(c[1]));return b}\nhas(a){x('has',arguments,1);a+='';return this.#d.some(b=>b[0]===a)}\nforEach(a,b){x('forEach',arguments,1);for(var [c,d]of this)a.call(b,d,c,this);}\nset(...a){x('set',arguments,2);var b=[],c=!0;a=f(...a);this.#d.forEach(d=>{d[0]===a[0]?c&&(c=!b.push(a)):b.push(d);});c&&b.push(a);this.#d=b;}\n*entries(){yield*this.#d;}\n*keys(){for(var[a]of this)yield a;}\n*values(){for(var[,a]of this)yield a;}};\n\n/** @param {FormData} F */\nfunction formDataToBlob (F,B=Blob$1){\nvar b=`${r()}${r()}`.replace(/\\./g, '').slice(-28).padStart(32, '-'),c=[],p=`--${b}\\r\\nContent-Disposition: form-data; name=\"`;\nF.forEach((v,n)=>typeof v=='string'\n?c.push(p+e(n)+`\"\\r\\n\\r\\n${v.replace(/\\r(?!\\n)|(?<!\\r)\\n/g, '\\r\\n')}\\r\\n`)\n:c.push(p+e(n)+`\"; filename=\"${e(v.name, 1)}\"\\r\\nContent-Type: ${v.type||\"application/octet-stream\"}\\r\\n\\r\\n`, v, '\\r\\n'));\nc.push(`--${b}--`);\nreturn new B(c,{type:\"multipart/form-data; boundary=\"+b})}\n\nclass FetchBaseError extends Error {\n\tconstructor(message, type) {\n\t\tsuper(message);\n\t\t// Hide custom error implementation details from end-users\n\t\tError.captureStackTrace(this, this.constructor);\n\n\t\tthis.type = type;\n\t}\n\n\tget name() {\n\t\treturn this.constructor.name;\n\t}\n\n\tget [Symbol.toStringTag]() {\n\t\treturn this.constructor.name;\n\t}\n}\n\n/**\n * @typedef {{ address?: string, code: string, dest?: string, errno: number, info?: object, message: string, path?: string, port?: number, syscall: string}} SystemError\n*/\n\n/**\n * FetchError interface for operational errors\n */\nclass FetchError extends FetchBaseError {\n\t/**\n\t * @param  {string} message -      Error message for human\n\t * @param  {string} [type] -        Error type for machine\n\t * @param  {SystemError} [systemError] - For Node.js system error\n\t */\n\tconstructor(message, type, systemError) {\n\t\tsuper(message, type);\n\t\t// When err.type is `system`, err.erroredSysCall contains system error and err.code contains system error code\n\t\tif (systemError) {\n\t\t\t// eslint-disable-next-line no-multi-assign\n\t\t\tthis.code = this.errno = systemError.code;\n\t\t\tthis.erroredSysCall = systemError.syscall;\n\t\t}\n\t}\n}\n\n/**\n * Is.js\n *\n * Object type checks.\n */\n\nconst NAME = Symbol.toStringTag;\n\n/**\n * Check if `obj` is a URLSearchParams object\n * ref: https://github.com/node-fetch/node-fetch/issues/296#issuecomment-307598143\n * @param {*} object - Object to check for\n * @return {boolean}\n */\nconst isURLSearchParameters = object => {\n\treturn (\n\t\ttypeof object === 'object' &&\n\t\ttypeof object.append === 'function' &&\n\t\ttypeof object.delete === 'function' &&\n\t\ttypeof object.get === 'function' &&\n\t\ttypeof object.getAll === 'function' &&\n\t\ttypeof object.has === 'function' &&\n\t\ttypeof object.set === 'function' &&\n\t\ttypeof object.sort === 'function' &&\n\t\tobject[NAME] === 'URLSearchParams'\n\t);\n};\n\n/**\n * Check if `object` is a W3C `Blob` object (which `File` inherits from)\n * @param {*} object - Object to check for\n * @return {boolean}\n */\nconst isBlob = object => {\n\treturn (\n\t\tobject &&\n\t\ttypeof object === 'object' &&\n\t\ttypeof object.arrayBuffer === 'function' &&\n\t\ttypeof object.type === 'string' &&\n\t\ttypeof object.stream === 'function' &&\n\t\ttypeof object.constructor === 'function' &&\n\t\t/^(Blob|File)$/.test(object[NAME])\n\t);\n};\n\n/**\n * Check if `obj` is an instance of AbortSignal.\n * @param {*} object - Object to check for\n * @return {boolean}\n */\nconst isAbortSignal = object => {\n\treturn (\n\t\ttypeof object === 'object' && (\n\t\t\tobject[NAME] === 'AbortSignal' ||\n\t\t\tobject[NAME] === 'EventTarget'\n\t\t)\n\t);\n};\n\nconst INTERNALS$2 = Symbol('Body internals');\n\n/**\n * Body mixin\n *\n * Ref: https://fetch.spec.whatwg.org/#body\n *\n * @param   Stream  body  Readable stream\n * @param   Object  opts  Response options\n * @return  Void\n */\nclass Body {\n\tconstructor(body, {\n\t\tsize = 0\n\t} = {}) {\n\t\tlet boundary = null;\n\n\t\tif (body === null) {\n\t\t\t// Body is undefined or null\n\t\t\tbody = null;\n\t\t} else if (isURLSearchParameters(body)) {\n\t\t\t// Body is a URLSearchParams\n\t\t\tbody = Buffer.from(body.toString());\n\t\t} else if (isBlob(body)) ; else if (Buffer.isBuffer(body)) ; else if (util.types.isAnyArrayBuffer(body)) {\n\t\t\t// Body is ArrayBuffer\n\t\t\tbody = Buffer.from(body);\n\t\t} else if (ArrayBuffer.isView(body)) {\n\t\t\t// Body is ArrayBufferView\n\t\t\tbody = Buffer.from(body.buffer, body.byteOffset, body.byteLength);\n\t\t} else if (body instanceof Stream__default[\"default\"]) ; else if (body instanceof FormData) {\n\t\t\t// Body is FormData\n\t\t\tbody = formDataToBlob(body);\n\t\t\tboundary = body.type.split('=')[1];\n\t\t} else {\n\t\t\t// None of the above\n\t\t\t// coerce to string then buffer\n\t\t\tbody = Buffer.from(String(body));\n\t\t}\n\n\t\tlet stream = body;\n\n\t\tif (Buffer.isBuffer(body)) {\n\t\t\tstream = Stream__default[\"default\"].Readable.from(body);\n\t\t} else if (isBlob(body)) {\n\t\t\tstream = Stream__default[\"default\"].Readable.from(body.stream());\n\t\t}\n\n\t\tthis[INTERNALS$2] = {\n\t\t\tbody,\n\t\t\tstream,\n\t\t\tboundary,\n\t\t\tdisturbed: false,\n\t\t\terror: null\n\t\t};\n\t\tthis.size = size;\n\n\t\tif (body instanceof Stream__default[\"default\"]) {\n\t\t\tbody.on('error', error_ => {\n\t\t\t\tconst error = error_ instanceof FetchBaseError ?\n\t\t\t\t\terror_ :\n\t\t\t\t\tnew FetchError(`Invalid response body while trying to fetch ${this.url}: ${error_.message}`, 'system', error_);\n\t\t\t\tthis[INTERNALS$2].error = error;\n\t\t\t});\n\t\t}\n\t}\n\n\tget body() {\n\t\treturn this[INTERNALS$2].stream;\n\t}\n\n\tget bodyUsed() {\n\t\treturn this[INTERNALS$2].disturbed;\n\t}\n\n\t/**\n\t * Decode response as ArrayBuffer\n\t *\n\t * @return  Promise\n\t */\n\tasync arrayBuffer() {\n\t\tconst {buffer, byteOffset, byteLength} = await consumeBody(this);\n\t\treturn buffer.slice(byteOffset, byteOffset + byteLength);\n\t}\n\n\tasync formData() {\n\t\tconst ct = this.headers.get('content-type');\n\n\t\tif (ct.startsWith('application/x-www-form-urlencoded')) {\n\t\t\tconst formData = new FormData();\n\t\t\tconst parameters = new URLSearchParams(await this.text());\n\n\t\t\tfor (const [name, value] of parameters) {\n\t\t\t\tformData.append(name, value);\n\t\t\t}\n\n\t\t\treturn formData;\n\t\t}\n\n\t\tconst {toFormData} = await Promise.resolve().then(function () { return require('./multipart-parser-dc9090bd.js'); });\n\t\treturn toFormData(this.body, ct);\n\t}\n\n\t/**\n\t * Return raw response as Blob\n\t *\n\t * @return Promise\n\t */\n\tasync blob() {\n\t\tconst ct = (this.headers && this.headers.get('content-type')) || (this[INTERNALS$2].body && this[INTERNALS$2].body.type) || '';\n\t\tconst buf = await this.buffer();\n\n\t\treturn new Blob$1([buf], {\n\t\t\ttype: ct\n\t\t});\n\t}\n\n\t/**\n\t * Decode response as json\n\t *\n\t * @return  Promise\n\t */\n\tasync json() {\n\t\tconst buffer = await consumeBody(this);\n\t\treturn JSON.parse(buffer.toString());\n\t}\n\n\t/**\n\t * Decode response as text\n\t *\n\t * @return  Promise\n\t */\n\tasync text() {\n\t\tconst buffer = await consumeBody(this);\n\t\treturn buffer.toString();\n\t}\n\n\t/**\n\t * Decode response as buffer (non-spec api)\n\t *\n\t * @return  Promise\n\t */\n\tbuffer() {\n\t\treturn consumeBody(this);\n\t}\n}\n\nBody.prototype.buffer = util.deprecate(Body.prototype.buffer, 'Please use \\'response.arrayBuffer()\\' instead of \\'response.buffer()\\'', 'node-fetch#buffer');\n\n// In browsers, all properties are enumerable.\nObject.defineProperties(Body.prototype, {\n\tbody: {enumerable: true},\n\tbodyUsed: {enumerable: true},\n\tarrayBuffer: {enumerable: true},\n\tblob: {enumerable: true},\n\tjson: {enumerable: true},\n\ttext: {enumerable: true}\n});\n\n/**\n * Consume and convert an entire Body to a Buffer.\n *\n * Ref: https://fetch.spec.whatwg.org/#concept-body-consume-body\n *\n * @return Promise\n */\nasync function consumeBody(data) {\n\tif (data[INTERNALS$2].disturbed) {\n\t\tthrow new TypeError(`body used already for: ${data.url}`);\n\t}\n\n\tdata[INTERNALS$2].disturbed = true;\n\n\tif (data[INTERNALS$2].error) {\n\t\tthrow data[INTERNALS$2].error;\n\t}\n\n\tconst {body} = data;\n\n\t// Body is null\n\tif (body === null) {\n\t\treturn Buffer.alloc(0);\n\t}\n\n\t/* c8 ignore next 3 */\n\tif (!(body instanceof Stream__default[\"default\"])) {\n\t\treturn Buffer.alloc(0);\n\t}\n\n\t// Body is stream\n\t// get ready to actually consume the body\n\tconst accum = [];\n\tlet accumBytes = 0;\n\n\ttry {\n\t\tfor await (const chunk of body) {\n\t\t\tif (data.size > 0 && accumBytes + chunk.length > data.size) {\n\t\t\t\tconst error = new FetchError(`content size at ${data.url} over limit: ${data.size}`, 'max-size');\n\t\t\t\tbody.destroy(error);\n\t\t\t\tthrow error;\n\t\t\t}\n\n\t\t\taccumBytes += chunk.length;\n\t\t\taccum.push(chunk);\n\t\t}\n\t} catch (error) {\n\t\tconst error_ = error instanceof FetchBaseError ? error : new FetchError(`Invalid response body while trying to fetch ${data.url}: ${error.message}`, 'system', error);\n\t\tthrow error_;\n\t}\n\n\tif (body.readableEnded === true || body._readableState.ended === true) {\n\t\ttry {\n\t\t\tif (accum.every(c => typeof c === 'string')) {\n\t\t\t\treturn Buffer.from(accum.join(''));\n\t\t\t}\n\n\t\t\treturn Buffer.concat(accum, accumBytes);\n\t\t} catch (error) {\n\t\t\tthrow new FetchError(`Could not create Buffer from response body for ${data.url}: ${error.message}`, 'system', error);\n\t\t}\n\t} else {\n\t\tthrow new FetchError(`Premature close of server response while trying to fetch ${data.url}`);\n\t}\n}\n\n/**\n * Clone body given Res/Req instance\n *\n * @param   Mixed   instance       Response or Request instance\n * @param   String  highWaterMark  highWaterMark for both PassThrough body streams\n * @return  Mixed\n */\nconst clone = (instance, highWaterMark) => {\n\tlet p1;\n\tlet p2;\n\tlet {body} = instance[INTERNALS$2];\n\n\t// Don't allow cloning a used body\n\tif (instance.bodyUsed) {\n\t\tthrow new Error('cannot clone body after it is used');\n\t}\n\n\t// Check that body is a stream and not form-data object\n\t// note: we can't clone the form-data object without having it as a dependency\n\tif ((body instanceof Stream__default[\"default\"]) && (typeof body.getBoundary !== 'function')) {\n\t\t// Tee instance body\n\t\tp1 = new Stream.PassThrough({highWaterMark});\n\t\tp2 = new Stream.PassThrough({highWaterMark});\n\t\tbody.pipe(p1);\n\t\tbody.pipe(p2);\n\t\t// Set instance body to teed body and return the other teed body\n\t\tinstance[INTERNALS$2].stream = p1;\n\t\tbody = p2;\n\t}\n\n\treturn body;\n};\n\nconst getNonSpecFormDataBoundary = util.deprecate(\n\tbody => body.getBoundary(),\n\t'form-data doesn\\'t follow the spec and requires special treatment. Use alternative package',\n\t'https://github.com/node-fetch/node-fetch/issues/1167'\n);\n\n/**\n * Performs the operation \"extract a `Content-Type` value from |object|\" as\n * specified in the specification:\n * https://fetch.spec.whatwg.org/#concept-bodyinit-extract\n *\n * This function assumes that instance.body is present.\n *\n * @param {any} body Any options.body input\n * @returns {string | null}\n */\nconst extractContentType = (body, request) => {\n\t// Body is null or undefined\n\tif (body === null) {\n\t\treturn null;\n\t}\n\n\t// Body is string\n\tif (typeof body === 'string') {\n\t\treturn 'text/plain;charset=UTF-8';\n\t}\n\n\t// Body is a URLSearchParams\n\tif (isURLSearchParameters(body)) {\n\t\treturn 'application/x-www-form-urlencoded;charset=UTF-8';\n\t}\n\n\t// Body is blob\n\tif (isBlob(body)) {\n\t\treturn body.type || null;\n\t}\n\n\t// Body is a Buffer (Buffer, ArrayBuffer or ArrayBufferView)\n\tif (Buffer.isBuffer(body) || util.types.isAnyArrayBuffer(body) || ArrayBuffer.isView(body)) {\n\t\treturn null;\n\t}\n\n\tif (body instanceof FormData) {\n\t\treturn `multipart/form-data; boundary=${request[INTERNALS$2].boundary}`;\n\t}\n\n\t// Detect form data input from form-data module\n\tif (body && typeof body.getBoundary === 'function') {\n\t\treturn `multipart/form-data;boundary=${getNonSpecFormDataBoundary(body)}`;\n\t}\n\n\t// Body is stream - can't really do much about this\n\tif (body instanceof Stream__default[\"default\"]) {\n\t\treturn null;\n\t}\n\n\t// Body constructor defaults other things to string\n\treturn 'text/plain;charset=UTF-8';\n};\n\n/**\n * The Fetch Standard treats this as if \"total bytes\" is a property on the body.\n * For us, we have to explicitly get it with a function.\n *\n * ref: https://fetch.spec.whatwg.org/#concept-body-total-bytes\n *\n * @param {any} obj.body Body object from the Body instance.\n * @returns {number | null}\n */\nconst getTotalBytes = request => {\n\tconst {body} = request[INTERNALS$2];\n\n\t// Body is null or undefined\n\tif (body === null) {\n\t\treturn 0;\n\t}\n\n\t// Body is Blob\n\tif (isBlob(body)) {\n\t\treturn body.size;\n\t}\n\n\t// Body is Buffer\n\tif (Buffer.isBuffer(body)) {\n\t\treturn body.length;\n\t}\n\n\t// Detect form data input from form-data module\n\tif (body && typeof body.getLengthSync === 'function') {\n\t\treturn body.hasKnownLength && body.hasKnownLength() ? body.getLengthSync() : null;\n\t}\n\n\t// Body is stream\n\treturn null;\n};\n\n/**\n * Write a Body to a Node.js WritableStream (e.g. http.Request) object.\n *\n * @param {Stream.Writable} dest The stream to write to.\n * @param obj.body Body object from the Body instance.\n * @returns {void}\n */\nconst writeToStream = (dest, {body}) => {\n\tif (body === null) {\n\t\t// Body is null\n\t\tdest.end();\n\t} else {\n\t\t// Body is stream\n\t\tbody.pipe(dest);\n\t}\n};\n\n/**\n * Headers.js\n *\n * Headers class offers convenient helpers\n */\n\nconst validateHeaderName = typeof http__default[\"default\"].validateHeaderName === 'function' ?\n\thttp__default[\"default\"].validateHeaderName :\n\tname => {\n\t\tif (!/^[\\^`\\-\\w!#$%&'*+.|~]+$/.test(name)) {\n\t\t\tconst error = new TypeError(`Header name must be a valid HTTP token [${name}]`);\n\t\t\tObject.defineProperty(error, 'code', {value: 'ERR_INVALID_HTTP_TOKEN'});\n\t\t\tthrow error;\n\t\t}\n\t};\n\nconst validateHeaderValue = typeof http__default[\"default\"].validateHeaderValue === 'function' ?\n\thttp__default[\"default\"].validateHeaderValue :\n\t(name, value) => {\n\t\tif (/[^\\t\\u0020-\\u007E\\u0080-\\u00FF]/.test(value)) {\n\t\t\tconst error = new TypeError(`Invalid character in header content [\"${name}\"]`);\n\t\t\tObject.defineProperty(error, 'code', {value: 'ERR_INVALID_CHAR'});\n\t\t\tthrow error;\n\t\t}\n\t};\n\n/**\n * @typedef {Headers | Record<string, string> | Iterable<readonly [string, string]> | Iterable<Iterable<string>>} HeadersInit\n */\n\n/**\n * This Fetch API interface allows you to perform various actions on HTTP request and response headers.\n * These actions include retrieving, setting, adding to, and removing.\n * A Headers object has an associated header list, which is initially empty and consists of zero or more name and value pairs.\n * You can add to this using methods like append() (see Examples.)\n * In all methods of this interface, header names are matched by case-insensitive byte sequence.\n *\n */\nclass Headers extends URLSearchParams {\n\t/**\n\t * Headers class\n\t *\n\t * @constructor\n\t * @param {HeadersInit} [init] - Response headers\n\t */\n\tconstructor(init) {\n\t\t// Validate and normalize init object in [name, value(s)][]\n\t\t/** @type {string[][]} */\n\t\tlet result = [];\n\t\tif (init instanceof Headers) {\n\t\t\tconst raw = init.raw();\n\t\t\tfor (const [name, values] of Object.entries(raw)) {\n\t\t\t\tresult.push(...values.map(value => [name, value]));\n\t\t\t}\n\t\t} else if (init == null) ; else if (typeof init === 'object' && !util.types.isBoxedPrimitive(init)) {\n\t\t\tconst method = init[Symbol.iterator];\n\t\t\t// eslint-disable-next-line no-eq-null, eqeqeq\n\t\t\tif (method == null) {\n\t\t\t\t// Record<ByteString, ByteString>\n\t\t\t\tresult.push(...Object.entries(init));\n\t\t\t} else {\n\t\t\t\tif (typeof method !== 'function') {\n\t\t\t\t\tthrow new TypeError('Header pairs must be iterable');\n\t\t\t\t}\n\n\t\t\t\t// Sequence<sequence<ByteString>>\n\t\t\t\t// Note: per spec we have to first exhaust the lists then process them\n\t\t\t\tresult = [...init]\n\t\t\t\t\t.map(pair => {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\ttypeof pair !== 'object' || util.types.isBoxedPrimitive(pair)\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tthrow new TypeError('Each header pair must be an iterable object');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn [...pair];\n\t\t\t\t\t}).map(pair => {\n\t\t\t\t\t\tif (pair.length !== 2) {\n\t\t\t\t\t\t\tthrow new TypeError('Each header pair must be a name/value tuple');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn [...pair];\n\t\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\tthrow new TypeError('Failed to construct \\'Headers\\': The provided value is not of type \\'(sequence<sequence<ByteString>> or record<ByteString, ByteString>)');\n\t\t}\n\n\t\t// Validate and lowercase\n\t\tresult =\n\t\t\tresult.length > 0 ?\n\t\t\t\tresult.map(([name, value]) => {\n\t\t\t\t\tvalidateHeaderName(name);\n\t\t\t\t\tvalidateHeaderValue(name, String(value));\n\t\t\t\t\treturn [String(name).toLowerCase(), String(value)];\n\t\t\t\t}) :\n\t\t\t\tundefined;\n\n\t\tsuper(result);\n\n\t\t// Returning a Proxy that will lowercase key names, validate parameters and sort keys\n\t\t// eslint-disable-next-line no-constructor-return\n\t\treturn new Proxy(this, {\n\t\t\tget(target, p, receiver) {\n\t\t\t\tswitch (p) {\n\t\t\t\t\tcase 'append':\n\t\t\t\t\tcase 'set':\n\t\t\t\t\t\treturn (name, value) => {\n\t\t\t\t\t\t\tvalidateHeaderName(name);\n\t\t\t\t\t\t\tvalidateHeaderValue(name, String(value));\n\t\t\t\t\t\t\treturn URLSearchParams.prototype[p].call(\n\t\t\t\t\t\t\t\ttarget,\n\t\t\t\t\t\t\t\tString(name).toLowerCase(),\n\t\t\t\t\t\t\t\tString(value)\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t};\n\n\t\t\t\t\tcase 'delete':\n\t\t\t\t\tcase 'has':\n\t\t\t\t\tcase 'getAll':\n\t\t\t\t\t\treturn name => {\n\t\t\t\t\t\t\tvalidateHeaderName(name);\n\t\t\t\t\t\t\treturn URLSearchParams.prototype[p].call(\n\t\t\t\t\t\t\t\ttarget,\n\t\t\t\t\t\t\t\tString(name).toLowerCase()\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t};\n\n\t\t\t\t\tcase 'keys':\n\t\t\t\t\t\treturn () => {\n\t\t\t\t\t\t\ttarget.sort();\n\t\t\t\t\t\t\treturn new Set(URLSearchParams.prototype.keys.call(target)).keys();\n\t\t\t\t\t\t};\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn Reflect.get(target, p, receiver);\n\t\t\t\t}\n\t\t\t}\n\t\t\t/* c8 ignore next */\n\t\t});\n\t}\n\n\tget [Symbol.toStringTag]() {\n\t\treturn this.constructor.name;\n\t}\n\n\ttoString() {\n\t\treturn Object.prototype.toString.call(this);\n\t}\n\n\tget(name) {\n\t\tconst values = this.getAll(name);\n\t\tif (values.length === 0) {\n\t\t\treturn null;\n\t\t}\n\n\t\tlet value = values.join(', ');\n\t\tif (/^content-encoding$/i.test(name)) {\n\t\t\tvalue = value.toLowerCase();\n\t\t}\n\n\t\treturn value;\n\t}\n\n\tforEach(callback, thisArg = undefined) {\n\t\tfor (const name of this.keys()) {\n\t\t\tReflect.apply(callback, thisArg, [this.get(name), name, this]);\n\t\t}\n\t}\n\n\t* values() {\n\t\tfor (const name of this.keys()) {\n\t\t\tyield this.get(name);\n\t\t}\n\t}\n\n\t/**\n\t * @type {() => IterableIterator<[string, string]>}\n\t */\n\t* entries() {\n\t\tfor (const name of this.keys()) {\n\t\t\tyield [name, this.get(name)];\n\t\t}\n\t}\n\n\t[Symbol.iterator]() {\n\t\treturn this.entries();\n\t}\n\n\t/**\n\t * Node-fetch non-spec method\n\t * returning all headers and their values as array\n\t * @returns {Record<string, string[]>}\n\t */\n\traw() {\n\t\treturn [...this.keys()].reduce((result, key) => {\n\t\t\tresult[key] = this.getAll(key);\n\t\t\treturn result;\n\t\t}, {});\n\t}\n\n\t/**\n\t * For better console.log(headers) and also to convert Headers into Node.js Request compatible format\n\t */\n\t[Symbol.for('nodejs.util.inspect.custom')]() {\n\t\treturn [...this.keys()].reduce((result, key) => {\n\t\t\tconst values = this.getAll(key);\n\t\t\t// Http.request() only supports string as Host header.\n\t\t\t// This hack makes specifying custom Host header possible.\n\t\t\tif (key === 'host') {\n\t\t\t\tresult[key] = values[0];\n\t\t\t} else {\n\t\t\t\tresult[key] = values.length > 1 ? values : values[0];\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}, {});\n\t}\n}\n\n/**\n * Re-shaping object for Web IDL tests\n * Only need to do it for overridden methods\n */\nObject.defineProperties(\n\tHeaders.prototype,\n\t['get', 'entries', 'forEach', 'values'].reduce((result, property) => {\n\t\tresult[property] = {enumerable: true};\n\t\treturn result;\n\t}, {})\n);\n\n/**\n * Create a Headers object from an http.IncomingMessage.rawHeaders, ignoring those that do\n * not conform to HTTP grammar productions.\n * @param {import('http').IncomingMessage['rawHeaders']} headers\n */\nfunction fromRawHeaders(headers = []) {\n\treturn new Headers(\n\t\theaders\n\t\t\t// Split into pairs\n\t\t\t.reduce((result, value, index, array) => {\n\t\t\t\tif (index % 2 === 0) {\n\t\t\t\t\tresult.push(array.slice(index, index + 2));\n\t\t\t\t}\n\n\t\t\t\treturn result;\n\t\t\t}, [])\n\t\t\t.filter(([name, value]) => {\n\t\t\t\ttry {\n\t\t\t\t\tvalidateHeaderName(name);\n\t\t\t\t\tvalidateHeaderValue(name, String(value));\n\t\t\t\t\treturn true;\n\t\t\t\t} catch {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t})\n\n\t);\n}\n\nconst redirectStatus = new Set([301, 302, 303, 307, 308]);\n\n/**\n * Redirect code matching\n *\n * @param {number} code - Status code\n * @return {boolean}\n */\nconst isRedirect = code => {\n\treturn redirectStatus.has(code);\n};\n\n/**\n * Response.js\n *\n * Response class provides content decoding\n */\n\nconst INTERNALS$1 = Symbol('Response internals');\n\n/**\n * Response class\n *\n * Ref: https://fetch.spec.whatwg.org/#response-class\n *\n * @param   Stream  body  Readable stream\n * @param   Object  opts  Response options\n * @return  Void\n */\nclass Response extends Body {\n\tconstructor(body = null, options = {}) {\n\t\tsuper(body, options);\n\n\t\t// eslint-disable-next-line no-eq-null, eqeqeq, no-negated-condition\n\t\tconst status = options.status != null ? options.status : 200;\n\n\t\tconst headers = new Headers(options.headers);\n\n\t\tif (body !== null && !headers.has('Content-Type')) {\n\t\t\tconst contentType = extractContentType(body, this);\n\t\t\tif (contentType) {\n\t\t\t\theaders.append('Content-Type', contentType);\n\t\t\t}\n\t\t}\n\n\t\tthis[INTERNALS$1] = {\n\t\t\ttype: 'default',\n\t\t\turl: options.url,\n\t\t\tstatus,\n\t\t\tstatusText: options.statusText || '',\n\t\t\theaders,\n\t\t\tcounter: options.counter,\n\t\t\thighWaterMark: options.highWaterMark\n\t\t};\n\t}\n\n\tget type() {\n\t\treturn this[INTERNALS$1].type;\n\t}\n\n\tget url() {\n\t\treturn this[INTERNALS$1].url || '';\n\t}\n\n\tget status() {\n\t\treturn this[INTERNALS$1].status;\n\t}\n\n\t/**\n\t * Convenience property representing if the request ended normally\n\t */\n\tget ok() {\n\t\treturn this[INTERNALS$1].status >= 200 && this[INTERNALS$1].status < 300;\n\t}\n\n\tget redirected() {\n\t\treturn this[INTERNALS$1].counter > 0;\n\t}\n\n\tget statusText() {\n\t\treturn this[INTERNALS$1].statusText;\n\t}\n\n\tget headers() {\n\t\treturn this[INTERNALS$1].headers;\n\t}\n\n\tget highWaterMark() {\n\t\treturn this[INTERNALS$1].highWaterMark;\n\t}\n\n\t/**\n\t * Clone this response\n\t *\n\t * @return  Response\n\t */\n\tclone() {\n\t\treturn new Response(clone(this, this.highWaterMark), {\n\t\t\ttype: this.type,\n\t\t\turl: this.url,\n\t\t\tstatus: this.status,\n\t\t\tstatusText: this.statusText,\n\t\t\theaders: this.headers,\n\t\t\tok: this.ok,\n\t\t\tredirected: this.redirected,\n\t\t\tsize: this.size,\n\t\t\thighWaterMark: this.highWaterMark\n\t\t});\n\t}\n\n\t/**\n\t * @param {string} url    The URL that the new response is to originate from.\n\t * @param {number} status An optional status code for the response (e.g., 302.)\n\t * @returns {Response}    A Response object.\n\t */\n\tstatic redirect(url, status = 302) {\n\t\tif (!isRedirect(status)) {\n\t\t\tthrow new RangeError('Failed to execute \"redirect\" on \"response\": Invalid status code');\n\t\t}\n\n\t\treturn new Response(null, {\n\t\t\theaders: {\n\t\t\t\tlocation: new URL(url).toString()\n\t\t\t},\n\t\t\tstatus\n\t\t});\n\t}\n\n\tstatic error() {\n\t\tconst response = new Response(null, {status: 0, statusText: ''});\n\t\tresponse[INTERNALS$1].type = 'error';\n\t\treturn response;\n\t}\n\n\tget [Symbol.toStringTag]() {\n\t\treturn 'Response';\n\t}\n}\n\nObject.defineProperties(Response.prototype, {\n\ttype: {enumerable: true},\n\turl: {enumerable: true},\n\tstatus: {enumerable: true},\n\tok: {enumerable: true},\n\tredirected: {enumerable: true},\n\tstatusText: {enumerable: true},\n\theaders: {enumerable: true},\n\tclone: {enumerable: true}\n});\n\nconst getSearch = parsedURL => {\n\tif (parsedURL.search) {\n\t\treturn parsedURL.search;\n\t}\n\n\tconst lastOffset = parsedURL.href.length - 1;\n\tconst hash = parsedURL.hash || (parsedURL.href[lastOffset] === '#' ? '#' : '');\n\treturn parsedURL.href[lastOffset - hash.length] === '?' ? '?' : '';\n};\n\n/**\n * @external URL\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/URL|URL}\n */\n\n/**\n * @module utils/referrer\n * @private\n */\n\n/**\n * @see {@link https://w3c.github.io/webappsec-referrer-policy/#strip-url|Referrer Policy 8.4. Strip url for use as a referrer}\n * @param {string} URL\n * @param {boolean} [originOnly=false]\n */\nfunction stripURLForUseAsAReferrer(url, originOnly = false) {\n\t// 1. If url is null, return no referrer.\n\tif (url == null) { // eslint-disable-line no-eq-null, eqeqeq\n\t\treturn 'no-referrer';\n\t}\n\n\turl = new URL(url);\n\n\t// 2. If url's scheme is a local scheme, then return no referrer.\n\tif (/^(about|blob|data):$/.test(url.protocol)) {\n\t\treturn 'no-referrer';\n\t}\n\n\t// 3. Set url's username to the empty string.\n\turl.username = '';\n\n\t// 4. Set url's password to null.\n\t// Note: `null` appears to be a mistake as this actually results in the password being `\"null\"`.\n\turl.password = '';\n\n\t// 5. Set url's fragment to null.\n\t// Note: `null` appears to be a mistake as this actually results in the fragment being `\"#null\"`.\n\turl.hash = '';\n\n\t// 6. If the origin-only flag is true, then:\n\tif (originOnly) {\n\t\t// 6.1. Set url's path to null.\n\t\t// Note: `null` appears to be a mistake as this actually results in the path being `\"/null\"`.\n\t\turl.pathname = '';\n\n\t\t// 6.2. Set url's query to null.\n\t\t// Note: `null` appears to be a mistake as this actually results in the query being `\"?null\"`.\n\t\turl.search = '';\n\t}\n\n\t// 7. Return url.\n\treturn url;\n}\n\n/**\n * @see {@link https://w3c.github.io/webappsec-referrer-policy/#enumdef-referrerpolicy|enum ReferrerPolicy}\n */\nconst ReferrerPolicy = new Set([\n\t'',\n\t'no-referrer',\n\t'no-referrer-when-downgrade',\n\t'same-origin',\n\t'origin',\n\t'strict-origin',\n\t'origin-when-cross-origin',\n\t'strict-origin-when-cross-origin',\n\t'unsafe-url'\n]);\n\n/**\n * @see {@link https://w3c.github.io/webappsec-referrer-policy/#default-referrer-policy|default referrer policy}\n */\nconst DEFAULT_REFERRER_POLICY = 'strict-origin-when-cross-origin';\n\n/**\n * @see {@link https://w3c.github.io/webappsec-referrer-policy/#referrer-policies|Referrer Policy 3. Referrer Policies}\n * @param {string} referrerPolicy\n * @returns {string} referrerPolicy\n */\nfunction validateReferrerPolicy(referrerPolicy) {\n\tif (!ReferrerPolicy.has(referrerPolicy)) {\n\t\tthrow new TypeError(`Invalid referrerPolicy: ${referrerPolicy}`);\n\t}\n\n\treturn referrerPolicy;\n}\n\n/**\n * @see {@link https://w3c.github.io/webappsec-secure-contexts/#is-origin-trustworthy|Referrer Policy 3.2. Is origin potentially trustworthy?}\n * @param {external:URL} url\n * @returns `true`: \"Potentially Trustworthy\", `false`: \"Not Trustworthy\"\n */\nfunction isOriginPotentiallyTrustworthy(url) {\n\t// 1. If origin is an opaque origin, return \"Not Trustworthy\".\n\t// Not applicable\n\n\t// 2. Assert: origin is a tuple origin.\n\t// Not for implementations\n\n\t// 3. If origin's scheme is either \"https\" or \"wss\", return \"Potentially Trustworthy\".\n\tif (/^(http|ws)s:$/.test(url.protocol)) {\n\t\treturn true;\n\t}\n\n\t// 4. If origin's host component matches one of the CIDR notations 127.0.0.0/8 or ::1/128 [RFC4632], return \"Potentially Trustworthy\".\n\tconst hostIp = url.host.replace(/(^\\[)|(]$)/g, '');\n\tconst hostIPVersion = net.isIP(hostIp);\n\n\tif (hostIPVersion === 4 && /^127\\./.test(hostIp)) {\n\t\treturn true;\n\t}\n\n\tif (hostIPVersion === 6 && /^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(hostIp)) {\n\t\treturn true;\n\t}\n\n\t// 5. If origin's host component is \"localhost\" or falls within \".localhost\", and the user agent conforms to the name resolution rules in [let-localhost-be-localhost], return \"Potentially Trustworthy\".\n\t// We are returning FALSE here because we cannot ensure conformance to\n\t// let-localhost-be-loalhost (https://tools.ietf.org/html/draft-west-let-localhost-be-localhost)\n\tif (/^(.+\\.)*localhost$/.test(url.host)) {\n\t\treturn false;\n\t}\n\n\t// 6. If origin's scheme component is file, return \"Potentially Trustworthy\".\n\tif (url.protocol === 'file:') {\n\t\treturn true;\n\t}\n\n\t// 7. If origin's scheme component is one which the user agent considers to be authenticated, return \"Potentially Trustworthy\".\n\t// Not supported\n\n\t// 8. If origin has been configured as a trustworthy origin, return \"Potentially Trustworthy\".\n\t// Not supported\n\n\t// 9. Return \"Not Trustworthy\".\n\treturn false;\n}\n\n/**\n * @see {@link https://w3c.github.io/webappsec-secure-contexts/#is-url-trustworthy|Referrer Policy 3.3. Is url potentially trustworthy?}\n * @param {external:URL} url\n * @returns `true`: \"Potentially Trustworthy\", `false`: \"Not Trustworthy\"\n */\nfunction isUrlPotentiallyTrustworthy(url) {\n\t// 1. If url is \"about:blank\" or \"about:srcdoc\", return \"Potentially Trustworthy\".\n\tif (/^about:(blank|srcdoc)$/.test(url)) {\n\t\treturn true;\n\t}\n\n\t// 2. If url's scheme is \"data\", return \"Potentially Trustworthy\".\n\tif (url.protocol === 'data:') {\n\t\treturn true;\n\t}\n\n\t// Note: The origin of blob: and filesystem: URLs is the origin of the context in which they were\n\t// created. Therefore, blobs created in a trustworthy origin will themselves be potentially\n\t// trustworthy.\n\tif (/^(blob|filesystem):$/.test(url.protocol)) {\n\t\treturn true;\n\t}\n\n\t// 3. Return the result of executing 3.2 Is origin potentially trustworthy? on url's origin.\n\treturn isOriginPotentiallyTrustworthy(url);\n}\n\n/**\n * Modifies the referrerURL to enforce any extra security policy considerations.\n * @see {@link https://w3c.github.io/webappsec-referrer-policy/#determine-requests-referrer|Referrer Policy 8.3. Determine request's Referrer}, step 7\n * @callback module:utils/referrer~referrerURLCallback\n * @param {external:URL} referrerURL\n * @returns {external:URL} modified referrerURL\n */\n\n/**\n * Modifies the referrerOrigin to enforce any extra security policy considerations.\n * @see {@link https://w3c.github.io/webappsec-referrer-policy/#determine-requests-referrer|Referrer Policy 8.3. Determine request's Referrer}, step 7\n * @callback module:utils/referrer~referrerOriginCallback\n * @param {external:URL} referrerOrigin\n * @returns {external:URL} modified referrerOrigin\n */\n\n/**\n * @see {@link https://w3c.github.io/webappsec-referrer-policy/#determine-requests-referrer|Referrer Policy 8.3. Determine request's Referrer}\n * @param {Request} request\n * @param {object} o\n * @param {module:utils/referrer~referrerURLCallback} o.referrerURLCallback\n * @param {module:utils/referrer~referrerOriginCallback} o.referrerOriginCallback\n * @returns {external:URL} Request's referrer\n */\nfunction determineRequestsReferrer(request, {referrerURLCallback, referrerOriginCallback} = {}) {\n\t// There are 2 notes in the specification about invalid pre-conditions.  We return null, here, for\n\t// these cases:\n\t// > Note: If request's referrer is \"no-referrer\", Fetch will not call into this algorithm.\n\t// > Note: If request's referrer policy is the empty string, Fetch will not call into this\n\t// > algorithm.\n\tif (request.referrer === 'no-referrer' || request.referrerPolicy === '') {\n\t\treturn null;\n\t}\n\n\t// 1. Let policy be request's associated referrer policy.\n\tconst policy = request.referrerPolicy;\n\n\t// 2. Let environment be request's client.\n\t// not applicable to node.js\n\n\t// 3. Switch on request's referrer:\n\tif (request.referrer === 'about:client') {\n\t\treturn 'no-referrer';\n\t}\n\n\t// \"a URL\": Let referrerSource be request's referrer.\n\tconst referrerSource = request.referrer;\n\n\t// 4. Let request's referrerURL be the result of stripping referrerSource for use as a referrer.\n\tlet referrerURL = stripURLForUseAsAReferrer(referrerSource);\n\n\t// 5. Let referrerOrigin be the result of stripping referrerSource for use as a referrer, with the\n\t//    origin-only flag set to true.\n\tlet referrerOrigin = stripURLForUseAsAReferrer(referrerSource, true);\n\n\t// 6. If the result of serializing referrerURL is a string whose length is greater than 4096, set\n\t//    referrerURL to referrerOrigin.\n\tif (referrerURL.toString().length > 4096) {\n\t\treferrerURL = referrerOrigin;\n\t}\n\n\t// 7. The user agent MAY alter referrerURL or referrerOrigin at this point to enforce arbitrary\n\t//    policy considerations in the interests of minimizing data leakage. For example, the user\n\t//    agent could strip the URL down to an origin, modify its host, replace it with an empty\n\t//    string, etc.\n\tif (referrerURLCallback) {\n\t\treferrerURL = referrerURLCallback(referrerURL);\n\t}\n\n\tif (referrerOriginCallback) {\n\t\treferrerOrigin = referrerOriginCallback(referrerOrigin);\n\t}\n\n\t// 8.Execute the statements corresponding to the value of policy:\n\tconst currentURL = new URL(request.url);\n\n\tswitch (policy) {\n\t\tcase 'no-referrer':\n\t\t\treturn 'no-referrer';\n\n\t\tcase 'origin':\n\t\t\treturn referrerOrigin;\n\n\t\tcase 'unsafe-url':\n\t\t\treturn referrerURL;\n\n\t\tcase 'strict-origin':\n\t\t\t// 1. If referrerURL is a potentially trustworthy URL and request's current URL is not a\n\t\t\t//    potentially trustworthy URL, then return no referrer.\n\t\t\tif (isUrlPotentiallyTrustworthy(referrerURL) && !isUrlPotentiallyTrustworthy(currentURL)) {\n\t\t\t\treturn 'no-referrer';\n\t\t\t}\n\n\t\t\t// 2. Return referrerOrigin.\n\t\t\treturn referrerOrigin.toString();\n\n\t\tcase 'strict-origin-when-cross-origin':\n\t\t\t// 1. If the origin of referrerURL and the origin of request's current URL are the same, then\n\t\t\t//    return referrerURL.\n\t\t\tif (referrerURL.origin === currentURL.origin) {\n\t\t\t\treturn referrerURL;\n\t\t\t}\n\n\t\t\t// 2. If referrerURL is a potentially trustworthy URL and request's current URL is not a\n\t\t\t//    potentially trustworthy URL, then return no referrer.\n\t\t\tif (isUrlPotentiallyTrustworthy(referrerURL) && !isUrlPotentiallyTrustworthy(currentURL)) {\n\t\t\t\treturn 'no-referrer';\n\t\t\t}\n\n\t\t\t// 3. Return referrerOrigin.\n\t\t\treturn referrerOrigin;\n\n\t\tcase 'same-origin':\n\t\t\t// 1. If the origin of referrerURL and the origin of request's current URL are the same, then\n\t\t\t//    return referrerURL.\n\t\t\tif (referrerURL.origin === currentURL.origin) {\n\t\t\t\treturn referrerURL;\n\t\t\t}\n\n\t\t\t// 2. Return no referrer.\n\t\t\treturn 'no-referrer';\n\n\t\tcase 'origin-when-cross-origin':\n\t\t\t// 1. If the origin of referrerURL and the origin of request's current URL are the same, then\n\t\t\t//    return referrerURL.\n\t\t\tif (referrerURL.origin === currentURL.origin) {\n\t\t\t\treturn referrerURL;\n\t\t\t}\n\n\t\t\t// Return referrerOrigin.\n\t\t\treturn referrerOrigin;\n\n\t\tcase 'no-referrer-when-downgrade':\n\t\t\t// 1. If referrerURL is a potentially trustworthy URL and request's current URL is not a\n\t\t\t//    potentially trustworthy URL, then return no referrer.\n\t\t\tif (isUrlPotentiallyTrustworthy(referrerURL) && !isUrlPotentiallyTrustworthy(currentURL)) {\n\t\t\t\treturn 'no-referrer';\n\t\t\t}\n\n\t\t\t// 2. Return referrerURL.\n\t\t\treturn referrerURL;\n\n\t\tdefault:\n\t\t\tthrow new TypeError(`Invalid referrerPolicy: ${policy}`);\n\t}\n}\n\n/**\n * @see {@link https://w3c.github.io/webappsec-referrer-policy/#parse-referrer-policy-from-header|Referrer Policy 8.1. Parse a referrer policy from a Referrer-Policy header}\n * @param {Headers} headers Response headers\n * @returns {string} policy\n */\nfunction parseReferrerPolicyFromHeader(headers) {\n\t// 1. Let policy-tokens be the result of extracting header list values given `Referrer-Policy`\n\t//    and responses header list.\n\tconst policyTokens = (headers.get('referrer-policy') || '').split(/[,\\s]+/);\n\n\t// 2. Let policy be the empty string.\n\tlet policy = '';\n\n\t// 3. For each token in policy-tokens, if token is a referrer policy and token is not the empty\n\t//    string, then set policy to token.\n\t// Note: This algorithm loops over multiple policy values to allow deployment of new policy\n\t// values with fallbacks for older user agents, as described in  11.1 Unknown Policy Values.\n\tfor (const token of policyTokens) {\n\t\tif (token && ReferrerPolicy.has(token)) {\n\t\t\tpolicy = token;\n\t\t}\n\t}\n\n\t// 4. Return policy.\n\treturn policy;\n}\n\nconst INTERNALS = Symbol('Request internals');\n\n/**\n * Check if `obj` is an instance of Request.\n *\n * @param  {*} obj\n * @return {boolean}\n */\nconst isRequest = object => {\n\treturn (\n\t\ttypeof object === 'object' &&\n\t\ttypeof object[INTERNALS] === 'object'\n\t);\n};\n\n/**\n * Request class\n *\n * Ref: https://fetch.spec.whatwg.org/#request-class\n *\n * @param   Mixed   input  Url or Request instance\n * @param   Object  init   Custom options\n * @return  Void\n */\nclass Request extends Body {\n\tconstructor(input, init = {}) {\n\t\tlet parsedURL;\n\n\t\t// Normalize input and force URL to be encoded as UTF-8 (https://github.com/node-fetch/node-fetch/issues/245)\n\t\tif (isRequest(input)) {\n\t\t\tparsedURL = new URL(input.url);\n\t\t} else {\n\t\t\tparsedURL = new URL(input);\n\t\t\tinput = {};\n\t\t}\n\n\t\tif (parsedURL.username !== '' || parsedURL.password !== '') {\n\t\t\tthrow new TypeError(`${parsedURL} is an url with embedded credentails.`);\n\t\t}\n\n\t\tlet method = init.method || input.method || 'GET';\n\t\tmethod = method.toUpperCase();\n\n\t\t// eslint-disable-next-line no-eq-null, eqeqeq\n\t\tif (((init.body != null || isRequest(input)) && input.body !== null) &&\n\t\t\t(method === 'GET' || method === 'HEAD')) {\n\t\t\tthrow new TypeError('Request with GET/HEAD method cannot have body');\n\t\t}\n\n\t\tconst inputBody = init.body ?\n\t\t\tinit.body :\n\t\t\t(isRequest(input) && input.body !== null ?\n\t\t\t\tclone(input) :\n\t\t\t\tnull);\n\n\t\tsuper(inputBody, {\n\t\t\tsize: init.size || input.size || 0\n\t\t});\n\n\t\tconst headers = new Headers(init.headers || input.headers || {});\n\n\t\tif (inputBody !== null && !headers.has('Content-Type')) {\n\t\t\tconst contentType = extractContentType(inputBody, this);\n\t\t\tif (contentType) {\n\t\t\t\theaders.set('Content-Type', contentType);\n\t\t\t}\n\t\t}\n\n\t\tlet signal = isRequest(input) ?\n\t\t\tinput.signal :\n\t\t\tnull;\n\t\tif ('signal' in init) {\n\t\t\tsignal = init.signal;\n\t\t}\n\n\t\t// eslint-disable-next-line no-eq-null, eqeqeq\n\t\tif (signal != null && !isAbortSignal(signal)) {\n\t\t\tthrow new TypeError('Expected signal to be an instanceof AbortSignal or EventTarget');\n\t\t}\n\n\t\t// 5.4, Request constructor steps, step 15.1\n\t\t// eslint-disable-next-line no-eq-null, eqeqeq\n\t\tlet referrer = init.referrer == null ? input.referrer : init.referrer;\n\t\tif (referrer === '') {\n\t\t\t// 5.4, Request constructor steps, step 15.2\n\t\t\treferrer = 'no-referrer';\n\t\t} else if (referrer) {\n\t\t\t// 5.4, Request constructor steps, step 15.3.1, 15.3.2\n\t\t\tconst parsedReferrer = new URL(referrer);\n\t\t\t// 5.4, Request constructor steps, step 15.3.3, 15.3.4\n\t\t\treferrer = /^about:(\\/\\/)?client$/.test(parsedReferrer) ? 'client' : parsedReferrer;\n\t\t} else {\n\t\t\treferrer = undefined;\n\t\t}\n\n\t\tthis[INTERNALS] = {\n\t\t\tmethod,\n\t\t\tredirect: init.redirect || input.redirect || 'follow',\n\t\t\theaders,\n\t\t\tparsedURL,\n\t\t\tsignal,\n\t\t\treferrer\n\t\t};\n\n\t\t// Node-fetch-only options\n\t\tthis.follow = init.follow === undefined ? (input.follow === undefined ? 20 : input.follow) : init.follow;\n\t\tthis.compress = init.compress === undefined ? (input.compress === undefined ? true : input.compress) : init.compress;\n\t\tthis.counter = init.counter || input.counter || 0;\n\t\tthis.agent = init.agent || input.agent;\n\t\tthis.highWaterMark = init.highWaterMark || input.highWaterMark || 16384;\n\t\tthis.insecureHTTPParser = init.insecureHTTPParser || input.insecureHTTPParser || false;\n\n\t\t// 5.4, Request constructor steps, step 16.\n\t\t// Default is empty string per https://fetch.spec.whatwg.org/#concept-request-referrer-policy\n\t\tthis.referrerPolicy = init.referrerPolicy || input.referrerPolicy || '';\n\t}\n\n\tget method() {\n\t\treturn this[INTERNALS].method;\n\t}\n\n\tget url() {\n\t\treturn url.format(this[INTERNALS].parsedURL);\n\t}\n\n\tget headers() {\n\t\treturn this[INTERNALS].headers;\n\t}\n\n\tget redirect() {\n\t\treturn this[INTERNALS].redirect;\n\t}\n\n\tget signal() {\n\t\treturn this[INTERNALS].signal;\n\t}\n\n\t// https://fetch.spec.whatwg.org/#dom-request-referrer\n\tget referrer() {\n\t\tif (this[INTERNALS].referrer === 'no-referrer') {\n\t\t\treturn '';\n\t\t}\n\n\t\tif (this[INTERNALS].referrer === 'client') {\n\t\t\treturn 'about:client';\n\t\t}\n\n\t\tif (this[INTERNALS].referrer) {\n\t\t\treturn this[INTERNALS].referrer.toString();\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tget referrerPolicy() {\n\t\treturn this[INTERNALS].referrerPolicy;\n\t}\n\n\tset referrerPolicy(referrerPolicy) {\n\t\tthis[INTERNALS].referrerPolicy = validateReferrerPolicy(referrerPolicy);\n\t}\n\n\t/**\n\t * Clone this request\n\t *\n\t * @return  Request\n\t */\n\tclone() {\n\t\treturn new Request(this);\n\t}\n\n\tget [Symbol.toStringTag]() {\n\t\treturn 'Request';\n\t}\n}\n\nObject.defineProperties(Request.prototype, {\n\tmethod: {enumerable: true},\n\turl: {enumerable: true},\n\theaders: {enumerable: true},\n\tredirect: {enumerable: true},\n\tclone: {enumerable: true},\n\tsignal: {enumerable: true},\n\treferrer: {enumerable: true},\n\treferrerPolicy: {enumerable: true}\n});\n\n/**\n * Convert a Request to Node.js http request options.\n *\n * @param   Request  A Request instance\n * @return  Object   The options object to be passed to http.request\n */\nconst getNodeRequestOptions = request => {\n\tconst {parsedURL} = request[INTERNALS];\n\tconst headers = new Headers(request[INTERNALS].headers);\n\n\t// Fetch step 1.3\n\tif (!headers.has('Accept')) {\n\t\theaders.set('Accept', '*/*');\n\t}\n\n\t// HTTP-network-or-cache fetch steps 2.4-2.7\n\tlet contentLengthValue = null;\n\tif (request.body === null && /^(post|put)$/i.test(request.method)) {\n\t\tcontentLengthValue = '0';\n\t}\n\n\tif (request.body !== null) {\n\t\tconst totalBytes = getTotalBytes(request);\n\t\t// Set Content-Length if totalBytes is a number (that is not NaN)\n\t\tif (typeof totalBytes === 'number' && !Number.isNaN(totalBytes)) {\n\t\t\tcontentLengthValue = String(totalBytes);\n\t\t}\n\t}\n\n\tif (contentLengthValue) {\n\t\theaders.set('Content-Length', contentLengthValue);\n\t}\n\n\t// 4.1. Main fetch, step 2.6\n\t// > If request's referrer policy is the empty string, then set request's referrer policy to the\n\t// > default referrer policy.\n\tif (request.referrerPolicy === '') {\n\t\trequest.referrerPolicy = DEFAULT_REFERRER_POLICY;\n\t}\n\n\t// 4.1. Main fetch, step 2.7\n\t// > If request's referrer is not \"no-referrer\", set request's referrer to the result of invoking\n\t// > determine request's referrer.\n\tif (request.referrer && request.referrer !== 'no-referrer') {\n\t\trequest[INTERNALS].referrer = determineRequestsReferrer(request);\n\t} else {\n\t\trequest[INTERNALS].referrer = 'no-referrer';\n\t}\n\n\t// 4.5. HTTP-network-or-cache fetch, step 6.9\n\t// > If httpRequest's referrer is a URL, then append `Referer`/httpRequest's referrer, serialized\n\t// >  and isomorphic encoded, to httpRequest's header list.\n\tif (request[INTERNALS].referrer instanceof URL) {\n\t\theaders.set('Referer', request.referrer);\n\t}\n\n\t// HTTP-network-or-cache fetch step 2.11\n\tif (!headers.has('User-Agent')) {\n\t\theaders.set('User-Agent', 'node-fetch');\n\t}\n\n\t// HTTP-network-or-cache fetch step 2.15\n\tif (request.compress && !headers.has('Accept-Encoding')) {\n\t\theaders.set('Accept-Encoding', 'gzip,deflate,br');\n\t}\n\n\tlet {agent} = request;\n\tif (typeof agent === 'function') {\n\t\tagent = agent(parsedURL);\n\t}\n\n\tif (!headers.has('Connection') && !agent) {\n\t\theaders.set('Connection', 'close');\n\t}\n\n\t// HTTP-network fetch step 4.2\n\t// chunked encoding is handled by Node.js\n\n\tconst search = getSearch(parsedURL);\n\n\t// Pass the full URL directly to request(), but overwrite the following\n\t// options:\n\tconst options = {\n\t\t// Overwrite search to retain trailing ? (issue #776)\n\t\tpath: parsedURL.pathname + search,\n\t\t// The following options are not expressed in the URL\n\t\tmethod: request.method,\n\t\theaders: headers[Symbol.for('nodejs.util.inspect.custom')](),\n\t\tinsecureHTTPParser: request.insecureHTTPParser,\n\t\tagent\n\t};\n\n\treturn {\n\t\tparsedURL,\n\t\toptions\n\t};\n};\n\n/**\n * AbortError interface for cancelled requests\n */\nclass AbortError extends FetchBaseError {\n\tconstructor(message, type = 'aborted') {\n\t\tsuper(message, type);\n\t}\n}\n\n/**\n * Index.js\n *\n * a request API compatible with window.fetch\n *\n * All spec algorithm step numbers are based on https://fetch.spec.whatwg.org/commit-snapshots/ae716822cb3a61843226cd090eefc6589446c1d2/.\n */\n\nconst supportedSchemas = new Set(['data:', 'http:', 'https:']);\n\n/**\n * Fetch function\n *\n * @param   {string | URL | import('./request').default} url - Absolute url or Request instance\n * @param   {*} [options_] - Fetch options\n * @return  {Promise<import('./response').default>}\n */\nasync function fetch(url, options_) {\n\treturn new Promise((resolve, reject) => {\n\t\t// Build request object\n\t\tconst request = new Request(url, options_);\n\t\tconst {parsedURL, options} = getNodeRequestOptions(request);\n\t\tif (!supportedSchemas.has(parsedURL.protocol)) {\n\t\t\tthrow new TypeError(`node-fetch cannot load ${url}. URL scheme \"${parsedURL.protocol.replace(/:$/, '')}\" is not supported.`);\n\t\t}\n\n\t\tif (parsedURL.protocol === 'data:') {\n\t\t\tconst data = dataUriToBuffer(request.url);\n\t\t\tconst response = new Response(data, {headers: {'Content-Type': data.typeFull}});\n\t\t\tresolve(response);\n\t\t\treturn;\n\t\t}\n\n\t\t// Wrap http.request into fetch\n\t\tconst send = (parsedURL.protocol === 'https:' ? https__default[\"default\"] : http__default[\"default\"]).request;\n\t\tconst {signal} = request;\n\t\tlet response = null;\n\n\t\tconst abort = () => {\n\t\t\tconst error = new AbortError('The operation was aborted.');\n\t\t\treject(error);\n\t\t\tif (request.body && request.body instanceof Stream__default[\"default\"].Readable) {\n\t\t\t\trequest.body.destroy(error);\n\t\t\t}\n\n\t\t\tif (!response || !response.body) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tresponse.body.emit('error', error);\n\t\t};\n\n\t\tif (signal && signal.aborted) {\n\t\t\tabort();\n\t\t\treturn;\n\t\t}\n\n\t\tconst abortAndFinalize = () => {\n\t\t\tabort();\n\t\t\tfinalize();\n\t\t};\n\n\t\t// Send request\n\t\tconst request_ = send(parsedURL, options);\n\n\t\tif (signal) {\n\t\t\tsignal.addEventListener('abort', abortAndFinalize);\n\t\t}\n\n\t\tconst finalize = () => {\n\t\t\trequest_.abort();\n\t\t\tif (signal) {\n\t\t\t\tsignal.removeEventListener('abort', abortAndFinalize);\n\t\t\t}\n\t\t};\n\n\t\trequest_.on('error', error => {\n\t\t\treject(new FetchError(`request to ${request.url} failed, reason: ${error.message}`, 'system', error));\n\t\t\tfinalize();\n\t\t});\n\n\t\tfixResponseChunkedTransferBadEnding(request_, error => {\n\t\t\tresponse.body.destroy(error);\n\t\t});\n\n\t\t/* c8 ignore next 18 */\n\t\tif (process.version < 'v14') {\n\t\t\t// Before Node.js 14, pipeline() does not fully support async iterators and does not always\n\t\t\t// properly handle when the socket close/end events are out of order.\n\t\t\trequest_.on('socket', s => {\n\t\t\t\tlet endedWithEventsCount;\n\t\t\t\ts.prependListener('end', () => {\n\t\t\t\t\tendedWithEventsCount = s._eventsCount;\n\t\t\t\t});\n\t\t\t\ts.prependListener('close', hadError => {\n\t\t\t\t\t// if end happened before close but the socket didn't emit an error, do it now\n\t\t\t\t\tif (response && endedWithEventsCount < s._eventsCount && !hadError) {\n\t\t\t\t\t\tconst error = new Error('Premature close');\n\t\t\t\t\t\terror.code = 'ERR_STREAM_PREMATURE_CLOSE';\n\t\t\t\t\t\tresponse.body.emit('error', error);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\trequest_.on('response', response_ => {\n\t\t\trequest_.setTimeout(0);\n\t\t\tconst headers = fromRawHeaders(response_.rawHeaders);\n\n\t\t\t// HTTP fetch step 5\n\t\t\tif (isRedirect(response_.statusCode)) {\n\t\t\t\t// HTTP fetch step 5.2\n\t\t\t\tconst location = headers.get('Location');\n\n\t\t\t\t// HTTP fetch step 5.3\n\t\t\t\tconst locationURL = location === null ? null : new URL(location, request.url);\n\n\t\t\t\t// HTTP fetch step 5.5\n\t\t\t\tswitch (request.redirect) {\n\t\t\t\t\tcase 'error':\n\t\t\t\t\t\treject(new FetchError(`uri requested responds with a redirect, redirect mode is set to error: ${request.url}`, 'no-redirect'));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t\tcase 'manual':\n\t\t\t\t\t\t// Node-fetch-specific step: make manual redirect a bit easier to use by setting the Location header value to the resolved URL.\n\t\t\t\t\t\tif (locationURL !== null) {\n\t\t\t\t\t\t\theaders.set('Location', locationURL);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'follow': {\n\t\t\t\t\t\t// HTTP-redirect fetch step 2\n\t\t\t\t\t\tif (locationURL === null) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 5\n\t\t\t\t\t\tif (request.counter >= request.follow) {\n\t\t\t\t\t\t\treject(new FetchError(`maximum redirect reached at: ${request.url}`, 'max-redirect'));\n\t\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 6 (counter increment)\n\t\t\t\t\t\t// Create a new Request object.\n\t\t\t\t\t\tconst requestOptions = {\n\t\t\t\t\t\t\theaders: new Headers(request.headers),\n\t\t\t\t\t\t\tfollow: request.follow,\n\t\t\t\t\t\t\tcounter: request.counter + 1,\n\t\t\t\t\t\t\tagent: request.agent,\n\t\t\t\t\t\t\tcompress: request.compress,\n\t\t\t\t\t\t\tmethod: request.method,\n\t\t\t\t\t\t\tbody: clone(request),\n\t\t\t\t\t\t\tsignal: request.signal,\n\t\t\t\t\t\t\tsize: request.size,\n\t\t\t\t\t\t\treferrer: request.referrer,\n\t\t\t\t\t\t\treferrerPolicy: request.referrerPolicy\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 9\n\t\t\t\t\t\tif (response_.statusCode !== 303 && request.body && options_.body instanceof Stream__default[\"default\"].Readable) {\n\t\t\t\t\t\t\treject(new FetchError('Cannot follow redirect with body being a readable stream', 'unsupported-redirect'));\n\t\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 11\n\t\t\t\t\t\tif (response_.statusCode === 303 || ((response_.statusCode === 301 || response_.statusCode === 302) && request.method === 'POST')) {\n\t\t\t\t\t\t\trequestOptions.method = 'GET';\n\t\t\t\t\t\t\trequestOptions.body = undefined;\n\t\t\t\t\t\t\trequestOptions.headers.delete('content-length');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 14\n\t\t\t\t\t\tconst responseReferrerPolicy = parseReferrerPolicyFromHeader(headers);\n\t\t\t\t\t\tif (responseReferrerPolicy) {\n\t\t\t\t\t\t\trequestOptions.referrerPolicy = responseReferrerPolicy;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 15\n\t\t\t\t\t\tresolve(fetch(new Request(locationURL, requestOptions)));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn reject(new TypeError(`Redirect option '${request.redirect}' is not a valid value of RequestRedirect`));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Prepare response\n\t\t\tif (signal) {\n\t\t\t\tresponse_.once('end', () => {\n\t\t\t\t\tsignal.removeEventListener('abort', abortAndFinalize);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tlet body = Stream.pipeline(response_, new Stream.PassThrough(), reject);\n\t\t\t// see https://github.com/nodejs/node/pull/29376\n\t\t\tif (process.version < 'v12.10') {\n\t\t\t\tresponse_.on('aborted', abortAndFinalize);\n\t\t\t}\n\n\t\t\tconst responseOptions = {\n\t\t\t\turl: request.url,\n\t\t\t\tstatus: response_.statusCode,\n\t\t\t\tstatusText: response_.statusMessage,\n\t\t\t\theaders,\n\t\t\t\tsize: request.size,\n\t\t\t\tcounter: request.counter,\n\t\t\t\thighWaterMark: request.highWaterMark\n\t\t\t};\n\n\t\t\t// HTTP-network fetch step 12.1.1.3\n\t\t\tconst codings = headers.get('Content-Encoding');\n\n\t\t\t// HTTP-network fetch step 12.1.1.4: handle content codings\n\n\t\t\t// in following scenarios we ignore compression support\n\t\t\t// 1. compression support is disabled\n\t\t\t// 2. HEAD request\n\t\t\t// 3. no Content-Encoding header\n\t\t\t// 4. no content response (204)\n\t\t\t// 5. content not modified response (304)\n\t\t\tif (!request.compress || request.method === 'HEAD' || codings === null || response_.statusCode === 204 || response_.statusCode === 304) {\n\t\t\t\tresponse = new Response(body, responseOptions);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// For Node v6+\n\t\t\t// Be less strict when decoding compressed responses, since sometimes\n\t\t\t// servers send slightly invalid responses that are still accepted\n\t\t\t// by common browsers.\n\t\t\t// Always using Z_SYNC_FLUSH is what cURL does.\n\t\t\tconst zlibOptions = {\n\t\t\t\tflush: zlib__default[\"default\"].Z_SYNC_FLUSH,\n\t\t\t\tfinishFlush: zlib__default[\"default\"].Z_SYNC_FLUSH\n\t\t\t};\n\n\t\t\t// For gzip\n\t\t\tif (codings === 'gzip' || codings === 'x-gzip') {\n\t\t\t\tbody = Stream.pipeline(body, zlib__default[\"default\"].createGunzip(zlibOptions), reject);\n\t\t\t\tresponse = new Response(body, responseOptions);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// For deflate\n\t\t\tif (codings === 'deflate' || codings === 'x-deflate') {\n\t\t\t\t// Handle the infamous raw deflate response from old servers\n\t\t\t\t// a hack for old IIS and Apache servers\n\t\t\t\tconst raw = Stream.pipeline(response_, new Stream.PassThrough(), reject);\n\t\t\t\traw.once('data', chunk => {\n\t\t\t\t\t// See http://stackoverflow.com/questions/37519828\n\t\t\t\t\tbody = (chunk[0] & 0x0F) === 0x08 ? Stream.pipeline(body, zlib__default[\"default\"].createInflate(), reject) : Stream.pipeline(body, zlib__default[\"default\"].createInflateRaw(), reject);\n\n\t\t\t\t\tresponse = new Response(body, responseOptions);\n\t\t\t\t\tresolve(response);\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// For br\n\t\t\tif (codings === 'br') {\n\t\t\t\tbody = Stream.pipeline(body, zlib__default[\"default\"].createBrotliDecompress(), reject);\n\t\t\t\tresponse = new Response(body, responseOptions);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Otherwise, use response as-is\n\t\t\tresponse = new Response(body, responseOptions);\n\t\t\tresolve(response);\n\t\t});\n\n\t\twriteToStream(request_, request);\n\t});\n}\n\nfunction fixResponseChunkedTransferBadEnding(request, errorCallback) {\n\tconst LAST_CHUNK = Buffer.from('0\\r\\n\\r\\n');\n\n\tlet isChunkedTransfer = false;\n\tlet properLastChunkReceived = false;\n\tlet previousChunk;\n\n\trequest.on('response', response => {\n\t\tconst {headers} = response;\n\t\tisChunkedTransfer = headers['transfer-encoding'] === 'chunked' && !headers['content-length'];\n\t});\n\n\trequest.on('socket', socket => {\n\t\tconst onSocketClose = () => {\n\t\t\tif (isChunkedTransfer && !properLastChunkReceived) {\n\t\t\t\tconst error = new Error('Premature close');\n\t\t\t\terror.code = 'ERR_STREAM_PREMATURE_CLOSE';\n\t\t\t\terrorCallback(error);\n\t\t\t}\n\t\t};\n\n\t\tsocket.prependListener('close', onSocketClose);\n\n\t\trequest.on('abort', () => {\n\t\t\tsocket.removeListener('close', onSocketClose);\n\t\t});\n\n\t\tsocket.on('data', buf => {\n\t\t\tproperLastChunkReceived = Buffer.compare(buf.slice(-5), LAST_CHUNK) === 0;\n\n\t\t\t// Sometimes final 0-length chunk and end of message code are in separate packets\n\t\t\tif (!properLastChunkReceived && previousChunk) {\n\t\t\t\tproperLastChunkReceived = (\n\t\t\t\t\tBuffer.compare(previousChunk.slice(-3), LAST_CHUNK.slice(0, 3)) === 0 &&\n\t\t\t\t\tBuffer.compare(buf.slice(-2), LAST_CHUNK.slice(3)) === 0\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tpreviousChunk = buf;\n\t\t});\n\t});\n}\n\nexports.AbortError = AbortError;\nexports.FetchError = FetchError;\nexports.File = File;\nexports.FormData = FormData;\nexports.Headers = Headers;\nexports.Request = Request;\nexports.Response = Response;\nexports.fetch = fetch;\nexports.isRedirect = isRedirect;\n/* eslint-enable */\n//# sourceMappingURL=index-3a548b1a.js.map\n","/* eslint-disable */\n'use strict';\n\n\n\nrequire('http');\nrequire('https');\nrequire('zlib');\nrequire('stream');\nvar index = require('./index-3a548b1a.js');\nmodule.exports = exports = index.fetch;\nObject.defineProperty(exports, '__esModule', { value: true });\nrequire('util');\nrequire('url');\nrequire('net');\n\n\n\nexports.AbortError = index.AbortError;\nexports.FetchError = index.FetchError;\nexports.Headers = index.Headers;\nexports.Request = index.Request;\nexports.Response = index.Response;\nexports[\"default\"] = index.fetch;\nexports.isRedirect = index.isRedirect;\n/* eslint-enable */\n//# sourceMappingURL=index.js.map\n","/* eslint-disable */\n'use strict';\n\nrequire('fs');\nrequire('path');\nvar worker_threads = require('worker_threads');\nvar index = require('./index-3a548b1a.js');\nrequire('http');\nrequire('https');\nrequire('zlib');\nrequire('stream');\nrequire('util');\nrequire('url');\nrequire('net');\n\nglobalThis.DOMException || (() => {\n\tconst port = new worker_threads.MessageChannel().port1;\n\tconst ab = new ArrayBuffer(0);\n\ttry { port.postMessage(ab, [ab, ab]); }\n\tcatch (err) { return err.constructor }\n})();\n\nlet s = 0;\nconst S = {\n\tSTART_BOUNDARY: s++,\n\tHEADER_FIELD_START: s++,\n\tHEADER_FIELD: s++,\n\tHEADER_VALUE_START: s++,\n\tHEADER_VALUE: s++,\n\tHEADER_VALUE_ALMOST_DONE: s++,\n\tHEADERS_ALMOST_DONE: s++,\n\tPART_DATA_START: s++,\n\tPART_DATA: s++,\n\tEND: s++\n};\n\nlet f = 1;\nconst F = {\n\tPART_BOUNDARY: f,\n\tLAST_BOUNDARY: f *= 2\n};\n\nconst LF = 10;\nconst CR = 13;\nconst SPACE = 32;\nconst HYPHEN = 45;\nconst COLON = 58;\nconst A = 97;\nconst Z = 122;\n\nconst lower = c => c | 0x20;\n\nconst noop = () => {};\n\nclass MultipartParser {\n\t/**\n\t * @param {string} boundary\n\t */\n\tconstructor(boundary) {\n\t\tthis.index = 0;\n\t\tthis.flags = 0;\n\n\t\tthis.onHeaderEnd = noop;\n\t\tthis.onHeaderField = noop;\n\t\tthis.onHeadersEnd = noop;\n\t\tthis.onHeaderValue = noop;\n\t\tthis.onPartBegin = noop;\n\t\tthis.onPartData = noop;\n\t\tthis.onPartEnd = noop;\n\n\t\tthis.boundaryChars = {};\n\n\t\tboundary = '\\r\\n--' + boundary;\n\t\tconst ui8a = new Uint8Array(boundary.length);\n\t\tfor (let i = 0; i < boundary.length; i++) {\n\t\t\tui8a[i] = boundary.charCodeAt(i);\n\t\t\tthis.boundaryChars[ui8a[i]] = true;\n\t\t}\n\n\t\tthis.boundary = ui8a;\n\t\tthis.lookbehind = new Uint8Array(this.boundary.length + 8);\n\t\tthis.state = S.START_BOUNDARY;\n\t}\n\n\t/**\n\t * @param {Uint8Array} data\n\t */\n\twrite(data) {\n\t\tlet i = 0;\n\t\tconst length_ = data.length;\n\t\tlet previousIndex = this.index;\n\t\tlet {lookbehind, boundary, boundaryChars, index, state, flags} = this;\n\t\tconst boundaryLength = this.boundary.length;\n\t\tconst boundaryEnd = boundaryLength - 1;\n\t\tconst bufferLength = data.length;\n\t\tlet c;\n\t\tlet cl;\n\n\t\tconst mark = name => {\n\t\t\tthis[name + 'Mark'] = i;\n\t\t};\n\n\t\tconst clear = name => {\n\t\t\tdelete this[name + 'Mark'];\n\t\t};\n\n\t\tconst callback = (callbackSymbol, start, end, ui8a) => {\n\t\t\tif (start === undefined || start !== end) {\n\t\t\t\tthis[callbackSymbol](ui8a && ui8a.subarray(start, end));\n\t\t\t}\n\t\t};\n\n\t\tconst dataCallback = (name, clear) => {\n\t\t\tconst markSymbol = name + 'Mark';\n\t\t\tif (!(markSymbol in this)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (clear) {\n\t\t\t\tcallback(name, this[markSymbol], i, data);\n\t\t\t\tdelete this[markSymbol];\n\t\t\t} else {\n\t\t\t\tcallback(name, this[markSymbol], data.length, data);\n\t\t\t\tthis[markSymbol] = 0;\n\t\t\t}\n\t\t};\n\n\t\tfor (i = 0; i < length_; i++) {\n\t\t\tc = data[i];\n\n\t\t\tswitch (state) {\n\t\t\t\tcase S.START_BOUNDARY:\n\t\t\t\t\tif (index === boundary.length - 2) {\n\t\t\t\t\t\tif (c === HYPHEN) {\n\t\t\t\t\t\t\tflags |= F.LAST_BOUNDARY;\n\t\t\t\t\t\t} else if (c !== CR) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tindex++;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t} else if (index - 1 === boundary.length - 2) {\n\t\t\t\t\t\tif (flags & F.LAST_BOUNDARY && c === HYPHEN) {\n\t\t\t\t\t\t\tstate = S.END;\n\t\t\t\t\t\t\tflags = 0;\n\t\t\t\t\t\t} else if (!(flags & F.LAST_BOUNDARY) && c === LF) {\n\t\t\t\t\t\t\tindex = 0;\n\t\t\t\t\t\t\tcallback('onPartBegin');\n\t\t\t\t\t\t\tstate = S.HEADER_FIELD_START;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (c !== boundary[index + 2]) {\n\t\t\t\t\t\tindex = -2;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (c === boundary[index + 2]) {\n\t\t\t\t\t\tindex++;\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\tcase S.HEADER_FIELD_START:\n\t\t\t\t\tstate = S.HEADER_FIELD;\n\t\t\t\t\tmark('onHeaderField');\n\t\t\t\t\tindex = 0;\n\t\t\t\t\t// falls through\n\t\t\t\tcase S.HEADER_FIELD:\n\t\t\t\t\tif (c === CR) {\n\t\t\t\t\t\tclear('onHeaderField');\n\t\t\t\t\t\tstate = S.HEADERS_ALMOST_DONE;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tindex++;\n\t\t\t\t\tif (c === HYPHEN) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (c === COLON) {\n\t\t\t\t\t\tif (index === 1) {\n\t\t\t\t\t\t\t// empty header field\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdataCallback('onHeaderField', true);\n\t\t\t\t\t\tstate = S.HEADER_VALUE_START;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcl = lower(c);\n\t\t\t\t\tif (cl < A || cl > Z) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\tcase S.HEADER_VALUE_START:\n\t\t\t\t\tif (c === SPACE) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tmark('onHeaderValue');\n\t\t\t\t\tstate = S.HEADER_VALUE;\n\t\t\t\t\t// falls through\n\t\t\t\tcase S.HEADER_VALUE:\n\t\t\t\t\tif (c === CR) {\n\t\t\t\t\t\tdataCallback('onHeaderValue', true);\n\t\t\t\t\t\tcallback('onHeaderEnd');\n\t\t\t\t\t\tstate = S.HEADER_VALUE_ALMOST_DONE;\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\tcase S.HEADER_VALUE_ALMOST_DONE:\n\t\t\t\t\tif (c !== LF) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tstate = S.HEADER_FIELD_START;\n\t\t\t\t\tbreak;\n\t\t\t\tcase S.HEADERS_ALMOST_DONE:\n\t\t\t\t\tif (c !== LF) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tcallback('onHeadersEnd');\n\t\t\t\t\tstate = S.PART_DATA_START;\n\t\t\t\t\tbreak;\n\t\t\t\tcase S.PART_DATA_START:\n\t\t\t\t\tstate = S.PART_DATA;\n\t\t\t\t\tmark('onPartData');\n\t\t\t\t\t// falls through\n\t\t\t\tcase S.PART_DATA:\n\t\t\t\t\tpreviousIndex = index;\n\n\t\t\t\t\tif (index === 0) {\n\t\t\t\t\t\t// boyer-moore derrived algorithm to safely skip non-boundary data\n\t\t\t\t\t\ti += boundaryEnd;\n\t\t\t\t\t\twhile (i < bufferLength && !(data[i] in boundaryChars)) {\n\t\t\t\t\t\t\ti += boundaryLength;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ti -= boundaryEnd;\n\t\t\t\t\t\tc = data[i];\n\t\t\t\t\t}\n\n\t\t\t\t\tif (index < boundary.length) {\n\t\t\t\t\t\tif (boundary[index] === c) {\n\t\t\t\t\t\t\tif (index === 0) {\n\t\t\t\t\t\t\t\tdataCallback('onPartData', true);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tindex++;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tindex = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (index === boundary.length) {\n\t\t\t\t\t\tindex++;\n\t\t\t\t\t\tif (c === CR) {\n\t\t\t\t\t\t\t// CR = part boundary\n\t\t\t\t\t\t\tflags |= F.PART_BOUNDARY;\n\t\t\t\t\t\t} else if (c === HYPHEN) {\n\t\t\t\t\t\t\t// HYPHEN = end boundary\n\t\t\t\t\t\t\tflags |= F.LAST_BOUNDARY;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tindex = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (index - 1 === boundary.length) {\n\t\t\t\t\t\tif (flags & F.PART_BOUNDARY) {\n\t\t\t\t\t\t\tindex = 0;\n\t\t\t\t\t\t\tif (c === LF) {\n\t\t\t\t\t\t\t\t// unset the PART_BOUNDARY flag\n\t\t\t\t\t\t\t\tflags &= ~F.PART_BOUNDARY;\n\t\t\t\t\t\t\t\tcallback('onPartEnd');\n\t\t\t\t\t\t\t\tcallback('onPartBegin');\n\t\t\t\t\t\t\t\tstate = S.HEADER_FIELD_START;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (flags & F.LAST_BOUNDARY) {\n\t\t\t\t\t\t\tif (c === HYPHEN) {\n\t\t\t\t\t\t\t\tcallback('onPartEnd');\n\t\t\t\t\t\t\t\tstate = S.END;\n\t\t\t\t\t\t\t\tflags = 0;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tindex = 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tindex = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (index > 0) {\n\t\t\t\t\t\t// when matching a possible boundary, keep a lookbehind reference\n\t\t\t\t\t\t// in case it turns out to be a false lead\n\t\t\t\t\t\tlookbehind[index - 1] = c;\n\t\t\t\t\t} else if (previousIndex > 0) {\n\t\t\t\t\t\t// if our boundary turned out to be rubbish, the captured lookbehind\n\t\t\t\t\t\t// belongs to partData\n\t\t\t\t\t\tconst _lookbehind = new Uint8Array(lookbehind.buffer, lookbehind.byteOffset, lookbehind.byteLength);\n\t\t\t\t\t\tcallback('onPartData', 0, previousIndex, _lookbehind);\n\t\t\t\t\t\tpreviousIndex = 0;\n\t\t\t\t\t\tmark('onPartData');\n\n\t\t\t\t\t\t// reconsider the current character even so it interrupted the sequence\n\t\t\t\t\t\t// it could be the beginning of a new sequence\n\t\t\t\t\t\ti--;\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\tcase S.END:\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new Error(`Unexpected state entered: ${state}`);\n\t\t\t}\n\t\t}\n\n\t\tdataCallback('onHeaderField');\n\t\tdataCallback('onHeaderValue');\n\t\tdataCallback('onPartData');\n\n\t\t// Update properties for the next call\n\t\tthis.index = index;\n\t\tthis.state = state;\n\t\tthis.flags = flags;\n\t}\n\n\tend() {\n\t\tif ((this.state === S.HEADER_FIELD_START && this.index === 0) ||\n\t\t\t(this.state === S.PART_DATA && this.index === this.boundary.length)) {\n\t\t\tthis.onPartEnd();\n\t\t} else if (this.state !== S.END) {\n\t\t\tthrow new Error('MultipartParser.end(): stream ended unexpectedly');\n\t\t}\n\t}\n}\n\nfunction _fileName(headerValue) {\n\t// matches either a quoted-string or a token (RFC 2616 section 19.5.1)\n\tconst m = headerValue.match(/\\bfilename=(\"(.*?)\"|([^()<>@,;:\\\\\"/[\\]?={}\\s\\t]+))($|;\\s)/i);\n\tif (!m) {\n\t\treturn;\n\t}\n\n\tconst match = m[2] || m[3] || '';\n\tlet filename = match.slice(match.lastIndexOf('\\\\') + 1);\n\tfilename = filename.replace(/%22/g, '\"');\n\tfilename = filename.replace(/&#(\\d{4});/g, (m, code) => {\n\t\treturn String.fromCharCode(code);\n\t});\n\treturn filename;\n}\n\nasync function toFormData(Body, ct) {\n\tif (!/multipart/i.test(ct)) {\n\t\tthrow new TypeError('Failed to fetch');\n\t}\n\n\tconst m = ct.match(/boundary=(?:\"([^\"]+)\"|([^;]+))/i);\n\n\tif (!m) {\n\t\tthrow new TypeError('no or bad content-type header, no multipart boundary');\n\t}\n\n\tconst parser = new MultipartParser(m[1] || m[2]);\n\n\tlet headerField;\n\tlet headerValue;\n\tlet entryValue;\n\tlet entryName;\n\tlet contentType;\n\tlet filename;\n\tconst entryChunks = [];\n\tconst formData = new index.FormData();\n\n\tconst onPartData = ui8a => {\n\t\tentryValue += decoder.decode(ui8a, {stream: true});\n\t};\n\n\tconst appendToFile = ui8a => {\n\t\tentryChunks.push(ui8a);\n\t};\n\n\tconst appendFileToFormData = () => {\n\t\tconst file = new index.File(entryChunks, filename, {type: contentType});\n\t\tformData.append(entryName, file);\n\t};\n\n\tconst appendEntryToFormData = () => {\n\t\tformData.append(entryName, entryValue);\n\t};\n\n\tconst decoder = new TextDecoder('utf-8');\n\tdecoder.decode();\n\n\tparser.onPartBegin = function () {\n\t\tparser.onPartData = onPartData;\n\t\tparser.onPartEnd = appendEntryToFormData;\n\n\t\theaderField = '';\n\t\theaderValue = '';\n\t\tentryValue = '';\n\t\tentryName = '';\n\t\tcontentType = '';\n\t\tfilename = null;\n\t\tentryChunks.length = 0;\n\t};\n\n\tparser.onHeaderField = function (ui8a) {\n\t\theaderField += decoder.decode(ui8a, {stream: true});\n\t};\n\n\tparser.onHeaderValue = function (ui8a) {\n\t\theaderValue += decoder.decode(ui8a, {stream: true});\n\t};\n\n\tparser.onHeaderEnd = function () {\n\t\theaderValue += decoder.decode();\n\t\theaderField = headerField.toLowerCase();\n\n\t\tif (headerField === 'content-disposition') {\n\t\t\t// matches either a quoted-string or a token (RFC 2616 section 19.5.1)\n\t\t\tconst m = headerValue.match(/\\bname=(\"([^\"]*)\"|([^()<>@,;:\\\\\"/[\\]?={}\\s\\t]+))/i);\n\n\t\t\tif (m) {\n\t\t\t\tentryName = m[2] || m[3] || '';\n\t\t\t}\n\n\t\t\tfilename = _fileName(headerValue);\n\n\t\t\tif (filename) {\n\t\t\t\tparser.onPartData = appendToFile;\n\t\t\t\tparser.onPartEnd = appendFileToFormData;\n\t\t\t}\n\t\t} else if (headerField === 'content-type') {\n\t\t\tcontentType = headerValue;\n\t\t}\n\n\t\theaderValue = '';\n\t\theaderField = '';\n\t};\n\n\tfor await (const chunk of Body) {\n\t\tparser.write(chunk);\n\t}\n\n\tparser.end();\n\n\treturn formData;\n}\n\nexports.toFormData = toFormData;\n/* eslint-enable */\n//# sourceMappingURL=multipart-parser-dc9090bd.js.map\n","/**\n * web-streams-polyfill v3.2.0\n */\n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n    typeof define === 'function' && define.amd ? define(['exports'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.WebStreamsPolyfill = {}));\n}(this, (function (exports) { 'use strict';\n\n    /// <reference lib=\"es2015.symbol\" />\n    const SymbolPolyfill = typeof Symbol === 'function' && typeof Symbol.iterator === 'symbol' ?\n        Symbol :\n        description => `Symbol(${description})`;\n\n    /// <reference lib=\"dom\" />\n    function noop() {\n        return undefined;\n    }\n    function getGlobals() {\n        if (typeof self !== 'undefined') {\n            return self;\n        }\n        else if (typeof window !== 'undefined') {\n            return window;\n        }\n        else if (typeof global !== 'undefined') {\n            return global;\n        }\n        return undefined;\n    }\n    const globals = getGlobals();\n\n    function typeIsObject(x) {\n        return (typeof x === 'object' && x !== null) || typeof x === 'function';\n    }\n    const rethrowAssertionErrorRejection = noop;\n\n    const originalPromise = Promise;\n    const originalPromiseThen = Promise.prototype.then;\n    const originalPromiseResolve = Promise.resolve.bind(originalPromise);\n    const originalPromiseReject = Promise.reject.bind(originalPromise);\n    function newPromise(executor) {\n        return new originalPromise(executor);\n    }\n    function promiseResolvedWith(value) {\n        return originalPromiseResolve(value);\n    }\n    function promiseRejectedWith(reason) {\n        return originalPromiseReject(reason);\n    }\n    function PerformPromiseThen(promise, onFulfilled, onRejected) {\n        // There doesn't appear to be any way to correctly emulate the behaviour from JavaScript, so this is just an\n        // approximation.\n        return originalPromiseThen.call(promise, onFulfilled, onRejected);\n    }\n    function uponPromise(promise, onFulfilled, onRejected) {\n        PerformPromiseThen(PerformPromiseThen(promise, onFulfilled, onRejected), undefined, rethrowAssertionErrorRejection);\n    }\n    function uponFulfillment(promise, onFulfilled) {\n        uponPromise(promise, onFulfilled);\n    }\n    function uponRejection(promise, onRejected) {\n        uponPromise(promise, undefined, onRejected);\n    }\n    function transformPromiseWith(promise, fulfillmentHandler, rejectionHandler) {\n        return PerformPromiseThen(promise, fulfillmentHandler, rejectionHandler);\n    }\n    function setPromiseIsHandledToTrue(promise) {\n        PerformPromiseThen(promise, undefined, rethrowAssertionErrorRejection);\n    }\n    const queueMicrotask = (() => {\n        const globalQueueMicrotask = globals && globals.queueMicrotask;\n        if (typeof globalQueueMicrotask === 'function') {\n            return globalQueueMicrotask;\n        }\n        const resolvedPromise = promiseResolvedWith(undefined);\n        return (fn) => PerformPromiseThen(resolvedPromise, fn);\n    })();\n    function reflectCall(F, V, args) {\n        if (typeof F !== 'function') {\n            throw new TypeError('Argument is not a function');\n        }\n        return Function.prototype.apply.call(F, V, args);\n    }\n    function promiseCall(F, V, args) {\n        try {\n            return promiseResolvedWith(reflectCall(F, V, args));\n        }\n        catch (value) {\n            return promiseRejectedWith(value);\n        }\n    }\n\n    // Original from Chromium\n    // https://chromium.googlesource.com/chromium/src/+/0aee4434a4dba42a42abaea9bfbc0cd196a63bc1/third_party/blink/renderer/core/streams/SimpleQueue.js\n    const QUEUE_MAX_ARRAY_SIZE = 16384;\n    /**\n     * Simple queue structure.\n     *\n     * Avoids scalability issues with using a packed array directly by using\n     * multiple arrays in a linked list and keeping the array size bounded.\n     */\n    class SimpleQueue {\n        constructor() {\n            this._cursor = 0;\n            this._size = 0;\n            // _front and _back are always defined.\n            this._front = {\n                _elements: [],\n                _next: undefined\n            };\n            this._back = this._front;\n            // The cursor is used to avoid calling Array.shift().\n            // It contains the index of the front element of the array inside the\n            // front-most node. It is always in the range [0, QUEUE_MAX_ARRAY_SIZE).\n            this._cursor = 0;\n            // When there is only one node, size === elements.length - cursor.\n            this._size = 0;\n        }\n        get length() {\n            return this._size;\n        }\n        // For exception safety, this method is structured in order:\n        // 1. Read state\n        // 2. Calculate required state mutations\n        // 3. Perform state mutations\n        push(element) {\n            const oldBack = this._back;\n            let newBack = oldBack;\n            if (oldBack._elements.length === QUEUE_MAX_ARRAY_SIZE - 1) {\n                newBack = {\n                    _elements: [],\n                    _next: undefined\n                };\n            }\n            // push() is the mutation most likely to throw an exception, so it\n            // goes first.\n            oldBack._elements.push(element);\n            if (newBack !== oldBack) {\n                this._back = newBack;\n                oldBack._next = newBack;\n            }\n            ++this._size;\n        }\n        // Like push(), shift() follows the read -> calculate -> mutate pattern for\n        // exception safety.\n        shift() { // must not be called on an empty queue\n            const oldFront = this._front;\n            let newFront = oldFront;\n            const oldCursor = this._cursor;\n            let newCursor = oldCursor + 1;\n            const elements = oldFront._elements;\n            const element = elements[oldCursor];\n            if (newCursor === QUEUE_MAX_ARRAY_SIZE) {\n                newFront = oldFront._next;\n                newCursor = 0;\n            }\n            // No mutations before this point.\n            --this._size;\n            this._cursor = newCursor;\n            if (oldFront !== newFront) {\n                this._front = newFront;\n            }\n            // Permit shifted element to be garbage collected.\n            elements[oldCursor] = undefined;\n            return element;\n        }\n        // The tricky thing about forEach() is that it can be called\n        // re-entrantly. The queue may be mutated inside the callback. It is easy to\n        // see that push() within the callback has no negative effects since the end\n        // of the queue is checked for on every iteration. If shift() is called\n        // repeatedly within the callback then the next iteration may return an\n        // element that has been removed. In this case the callback will be called\n        // with undefined values until we either \"catch up\" with elements that still\n        // exist or reach the back of the queue.\n        forEach(callback) {\n            let i = this._cursor;\n            let node = this._front;\n            let elements = node._elements;\n            while (i !== elements.length || node._next !== undefined) {\n                if (i === elements.length) {\n                    node = node._next;\n                    elements = node._elements;\n                    i = 0;\n                    if (elements.length === 0) {\n                        break;\n                    }\n                }\n                callback(elements[i]);\n                ++i;\n            }\n        }\n        // Return the element that would be returned if shift() was called now,\n        // without modifying the queue.\n        peek() { // must not be called on an empty queue\n            const front = this._front;\n            const cursor = this._cursor;\n            return front._elements[cursor];\n        }\n    }\n\n    function ReadableStreamReaderGenericInitialize(reader, stream) {\n        reader._ownerReadableStream = stream;\n        stream._reader = reader;\n        if (stream._state === 'readable') {\n            defaultReaderClosedPromiseInitialize(reader);\n        }\n        else if (stream._state === 'closed') {\n            defaultReaderClosedPromiseInitializeAsResolved(reader);\n        }\n        else {\n            defaultReaderClosedPromiseInitializeAsRejected(reader, stream._storedError);\n        }\n    }\n    // A client of ReadableStreamDefaultReader and ReadableStreamBYOBReader may use these functions directly to bypass state\n    // check.\n    function ReadableStreamReaderGenericCancel(reader, reason) {\n        const stream = reader._ownerReadableStream;\n        return ReadableStreamCancel(stream, reason);\n    }\n    function ReadableStreamReaderGenericRelease(reader) {\n        if (reader._ownerReadableStream._state === 'readable') {\n            defaultReaderClosedPromiseReject(reader, new TypeError(`Reader was released and can no longer be used to monitor the stream's closedness`));\n        }\n        else {\n            defaultReaderClosedPromiseResetToRejected(reader, new TypeError(`Reader was released and can no longer be used to monitor the stream's closedness`));\n        }\n        reader._ownerReadableStream._reader = undefined;\n        reader._ownerReadableStream = undefined;\n    }\n    // Helper functions for the readers.\n    function readerLockException(name) {\n        return new TypeError('Cannot ' + name + ' a stream using a released reader');\n    }\n    // Helper functions for the ReadableStreamDefaultReader.\n    function defaultReaderClosedPromiseInitialize(reader) {\n        reader._closedPromise = newPromise((resolve, reject) => {\n            reader._closedPromise_resolve = resolve;\n            reader._closedPromise_reject = reject;\n        });\n    }\n    function defaultReaderClosedPromiseInitializeAsRejected(reader, reason) {\n        defaultReaderClosedPromiseInitialize(reader);\n        defaultReaderClosedPromiseReject(reader, reason);\n    }\n    function defaultReaderClosedPromiseInitializeAsResolved(reader) {\n        defaultReaderClosedPromiseInitialize(reader);\n        defaultReaderClosedPromiseResolve(reader);\n    }\n    function defaultReaderClosedPromiseReject(reader, reason) {\n        if (reader._closedPromise_reject === undefined) {\n            return;\n        }\n        setPromiseIsHandledToTrue(reader._closedPromise);\n        reader._closedPromise_reject(reason);\n        reader._closedPromise_resolve = undefined;\n        reader._closedPromise_reject = undefined;\n    }\n    function defaultReaderClosedPromiseResetToRejected(reader, reason) {\n        defaultReaderClosedPromiseInitializeAsRejected(reader, reason);\n    }\n    function defaultReaderClosedPromiseResolve(reader) {\n        if (reader._closedPromise_resolve === undefined) {\n            return;\n        }\n        reader._closedPromise_resolve(undefined);\n        reader._closedPromise_resolve = undefined;\n        reader._closedPromise_reject = undefined;\n    }\n\n    const AbortSteps = SymbolPolyfill('[[AbortSteps]]');\n    const ErrorSteps = SymbolPolyfill('[[ErrorSteps]]');\n    const CancelSteps = SymbolPolyfill('[[CancelSteps]]');\n    const PullSteps = SymbolPolyfill('[[PullSteps]]');\n\n    /// <reference lib=\"es2015.core\" />\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/isFinite#Polyfill\n    const NumberIsFinite = Number.isFinite || function (x) {\n        return typeof x === 'number' && isFinite(x);\n    };\n\n    /// <reference lib=\"es2015.core\" />\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/trunc#Polyfill\n    const MathTrunc = Math.trunc || function (v) {\n        return v < 0 ? Math.ceil(v) : Math.floor(v);\n    };\n\n    // https://heycam.github.io/webidl/#idl-dictionaries\n    function isDictionary(x) {\n        return typeof x === 'object' || typeof x === 'function';\n    }\n    function assertDictionary(obj, context) {\n        if (obj !== undefined && !isDictionary(obj)) {\n            throw new TypeError(`${context} is not an object.`);\n        }\n    }\n    // https://heycam.github.io/webidl/#idl-callback-functions\n    function assertFunction(x, context) {\n        if (typeof x !== 'function') {\n            throw new TypeError(`${context} is not a function.`);\n        }\n    }\n    // https://heycam.github.io/webidl/#idl-object\n    function isObject(x) {\n        return (typeof x === 'object' && x !== null) || typeof x === 'function';\n    }\n    function assertObject(x, context) {\n        if (!isObject(x)) {\n            throw new TypeError(`${context} is not an object.`);\n        }\n    }\n    function assertRequiredArgument(x, position, context) {\n        if (x === undefined) {\n            throw new TypeError(`Parameter ${position} is required in '${context}'.`);\n        }\n    }\n    function assertRequiredField(x, field, context) {\n        if (x === undefined) {\n            throw new TypeError(`${field} is required in '${context}'.`);\n        }\n    }\n    // https://heycam.github.io/webidl/#idl-unrestricted-double\n    function convertUnrestrictedDouble(value) {\n        return Number(value);\n    }\n    function censorNegativeZero(x) {\n        return x === 0 ? 0 : x;\n    }\n    function integerPart(x) {\n        return censorNegativeZero(MathTrunc(x));\n    }\n    // https://heycam.github.io/webidl/#idl-unsigned-long-long\n    function convertUnsignedLongLongWithEnforceRange(value, context) {\n        const lowerBound = 0;\n        const upperBound = Number.MAX_SAFE_INTEGER;\n        let x = Number(value);\n        x = censorNegativeZero(x);\n        if (!NumberIsFinite(x)) {\n            throw new TypeError(`${context} is not a finite number`);\n        }\n        x = integerPart(x);\n        if (x < lowerBound || x > upperBound) {\n            throw new TypeError(`${context} is outside the accepted range of ${lowerBound} to ${upperBound}, inclusive`);\n        }\n        if (!NumberIsFinite(x) || x === 0) {\n            return 0;\n        }\n        // TODO Use BigInt if supported?\n        // let xBigInt = BigInt(integerPart(x));\n        // xBigInt = BigInt.asUintN(64, xBigInt);\n        // return Number(xBigInt);\n        return x;\n    }\n\n    function assertReadableStream(x, context) {\n        if (!IsReadableStream(x)) {\n            throw new TypeError(`${context} is not a ReadableStream.`);\n        }\n    }\n\n    // Abstract operations for the ReadableStream.\n    function AcquireReadableStreamDefaultReader(stream) {\n        return new ReadableStreamDefaultReader(stream);\n    }\n    // ReadableStream API exposed for controllers.\n    function ReadableStreamAddReadRequest(stream, readRequest) {\n        stream._reader._readRequests.push(readRequest);\n    }\n    function ReadableStreamFulfillReadRequest(stream, chunk, done) {\n        const reader = stream._reader;\n        const readRequest = reader._readRequests.shift();\n        if (done) {\n            readRequest._closeSteps();\n        }\n        else {\n            readRequest._chunkSteps(chunk);\n        }\n    }\n    function ReadableStreamGetNumReadRequests(stream) {\n        return stream._reader._readRequests.length;\n    }\n    function ReadableStreamHasDefaultReader(stream) {\n        const reader = stream._reader;\n        if (reader === undefined) {\n            return false;\n        }\n        if (!IsReadableStreamDefaultReader(reader)) {\n            return false;\n        }\n        return true;\n    }\n    /**\n     * A default reader vended by a {@link ReadableStream}.\n     *\n     * @public\n     */\n    class ReadableStreamDefaultReader {\n        constructor(stream) {\n            assertRequiredArgument(stream, 1, 'ReadableStreamDefaultReader');\n            assertReadableStream(stream, 'First parameter');\n            if (IsReadableStreamLocked(stream)) {\n                throw new TypeError('This stream has already been locked for exclusive reading by another reader');\n            }\n            ReadableStreamReaderGenericInitialize(this, stream);\n            this._readRequests = new SimpleQueue();\n        }\n        /**\n         * Returns a promise that will be fulfilled when the stream becomes closed,\n         * or rejected if the stream ever errors or the reader's lock is released before the stream finishes closing.\n         */\n        get closed() {\n            if (!IsReadableStreamDefaultReader(this)) {\n                return promiseRejectedWith(defaultReaderBrandCheckException('closed'));\n            }\n            return this._closedPromise;\n        }\n        /**\n         * If the reader is active, behaves the same as {@link ReadableStream.cancel | stream.cancel(reason)}.\n         */\n        cancel(reason = undefined) {\n            if (!IsReadableStreamDefaultReader(this)) {\n                return promiseRejectedWith(defaultReaderBrandCheckException('cancel'));\n            }\n            if (this._ownerReadableStream === undefined) {\n                return promiseRejectedWith(readerLockException('cancel'));\n            }\n            return ReadableStreamReaderGenericCancel(this, reason);\n        }\n        /**\n         * Returns a promise that allows access to the next chunk from the stream's internal queue, if available.\n         *\n         * If reading a chunk causes the queue to become empty, more data will be pulled from the underlying source.\n         */\n        read() {\n            if (!IsReadableStreamDefaultReader(this)) {\n                return promiseRejectedWith(defaultReaderBrandCheckException('read'));\n            }\n            if (this._ownerReadableStream === undefined) {\n                return promiseRejectedWith(readerLockException('read from'));\n            }\n            let resolvePromise;\n            let rejectPromise;\n            const promise = newPromise((resolve, reject) => {\n                resolvePromise = resolve;\n                rejectPromise = reject;\n            });\n            const readRequest = {\n                _chunkSteps: chunk => resolvePromise({ value: chunk, done: false }),\n                _closeSteps: () => resolvePromise({ value: undefined, done: true }),\n                _errorSteps: e => rejectPromise(e)\n            };\n            ReadableStreamDefaultReaderRead(this, readRequest);\n            return promise;\n        }\n        /**\n         * Releases the reader's lock on the corresponding stream. After the lock is released, the reader is no longer active.\n         * If the associated stream is errored when the lock is released, the reader will appear errored in the same way\n         * from now on; otherwise, the reader will appear closed.\n         *\n         * A reader's lock cannot be released while it still has a pending read request, i.e., if a promise returned by\n         * the reader's {@link ReadableStreamDefaultReader.read | read()} method has not yet been settled. Attempting to\n         * do so will throw a `TypeError` and leave the reader locked to the stream.\n         */\n        releaseLock() {\n            if (!IsReadableStreamDefaultReader(this)) {\n                throw defaultReaderBrandCheckException('releaseLock');\n            }\n            if (this._ownerReadableStream === undefined) {\n                return;\n            }\n            if (this._readRequests.length > 0) {\n                throw new TypeError('Tried to release a reader lock when that reader has pending read() calls un-settled');\n            }\n            ReadableStreamReaderGenericRelease(this);\n        }\n    }\n    Object.defineProperties(ReadableStreamDefaultReader.prototype, {\n        cancel: { enumerable: true },\n        read: { enumerable: true },\n        releaseLock: { enumerable: true },\n        closed: { enumerable: true }\n    });\n    if (typeof SymbolPolyfill.toStringTag === 'symbol') {\n        Object.defineProperty(ReadableStreamDefaultReader.prototype, SymbolPolyfill.toStringTag, {\n            value: 'ReadableStreamDefaultReader',\n            configurable: true\n        });\n    }\n    // Abstract operations for the readers.\n    function IsReadableStreamDefaultReader(x) {\n        if (!typeIsObject(x)) {\n            return false;\n        }\n        if (!Object.prototype.hasOwnProperty.call(x, '_readRequests')) {\n            return false;\n        }\n        return x instanceof ReadableStreamDefaultReader;\n    }\n    function ReadableStreamDefaultReaderRead(reader, readRequest) {\n        const stream = reader._ownerReadableStream;\n        stream._disturbed = true;\n        if (stream._state === 'closed') {\n            readRequest._closeSteps();\n        }\n        else if (stream._state === 'errored') {\n            readRequest._errorSteps(stream._storedError);\n        }\n        else {\n            stream._readableStreamController[PullSteps](readRequest);\n        }\n    }\n    // Helper functions for the ReadableStreamDefaultReader.\n    function defaultReaderBrandCheckException(name) {\n        return new TypeError(`ReadableStreamDefaultReader.prototype.${name} can only be used on a ReadableStreamDefaultReader`);\n    }\n\n    /// <reference lib=\"es2018.asynciterable\" />\n    /* eslint-disable @typescript-eslint/no-empty-function */\n    const AsyncIteratorPrototype = Object.getPrototypeOf(Object.getPrototypeOf(async function* () { }).prototype);\n\n    /// <reference lib=\"es2018.asynciterable\" />\n    class ReadableStreamAsyncIteratorImpl {\n        constructor(reader, preventCancel) {\n            this._ongoingPromise = undefined;\n            this._isFinished = false;\n            this._reader = reader;\n            this._preventCancel = preventCancel;\n        }\n        next() {\n            const nextSteps = () => this._nextSteps();\n            this._ongoingPromise = this._ongoingPromise ?\n                transformPromiseWith(this._ongoingPromise, nextSteps, nextSteps) :\n                nextSteps();\n            return this._ongoingPromise;\n        }\n        return(value) {\n            const returnSteps = () => this._returnSteps(value);\n            return this._ongoingPromise ?\n                transformPromiseWith(this._ongoingPromise, returnSteps, returnSteps) :\n                returnSteps();\n        }\n        _nextSteps() {\n            if (this._isFinished) {\n                return Promise.resolve({ value: undefined, done: true });\n            }\n            const reader = this._reader;\n            if (reader._ownerReadableStream === undefined) {\n                return promiseRejectedWith(readerLockException('iterate'));\n            }\n            let resolvePromise;\n            let rejectPromise;\n            const promise = newPromise((resolve, reject) => {\n                resolvePromise = resolve;\n                rejectPromise = reject;\n            });\n            const readRequest = {\n                _chunkSteps: chunk => {\n                    this._ongoingPromise = undefined;\n                    // This needs to be delayed by one microtask, otherwise we stop pulling too early which breaks a test.\n                    // FIXME Is this a bug in the specification, or in the test?\n                    queueMicrotask(() => resolvePromise({ value: chunk, done: false }));\n                },\n                _closeSteps: () => {\n                    this._ongoingPromise = undefined;\n                    this._isFinished = true;\n                    ReadableStreamReaderGenericRelease(reader);\n                    resolvePromise({ value: undefined, done: true });\n                },\n                _errorSteps: reason => {\n                    this._ongoingPromise = undefined;\n                    this._isFinished = true;\n                    ReadableStreamReaderGenericRelease(reader);\n                    rejectPromise(reason);\n                }\n            };\n            ReadableStreamDefaultReaderRead(reader, readRequest);\n            return promise;\n        }\n        _returnSteps(value) {\n            if (this._isFinished) {\n                return Promise.resolve({ value, done: true });\n            }\n            this._isFinished = true;\n            const reader = this._reader;\n            if (reader._ownerReadableStream === undefined) {\n                return promiseRejectedWith(readerLockException('finish iterating'));\n            }\n            if (!this._preventCancel) {\n                const result = ReadableStreamReaderGenericCancel(reader, value);\n                ReadableStreamReaderGenericRelease(reader);\n                return transformPromiseWith(result, () => ({ value, done: true }));\n            }\n            ReadableStreamReaderGenericRelease(reader);\n            return promiseResolvedWith({ value, done: true });\n        }\n    }\n    const ReadableStreamAsyncIteratorPrototype = {\n        next() {\n            if (!IsReadableStreamAsyncIterator(this)) {\n                return promiseRejectedWith(streamAsyncIteratorBrandCheckException('next'));\n            }\n            return this._asyncIteratorImpl.next();\n        },\n        return(value) {\n            if (!IsReadableStreamAsyncIterator(this)) {\n                return promiseRejectedWith(streamAsyncIteratorBrandCheckException('return'));\n            }\n            return this._asyncIteratorImpl.return(value);\n        }\n    };\n    if (AsyncIteratorPrototype !== undefined) {\n        Object.setPrototypeOf(ReadableStreamAsyncIteratorPrototype, AsyncIteratorPrototype);\n    }\n    // Abstract operations for the ReadableStream.\n    function AcquireReadableStreamAsyncIterator(stream, preventCancel) {\n        const reader = AcquireReadableStreamDefaultReader(stream);\n        const impl = new ReadableStreamAsyncIteratorImpl(reader, preventCancel);\n        const iterator = Object.create(ReadableStreamAsyncIteratorPrototype);\n        iterator._asyncIteratorImpl = impl;\n        return iterator;\n    }\n    function IsReadableStreamAsyncIterator(x) {\n        if (!typeIsObject(x)) {\n            return false;\n        }\n        if (!Object.prototype.hasOwnProperty.call(x, '_asyncIteratorImpl')) {\n            return false;\n        }\n        try {\n            // noinspection SuspiciousTypeOfGuard\n            return x._asyncIteratorImpl instanceof\n                ReadableStreamAsyncIteratorImpl;\n        }\n        catch (_a) {\n            return false;\n        }\n    }\n    // Helper functions for the ReadableStream.\n    function streamAsyncIteratorBrandCheckException(name) {\n        return new TypeError(`ReadableStreamAsyncIterator.${name} can only be used on a ReadableSteamAsyncIterator`);\n    }\n\n    /// <reference lib=\"es2015.core\" />\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/isNaN#Polyfill\n    const NumberIsNaN = Number.isNaN || function (x) {\n        // eslint-disable-next-line no-self-compare\n        return x !== x;\n    };\n\n    function CreateArrayFromList(elements) {\n        // We use arrays to represent lists, so this is basically a no-op.\n        // Do a slice though just in case we happen to depend on the unique-ness.\n        return elements.slice();\n    }\n    function CopyDataBlockBytes(dest, destOffset, src, srcOffset, n) {\n        new Uint8Array(dest).set(new Uint8Array(src, srcOffset, n), destOffset);\n    }\n    // Not implemented correctly\n    function TransferArrayBuffer(O) {\n        return O;\n    }\n    // Not implemented correctly\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    function IsDetachedBuffer(O) {\n        return false;\n    }\n    function ArrayBufferSlice(buffer, begin, end) {\n        // ArrayBuffer.prototype.slice is not available on IE10\n        // https://www.caniuse.com/mdn-javascript_builtins_arraybuffer_slice\n        if (buffer.slice) {\n            return buffer.slice(begin, end);\n        }\n        const length = end - begin;\n        const slice = new ArrayBuffer(length);\n        CopyDataBlockBytes(slice, 0, buffer, begin, length);\n        return slice;\n    }\n\n    function IsNonNegativeNumber(v) {\n        if (typeof v !== 'number') {\n            return false;\n        }\n        if (NumberIsNaN(v)) {\n            return false;\n        }\n        if (v < 0) {\n            return false;\n        }\n        return true;\n    }\n    function CloneAsUint8Array(O) {\n        const buffer = ArrayBufferSlice(O.buffer, O.byteOffset, O.byteOffset + O.byteLength);\n        return new Uint8Array(buffer);\n    }\n\n    function DequeueValue(container) {\n        const pair = container._queue.shift();\n        container._queueTotalSize -= pair.size;\n        if (container._queueTotalSize < 0) {\n            container._queueTotalSize = 0;\n        }\n        return pair.value;\n    }\n    function EnqueueValueWithSize(container, value, size) {\n        if (!IsNonNegativeNumber(size) || size === Infinity) {\n            throw new RangeError('Size must be a finite, non-NaN, non-negative number.');\n        }\n        container._queue.push({ value, size });\n        container._queueTotalSize += size;\n    }\n    function PeekQueueValue(container) {\n        const pair = container._queue.peek();\n        return pair.value;\n    }\n    function ResetQueue(container) {\n        container._queue = new SimpleQueue();\n        container._queueTotalSize = 0;\n    }\n\n    /**\n     * A pull-into request in a {@link ReadableByteStreamController}.\n     *\n     * @public\n     */\n    class ReadableStreamBYOBRequest {\n        constructor() {\n            throw new TypeError('Illegal constructor');\n        }\n        /**\n         * Returns the view for writing in to, or `null` if the BYOB request has already been responded to.\n         */\n        get view() {\n            if (!IsReadableStreamBYOBRequest(this)) {\n                throw byobRequestBrandCheckException('view');\n            }\n            return this._view;\n        }\n        respond(bytesWritten) {\n            if (!IsReadableStreamBYOBRequest(this)) {\n                throw byobRequestBrandCheckException('respond');\n            }\n            assertRequiredArgument(bytesWritten, 1, 'respond');\n            bytesWritten = convertUnsignedLongLongWithEnforceRange(bytesWritten, 'First parameter');\n            if (this._associatedReadableByteStreamController === undefined) {\n                throw new TypeError('This BYOB request has been invalidated');\n            }\n            if (IsDetachedBuffer(this._view.buffer)) ;\n            ReadableByteStreamControllerRespond(this._associatedReadableByteStreamController, bytesWritten);\n        }\n        respondWithNewView(view) {\n            if (!IsReadableStreamBYOBRequest(this)) {\n                throw byobRequestBrandCheckException('respondWithNewView');\n            }\n            assertRequiredArgument(view, 1, 'respondWithNewView');\n            if (!ArrayBuffer.isView(view)) {\n                throw new TypeError('You can only respond with array buffer views');\n            }\n            if (this._associatedReadableByteStreamController === undefined) {\n                throw new TypeError('This BYOB request has been invalidated');\n            }\n            if (IsDetachedBuffer(view.buffer)) ;\n            ReadableByteStreamControllerRespondWithNewView(this._associatedReadableByteStreamController, view);\n        }\n    }\n    Object.defineProperties(ReadableStreamBYOBRequest.prototype, {\n        respond: { enumerable: true },\n        respondWithNewView: { enumerable: true },\n        view: { enumerable: true }\n    });\n    if (typeof SymbolPolyfill.toStringTag === 'symbol') {\n        Object.defineProperty(ReadableStreamBYOBRequest.prototype, SymbolPolyfill.toStringTag, {\n            value: 'ReadableStreamBYOBRequest',\n            configurable: true\n        });\n    }\n    /**\n     * Allows control of a {@link ReadableStream | readable byte stream}'s state and internal queue.\n     *\n     * @public\n     */\n    class ReadableByteStreamController {\n        constructor() {\n            throw new TypeError('Illegal constructor');\n        }\n        /**\n         * Returns the current BYOB pull request, or `null` if there isn't one.\n         */\n        get byobRequest() {\n            if (!IsReadableByteStreamController(this)) {\n                throw byteStreamControllerBrandCheckException('byobRequest');\n            }\n            return ReadableByteStreamControllerGetBYOBRequest(this);\n        }\n        /**\n         * Returns the desired size to fill the controlled stream's internal queue. It can be negative, if the queue is\n         * over-full. An underlying byte source ought to use this information to determine when and how to apply backpressure.\n         */\n        get desiredSize() {\n            if (!IsReadableByteStreamController(this)) {\n                throw byteStreamControllerBrandCheckException('desiredSize');\n            }\n            return ReadableByteStreamControllerGetDesiredSize(this);\n        }\n        /**\n         * Closes the controlled readable stream. Consumers will still be able to read any previously-enqueued chunks from\n         * the stream, but once those are read, the stream will become closed.\n         */\n        close() {\n            if (!IsReadableByteStreamController(this)) {\n                throw byteStreamControllerBrandCheckException('close');\n            }\n            if (this._closeRequested) {\n                throw new TypeError('The stream has already been closed; do not close it again!');\n            }\n            const state = this._controlledReadableByteStream._state;\n            if (state !== 'readable') {\n                throw new TypeError(`The stream (in ${state} state) is not in the readable state and cannot be closed`);\n            }\n            ReadableByteStreamControllerClose(this);\n        }\n        enqueue(chunk) {\n            if (!IsReadableByteStreamController(this)) {\n                throw byteStreamControllerBrandCheckException('enqueue');\n            }\n            assertRequiredArgument(chunk, 1, 'enqueue');\n            if (!ArrayBuffer.isView(chunk)) {\n                throw new TypeError('chunk must be an array buffer view');\n            }\n            if (chunk.byteLength === 0) {\n                throw new TypeError('chunk must have non-zero byteLength');\n            }\n            if (chunk.buffer.byteLength === 0) {\n                throw new TypeError(`chunk's buffer must have non-zero byteLength`);\n            }\n            if (this._closeRequested) {\n                throw new TypeError('stream is closed or draining');\n            }\n            const state = this._controlledReadableByteStream._state;\n            if (state !== 'readable') {\n                throw new TypeError(`The stream (in ${state} state) is not in the readable state and cannot be enqueued to`);\n            }\n            ReadableByteStreamControllerEnqueue(this, chunk);\n        }\n        /**\n         * Errors the controlled readable stream, making all future interactions with it fail with the given error `e`.\n         */\n        error(e = undefined) {\n            if (!IsReadableByteStreamController(this)) {\n                throw byteStreamControllerBrandCheckException('error');\n            }\n            ReadableByteStreamControllerError(this, e);\n        }\n        /** @internal */\n        [CancelSteps](reason) {\n            ReadableByteStreamControllerClearPendingPullIntos(this);\n            ResetQueue(this);\n            const result = this._cancelAlgorithm(reason);\n            ReadableByteStreamControllerClearAlgorithms(this);\n            return result;\n        }\n        /** @internal */\n        [PullSteps](readRequest) {\n            const stream = this._controlledReadableByteStream;\n            if (this._queueTotalSize > 0) {\n                const entry = this._queue.shift();\n                this._queueTotalSize -= entry.byteLength;\n                ReadableByteStreamControllerHandleQueueDrain(this);\n                const view = new Uint8Array(entry.buffer, entry.byteOffset, entry.byteLength);\n                readRequest._chunkSteps(view);\n                return;\n            }\n            const autoAllocateChunkSize = this._autoAllocateChunkSize;\n            if (autoAllocateChunkSize !== undefined) {\n                let buffer;\n                try {\n                    buffer = new ArrayBuffer(autoAllocateChunkSize);\n                }\n                catch (bufferE) {\n                    readRequest._errorSteps(bufferE);\n                    return;\n                }\n                const pullIntoDescriptor = {\n                    buffer,\n                    bufferByteLength: autoAllocateChunkSize,\n                    byteOffset: 0,\n                    byteLength: autoAllocateChunkSize,\n                    bytesFilled: 0,\n                    elementSize: 1,\n                    viewConstructor: Uint8Array,\n                    readerType: 'default'\n                };\n                this._pendingPullIntos.push(pullIntoDescriptor);\n            }\n            ReadableStreamAddReadRequest(stream, readRequest);\n            ReadableByteStreamControllerCallPullIfNeeded(this);\n        }\n    }\n    Object.defineProperties(ReadableByteStreamController.prototype, {\n        close: { enumerable: true },\n        enqueue: { enumerable: true },\n        error: { enumerable: true },\n        byobRequest: { enumerable: true },\n        desiredSize: { enumerable: true }\n    });\n    if (typeof SymbolPolyfill.toStringTag === 'symbol') {\n        Object.defineProperty(ReadableByteStreamController.prototype, SymbolPolyfill.toStringTag, {\n            value: 'ReadableByteStreamController',\n            configurable: true\n        });\n    }\n    // Abstract operations for the ReadableByteStreamController.\n    function IsReadableByteStreamController(x) {\n        if (!typeIsObject(x)) {\n            return false;\n        }\n        if (!Object.prototype.hasOwnProperty.call(x, '_controlledReadableByteStream')) {\n            return false;\n        }\n        return x instanceof ReadableByteStreamController;\n    }\n    function IsReadableStreamBYOBRequest(x) {\n        if (!typeIsObject(x)) {\n            return false;\n        }\n        if (!Object.prototype.hasOwnProperty.call(x, '_associatedReadableByteStreamController')) {\n            return false;\n        }\n        return x instanceof ReadableStreamBYOBRequest;\n    }\n    function ReadableByteStreamControllerCallPullIfNeeded(controller) {\n        const shouldPull = ReadableByteStreamControllerShouldCallPull(controller);\n        if (!shouldPull) {\n            return;\n        }\n        if (controller._pulling) {\n            controller._pullAgain = true;\n            return;\n        }\n        controller._pulling = true;\n        // TODO: Test controller argument\n        const pullPromise = controller._pullAlgorithm();\n        uponPromise(pullPromise, () => {\n            controller._pulling = false;\n            if (controller._pullAgain) {\n                controller._pullAgain = false;\n                ReadableByteStreamControllerCallPullIfNeeded(controller);\n            }\n        }, e => {\n            ReadableByteStreamControllerError(controller, e);\n        });\n    }\n    function ReadableByteStreamControllerClearPendingPullIntos(controller) {\n        ReadableByteStreamControllerInvalidateBYOBRequest(controller);\n        controller._pendingPullIntos = new SimpleQueue();\n    }\n    function ReadableByteStreamControllerCommitPullIntoDescriptor(stream, pullIntoDescriptor) {\n        let done = false;\n        if (stream._state === 'closed') {\n            done = true;\n        }\n        const filledView = ReadableByteStreamControllerConvertPullIntoDescriptor(pullIntoDescriptor);\n        if (pullIntoDescriptor.readerType === 'default') {\n            ReadableStreamFulfillReadRequest(stream, filledView, done);\n        }\n        else {\n            ReadableStreamFulfillReadIntoRequest(stream, filledView, done);\n        }\n    }\n    function ReadableByteStreamControllerConvertPullIntoDescriptor(pullIntoDescriptor) {\n        const bytesFilled = pullIntoDescriptor.bytesFilled;\n        const elementSize = pullIntoDescriptor.elementSize;\n        return new pullIntoDescriptor.viewConstructor(pullIntoDescriptor.buffer, pullIntoDescriptor.byteOffset, bytesFilled / elementSize);\n    }\n    function ReadableByteStreamControllerEnqueueChunkToQueue(controller, buffer, byteOffset, byteLength) {\n        controller._queue.push({ buffer, byteOffset, byteLength });\n        controller._queueTotalSize += byteLength;\n    }\n    function ReadableByteStreamControllerFillPullIntoDescriptorFromQueue(controller, pullIntoDescriptor) {\n        const elementSize = pullIntoDescriptor.elementSize;\n        const currentAlignedBytes = pullIntoDescriptor.bytesFilled - pullIntoDescriptor.bytesFilled % elementSize;\n        const maxBytesToCopy = Math.min(controller._queueTotalSize, pullIntoDescriptor.byteLength - pullIntoDescriptor.bytesFilled);\n        const maxBytesFilled = pullIntoDescriptor.bytesFilled + maxBytesToCopy;\n        const maxAlignedBytes = maxBytesFilled - maxBytesFilled % elementSize;\n        let totalBytesToCopyRemaining = maxBytesToCopy;\n        let ready = false;\n        if (maxAlignedBytes > currentAlignedBytes) {\n            totalBytesToCopyRemaining = maxAlignedBytes - pullIntoDescriptor.bytesFilled;\n            ready = true;\n        }\n        const queue = controller._queue;\n        while (totalBytesToCopyRemaining > 0) {\n            const headOfQueue = queue.peek();\n            const bytesToCopy = Math.min(totalBytesToCopyRemaining, headOfQueue.byteLength);\n            const destStart = pullIntoDescriptor.byteOffset + pullIntoDescriptor.bytesFilled;\n            CopyDataBlockBytes(pullIntoDescriptor.buffer, destStart, headOfQueue.buffer, headOfQueue.byteOffset, bytesToCopy);\n            if (headOfQueue.byteLength === bytesToCopy) {\n                queue.shift();\n            }\n            else {\n                headOfQueue.byteOffset += bytesToCopy;\n                headOfQueue.byteLength -= bytesToCopy;\n            }\n            controller._queueTotalSize -= bytesToCopy;\n            ReadableByteStreamControllerFillHeadPullIntoDescriptor(controller, bytesToCopy, pullIntoDescriptor);\n            totalBytesToCopyRemaining -= bytesToCopy;\n        }\n        return ready;\n    }\n    function ReadableByteStreamControllerFillHeadPullIntoDescriptor(controller, size, pullIntoDescriptor) {\n        pullIntoDescriptor.bytesFilled += size;\n    }\n    function ReadableByteStreamControllerHandleQueueDrain(controller) {\n        if (controller._queueTotalSize === 0 && controller._closeRequested) {\n            ReadableByteStreamControllerClearAlgorithms(controller);\n            ReadableStreamClose(controller._controlledReadableByteStream);\n        }\n        else {\n            ReadableByteStreamControllerCallPullIfNeeded(controller);\n        }\n    }\n    function ReadableByteStreamControllerInvalidateBYOBRequest(controller) {\n        if (controller._byobRequest === null) {\n            return;\n        }\n        controller._byobRequest._associatedReadableByteStreamController = undefined;\n        controller._byobRequest._view = null;\n        controller._byobRequest = null;\n    }\n    function ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue(controller) {\n        while (controller._pendingPullIntos.length > 0) {\n            if (controller._queueTotalSize === 0) {\n                return;\n            }\n            const pullIntoDescriptor = controller._pendingPullIntos.peek();\n            if (ReadableByteStreamControllerFillPullIntoDescriptorFromQueue(controller, pullIntoDescriptor)) {\n                ReadableByteStreamControllerShiftPendingPullInto(controller);\n                ReadableByteStreamControllerCommitPullIntoDescriptor(controller._controlledReadableByteStream, pullIntoDescriptor);\n            }\n        }\n    }\n    function ReadableByteStreamControllerPullInto(controller, view, readIntoRequest) {\n        const stream = controller._controlledReadableByteStream;\n        let elementSize = 1;\n        if (view.constructor !== DataView) {\n            elementSize = view.constructor.BYTES_PER_ELEMENT;\n        }\n        const ctor = view.constructor;\n        // try {\n        const buffer = TransferArrayBuffer(view.buffer);\n        // } catch (e) {\n        //   readIntoRequest._errorSteps(e);\n        //   return;\n        // }\n        const pullIntoDescriptor = {\n            buffer,\n            bufferByteLength: buffer.byteLength,\n            byteOffset: view.byteOffset,\n            byteLength: view.byteLength,\n            bytesFilled: 0,\n            elementSize,\n            viewConstructor: ctor,\n            readerType: 'byob'\n        };\n        if (controller._pendingPullIntos.length > 0) {\n            controller._pendingPullIntos.push(pullIntoDescriptor);\n            // No ReadableByteStreamControllerCallPullIfNeeded() call since:\n            // - No change happens on desiredSize\n            // - The source has already been notified of that there's at least 1 pending read(view)\n            ReadableStreamAddReadIntoRequest(stream, readIntoRequest);\n            return;\n        }\n        if (stream._state === 'closed') {\n            const emptyView = new ctor(pullIntoDescriptor.buffer, pullIntoDescriptor.byteOffset, 0);\n            readIntoRequest._closeSteps(emptyView);\n            return;\n        }\n        if (controller._queueTotalSize > 0) {\n            if (ReadableByteStreamControllerFillPullIntoDescriptorFromQueue(controller, pullIntoDescriptor)) {\n                const filledView = ReadableByteStreamControllerConvertPullIntoDescriptor(pullIntoDescriptor);\n                ReadableByteStreamControllerHandleQueueDrain(controller);\n                readIntoRequest._chunkSteps(filledView);\n                return;\n            }\n            if (controller._closeRequested) {\n                const e = new TypeError('Insufficient bytes to fill elements in the given buffer');\n                ReadableByteStreamControllerError(controller, e);\n                readIntoRequest._errorSteps(e);\n                return;\n            }\n        }\n        controller._pendingPullIntos.push(pullIntoDescriptor);\n        ReadableStreamAddReadIntoRequest(stream, readIntoRequest);\n        ReadableByteStreamControllerCallPullIfNeeded(controller);\n    }\n    function ReadableByteStreamControllerRespondInClosedState(controller, firstDescriptor) {\n        const stream = controller._controlledReadableByteStream;\n        if (ReadableStreamHasBYOBReader(stream)) {\n            while (ReadableStreamGetNumReadIntoRequests(stream) > 0) {\n                const pullIntoDescriptor = ReadableByteStreamControllerShiftPendingPullInto(controller);\n                ReadableByteStreamControllerCommitPullIntoDescriptor(stream, pullIntoDescriptor);\n            }\n        }\n    }\n    function ReadableByteStreamControllerRespondInReadableState(controller, bytesWritten, pullIntoDescriptor) {\n        ReadableByteStreamControllerFillHeadPullIntoDescriptor(controller, bytesWritten, pullIntoDescriptor);\n        if (pullIntoDescriptor.bytesFilled < pullIntoDescriptor.elementSize) {\n            return;\n        }\n        ReadableByteStreamControllerShiftPendingPullInto(controller);\n        const remainderSize = pullIntoDescriptor.bytesFilled % pullIntoDescriptor.elementSize;\n        if (remainderSize > 0) {\n            const end = pullIntoDescriptor.byteOffset + pullIntoDescriptor.bytesFilled;\n            const remainder = ArrayBufferSlice(pullIntoDescriptor.buffer, end - remainderSize, end);\n            ReadableByteStreamControllerEnqueueChunkToQueue(controller, remainder, 0, remainder.byteLength);\n        }\n        pullIntoDescriptor.bytesFilled -= remainderSize;\n        ReadableByteStreamControllerCommitPullIntoDescriptor(controller._controlledReadableByteStream, pullIntoDescriptor);\n        ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue(controller);\n    }\n    function ReadableByteStreamControllerRespondInternal(controller, bytesWritten) {\n        const firstDescriptor = controller._pendingPullIntos.peek();\n        ReadableByteStreamControllerInvalidateBYOBRequest(controller);\n        const state = controller._controlledReadableByteStream._state;\n        if (state === 'closed') {\n            ReadableByteStreamControllerRespondInClosedState(controller);\n        }\n        else {\n            ReadableByteStreamControllerRespondInReadableState(controller, bytesWritten, firstDescriptor);\n        }\n        ReadableByteStreamControllerCallPullIfNeeded(controller);\n    }\n    function ReadableByteStreamControllerShiftPendingPullInto(controller) {\n        const descriptor = controller._pendingPullIntos.shift();\n        return descriptor;\n    }\n    function ReadableByteStreamControllerShouldCallPull(controller) {\n        const stream = controller._controlledReadableByteStream;\n        if (stream._state !== 'readable') {\n            return false;\n        }\n        if (controller._closeRequested) {\n            return false;\n        }\n        if (!controller._started) {\n            return false;\n        }\n        if (ReadableStreamHasDefaultReader(stream) && ReadableStreamGetNumReadRequests(stream) > 0) {\n            return true;\n        }\n        if (ReadableStreamHasBYOBReader(stream) && ReadableStreamGetNumReadIntoRequests(stream) > 0) {\n            return true;\n        }\n        const desiredSize = ReadableByteStreamControllerGetDesiredSize(controller);\n        if (desiredSize > 0) {\n            return true;\n        }\n        return false;\n    }\n    function ReadableByteStreamControllerClearAlgorithms(controller) {\n        controller._pullAlgorithm = undefined;\n        controller._cancelAlgorithm = undefined;\n    }\n    // A client of ReadableByteStreamController may use these functions directly to bypass state check.\n    function ReadableByteStreamControllerClose(controller) {\n        const stream = controller._controlledReadableByteStream;\n        if (controller._closeRequested || stream._state !== 'readable') {\n            return;\n        }\n        if (controller._queueTotalSize > 0) {\n            controller._closeRequested = true;\n            return;\n        }\n        if (controller._pendingPullIntos.length > 0) {\n            const firstPendingPullInto = controller._pendingPullIntos.peek();\n            if (firstPendingPullInto.bytesFilled > 0) {\n                const e = new TypeError('Insufficient bytes to fill elements in the given buffer');\n                ReadableByteStreamControllerError(controller, e);\n                throw e;\n            }\n        }\n        ReadableByteStreamControllerClearAlgorithms(controller);\n        ReadableStreamClose(stream);\n    }\n    function ReadableByteStreamControllerEnqueue(controller, chunk) {\n        const stream = controller._controlledReadableByteStream;\n        if (controller._closeRequested || stream._state !== 'readable') {\n            return;\n        }\n        const buffer = chunk.buffer;\n        const byteOffset = chunk.byteOffset;\n        const byteLength = chunk.byteLength;\n        const transferredBuffer = TransferArrayBuffer(buffer);\n        if (controller._pendingPullIntos.length > 0) {\n            const firstPendingPullInto = controller._pendingPullIntos.peek();\n            if (IsDetachedBuffer(firstPendingPullInto.buffer)) ;\n            firstPendingPullInto.buffer = TransferArrayBuffer(firstPendingPullInto.buffer);\n        }\n        ReadableByteStreamControllerInvalidateBYOBRequest(controller);\n        if (ReadableStreamHasDefaultReader(stream)) {\n            if (ReadableStreamGetNumReadRequests(stream) === 0) {\n                ReadableByteStreamControllerEnqueueChunkToQueue(controller, transferredBuffer, byteOffset, byteLength);\n            }\n            else {\n                if (controller._pendingPullIntos.length > 0) {\n                    ReadableByteStreamControllerShiftPendingPullInto(controller);\n                }\n                const transferredView = new Uint8Array(transferredBuffer, byteOffset, byteLength);\n                ReadableStreamFulfillReadRequest(stream, transferredView, false);\n            }\n        }\n        else if (ReadableStreamHasBYOBReader(stream)) {\n            // TODO: Ideally in this branch detaching should happen only if the buffer is not consumed fully.\n            ReadableByteStreamControllerEnqueueChunkToQueue(controller, transferredBuffer, byteOffset, byteLength);\n            ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue(controller);\n        }\n        else {\n            ReadableByteStreamControllerEnqueueChunkToQueue(controller, transferredBuffer, byteOffset, byteLength);\n        }\n        ReadableByteStreamControllerCallPullIfNeeded(controller);\n    }\n    function ReadableByteStreamControllerError(controller, e) {\n        const stream = controller._controlledReadableByteStream;\n        if (stream._state !== 'readable') {\n            return;\n        }\n        ReadableByteStreamControllerClearPendingPullIntos(controller);\n        ResetQueue(controller);\n        ReadableByteStreamControllerClearAlgorithms(controller);\n        ReadableStreamError(stream, e);\n    }\n    function ReadableByteStreamControllerGetBYOBRequest(controller) {\n        if (controller._byobRequest === null && controller._pendingPullIntos.length > 0) {\n            const firstDescriptor = controller._pendingPullIntos.peek();\n            const view = new Uint8Array(firstDescriptor.buffer, firstDescriptor.byteOffset + firstDescriptor.bytesFilled, firstDescriptor.byteLength - firstDescriptor.bytesFilled);\n            const byobRequest = Object.create(ReadableStreamBYOBRequest.prototype);\n            SetUpReadableStreamBYOBRequest(byobRequest, controller, view);\n            controller._byobRequest = byobRequest;\n        }\n        return controller._byobRequest;\n    }\n    function ReadableByteStreamControllerGetDesiredSize(controller) {\n        const state = controller._controlledReadableByteStream._state;\n        if (state === 'errored') {\n            return null;\n        }\n        if (state === 'closed') {\n            return 0;\n        }\n        return controller._strategyHWM - controller._queueTotalSize;\n    }\n    function ReadableByteStreamControllerRespond(controller, bytesWritten) {\n        const firstDescriptor = controller._pendingPullIntos.peek();\n        const state = controller._controlledReadableByteStream._state;\n        if (state === 'closed') {\n            if (bytesWritten !== 0) {\n                throw new TypeError('bytesWritten must be 0 when calling respond() on a closed stream');\n            }\n        }\n        else {\n            if (bytesWritten === 0) {\n                throw new TypeError('bytesWritten must be greater than 0 when calling respond() on a readable stream');\n            }\n            if (firstDescriptor.bytesFilled + bytesWritten > firstDescriptor.byteLength) {\n                throw new RangeError('bytesWritten out of range');\n            }\n        }\n        firstDescriptor.buffer = TransferArrayBuffer(firstDescriptor.buffer);\n        ReadableByteStreamControllerRespondInternal(controller, bytesWritten);\n    }\n    function ReadableByteStreamControllerRespondWithNewView(controller, view) {\n        const firstDescriptor = controller._pendingPullIntos.peek();\n        const state = controller._controlledReadableByteStream._state;\n        if (state === 'closed') {\n            if (view.byteLength !== 0) {\n                throw new TypeError('The view\\'s length must be 0 when calling respondWithNewView() on a closed stream');\n            }\n        }\n        else {\n            if (view.byteLength === 0) {\n                throw new TypeError('The view\\'s length must be greater than 0 when calling respondWithNewView() on a readable stream');\n            }\n        }\n        if (firstDescriptor.byteOffset + firstDescriptor.bytesFilled !== view.byteOffset) {\n            throw new RangeError('The region specified by view does not match byobRequest');\n        }\n        if (firstDescriptor.bufferByteLength !== view.buffer.byteLength) {\n            throw new RangeError('The buffer of view has different capacity than byobRequest');\n        }\n        if (firstDescriptor.bytesFilled + view.byteLength > firstDescriptor.byteLength) {\n            throw new RangeError('The region specified by view is larger than byobRequest');\n        }\n        const viewByteLength = view.byteLength;\n        firstDescriptor.buffer = TransferArrayBuffer(view.buffer);\n        ReadableByteStreamControllerRespondInternal(controller, viewByteLength);\n    }\n    function SetUpReadableByteStreamController(stream, controller, startAlgorithm, pullAlgorithm, cancelAlgorithm, highWaterMark, autoAllocateChunkSize) {\n        controller._controlledReadableByteStream = stream;\n        controller._pullAgain = false;\n        controller._pulling = false;\n        controller._byobRequest = null;\n        // Need to set the slots so that the assert doesn't fire. In the spec the slots already exist implicitly.\n        controller._queue = controller._queueTotalSize = undefined;\n        ResetQueue(controller);\n        controller._closeRequested = false;\n        controller._started = false;\n        controller._strategyHWM = highWaterMark;\n        controller._pullAlgorithm = pullAlgorithm;\n        controller._cancelAlgorithm = cancelAlgorithm;\n        controller._autoAllocateChunkSize = autoAllocateChunkSize;\n        controller._pendingPullIntos = new SimpleQueue();\n        stream._readableStreamController = controller;\n        const startResult = startAlgorithm();\n        uponPromise(promiseResolvedWith(startResult), () => {\n            controller._started = true;\n            ReadableByteStreamControllerCallPullIfNeeded(controller);\n        }, r => {\n            ReadableByteStreamControllerError(controller, r);\n        });\n    }\n    function SetUpReadableByteStreamControllerFromUnderlyingSource(stream, underlyingByteSource, highWaterMark) {\n        const controller = Object.create(ReadableByteStreamController.prototype);\n        let startAlgorithm = () => undefined;\n        let pullAlgorithm = () => promiseResolvedWith(undefined);\n        let cancelAlgorithm = () => promiseResolvedWith(undefined);\n        if (underlyingByteSource.start !== undefined) {\n            startAlgorithm = () => underlyingByteSource.start(controller);\n        }\n        if (underlyingByteSource.pull !== undefined) {\n            pullAlgorithm = () => underlyingByteSource.pull(controller);\n        }\n        if (underlyingByteSource.cancel !== undefined) {\n            cancelAlgorithm = reason => underlyingByteSource.cancel(reason);\n        }\n        const autoAllocateChunkSize = underlyingByteSource.autoAllocateChunkSize;\n        if (autoAllocateChunkSize === 0) {\n            throw new TypeError('autoAllocateChunkSize must be greater than 0');\n        }\n        SetUpReadableByteStreamController(stream, controller, startAlgorithm, pullAlgorithm, cancelAlgorithm, highWaterMark, autoAllocateChunkSize);\n    }\n    function SetUpReadableStreamBYOBRequest(request, controller, view) {\n        request._associatedReadableByteStreamController = controller;\n        request._view = view;\n    }\n    // Helper functions for the ReadableStreamBYOBRequest.\n    function byobRequestBrandCheckException(name) {\n        return new TypeError(`ReadableStreamBYOBRequest.prototype.${name} can only be used on a ReadableStreamBYOBRequest`);\n    }\n    // Helper functions for the ReadableByteStreamController.\n    function byteStreamControllerBrandCheckException(name) {\n        return new TypeError(`ReadableByteStreamController.prototype.${name} can only be used on a ReadableByteStreamController`);\n    }\n\n    // Abstract operations for the ReadableStream.\n    function AcquireReadableStreamBYOBReader(stream) {\n        return new ReadableStreamBYOBReader(stream);\n    }\n    // ReadableStream API exposed for controllers.\n    function ReadableStreamAddReadIntoRequest(stream, readIntoRequest) {\n        stream._reader._readIntoRequests.push(readIntoRequest);\n    }\n    function ReadableStreamFulfillReadIntoRequest(stream, chunk, done) {\n        const reader = stream._reader;\n        const readIntoRequest = reader._readIntoRequests.shift();\n        if (done) {\n            readIntoRequest._closeSteps(chunk);\n        }\n        else {\n            readIntoRequest._chunkSteps(chunk);\n        }\n    }\n    function ReadableStreamGetNumReadIntoRequests(stream) {\n        return stream._reader._readIntoRequests.length;\n    }\n    function ReadableStreamHasBYOBReader(stream) {\n        const reader = stream._reader;\n        if (reader === undefined) {\n            return false;\n        }\n        if (!IsReadableStreamBYOBReader(reader)) {\n            return false;\n        }\n        return true;\n    }\n    /**\n     * A BYOB reader vended by a {@link ReadableStream}.\n     *\n     * @public\n     */\n    class ReadableStreamBYOBReader {\n        constructor(stream) {\n            assertRequiredArgument(stream, 1, 'ReadableStreamBYOBReader');\n            assertReadableStream(stream, 'First parameter');\n            if (IsReadableStreamLocked(stream)) {\n                throw new TypeError('This stream has already been locked for exclusive reading by another reader');\n            }\n            if (!IsReadableByteStreamController(stream._readableStreamController)) {\n                throw new TypeError('Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte ' +\n                    'source');\n            }\n            ReadableStreamReaderGenericInitialize(this, stream);\n            this._readIntoRequests = new SimpleQueue();\n        }\n        /**\n         * Returns a promise that will be fulfilled when the stream becomes closed, or rejected if the stream ever errors or\n         * the reader's lock is released before the stream finishes closing.\n         */\n        get closed() {\n            if (!IsReadableStreamBYOBReader(this)) {\n                return promiseRejectedWith(byobReaderBrandCheckException('closed'));\n            }\n            return this._closedPromise;\n        }\n        /**\n         * If the reader is active, behaves the same as {@link ReadableStream.cancel | stream.cancel(reason)}.\n         */\n        cancel(reason = undefined) {\n            if (!IsReadableStreamBYOBReader(this)) {\n                return promiseRejectedWith(byobReaderBrandCheckException('cancel'));\n            }\n            if (this._ownerReadableStream === undefined) {\n                return promiseRejectedWith(readerLockException('cancel'));\n            }\n            return ReadableStreamReaderGenericCancel(this, reason);\n        }\n        /**\n         * Attempts to reads bytes into view, and returns a promise resolved with the result.\n         *\n         * If reading a chunk causes the queue to become empty, more data will be pulled from the underlying source.\n         */\n        read(view) {\n            if (!IsReadableStreamBYOBReader(this)) {\n                return promiseRejectedWith(byobReaderBrandCheckException('read'));\n            }\n            if (!ArrayBuffer.isView(view)) {\n                return promiseRejectedWith(new TypeError('view must be an array buffer view'));\n            }\n            if (view.byteLength === 0) {\n                return promiseRejectedWith(new TypeError('view must have non-zero byteLength'));\n            }\n            if (view.buffer.byteLength === 0) {\n                return promiseRejectedWith(new TypeError(`view's buffer must have non-zero byteLength`));\n            }\n            if (IsDetachedBuffer(view.buffer)) ;\n            if (this._ownerReadableStream === undefined) {\n                return promiseRejectedWith(readerLockException('read from'));\n            }\n            let resolvePromise;\n            let rejectPromise;\n            const promise = newPromise((resolve, reject) => {\n                resolvePromise = resolve;\n                rejectPromise = reject;\n            });\n            const readIntoRequest = {\n                _chunkSteps: chunk => resolvePromise({ value: chunk, done: false }),\n                _closeSteps: chunk => resolvePromise({ value: chunk, done: true }),\n                _errorSteps: e => rejectPromise(e)\n            };\n            ReadableStreamBYOBReaderRead(this, view, readIntoRequest);\n            return promise;\n        }\n        /**\n         * Releases the reader's lock on the corresponding stream. After the lock is released, the reader is no longer active.\n         * If the associated stream is errored when the lock is released, the reader will appear errored in the same way\n         * from now on; otherwise, the reader will appear closed.\n         *\n         * A reader's lock cannot be released while it still has a pending read request, i.e., if a promise returned by\n         * the reader's {@link ReadableStreamBYOBReader.read | read()} method has not yet been settled. Attempting to\n         * do so will throw a `TypeError` and leave the reader locked to the stream.\n         */\n        releaseLock() {\n            if (!IsReadableStreamBYOBReader(this)) {\n                throw byobReaderBrandCheckException('releaseLock');\n            }\n            if (this._ownerReadableStream === undefined) {\n                return;\n            }\n            if (this._readIntoRequests.length > 0) {\n                throw new TypeError('Tried to release a reader lock when that reader has pending read() calls un-settled');\n            }\n            ReadableStreamReaderGenericRelease(this);\n        }\n    }\n    Object.defineProperties(ReadableStreamBYOBReader.prototype, {\n        cancel: { enumerable: true },\n        read: { enumerable: true },\n        releaseLock: { enumerable: true },\n        closed: { enumerable: true }\n    });\n    if (typeof SymbolPolyfill.toStringTag === 'symbol') {\n        Object.defineProperty(ReadableStreamBYOBReader.prototype, SymbolPolyfill.toStringTag, {\n            value: 'ReadableStreamBYOBReader',\n            configurable: true\n        });\n    }\n    // Abstract operations for the readers.\n    function IsReadableStreamBYOBReader(x) {\n        if (!typeIsObject(x)) {\n            return false;\n        }\n        if (!Object.prototype.hasOwnProperty.call(x, '_readIntoRequests')) {\n            return false;\n        }\n        return x instanceof ReadableStreamBYOBReader;\n    }\n    function ReadableStreamBYOBReaderRead(reader, view, readIntoRequest) {\n        const stream = reader._ownerReadableStream;\n        stream._disturbed = true;\n        if (stream._state === 'errored') {\n            readIntoRequest._errorSteps(stream._storedError);\n        }\n        else {\n            ReadableByteStreamControllerPullInto(stream._readableStreamController, view, readIntoRequest);\n        }\n    }\n    // Helper functions for the ReadableStreamBYOBReader.\n    function byobReaderBrandCheckException(name) {\n        return new TypeError(`ReadableStreamBYOBReader.prototype.${name} can only be used on a ReadableStreamBYOBReader`);\n    }\n\n    function ExtractHighWaterMark(strategy, defaultHWM) {\n        const { highWaterMark } = strategy;\n        if (highWaterMark === undefined) {\n            return defaultHWM;\n        }\n        if (NumberIsNaN(highWaterMark) || highWaterMark < 0) {\n            throw new RangeError('Invalid highWaterMark');\n        }\n        return highWaterMark;\n    }\n    function ExtractSizeAlgorithm(strategy) {\n        const { size } = strategy;\n        if (!size) {\n            return () => 1;\n        }\n        return size;\n    }\n\n    function convertQueuingStrategy(init, context) {\n        assertDictionary(init, context);\n        const highWaterMark = init === null || init === void 0 ? void 0 : init.highWaterMark;\n        const size = init === null || init === void 0 ? void 0 : init.size;\n        return {\n            highWaterMark: highWaterMark === undefined ? undefined : convertUnrestrictedDouble(highWaterMark),\n            size: size === undefined ? undefined : convertQueuingStrategySize(size, `${context} has member 'size' that`)\n        };\n    }\n    function convertQueuingStrategySize(fn, context) {\n        assertFunction(fn, context);\n        return chunk => convertUnrestrictedDouble(fn(chunk));\n    }\n\n    function convertUnderlyingSink(original, context) {\n        assertDictionary(original, context);\n        const abort = original === null || original === void 0 ? void 0 : original.abort;\n        const close = original === null || original === void 0 ? void 0 : original.close;\n        const start = original === null || original === void 0 ? void 0 : original.start;\n        const type = original === null || original === void 0 ? void 0 : original.type;\n        const write = original === null || original === void 0 ? void 0 : original.write;\n        return {\n            abort: abort === undefined ?\n                undefined :\n                convertUnderlyingSinkAbortCallback(abort, original, `${context} has member 'abort' that`),\n            close: close === undefined ?\n                undefined :\n                convertUnderlyingSinkCloseCallback(close, original, `${context} has member 'close' that`),\n            start: start === undefined ?\n                undefined :\n                convertUnderlyingSinkStartCallback(start, original, `${context} has member 'start' that`),\n            write: write === undefined ?\n                undefined :\n                convertUnderlyingSinkWriteCallback(write, original, `${context} has member 'write' that`),\n            type\n        };\n    }\n    function convertUnderlyingSinkAbortCallback(fn, original, context) {\n        assertFunction(fn, context);\n        return (reason) => promiseCall(fn, original, [reason]);\n    }\n    function convertUnderlyingSinkCloseCallback(fn, original, context) {\n        assertFunction(fn, context);\n        return () => promiseCall(fn, original, []);\n    }\n    function convertUnderlyingSinkStartCallback(fn, original, context) {\n        assertFunction(fn, context);\n        return (controller) => reflectCall(fn, original, [controller]);\n    }\n    function convertUnderlyingSinkWriteCallback(fn, original, context) {\n        assertFunction(fn, context);\n        return (chunk, controller) => promiseCall(fn, original, [chunk, controller]);\n    }\n\n    function assertWritableStream(x, context) {\n        if (!IsWritableStream(x)) {\n            throw new TypeError(`${context} is not a WritableStream.`);\n        }\n    }\n\n    function isAbortSignal(value) {\n        if (typeof value !== 'object' || value === null) {\n            return false;\n        }\n        try {\n            return typeof value.aborted === 'boolean';\n        }\n        catch (_a) {\n            // AbortSignal.prototype.aborted throws if its brand check fails\n            return false;\n        }\n    }\n    const supportsAbortController = typeof AbortController === 'function';\n    /**\n     * Construct a new AbortController, if supported by the platform.\n     *\n     * @internal\n     */\n    function createAbortController() {\n        if (supportsAbortController) {\n            return new AbortController();\n        }\n        return undefined;\n    }\n\n    /**\n     * A writable stream represents a destination for data, into which you can write.\n     *\n     * @public\n     */\n    class WritableStream {\n        constructor(rawUnderlyingSink = {}, rawStrategy = {}) {\n            if (rawUnderlyingSink === undefined) {\n                rawUnderlyingSink = null;\n            }\n            else {\n                assertObject(rawUnderlyingSink, 'First parameter');\n            }\n            const strategy = convertQueuingStrategy(rawStrategy, 'Second parameter');\n            const underlyingSink = convertUnderlyingSink(rawUnderlyingSink, 'First parameter');\n            InitializeWritableStream(this);\n            const type = underlyingSink.type;\n            if (type !== undefined) {\n                throw new RangeError('Invalid type is specified');\n            }\n            const sizeAlgorithm = ExtractSizeAlgorithm(strategy);\n            const highWaterMark = ExtractHighWaterMark(strategy, 1);\n            SetUpWritableStreamDefaultControllerFromUnderlyingSink(this, underlyingSink, highWaterMark, sizeAlgorithm);\n        }\n        /**\n         * Returns whether or not the writable stream is locked to a writer.\n         */\n        get locked() {\n            if (!IsWritableStream(this)) {\n                throw streamBrandCheckException$2('locked');\n            }\n            return IsWritableStreamLocked(this);\n        }\n        /**\n         * Aborts the stream, signaling that the producer can no longer successfully write to the stream and it is to be\n         * immediately moved to an errored state, with any queued-up writes discarded. This will also execute any abort\n         * mechanism of the underlying sink.\n         *\n         * The returned promise will fulfill if the stream shuts down successfully, or reject if the underlying sink signaled\n         * that there was an error doing so. Additionally, it will reject with a `TypeError` (without attempting to cancel\n         * the stream) if the stream is currently locked.\n         */\n        abort(reason = undefined) {\n            if (!IsWritableStream(this)) {\n                return promiseRejectedWith(streamBrandCheckException$2('abort'));\n            }\n            if (IsWritableStreamLocked(this)) {\n                return promiseRejectedWith(new TypeError('Cannot abort a stream that already has a writer'));\n            }\n            return WritableStreamAbort(this, reason);\n        }\n        /**\n         * Closes the stream. The underlying sink will finish processing any previously-written chunks, before invoking its\n         * close behavior. During this time any further attempts to write will fail (without erroring the stream).\n         *\n         * The method returns a promise that will fulfill if all remaining chunks are successfully written and the stream\n         * successfully closes, or rejects if an error is encountered during this process. Additionally, it will reject with\n         * a `TypeError` (without attempting to cancel the stream) if the stream is currently locked.\n         */\n        close() {\n            if (!IsWritableStream(this)) {\n                return promiseRejectedWith(streamBrandCheckException$2('close'));\n            }\n            if (IsWritableStreamLocked(this)) {\n                return promiseRejectedWith(new TypeError('Cannot close a stream that already has a writer'));\n            }\n            if (WritableStreamCloseQueuedOrInFlight(this)) {\n                return promiseRejectedWith(new TypeError('Cannot close an already-closing stream'));\n            }\n            return WritableStreamClose(this);\n        }\n        /**\n         * Creates a {@link WritableStreamDefaultWriter | writer} and locks the stream to the new writer. While the stream\n         * is locked, no other writer can be acquired until this one is released.\n         *\n         * This functionality is especially useful for creating abstractions that desire the ability to write to a stream\n         * without interruption or interleaving. By getting a writer for the stream, you can ensure nobody else can write at\n         * the same time, which would cause the resulting written data to be unpredictable and probably useless.\n         */\n        getWriter() {\n            if (!IsWritableStream(this)) {\n                throw streamBrandCheckException$2('getWriter');\n            }\n            return AcquireWritableStreamDefaultWriter(this);\n        }\n    }\n    Object.defineProperties(WritableStream.prototype, {\n        abort: { enumerable: true },\n        close: { enumerable: true },\n        getWriter: { enumerable: true },\n        locked: { enumerable: true }\n    });\n    if (typeof SymbolPolyfill.toStringTag === 'symbol') {\n        Object.defineProperty(WritableStream.prototype, SymbolPolyfill.toStringTag, {\n            value: 'WritableStream',\n            configurable: true\n        });\n    }\n    // Abstract operations for the WritableStream.\n    function AcquireWritableStreamDefaultWriter(stream) {\n        return new WritableStreamDefaultWriter(stream);\n    }\n    // Throws if and only if startAlgorithm throws.\n    function CreateWritableStream(startAlgorithm, writeAlgorithm, closeAlgorithm, abortAlgorithm, highWaterMark = 1, sizeAlgorithm = () => 1) {\n        const stream = Object.create(WritableStream.prototype);\n        InitializeWritableStream(stream);\n        const controller = Object.create(WritableStreamDefaultController.prototype);\n        SetUpWritableStreamDefaultController(stream, controller, startAlgorithm, writeAlgorithm, closeAlgorithm, abortAlgorithm, highWaterMark, sizeAlgorithm);\n        return stream;\n    }\n    function InitializeWritableStream(stream) {\n        stream._state = 'writable';\n        // The error that will be reported by new method calls once the state becomes errored. Only set when [[state]] is\n        // 'erroring' or 'errored'. May be set to an undefined value.\n        stream._storedError = undefined;\n        stream._writer = undefined;\n        // Initialize to undefined first because the constructor of the controller checks this\n        // variable to validate the caller.\n        stream._writableStreamController = undefined;\n        // This queue is placed here instead of the writer class in order to allow for passing a writer to the next data\n        // producer without waiting for the queued writes to finish.\n        stream._writeRequests = new SimpleQueue();\n        // Write requests are removed from _writeRequests when write() is called on the underlying sink. This prevents\n        // them from being erroneously rejected on error. If a write() call is in-flight, the request is stored here.\n        stream._inFlightWriteRequest = undefined;\n        // The promise that was returned from writer.close(). Stored here because it may be fulfilled after the writer\n        // has been detached.\n        stream._closeRequest = undefined;\n        // Close request is removed from _closeRequest when close() is called on the underlying sink. This prevents it\n        // from being erroneously rejected on error. If a close() call is in-flight, the request is stored here.\n        stream._inFlightCloseRequest = undefined;\n        // The promise that was returned from writer.abort(). This may also be fulfilled after the writer has detached.\n        stream._pendingAbortRequest = undefined;\n        // The backpressure signal set by the controller.\n        stream._backpressure = false;\n    }\n    function IsWritableStream(x) {\n        if (!typeIsObject(x)) {\n            return false;\n        }\n        if (!Object.prototype.hasOwnProperty.call(x, '_writableStreamController')) {\n            return false;\n        }\n        return x instanceof WritableStream;\n    }\n    function IsWritableStreamLocked(stream) {\n        if (stream._writer === undefined) {\n            return false;\n        }\n        return true;\n    }\n    function WritableStreamAbort(stream, reason) {\n        var _a;\n        if (stream._state === 'closed' || stream._state === 'errored') {\n            return promiseResolvedWith(undefined);\n        }\n        stream._writableStreamController._abortReason = reason;\n        (_a = stream._writableStreamController._abortController) === null || _a === void 0 ? void 0 : _a.abort();\n        // TypeScript narrows the type of `stream._state` down to 'writable' | 'erroring',\n        // but it doesn't know that signaling abort runs author code that might have changed the state.\n        // Widen the type again by casting to WritableStreamState.\n        const state = stream._state;\n        if (state === 'closed' || state === 'errored') {\n            return promiseResolvedWith(undefined);\n        }\n        if (stream._pendingAbortRequest !== undefined) {\n            return stream._pendingAbortRequest._promise;\n        }\n        let wasAlreadyErroring = false;\n        if (state === 'erroring') {\n            wasAlreadyErroring = true;\n            // reason will not be used, so don't keep a reference to it.\n            reason = undefined;\n        }\n        const promise = newPromise((resolve, reject) => {\n            stream._pendingAbortRequest = {\n                _promise: undefined,\n                _resolve: resolve,\n                _reject: reject,\n                _reason: reason,\n                _wasAlreadyErroring: wasAlreadyErroring\n            };\n        });\n        stream._pendingAbortRequest._promise = promise;\n        if (!wasAlreadyErroring) {\n            WritableStreamStartErroring(stream, reason);\n        }\n        return promise;\n    }\n    function WritableStreamClose(stream) {\n        const state = stream._state;\n        if (state === 'closed' || state === 'errored') {\n            return promiseRejectedWith(new TypeError(`The stream (in ${state} state) is not in the writable state and cannot be closed`));\n        }\n        const promise = newPromise((resolve, reject) => {\n            const closeRequest = {\n                _resolve: resolve,\n                _reject: reject\n            };\n            stream._closeRequest = closeRequest;\n        });\n        const writer = stream._writer;\n        if (writer !== undefined && stream._backpressure && state === 'writable') {\n            defaultWriterReadyPromiseResolve(writer);\n        }\n        WritableStreamDefaultControllerClose(stream._writableStreamController);\n        return promise;\n    }\n    // WritableStream API exposed for controllers.\n    function WritableStreamAddWriteRequest(stream) {\n        const promise = newPromise((resolve, reject) => {\n            const writeRequest = {\n                _resolve: resolve,\n                _reject: reject\n            };\n            stream._writeRequests.push(writeRequest);\n        });\n        return promise;\n    }\n    function WritableStreamDealWithRejection(stream, error) {\n        const state = stream._state;\n        if (state === 'writable') {\n            WritableStreamStartErroring(stream, error);\n            return;\n        }\n        WritableStreamFinishErroring(stream);\n    }\n    function WritableStreamStartErroring(stream, reason) {\n        const controller = stream._writableStreamController;\n        stream._state = 'erroring';\n        stream._storedError = reason;\n        const writer = stream._writer;\n        if (writer !== undefined) {\n            WritableStreamDefaultWriterEnsureReadyPromiseRejected(writer, reason);\n        }\n        if (!WritableStreamHasOperationMarkedInFlight(stream) && controller._started) {\n            WritableStreamFinishErroring(stream);\n        }\n    }\n    function WritableStreamFinishErroring(stream) {\n        stream._state = 'errored';\n        stream._writableStreamController[ErrorSteps]();\n        const storedError = stream._storedError;\n        stream._writeRequests.forEach(writeRequest => {\n            writeRequest._reject(storedError);\n        });\n        stream._writeRequests = new SimpleQueue();\n        if (stream._pendingAbortRequest === undefined) {\n            WritableStreamRejectCloseAndClosedPromiseIfNeeded(stream);\n            return;\n        }\n        const abortRequest = stream._pendingAbortRequest;\n        stream._pendingAbortRequest = undefined;\n        if (abortRequest._wasAlreadyErroring) {\n            abortRequest._reject(storedError);\n            WritableStreamRejectCloseAndClosedPromiseIfNeeded(stream);\n            return;\n        }\n        const promise = stream._writableStreamController[AbortSteps](abortRequest._reason);\n        uponPromise(promise, () => {\n            abortRequest._resolve();\n            WritableStreamRejectCloseAndClosedPromiseIfNeeded(stream);\n        }, (reason) => {\n            abortRequest._reject(reason);\n            WritableStreamRejectCloseAndClosedPromiseIfNeeded(stream);\n        });\n    }\n    function WritableStreamFinishInFlightWrite(stream) {\n        stream._inFlightWriteRequest._resolve(undefined);\n        stream._inFlightWriteRequest = undefined;\n    }\n    function WritableStreamFinishInFlightWriteWithError(stream, error) {\n        stream._inFlightWriteRequest._reject(error);\n        stream._inFlightWriteRequest = undefined;\n        WritableStreamDealWithRejection(stream, error);\n    }\n    function WritableStreamFinishInFlightClose(stream) {\n        stream._inFlightCloseRequest._resolve(undefined);\n        stream._inFlightCloseRequest = undefined;\n        const state = stream._state;\n        if (state === 'erroring') {\n            // The error was too late to do anything, so it is ignored.\n            stream._storedError = undefined;\n            if (stream._pendingAbortRequest !== undefined) {\n                stream._pendingAbortRequest._resolve();\n                stream._pendingAbortRequest = undefined;\n            }\n        }\n        stream._state = 'closed';\n        const writer = stream._writer;\n        if (writer !== undefined) {\n            defaultWriterClosedPromiseResolve(writer);\n        }\n    }\n    function WritableStreamFinishInFlightCloseWithError(stream, error) {\n        stream._inFlightCloseRequest._reject(error);\n        stream._inFlightCloseRequest = undefined;\n        // Never execute sink abort() after sink close().\n        if (stream._pendingAbortRequest !== undefined) {\n            stream._pendingAbortRequest._reject(error);\n            stream._pendingAbortRequest = undefined;\n        }\n        WritableStreamDealWithRejection(stream, error);\n    }\n    // TODO(ricea): Fix alphabetical order.\n    function WritableStreamCloseQueuedOrInFlight(stream) {\n        if (stream._closeRequest === undefined && stream._inFlightCloseRequest === undefined) {\n            return false;\n        }\n        return true;\n    }\n    function WritableStreamHasOperationMarkedInFlight(stream) {\n        if (stream._inFlightWriteRequest === undefined && stream._inFlightCloseRequest === undefined) {\n            return false;\n        }\n        return true;\n    }\n    function WritableStreamMarkCloseRequestInFlight(stream) {\n        stream._inFlightCloseRequest = stream._closeRequest;\n        stream._closeRequest = undefined;\n    }\n    function WritableStreamMarkFirstWriteRequestInFlight(stream) {\n        stream._inFlightWriteRequest = stream._writeRequests.shift();\n    }\n    function WritableStreamRejectCloseAndClosedPromiseIfNeeded(stream) {\n        if (stream._closeRequest !== undefined) {\n            stream._closeRequest._reject(stream._storedError);\n            stream._closeRequest = undefined;\n        }\n        const writer = stream._writer;\n        if (writer !== undefined) {\n            defaultWriterClosedPromiseReject(writer, stream._storedError);\n        }\n    }\n    function WritableStreamUpdateBackpressure(stream, backpressure) {\n        const writer = stream._writer;\n        if (writer !== undefined && backpressure !== stream._backpressure) {\n            if (backpressure) {\n                defaultWriterReadyPromiseReset(writer);\n            }\n            else {\n                defaultWriterReadyPromiseResolve(writer);\n            }\n        }\n        stream._backpressure = backpressure;\n    }\n    /**\n     * A default writer vended by a {@link WritableStream}.\n     *\n     * @public\n     */\n    class WritableStreamDefaultWriter {\n        constructor(stream) {\n            assertRequiredArgument(stream, 1, 'WritableStreamDefaultWriter');\n            assertWritableStream(stream, 'First parameter');\n            if (IsWritableStreamLocked(stream)) {\n                throw new TypeError('This stream has already been locked for exclusive writing by another writer');\n            }\n            this._ownerWritableStream = stream;\n            stream._writer = this;\n            const state = stream._state;\n            if (state === 'writable') {\n                if (!WritableStreamCloseQueuedOrInFlight(stream) && stream._backpressure) {\n                    defaultWriterReadyPromiseInitialize(this);\n                }\n                else {\n                    defaultWriterReadyPromiseInitializeAsResolved(this);\n                }\n                defaultWriterClosedPromiseInitialize(this);\n            }\n            else if (state === 'erroring') {\n                defaultWriterReadyPromiseInitializeAsRejected(this, stream._storedError);\n                defaultWriterClosedPromiseInitialize(this);\n            }\n            else if (state === 'closed') {\n                defaultWriterReadyPromiseInitializeAsResolved(this);\n                defaultWriterClosedPromiseInitializeAsResolved(this);\n            }\n            else {\n                const storedError = stream._storedError;\n                defaultWriterReadyPromiseInitializeAsRejected(this, storedError);\n                defaultWriterClosedPromiseInitializeAsRejected(this, storedError);\n            }\n        }\n        /**\n         * Returns a promise that will be fulfilled when the stream becomes closed, or rejected if the stream ever errors or\n         * the writers lock is released before the stream finishes closing.\n         */\n        get closed() {\n            if (!IsWritableStreamDefaultWriter(this)) {\n                return promiseRejectedWith(defaultWriterBrandCheckException('closed'));\n            }\n            return this._closedPromise;\n        }\n        /**\n         * Returns the desired size to fill the streams internal queue. It can be negative, if the queue is over-full.\n         * A producer can use this information to determine the right amount of data to write.\n         *\n         * It will be `null` if the stream cannot be successfully written to (due to either being errored, or having an abort\n         * queued up). It will return zero if the stream is closed. And the getter will throw an exception if invoked when\n         * the writers lock is released.\n         */\n        get desiredSize() {\n            if (!IsWritableStreamDefaultWriter(this)) {\n                throw defaultWriterBrandCheckException('desiredSize');\n            }\n            if (this._ownerWritableStream === undefined) {\n                throw defaultWriterLockException('desiredSize');\n            }\n            return WritableStreamDefaultWriterGetDesiredSize(this);\n        }\n        /**\n         * Returns a promise that will be fulfilled when the desired size to fill the streams internal queue transitions\n         * from non-positive to positive, signaling that it is no longer applying backpressure. Once the desired size dips\n         * back to zero or below, the getter will return a new promise that stays pending until the next transition.\n         *\n         * If the stream becomes errored or aborted, or the writers lock is released, the returned promise will become\n         * rejected.\n         */\n        get ready() {\n            if (!IsWritableStreamDefaultWriter(this)) {\n                return promiseRejectedWith(defaultWriterBrandCheckException('ready'));\n            }\n            return this._readyPromise;\n        }\n        /**\n         * If the reader is active, behaves the same as {@link WritableStream.abort | stream.abort(reason)}.\n         */\n        abort(reason = undefined) {\n            if (!IsWritableStreamDefaultWriter(this)) {\n                return promiseRejectedWith(defaultWriterBrandCheckException('abort'));\n            }\n            if (this._ownerWritableStream === undefined) {\n                return promiseRejectedWith(defaultWriterLockException('abort'));\n            }\n            return WritableStreamDefaultWriterAbort(this, reason);\n        }\n        /**\n         * If the reader is active, behaves the same as {@link WritableStream.close | stream.close()}.\n         */\n        close() {\n            if (!IsWritableStreamDefaultWriter(this)) {\n                return promiseRejectedWith(defaultWriterBrandCheckException('close'));\n            }\n            const stream = this._ownerWritableStream;\n            if (stream === undefined) {\n                return promiseRejectedWith(defaultWriterLockException('close'));\n            }\n            if (WritableStreamCloseQueuedOrInFlight(stream)) {\n                return promiseRejectedWith(new TypeError('Cannot close an already-closing stream'));\n            }\n            return WritableStreamDefaultWriterClose(this);\n        }\n        /**\n         * Releases the writers lock on the corresponding stream. After the lock is released, the writer is no longer active.\n         * If the associated stream is errored when the lock is released, the writer will appear errored in the same way from\n         * now on; otherwise, the writer will appear closed.\n         *\n         * Note that the lock can still be released even if some ongoing writes have not yet finished (i.e. even if the\n         * promises returned from previous calls to {@link WritableStreamDefaultWriter.write | write()} have not yet settled).\n         * Its not necessary to hold the lock on the writer for the duration of the write; the lock instead simply prevents\n         * other producers from writing in an interleaved manner.\n         */\n        releaseLock() {\n            if (!IsWritableStreamDefaultWriter(this)) {\n                throw defaultWriterBrandCheckException('releaseLock');\n            }\n            const stream = this._ownerWritableStream;\n            if (stream === undefined) {\n                return;\n            }\n            WritableStreamDefaultWriterRelease(this);\n        }\n        write(chunk = undefined) {\n            if (!IsWritableStreamDefaultWriter(this)) {\n                return promiseRejectedWith(defaultWriterBrandCheckException('write'));\n            }\n            if (this._ownerWritableStream === undefined) {\n                return promiseRejectedWith(defaultWriterLockException('write to'));\n            }\n            return WritableStreamDefaultWriterWrite(this, chunk);\n        }\n    }\n    Object.defineProperties(WritableStreamDefaultWriter.prototype, {\n        abort: { enumerable: true },\n        close: { enumerable: true },\n        releaseLock: { enumerable: true },\n        write: { enumerable: true },\n        closed: { enumerable: true },\n        desiredSize: { enumerable: true },\n        ready: { enumerable: true }\n    });\n    if (typeof SymbolPolyfill.toStringTag === 'symbol') {\n        Object.defineProperty(WritableStreamDefaultWriter.prototype, SymbolPolyfill.toStringTag, {\n            value: 'WritableStreamDefaultWriter',\n            configurable: true\n        });\n    }\n    // Abstract operations for the WritableStreamDefaultWriter.\n    function IsWritableStreamDefaultWriter(x) {\n        if (!typeIsObject(x)) {\n            return false;\n        }\n        if (!Object.prototype.hasOwnProperty.call(x, '_ownerWritableStream')) {\n            return false;\n        }\n        return x instanceof WritableStreamDefaultWriter;\n    }\n    // A client of WritableStreamDefaultWriter may use these functions directly to bypass state check.\n    function WritableStreamDefaultWriterAbort(writer, reason) {\n        const stream = writer._ownerWritableStream;\n        return WritableStreamAbort(stream, reason);\n    }\n    function WritableStreamDefaultWriterClose(writer) {\n        const stream = writer._ownerWritableStream;\n        return WritableStreamClose(stream);\n    }\n    function WritableStreamDefaultWriterCloseWithErrorPropagation(writer) {\n        const stream = writer._ownerWritableStream;\n        const state = stream._state;\n        if (WritableStreamCloseQueuedOrInFlight(stream) || state === 'closed') {\n            return promiseResolvedWith(undefined);\n        }\n        if (state === 'errored') {\n            return promiseRejectedWith(stream._storedError);\n        }\n        return WritableStreamDefaultWriterClose(writer);\n    }\n    function WritableStreamDefaultWriterEnsureClosedPromiseRejected(writer, error) {\n        if (writer._closedPromiseState === 'pending') {\n            defaultWriterClosedPromiseReject(writer, error);\n        }\n        else {\n            defaultWriterClosedPromiseResetToRejected(writer, error);\n        }\n    }\n    function WritableStreamDefaultWriterEnsureReadyPromiseRejected(writer, error) {\n        if (writer._readyPromiseState === 'pending') {\n            defaultWriterReadyPromiseReject(writer, error);\n        }\n        else {\n            defaultWriterReadyPromiseResetToRejected(writer, error);\n        }\n    }\n    function WritableStreamDefaultWriterGetDesiredSize(writer) {\n        const stream = writer._ownerWritableStream;\n        const state = stream._state;\n        if (state === 'errored' || state === 'erroring') {\n            return null;\n        }\n        if (state === 'closed') {\n            return 0;\n        }\n        return WritableStreamDefaultControllerGetDesiredSize(stream._writableStreamController);\n    }\n    function WritableStreamDefaultWriterRelease(writer) {\n        const stream = writer._ownerWritableStream;\n        const releasedError = new TypeError(`Writer was released and can no longer be used to monitor the stream's closedness`);\n        WritableStreamDefaultWriterEnsureReadyPromiseRejected(writer, releasedError);\n        // The state transitions to \"errored\" before the sink abort() method runs, but the writer.closed promise is not\n        // rejected until afterwards. This means that simply testing state will not work.\n        WritableStreamDefaultWriterEnsureClosedPromiseRejected(writer, releasedError);\n        stream._writer = undefined;\n        writer._ownerWritableStream = undefined;\n    }\n    function WritableStreamDefaultWriterWrite(writer, chunk) {\n        const stream = writer._ownerWritableStream;\n        const controller = stream._writableStreamController;\n        const chunkSize = WritableStreamDefaultControllerGetChunkSize(controller, chunk);\n        if (stream !== writer._ownerWritableStream) {\n            return promiseRejectedWith(defaultWriterLockException('write to'));\n        }\n        const state = stream._state;\n        if (state === 'errored') {\n            return promiseRejectedWith(stream._storedError);\n        }\n        if (WritableStreamCloseQueuedOrInFlight(stream) || state === 'closed') {\n            return promiseRejectedWith(new TypeError('The stream is closing or closed and cannot be written to'));\n        }\n        if (state === 'erroring') {\n            return promiseRejectedWith(stream._storedError);\n        }\n        const promise = WritableStreamAddWriteRequest(stream);\n        WritableStreamDefaultControllerWrite(controller, chunk, chunkSize);\n        return promise;\n    }\n    const closeSentinel = {};\n    /**\n     * Allows control of a {@link WritableStream | writable stream}'s state and internal queue.\n     *\n     * @public\n     */\n    class WritableStreamDefaultController {\n        constructor() {\n            throw new TypeError('Illegal constructor');\n        }\n        /**\n         * The reason which was passed to `WritableStream.abort(reason)` when the stream was aborted.\n         *\n         * @deprecated\n         *  This property has been removed from the specification, see https://github.com/whatwg/streams/pull/1177.\n         *  Use {@link WritableStreamDefaultController.signal}'s `reason` instead.\n         */\n        get abortReason() {\n            if (!IsWritableStreamDefaultController(this)) {\n                throw defaultControllerBrandCheckException$2('abortReason');\n            }\n            return this._abortReason;\n        }\n        /**\n         * An `AbortSignal` that can be used to abort the pending write or close operation when the stream is aborted.\n         */\n        get signal() {\n            if (!IsWritableStreamDefaultController(this)) {\n                throw defaultControllerBrandCheckException$2('signal');\n            }\n            if (this._abortController === undefined) {\n                // Older browsers or older Node versions may not support `AbortController` or `AbortSignal`.\n                // We don't want to bundle and ship an `AbortController` polyfill together with our polyfill,\n                // so instead we only implement support for `signal` if we find a global `AbortController` constructor.\n                throw new TypeError('WritableStreamDefaultController.prototype.signal is not supported');\n            }\n            return this._abortController.signal;\n        }\n        /**\n         * Closes the controlled writable stream, making all future interactions with it fail with the given error `e`.\n         *\n         * This method is rarely used, since usually it suffices to return a rejected promise from one of the underlying\n         * sink's methods. However, it can be useful for suddenly shutting down a stream in response to an event outside the\n         * normal lifecycle of interactions with the underlying sink.\n         */\n        error(e = undefined) {\n            if (!IsWritableStreamDefaultController(this)) {\n                throw defaultControllerBrandCheckException$2('error');\n            }\n            const state = this._controlledWritableStream._state;\n            if (state !== 'writable') {\n                // The stream is closed, errored or will be soon. The sink can't do anything useful if it gets an error here, so\n                // just treat it as a no-op.\n                return;\n            }\n            WritableStreamDefaultControllerError(this, e);\n        }\n        /** @internal */\n        [AbortSteps](reason) {\n            const result = this._abortAlgorithm(reason);\n            WritableStreamDefaultControllerClearAlgorithms(this);\n            return result;\n        }\n        /** @internal */\n        [ErrorSteps]() {\n            ResetQueue(this);\n        }\n    }\n    Object.defineProperties(WritableStreamDefaultController.prototype, {\n        abortReason: { enumerable: true },\n        signal: { enumerable: true },\n        error: { enumerable: true }\n    });\n    if (typeof SymbolPolyfill.toStringTag === 'symbol') {\n        Object.defineProperty(WritableStreamDefaultController.prototype, SymbolPolyfill.toStringTag, {\n            value: 'WritableStreamDefaultController',\n            configurable: true\n        });\n    }\n    // Abstract operations implementing interface required by the WritableStream.\n    function IsWritableStreamDefaultController(x) {\n        if (!typeIsObject(x)) {\n            return false;\n        }\n        if (!Object.prototype.hasOwnProperty.call(x, '_controlledWritableStream')) {\n            return false;\n        }\n        return x instanceof WritableStreamDefaultController;\n    }\n    function SetUpWritableStreamDefaultController(stream, controller, startAlgorithm, writeAlgorithm, closeAlgorithm, abortAlgorithm, highWaterMark, sizeAlgorithm) {\n        controller._controlledWritableStream = stream;\n        stream._writableStreamController = controller;\n        // Need to set the slots so that the assert doesn't fire. In the spec the slots already exist implicitly.\n        controller._queue = undefined;\n        controller._queueTotalSize = undefined;\n        ResetQueue(controller);\n        controller._abortReason = undefined;\n        controller._abortController = createAbortController();\n        controller._started = false;\n        controller._strategySizeAlgorithm = sizeAlgorithm;\n        controller._strategyHWM = highWaterMark;\n        controller._writeAlgorithm = writeAlgorithm;\n        controller._closeAlgorithm = closeAlgorithm;\n        controller._abortAlgorithm = abortAlgorithm;\n        const backpressure = WritableStreamDefaultControllerGetBackpressure(controller);\n        WritableStreamUpdateBackpressure(stream, backpressure);\n        const startResult = startAlgorithm();\n        const startPromise = promiseResolvedWith(startResult);\n        uponPromise(startPromise, () => {\n            controller._started = true;\n            WritableStreamDefaultControllerAdvanceQueueIfNeeded(controller);\n        }, r => {\n            controller._started = true;\n            WritableStreamDealWithRejection(stream, r);\n        });\n    }\n    function SetUpWritableStreamDefaultControllerFromUnderlyingSink(stream, underlyingSink, highWaterMark, sizeAlgorithm) {\n        const controller = Object.create(WritableStreamDefaultController.prototype);\n        let startAlgorithm = () => undefined;\n        let writeAlgorithm = () => promiseResolvedWith(undefined);\n        let closeAlgorithm = () => promiseResolvedWith(undefined);\n        let abortAlgorithm = () => promiseResolvedWith(undefined);\n        if (underlyingSink.start !== undefined) {\n            startAlgorithm = () => underlyingSink.start(controller);\n        }\n        if (underlyingSink.write !== undefined) {\n            writeAlgorithm = chunk => underlyingSink.write(chunk, controller);\n        }\n        if (underlyingSink.close !== undefined) {\n            closeAlgorithm = () => underlyingSink.close();\n        }\n        if (underlyingSink.abort !== undefined) {\n            abortAlgorithm = reason => underlyingSink.abort(reason);\n        }\n        SetUpWritableStreamDefaultController(stream, controller, startAlgorithm, writeAlgorithm, closeAlgorithm, abortAlgorithm, highWaterMark, sizeAlgorithm);\n    }\n    // ClearAlgorithms may be called twice. Erroring the same stream in multiple ways will often result in redundant calls.\n    function WritableStreamDefaultControllerClearAlgorithms(controller) {\n        controller._writeAlgorithm = undefined;\n        controller._closeAlgorithm = undefined;\n        controller._abortAlgorithm = undefined;\n        controller._strategySizeAlgorithm = undefined;\n    }\n    function WritableStreamDefaultControllerClose(controller) {\n        EnqueueValueWithSize(controller, closeSentinel, 0);\n        WritableStreamDefaultControllerAdvanceQueueIfNeeded(controller);\n    }\n    function WritableStreamDefaultControllerGetChunkSize(controller, chunk) {\n        try {\n            return controller._strategySizeAlgorithm(chunk);\n        }\n        catch (chunkSizeE) {\n            WritableStreamDefaultControllerErrorIfNeeded(controller, chunkSizeE);\n            return 1;\n        }\n    }\n    function WritableStreamDefaultControllerGetDesiredSize(controller) {\n        return controller._strategyHWM - controller._queueTotalSize;\n    }\n    function WritableStreamDefaultControllerWrite(controller, chunk, chunkSize) {\n        try {\n            EnqueueValueWithSize(controller, chunk, chunkSize);\n        }\n        catch (enqueueE) {\n            WritableStreamDefaultControllerErrorIfNeeded(controller, enqueueE);\n            return;\n        }\n        const stream = controller._controlledWritableStream;\n        if (!WritableStreamCloseQueuedOrInFlight(stream) && stream._state === 'writable') {\n            const backpressure = WritableStreamDefaultControllerGetBackpressure(controller);\n            WritableStreamUpdateBackpressure(stream, backpressure);\n        }\n        WritableStreamDefaultControllerAdvanceQueueIfNeeded(controller);\n    }\n    // Abstract operations for the WritableStreamDefaultController.\n    function WritableStreamDefaultControllerAdvanceQueueIfNeeded(controller) {\n        const stream = controller._controlledWritableStream;\n        if (!controller._started) {\n            return;\n        }\n        if (stream._inFlightWriteRequest !== undefined) {\n            return;\n        }\n        const state = stream._state;\n        if (state === 'erroring') {\n            WritableStreamFinishErroring(stream);\n            return;\n        }\n        if (controller._queue.length === 0) {\n            return;\n        }\n        const value = PeekQueueValue(controller);\n        if (value === closeSentinel) {\n            WritableStreamDefaultControllerProcessClose(controller);\n        }\n        else {\n            WritableStreamDefaultControllerProcessWrite(controller, value);\n        }\n    }\n    function WritableStreamDefaultControllerErrorIfNeeded(controller, error) {\n        if (controller._controlledWritableStream._state === 'writable') {\n            WritableStreamDefaultControllerError(controller, error);\n        }\n    }\n    function WritableStreamDefaultControllerProcessClose(controller) {\n        const stream = controller._controlledWritableStream;\n        WritableStreamMarkCloseRequestInFlight(stream);\n        DequeueValue(controller);\n        const sinkClosePromise = controller._closeAlgorithm();\n        WritableStreamDefaultControllerClearAlgorithms(controller);\n        uponPromise(sinkClosePromise, () => {\n            WritableStreamFinishInFlightClose(stream);\n        }, reason => {\n            WritableStreamFinishInFlightCloseWithError(stream, reason);\n        });\n    }\n    function WritableStreamDefaultControllerProcessWrite(controller, chunk) {\n        const stream = controller._controlledWritableStream;\n        WritableStreamMarkFirstWriteRequestInFlight(stream);\n        const sinkWritePromise = controller._writeAlgorithm(chunk);\n        uponPromise(sinkWritePromise, () => {\n            WritableStreamFinishInFlightWrite(stream);\n            const state = stream._state;\n            DequeueValue(controller);\n            if (!WritableStreamCloseQueuedOrInFlight(stream) && state === 'writable') {\n                const backpressure = WritableStreamDefaultControllerGetBackpressure(controller);\n                WritableStreamUpdateBackpressure(stream, backpressure);\n            }\n            WritableStreamDefaultControllerAdvanceQueueIfNeeded(controller);\n        }, reason => {\n            if (stream._state === 'writable') {\n                WritableStreamDefaultControllerClearAlgorithms(controller);\n            }\n            WritableStreamFinishInFlightWriteWithError(stream, reason);\n        });\n    }\n    function WritableStreamDefaultControllerGetBackpressure(controller) {\n        const desiredSize = WritableStreamDefaultControllerGetDesiredSize(controller);\n        return desiredSize <= 0;\n    }\n    // A client of WritableStreamDefaultController may use these functions directly to bypass state check.\n    function WritableStreamDefaultControllerError(controller, error) {\n        const stream = controller._controlledWritableStream;\n        WritableStreamDefaultControllerClearAlgorithms(controller);\n        WritableStreamStartErroring(stream, error);\n    }\n    // Helper functions for the WritableStream.\n    function streamBrandCheckException$2(name) {\n        return new TypeError(`WritableStream.prototype.${name} can only be used on a WritableStream`);\n    }\n    // Helper functions for the WritableStreamDefaultController.\n    function defaultControllerBrandCheckException$2(name) {\n        return new TypeError(`WritableStreamDefaultController.prototype.${name} can only be used on a WritableStreamDefaultController`);\n    }\n    // Helper functions for the WritableStreamDefaultWriter.\n    function defaultWriterBrandCheckException(name) {\n        return new TypeError(`WritableStreamDefaultWriter.prototype.${name} can only be used on a WritableStreamDefaultWriter`);\n    }\n    function defaultWriterLockException(name) {\n        return new TypeError('Cannot ' + name + ' a stream using a released writer');\n    }\n    function defaultWriterClosedPromiseInitialize(writer) {\n        writer._closedPromise = newPromise((resolve, reject) => {\n            writer._closedPromise_resolve = resolve;\n            writer._closedPromise_reject = reject;\n            writer._closedPromiseState = 'pending';\n        });\n    }\n    function defaultWriterClosedPromiseInitializeAsRejected(writer, reason) {\n        defaultWriterClosedPromiseInitialize(writer);\n        defaultWriterClosedPromiseReject(writer, reason);\n    }\n    function defaultWriterClosedPromiseInitializeAsResolved(writer) {\n        defaultWriterClosedPromiseInitialize(writer);\n        defaultWriterClosedPromiseResolve(writer);\n    }\n    function defaultWriterClosedPromiseReject(writer, reason) {\n        if (writer._closedPromise_reject === undefined) {\n            return;\n        }\n        setPromiseIsHandledToTrue(writer._closedPromise);\n        writer._closedPromise_reject(reason);\n        writer._closedPromise_resolve = undefined;\n        writer._closedPromise_reject = undefined;\n        writer._closedPromiseState = 'rejected';\n    }\n    function defaultWriterClosedPromiseResetToRejected(writer, reason) {\n        defaultWriterClosedPromiseInitializeAsRejected(writer, reason);\n    }\n    function defaultWriterClosedPromiseResolve(writer) {\n        if (writer._closedPromise_resolve === undefined) {\n            return;\n        }\n        writer._closedPromise_resolve(undefined);\n        writer._closedPromise_resolve = undefined;\n        writer._closedPromise_reject = undefined;\n        writer._closedPromiseState = 'resolved';\n    }\n    function defaultWriterReadyPromiseInitialize(writer) {\n        writer._readyPromise = newPromise((resolve, reject) => {\n            writer._readyPromise_resolve = resolve;\n            writer._readyPromise_reject = reject;\n        });\n        writer._readyPromiseState = 'pending';\n    }\n    function defaultWriterReadyPromiseInitializeAsRejected(writer, reason) {\n        defaultWriterReadyPromiseInitialize(writer);\n        defaultWriterReadyPromiseReject(writer, reason);\n    }\n    function defaultWriterReadyPromiseInitializeAsResolved(writer) {\n        defaultWriterReadyPromiseInitialize(writer);\n        defaultWriterReadyPromiseResolve(writer);\n    }\n    function defaultWriterReadyPromiseReject(writer, reason) {\n        if (writer._readyPromise_reject === undefined) {\n            return;\n        }\n        setPromiseIsHandledToTrue(writer._readyPromise);\n        writer._readyPromise_reject(reason);\n        writer._readyPromise_resolve = undefined;\n        writer._readyPromise_reject = undefined;\n        writer._readyPromiseState = 'rejected';\n    }\n    function defaultWriterReadyPromiseReset(writer) {\n        defaultWriterReadyPromiseInitialize(writer);\n    }\n    function defaultWriterReadyPromiseResetToRejected(writer, reason) {\n        defaultWriterReadyPromiseInitializeAsRejected(writer, reason);\n    }\n    function defaultWriterReadyPromiseResolve(writer) {\n        if (writer._readyPromise_resolve === undefined) {\n            return;\n        }\n        writer._readyPromise_resolve(undefined);\n        writer._readyPromise_resolve = undefined;\n        writer._readyPromise_reject = undefined;\n        writer._readyPromiseState = 'fulfilled';\n    }\n\n    /// <reference lib=\"dom\" />\n    const NativeDOMException = typeof DOMException !== 'undefined' ? DOMException : undefined;\n\n    /// <reference types=\"node\" />\n    function isDOMExceptionConstructor(ctor) {\n        if (!(typeof ctor === 'function' || typeof ctor === 'object')) {\n            return false;\n        }\n        try {\n            new ctor();\n            return true;\n        }\n        catch (_a) {\n            return false;\n        }\n    }\n    function createDOMExceptionPolyfill() {\n        // eslint-disable-next-line no-shadow\n        const ctor = function DOMException(message, name) {\n            this.message = message || '';\n            this.name = name || 'Error';\n            if (Error.captureStackTrace) {\n                Error.captureStackTrace(this, this.constructor);\n            }\n        };\n        ctor.prototype = Object.create(Error.prototype);\n        Object.defineProperty(ctor.prototype, 'constructor', { value: ctor, writable: true, configurable: true });\n        return ctor;\n    }\n    // eslint-disable-next-line no-redeclare\n    const DOMException$1 = isDOMExceptionConstructor(NativeDOMException) ? NativeDOMException : createDOMExceptionPolyfill();\n\n    function ReadableStreamPipeTo(source, dest, preventClose, preventAbort, preventCancel, signal) {\n        const reader = AcquireReadableStreamDefaultReader(source);\n        const writer = AcquireWritableStreamDefaultWriter(dest);\n        source._disturbed = true;\n        let shuttingDown = false;\n        // This is used to keep track of the spec's requirement that we wait for ongoing writes during shutdown.\n        let currentWrite = promiseResolvedWith(undefined);\n        return newPromise((resolve, reject) => {\n            let abortAlgorithm;\n            if (signal !== undefined) {\n                abortAlgorithm = () => {\n                    const error = new DOMException$1('Aborted', 'AbortError');\n                    const actions = [];\n                    if (!preventAbort) {\n                        actions.push(() => {\n                            if (dest._state === 'writable') {\n                                return WritableStreamAbort(dest, error);\n                            }\n                            return promiseResolvedWith(undefined);\n                        });\n                    }\n                    if (!preventCancel) {\n                        actions.push(() => {\n                            if (source._state === 'readable') {\n                                return ReadableStreamCancel(source, error);\n                            }\n                            return promiseResolvedWith(undefined);\n                        });\n                    }\n                    shutdownWithAction(() => Promise.all(actions.map(action => action())), true, error);\n                };\n                if (signal.aborted) {\n                    abortAlgorithm();\n                    return;\n                }\n                signal.addEventListener('abort', abortAlgorithm);\n            }\n            // Using reader and writer, read all chunks from this and write them to dest\n            // - Backpressure must be enforced\n            // - Shutdown must stop all activity\n            function pipeLoop() {\n                return newPromise((resolveLoop, rejectLoop) => {\n                    function next(done) {\n                        if (done) {\n                            resolveLoop();\n                        }\n                        else {\n                            // Use `PerformPromiseThen` instead of `uponPromise` to avoid\n                            // adding unnecessary `.catch(rethrowAssertionErrorRejection)` handlers\n                            PerformPromiseThen(pipeStep(), next, rejectLoop);\n                        }\n                    }\n                    next(false);\n                });\n            }\n            function pipeStep() {\n                if (shuttingDown) {\n                    return promiseResolvedWith(true);\n                }\n                return PerformPromiseThen(writer._readyPromise, () => {\n                    return newPromise((resolveRead, rejectRead) => {\n                        ReadableStreamDefaultReaderRead(reader, {\n                            _chunkSteps: chunk => {\n                                currentWrite = PerformPromiseThen(WritableStreamDefaultWriterWrite(writer, chunk), undefined, noop);\n                                resolveRead(false);\n                            },\n                            _closeSteps: () => resolveRead(true),\n                            _errorSteps: rejectRead\n                        });\n                    });\n                });\n            }\n            // Errors must be propagated forward\n            isOrBecomesErrored(source, reader._closedPromise, storedError => {\n                if (!preventAbort) {\n                    shutdownWithAction(() => WritableStreamAbort(dest, storedError), true, storedError);\n                }\n                else {\n                    shutdown(true, storedError);\n                }\n            });\n            // Errors must be propagated backward\n            isOrBecomesErrored(dest, writer._closedPromise, storedError => {\n                if (!preventCancel) {\n                    shutdownWithAction(() => ReadableStreamCancel(source, storedError), true, storedError);\n                }\n                else {\n                    shutdown(true, storedError);\n                }\n            });\n            // Closing must be propagated forward\n            isOrBecomesClosed(source, reader._closedPromise, () => {\n                if (!preventClose) {\n                    shutdownWithAction(() => WritableStreamDefaultWriterCloseWithErrorPropagation(writer));\n                }\n                else {\n                    shutdown();\n                }\n            });\n            // Closing must be propagated backward\n            if (WritableStreamCloseQueuedOrInFlight(dest) || dest._state === 'closed') {\n                const destClosed = new TypeError('the destination writable stream closed before all data could be piped to it');\n                if (!preventCancel) {\n                    shutdownWithAction(() => ReadableStreamCancel(source, destClosed), true, destClosed);\n                }\n                else {\n                    shutdown(true, destClosed);\n                }\n            }\n            setPromiseIsHandledToTrue(pipeLoop());\n            function waitForWritesToFinish() {\n                // Another write may have started while we were waiting on this currentWrite, so we have to be sure to wait\n                // for that too.\n                const oldCurrentWrite = currentWrite;\n                return PerformPromiseThen(currentWrite, () => oldCurrentWrite !== currentWrite ? waitForWritesToFinish() : undefined);\n            }\n            function isOrBecomesErrored(stream, promise, action) {\n                if (stream._state === 'errored') {\n                    action(stream._storedError);\n                }\n                else {\n                    uponRejection(promise, action);\n                }\n            }\n            function isOrBecomesClosed(stream, promise, action) {\n                if (stream._state === 'closed') {\n                    action();\n                }\n                else {\n                    uponFulfillment(promise, action);\n                }\n            }\n            function shutdownWithAction(action, originalIsError, originalError) {\n                if (shuttingDown) {\n                    return;\n                }\n                shuttingDown = true;\n                if (dest._state === 'writable' && !WritableStreamCloseQueuedOrInFlight(dest)) {\n                    uponFulfillment(waitForWritesToFinish(), doTheRest);\n                }\n                else {\n                    doTheRest();\n                }\n                function doTheRest() {\n                    uponPromise(action(), () => finalize(originalIsError, originalError), newError => finalize(true, newError));\n                }\n            }\n            function shutdown(isError, error) {\n                if (shuttingDown) {\n                    return;\n                }\n                shuttingDown = true;\n                if (dest._state === 'writable' && !WritableStreamCloseQueuedOrInFlight(dest)) {\n                    uponFulfillment(waitForWritesToFinish(), () => finalize(isError, error));\n                }\n                else {\n                    finalize(isError, error);\n                }\n            }\n            function finalize(isError, error) {\n                WritableStreamDefaultWriterRelease(writer);\n                ReadableStreamReaderGenericRelease(reader);\n                if (signal !== undefined) {\n                    signal.removeEventListener('abort', abortAlgorithm);\n                }\n                if (isError) {\n                    reject(error);\n                }\n                else {\n                    resolve(undefined);\n                }\n            }\n        });\n    }\n\n    /**\n     * Allows control of a {@link ReadableStream | readable stream}'s state and internal queue.\n     *\n     * @public\n     */\n    class ReadableStreamDefaultController {\n        constructor() {\n            throw new TypeError('Illegal constructor');\n        }\n        /**\n         * Returns the desired size to fill the controlled stream's internal queue. It can be negative, if the queue is\n         * over-full. An underlying source ought to use this information to determine when and how to apply backpressure.\n         */\n        get desiredSize() {\n            if (!IsReadableStreamDefaultController(this)) {\n                throw defaultControllerBrandCheckException$1('desiredSize');\n            }\n            return ReadableStreamDefaultControllerGetDesiredSize(this);\n        }\n        /**\n         * Closes the controlled readable stream. Consumers will still be able to read any previously-enqueued chunks from\n         * the stream, but once those are read, the stream will become closed.\n         */\n        close() {\n            if (!IsReadableStreamDefaultController(this)) {\n                throw defaultControllerBrandCheckException$1('close');\n            }\n            if (!ReadableStreamDefaultControllerCanCloseOrEnqueue(this)) {\n                throw new TypeError('The stream is not in a state that permits close');\n            }\n            ReadableStreamDefaultControllerClose(this);\n        }\n        enqueue(chunk = undefined) {\n            if (!IsReadableStreamDefaultController(this)) {\n                throw defaultControllerBrandCheckException$1('enqueue');\n            }\n            if (!ReadableStreamDefaultControllerCanCloseOrEnqueue(this)) {\n                throw new TypeError('The stream is not in a state that permits enqueue');\n            }\n            return ReadableStreamDefaultControllerEnqueue(this, chunk);\n        }\n        /**\n         * Errors the controlled readable stream, making all future interactions with it fail with the given error `e`.\n         */\n        error(e = undefined) {\n            if (!IsReadableStreamDefaultController(this)) {\n                throw defaultControllerBrandCheckException$1('error');\n            }\n            ReadableStreamDefaultControllerError(this, e);\n        }\n        /** @internal */\n        [CancelSteps](reason) {\n            ResetQueue(this);\n            const result = this._cancelAlgorithm(reason);\n            ReadableStreamDefaultControllerClearAlgorithms(this);\n            return result;\n        }\n        /** @internal */\n        [PullSteps](readRequest) {\n            const stream = this._controlledReadableStream;\n            if (this._queue.length > 0) {\n                const chunk = DequeueValue(this);\n                if (this._closeRequested && this._queue.length === 0) {\n                    ReadableStreamDefaultControllerClearAlgorithms(this);\n                    ReadableStreamClose(stream);\n                }\n                else {\n                    ReadableStreamDefaultControllerCallPullIfNeeded(this);\n                }\n                readRequest._chunkSteps(chunk);\n            }\n            else {\n                ReadableStreamAddReadRequest(stream, readRequest);\n                ReadableStreamDefaultControllerCallPullIfNeeded(this);\n            }\n        }\n    }\n    Object.defineProperties(ReadableStreamDefaultController.prototype, {\n        close: { enumerable: true },\n        enqueue: { enumerable: true },\n        error: { enumerable: true },\n        desiredSize: { enumerable: true }\n    });\n    if (typeof SymbolPolyfill.toStringTag === 'symbol') {\n        Object.defineProperty(ReadableStreamDefaultController.prototype, SymbolPolyfill.toStringTag, {\n            value: 'ReadableStreamDefaultController',\n            configurable: true\n        });\n    }\n    // Abstract operations for the ReadableStreamDefaultController.\n    function IsReadableStreamDefaultController(x) {\n        if (!typeIsObject(x)) {\n            return false;\n        }\n        if (!Object.prototype.hasOwnProperty.call(x, '_controlledReadableStream')) {\n            return false;\n        }\n        return x instanceof ReadableStreamDefaultController;\n    }\n    function ReadableStreamDefaultControllerCallPullIfNeeded(controller) {\n        const shouldPull = ReadableStreamDefaultControllerShouldCallPull(controller);\n        if (!shouldPull) {\n            return;\n        }\n        if (controller._pulling) {\n            controller._pullAgain = true;\n            return;\n        }\n        controller._pulling = true;\n        const pullPromise = controller._pullAlgorithm();\n        uponPromise(pullPromise, () => {\n            controller._pulling = false;\n            if (controller._pullAgain) {\n                controller._pullAgain = false;\n                ReadableStreamDefaultControllerCallPullIfNeeded(controller);\n            }\n        }, e => {\n            ReadableStreamDefaultControllerError(controller, e);\n        });\n    }\n    function ReadableStreamDefaultControllerShouldCallPull(controller) {\n        const stream = controller._controlledReadableStream;\n        if (!ReadableStreamDefaultControllerCanCloseOrEnqueue(controller)) {\n            return false;\n        }\n        if (!controller._started) {\n            return false;\n        }\n        if (IsReadableStreamLocked(stream) && ReadableStreamGetNumReadRequests(stream) > 0) {\n            return true;\n        }\n        const desiredSize = ReadableStreamDefaultControllerGetDesiredSize(controller);\n        if (desiredSize > 0) {\n            return true;\n        }\n        return false;\n    }\n    function ReadableStreamDefaultControllerClearAlgorithms(controller) {\n        controller._pullAlgorithm = undefined;\n        controller._cancelAlgorithm = undefined;\n        controller._strategySizeAlgorithm = undefined;\n    }\n    // A client of ReadableStreamDefaultController may use these functions directly to bypass state check.\n    function ReadableStreamDefaultControllerClose(controller) {\n        if (!ReadableStreamDefaultControllerCanCloseOrEnqueue(controller)) {\n            return;\n        }\n        const stream = controller._controlledReadableStream;\n        controller._closeRequested = true;\n        if (controller._queue.length === 0) {\n            ReadableStreamDefaultControllerClearAlgorithms(controller);\n            ReadableStreamClose(stream);\n        }\n    }\n    function ReadableStreamDefaultControllerEnqueue(controller, chunk) {\n        if (!ReadableStreamDefaultControllerCanCloseOrEnqueue(controller)) {\n            return;\n        }\n        const stream = controller._controlledReadableStream;\n        if (IsReadableStreamLocked(stream) && ReadableStreamGetNumReadRequests(stream) > 0) {\n            ReadableStreamFulfillReadRequest(stream, chunk, false);\n        }\n        else {\n            let chunkSize;\n            try {\n                chunkSize = controller._strategySizeAlgorithm(chunk);\n            }\n            catch (chunkSizeE) {\n                ReadableStreamDefaultControllerError(controller, chunkSizeE);\n                throw chunkSizeE;\n            }\n            try {\n                EnqueueValueWithSize(controller, chunk, chunkSize);\n            }\n            catch (enqueueE) {\n                ReadableStreamDefaultControllerError(controller, enqueueE);\n                throw enqueueE;\n            }\n        }\n        ReadableStreamDefaultControllerCallPullIfNeeded(controller);\n    }\n    function ReadableStreamDefaultControllerError(controller, e) {\n        const stream = controller._controlledReadableStream;\n        if (stream._state !== 'readable') {\n            return;\n        }\n        ResetQueue(controller);\n        ReadableStreamDefaultControllerClearAlgorithms(controller);\n        ReadableStreamError(stream, e);\n    }\n    function ReadableStreamDefaultControllerGetDesiredSize(controller) {\n        const state = controller._controlledReadableStream._state;\n        if (state === 'errored') {\n            return null;\n        }\n        if (state === 'closed') {\n            return 0;\n        }\n        return controller._strategyHWM - controller._queueTotalSize;\n    }\n    // This is used in the implementation of TransformStream.\n    function ReadableStreamDefaultControllerHasBackpressure(controller) {\n        if (ReadableStreamDefaultControllerShouldCallPull(controller)) {\n            return false;\n        }\n        return true;\n    }\n    function ReadableStreamDefaultControllerCanCloseOrEnqueue(controller) {\n        const state = controller._controlledReadableStream._state;\n        if (!controller._closeRequested && state === 'readable') {\n            return true;\n        }\n        return false;\n    }\n    function SetUpReadableStreamDefaultController(stream, controller, startAlgorithm, pullAlgorithm, cancelAlgorithm, highWaterMark, sizeAlgorithm) {\n        controller._controlledReadableStream = stream;\n        controller._queue = undefined;\n        controller._queueTotalSize = undefined;\n        ResetQueue(controller);\n        controller._started = false;\n        controller._closeRequested = false;\n        controller._pullAgain = false;\n        controller._pulling = false;\n        controller._strategySizeAlgorithm = sizeAlgorithm;\n        controller._strategyHWM = highWaterMark;\n        controller._pullAlgorithm = pullAlgorithm;\n        controller._cancelAlgorithm = cancelAlgorithm;\n        stream._readableStreamController = controller;\n        const startResult = startAlgorithm();\n        uponPromise(promiseResolvedWith(startResult), () => {\n            controller._started = true;\n            ReadableStreamDefaultControllerCallPullIfNeeded(controller);\n        }, r => {\n            ReadableStreamDefaultControllerError(controller, r);\n        });\n    }\n    function SetUpReadableStreamDefaultControllerFromUnderlyingSource(stream, underlyingSource, highWaterMark, sizeAlgorithm) {\n        const controller = Object.create(ReadableStreamDefaultController.prototype);\n        let startAlgorithm = () => undefined;\n        let pullAlgorithm = () => promiseResolvedWith(undefined);\n        let cancelAlgorithm = () => promiseResolvedWith(undefined);\n        if (underlyingSource.start !== undefined) {\n            startAlgorithm = () => underlyingSource.start(controller);\n        }\n        if (underlyingSource.pull !== undefined) {\n            pullAlgorithm = () => underlyingSource.pull(controller);\n        }\n        if (underlyingSource.cancel !== undefined) {\n            cancelAlgorithm = reason => underlyingSource.cancel(reason);\n        }\n        SetUpReadableStreamDefaultController(stream, controller, startAlgorithm, pullAlgorithm, cancelAlgorithm, highWaterMark, sizeAlgorithm);\n    }\n    // Helper functions for the ReadableStreamDefaultController.\n    function defaultControllerBrandCheckException$1(name) {\n        return new TypeError(`ReadableStreamDefaultController.prototype.${name} can only be used on a ReadableStreamDefaultController`);\n    }\n\n    function ReadableStreamTee(stream, cloneForBranch2) {\n        if (IsReadableByteStreamController(stream._readableStreamController)) {\n            return ReadableByteStreamTee(stream);\n        }\n        return ReadableStreamDefaultTee(stream);\n    }\n    function ReadableStreamDefaultTee(stream, cloneForBranch2) {\n        const reader = AcquireReadableStreamDefaultReader(stream);\n        let reading = false;\n        let readAgain = false;\n        let canceled1 = false;\n        let canceled2 = false;\n        let reason1;\n        let reason2;\n        let branch1;\n        let branch2;\n        let resolveCancelPromise;\n        const cancelPromise = newPromise(resolve => {\n            resolveCancelPromise = resolve;\n        });\n        function pullAlgorithm() {\n            if (reading) {\n                readAgain = true;\n                return promiseResolvedWith(undefined);\n            }\n            reading = true;\n            const readRequest = {\n                _chunkSteps: chunk => {\n                    // This needs to be delayed a microtask because it takes at least a microtask to detect errors (using\n                    // reader._closedPromise below), and we want errors in stream to error both branches immediately. We cannot let\n                    // successful synchronously-available reads get ahead of asynchronously-available errors.\n                    queueMicrotask(() => {\n                        readAgain = false;\n                        const chunk1 = chunk;\n                        const chunk2 = chunk;\n                        // There is no way to access the cloning code right now in the reference implementation.\n                        // If we add one then we'll need an implementation for serializable objects.\n                        // if (!canceled2 && cloneForBranch2) {\n                        //   chunk2 = StructuredDeserialize(StructuredSerialize(chunk2));\n                        // }\n                        if (!canceled1) {\n                            ReadableStreamDefaultControllerEnqueue(branch1._readableStreamController, chunk1);\n                        }\n                        if (!canceled2) {\n                            ReadableStreamDefaultControllerEnqueue(branch2._readableStreamController, chunk2);\n                        }\n                        reading = false;\n                        if (readAgain) {\n                            pullAlgorithm();\n                        }\n                    });\n                },\n                _closeSteps: () => {\n                    reading = false;\n                    if (!canceled1) {\n                        ReadableStreamDefaultControllerClose(branch1._readableStreamController);\n                    }\n                    if (!canceled2) {\n                        ReadableStreamDefaultControllerClose(branch2._readableStreamController);\n                    }\n                    if (!canceled1 || !canceled2) {\n                        resolveCancelPromise(undefined);\n                    }\n                },\n                _errorSteps: () => {\n                    reading = false;\n                }\n            };\n            ReadableStreamDefaultReaderRead(reader, readRequest);\n            return promiseResolvedWith(undefined);\n        }\n        function cancel1Algorithm(reason) {\n            canceled1 = true;\n            reason1 = reason;\n            if (canceled2) {\n                const compositeReason = CreateArrayFromList([reason1, reason2]);\n                const cancelResult = ReadableStreamCancel(stream, compositeReason);\n                resolveCancelPromise(cancelResult);\n            }\n            return cancelPromise;\n        }\n        function cancel2Algorithm(reason) {\n            canceled2 = true;\n            reason2 = reason;\n            if (canceled1) {\n                const compositeReason = CreateArrayFromList([reason1, reason2]);\n                const cancelResult = ReadableStreamCancel(stream, compositeReason);\n                resolveCancelPromise(cancelResult);\n            }\n            return cancelPromise;\n        }\n        function startAlgorithm() {\n            // do nothing\n        }\n        branch1 = CreateReadableStream(startAlgorithm, pullAlgorithm, cancel1Algorithm);\n        branch2 = CreateReadableStream(startAlgorithm, pullAlgorithm, cancel2Algorithm);\n        uponRejection(reader._closedPromise, (r) => {\n            ReadableStreamDefaultControllerError(branch1._readableStreamController, r);\n            ReadableStreamDefaultControllerError(branch2._readableStreamController, r);\n            if (!canceled1 || !canceled2) {\n                resolveCancelPromise(undefined);\n            }\n        });\n        return [branch1, branch2];\n    }\n    function ReadableByteStreamTee(stream) {\n        let reader = AcquireReadableStreamDefaultReader(stream);\n        let reading = false;\n        let readAgainForBranch1 = false;\n        let readAgainForBranch2 = false;\n        let canceled1 = false;\n        let canceled2 = false;\n        let reason1;\n        let reason2;\n        let branch1;\n        let branch2;\n        let resolveCancelPromise;\n        const cancelPromise = newPromise(resolve => {\n            resolveCancelPromise = resolve;\n        });\n        function forwardReaderError(thisReader) {\n            uponRejection(thisReader._closedPromise, r => {\n                if (thisReader !== reader) {\n                    return;\n                }\n                ReadableByteStreamControllerError(branch1._readableStreamController, r);\n                ReadableByteStreamControllerError(branch2._readableStreamController, r);\n                if (!canceled1 || !canceled2) {\n                    resolveCancelPromise(undefined);\n                }\n            });\n        }\n        function pullWithDefaultReader() {\n            if (IsReadableStreamBYOBReader(reader)) {\n                ReadableStreamReaderGenericRelease(reader);\n                reader = AcquireReadableStreamDefaultReader(stream);\n                forwardReaderError(reader);\n            }\n            const readRequest = {\n                _chunkSteps: chunk => {\n                    // This needs to be delayed a microtask because it takes at least a microtask to detect errors (using\n                    // reader._closedPromise below), and we want errors in stream to error both branches immediately. We cannot let\n                    // successful synchronously-available reads get ahead of asynchronously-available errors.\n                    queueMicrotask(() => {\n                        readAgainForBranch1 = false;\n                        readAgainForBranch2 = false;\n                        const chunk1 = chunk;\n                        let chunk2 = chunk;\n                        if (!canceled1 && !canceled2) {\n                            try {\n                                chunk2 = CloneAsUint8Array(chunk);\n                            }\n                            catch (cloneE) {\n                                ReadableByteStreamControllerError(branch1._readableStreamController, cloneE);\n                                ReadableByteStreamControllerError(branch2._readableStreamController, cloneE);\n                                resolveCancelPromise(ReadableStreamCancel(stream, cloneE));\n                                return;\n                            }\n                        }\n                        if (!canceled1) {\n                            ReadableByteStreamControllerEnqueue(branch1._readableStreamController, chunk1);\n                        }\n                        if (!canceled2) {\n                            ReadableByteStreamControllerEnqueue(branch2._readableStreamController, chunk2);\n                        }\n                        reading = false;\n                        if (readAgainForBranch1) {\n                            pull1Algorithm();\n                        }\n                        else if (readAgainForBranch2) {\n                            pull2Algorithm();\n                        }\n                    });\n                },\n                _closeSteps: () => {\n                    reading = false;\n                    if (!canceled1) {\n                        ReadableByteStreamControllerClose(branch1._readableStreamController);\n                    }\n                    if (!canceled2) {\n                        ReadableByteStreamControllerClose(branch2._readableStreamController);\n                    }\n                    if (branch1._readableStreamController._pendingPullIntos.length > 0) {\n                        ReadableByteStreamControllerRespond(branch1._readableStreamController, 0);\n                    }\n                    if (branch2._readableStreamController._pendingPullIntos.length > 0) {\n                        ReadableByteStreamControllerRespond(branch2._readableStreamController, 0);\n                    }\n                    if (!canceled1 || !canceled2) {\n                        resolveCancelPromise(undefined);\n                    }\n                },\n                _errorSteps: () => {\n                    reading = false;\n                }\n            };\n            ReadableStreamDefaultReaderRead(reader, readRequest);\n        }\n        function pullWithBYOBReader(view, forBranch2) {\n            if (IsReadableStreamDefaultReader(reader)) {\n                ReadableStreamReaderGenericRelease(reader);\n                reader = AcquireReadableStreamBYOBReader(stream);\n                forwardReaderError(reader);\n            }\n            const byobBranch = forBranch2 ? branch2 : branch1;\n            const otherBranch = forBranch2 ? branch1 : branch2;\n            const readIntoRequest = {\n                _chunkSteps: chunk => {\n                    // This needs to be delayed a microtask because it takes at least a microtask to detect errors (using\n                    // reader._closedPromise below), and we want errors in stream to error both branches immediately. We cannot let\n                    // successful synchronously-available reads get ahead of asynchronously-available errors.\n                    queueMicrotask(() => {\n                        readAgainForBranch1 = false;\n                        readAgainForBranch2 = false;\n                        const byobCanceled = forBranch2 ? canceled2 : canceled1;\n                        const otherCanceled = forBranch2 ? canceled1 : canceled2;\n                        if (!otherCanceled) {\n                            let clonedChunk;\n                            try {\n                                clonedChunk = CloneAsUint8Array(chunk);\n                            }\n                            catch (cloneE) {\n                                ReadableByteStreamControllerError(byobBranch._readableStreamController, cloneE);\n                                ReadableByteStreamControllerError(otherBranch._readableStreamController, cloneE);\n                                resolveCancelPromise(ReadableStreamCancel(stream, cloneE));\n                                return;\n                            }\n                            if (!byobCanceled) {\n                                ReadableByteStreamControllerRespondWithNewView(byobBranch._readableStreamController, chunk);\n                            }\n                            ReadableByteStreamControllerEnqueue(otherBranch._readableStreamController, clonedChunk);\n                        }\n                        else if (!byobCanceled) {\n                            ReadableByteStreamControllerRespondWithNewView(byobBranch._readableStreamController, chunk);\n                        }\n                        reading = false;\n                        if (readAgainForBranch1) {\n                            pull1Algorithm();\n                        }\n                        else if (readAgainForBranch2) {\n                            pull2Algorithm();\n                        }\n                    });\n                },\n                _closeSteps: chunk => {\n                    reading = false;\n                    const byobCanceled = forBranch2 ? canceled2 : canceled1;\n                    const otherCanceled = forBranch2 ? canceled1 : canceled2;\n                    if (!byobCanceled) {\n                        ReadableByteStreamControllerClose(byobBranch._readableStreamController);\n                    }\n                    if (!otherCanceled) {\n                        ReadableByteStreamControllerClose(otherBranch._readableStreamController);\n                    }\n                    if (chunk !== undefined) {\n                        if (!byobCanceled) {\n                            ReadableByteStreamControllerRespondWithNewView(byobBranch._readableStreamController, chunk);\n                        }\n                        if (!otherCanceled && otherBranch._readableStreamController._pendingPullIntos.length > 0) {\n                            ReadableByteStreamControllerRespond(otherBranch._readableStreamController, 0);\n                        }\n                    }\n                    if (!byobCanceled || !otherCanceled) {\n                        resolveCancelPromise(undefined);\n                    }\n                },\n                _errorSteps: () => {\n                    reading = false;\n                }\n            };\n            ReadableStreamBYOBReaderRead(reader, view, readIntoRequest);\n        }\n        function pull1Algorithm() {\n            if (reading) {\n                readAgainForBranch1 = true;\n                return promiseResolvedWith(undefined);\n            }\n            reading = true;\n            const byobRequest = ReadableByteStreamControllerGetBYOBRequest(branch1._readableStreamController);\n            if (byobRequest === null) {\n                pullWithDefaultReader();\n            }\n            else {\n                pullWithBYOBReader(byobRequest._view, false);\n            }\n            return promiseResolvedWith(undefined);\n        }\n        function pull2Algorithm() {\n            if (reading) {\n                readAgainForBranch2 = true;\n                return promiseResolvedWith(undefined);\n            }\n            reading = true;\n            const byobRequest = ReadableByteStreamControllerGetBYOBRequest(branch2._readableStreamController);\n            if (byobRequest === null) {\n                pullWithDefaultReader();\n            }\n            else {\n                pullWithBYOBReader(byobRequest._view, true);\n            }\n            return promiseResolvedWith(undefined);\n        }\n        function cancel1Algorithm(reason) {\n            canceled1 = true;\n            reason1 = reason;\n            if (canceled2) {\n                const compositeReason = CreateArrayFromList([reason1, reason2]);\n                const cancelResult = ReadableStreamCancel(stream, compositeReason);\n                resolveCancelPromise(cancelResult);\n            }\n            return cancelPromise;\n        }\n        function cancel2Algorithm(reason) {\n            canceled2 = true;\n            reason2 = reason;\n            if (canceled1) {\n                const compositeReason = CreateArrayFromList([reason1, reason2]);\n                const cancelResult = ReadableStreamCancel(stream, compositeReason);\n                resolveCancelPromise(cancelResult);\n            }\n            return cancelPromise;\n        }\n        function startAlgorithm() {\n            return;\n        }\n        branch1 = CreateReadableByteStream(startAlgorithm, pull1Algorithm, cancel1Algorithm);\n        branch2 = CreateReadableByteStream(startAlgorithm, pull2Algorithm, cancel2Algorithm);\n        forwardReaderError(reader);\n        return [branch1, branch2];\n    }\n\n    function convertUnderlyingDefaultOrByteSource(source, context) {\n        assertDictionary(source, context);\n        const original = source;\n        const autoAllocateChunkSize = original === null || original === void 0 ? void 0 : original.autoAllocateChunkSize;\n        const cancel = original === null || original === void 0 ? void 0 : original.cancel;\n        const pull = original === null || original === void 0 ? void 0 : original.pull;\n        const start = original === null || original === void 0 ? void 0 : original.start;\n        const type = original === null || original === void 0 ? void 0 : original.type;\n        return {\n            autoAllocateChunkSize: autoAllocateChunkSize === undefined ?\n                undefined :\n                convertUnsignedLongLongWithEnforceRange(autoAllocateChunkSize, `${context} has member 'autoAllocateChunkSize' that`),\n            cancel: cancel === undefined ?\n                undefined :\n                convertUnderlyingSourceCancelCallback(cancel, original, `${context} has member 'cancel' that`),\n            pull: pull === undefined ?\n                undefined :\n                convertUnderlyingSourcePullCallback(pull, original, `${context} has member 'pull' that`),\n            start: start === undefined ?\n                undefined :\n                convertUnderlyingSourceStartCallback(start, original, `${context} has member 'start' that`),\n            type: type === undefined ? undefined : convertReadableStreamType(type, `${context} has member 'type' that`)\n        };\n    }\n    function convertUnderlyingSourceCancelCallback(fn, original, context) {\n        assertFunction(fn, context);\n        return (reason) => promiseCall(fn, original, [reason]);\n    }\n    function convertUnderlyingSourcePullCallback(fn, original, context) {\n        assertFunction(fn, context);\n        return (controller) => promiseCall(fn, original, [controller]);\n    }\n    function convertUnderlyingSourceStartCallback(fn, original, context) {\n        assertFunction(fn, context);\n        return (controller) => reflectCall(fn, original, [controller]);\n    }\n    function convertReadableStreamType(type, context) {\n        type = `${type}`;\n        if (type !== 'bytes') {\n            throw new TypeError(`${context} '${type}' is not a valid enumeration value for ReadableStreamType`);\n        }\n        return type;\n    }\n\n    function convertReaderOptions(options, context) {\n        assertDictionary(options, context);\n        const mode = options === null || options === void 0 ? void 0 : options.mode;\n        return {\n            mode: mode === undefined ? undefined : convertReadableStreamReaderMode(mode, `${context} has member 'mode' that`)\n        };\n    }\n    function convertReadableStreamReaderMode(mode, context) {\n        mode = `${mode}`;\n        if (mode !== 'byob') {\n            throw new TypeError(`${context} '${mode}' is not a valid enumeration value for ReadableStreamReaderMode`);\n        }\n        return mode;\n    }\n\n    function convertIteratorOptions(options, context) {\n        assertDictionary(options, context);\n        const preventCancel = options === null || options === void 0 ? void 0 : options.preventCancel;\n        return { preventCancel: Boolean(preventCancel) };\n    }\n\n    function convertPipeOptions(options, context) {\n        assertDictionary(options, context);\n        const preventAbort = options === null || options === void 0 ? void 0 : options.preventAbort;\n        const preventCancel = options === null || options === void 0 ? void 0 : options.preventCancel;\n        const preventClose = options === null || options === void 0 ? void 0 : options.preventClose;\n        const signal = options === null || options === void 0 ? void 0 : options.signal;\n        if (signal !== undefined) {\n            assertAbortSignal(signal, `${context} has member 'signal' that`);\n        }\n        return {\n            preventAbort: Boolean(preventAbort),\n            preventCancel: Boolean(preventCancel),\n            preventClose: Boolean(preventClose),\n            signal\n        };\n    }\n    function assertAbortSignal(signal, context) {\n        if (!isAbortSignal(signal)) {\n            throw new TypeError(`${context} is not an AbortSignal.`);\n        }\n    }\n\n    function convertReadableWritablePair(pair, context) {\n        assertDictionary(pair, context);\n        const readable = pair === null || pair === void 0 ? void 0 : pair.readable;\n        assertRequiredField(readable, 'readable', 'ReadableWritablePair');\n        assertReadableStream(readable, `${context} has member 'readable' that`);\n        const writable = pair === null || pair === void 0 ? void 0 : pair.writable;\n        assertRequiredField(writable, 'writable', 'ReadableWritablePair');\n        assertWritableStream(writable, `${context} has member 'writable' that`);\n        return { readable, writable };\n    }\n\n    /**\n     * A readable stream represents a source of data, from which you can read.\n     *\n     * @public\n     */\n    class ReadableStream {\n        constructor(rawUnderlyingSource = {}, rawStrategy = {}) {\n            if (rawUnderlyingSource === undefined) {\n                rawUnderlyingSource = null;\n            }\n            else {\n                assertObject(rawUnderlyingSource, 'First parameter');\n            }\n            const strategy = convertQueuingStrategy(rawStrategy, 'Second parameter');\n            const underlyingSource = convertUnderlyingDefaultOrByteSource(rawUnderlyingSource, 'First parameter');\n            InitializeReadableStream(this);\n            if (underlyingSource.type === 'bytes') {\n                if (strategy.size !== undefined) {\n                    throw new RangeError('The strategy for a byte stream cannot have a size function');\n                }\n                const highWaterMark = ExtractHighWaterMark(strategy, 0);\n                SetUpReadableByteStreamControllerFromUnderlyingSource(this, underlyingSource, highWaterMark);\n            }\n            else {\n                const sizeAlgorithm = ExtractSizeAlgorithm(strategy);\n                const highWaterMark = ExtractHighWaterMark(strategy, 1);\n                SetUpReadableStreamDefaultControllerFromUnderlyingSource(this, underlyingSource, highWaterMark, sizeAlgorithm);\n            }\n        }\n        /**\n         * Whether or not the readable stream is locked to a {@link ReadableStreamDefaultReader | reader}.\n         */\n        get locked() {\n            if (!IsReadableStream(this)) {\n                throw streamBrandCheckException$1('locked');\n            }\n            return IsReadableStreamLocked(this);\n        }\n        /**\n         * Cancels the stream, signaling a loss of interest in the stream by a consumer.\n         *\n         * The supplied `reason` argument will be given to the underlying source's {@link UnderlyingSource.cancel | cancel()}\n         * method, which might or might not use it.\n         */\n        cancel(reason = undefined) {\n            if (!IsReadableStream(this)) {\n                return promiseRejectedWith(streamBrandCheckException$1('cancel'));\n            }\n            if (IsReadableStreamLocked(this)) {\n                return promiseRejectedWith(new TypeError('Cannot cancel a stream that already has a reader'));\n            }\n            return ReadableStreamCancel(this, reason);\n        }\n        getReader(rawOptions = undefined) {\n            if (!IsReadableStream(this)) {\n                throw streamBrandCheckException$1('getReader');\n            }\n            const options = convertReaderOptions(rawOptions, 'First parameter');\n            if (options.mode === undefined) {\n                return AcquireReadableStreamDefaultReader(this);\n            }\n            return AcquireReadableStreamBYOBReader(this);\n        }\n        pipeThrough(rawTransform, rawOptions = {}) {\n            if (!IsReadableStream(this)) {\n                throw streamBrandCheckException$1('pipeThrough');\n            }\n            assertRequiredArgument(rawTransform, 1, 'pipeThrough');\n            const transform = convertReadableWritablePair(rawTransform, 'First parameter');\n            const options = convertPipeOptions(rawOptions, 'Second parameter');\n            if (IsReadableStreamLocked(this)) {\n                throw new TypeError('ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream');\n            }\n            if (IsWritableStreamLocked(transform.writable)) {\n                throw new TypeError('ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream');\n            }\n            const promise = ReadableStreamPipeTo(this, transform.writable, options.preventClose, options.preventAbort, options.preventCancel, options.signal);\n            setPromiseIsHandledToTrue(promise);\n            return transform.readable;\n        }\n        pipeTo(destination, rawOptions = {}) {\n            if (!IsReadableStream(this)) {\n                return promiseRejectedWith(streamBrandCheckException$1('pipeTo'));\n            }\n            if (destination === undefined) {\n                return promiseRejectedWith(`Parameter 1 is required in 'pipeTo'.`);\n            }\n            if (!IsWritableStream(destination)) {\n                return promiseRejectedWith(new TypeError(`ReadableStream.prototype.pipeTo's first argument must be a WritableStream`));\n            }\n            let options;\n            try {\n                options = convertPipeOptions(rawOptions, 'Second parameter');\n            }\n            catch (e) {\n                return promiseRejectedWith(e);\n            }\n            if (IsReadableStreamLocked(this)) {\n                return promiseRejectedWith(new TypeError('ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream'));\n            }\n            if (IsWritableStreamLocked(destination)) {\n                return promiseRejectedWith(new TypeError('ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream'));\n            }\n            return ReadableStreamPipeTo(this, destination, options.preventClose, options.preventAbort, options.preventCancel, options.signal);\n        }\n        /**\n         * Tees this readable stream, returning a two-element array containing the two resulting branches as\n         * new {@link ReadableStream} instances.\n         *\n         * Teeing a stream will lock it, preventing any other consumer from acquiring a reader.\n         * To cancel the stream, cancel both of the resulting branches; a composite cancellation reason will then be\n         * propagated to the stream's underlying source.\n         *\n         * Note that the chunks seen in each branch will be the same object. If the chunks are not immutable,\n         * this could allow interference between the two branches.\n         */\n        tee() {\n            if (!IsReadableStream(this)) {\n                throw streamBrandCheckException$1('tee');\n            }\n            const branches = ReadableStreamTee(this);\n            return CreateArrayFromList(branches);\n        }\n        values(rawOptions = undefined) {\n            if (!IsReadableStream(this)) {\n                throw streamBrandCheckException$1('values');\n            }\n            const options = convertIteratorOptions(rawOptions, 'First parameter');\n            return AcquireReadableStreamAsyncIterator(this, options.preventCancel);\n        }\n    }\n    Object.defineProperties(ReadableStream.prototype, {\n        cancel: { enumerable: true },\n        getReader: { enumerable: true },\n        pipeThrough: { enumerable: true },\n        pipeTo: { enumerable: true },\n        tee: { enumerable: true },\n        values: { enumerable: true },\n        locked: { enumerable: true }\n    });\n    if (typeof SymbolPolyfill.toStringTag === 'symbol') {\n        Object.defineProperty(ReadableStream.prototype, SymbolPolyfill.toStringTag, {\n            value: 'ReadableStream',\n            configurable: true\n        });\n    }\n    if (typeof SymbolPolyfill.asyncIterator === 'symbol') {\n        Object.defineProperty(ReadableStream.prototype, SymbolPolyfill.asyncIterator, {\n            value: ReadableStream.prototype.values,\n            writable: true,\n            configurable: true\n        });\n    }\n    // Abstract operations for the ReadableStream.\n    // Throws if and only if startAlgorithm throws.\n    function CreateReadableStream(startAlgorithm, pullAlgorithm, cancelAlgorithm, highWaterMark = 1, sizeAlgorithm = () => 1) {\n        const stream = Object.create(ReadableStream.prototype);\n        InitializeReadableStream(stream);\n        const controller = Object.create(ReadableStreamDefaultController.prototype);\n        SetUpReadableStreamDefaultController(stream, controller, startAlgorithm, pullAlgorithm, cancelAlgorithm, highWaterMark, sizeAlgorithm);\n        return stream;\n    }\n    // Throws if and only if startAlgorithm throws.\n    function CreateReadableByteStream(startAlgorithm, pullAlgorithm, cancelAlgorithm) {\n        const stream = Object.create(ReadableStream.prototype);\n        InitializeReadableStream(stream);\n        const controller = Object.create(ReadableByteStreamController.prototype);\n        SetUpReadableByteStreamController(stream, controller, startAlgorithm, pullAlgorithm, cancelAlgorithm, 0, undefined);\n        return stream;\n    }\n    function InitializeReadableStream(stream) {\n        stream._state = 'readable';\n        stream._reader = undefined;\n        stream._storedError = undefined;\n        stream._disturbed = false;\n    }\n    function IsReadableStream(x) {\n        if (!typeIsObject(x)) {\n            return false;\n        }\n        if (!Object.prototype.hasOwnProperty.call(x, '_readableStreamController')) {\n            return false;\n        }\n        return x instanceof ReadableStream;\n    }\n    function IsReadableStreamLocked(stream) {\n        if (stream._reader === undefined) {\n            return false;\n        }\n        return true;\n    }\n    // ReadableStream API exposed for controllers.\n    function ReadableStreamCancel(stream, reason) {\n        stream._disturbed = true;\n        if (stream._state === 'closed') {\n            return promiseResolvedWith(undefined);\n        }\n        if (stream._state === 'errored') {\n            return promiseRejectedWith(stream._storedError);\n        }\n        ReadableStreamClose(stream);\n        const reader = stream._reader;\n        if (reader !== undefined && IsReadableStreamBYOBReader(reader)) {\n            reader._readIntoRequests.forEach(readIntoRequest => {\n                readIntoRequest._closeSteps(undefined);\n            });\n            reader._readIntoRequests = new SimpleQueue();\n        }\n        const sourceCancelPromise = stream._readableStreamController[CancelSteps](reason);\n        return transformPromiseWith(sourceCancelPromise, noop);\n    }\n    function ReadableStreamClose(stream) {\n        stream._state = 'closed';\n        const reader = stream._reader;\n        if (reader === undefined) {\n            return;\n        }\n        defaultReaderClosedPromiseResolve(reader);\n        if (IsReadableStreamDefaultReader(reader)) {\n            reader._readRequests.forEach(readRequest => {\n                readRequest._closeSteps();\n            });\n            reader._readRequests = new SimpleQueue();\n        }\n    }\n    function ReadableStreamError(stream, e) {\n        stream._state = 'errored';\n        stream._storedError = e;\n        const reader = stream._reader;\n        if (reader === undefined) {\n            return;\n        }\n        defaultReaderClosedPromiseReject(reader, e);\n        if (IsReadableStreamDefaultReader(reader)) {\n            reader._readRequests.forEach(readRequest => {\n                readRequest._errorSteps(e);\n            });\n            reader._readRequests = new SimpleQueue();\n        }\n        else {\n            reader._readIntoRequests.forEach(readIntoRequest => {\n                readIntoRequest._errorSteps(e);\n            });\n            reader._readIntoRequests = new SimpleQueue();\n        }\n    }\n    // Helper functions for the ReadableStream.\n    function streamBrandCheckException$1(name) {\n        return new TypeError(`ReadableStream.prototype.${name} can only be used on a ReadableStream`);\n    }\n\n    function convertQueuingStrategyInit(init, context) {\n        assertDictionary(init, context);\n        const highWaterMark = init === null || init === void 0 ? void 0 : init.highWaterMark;\n        assertRequiredField(highWaterMark, 'highWaterMark', 'QueuingStrategyInit');\n        return {\n            highWaterMark: convertUnrestrictedDouble(highWaterMark)\n        };\n    }\n\n    // The size function must not have a prototype property nor be a constructor\n    const byteLengthSizeFunction = (chunk) => {\n        return chunk.byteLength;\n    };\n    Object.defineProperty(byteLengthSizeFunction, 'name', {\n        value: 'size',\n        configurable: true\n    });\n    /**\n     * A queuing strategy that counts the number of bytes in each chunk.\n     *\n     * @public\n     */\n    class ByteLengthQueuingStrategy {\n        constructor(options) {\n            assertRequiredArgument(options, 1, 'ByteLengthQueuingStrategy');\n            options = convertQueuingStrategyInit(options, 'First parameter');\n            this._byteLengthQueuingStrategyHighWaterMark = options.highWaterMark;\n        }\n        /**\n         * Returns the high water mark provided to the constructor.\n         */\n        get highWaterMark() {\n            if (!IsByteLengthQueuingStrategy(this)) {\n                throw byteLengthBrandCheckException('highWaterMark');\n            }\n            return this._byteLengthQueuingStrategyHighWaterMark;\n        }\n        /**\n         * Measures the size of `chunk` by returning the value of its `byteLength` property.\n         */\n        get size() {\n            if (!IsByteLengthQueuingStrategy(this)) {\n                throw byteLengthBrandCheckException('size');\n            }\n            return byteLengthSizeFunction;\n        }\n    }\n    Object.defineProperties(ByteLengthQueuingStrategy.prototype, {\n        highWaterMark: { enumerable: true },\n        size: { enumerable: true }\n    });\n    if (typeof SymbolPolyfill.toStringTag === 'symbol') {\n        Object.defineProperty(ByteLengthQueuingStrategy.prototype, SymbolPolyfill.toStringTag, {\n            value: 'ByteLengthQueuingStrategy',\n            configurable: true\n        });\n    }\n    // Helper functions for the ByteLengthQueuingStrategy.\n    function byteLengthBrandCheckException(name) {\n        return new TypeError(`ByteLengthQueuingStrategy.prototype.${name} can only be used on a ByteLengthQueuingStrategy`);\n    }\n    function IsByteLengthQueuingStrategy(x) {\n        if (!typeIsObject(x)) {\n            return false;\n        }\n        if (!Object.prototype.hasOwnProperty.call(x, '_byteLengthQueuingStrategyHighWaterMark')) {\n            return false;\n        }\n        return x instanceof ByteLengthQueuingStrategy;\n    }\n\n    // The size function must not have a prototype property nor be a constructor\n    const countSizeFunction = () => {\n        return 1;\n    };\n    Object.defineProperty(countSizeFunction, 'name', {\n        value: 'size',\n        configurable: true\n    });\n    /**\n     * A queuing strategy that counts the number of chunks.\n     *\n     * @public\n     */\n    class CountQueuingStrategy {\n        constructor(options) {\n            assertRequiredArgument(options, 1, 'CountQueuingStrategy');\n            options = convertQueuingStrategyInit(options, 'First parameter');\n            this._countQueuingStrategyHighWaterMark = options.highWaterMark;\n        }\n        /**\n         * Returns the high water mark provided to the constructor.\n         */\n        get highWaterMark() {\n            if (!IsCountQueuingStrategy(this)) {\n                throw countBrandCheckException('highWaterMark');\n            }\n            return this._countQueuingStrategyHighWaterMark;\n        }\n        /**\n         * Measures the size of `chunk` by always returning 1.\n         * This ensures that the total queue size is a count of the number of chunks in the queue.\n         */\n        get size() {\n            if (!IsCountQueuingStrategy(this)) {\n                throw countBrandCheckException('size');\n            }\n            return countSizeFunction;\n        }\n    }\n    Object.defineProperties(CountQueuingStrategy.prototype, {\n        highWaterMark: { enumerable: true },\n        size: { enumerable: true }\n    });\n    if (typeof SymbolPolyfill.toStringTag === 'symbol') {\n        Object.defineProperty(CountQueuingStrategy.prototype, SymbolPolyfill.toStringTag, {\n            value: 'CountQueuingStrategy',\n            configurable: true\n        });\n    }\n    // Helper functions for the CountQueuingStrategy.\n    function countBrandCheckException(name) {\n        return new TypeError(`CountQueuingStrategy.prototype.${name} can only be used on a CountQueuingStrategy`);\n    }\n    function IsCountQueuingStrategy(x) {\n        if (!typeIsObject(x)) {\n            return false;\n        }\n        if (!Object.prototype.hasOwnProperty.call(x, '_countQueuingStrategyHighWaterMark')) {\n            return false;\n        }\n        return x instanceof CountQueuingStrategy;\n    }\n\n    function convertTransformer(original, context) {\n        assertDictionary(original, context);\n        const flush = original === null || original === void 0 ? void 0 : original.flush;\n        const readableType = original === null || original === void 0 ? void 0 : original.readableType;\n        const start = original === null || original === void 0 ? void 0 : original.start;\n        const transform = original === null || original === void 0 ? void 0 : original.transform;\n        const writableType = original === null || original === void 0 ? void 0 : original.writableType;\n        return {\n            flush: flush === undefined ?\n                undefined :\n                convertTransformerFlushCallback(flush, original, `${context} has member 'flush' that`),\n            readableType,\n            start: start === undefined ?\n                undefined :\n                convertTransformerStartCallback(start, original, `${context} has member 'start' that`),\n            transform: transform === undefined ?\n                undefined :\n                convertTransformerTransformCallback(transform, original, `${context} has member 'transform' that`),\n            writableType\n        };\n    }\n    function convertTransformerFlushCallback(fn, original, context) {\n        assertFunction(fn, context);\n        return (controller) => promiseCall(fn, original, [controller]);\n    }\n    function convertTransformerStartCallback(fn, original, context) {\n        assertFunction(fn, context);\n        return (controller) => reflectCall(fn, original, [controller]);\n    }\n    function convertTransformerTransformCallback(fn, original, context) {\n        assertFunction(fn, context);\n        return (chunk, controller) => promiseCall(fn, original, [chunk, controller]);\n    }\n\n    // Class TransformStream\n    /**\n     * A transform stream consists of a pair of streams: a {@link WritableStream | writable stream},\n     * known as its writable side, and a {@link ReadableStream | readable stream}, known as its readable side.\n     * In a manner specific to the transform stream in question, writes to the writable side result in new data being\n     * made available for reading from the readable side.\n     *\n     * @public\n     */\n    class TransformStream {\n        constructor(rawTransformer = {}, rawWritableStrategy = {}, rawReadableStrategy = {}) {\n            if (rawTransformer === undefined) {\n                rawTransformer = null;\n            }\n            const writableStrategy = convertQueuingStrategy(rawWritableStrategy, 'Second parameter');\n            const readableStrategy = convertQueuingStrategy(rawReadableStrategy, 'Third parameter');\n            const transformer = convertTransformer(rawTransformer, 'First parameter');\n            if (transformer.readableType !== undefined) {\n                throw new RangeError('Invalid readableType specified');\n            }\n            if (transformer.writableType !== undefined) {\n                throw new RangeError('Invalid writableType specified');\n            }\n            const readableHighWaterMark = ExtractHighWaterMark(readableStrategy, 0);\n            const readableSizeAlgorithm = ExtractSizeAlgorithm(readableStrategy);\n            const writableHighWaterMark = ExtractHighWaterMark(writableStrategy, 1);\n            const writableSizeAlgorithm = ExtractSizeAlgorithm(writableStrategy);\n            let startPromise_resolve;\n            const startPromise = newPromise(resolve => {\n                startPromise_resolve = resolve;\n            });\n            InitializeTransformStream(this, startPromise, writableHighWaterMark, writableSizeAlgorithm, readableHighWaterMark, readableSizeAlgorithm);\n            SetUpTransformStreamDefaultControllerFromTransformer(this, transformer);\n            if (transformer.start !== undefined) {\n                startPromise_resolve(transformer.start(this._transformStreamController));\n            }\n            else {\n                startPromise_resolve(undefined);\n            }\n        }\n        /**\n         * The readable side of the transform stream.\n         */\n        get readable() {\n            if (!IsTransformStream(this)) {\n                throw streamBrandCheckException('readable');\n            }\n            return this._readable;\n        }\n        /**\n         * The writable side of the transform stream.\n         */\n        get writable() {\n            if (!IsTransformStream(this)) {\n                throw streamBrandCheckException('writable');\n            }\n            return this._writable;\n        }\n    }\n    Object.defineProperties(TransformStream.prototype, {\n        readable: { enumerable: true },\n        writable: { enumerable: true }\n    });\n    if (typeof SymbolPolyfill.toStringTag === 'symbol') {\n        Object.defineProperty(TransformStream.prototype, SymbolPolyfill.toStringTag, {\n            value: 'TransformStream',\n            configurable: true\n        });\n    }\n    function InitializeTransformStream(stream, startPromise, writableHighWaterMark, writableSizeAlgorithm, readableHighWaterMark, readableSizeAlgorithm) {\n        function startAlgorithm() {\n            return startPromise;\n        }\n        function writeAlgorithm(chunk) {\n            return TransformStreamDefaultSinkWriteAlgorithm(stream, chunk);\n        }\n        function abortAlgorithm(reason) {\n            return TransformStreamDefaultSinkAbortAlgorithm(stream, reason);\n        }\n        function closeAlgorithm() {\n            return TransformStreamDefaultSinkCloseAlgorithm(stream);\n        }\n        stream._writable = CreateWritableStream(startAlgorithm, writeAlgorithm, closeAlgorithm, abortAlgorithm, writableHighWaterMark, writableSizeAlgorithm);\n        function pullAlgorithm() {\n            return TransformStreamDefaultSourcePullAlgorithm(stream);\n        }\n        function cancelAlgorithm(reason) {\n            TransformStreamErrorWritableAndUnblockWrite(stream, reason);\n            return promiseResolvedWith(undefined);\n        }\n        stream._readable = CreateReadableStream(startAlgorithm, pullAlgorithm, cancelAlgorithm, readableHighWaterMark, readableSizeAlgorithm);\n        // The [[backpressure]] slot is set to undefined so that it can be initialised by TransformStreamSetBackpressure.\n        stream._backpressure = undefined;\n        stream._backpressureChangePromise = undefined;\n        stream._backpressureChangePromise_resolve = undefined;\n        TransformStreamSetBackpressure(stream, true);\n        stream._transformStreamController = undefined;\n    }\n    function IsTransformStream(x) {\n        if (!typeIsObject(x)) {\n            return false;\n        }\n        if (!Object.prototype.hasOwnProperty.call(x, '_transformStreamController')) {\n            return false;\n        }\n        return x instanceof TransformStream;\n    }\n    // This is a no-op if both sides are already errored.\n    function TransformStreamError(stream, e) {\n        ReadableStreamDefaultControllerError(stream._readable._readableStreamController, e);\n        TransformStreamErrorWritableAndUnblockWrite(stream, e);\n    }\n    function TransformStreamErrorWritableAndUnblockWrite(stream, e) {\n        TransformStreamDefaultControllerClearAlgorithms(stream._transformStreamController);\n        WritableStreamDefaultControllerErrorIfNeeded(stream._writable._writableStreamController, e);\n        if (stream._backpressure) {\n            // Pretend that pull() was called to permit any pending write() calls to complete. TransformStreamSetBackpressure()\n            // cannot be called from enqueue() or pull() once the ReadableStream is errored, so this will will be the final time\n            // _backpressure is set.\n            TransformStreamSetBackpressure(stream, false);\n        }\n    }\n    function TransformStreamSetBackpressure(stream, backpressure) {\n        // Passes also when called during construction.\n        if (stream._backpressureChangePromise !== undefined) {\n            stream._backpressureChangePromise_resolve();\n        }\n        stream._backpressureChangePromise = newPromise(resolve => {\n            stream._backpressureChangePromise_resolve = resolve;\n        });\n        stream._backpressure = backpressure;\n    }\n    // Class TransformStreamDefaultController\n    /**\n     * Allows control of the {@link ReadableStream} and {@link WritableStream} of the associated {@link TransformStream}.\n     *\n     * @public\n     */\n    class TransformStreamDefaultController {\n        constructor() {\n            throw new TypeError('Illegal constructor');\n        }\n        /**\n         * Returns the desired size to fill the readable sides internal queue. It can be negative, if the queue is over-full.\n         */\n        get desiredSize() {\n            if (!IsTransformStreamDefaultController(this)) {\n                throw defaultControllerBrandCheckException('desiredSize');\n            }\n            const readableController = this._controlledTransformStream._readable._readableStreamController;\n            return ReadableStreamDefaultControllerGetDesiredSize(readableController);\n        }\n        enqueue(chunk = undefined) {\n            if (!IsTransformStreamDefaultController(this)) {\n                throw defaultControllerBrandCheckException('enqueue');\n            }\n            TransformStreamDefaultControllerEnqueue(this, chunk);\n        }\n        /**\n         * Errors both the readable side and the writable side of the controlled transform stream, making all future\n         * interactions with it fail with the given error `e`. Any chunks queued for transformation will be discarded.\n         */\n        error(reason = undefined) {\n            if (!IsTransformStreamDefaultController(this)) {\n                throw defaultControllerBrandCheckException('error');\n            }\n            TransformStreamDefaultControllerError(this, reason);\n        }\n        /**\n         * Closes the readable side and errors the writable side of the controlled transform stream. This is useful when the\n         * transformer only needs to consume a portion of the chunks written to the writable side.\n         */\n        terminate() {\n            if (!IsTransformStreamDefaultController(this)) {\n                throw defaultControllerBrandCheckException('terminate');\n            }\n            TransformStreamDefaultControllerTerminate(this);\n        }\n    }\n    Object.defineProperties(TransformStreamDefaultController.prototype, {\n        enqueue: { enumerable: true },\n        error: { enumerable: true },\n        terminate: { enumerable: true },\n        desiredSize: { enumerable: true }\n    });\n    if (typeof SymbolPolyfill.toStringTag === 'symbol') {\n        Object.defineProperty(TransformStreamDefaultController.prototype, SymbolPolyfill.toStringTag, {\n            value: 'TransformStreamDefaultController',\n            configurable: true\n        });\n    }\n    // Transform Stream Default Controller Abstract Operations\n    function IsTransformStreamDefaultController(x) {\n        if (!typeIsObject(x)) {\n            return false;\n        }\n        if (!Object.prototype.hasOwnProperty.call(x, '_controlledTransformStream')) {\n            return false;\n        }\n        return x instanceof TransformStreamDefaultController;\n    }\n    function SetUpTransformStreamDefaultController(stream, controller, transformAlgorithm, flushAlgorithm) {\n        controller._controlledTransformStream = stream;\n        stream._transformStreamController = controller;\n        controller._transformAlgorithm = transformAlgorithm;\n        controller._flushAlgorithm = flushAlgorithm;\n    }\n    function SetUpTransformStreamDefaultControllerFromTransformer(stream, transformer) {\n        const controller = Object.create(TransformStreamDefaultController.prototype);\n        let transformAlgorithm = (chunk) => {\n            try {\n                TransformStreamDefaultControllerEnqueue(controller, chunk);\n                return promiseResolvedWith(undefined);\n            }\n            catch (transformResultE) {\n                return promiseRejectedWith(transformResultE);\n            }\n        };\n        let flushAlgorithm = () => promiseResolvedWith(undefined);\n        if (transformer.transform !== undefined) {\n            transformAlgorithm = chunk => transformer.transform(chunk, controller);\n        }\n        if (transformer.flush !== undefined) {\n            flushAlgorithm = () => transformer.flush(controller);\n        }\n        SetUpTransformStreamDefaultController(stream, controller, transformAlgorithm, flushAlgorithm);\n    }\n    function TransformStreamDefaultControllerClearAlgorithms(controller) {\n        controller._transformAlgorithm = undefined;\n        controller._flushAlgorithm = undefined;\n    }\n    function TransformStreamDefaultControllerEnqueue(controller, chunk) {\n        const stream = controller._controlledTransformStream;\n        const readableController = stream._readable._readableStreamController;\n        if (!ReadableStreamDefaultControllerCanCloseOrEnqueue(readableController)) {\n            throw new TypeError('Readable side is not in a state that permits enqueue');\n        }\n        // We throttle transform invocations based on the backpressure of the ReadableStream, but we still\n        // accept TransformStreamDefaultControllerEnqueue() calls.\n        try {\n            ReadableStreamDefaultControllerEnqueue(readableController, chunk);\n        }\n        catch (e) {\n            // This happens when readableStrategy.size() throws.\n            TransformStreamErrorWritableAndUnblockWrite(stream, e);\n            throw stream._readable._storedError;\n        }\n        const backpressure = ReadableStreamDefaultControllerHasBackpressure(readableController);\n        if (backpressure !== stream._backpressure) {\n            TransformStreamSetBackpressure(stream, true);\n        }\n    }\n    function TransformStreamDefaultControllerError(controller, e) {\n        TransformStreamError(controller._controlledTransformStream, e);\n    }\n    function TransformStreamDefaultControllerPerformTransform(controller, chunk) {\n        const transformPromise = controller._transformAlgorithm(chunk);\n        return transformPromiseWith(transformPromise, undefined, r => {\n            TransformStreamError(controller._controlledTransformStream, r);\n            throw r;\n        });\n    }\n    function TransformStreamDefaultControllerTerminate(controller) {\n        const stream = controller._controlledTransformStream;\n        const readableController = stream._readable._readableStreamController;\n        ReadableStreamDefaultControllerClose(readableController);\n        const error = new TypeError('TransformStream terminated');\n        TransformStreamErrorWritableAndUnblockWrite(stream, error);\n    }\n    // TransformStreamDefaultSink Algorithms\n    function TransformStreamDefaultSinkWriteAlgorithm(stream, chunk) {\n        const controller = stream._transformStreamController;\n        if (stream._backpressure) {\n            const backpressureChangePromise = stream._backpressureChangePromise;\n            return transformPromiseWith(backpressureChangePromise, () => {\n                const writable = stream._writable;\n                const state = writable._state;\n                if (state === 'erroring') {\n                    throw writable._storedError;\n                }\n                return TransformStreamDefaultControllerPerformTransform(controller, chunk);\n            });\n        }\n        return TransformStreamDefaultControllerPerformTransform(controller, chunk);\n    }\n    function TransformStreamDefaultSinkAbortAlgorithm(stream, reason) {\n        // abort() is not called synchronously, so it is possible for abort() to be called when the stream is already\n        // errored.\n        TransformStreamError(stream, reason);\n        return promiseResolvedWith(undefined);\n    }\n    function TransformStreamDefaultSinkCloseAlgorithm(stream) {\n        // stream._readable cannot change after construction, so caching it across a call to user code is safe.\n        const readable = stream._readable;\n        const controller = stream._transformStreamController;\n        const flushPromise = controller._flushAlgorithm();\n        TransformStreamDefaultControllerClearAlgorithms(controller);\n        // Return a promise that is fulfilled with undefined on success.\n        return transformPromiseWith(flushPromise, () => {\n            if (readable._state === 'errored') {\n                throw readable._storedError;\n            }\n            ReadableStreamDefaultControllerClose(readable._readableStreamController);\n        }, r => {\n            TransformStreamError(stream, r);\n            throw readable._storedError;\n        });\n    }\n    // TransformStreamDefaultSource Algorithms\n    function TransformStreamDefaultSourcePullAlgorithm(stream) {\n        // Invariant. Enforced by the promises returned by start() and pull().\n        TransformStreamSetBackpressure(stream, false);\n        // Prevent the next pull() call until there is backpressure.\n        return stream._backpressureChangePromise;\n    }\n    // Helper functions for the TransformStreamDefaultController.\n    function defaultControllerBrandCheckException(name) {\n        return new TypeError(`TransformStreamDefaultController.prototype.${name} can only be used on a TransformStreamDefaultController`);\n    }\n    // Helper functions for the TransformStream.\n    function streamBrandCheckException(name) {\n        return new TypeError(`TransformStream.prototype.${name} can only be used on a TransformStream`);\n    }\n\n    exports.ByteLengthQueuingStrategy = ByteLengthQueuingStrategy;\n    exports.CountQueuingStrategy = CountQueuingStrategy;\n    exports.ReadableByteStreamController = ReadableByteStreamController;\n    exports.ReadableStream = ReadableStream;\n    exports.ReadableStreamBYOBReader = ReadableStreamBYOBReader;\n    exports.ReadableStreamBYOBRequest = ReadableStreamBYOBRequest;\n    exports.ReadableStreamDefaultController = ReadableStreamDefaultController;\n    exports.ReadableStreamDefaultReader = ReadableStreamDefaultReader;\n    exports.TransformStream = TransformStream;\n    exports.TransformStreamDefaultController = TransformStreamDefaultController;\n    exports.WritableStream = WritableStream;\n    exports.WritableStreamDefaultController = WritableStreamDefaultController;\n    exports.WritableStreamDefaultWriter = WritableStreamDefaultWriter;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n})));\n//# sourceMappingURL=ponyfill.es2018.js.map\n","/**\n * Flatten an array indefinitely.\n */\nexport function flatten(array) {\n    var result = [];\n    $flatten(array, result);\n    return result;\n}\n/**\n * Internal flatten function recursively passes `result`.\n */\nfunction $flatten(array, result) {\n    for (var i = 0; i < array.length; i++) {\n        var value = array[i];\n        if (Array.isArray(value)) {\n            $flatten(value, result);\n        }\n        else {\n            result.push(value);\n        }\n    }\n}\n//# sourceMappingURL=index.js.map","/*!\n * methods\n * Copyright(c) 2013-2014 TJ Holowaychuk\n * Copyright(c) 2015-2016 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict';\n\n/**\n * Module dependencies.\n * @private\n */\n\nvar http = require('http');\n\n/**\n * Module exports.\n * @public\n */\n\nmodule.exports = getCurrentNodeMethods() || getBasicNodeMethods();\n\n/**\n * Get the current Node.js methods.\n * @private\n */\n\nfunction getCurrentNodeMethods() {\n  return http.METHODS && http.METHODS.map(function lowerCaseMethod(method) {\n    return method.toLowerCase();\n  });\n}\n\n/**\n * Get the \"basic\" Node.js methods, a snapshot from Node.js 0.10.\n * @private\n */\n\nfunction getBasicNodeMethods() {\n  return [\n    'get',\n    'post',\n    'put',\n    'head',\n    'delete',\n    'options',\n    'trace',\n    'copy',\n    'lock',\n    'mkcol',\n    'move',\n    'purge',\n    'propfind',\n    'proppatch',\n    'unlock',\n    'report',\n    'mkactivity',\n    'checkout',\n    'merge',\n    'm-search',\n    'notify',\n    'subscribe',\n    'unsubscribe',\n    'patch',\n    'search',\n    'connect'\n  ];\n}\n","'use strict';\n\n/**\n * @param typeMap [Object] Map of MIME type -> Array[extensions]\n * @param ...\n */\nfunction Mime() {\n  this._types = Object.create(null);\n  this._extensions = Object.create(null);\n\n  for (let i = 0; i < arguments.length; i++) {\n    this.define(arguments[i]);\n  }\n\n  this.define = this.define.bind(this);\n  this.getType = this.getType.bind(this);\n  this.getExtension = this.getExtension.bind(this);\n}\n\n/**\n * Define mimetype -> extension mappings.  Each key is a mime-type that maps\n * to an array of extensions associated with the type.  The first extension is\n * used as the default extension for the type.\n *\n * e.g. mime.define({'audio/ogg', ['oga', 'ogg', 'spx']});\n *\n * If a type declares an extension that has already been defined, an error will\n * be thrown.  To suppress this error and force the extension to be associated\n * with the new type, pass `force`=true.  Alternatively, you may prefix the\n * extension with \"*\" to map the type to extension, without mapping the\n * extension to the type.\n *\n * e.g. mime.define({'audio/wav', ['wav']}, {'audio/x-wav', ['*wav']});\n *\n *\n * @param map (Object) type definitions\n * @param force (Boolean) if true, force overriding of existing definitions\n */\nMime.prototype.define = function(typeMap, force) {\n  for (let type in typeMap) {\n    let extensions = typeMap[type].map(function(t) {\n      return t.toLowerCase();\n    });\n    type = type.toLowerCase();\n\n    for (let i = 0; i < extensions.length; i++) {\n      const ext = extensions[i];\n\n      // '*' prefix = not the preferred type for this extension.  So fixup the\n      // extension, and skip it.\n      if (ext[0] === '*') {\n        continue;\n      }\n\n      if (!force && (ext in this._types)) {\n        throw new Error(\n          'Attempt to change mapping for \"' + ext +\n          '\" extension from \"' + this._types[ext] + '\" to \"' + type +\n          '\". Pass `force=true` to allow this, otherwise remove \"' + ext +\n          '\" from the list of extensions for \"' + type + '\".'\n        );\n      }\n\n      this._types[ext] = type;\n    }\n\n    // Use first extension as default\n    if (force || !this._extensions[type]) {\n      const ext = extensions[0];\n      this._extensions[type] = (ext[0] !== '*') ? ext : ext.substr(1);\n    }\n  }\n};\n\n/**\n * Lookup a mime type based on extension\n */\nMime.prototype.getType = function(path) {\n  path = String(path);\n  let last = path.replace(/^.*[/\\\\]/, '').toLowerCase();\n  let ext = last.replace(/^.*\\./, '').toLowerCase();\n\n  let hasPath = last.length < path.length;\n  let hasDot = ext.length < last.length - 1;\n\n  return (hasDot || !hasPath) && this._types[ext] || null;\n};\n\n/**\n * Return file extension associated with a mime type\n */\nMime.prototype.getExtension = function(type) {\n  type = /^\\s*([^;\\s]*)/.test(type) && RegExp.$1;\n  return type && this._extensions[type.toLowerCase()] || null;\n};\n\nmodule.exports = Mime;\n","'use strict';\n\nlet Mime = require('./Mime');\nmodule.exports = new Mime(require('./types/standard'));\n","module.exports = {\"application/andrew-inset\":[\"ez\"],\"application/applixware\":[\"aw\"],\"application/atom+xml\":[\"atom\"],\"application/atomcat+xml\":[\"atomcat\"],\"application/atomdeleted+xml\":[\"atomdeleted\"],\"application/atomsvc+xml\":[\"atomsvc\"],\"application/atsc-dwd+xml\":[\"dwd\"],\"application/atsc-held+xml\":[\"held\"],\"application/atsc-rsat+xml\":[\"rsat\"],\"application/bdoc\":[\"bdoc\"],\"application/calendar+xml\":[\"xcs\"],\"application/ccxml+xml\":[\"ccxml\"],\"application/cdfx+xml\":[\"cdfx\"],\"application/cdmi-capability\":[\"cdmia\"],\"application/cdmi-container\":[\"cdmic\"],\"application/cdmi-domain\":[\"cdmid\"],\"application/cdmi-object\":[\"cdmio\"],\"application/cdmi-queue\":[\"cdmiq\"],\"application/cu-seeme\":[\"cu\"],\"application/dash+xml\":[\"mpd\"],\"application/davmount+xml\":[\"davmount\"],\"application/docbook+xml\":[\"dbk\"],\"application/dssc+der\":[\"dssc\"],\"application/dssc+xml\":[\"xdssc\"],\"application/ecmascript\":[\"es\",\"ecma\"],\"application/emma+xml\":[\"emma\"],\"application/emotionml+xml\":[\"emotionml\"],\"application/epub+zip\":[\"epub\"],\"application/exi\":[\"exi\"],\"application/express\":[\"exp\"],\"application/fdt+xml\":[\"fdt\"],\"application/font-tdpfr\":[\"pfr\"],\"application/geo+json\":[\"geojson\"],\"application/gml+xml\":[\"gml\"],\"application/gpx+xml\":[\"gpx\"],\"application/gxf\":[\"gxf\"],\"application/gzip\":[\"gz\"],\"application/hjson\":[\"hjson\"],\"application/hyperstudio\":[\"stk\"],\"application/inkml+xml\":[\"ink\",\"inkml\"],\"application/ipfix\":[\"ipfix\"],\"application/its+xml\":[\"its\"],\"application/java-archive\":[\"jar\",\"war\",\"ear\"],\"application/java-serialized-object\":[\"ser\"],\"application/java-vm\":[\"class\"],\"application/javascript\":[\"js\",\"mjs\"],\"application/json\":[\"json\",\"map\"],\"application/json5\":[\"json5\"],\"application/jsonml+json\":[\"jsonml\"],\"application/ld+json\":[\"jsonld\"],\"application/lgr+xml\":[\"lgr\"],\"application/lost+xml\":[\"lostxml\"],\"application/mac-binhex40\":[\"hqx\"],\"application/mac-compactpro\":[\"cpt\"],\"application/mads+xml\":[\"mads\"],\"application/manifest+json\":[\"webmanifest\"],\"application/marc\":[\"mrc\"],\"application/marcxml+xml\":[\"mrcx\"],\"application/mathematica\":[\"ma\",\"nb\",\"mb\"],\"application/mathml+xml\":[\"mathml\"],\"application/mbox\":[\"mbox\"],\"application/mediaservercontrol+xml\":[\"mscml\"],\"application/metalink+xml\":[\"metalink\"],\"application/metalink4+xml\":[\"meta4\"],\"application/mets+xml\":[\"mets\"],\"application/mmt-aei+xml\":[\"maei\"],\"application/mmt-usd+xml\":[\"musd\"],\"application/mods+xml\":[\"mods\"],\"application/mp21\":[\"m21\",\"mp21\"],\"application/mp4\":[\"mp4s\",\"m4p\"],\"application/msword\":[\"doc\",\"dot\"],\"application/mxf\":[\"mxf\"],\"application/n-quads\":[\"nq\"],\"application/n-triples\":[\"nt\"],\"application/node\":[\"cjs\"],\"application/octet-stream\":[\"bin\",\"dms\",\"lrf\",\"mar\",\"so\",\"dist\",\"distz\",\"pkg\",\"bpk\",\"dump\",\"elc\",\"deploy\",\"exe\",\"dll\",\"deb\",\"dmg\",\"iso\",\"img\",\"msi\",\"msp\",\"msm\",\"buffer\"],\"application/oda\":[\"oda\"],\"application/oebps-package+xml\":[\"opf\"],\"application/ogg\":[\"ogx\"],\"application/omdoc+xml\":[\"omdoc\"],\"application/onenote\":[\"onetoc\",\"onetoc2\",\"onetmp\",\"onepkg\"],\"application/oxps\":[\"oxps\"],\"application/p2p-overlay+xml\":[\"relo\"],\"application/patch-ops-error+xml\":[\"xer\"],\"application/pdf\":[\"pdf\"],\"application/pgp-encrypted\":[\"pgp\"],\"application/pgp-signature\":[\"asc\",\"sig\"],\"application/pics-rules\":[\"prf\"],\"application/pkcs10\":[\"p10\"],\"application/pkcs7-mime\":[\"p7m\",\"p7c\"],\"application/pkcs7-signature\":[\"p7s\"],\"application/pkcs8\":[\"p8\"],\"application/pkix-attr-cert\":[\"ac\"],\"application/pkix-cert\":[\"cer\"],\"application/pkix-crl\":[\"crl\"],\"application/pkix-pkipath\":[\"pkipath\"],\"application/pkixcmp\":[\"pki\"],\"application/pls+xml\":[\"pls\"],\"application/postscript\":[\"ai\",\"eps\",\"ps\"],\"application/provenance+xml\":[\"provx\"],\"application/pskc+xml\":[\"pskcxml\"],\"application/raml+yaml\":[\"raml\"],\"application/rdf+xml\":[\"rdf\",\"owl\"],\"application/reginfo+xml\":[\"rif\"],\"application/relax-ng-compact-syntax\":[\"rnc\"],\"application/resource-lists+xml\":[\"rl\"],\"application/resource-lists-diff+xml\":[\"rld\"],\"application/rls-services+xml\":[\"rs\"],\"application/route-apd+xml\":[\"rapd\"],\"application/route-s-tsid+xml\":[\"sls\"],\"application/route-usd+xml\":[\"rusd\"],\"application/rpki-ghostbusters\":[\"gbr\"],\"application/rpki-manifest\":[\"mft\"],\"application/rpki-roa\":[\"roa\"],\"application/rsd+xml\":[\"rsd\"],\"application/rss+xml\":[\"rss\"],\"application/rtf\":[\"rtf\"],\"application/sbml+xml\":[\"sbml\"],\"application/scvp-cv-request\":[\"scq\"],\"application/scvp-cv-response\":[\"scs\"],\"application/scvp-vp-request\":[\"spq\"],\"application/scvp-vp-response\":[\"spp\"],\"application/sdp\":[\"sdp\"],\"application/senml+xml\":[\"senmlx\"],\"application/sensml+xml\":[\"sensmlx\"],\"application/set-payment-initiation\":[\"setpay\"],\"application/set-registration-initiation\":[\"setreg\"],\"application/shf+xml\":[\"shf\"],\"application/sieve\":[\"siv\",\"sieve\"],\"application/smil+xml\":[\"smi\",\"smil\"],\"application/sparql-query\":[\"rq\"],\"application/sparql-results+xml\":[\"srx\"],\"application/srgs\":[\"gram\"],\"application/srgs+xml\":[\"grxml\"],\"application/sru+xml\":[\"sru\"],\"application/ssdl+xml\":[\"ssdl\"],\"application/ssml+xml\":[\"ssml\"],\"application/swid+xml\":[\"swidtag\"],\"application/tei+xml\":[\"tei\",\"teicorpus\"],\"application/thraud+xml\":[\"tfi\"],\"application/timestamped-data\":[\"tsd\"],\"application/toml\":[\"toml\"],\"application/trig\":[\"trig\"],\"application/ttml+xml\":[\"ttml\"],\"application/ubjson\":[\"ubj\"],\"application/urc-ressheet+xml\":[\"rsheet\"],\"application/urc-targetdesc+xml\":[\"td\"],\"application/voicexml+xml\":[\"vxml\"],\"application/wasm\":[\"wasm\"],\"application/widget\":[\"wgt\"],\"application/winhlp\":[\"hlp\"],\"application/wsdl+xml\":[\"wsdl\"],\"application/wspolicy+xml\":[\"wspolicy\"],\"application/xaml+xml\":[\"xaml\"],\"application/xcap-att+xml\":[\"xav\"],\"application/xcap-caps+xml\":[\"xca\"],\"application/xcap-diff+xml\":[\"xdf\"],\"application/xcap-el+xml\":[\"xel\"],\"application/xcap-ns+xml\":[\"xns\"],\"application/xenc+xml\":[\"xenc\"],\"application/xhtml+xml\":[\"xhtml\",\"xht\"],\"application/xliff+xml\":[\"xlf\"],\"application/xml\":[\"xml\",\"xsl\",\"xsd\",\"rng\"],\"application/xml-dtd\":[\"dtd\"],\"application/xop+xml\":[\"xop\"],\"application/xproc+xml\":[\"xpl\"],\"application/xslt+xml\":[\"*xsl\",\"xslt\"],\"application/xspf+xml\":[\"xspf\"],\"application/xv+xml\":[\"mxml\",\"xhvml\",\"xvml\",\"xvm\"],\"application/yang\":[\"yang\"],\"application/yin+xml\":[\"yin\"],\"application/zip\":[\"zip\"],\"audio/3gpp\":[\"*3gpp\"],\"audio/adpcm\":[\"adp\"],\"audio/amr\":[\"amr\"],\"audio/basic\":[\"au\",\"snd\"],\"audio/midi\":[\"mid\",\"midi\",\"kar\",\"rmi\"],\"audio/mobile-xmf\":[\"mxmf\"],\"audio/mp3\":[\"*mp3\"],\"audio/mp4\":[\"m4a\",\"mp4a\"],\"audio/mpeg\":[\"mpga\",\"mp2\",\"mp2a\",\"mp3\",\"m2a\",\"m3a\"],\"audio/ogg\":[\"oga\",\"ogg\",\"spx\",\"opus\"],\"audio/s3m\":[\"s3m\"],\"audio/silk\":[\"sil\"],\"audio/wav\":[\"wav\"],\"audio/wave\":[\"*wav\"],\"audio/webm\":[\"weba\"],\"audio/xm\":[\"xm\"],\"font/collection\":[\"ttc\"],\"font/otf\":[\"otf\"],\"font/ttf\":[\"ttf\"],\"font/woff\":[\"woff\"],\"font/woff2\":[\"woff2\"],\"image/aces\":[\"exr\"],\"image/apng\":[\"apng\"],\"image/avif\":[\"avif\"],\"image/bmp\":[\"bmp\"],\"image/cgm\":[\"cgm\"],\"image/dicom-rle\":[\"drle\"],\"image/emf\":[\"emf\"],\"image/fits\":[\"fits\"],\"image/g3fax\":[\"g3\"],\"image/gif\":[\"gif\"],\"image/heic\":[\"heic\"],\"image/heic-sequence\":[\"heics\"],\"image/heif\":[\"heif\"],\"image/heif-sequence\":[\"heifs\"],\"image/hej2k\":[\"hej2\"],\"image/hsj2\":[\"hsj2\"],\"image/ief\":[\"ief\"],\"image/jls\":[\"jls\"],\"image/jp2\":[\"jp2\",\"jpg2\"],\"image/jpeg\":[\"jpeg\",\"jpg\",\"jpe\"],\"image/jph\":[\"jph\"],\"image/jphc\":[\"jhc\"],\"image/jpm\":[\"jpm\"],\"image/jpx\":[\"jpx\",\"jpf\"],\"image/jxr\":[\"jxr\"],\"image/jxra\":[\"jxra\"],\"image/jxrs\":[\"jxrs\"],\"image/jxs\":[\"jxs\"],\"image/jxsc\":[\"jxsc\"],\"image/jxsi\":[\"jxsi\"],\"image/jxss\":[\"jxss\"],\"image/ktx\":[\"ktx\"],\"image/ktx2\":[\"ktx2\"],\"image/png\":[\"png\"],\"image/sgi\":[\"sgi\"],\"image/svg+xml\":[\"svg\",\"svgz\"],\"image/t38\":[\"t38\"],\"image/tiff\":[\"tif\",\"tiff\"],\"image/tiff-fx\":[\"tfx\"],\"image/webp\":[\"webp\"],\"image/wmf\":[\"wmf\"],\"message/disposition-notification\":[\"disposition-notification\"],\"message/global\":[\"u8msg\"],\"message/global-delivery-status\":[\"u8dsn\"],\"message/global-disposition-notification\":[\"u8mdn\"],\"message/global-headers\":[\"u8hdr\"],\"message/rfc822\":[\"eml\",\"mime\"],\"model/3mf\":[\"3mf\"],\"model/gltf+json\":[\"gltf\"],\"model/gltf-binary\":[\"glb\"],\"model/iges\":[\"igs\",\"iges\"],\"model/mesh\":[\"msh\",\"mesh\",\"silo\"],\"model/mtl\":[\"mtl\"],\"model/obj\":[\"obj\"],\"model/step+xml\":[\"stpx\"],\"model/step+zip\":[\"stpz\"],\"model/step-xml+zip\":[\"stpxz\"],\"model/stl\":[\"stl\"],\"model/vrml\":[\"wrl\",\"vrml\"],\"model/x3d+binary\":[\"*x3db\",\"x3dbz\"],\"model/x3d+fastinfoset\":[\"x3db\"],\"model/x3d+vrml\":[\"*x3dv\",\"x3dvz\"],\"model/x3d+xml\":[\"x3d\",\"x3dz\"],\"model/x3d-vrml\":[\"x3dv\"],\"text/cache-manifest\":[\"appcache\",\"manifest\"],\"text/calendar\":[\"ics\",\"ifb\"],\"text/coffeescript\":[\"coffee\",\"litcoffee\"],\"text/css\":[\"css\"],\"text/csv\":[\"csv\"],\"text/html\":[\"html\",\"htm\",\"shtml\"],\"text/jade\":[\"jade\"],\"text/jsx\":[\"jsx\"],\"text/less\":[\"less\"],\"text/markdown\":[\"markdown\",\"md\"],\"text/mathml\":[\"mml\"],\"text/mdx\":[\"mdx\"],\"text/n3\":[\"n3\"],\"text/plain\":[\"txt\",\"text\",\"conf\",\"def\",\"list\",\"log\",\"in\",\"ini\"],\"text/richtext\":[\"rtx\"],\"text/rtf\":[\"*rtf\"],\"text/sgml\":[\"sgml\",\"sgm\"],\"text/shex\":[\"shex\"],\"text/slim\":[\"slim\",\"slm\"],\"text/spdx\":[\"spdx\"],\"text/stylus\":[\"stylus\",\"styl\"],\"text/tab-separated-values\":[\"tsv\"],\"text/troff\":[\"t\",\"tr\",\"roff\",\"man\",\"me\",\"ms\"],\"text/turtle\":[\"ttl\"],\"text/uri-list\":[\"uri\",\"uris\",\"urls\"],\"text/vcard\":[\"vcard\"],\"text/vtt\":[\"vtt\"],\"text/xml\":[\"*xml\"],\"text/yaml\":[\"yaml\",\"yml\"],\"video/3gpp\":[\"3gp\",\"3gpp\"],\"video/3gpp2\":[\"3g2\"],\"video/h261\":[\"h261\"],\"video/h263\":[\"h263\"],\"video/h264\":[\"h264\"],\"video/iso.segment\":[\"m4s\"],\"video/jpeg\":[\"jpgv\"],\"video/jpm\":[\"*jpm\",\"jpgm\"],\"video/mj2\":[\"mj2\",\"mjp2\"],\"video/mp2t\":[\"ts\"],\"video/mp4\":[\"mp4\",\"mp4v\",\"mpg4\"],\"video/mpeg\":[\"mpeg\",\"mpg\",\"mpe\",\"m1v\",\"m2v\"],\"video/ogg\":[\"ogv\"],\"video/quicktime\":[\"qt\",\"mov\"],\"video/webm\":[\"webm\"]};","/*!\n * parseurl\n * Copyright(c) 2014 Jonathan Ong\n * Copyright(c) 2014-2017 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict'\n\n/**\n * Module dependencies.\n * @private\n */\n\nvar url = require('url')\nvar parse = url.parse\nvar Url = url.Url\n\n/**\n * Module exports.\n * @public\n */\n\nmodule.exports = parseurl\nmodule.exports.original = originalurl\n\n/**\n * Parse the `req` url with memoization.\n *\n * @param {ServerRequest} req\n * @return {Object}\n * @public\n */\n\nfunction parseurl (req) {\n  var url = req.url\n\n  if (url === undefined) {\n    // URL is undefined\n    return undefined\n  }\n\n  var parsed = req._parsedUrl\n\n  if (fresh(url, parsed)) {\n    // Return cached URL parse\n    return parsed\n  }\n\n  // Parse the URL\n  parsed = fastparse(url)\n  parsed._raw = url\n\n  return (req._parsedUrl = parsed)\n};\n\n/**\n * Parse the `req` original url with fallback and memoization.\n *\n * @param {ServerRequest} req\n * @return {Object}\n * @public\n */\n\nfunction originalurl (req) {\n  var url = req.originalUrl\n\n  if (typeof url !== 'string') {\n    // Fallback\n    return parseurl(req)\n  }\n\n  var parsed = req._parsedOriginalUrl\n\n  if (fresh(url, parsed)) {\n    // Return cached URL parse\n    return parsed\n  }\n\n  // Parse the URL\n  parsed = fastparse(url)\n  parsed._raw = url\n\n  return (req._parsedOriginalUrl = parsed)\n};\n\n/**\n * Parse the `str` url with fast-path short-cut.\n *\n * @param {string} str\n * @return {Object}\n * @private\n */\n\nfunction fastparse (str) {\n  if (typeof str !== 'string' || str.charCodeAt(0) !== 0x2f /* / */) {\n    return parse(str)\n  }\n\n  var pathname = str\n  var query = null\n  var search = null\n\n  // This takes the regexp from https://github.com/joyent/node/pull/7878\n  // Which is /^(\\/[^?#\\s]*)(\\?[^#\\s]*)?$/\n  // And unrolls it into a for loop\n  for (var i = 1; i < str.length; i++) {\n    switch (str.charCodeAt(i)) {\n      case 0x3f: /* ?  */\n        if (search === null) {\n          pathname = str.substring(0, i)\n          query = str.substring(i + 1)\n          search = str.substring(i)\n        }\n        break\n      case 0x09: /* \\t */\n      case 0x0a: /* \\n */\n      case 0x0c: /* \\f */\n      case 0x0d: /* \\r */\n      case 0x20: /*    */\n      case 0x23: /* #  */\n      case 0xa0:\n      case 0xfeff:\n        return parse(str)\n    }\n  }\n\n  var url = Url !== undefined\n    ? new Url()\n    : {}\n\n  url.path = str\n  url.href = str\n  url.pathname = pathname\n\n  if (search !== null) {\n    url.query = query\n    url.search = search\n  }\n\n  return url\n}\n\n/**\n * Determine if parsed is still fresh for url.\n *\n * @param {string} url\n * @param {object} parsedUrl\n * @return {boolean}\n * @private\n */\n\nfunction fresh (url, parsedUrl) {\n  return typeof parsedUrl === 'object' &&\n    parsedUrl !== null &&\n    (Url === undefined || parsedUrl instanceof Url) &&\n    parsedUrl._raw === url\n}\n","/**\n * Expose `pathtoRegexp`.\n */\n\nmodule.exports = pathtoRegexp;\n\n/**\n * Match matching groups in a regular expression.\n */\nvar MATCHING_GROUP_REGEXP = /\\((?!\\?)/g;\n\n/**\n * Normalize the given path string,\n * returning a regular expression.\n *\n * An empty array should be passed,\n * which will contain the placeholder\n * key names. For example \"/user/:id\" will\n * then contain [\"id\"].\n *\n * @param  {String|RegExp|Array} path\n * @param  {Array} keys\n * @param  {Object} options\n * @return {RegExp}\n * @api private\n */\n\nfunction pathtoRegexp(path, keys, options) {\n  options = options || {};\n  keys = keys || [];\n  var strict = options.strict;\n  var end = options.end !== false;\n  var flags = options.sensitive ? '' : 'i';\n  var extraOffset = 0;\n  var keysOffset = keys.length;\n  var i = 0;\n  var name = 0;\n  var m;\n\n  if (path instanceof RegExp) {\n    while (m = MATCHING_GROUP_REGEXP.exec(path.source)) {\n      keys.push({\n        name: name++,\n        optional: false,\n        offset: m.index\n      });\n    }\n\n    return path;\n  }\n\n  if (Array.isArray(path)) {\n    // Map array parts into regexps and return their source. We also pass\n    // the same keys and options instance into every generation to get\n    // consistent matching groups before we join the sources together.\n    path = path.map(function (value) {\n      return pathtoRegexp(value, keys, options).source;\n    });\n\n    return new RegExp('(?:' + path.join('|') + ')', flags);\n  }\n\n  path = ('^' + path + (strict ? '' : path[path.length - 1] === '/' ? '?' : '/?'))\n    .replace(/\\/\\(/g, '/(?:')\n    .replace(/([\\/\\.])/g, '\\\\$1')\n    .replace(/(\\\\\\/)?(\\\\\\.)?:(\\w+)(\\(.*?\\))?(\\*)?(\\?)?/g, function (match, slash, format, key, capture, star, optional, offset) {\n      slash = slash || '';\n      format = format || '';\n      capture = capture || '([^\\\\/' + format + ']+?)';\n      optional = optional || '';\n\n      keys.push({\n        name: key,\n        optional: !!optional,\n        offset: offset + extraOffset\n      });\n\n      var result = ''\n        + (optional ? '' : slash)\n        + '(?:'\n        + format + (optional ? slash : '') + capture\n        + (star ? '((?:[\\\\/' + format + '].+?)?)' : '')\n        + ')'\n        + optional;\n\n      extraOffset += result.length - match.length;\n\n      return result;\n    })\n    .replace(/\\*/g, function (star, index) {\n      var len = keys.length\n\n      while (len-- > keysOffset && keys[len].offset > index) {\n        keys[len].offset += 3; // Replacement length minus asterisk length.\n      }\n\n      return '(.*)';\n    });\n\n  // This is a workaround for handling unnamed matching groups.\n  while (m = MATCHING_GROUP_REGEXP.exec(path)) {\n    var escapeCount = 0;\n    var index = m.index;\n\n    while (path.charAt(--index) === '\\\\') {\n      escapeCount++;\n    }\n\n    // It's possible to escape the bracket.\n    if (escapeCount % 2 === 1) {\n      continue;\n    }\n\n    if (keysOffset + i === keys.length || keys[keysOffset + i].offset > m.index) {\n      keys.splice(keysOffset + i, 0, {\n        name: name++, // Unnamed matching groups must be consistently linear.\n        optional: false,\n        offset: m.index\n      });\n    }\n\n    i++;\n  }\n\n  // If the path is non-ending, match until the end or a slash.\n  path += (end ? '$' : (path[path.length - 1] === '/' ? '' : '(?=\\\\/|$)'));\n\n  return new RegExp(path, flags);\n};\n","/*!\n * router\n * Copyright(c) 2013 Roman Shtylman\n * Copyright(c) 2014 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict'\n\n/**\n * Module dependencies.\n * @private\n */\n\nvar debug = require('debug')('router')\nvar flatten = require('array-flatten').flatten\nvar Layer = require('./lib/layer')\nvar methods = require('methods')\nvar mixin = require('utils-merge')\nvar parseUrl = require('parseurl')\nvar Route = require('./lib/route')\nvar setPrototypeOf = require('setprototypeof')\n\n/**\n * Module variables.\n * @private\n */\n\nvar slice = Array.prototype.slice\n\n/* istanbul ignore next */\nvar defer = typeof setImmediate === 'function'\n  ? setImmediate\n  : function(fn){ process.nextTick(fn.bind.apply(fn, arguments)) }\n\n/**\n * Expose `Router`.\n */\n\nmodule.exports = Router\n\n/**\n * Expose `Route`.\n */\n\nmodule.exports.Route = Route\n\n/**\n * Initialize a new `Router` with the given `options`.\n *\n * @param {object} [options]\n * @return {Router} which is a callable function\n * @public\n */\n\nfunction Router(options) {\n  if (!(this instanceof Router)) {\n    return new Router(options)\n  }\n\n  var opts = options || {}\n\n  function router(req, res, next) {\n    router.handle(req, res, next)\n  }\n\n  // inherit from the correct prototype\n  setPrototypeOf(router, this)\n\n  router.caseSensitive = opts.caseSensitive\n  router.mergeParams = opts.mergeParams\n  router.params = {}\n  router.strict = opts.strict\n  router.stack = []\n\n  return router\n}\n\n/**\n * Router prototype inherits from a Function.\n */\n\n/* istanbul ignore next */\nRouter.prototype = function () {}\n\n/**\n * Map the given param placeholder `name`(s) to the given callback.\n *\n * Parameter mapping is used to provide pre-conditions to routes\n * which use normalized placeholders. For example a _:user_id_ parameter\n * could automatically load a user's information from the database without\n * any additional code.\n *\n * The callback uses the same signature as middleware, the only difference\n * being that the value of the placeholder is passed, in this case the _id_\n * of the user. Once the `next()` function is invoked, just like middleware\n * it will continue on to execute the route, or subsequent parameter functions.\n *\n * Just like in middleware, you must either respond to the request or call next\n * to avoid stalling the request.\n *\n *  router.param('user_id', function(req, res, next, id){\n *    User.find(id, function(err, user){\n *      if (err) {\n *        return next(err)\n *      } else if (!user) {\n *        return next(new Error('failed to load user'))\n *      }\n *      req.user = user\n *      next()\n *    })\n *  })\n *\n * @param {string} name\n * @param {function} fn\n * @public\n */\n\nRouter.prototype.param = function param(name, fn) {\n  if (!name) {\n    throw new TypeError('argument name is required')\n  }\n\n  if (typeof name !== 'string') {\n    throw new TypeError('argument name must be a string')\n  }\n\n  if (!fn) {\n    throw new TypeError('argument fn is required')\n  }\n\n  if (typeof fn !== 'function') {\n    throw new TypeError('argument fn must be a function')\n  }\n\n  var params = this.params[name]\n\n  if (!params) {\n    params = this.params[name] = []\n  }\n\n  params.push(fn)\n\n  return this\n}\n\n/**\n * Dispatch a req, res into the router.\n *\n * @private\n */\n\nRouter.prototype.handle = function handle(req, res, callback) {\n  if (!callback) {\n    throw new TypeError('argument callback is required')\n  }\n\n  debug('dispatching %s %s', req.method, req.url)\n\n  var idx = 0\n  var methods\n  var protohost = getProtohost(req.url) || ''\n  var removed = ''\n  var self = this\n  var slashAdded = false\n  var sync = 0\n  var paramcalled = {}\n\n  // middleware and routes\n  var stack = this.stack\n\n  // manage inter-router variables\n  var parentParams = req.params\n  var parentUrl = req.baseUrl || ''\n  var done = restore(callback, req, 'baseUrl', 'next', 'params')\n\n  // setup next layer\n  req.next = next\n\n  // for options requests, respond with a default if nothing else responds\n  if (req.method === 'OPTIONS') {\n    methods = []\n    done = wrap(done, generateOptionsResponder(res, methods))\n  }\n\n  // setup basic req values\n  req.baseUrl = parentUrl\n  req.originalUrl = req.originalUrl || req.url\n\n  next()\n\n  function next(err) {\n    var layerError = err === 'route'\n      ? null\n      : err\n\n    // remove added slash\n    if (slashAdded) {\n      req.url = req.url.substr(1)\n      slashAdded = false\n    }\n\n    // restore altered req.url\n    if (removed.length !== 0) {\n      req.baseUrl = parentUrl\n      req.url = protohost + removed + req.url.substr(protohost.length)\n      removed = ''\n    }\n\n    // signal to exit router\n    if (layerError === 'router') {\n      defer(done, null)\n      return\n    }\n\n    // no more matching layers\n    if (idx >= stack.length) {\n      defer(done, layerError)\n      return\n    }\n\n    // max sync stack\n    if (++sync > 100) {\n      return defer(next, err)\n    }\n\n    // get pathname of request\n    var path = getPathname(req)\n\n    if (path == null) {\n      return done(layerError)\n    }\n\n    // find next matching layer\n    var layer\n    var match\n    var route\n\n    while (match !== true && idx < stack.length) {\n      layer = stack[idx++]\n      match = matchLayer(layer, path)\n      route = layer.route\n\n      if (typeof match !== 'boolean') {\n        // hold on to layerError\n        layerError = layerError || match\n      }\n\n      if (match !== true) {\n        continue\n      }\n\n      if (!route) {\n        // process non-route handlers normally\n        continue\n      }\n\n      if (layerError) {\n        // routes do not match with a pending error\n        match = false\n        continue\n      }\n\n      var method = req.method\n      var has_method = route._handles_method(method)\n\n      // build up automatic options response\n      if (!has_method && method === 'OPTIONS' && methods) {\n        methods.push.apply(methods, route._methods())\n      }\n\n      // don't even bother matching route\n      if (!has_method && method !== 'HEAD') {\n        match = false\n        continue\n      }\n    }\n\n    // no match\n    if (match !== true) {\n      return done(layerError)\n    }\n\n    // store route for dispatch on change\n    if (route) {\n      req.route = route\n    }\n\n    // Capture one-time layer values\n    req.params = self.mergeParams\n      ? mergeParams(layer.params, parentParams)\n      : layer.params\n    var layerPath = layer.path\n\n    // this should be done for the layer\n    self.process_params(layer, paramcalled, req, res, function (err) {\n      if (err) {\n        return next(layerError || err)\n      }\n\n      if (route) {\n        return layer.handle_request(req, res, next)\n      }\n\n      trim_prefix(layer, layerError, layerPath, path)\n    })\n  }\n\n  function trim_prefix(layer, layerError, layerPath, path) {\n    if (layerPath.length !== 0) {\n      // Validate path is a prefix match\n      if (layerPath !== path.substr(0, layerPath.length)) {\n        next(layerError)\n        return\n      }\n\n      // Validate path breaks on a path separator\n      var c = path[layerPath.length]\n      if (c && c !== '/') {\n        next(layerError)\n        return\n      }\n\n      // Trim off the part of the url that matches the route\n      // middleware (.use stuff) needs to have the path stripped\n      debug('trim prefix (%s) from url %s', layerPath, req.url)\n      removed = layerPath\n      req.url = protohost + req.url.substr(protohost.length + removed.length)\n\n      // Ensure leading slash\n      if (!protohost && req.url[0] !== '/') {\n        req.url = '/' + req.url\n        slashAdded = true\n      }\n\n      // Setup base URL (no trailing slash)\n      req.baseUrl = parentUrl + (removed[removed.length - 1] === '/'\n        ? removed.substring(0, removed.length - 1)\n        : removed)\n    }\n\n    debug('%s %s : %s', layer.name, layerPath, req.originalUrl)\n\n    if (layerError) {\n      layer.handle_error(layerError, req, res, next)\n    } else {\n      layer.handle_request(req, res, next)\n    }\n\n    sync = 0\n  }\n}\n\n/**\n * Process any parameters for the layer.\n *\n * @private\n */\n\nRouter.prototype.process_params = function process_params(layer, called, req, res, done) {\n  var params = this.params\n\n  // captured parameters from the layer, keys and values\n  var keys = layer.keys\n\n  // fast track\n  if (!keys || keys.length === 0) {\n    return done()\n  }\n\n  var i = 0\n  var name\n  var paramIndex = 0\n  var key\n  var paramVal\n  var paramCallbacks\n  var paramCalled\n\n  // process params in order\n  // param callbacks can be async\n  function param(err) {\n    if (err) {\n      return done(err)\n    }\n\n    if (i >= keys.length ) {\n      return done()\n    }\n\n    paramIndex = 0\n    key = keys[i++]\n    name = key.name\n    paramVal = req.params[name]\n    paramCallbacks = params[name]\n    paramCalled = called[name]\n\n    if (paramVal === undefined || !paramCallbacks) {\n      return param()\n    }\n\n    // param previously called with same value or error occurred\n    if (paramCalled && (paramCalled.match === paramVal\n      || (paramCalled.error && paramCalled.error !== 'route'))) {\n      // restore value\n      req.params[name] = paramCalled.value\n\n      // next param\n      return param(paramCalled.error)\n    }\n\n    called[name] = paramCalled = {\n      error: null,\n      match: paramVal,\n      value: paramVal\n    }\n\n    paramCallback()\n  }\n\n  // single param callbacks\n  function paramCallback(err) {\n    var fn = paramCallbacks[paramIndex++]\n\n    // store updated value\n    paramCalled.value = req.params[key.name]\n\n    if (err) {\n      // store error\n      paramCalled.error = err\n      param(err)\n      return\n    }\n\n    if (!fn) return param()\n\n    try {\n      fn(req, res, paramCallback, paramVal, key.name)\n    } catch (e) {\n      paramCallback(e)\n    }\n  }\n\n  param()\n}\n\n/**\n * Use the given middleware function, with optional path, defaulting to \"/\".\n *\n * Use (like `.all`) will run for any http METHOD, but it will not add\n * handlers for those methods so OPTIONS requests will not consider `.use`\n * functions even if they could respond.\n *\n * The other difference is that _route_ path is stripped and not visible\n * to the handler function. The main effect of this feature is that mounted\n * handlers can operate without any code changes regardless of the \"prefix\"\n * pathname.\n *\n * @public\n */\n\nRouter.prototype.use = function use(handler) {\n  var offset = 0\n  var path = '/'\n\n  // default path to '/'\n  // disambiguate router.use([handler])\n  if (typeof handler !== 'function') {\n    var arg = handler\n\n    while (Array.isArray(arg) && arg.length !== 0) {\n      arg = arg[0]\n    }\n\n    // first arg is the path\n    if (typeof arg !== 'function') {\n      offset = 1\n      path = handler\n    }\n  }\n\n  var callbacks = flatten(slice.call(arguments, offset))\n\n  if (callbacks.length === 0) {\n    throw new TypeError('argument handler is required')\n  }\n\n  for (var i = 0; i < callbacks.length; i++) {\n    var fn = callbacks[i]\n\n    if (typeof fn !== 'function') {\n      throw new TypeError('argument handler must be a function')\n    }\n\n    // add the middleware\n    debug('use %o %s', path, fn.name || '<anonymous>')\n\n    var layer = new Layer(path, {\n      sensitive: this.caseSensitive,\n      strict: false,\n      end: false\n    }, fn)\n\n    layer.route = undefined\n\n    this.stack.push(layer)\n  }\n\n  return this\n}\n\n/**\n * Create a new Route for the given path.\n *\n * Each route contains a separate middleware stack and VERB handlers.\n *\n * See the Route api documentation for details on adding handlers\n * and middleware to routes.\n *\n * @param {string} path\n * @return {Route}\n * @public\n */\n\nRouter.prototype.route = function route(path) {\n  var route = new Route(path)\n\n  var layer = new Layer(path, {\n    sensitive: this.caseSensitive,\n    strict: this.strict,\n    end: true\n  }, handle)\n\n  function handle(req, res, next) {\n    route.dispatch(req, res, next)\n  }\n\n  layer.route = route\n\n  this.stack.push(layer)\n  return route\n}\n\n// create Router#VERB functions\nmethods.concat('all').forEach(function(method){\n  Router.prototype[method] = function (path) {\n    var route = this.route(path)\n    route[method].apply(route, slice.call(arguments, 1))\n    return this\n  }\n})\n\n/**\n * Generate a callback that will make an OPTIONS response.\n *\n * @param {OutgoingMessage} res\n * @param {array} methods\n * @private\n */\n\nfunction generateOptionsResponder(res, methods) {\n  return function onDone(fn, err) {\n    if (err || methods.length === 0) {\n      return fn(err)\n    }\n\n    trySendOptionsResponse(res, methods, fn)\n  }\n}\n\n/**\n * Get pathname of request.\n *\n * @param {IncomingMessage} req\n * @private\n */\n\nfunction getPathname(req) {\n  try {\n    return parseUrl(req).pathname\n  } catch (err) {\n    return undefined\n  }\n}\n\n/**\n * Get get protocol + host for a URL.\n *\n * @param {string} url\n * @private\n */\n\nfunction getProtohost(url) {\n  if (typeof url !== 'string' || url.length === 0 || url[0] === '/') {\n    return undefined\n  }\n\n  var searchIndex = url.indexOf('?')\n  var pathLength = searchIndex !== -1\n    ? searchIndex\n    : url.length\n  var fqdnIndex = url.substr(0, pathLength).indexOf('://')\n\n  return fqdnIndex !== -1\n    ? url.substr(0, url.indexOf('/', 3 + fqdnIndex))\n    : undefined\n}\n\n/**\n * Match path to a layer.\n *\n * @param {Layer} layer\n * @param {string} path\n * @private\n */\n\nfunction matchLayer(layer, path) {\n  try {\n    return layer.match(path)\n  } catch (err) {\n    return err\n  }\n}\n\n/**\n * Merge params with parent params\n *\n * @private\n */\n\nfunction mergeParams(params, parent) {\n  if (typeof parent !== 'object' || !parent) {\n    return params\n  }\n\n  // make copy of parent for base\n  var obj = mixin({}, parent)\n\n  // simple non-numeric merging\n  if (!(0 in params) || !(0 in parent)) {\n    return mixin(obj, params)\n  }\n\n  var i = 0\n  var o = 0\n\n  // determine numeric gap in params\n  while (i in params) {\n    i++\n  }\n\n  // determine numeric gap in parent\n  while (o in parent) {\n    o++\n  }\n\n  // offset numeric indices in params before merge\n  for (i--; i >= 0; i--) {\n    params[i + o] = params[i]\n\n    // create holes for the merge when necessary\n    if (i < o) {\n      delete params[i]\n    }\n  }\n\n  return mixin(obj, params)\n}\n\n/**\n * Restore obj props after function\n *\n * @private\n */\n\nfunction restore(fn, obj) {\n  var props = new Array(arguments.length - 2)\n  var vals = new Array(arguments.length - 2)\n\n  for (var i = 0; i < props.length; i++) {\n    props[i] = arguments[i + 2]\n    vals[i] = obj[props[i]]\n  }\n\n  return function(){\n    // restore vals\n    for (var i = 0; i < props.length; i++) {\n      obj[props[i]] = vals[i]\n    }\n\n    return fn.apply(this, arguments)\n  }\n}\n\n/**\n * Send an OPTIONS response.\n *\n * @private\n */\n\nfunction sendOptionsResponse(res, methods) {\n  var options = Object.create(null)\n\n  // build unique method map\n  for (var i = 0; i < methods.length; i++) {\n    options[methods[i]] = true\n  }\n\n  // construct the allow list\n  var allow = Object.keys(options).sort().join(', ')\n\n  // send response\n  res.setHeader('Allow', allow)\n  res.setHeader('Content-Length', Buffer.byteLength(allow))\n  res.setHeader('Content-Type', 'text/plain')\n  res.setHeader('X-Content-Type-Options', 'nosniff')\n  res.end(allow)\n}\n\n/**\n * Try to send an OPTIONS response.\n *\n * @private\n */\n\nfunction trySendOptionsResponse(res, methods, next) {\n  try {\n    sendOptionsResponse(res, methods)\n  } catch (err) {\n    next(err)\n  }\n}\n\n/**\n * Wrap a function\n *\n * @private\n */\n\nfunction wrap(old, fn) {\n  return function proxy() {\n    var args = new Array(arguments.length + 1)\n\n    args[0] = old\n    for (var i = 0, len = arguments.length; i < len; i++) {\n      args[i + 1] = arguments[i]\n    }\n\n    fn.apply(this, args)\n  }\n}\n","/*!\n * router\n * Copyright(c) 2013 Roman Shtylman\n * Copyright(c) 2014 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict'\n\n/**\n * Module dependencies.\n * @private\n */\n\nvar pathRegexp = require('path-to-regexp')\nvar debug = require('debug')('router:layer')\n\n/**\n * Module variables.\n * @private\n */\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty\n\n/**\n * Expose `Layer`.\n */\n\nmodule.exports = Layer\n\nfunction Layer(path, options, fn) {\n  if (!(this instanceof Layer)) {\n    return new Layer(path, options, fn)\n  }\n\n  debug('new %o', path)\n  var opts = options || {}\n\n  this.handle = fn\n  this.name = fn.name || '<anonymous>'\n  this.params = undefined\n  this.path = undefined\n  this.regexp = pathRegexp(path, this.keys = [], opts)\n\n  // set fast path flags\n  this.regexp.fast_star = path === '*'\n  this.regexp.fast_slash = path === '/' && opts.end === false\n}\n\n/**\n * Handle the error for the layer.\n *\n * @param {Error} error\n * @param {Request} req\n * @param {Response} res\n * @param {function} next\n * @api private\n */\n\nLayer.prototype.handle_error = function handle_error(error, req, res, next) {\n  var fn = this.handle\n\n  if (fn.length !== 4) {\n    // not a standard error handler\n    return next(error)\n  }\n\n  try {\n    fn(error, req, res, next)\n  } catch (err) {\n    next(err)\n  }\n}\n\n/**\n * Handle the request for the layer.\n *\n * @param {Request} req\n * @param {Response} res\n * @param {function} next\n * @api private\n */\n\nLayer.prototype.handle_request = function handle(req, res, next) {\n  var fn = this.handle\n\n  if (fn.length > 3) {\n    // not a standard request handler\n    return next()\n  }\n\n  try {\n    fn(req, res, next)\n  } catch (err) {\n    next(err)\n  }\n}\n\n/**\n * Check if this route matches `path`, if so\n * populate `.params`.\n *\n * @param {String} path\n * @return {Boolean}\n * @api private\n */\n\nLayer.prototype.match = function match(path) {\n  var match\n\n  if (path != null) {\n    // fast path non-ending match for / (any path matches)\n    if (this.regexp.fast_slash) {\n      this.params = {}\n      this.path = ''\n      return true\n    }\n\n    // fast path for * (everything matched in a param)\n    if (this.regexp.fast_star) {\n      this.params = {'0': decode_param(path)}\n      this.path = path\n      return true\n    }\n\n    // match the path\n    match = this.regexp.exec(path)\n  }\n\n  if (!match) {\n    this.params = undefined\n    this.path = undefined\n    return false\n  }\n\n  // store values\n  this.params = {}\n  this.path = match[0]\n\n  // iterate matches\n  var keys = this.keys\n  var params = this.params\n\n  for (var i = 1; i < match.length; i++) {\n    var key = keys[i - 1]\n    var prop = key.name\n    var val = decode_param(match[i])\n\n    if (val !== undefined || !(hasOwnProperty.call(params, prop))) {\n      params[prop] = val\n    }\n  }\n\n  return true\n}\n\n/**\n * Decode param value.\n *\n * @param {string} val\n * @return {string}\n * @private\n */\n\nfunction decode_param(val){\n  if (typeof val !== 'string' || val.length === 0) {\n    return val\n  }\n\n  try {\n    return decodeURIComponent(val)\n  } catch (err) {\n    if (err instanceof URIError) {\n      err.message = 'Failed to decode param \\'' + val + '\\''\n      err.status = 400\n    }\n\n    throw err\n  }\n}\n","/*!\n * router\n * Copyright(c) 2013 Roman Shtylman\n * Copyright(c) 2014 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict'\n\n/**\n * Module dependencies.\n * @private\n */\n\nvar debug = require('debug')('router:route')\nvar flatten = require('array-flatten').flatten\nvar Layer = require('./layer')\nvar methods = require('methods')\n\n/**\n * Module variables.\n * @private\n */\n\nvar slice = Array.prototype.slice\n\n/* istanbul ignore next */\nvar defer = typeof setImmediate === 'function'\n  ? setImmediate\n  : function (fn) { process.nextTick(fn.bind.apply(fn, arguments)) }\n\n/**\n * Expose `Route`.\n */\n\nmodule.exports = Route\n\n/**\n * Initialize `Route` with the given `path`,\n *\n * @param {String} path\n * @api private\n */\n\nfunction Route(path) {\n  debug('new %o', path)\n  this.path = path\n  this.stack = []\n\n  // route handlers for various http methods\n  this.methods = Object.create(null)\n}\n\n/**\n * @private\n */\n\nRoute.prototype._handles_method = function _handles_method(method) {\n  if (this.methods._all) {\n    return true\n  }\n\n  // normalize name\n  var name = method.toLowerCase()\n\n  if (name === 'head' && !this.methods['head']) {\n    name = 'get'\n  }\n\n  return Boolean(this.methods[name])\n}\n\n/**\n * @return {array} supported HTTP methods\n * @private\n */\n\nRoute.prototype._methods = function _methods() {\n  var methods = Object.keys(this.methods)\n\n  // append automatic head\n  if (this.methods.get && !this.methods.head) {\n    methods.push('head')\n  }\n\n  for (var i = 0; i < methods.length; i++) {\n    // make upper case\n    methods[i] = methods[i].toUpperCase()\n  }\n\n  return methods\n}\n\n/**\n * dispatch req, res into this route\n *\n * @private\n */\n\nRoute.prototype.dispatch = function dispatch(req, res, done) {\n  var idx = 0\n  var stack = this.stack\n  var sync = 0\n\n  if (stack.length === 0) {\n    return done()\n  }\n\n  var method = req.method.toLowerCase()\n  if (method === 'head' && !this.methods['head']) {\n    method = 'get'\n  }\n\n  req.route = this\n\n  next()\n\n  function next(err) {\n    // signal to exit route\n    if (err && err === 'route') {\n      return done()\n    }\n\n    // signal to exit router\n    if (err && err === 'router') {\n      return done(err)\n    }\n\n    // no more matching layers\n    if (idx >= stack.length) {\n      return done(err)\n    }\n\n    // max sync stack\n    if (++sync > 100) {\n      return defer(next, err)\n    }\n\n    var layer\n    var match\n\n    // find next matching layer\n    while (match !== true && idx < stack.length) {\n      layer = stack[idx++]\n      match = !layer.method || layer.method === method\n    }\n\n    // no match\n    if (match !== true) {\n      return done(err)\n    }\n\n    if (err) {\n      layer.handle_error(err, req, res, next)\n    } else {\n      layer.handle_request(req, res, next)\n    }\n\n    sync = 0\n  }\n}\n\n/**\n * Add a handler for all HTTP verbs to this route.\n *\n * Behaves just like middleware and can respond or call `next`\n * to continue processing.\n *\n * You can use multiple `.all` call to add multiple handlers.\n *\n *   function check_something(req, res, next){\n *     next()\n *   }\n *\n *   function validate_user(req, res, next){\n *     next()\n *   }\n *\n *   route\n *   .all(validate_user)\n *   .all(check_something)\n *   .get(function(req, res, next){\n *     res.send('hello world')\n *   })\n *\n * @param {array|function} handler\n * @return {Route} for chaining\n * @api public\n */\n\nRoute.prototype.all = function all(handler) {\n  var callbacks = flatten(slice.call(arguments))\n\n  if (callbacks.length === 0) {\n    throw new TypeError('argument handler is required')\n  }\n\n  for (var i = 0; i < callbacks.length; i++) {\n    var fn = callbacks[i]\n\n    if (typeof fn !== 'function') {\n      throw new TypeError('argument handler must be a function')\n    }\n\n    var layer = Layer('/', {}, fn)\n    layer.method = undefined\n\n    this.methods._all = true\n    this.stack.push(layer)\n  }\n\n  return this\n}\n\nmethods.forEach(function (method) {\n  Route.prototype[method] = function (handler) {\n    var callbacks = flatten(slice.call(arguments))\n\n    if (callbacks.length === 0) {\n      throw new TypeError('argument handler is required')\n    }\n\n    for (var i = 0; i < callbacks.length; i++) {\n      var fn = callbacks[i]\n\n      if (typeof fn !== 'function') {\n        throw new TypeError('argument handler must be a function')\n      }\n\n      debug('%s %s', method, this.path)\n\n      var layer = Layer('/', {}, fn)\n      layer.method = method\n\n      this.methods[method] = true\n      this.stack.push(layer)\n    }\n\n    return this\n  }\n})\n","/**\n * This is the web browser implementation of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = require('./debug');\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = 'undefined' != typeof chrome\n               && 'undefined' != typeof chrome.storage\n                  ? chrome.storage.local\n                  : localstorage();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n  'lightseagreen',\n  'forestgreen',\n  'goldenrod',\n  'dodgerblue',\n  'darkorchid',\n  'crimson'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\nfunction useColors() {\n  // NB: In an Electron preload script, document will be defined but not fully\n  // initialized. Since we know we're in Chrome, we'll just detect this case\n  // explicitly\n  if (typeof window !== 'undefined' && window.process && window.process.type === 'renderer') {\n    return true;\n  }\n\n  // is webkit? http://stackoverflow.com/a/16459606/376773\n  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n  return (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n    // is firebug? http://stackoverflow.com/a/398120/376773\n    (typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n    // is firefox >= v31?\n    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n    // double check webkit in userAgent just in case we are in a worker\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nexports.formatters.j = function(v) {\n  try {\n    return JSON.stringify(v);\n  } catch (err) {\n    return '[UnexpectedJSONParseError]: ' + err.message;\n  }\n};\n\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n  var useColors = this.useColors;\n\n  args[0] = (useColors ? '%c' : '')\n    + this.namespace\n    + (useColors ? ' %c' : ' ')\n    + args[0]\n    + (useColors ? '%c ' : ' ')\n    + '+' + exports.humanize(this.diff);\n\n  if (!useColors) return;\n\n  var c = 'color: ' + this.color;\n  args.splice(1, 0, c, 'color: inherit')\n\n  // the final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-zA-Z%]/g, function(match) {\n    if ('%%' === match) return;\n    index++;\n    if ('%c' === match) {\n      // we only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n\n  args.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\nfunction log() {\n  // this hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n  return 'object' === typeof console\n    && console.log\n    && Function.prototype.apply.call(console.log, console, arguments);\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\nfunction save(namespaces) {\n  try {\n    if (null == namespaces) {\n      exports.storage.removeItem('debug');\n    } else {\n      exports.storage.debug = namespaces;\n    }\n  } catch(e) {}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n  var r;\n  try {\n    r = exports.storage.debug;\n  } catch(e) {}\n\n  // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n  if (!r && typeof process !== 'undefined' && 'env' in process) {\n    r = process.env.DEBUG;\n  }\n\n  return r;\n}\n\n/**\n * Enable namespaces listed in `localStorage.debug` initially.\n */\n\nexports.enable(load());\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n  try {\n    return window.localStorage;\n  } catch (e) {}\n}\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = createDebug.debug = createDebug['default'] = createDebug;\nexports.coerce = coerce;\nexports.disable = disable;\nexports.enable = enable;\nexports.enabled = enabled;\nexports.humanize = require('ms');\n\n/**\n * The currently active debug mode names, and names to skip.\n */\n\nexports.names = [];\nexports.skips = [];\n\n/**\n * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n *\n * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n */\n\nexports.formatters = {};\n\n/**\n * Previous log timestamp.\n */\n\nvar prevTime;\n\n/**\n * Select a color.\n * @param {String} namespace\n * @return {Number}\n * @api private\n */\n\nfunction selectColor(namespace) {\n  var hash = 0, i;\n\n  for (i in namespace) {\n    hash  = ((hash << 5) - hash) + namespace.charCodeAt(i);\n    hash |= 0; // Convert to 32bit integer\n  }\n\n  return exports.colors[Math.abs(hash) % exports.colors.length];\n}\n\n/**\n * Create a debugger with the given `namespace`.\n *\n * @param {String} namespace\n * @return {Function}\n * @api public\n */\n\nfunction createDebug(namespace) {\n\n  function debug() {\n    // disabled?\n    if (!debug.enabled) return;\n\n    var self = debug;\n\n    // set `diff` timestamp\n    var curr = +new Date();\n    var ms = curr - (prevTime || curr);\n    self.diff = ms;\n    self.prev = prevTime;\n    self.curr = curr;\n    prevTime = curr;\n\n    // turn the `arguments` into a proper Array\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n\n    args[0] = exports.coerce(args[0]);\n\n    if ('string' !== typeof args[0]) {\n      // anything else let's inspect with %O\n      args.unshift('%O');\n    }\n\n    // apply any `formatters` transformations\n    var index = 0;\n    args[0] = args[0].replace(/%([a-zA-Z%])/g, function(match, format) {\n      // if we encounter an escaped % then don't increase the array index\n      if (match === '%%') return match;\n      index++;\n      var formatter = exports.formatters[format];\n      if ('function' === typeof formatter) {\n        var val = args[index];\n        match = formatter.call(self, val);\n\n        // now we need to remove `args[index]` since it's inlined in the `format`\n        args.splice(index, 1);\n        index--;\n      }\n      return match;\n    });\n\n    // apply env-specific formatting (colors, etc.)\n    exports.formatArgs.call(self, args);\n\n    var logFn = debug.log || exports.log || console.log.bind(console);\n    logFn.apply(self, args);\n  }\n\n  debug.namespace = namespace;\n  debug.enabled = exports.enabled(namespace);\n  debug.useColors = exports.useColors();\n  debug.color = selectColor(namespace);\n\n  // env-specific initialization logic for debug instances\n  if ('function' === typeof exports.init) {\n    exports.init(debug);\n  }\n\n  return debug;\n}\n\n/**\n * Enables a debug mode by namespaces. This can include modes\n * separated by a colon and wildcards.\n *\n * @param {String} namespaces\n * @api public\n */\n\nfunction enable(namespaces) {\n  exports.save(namespaces);\n\n  exports.names = [];\n  exports.skips = [];\n\n  var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n  var len = split.length;\n\n  for (var i = 0; i < len; i++) {\n    if (!split[i]) continue; // ignore empty strings\n    namespaces = split[i].replace(/\\*/g, '.*?');\n    if (namespaces[0] === '-') {\n      exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n    } else {\n      exports.names.push(new RegExp('^' + namespaces + '$'));\n    }\n  }\n}\n\n/**\n * Disable debug output.\n *\n * @api public\n */\n\nfunction disable() {\n  exports.enable('');\n}\n\n/**\n * Returns true if the given mode name is enabled, false otherwise.\n *\n * @param {String} name\n * @return {Boolean}\n * @api public\n */\n\nfunction enabled(name) {\n  var i, len;\n  for (i = 0, len = exports.skips.length; i < len; i++) {\n    if (exports.skips[i].test(name)) {\n      return false;\n    }\n  }\n  for (i = 0, len = exports.names.length; i < len; i++) {\n    if (exports.names[i].test(name)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Coerce `val`.\n *\n * @param {Mixed} val\n * @return {Mixed}\n * @api private\n */\n\nfunction coerce(val) {\n  if (val instanceof Error) return val.stack || val.message;\n  return val;\n}\n","/**\n * Detect Electron renderer process, which is node, but we should\n * treat as a browser.\n */\n\nif (typeof process !== 'undefined' && process.type === 'renderer') {\n  module.exports = require('./browser.js');\n} else {\n  module.exports = require('./node.js');\n}\n","/**\n * Module dependencies.\n */\n\nvar tty = require('tty');\nvar util = require('util');\n\n/**\n * This is the Node.js implementation of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = require('./debug');\nexports.init = init;\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\n\n/**\n * Colors.\n */\n\nexports.colors = [6, 2, 3, 4, 5, 1];\n\n/**\n * Build up the default `inspectOpts` object from the environment variables.\n *\n *   $ DEBUG_COLORS=no DEBUG_DEPTH=10 DEBUG_SHOW_HIDDEN=enabled node script.js\n */\n\nexports.inspectOpts = Object.keys(process.env).filter(function (key) {\n  return /^debug_/i.test(key);\n}).reduce(function (obj, key) {\n  // camel-case\n  var prop = key\n    .substring(6)\n    .toLowerCase()\n    .replace(/_([a-z])/g, function (_, k) { return k.toUpperCase() });\n\n  // coerce string value into JS value\n  var val = process.env[key];\n  if (/^(yes|on|true|enabled)$/i.test(val)) val = true;\n  else if (/^(no|off|false|disabled)$/i.test(val)) val = false;\n  else if (val === 'null') val = null;\n  else val = Number(val);\n\n  obj[prop] = val;\n  return obj;\n}, {});\n\n/**\n * The file descriptor to write the `debug()` calls to.\n * Set the `DEBUG_FD` env variable to override with another value. i.e.:\n *\n *   $ DEBUG_FD=3 node script.js 3>debug.log\n */\n\nvar fd = parseInt(process.env.DEBUG_FD, 10) || 2;\n\nif (1 !== fd && 2 !== fd) {\n  util.deprecate(function(){}, 'except for stderr(2) and stdout(1), any other usage of DEBUG_FD is deprecated. Override debug.log if you want to use a different log function (https://git.io/debug_fd)')()\n}\n\nvar stream = 1 === fd ? process.stdout :\n             2 === fd ? process.stderr :\n             createWritableStdioStream(fd);\n\n/**\n * Is stdout a TTY? Colored output is enabled when `true`.\n */\n\nfunction useColors() {\n  return 'colors' in exports.inspectOpts\n    ? Boolean(exports.inspectOpts.colors)\n    : tty.isatty(fd);\n}\n\n/**\n * Map %o to `util.inspect()`, all on a single line.\n */\n\nexports.formatters.o = function(v) {\n  this.inspectOpts.colors = this.useColors;\n  return util.inspect(v, this.inspectOpts)\n    .split('\\n').map(function(str) {\n      return str.trim()\n    }).join(' ');\n};\n\n/**\n * Map %o to `util.inspect()`, allowing multiple lines if needed.\n */\n\nexports.formatters.O = function(v) {\n  this.inspectOpts.colors = this.useColors;\n  return util.inspect(v, this.inspectOpts);\n};\n\n/**\n * Adds ANSI color escape codes if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n  var name = this.namespace;\n  var useColors = this.useColors;\n\n  if (useColors) {\n    var c = this.color;\n    var prefix = '  \\u001b[3' + c + ';1m' + name + ' ' + '\\u001b[0m';\n\n    args[0] = prefix + args[0].split('\\n').join('\\n' + prefix);\n    args.push('\\u001b[3' + c + 'm+' + exports.humanize(this.diff) + '\\u001b[0m');\n  } else {\n    args[0] = new Date().toUTCString()\n      + ' ' + name + ' ' + args[0];\n  }\n}\n\n/**\n * Invokes `util.format()` with the specified arguments and writes to `stream`.\n */\n\nfunction log() {\n  return stream.write(util.format.apply(util, arguments) + '\\n');\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\nfunction save(namespaces) {\n  if (null == namespaces) {\n    // If you set a process.env field to null or undefined, it gets cast to the\n    // string 'null' or 'undefined'. Just delete instead.\n    delete process.env.DEBUG;\n  } else {\n    process.env.DEBUG = namespaces;\n  }\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n  return process.env.DEBUG;\n}\n\n/**\n * Copied from `node/src/node.js`.\n *\n * XXX: It's lame that node doesn't expose this API out-of-the-box. It also\n * relies on the undocumented `tty_wrap.guessHandleType()` which is also lame.\n */\n\nfunction createWritableStdioStream (fd) {\n  var stream;\n  var tty_wrap = process.binding('tty_wrap');\n\n  // Note stream._type is used for test-module-load-list.js\n\n  switch (tty_wrap.guessHandleType(fd)) {\n    case 'TTY':\n      stream = new tty.WriteStream(fd);\n      stream._type = 'tty';\n\n      // Hack to have stream not keep the event loop alive.\n      // See https://github.com/joyent/node/issues/1726\n      if (stream._handle && stream._handle.unref) {\n        stream._handle.unref();\n      }\n      break;\n\n    case 'FILE':\n      var fs = require('fs');\n      stream = new fs.SyncWriteStream(fd, { autoClose: false });\n      stream._type = 'fs';\n      break;\n\n    case 'PIPE':\n    case 'TCP':\n      var net = require('net');\n      stream = new net.Socket({\n        fd: fd,\n        readable: false,\n        writable: true\n      });\n\n      // FIXME Should probably have an option in net.Socket to create a\n      // stream from an existing fd which is writable only. But for now\n      // we'll just add this hack and set the `readable` member to false.\n      // Test: ./node test/fixtures/echo.js < /etc/passwd\n      stream.readable = false;\n      stream.read = null;\n      stream._type = 'pipe';\n\n      // FIXME Hack to have stream not keep the event loop alive.\n      // See https://github.com/joyent/node/issues/1726\n      if (stream._handle && stream._handle.unref) {\n        stream._handle.unref();\n      }\n      break;\n\n    default:\n      // Probably an error on in uv_guess_handle()\n      throw new Error('Implement me. Unknown stream file type!');\n  }\n\n  // For supporting legacy API we put the FD here.\n  stream.fd = fd;\n\n  stream._isStdio = true;\n\n  return stream;\n}\n\n/**\n * Init logic for `debug` instances.\n *\n * Create a new `inspectOpts` object in case `useColors` is set\n * differently for a particular `debug` instance.\n */\n\nfunction init (debug) {\n  debug.inspectOpts = {};\n\n  var keys = Object.keys(exports.inspectOpts);\n  for (var i = 0; i < keys.length; i++) {\n    debug.inspectOpts[keys[i]] = exports.inspectOpts[keys[i]];\n  }\n}\n\n/**\n * Enable namespaces listed in `process.env.DEBUG` initially.\n */\n\nexports.enable(load());\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isNaN(val) === false) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  if (ms >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (ms >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (ms >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (ms >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  return plural(ms, d, 'day') ||\n    plural(ms, h, 'hour') ||\n    plural(ms, m, 'minute') ||\n    plural(ms, s, 'second') ||\n    ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, n, name) {\n  if (ms < n) {\n    return;\n  }\n  if (ms < n * 1.5) {\n    return Math.floor(ms / n) + ' ' + name;\n  }\n  return Math.ceil(ms / n) + ' ' + name + 's';\n}\n","'use strict'\n/* eslint no-proto: 0 */\nmodule.exports = Object.setPrototypeOf || ({ __proto__: [] } instanceof Array ? setProtoOf : mixinProperties)\n\nfunction setProtoOf (obj, proto) {\n  obj.__proto__ = proto\n  return obj\n}\n\nfunction mixinProperties (obj, proto) {\n  for (var prop in proto) {\n    if (!Object.prototype.hasOwnProperty.call(obj, prop)) {\n      obj[prop] = proto[prop]\n    }\n  }\n  return obj\n}\n","/**\n * Merge object b with object a.\n *\n *     var a = { foo: 'bar' }\n *       , b = { bar: 'baz' };\n *\n *     merge(a, b);\n *     // => { foo: 'bar', bar: 'baz' }\n *\n * @param {Object} a\n * @param {Object} b\n * @return {Object}\n * @api public\n */\n\nexports = module.exports = function(a, b){\n  if (a && b) {\n    for (var key in b) {\n      a[key] = b[key];\n    }\n  }\n  return a;\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.mergeDeviceAccessControls = exports.addAccessControlsForInterface = void 0;\nconst _1 = require(\".\");\nfunction addAccessControlsForInterface(id, ...scryptedInterfaces) {\n    const methods = scryptedInterfaces.map(scryptedInterface => _1.ScryptedInterfaceDescriptors[scryptedInterface].methods).flat();\n    const properties = scryptedInterfaces.map(scryptedInterface => _1.ScryptedInterfaceDescriptors[scryptedInterface].properties).flat();\n    const interfaces = scryptedInterfaces;\n    return {\n        id,\n        methods,\n        properties,\n        interfaces,\n    };\n}\nexports.addAccessControlsForInterface = addAccessControlsForInterface;\nfunction mergeDeviceAccessControls(accessControls, dacls) {\n    if (!accessControls || accessControls.devicesAccessControls === null)\n        return accessControls;\n    accessControls.devicesAccessControls || (accessControls.devicesAccessControls = []);\n    accessControls.devicesAccessControls.push(...dacls);\n    return accessControls;\n}\nexports.mergeDeviceAccessControls = mergeDeviceAccessControls;\n//# sourceMappingURL=acl.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MixinDeviceBase = exports.ScryptedDeviceBase = void 0;\n__exportStar(require(\"../types/gen/index\"), exports);\nconst index_1 = require(\"../types/gen/index\");\n/**\n * @category Core Reference\n */\nclass ScryptedDeviceBase extends index_1.DeviceBase {\n    constructor(nativeId) {\n        super();\n        this.nativeId = nativeId;\n    }\n    get storage() {\n        if (!this._storage) {\n            this._storage = deviceManager.getDeviceStorage(this.nativeId);\n        }\n        return this._storage;\n    }\n    get log() {\n        if (!this._log) {\n            this._log = deviceManager.getDeviceLogger(this.nativeId);\n        }\n        return this._log;\n    }\n    get console() {\n        if (!this._console) {\n            this._console = deviceManager.getDeviceConsole(this.nativeId);\n        }\n        return this._console;\n    }\n    async createMediaObject(data, mimeType) {\n        return mediaManager.createMediaObject(data, mimeType, {\n            sourceId: this.id,\n        });\n    }\n    getMediaObjectConsole(mediaObject) {\n        if (typeof mediaObject.sourceId !== 'string')\n            return this.console;\n        return deviceManager.getMixinConsole(mediaObject.sourceId, this.nativeId);\n    }\n    _lazyLoadDeviceState() {\n        if (!this._deviceState) {\n            if (this.nativeId) {\n                this._deviceState = deviceManager.getDeviceState(this.nativeId);\n            }\n            else {\n                this._deviceState = deviceManager.getDeviceState();\n            }\n        }\n    }\n    /**\n     * Fire an event for this device.\n     */\n    onDeviceEvent(eventInterface, eventData) {\n        return deviceManager.onDeviceEvent(this.nativeId, eventInterface, eventData);\n    }\n}\nexports.ScryptedDeviceBase = ScryptedDeviceBase;\n/**\n * @category Mixin Reference\n */\nclass MixinDeviceBase extends index_1.DeviceBase {\n    constructor(options) {\n        super();\n        this._listeners = new Set();\n        this.nativeId = systemManager.getDeviceById(this.id)?.nativeId;\n        this.mixinDevice = options.mixinDevice;\n        this.mixinDeviceInterfaces = options.mixinDeviceInterfaces;\n        this.mixinStorageSuffix = options.mixinStorageSuffix;\n        this._deviceState = options.mixinDeviceState;\n        // 8-11-2022\n        // RpcProxy will trap all properties, and the following check/hack will determine\n        // if the device state came from another node worker thread.\n        // This should ultimately be removed at some point in the future.\n        if (this._deviceState.__rpcproxy_traps_all_properties && deviceManager.createDeviceState && typeof this._deviceState.id === 'string') {\n            this._deviceState = deviceManager.createDeviceState(this._deviceState.id, this._deviceState.setState);\n        }\n        this.mixinProviderNativeId = options.mixinProviderNativeId;\n    }\n    get storage() {\n        if (!this._storage) {\n            const mixinStorageSuffix = this.mixinStorageSuffix;\n            const mixinStorageKey = this.id + (mixinStorageSuffix ? ':' + mixinStorageSuffix : '');\n            this._storage = deviceManager.getMixinStorage(mixinStorageKey, this.mixinProviderNativeId);\n        }\n        return this._storage;\n    }\n    get console() {\n        if (!this._console) {\n            if (deviceManager.getMixinConsole)\n                this._console = deviceManager.getMixinConsole(this.id, this.mixinProviderNativeId);\n            else\n                this._console = deviceManager.getDeviceConsole(this.mixinProviderNativeId);\n        }\n        return this._console;\n    }\n    async createMediaObject(data, mimeType) {\n        return mediaManager.createMediaObject(data, mimeType, {\n            sourceId: this.id,\n        });\n    }\n    getMediaObjectConsole(mediaObject) {\n        if (typeof mediaObject.sourceId !== 'string')\n            return this.console;\n        return deviceManager.getMixinConsole(mediaObject.sourceId, this.mixinProviderNativeId);\n    }\n    /**\n     * Fire an event for this device.\n     */\n    onDeviceEvent(eventInterface, eventData) {\n        return deviceManager.onMixinEvent(this.id, this, eventInterface, eventData);\n    }\n    _lazyLoadDeviceState() {\n    }\n    manageListener(listener) {\n        this._listeners.add(listener);\n    }\n    release() {\n        for (const l of this._listeners) {\n            l.removeListener();\n        }\n    }\n}\nexports.MixinDeviceBase = MixinDeviceBase;\n(function () {\n    function _createGetState(state) {\n        return function () {\n            this._lazyLoadDeviceState();\n            return this._deviceState?.[state];\n        };\n    }\n    function _createSetState(state) {\n        return function (value) {\n            this._lazyLoadDeviceState();\n            if (!this._deviceState)\n                console.warn('device state is unavailable. the device must be discovered with deviceManager.onDeviceDiscovered or deviceManager.onDevicesChanged before the state can be set.');\n            else\n                this._deviceState[state] = value;\n        };\n    }\n    for (const field of Object.values(index_1.ScryptedInterfaceProperty)) {\n        if (field === index_1.ScryptedInterfaceProperty.nativeId)\n            continue;\n        Object.defineProperty(ScryptedDeviceBase.prototype, field, {\n            set: _createSetState(field),\n            get: _createGetState(field),\n        });\n        Object.defineProperty(MixinDeviceBase.prototype, field, {\n            set: _createSetState(field),\n            get: _createGetState(field),\n        });\n    }\n})();\nlet sdk = {};\ntry {\n    let runtimeAPI;\n    try {\n        runtimeAPI = pluginRuntimeAPI;\n    }\n    catch (e) {\n    }\n    sdk = Object.assign(sdk, {\n        log: deviceManager.getDeviceLogger(undefined),\n        deviceManager,\n        endpointManager,\n        mediaManager,\n        systemManager,\n        pluginHostAPI,\n        ...runtimeAPI,\n    });\n    try {\n        systemManager.setScryptedInterfaceDescriptors?.(index_1.TYPES_VERSION, index_1.ScryptedInterfaceDescriptors)?.catch(() => { });\n    }\n    catch (e) {\n    }\n}\ncatch (e) {\n    console.error('sdk initialization error, import @scrypted/types or use @scrypted/client instead', e);\n}\nexports.default = sdk;\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.StorageSettings = void 0;\nconst _1 = __importStar(require(\".\"));\nconst { systemManager } = _1.default;\nfunction parseValue(value, setting, readDefaultValue, rawDevice) {\n    const type = setting.multiple ? 'array' : setting.type;\n    if (type === 'boolean') {\n        if (value === 'true')\n            return true;\n        if (value === 'false')\n            return false;\n        return readDefaultValue() || false;\n    }\n    if (type === 'number') {\n        return parseFloat(value) || readDefaultValue() || 0;\n    }\n    if (type === 'integer') {\n        return parseInt(value) || readDefaultValue() || 0;\n    }\n    if (type === 'array') {\n        try {\n            return JSON.parse(value);\n        }\n        catch (e) {\n            return readDefaultValue() || [];\n        }\n    }\n    if (type === 'device') {\n        if (rawDevice)\n            return value;\n        return systemManager.getDeviceById(value) || systemManager.getDeviceById(readDefaultValue());\n    }\n    // string type, so check if it is json.\n    if (value && setting.json) {\n        try {\n            return JSON.parse(value);\n        }\n        catch (e) {\n            return readDefaultValue();\n        }\n    }\n    return value || readDefaultValue();\n}\nclass StorageSettings {\n    constructor(device, settings) {\n        this.device = device;\n        this.settings = settings;\n        this.values = {};\n        this.hasValue = {};\n        for (const key of Object.keys(settings)) {\n            const setting = settings[key];\n            const rawGet = () => this.getItem(key);\n            let get;\n            if (setting.type !== 'clippath') {\n                get = rawGet;\n            }\n            else {\n                // maybe need a mapPut. clippath is the only complex type at the moment.\n                get = () => {\n                    try {\n                        return JSON.parse(rawGet());\n                    }\n                    catch (e) {\n                    }\n                };\n            }\n            Object.defineProperty(this.values, key, {\n                get,\n                set: value => this.putSetting(key, value),\n                enumerable: true,\n            });\n            Object.defineProperty(this.hasValue, key, {\n                get: () => this.device.storage.getItem(key) != null,\n                enumerable: true,\n            });\n        }\n    }\n    get keys() {\n        const ret = {};\n        for (const key of Object.keys(this.settings)) {\n            ret[key] = key;\n        }\n        return ret;\n    }\n    async getSettings() {\n        const onGet = await this.options?.onGet?.();\n        const ret = [];\n        for (const [key, setting] of Object.entries(this.settings)) {\n            let s = Object.assign({}, setting);\n            if (onGet?.[key])\n                s = Object.assign(s, onGet[key]);\n            if (s.onGet)\n                s = Object.assign(s, await s.onGet());\n            if (s.hide || await this.options?.hide?.[key]?.())\n                continue;\n            s.key = key;\n            s.value = this.getItemInternal(key, s, true);\n            ret.push(s);\n            delete s.onPut;\n            delete s.onGet;\n            delete s.mapPut;\n            delete s.mapGet;\n        }\n        return ret;\n    }\n    async putSetting(key, value) {\n        const setting = this.settings[key];\n        let oldValue;\n        if (setting)\n            oldValue = this.getItemInternal(key, setting);\n        return this.putSettingInternal(setting, oldValue, key, value);\n    }\n    putSettingInternal(setting, oldValue, key, value) {\n        if (!setting?.noStore) {\n            if (setting?.mapPut)\n                value = setting.mapPut(oldValue, value);\n            // nullish values should be removed, since Storage can't persist them correctly.\n            if (typeof value === 'object')\n                this.device.storage.setItem(key, JSON.stringify(value));\n            else if (value == null)\n                this.device.storage.removeItem(key);\n            else\n                this.device.storage.setItem(key, value?.toString());\n        }\n        setting?.onPut?.(oldValue, value);\n        this.device.onDeviceEvent(_1.ScryptedInterface.Settings, undefined);\n    }\n    getItemInternal(key, setting, rawDevice) {\n        if (!setting)\n            return this.device.storage.getItem(key);\n        const readDefaultValue = () => {\n            if (setting.persistedDefaultValue) {\n                this.putSettingInternal(setting, undefined, key, setting.persistedDefaultValue);\n                return setting.persistedDefaultValue;\n            }\n            return setting.defaultValue;\n        };\n        const ret = parseValue(this.device.storage.getItem(key), setting, readDefaultValue, rawDevice);\n        return setting.mapGet ? setting.mapGet(ret) : ret;\n    }\n    getItem(key) {\n        return this.getItemInternal(key, this.settings[key]);\n    }\n}\nexports.StorageSettings = StorageSettings;\n//# sourceMappingURL=storage-settings.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ScryptedMimeTypes = exports.ScryptedInterface = exports.MediaPlayerState = exports.SecuritySystemObstruction = exports.SecuritySystemMode = exports.AirQuality = exports.ChargeState = exports.LockState = exports.PanTiltZoomMovement = exports.ThermostatMode = exports.TemperatureUnit = exports.FanMode = exports.HumidityMode = exports.ScryptedDeviceType = exports.ScryptedInterfaceDescriptors = exports.ScryptedInterfaceMethod = exports.ScryptedInterfaceProperty = exports.DeviceBase = exports.TYPES_VERSION = void 0;\nexports.TYPES_VERSION = \"0.2.79\";\nclass DeviceBase {\n}\nexports.DeviceBase = DeviceBase;\nvar ScryptedInterfaceProperty;\n(function (ScryptedInterfaceProperty) {\n    ScryptedInterfaceProperty[\"id\"] = \"id\";\n    ScryptedInterfaceProperty[\"info\"] = \"info\";\n    ScryptedInterfaceProperty[\"interfaces\"] = \"interfaces\";\n    ScryptedInterfaceProperty[\"mixins\"] = \"mixins\";\n    ScryptedInterfaceProperty[\"name\"] = \"name\";\n    ScryptedInterfaceProperty[\"nativeId\"] = \"nativeId\";\n    ScryptedInterfaceProperty[\"pluginId\"] = \"pluginId\";\n    ScryptedInterfaceProperty[\"providedInterfaces\"] = \"providedInterfaces\";\n    ScryptedInterfaceProperty[\"providedName\"] = \"providedName\";\n    ScryptedInterfaceProperty[\"providedRoom\"] = \"providedRoom\";\n    ScryptedInterfaceProperty[\"providedType\"] = \"providedType\";\n    ScryptedInterfaceProperty[\"providerId\"] = \"providerId\";\n    ScryptedInterfaceProperty[\"room\"] = \"room\";\n    ScryptedInterfaceProperty[\"type\"] = \"type\";\n    ScryptedInterfaceProperty[\"on\"] = \"on\";\n    ScryptedInterfaceProperty[\"brightness\"] = \"brightness\";\n    ScryptedInterfaceProperty[\"colorTemperature\"] = \"colorTemperature\";\n    ScryptedInterfaceProperty[\"rgb\"] = \"rgb\";\n    ScryptedInterfaceProperty[\"hsv\"] = \"hsv\";\n    ScryptedInterfaceProperty[\"running\"] = \"running\";\n    ScryptedInterfaceProperty[\"paused\"] = \"paused\";\n    ScryptedInterfaceProperty[\"docked\"] = \"docked\";\n    ScryptedInterfaceProperty[\"temperatureSetting\"] = \"temperatureSetting\";\n    ScryptedInterfaceProperty[\"thermostatActiveMode\"] = \"thermostatActiveMode\";\n    ScryptedInterfaceProperty[\"thermostatAvailableModes\"] = \"thermostatAvailableModes\";\n    ScryptedInterfaceProperty[\"thermostatMode\"] = \"thermostatMode\";\n    ScryptedInterfaceProperty[\"thermostatSetpoint\"] = \"thermostatSetpoint\";\n    ScryptedInterfaceProperty[\"thermostatSetpointHigh\"] = \"thermostatSetpointHigh\";\n    ScryptedInterfaceProperty[\"thermostatSetpointLow\"] = \"thermostatSetpointLow\";\n    ScryptedInterfaceProperty[\"temperature\"] = \"temperature\";\n    ScryptedInterfaceProperty[\"temperatureUnit\"] = \"temperatureUnit\";\n    ScryptedInterfaceProperty[\"humidity\"] = \"humidity\";\n    ScryptedInterfaceProperty[\"ptzCapabilities\"] = \"ptzCapabilities\";\n    ScryptedInterfaceProperty[\"lockState\"] = \"lockState\";\n    ScryptedInterfaceProperty[\"entryOpen\"] = \"entryOpen\";\n    ScryptedInterfaceProperty[\"batteryLevel\"] = \"batteryLevel\";\n    ScryptedInterfaceProperty[\"chargeState\"] = \"chargeState\";\n    ScryptedInterfaceProperty[\"online\"] = \"online\";\n    ScryptedInterfaceProperty[\"fromMimeType\"] = \"fromMimeType\";\n    ScryptedInterfaceProperty[\"toMimeType\"] = \"toMimeType\";\n    ScryptedInterfaceProperty[\"binaryState\"] = \"binaryState\";\n    ScryptedInterfaceProperty[\"tampered\"] = \"tampered\";\n    ScryptedInterfaceProperty[\"powerDetected\"] = \"powerDetected\";\n    ScryptedInterfaceProperty[\"audioDetected\"] = \"audioDetected\";\n    ScryptedInterfaceProperty[\"motionDetected\"] = \"motionDetected\";\n    ScryptedInterfaceProperty[\"ambientLight\"] = \"ambientLight\";\n    ScryptedInterfaceProperty[\"occupied\"] = \"occupied\";\n    ScryptedInterfaceProperty[\"flooded\"] = \"flooded\";\n    ScryptedInterfaceProperty[\"ultraviolet\"] = \"ultraviolet\";\n    ScryptedInterfaceProperty[\"luminance\"] = \"luminance\";\n    ScryptedInterfaceProperty[\"position\"] = \"position\";\n    ScryptedInterfaceProperty[\"securitySystemState\"] = \"securitySystemState\";\n    ScryptedInterfaceProperty[\"pm10Density\"] = \"pm10Density\";\n    ScryptedInterfaceProperty[\"pm25Density\"] = \"pm25Density\";\n    ScryptedInterfaceProperty[\"vocDensity\"] = \"vocDensity\";\n    ScryptedInterfaceProperty[\"noxDensity\"] = \"noxDensity\";\n    ScryptedInterfaceProperty[\"co2ppm\"] = \"co2ppm\";\n    ScryptedInterfaceProperty[\"airQuality\"] = \"airQuality\";\n    ScryptedInterfaceProperty[\"humiditySetting\"] = \"humiditySetting\";\n    ScryptedInterfaceProperty[\"fan\"] = \"fan\";\n    ScryptedInterfaceProperty[\"applicationInfo\"] = \"applicationInfo\";\n})(ScryptedInterfaceProperty = exports.ScryptedInterfaceProperty || (exports.ScryptedInterfaceProperty = {}));\nvar ScryptedInterfaceMethod;\n(function (ScryptedInterfaceMethod) {\n    ScryptedInterfaceMethod[\"listen\"] = \"listen\";\n    ScryptedInterfaceMethod[\"probe\"] = \"probe\";\n    ScryptedInterfaceMethod[\"setMixins\"] = \"setMixins\";\n    ScryptedInterfaceMethod[\"setName\"] = \"setName\";\n    ScryptedInterfaceMethod[\"setRoom\"] = \"setRoom\";\n    ScryptedInterfaceMethod[\"setType\"] = \"setType\";\n    ScryptedInterfaceMethod[\"getPluginJson\"] = \"getPluginJson\";\n    ScryptedInterfaceMethod[\"turnOff\"] = \"turnOff\";\n    ScryptedInterfaceMethod[\"turnOn\"] = \"turnOn\";\n    ScryptedInterfaceMethod[\"setBrightness\"] = \"setBrightness\";\n    ScryptedInterfaceMethod[\"getTemperatureMaxK\"] = \"getTemperatureMaxK\";\n    ScryptedInterfaceMethod[\"getTemperatureMinK\"] = \"getTemperatureMinK\";\n    ScryptedInterfaceMethod[\"setColorTemperature\"] = \"setColorTemperature\";\n    ScryptedInterfaceMethod[\"setRgb\"] = \"setRgb\";\n    ScryptedInterfaceMethod[\"setHsv\"] = \"setHsv\";\n    ScryptedInterfaceMethod[\"sendNotification\"] = \"sendNotification\";\n    ScryptedInterfaceMethod[\"start\"] = \"start\";\n    ScryptedInterfaceMethod[\"stop\"] = \"stop\";\n    ScryptedInterfaceMethod[\"pause\"] = \"pause\";\n    ScryptedInterfaceMethod[\"resume\"] = \"resume\";\n    ScryptedInterfaceMethod[\"dock\"] = \"dock\";\n    ScryptedInterfaceMethod[\"setTemperature\"] = \"setTemperature\";\n    ScryptedInterfaceMethod[\"setThermostatMode\"] = \"setThermostatMode\";\n    ScryptedInterfaceMethod[\"setThermostatSetpoint\"] = \"setThermostatSetpoint\";\n    ScryptedInterfaceMethod[\"setThermostatSetpointHigh\"] = \"setThermostatSetpointHigh\";\n    ScryptedInterfaceMethod[\"setThermostatSetpointLow\"] = \"setThermostatSetpointLow\";\n    ScryptedInterfaceMethod[\"setTemperatureUnit\"] = \"setTemperatureUnit\";\n    ScryptedInterfaceMethod[\"getPictureOptions\"] = \"getPictureOptions\";\n    ScryptedInterfaceMethod[\"takePicture\"] = \"takePicture\";\n    ScryptedInterfaceMethod[\"getAudioStream\"] = \"getAudioStream\";\n    ScryptedInterfaceMethod[\"startDisplay\"] = \"startDisplay\";\n    ScryptedInterfaceMethod[\"stopDisplay\"] = \"stopDisplay\";\n    ScryptedInterfaceMethod[\"getVideoStream\"] = \"getVideoStream\";\n    ScryptedInterfaceMethod[\"getVideoStreamOptions\"] = \"getVideoStreamOptions\";\n    ScryptedInterfaceMethod[\"getRecordingStream\"] = \"getRecordingStream\";\n    ScryptedInterfaceMethod[\"getRecordingStreamCurrentTime\"] = \"getRecordingStreamCurrentTime\";\n    ScryptedInterfaceMethod[\"getRecordingStreamOptions\"] = \"getRecordingStreamOptions\";\n    ScryptedInterfaceMethod[\"getRecordingStreamThumbnail\"] = \"getRecordingStreamThumbnail\";\n    ScryptedInterfaceMethod[\"ptzCommand\"] = \"ptzCommand\";\n    ScryptedInterfaceMethod[\"getRecordedEvents\"] = \"getRecordedEvents\";\n    ScryptedInterfaceMethod[\"getVideoClip\"] = \"getVideoClip\";\n    ScryptedInterfaceMethod[\"getVideoClipThumbnail\"] = \"getVideoClipThumbnail\";\n    ScryptedInterfaceMethod[\"getVideoClips\"] = \"getVideoClips\";\n    ScryptedInterfaceMethod[\"removeVideoClips\"] = \"removeVideoClips\";\n    ScryptedInterfaceMethod[\"setVideoStreamOptions\"] = \"setVideoStreamOptions\";\n    ScryptedInterfaceMethod[\"startIntercom\"] = \"startIntercom\";\n    ScryptedInterfaceMethod[\"stopIntercom\"] = \"stopIntercom\";\n    ScryptedInterfaceMethod[\"lock\"] = \"lock\";\n    ScryptedInterfaceMethod[\"unlock\"] = \"unlock\";\n    ScryptedInterfaceMethod[\"addPassword\"] = \"addPassword\";\n    ScryptedInterfaceMethod[\"getPasswords\"] = \"getPasswords\";\n    ScryptedInterfaceMethod[\"removePassword\"] = \"removePassword\";\n    ScryptedInterfaceMethod[\"activate\"] = \"activate\";\n    ScryptedInterfaceMethod[\"deactivate\"] = \"deactivate\";\n    ScryptedInterfaceMethod[\"isReversible\"] = \"isReversible\";\n    ScryptedInterfaceMethod[\"closeEntry\"] = \"closeEntry\";\n    ScryptedInterfaceMethod[\"openEntry\"] = \"openEntry\";\n    ScryptedInterfaceMethod[\"getDevice\"] = \"getDevice\";\n    ScryptedInterfaceMethod[\"releaseDevice\"] = \"releaseDevice\";\n    ScryptedInterfaceMethod[\"adoptDevice\"] = \"adoptDevice\";\n    ScryptedInterfaceMethod[\"discoverDevices\"] = \"discoverDevices\";\n    ScryptedInterfaceMethod[\"createDevice\"] = \"createDevice\";\n    ScryptedInterfaceMethod[\"getCreateDeviceSettings\"] = \"getCreateDeviceSettings\";\n    ScryptedInterfaceMethod[\"getRefreshFrequency\"] = \"getRefreshFrequency\";\n    ScryptedInterfaceMethod[\"refresh\"] = \"refresh\";\n    ScryptedInterfaceMethod[\"getMediaStatus\"] = \"getMediaStatus\";\n    ScryptedInterfaceMethod[\"load\"] = \"load\";\n    ScryptedInterfaceMethod[\"seek\"] = \"seek\";\n    ScryptedInterfaceMethod[\"skipNext\"] = \"skipNext\";\n    ScryptedInterfaceMethod[\"skipPrevious\"] = \"skipPrevious\";\n    ScryptedInterfaceMethod[\"convert\"] = \"convert\";\n    ScryptedInterfaceMethod[\"getSettings\"] = \"getSettings\";\n    ScryptedInterfaceMethod[\"putSetting\"] = \"putSetting\";\n    ScryptedInterfaceMethod[\"armSecuritySystem\"] = \"armSecuritySystem\";\n    ScryptedInterfaceMethod[\"disarmSecuritySystem\"] = \"disarmSecuritySystem\";\n    ScryptedInterfaceMethod[\"getReadmeMarkdown\"] = \"getReadmeMarkdown\";\n    ScryptedInterfaceMethod[\"getOauthUrl\"] = \"getOauthUrl\";\n    ScryptedInterfaceMethod[\"onOauthCallback\"] = \"onOauthCallback\";\n    ScryptedInterfaceMethod[\"canMixin\"] = \"canMixin\";\n    ScryptedInterfaceMethod[\"getMixin\"] = \"getMixin\";\n    ScryptedInterfaceMethod[\"releaseMixin\"] = \"releaseMixin\";\n    ScryptedInterfaceMethod[\"onRequest\"] = \"onRequest\";\n    ScryptedInterfaceMethod[\"onConnection\"] = \"onConnection\";\n    ScryptedInterfaceMethod[\"onPush\"] = \"onPush\";\n    ScryptedInterfaceMethod[\"run\"] = \"run\";\n    ScryptedInterfaceMethod[\"eval\"] = \"eval\";\n    ScryptedInterfaceMethod[\"loadScripts\"] = \"loadScripts\";\n    ScryptedInterfaceMethod[\"saveScript\"] = \"saveScript\";\n    ScryptedInterfaceMethod[\"trackObjects\"] = \"trackObjects\";\n    ScryptedInterfaceMethod[\"getDetectionInput\"] = \"getDetectionInput\";\n    ScryptedInterfaceMethod[\"getObjectTypes\"] = \"getObjectTypes\";\n    ScryptedInterfaceMethod[\"detectObjects\"] = \"detectObjects\";\n    ScryptedInterfaceMethod[\"generateObjectDetections\"] = \"generateObjectDetections\";\n    ScryptedInterfaceMethod[\"getDetectionModel\"] = \"getDetectionModel\";\n    ScryptedInterfaceMethod[\"setHumidity\"] = \"setHumidity\";\n    ScryptedInterfaceMethod[\"setFan\"] = \"setFan\";\n    ScryptedInterfaceMethod[\"startRTCSignalingSession\"] = \"startRTCSignalingSession\";\n    ScryptedInterfaceMethod[\"createRTCSignalingSession\"] = \"createRTCSignalingSession\";\n    ScryptedInterfaceMethod[\"getScryptedUserAccessControl\"] = \"getScryptedUserAccessControl\";\n    ScryptedInterfaceMethod[\"generateVideoFrames\"] = \"generateVideoFrames\";\n})(ScryptedInterfaceMethod = exports.ScryptedInterfaceMethod || (exports.ScryptedInterfaceMethod = {}));\nexports.ScryptedInterfaceDescriptors = {\n    ScryptedDevice: {\n        name: 'ScryptedDevice',\n        methods: [\n            'listen',\n            'probe',\n            'setMixins',\n            'setName',\n            'setRoom',\n            'setType'\n        ],\n        properties: [\n            'id',\n            'info',\n            'interfaces',\n            'mixins',\n            'name',\n            'nativeId',\n            'pluginId',\n            'providedInterfaces',\n            'providedName',\n            'providedRoom',\n            'providedType',\n            'providerId',\n            'room',\n            'type'\n        ]\n    },\n    ScryptedPlugin: {\n        name: 'ScryptedPlugin',\n        methods: [\n            'getPluginJson'\n        ],\n        properties: []\n    },\n    OnOff: {\n        name: 'OnOff',\n        methods: [\n            'turnOff',\n            'turnOn'\n        ],\n        properties: [\n            'on'\n        ]\n    },\n    Brightness: {\n        name: 'Brightness',\n        methods: [\n            'setBrightness'\n        ],\n        properties: [\n            'brightness'\n        ]\n    },\n    ColorSettingTemperature: {\n        name: 'ColorSettingTemperature',\n        methods: [\n            'getTemperatureMaxK',\n            'getTemperatureMinK',\n            'setColorTemperature'\n        ],\n        properties: [\n            'colorTemperature'\n        ]\n    },\n    ColorSettingRgb: {\n        name: 'ColorSettingRgb',\n        methods: [\n            'setRgb'\n        ],\n        properties: [\n            'rgb'\n        ]\n    },\n    ColorSettingHsv: {\n        name: 'ColorSettingHsv',\n        methods: [\n            'setHsv'\n        ],\n        properties: [\n            'hsv'\n        ]\n    },\n    Notifier: {\n        name: 'Notifier',\n        methods: [\n            'sendNotification'\n        ],\n        properties: []\n    },\n    StartStop: {\n        name: 'StartStop',\n        methods: [\n            'start',\n            'stop'\n        ],\n        properties: [\n            'running'\n        ]\n    },\n    Pause: {\n        name: 'Pause',\n        methods: [\n            'pause',\n            'resume'\n        ],\n        properties: [\n            'paused'\n        ]\n    },\n    Dock: {\n        name: 'Dock',\n        methods: [\n            'dock'\n        ],\n        properties: [\n            'docked'\n        ]\n    },\n    TemperatureSetting: {\n        name: 'TemperatureSetting',\n        methods: [\n            'setTemperature',\n            'setThermostatMode',\n            'setThermostatSetpoint',\n            'setThermostatSetpointHigh',\n            'setThermostatSetpointLow'\n        ],\n        properties: [\n            'temperatureSetting',\n            'thermostatActiveMode',\n            'thermostatAvailableModes',\n            'thermostatMode',\n            'thermostatSetpoint',\n            'thermostatSetpointHigh',\n            'thermostatSetpointLow'\n        ]\n    },\n    Thermometer: {\n        name: 'Thermometer',\n        methods: [\n            'setTemperatureUnit'\n        ],\n        properties: [\n            'temperature',\n            'temperatureUnit'\n        ]\n    },\n    HumiditySensor: {\n        name: 'HumiditySensor',\n        methods: [],\n        properties: [\n            'humidity'\n        ]\n    },\n    Camera: {\n        name: 'Camera',\n        methods: [\n            'getPictureOptions',\n            'takePicture'\n        ],\n        properties: []\n    },\n    Microphone: {\n        name: 'Microphone',\n        methods: [\n            'getAudioStream'\n        ],\n        properties: []\n    },\n    Display: {\n        name: 'Display',\n        methods: [\n            'startDisplay',\n            'stopDisplay'\n        ],\n        properties: []\n    },\n    VideoCamera: {\n        name: 'VideoCamera',\n        methods: [\n            'getVideoStream',\n            'getVideoStreamOptions'\n        ],\n        properties: []\n    },\n    VideoRecorder: {\n        name: 'VideoRecorder',\n        methods: [\n            'getRecordingStream',\n            'getRecordingStreamCurrentTime',\n            'getRecordingStreamOptions',\n            'getRecordingStreamThumbnail'\n        ],\n        properties: []\n    },\n    PanTiltZoom: {\n        name: 'PanTiltZoom',\n        methods: [\n            'ptzCommand'\n        ],\n        properties: [\n            'ptzCapabilities'\n        ]\n    },\n    EventRecorder: {\n        name: 'EventRecorder',\n        methods: [\n            'getRecordedEvents'\n        ],\n        properties: []\n    },\n    VideoClips: {\n        name: 'VideoClips',\n        methods: [\n            'getVideoClip',\n            'getVideoClipThumbnail',\n            'getVideoClips',\n            'removeVideoClips'\n        ],\n        properties: []\n    },\n    VideoCameraConfiguration: {\n        name: 'VideoCameraConfiguration',\n        methods: [\n            'setVideoStreamOptions'\n        ],\n        properties: []\n    },\n    Intercom: {\n        name: 'Intercom',\n        methods: [\n            'startIntercom',\n            'stopIntercom'\n        ],\n        properties: []\n    },\n    Lock: {\n        name: 'Lock',\n        methods: [\n            'lock',\n            'unlock'\n        ],\n        properties: [\n            'lockState'\n        ]\n    },\n    PasswordStore: {\n        name: 'PasswordStore',\n        methods: [\n            'addPassword',\n            'getPasswords',\n            'removePassword'\n        ],\n        properties: []\n    },\n    Scene: {\n        name: 'Scene',\n        methods: [\n            'activate',\n            'deactivate',\n            'isReversible'\n        ],\n        properties: []\n    },\n    Entry: {\n        name: 'Entry',\n        methods: [\n            'closeEntry',\n            'openEntry'\n        ],\n        properties: []\n    },\n    EntrySensor: {\n        name: 'EntrySensor',\n        methods: [],\n        properties: [\n            'entryOpen'\n        ]\n    },\n    DeviceProvider: {\n        name: 'DeviceProvider',\n        methods: [\n            'getDevice',\n            'releaseDevice'\n        ],\n        properties: []\n    },\n    DeviceDiscovery: {\n        name: 'DeviceDiscovery',\n        methods: [\n            'adoptDevice',\n            'discoverDevices'\n        ],\n        properties: []\n    },\n    DeviceCreator: {\n        name: 'DeviceCreator',\n        methods: [\n            'createDevice',\n            'getCreateDeviceSettings'\n        ],\n        properties: []\n    },\n    Battery: {\n        name: 'Battery',\n        methods: [],\n        properties: [\n            'batteryLevel'\n        ]\n    },\n    Charger: {\n        name: 'Charger',\n        methods: [],\n        properties: [\n            'chargeState'\n        ]\n    },\n    Refresh: {\n        name: 'Refresh',\n        methods: [\n            'getRefreshFrequency',\n            'refresh'\n        ],\n        properties: []\n    },\n    MediaPlayer: {\n        name: 'MediaPlayer',\n        methods: [\n            'getMediaStatus',\n            'load',\n            'seek',\n            'skipNext',\n            'skipPrevious'\n        ],\n        properties: []\n    },\n    Online: {\n        name: 'Online',\n        methods: [],\n        properties: [\n            'online'\n        ]\n    },\n    BufferConverter: {\n        name: 'BufferConverter',\n        methods: [\n            'convert'\n        ],\n        properties: [\n            'fromMimeType',\n            'toMimeType'\n        ]\n    },\n    Settings: {\n        name: 'Settings',\n        methods: [\n            'getSettings',\n            'putSetting'\n        ],\n        properties: []\n    },\n    BinarySensor: {\n        name: 'BinarySensor',\n        methods: [],\n        properties: [\n            'binaryState'\n        ]\n    },\n    TamperSensor: {\n        name: 'TamperSensor',\n        methods: [],\n        properties: [\n            'tampered'\n        ]\n    },\n    PowerSensor: {\n        name: 'PowerSensor',\n        methods: [],\n        properties: [\n            'powerDetected'\n        ]\n    },\n    AudioSensor: {\n        name: 'AudioSensor',\n        methods: [],\n        properties: [\n            'audioDetected'\n        ]\n    },\n    MotionSensor: {\n        name: 'MotionSensor',\n        methods: [],\n        properties: [\n            'motionDetected'\n        ]\n    },\n    AmbientLightSensor: {\n        name: 'AmbientLightSensor',\n        methods: [],\n        properties: [\n            'ambientLight'\n        ]\n    },\n    OccupancySensor: {\n        name: 'OccupancySensor',\n        methods: [],\n        properties: [\n            'occupied'\n        ]\n    },\n    FloodSensor: {\n        name: 'FloodSensor',\n        methods: [],\n        properties: [\n            'flooded'\n        ]\n    },\n    UltravioletSensor: {\n        name: 'UltravioletSensor',\n        methods: [],\n        properties: [\n            'ultraviolet'\n        ]\n    },\n    LuminanceSensor: {\n        name: 'LuminanceSensor',\n        methods: [],\n        properties: [\n            'luminance'\n        ]\n    },\n    PositionSensor: {\n        name: 'PositionSensor',\n        methods: [],\n        properties: [\n            'position'\n        ]\n    },\n    SecuritySystem: {\n        name: 'SecuritySystem',\n        methods: [\n            'armSecuritySystem',\n            'disarmSecuritySystem'\n        ],\n        properties: [\n            'securitySystemState'\n        ]\n    },\n    PM10Sensor: {\n        name: 'PM10Sensor',\n        methods: [],\n        properties: [\n            'pm10Density'\n        ]\n    },\n    PM25Sensor: {\n        name: 'PM25Sensor',\n        methods: [],\n        properties: [\n            'pm25Density'\n        ]\n    },\n    VOCSensor: {\n        name: 'VOCSensor',\n        methods: [],\n        properties: [\n            'vocDensity'\n        ]\n    },\n    NOXSensor: {\n        name: 'NOXSensor',\n        methods: [],\n        properties: [\n            'noxDensity'\n        ]\n    },\n    CO2Sensor: {\n        name: 'CO2Sensor',\n        methods: [],\n        properties: [\n            'co2ppm'\n        ]\n    },\n    AirQualitySensor: {\n        name: 'AirQualitySensor',\n        methods: [],\n        properties: [\n            'airQuality'\n        ]\n    },\n    Readme: {\n        name: 'Readme',\n        methods: [\n            'getReadmeMarkdown'\n        ],\n        properties: []\n    },\n    OauthClient: {\n        name: 'OauthClient',\n        methods: [\n            'getOauthUrl',\n            'onOauthCallback'\n        ],\n        properties: []\n    },\n    MixinProvider: {\n        name: 'MixinProvider',\n        methods: [\n            'canMixin',\n            'getMixin',\n            'releaseMixin'\n        ],\n        properties: []\n    },\n    HttpRequestHandler: {\n        name: 'HttpRequestHandler',\n        methods: [\n            'onRequest'\n        ],\n        properties: []\n    },\n    EngineIOHandler: {\n        name: 'EngineIOHandler',\n        methods: [\n            'onConnection'\n        ],\n        properties: []\n    },\n    PushHandler: {\n        name: 'PushHandler',\n        methods: [\n            'onPush'\n        ],\n        properties: []\n    },\n    Program: {\n        name: 'Program',\n        methods: [\n            'run'\n        ],\n        properties: []\n    },\n    Scriptable: {\n        name: 'Scriptable',\n        methods: [\n            'eval',\n            'loadScripts',\n            'saveScript'\n        ],\n        properties: []\n    },\n    ObjectTracker: {\n        name: 'ObjectTracker',\n        methods: [\n            'trackObjects'\n        ],\n        properties: []\n    },\n    ObjectDetector: {\n        name: 'ObjectDetector',\n        methods: [\n            'getDetectionInput',\n            'getObjectTypes'\n        ],\n        properties: []\n    },\n    ObjectDetection: {\n        name: 'ObjectDetection',\n        methods: [\n            'detectObjects',\n            'generateObjectDetections',\n            'getDetectionModel'\n        ],\n        properties: []\n    },\n    HumiditySetting: {\n        name: 'HumiditySetting',\n        methods: [\n            'setHumidity'\n        ],\n        properties: [\n            'humiditySetting'\n        ]\n    },\n    Fan: {\n        name: 'Fan',\n        methods: [\n            'setFan'\n        ],\n        properties: [\n            'fan'\n        ]\n    },\n    RTCSignalingChannel: {\n        name: 'RTCSignalingChannel',\n        methods: [\n            'startRTCSignalingSession'\n        ],\n        properties: []\n    },\n    RTCSignalingClient: {\n        name: 'RTCSignalingClient',\n        methods: [\n            'createRTCSignalingSession'\n        ],\n        properties: []\n    },\n    LauncherApplication: {\n        name: 'LauncherApplication',\n        methods: [],\n        properties: [\n            'applicationInfo'\n        ]\n    },\n    ScryptedUser: {\n        name: 'ScryptedUser',\n        methods: [\n            'getScryptedUserAccessControl'\n        ],\n        properties: []\n    },\n    VideoFrameGenerator: {\n        name: 'VideoFrameGenerator',\n        methods: [\n            'generateVideoFrames'\n        ],\n        properties: []\n    }\n};\n/**\n * @category Core Reference\n */\nvar ScryptedDeviceType;\n(function (ScryptedDeviceType) {\n    ScryptedDeviceType[\"Builtin\"] = \"Builtin\";\n    ScryptedDeviceType[\"Camera\"] = \"Camera\";\n    ScryptedDeviceType[\"Fan\"] = \"Fan\";\n    ScryptedDeviceType[\"Light\"] = \"Light\";\n    ScryptedDeviceType[\"Switch\"] = \"Switch\";\n    ScryptedDeviceType[\"Outlet\"] = \"Outlet\";\n    ScryptedDeviceType[\"Sensor\"] = \"Sensor\";\n    ScryptedDeviceType[\"Scene\"] = \"Scene\";\n    ScryptedDeviceType[\"Program\"] = \"Program\";\n    ScryptedDeviceType[\"Automation\"] = \"Automation\";\n    ScryptedDeviceType[\"Vacuum\"] = \"Vacuum\";\n    ScryptedDeviceType[\"Notifier\"] = \"Notifier\";\n    ScryptedDeviceType[\"Thermostat\"] = \"Thermostat\";\n    ScryptedDeviceType[\"Lock\"] = \"Lock\";\n    ScryptedDeviceType[\"PasswordControl\"] = \"PasswordControl\";\n    /**\n     * Displays have audio and video output.\n     */\n    ScryptedDeviceType[\"Display\"] = \"Display\";\n    /**\n     * Smart Displays have two way audio and video.\n     */\n    ScryptedDeviceType[\"SmartDisplay\"] = \"SmartDisplay\";\n    ScryptedDeviceType[\"Speaker\"] = \"Speaker\";\n    /**\n     * Smart Speakers have two way audio.\n     */\n    ScryptedDeviceType[\"SmartSpeaker\"] = \"SmartSpeaker\";\n    ScryptedDeviceType[\"Event\"] = \"Event\";\n    ScryptedDeviceType[\"Entry\"] = \"Entry\";\n    ScryptedDeviceType[\"Garage\"] = \"Garage\";\n    ScryptedDeviceType[\"DeviceProvider\"] = \"DeviceProvider\";\n    ScryptedDeviceType[\"DataSource\"] = \"DataSource\";\n    ScryptedDeviceType[\"API\"] = \"API\";\n    ScryptedDeviceType[\"Doorbell\"] = \"Doorbell\";\n    ScryptedDeviceType[\"Irrigation\"] = \"Irrigation\";\n    ScryptedDeviceType[\"Valve\"] = \"Valve\";\n    ScryptedDeviceType[\"Person\"] = \"Person\";\n    ScryptedDeviceType[\"SecuritySystem\"] = \"SecuritySystem\";\n    ScryptedDeviceType[\"WindowCovering\"] = \"WindowCovering\";\n    ScryptedDeviceType[\"Siren\"] = \"Siren\";\n    ScryptedDeviceType[\"Unknown\"] = \"Unknown\";\n})(ScryptedDeviceType = exports.ScryptedDeviceType || (exports.ScryptedDeviceType = {}));\nvar HumidityMode;\n(function (HumidityMode) {\n    HumidityMode[\"Humidify\"] = \"Humidify\";\n    HumidityMode[\"Dehumidify\"] = \"Dehumidify\";\n    HumidityMode[\"Auto\"] = \"Auto\";\n    HumidityMode[\"Off\"] = \"Off\";\n})(HumidityMode = exports.HumidityMode || (exports.HumidityMode = {}));\nvar FanMode;\n(function (FanMode) {\n    FanMode[\"Auto\"] = \"Auto\";\n    FanMode[\"Manual\"] = \"Manual\";\n})(FanMode = exports.FanMode || (exports.FanMode = {}));\nvar TemperatureUnit;\n(function (TemperatureUnit) {\n    TemperatureUnit[\"C\"] = \"C\";\n    TemperatureUnit[\"F\"] = \"F\";\n})(TemperatureUnit = exports.TemperatureUnit || (exports.TemperatureUnit = {}));\nvar ThermostatMode;\n(function (ThermostatMode) {\n    ThermostatMode[\"Off\"] = \"Off\";\n    ThermostatMode[\"Cool\"] = \"Cool\";\n    ThermostatMode[\"Heat\"] = \"Heat\";\n    ThermostatMode[\"HeatCool\"] = \"HeatCool\";\n    ThermostatMode[\"Auto\"] = \"Auto\";\n    ThermostatMode[\"FanOnly\"] = \"FanOnly\";\n    ThermostatMode[\"Purifier\"] = \"Purifier\";\n    ThermostatMode[\"Eco\"] = \"Eco\";\n    ThermostatMode[\"Dry\"] = \"Dry\";\n    ThermostatMode[\"On\"] = \"On\";\n})(ThermostatMode = exports.ThermostatMode || (exports.ThermostatMode = {}));\nvar PanTiltZoomMovement;\n(function (PanTiltZoomMovement) {\n    PanTiltZoomMovement[\"Absolute\"] = \"Absolute\";\n    PanTiltZoomMovement[\"Relative\"] = \"Relative\";\n})(PanTiltZoomMovement = exports.PanTiltZoomMovement || (exports.PanTiltZoomMovement = {}));\nvar LockState;\n(function (LockState) {\n    LockState[\"Locked\"] = \"Locked\";\n    LockState[\"Unlocked\"] = \"Unlocked\";\n    LockState[\"Jammed\"] = \"Jammed\";\n})(LockState = exports.LockState || (exports.LockState = {}));\nvar ChargeState;\n(function (ChargeState) {\n    ChargeState[\"Trickle\"] = \"trickle\";\n    ChargeState[\"Charging\"] = \"charging\";\n    ChargeState[\"NotCharging\"] = \"not-charging\";\n})(ChargeState = exports.ChargeState || (exports.ChargeState = {}));\nvar AirQuality;\n(function (AirQuality) {\n    AirQuality[\"Unknown\"] = \"Unknown\";\n    AirQuality[\"Excellent\"] = \"Excellent\";\n    AirQuality[\"Good\"] = \"Good\";\n    AirQuality[\"Fair\"] = \"Fair\";\n    AirQuality[\"Inferior\"] = \"Inferior\";\n    AirQuality[\"Poor\"] = \"Poor\";\n})(AirQuality = exports.AirQuality || (exports.AirQuality = {}));\nvar SecuritySystemMode;\n(function (SecuritySystemMode) {\n    SecuritySystemMode[\"Disarmed\"] = \"Disarmed\";\n    SecuritySystemMode[\"HomeArmed\"] = \"HomeArmed\";\n    SecuritySystemMode[\"AwayArmed\"] = \"AwayArmed\";\n    SecuritySystemMode[\"NightArmed\"] = \"NightArmed\";\n})(SecuritySystemMode = exports.SecuritySystemMode || (exports.SecuritySystemMode = {}));\nvar SecuritySystemObstruction;\n(function (SecuritySystemObstruction) {\n    SecuritySystemObstruction[\"Sensor\"] = \"Sensor\";\n    SecuritySystemObstruction[\"Occupied\"] = \"Occupied\";\n    SecuritySystemObstruction[\"Time\"] = \"Time\";\n    SecuritySystemObstruction[\"Error\"] = \"Error\";\n})(SecuritySystemObstruction = exports.SecuritySystemObstruction || (exports.SecuritySystemObstruction = {}));\nvar MediaPlayerState;\n(function (MediaPlayerState) {\n    MediaPlayerState[\"Idle\"] = \"Idle\";\n    MediaPlayerState[\"Playing\"] = \"Playing\";\n    MediaPlayerState[\"Paused\"] = \"Paused\";\n    MediaPlayerState[\"Buffering\"] = \"Buffering\";\n})(MediaPlayerState = exports.MediaPlayerState || (exports.MediaPlayerState = {}));\nvar ScryptedInterface;\n(function (ScryptedInterface) {\n    ScryptedInterface[\"ScryptedDevice\"] = \"ScryptedDevice\";\n    ScryptedInterface[\"ScryptedPlugin\"] = \"ScryptedPlugin\";\n    ScryptedInterface[\"OnOff\"] = \"OnOff\";\n    ScryptedInterface[\"Brightness\"] = \"Brightness\";\n    ScryptedInterface[\"ColorSettingTemperature\"] = \"ColorSettingTemperature\";\n    ScryptedInterface[\"ColorSettingRgb\"] = \"ColorSettingRgb\";\n    ScryptedInterface[\"ColorSettingHsv\"] = \"ColorSettingHsv\";\n    ScryptedInterface[\"Notifier\"] = \"Notifier\";\n    ScryptedInterface[\"StartStop\"] = \"StartStop\";\n    ScryptedInterface[\"Pause\"] = \"Pause\";\n    ScryptedInterface[\"Dock\"] = \"Dock\";\n    ScryptedInterface[\"TemperatureSetting\"] = \"TemperatureSetting\";\n    ScryptedInterface[\"Thermometer\"] = \"Thermometer\";\n    ScryptedInterface[\"HumiditySensor\"] = \"HumiditySensor\";\n    ScryptedInterface[\"Camera\"] = \"Camera\";\n    ScryptedInterface[\"Microphone\"] = \"Microphone\";\n    ScryptedInterface[\"Display\"] = \"Display\";\n    ScryptedInterface[\"VideoCamera\"] = \"VideoCamera\";\n    ScryptedInterface[\"VideoRecorder\"] = \"VideoRecorder\";\n    ScryptedInterface[\"PanTiltZoom\"] = \"PanTiltZoom\";\n    ScryptedInterface[\"EventRecorder\"] = \"EventRecorder\";\n    ScryptedInterface[\"VideoClips\"] = \"VideoClips\";\n    ScryptedInterface[\"VideoCameraConfiguration\"] = \"VideoCameraConfiguration\";\n    ScryptedInterface[\"Intercom\"] = \"Intercom\";\n    ScryptedInterface[\"Lock\"] = \"Lock\";\n    ScryptedInterface[\"PasswordStore\"] = \"PasswordStore\";\n    ScryptedInterface[\"Scene\"] = \"Scene\";\n    ScryptedInterface[\"Entry\"] = \"Entry\";\n    ScryptedInterface[\"EntrySensor\"] = \"EntrySensor\";\n    ScryptedInterface[\"DeviceProvider\"] = \"DeviceProvider\";\n    ScryptedInterface[\"DeviceDiscovery\"] = \"DeviceDiscovery\";\n    ScryptedInterface[\"DeviceCreator\"] = \"DeviceCreator\";\n    ScryptedInterface[\"Battery\"] = \"Battery\";\n    ScryptedInterface[\"Charger\"] = \"Charger\";\n    ScryptedInterface[\"Refresh\"] = \"Refresh\";\n    ScryptedInterface[\"MediaPlayer\"] = \"MediaPlayer\";\n    ScryptedInterface[\"Online\"] = \"Online\";\n    ScryptedInterface[\"BufferConverter\"] = \"BufferConverter\";\n    ScryptedInterface[\"Settings\"] = \"Settings\";\n    ScryptedInterface[\"BinarySensor\"] = \"BinarySensor\";\n    ScryptedInterface[\"TamperSensor\"] = \"TamperSensor\";\n    ScryptedInterface[\"PowerSensor\"] = \"PowerSensor\";\n    ScryptedInterface[\"AudioSensor\"] = \"AudioSensor\";\n    ScryptedInterface[\"MotionSensor\"] = \"MotionSensor\";\n    ScryptedInterface[\"AmbientLightSensor\"] = \"AmbientLightSensor\";\n    ScryptedInterface[\"OccupancySensor\"] = \"OccupancySensor\";\n    ScryptedInterface[\"FloodSensor\"] = \"FloodSensor\";\n    ScryptedInterface[\"UltravioletSensor\"] = \"UltravioletSensor\";\n    ScryptedInterface[\"LuminanceSensor\"] = \"LuminanceSensor\";\n    ScryptedInterface[\"PositionSensor\"] = \"PositionSensor\";\n    ScryptedInterface[\"SecuritySystem\"] = \"SecuritySystem\";\n    ScryptedInterface[\"PM10Sensor\"] = \"PM10Sensor\";\n    ScryptedInterface[\"PM25Sensor\"] = \"PM25Sensor\";\n    ScryptedInterface[\"VOCSensor\"] = \"VOCSensor\";\n    ScryptedInterface[\"NOXSensor\"] = \"NOXSensor\";\n    ScryptedInterface[\"CO2Sensor\"] = \"CO2Sensor\";\n    ScryptedInterface[\"AirQualitySensor\"] = \"AirQualitySensor\";\n    ScryptedInterface[\"Readme\"] = \"Readme\";\n    ScryptedInterface[\"OauthClient\"] = \"OauthClient\";\n    ScryptedInterface[\"MixinProvider\"] = \"MixinProvider\";\n    ScryptedInterface[\"HttpRequestHandler\"] = \"HttpRequestHandler\";\n    ScryptedInterface[\"EngineIOHandler\"] = \"EngineIOHandler\";\n    ScryptedInterface[\"PushHandler\"] = \"PushHandler\";\n    ScryptedInterface[\"Program\"] = \"Program\";\n    ScryptedInterface[\"Scriptable\"] = \"Scriptable\";\n    ScryptedInterface[\"ObjectTracker\"] = \"ObjectTracker\";\n    ScryptedInterface[\"ObjectDetector\"] = \"ObjectDetector\";\n    ScryptedInterface[\"ObjectDetection\"] = \"ObjectDetection\";\n    ScryptedInterface[\"HumiditySetting\"] = \"HumiditySetting\";\n    ScryptedInterface[\"Fan\"] = \"Fan\";\n    ScryptedInterface[\"RTCSignalingChannel\"] = \"RTCSignalingChannel\";\n    ScryptedInterface[\"RTCSignalingClient\"] = \"RTCSignalingClient\";\n    ScryptedInterface[\"LauncherApplication\"] = \"LauncherApplication\";\n    ScryptedInterface[\"ScryptedUser\"] = \"ScryptedUser\";\n    ScryptedInterface[\"VideoFrameGenerator\"] = \"VideoFrameGenerator\";\n})(ScryptedInterface = exports.ScryptedInterface || (exports.ScryptedInterface = {}));\nvar ScryptedMimeTypes;\n(function (ScryptedMimeTypes) {\n    ScryptedMimeTypes[\"Url\"] = \"text/x-uri\";\n    ScryptedMimeTypes[\"InsecureLocalUrl\"] = \"text/x-insecure-local-uri\";\n    ScryptedMimeTypes[\"LocalUrl\"] = \"text/x-local-uri\";\n    ScryptedMimeTypes[\"PushEndpoint\"] = \"text/x-push-endpoint\";\n    ScryptedMimeTypes[\"SchemePrefix\"] = \"x-scrypted/x-scrypted-scheme-\";\n    ScryptedMimeTypes[\"MediaStreamUrl\"] = \"text/x-media-url\";\n    ScryptedMimeTypes[\"MediaObject\"] = \"x-scrypted/x-scrypted-media-object\";\n    ScryptedMimeTypes[\"RequestMediaObject\"] = \"x-scrypted/x-scrypted-request-media-object\";\n    ScryptedMimeTypes[\"RequestMediaStream\"] = \"x-scrypted/x-scrypted-request-stream\";\n    ScryptedMimeTypes[\"MediaStreamFeedback\"] = \"x-scrypted/x-media-stream-feedback\";\n    ScryptedMimeTypes[\"FFmpegInput\"] = \"x-scrypted/x-ffmpeg-input\";\n    ScryptedMimeTypes[\"FFmpegTranscodeStream\"] = \"x-scrypted/x-ffmpeg-transcode-stream\";\n    ScryptedMimeTypes[\"RTCSignalingChannel\"] = \"x-scrypted/x-scrypted-rtc-signaling-channel\";\n    ScryptedMimeTypes[\"RTCSignalingSession\"] = \"x-scrypted/x-scrypted-rtc-signaling-session\";\n    ScryptedMimeTypes[\"RTCConnectionManagement\"] = \"x-scrypted/x-scrypted-rtc-connection-management\";\n    ScryptedMimeTypes[\"Image\"] = \"x-scrypted/x-scrypted-image\";\n})(ScryptedMimeTypes = exports.ScryptedMimeTypes || (exports.ScryptedMimeTypes = {}));\n//# sourceMappingURL=index.js.map","export default \"export interface ScriptDevice {\\n    /**\\n     * @deprecated Use the default export to specify the device handler.\\n     * @param handler \\n     */\\n    handle<T>(handler?: T & object): void;\\n    handleTypes(...interfaces: string[]): void;\\n}\\n\";","export default \"import type { ScriptDevice } from \\\"@scrypted/common/src/eval/monaco/script-device\\\";\\nimport type { ScryptedDeviceBase } from \\\"@scrypted/sdk\\\";\\n\\ndeclare const device: ScryptedDeviceBase & ScriptDevice;\\n\";","import type { TranspileOptions } from \"typescript\";\nimport sdk, { ScryptedDeviceBase, MixinDeviceBase, ScryptedInterface, ScryptedDeviceType } from \"@scrypted/sdk\";\nimport vm from \"vm\";\nimport fs from 'fs';\nimport { ScriptDevice } from \"./monaco/script-device\";\nimport { ScryptedInterfaceDescriptors } from \"@scrypted/sdk\";\nimport fetch from 'node-fetch-commonjs';\nimport { PluginAPIProxy } from '../../../server/src/plugin/plugin-api';\nimport { SystemManagerImpl } from '../../../server/src/plugin/system';\n\nconst { systemManager, deviceManager, mediaManager, endpointManager } = sdk;\n\nexport async function tsCompile(source: string, options: TranspileOptions = null): Promise<string> {\n    const ts = require(\"typescript\");\n    const { ScriptTarget } = ts;\n\n    // Default options -- you could also perform a merge, or use the project tsconfig.json\n    if (null === options) {\n        options = {\n            compilerOptions: {\n                target: ScriptTarget.ESNext,\n                module: ts.ModuleKind.CommonJS\n            }\n        };\n    }\n    return ts.transpileModule(source, options).outputText;\n}\n\nfunction getTypeDefs() {\n    const scryptedTypesDefs = fs.readFileSync('@types/sdk/types.d.ts').toString();\n    const scryptedIndexDefs = fs.readFileSync('@types/sdk/index.d.ts').toString();\n    return {\n        scryptedIndexDefs,\n        scryptedTypesDefs,\n    };\n}\n\nexport async function scryptedEval(device: ScryptedDeviceBase, script: string, extraLibs: { [lib: string]: string }, params: { [name: string]: any }) {\n    const libs = Object.assign({\n        types: getTypeDefs().scryptedTypesDefs,\n    }, extraLibs);\n    const allScripts = Object.values(libs).join('\\n').toString() + script;\n    let compiled: string;\n    const worker = sdk.fork<{\n        tsCompile: typeof tsCompile,\n    }>();\n    worker.worker.on('error', () => { })\n    try {\n        const result = await worker.result;\n        compiled = await result.tsCompile(allScripts);\n    }\n    catch (e) {\n        device.log.e('Error compiling typescript.');\n        device.console.error(e);\n        throw e;\n    }\n    finally {\n        worker.worker.terminate();\n    }\n\n    const smProxy = new SystemManagerImpl();\n    smProxy.state = systemManager.getSystemState();\n    const apiProxy = new PluginAPIProxy(sdk.pluginHostAPI);\n    smProxy.api = apiProxy;\n\n    const allParams = Object.assign({}, params, {\n        sdk,\n        fs: require('realfs'),\n        fetch,\n        ScryptedDeviceBase,\n        MixinDeviceBase,\n        systemManager: smProxy,\n        deviceManager,\n        endpointManager,\n        mediaManager,\n        log: device.log,\n        console: device.console,\n        localStorage: device.storage,\n        device,\n        exports: {} as any,\n        ScryptedInterface,\n        ScryptedDeviceType,\n        // @ts-expect-error\n        require: __non_webpack_require__,\n    });\n\n    const asyncWrappedCompiled = `return (async function() {\\n${compiled}\\n})`;\n    let asyncFunction: any;\n    try {\n        const functionGenerator = vm.compileFunction(asyncWrappedCompiled, Object.keys(allParams), {\n            filename: 'script.js',\n        });\n        asyncFunction = functionGenerator(...Object.values(allParams));\n    }\n    catch (e) {\n        device.log.e('Error evaluating javascript.');\n        device.console.error(e);\n        throw e;\n    }\n\n    try {\n        const value = await asyncFunction();\n        const defaultExport = allParams.exports.default;\n        return {\n            value,\n            defaultExport,\n            apiProxy,\n        };\n    }\n    catch (e) {\n        device.log.e('Error running script.');\n        device.console.error(e);\n        throw e;\n    }\n}\n\nexport function createMonacoEvalDefaults(extraLibs: { [lib: string]: string }) {\n    const bufferTypeDefs = fs.readFileSync('@types/node/buffer.d.ts').toString();\n\n    const safeLibs = {\n        bufferTypeDefs,\n    };\n\n    const libs = Object.assign(getTypeDefs(), extraLibs);\n\n    function monacoEvalDefaultsFunction(monaco: any, safeLibs: any, libs: any) {\n        monaco.languages.typescript.typescriptDefaults.setDiagnosticsOptions(\n            Object.assign(\n                {},\n                monaco.languages.typescript.typescriptDefaults.getDiagnosticsOptions(),\n                {\n                    diagnosticCodesToIgnore: [1108, 1375, 1378],\n                }\n            )\n        );\n\n        monaco.languages.typescript.typescriptDefaults.setCompilerOptions(\n            Object.assign(\n                {},\n                monaco.languages.typescript.typescriptDefaults.getCompilerOptions(),\n                {\n                    moduleResolution:\n                        monaco.languages.typescript.ModuleResolutionKind.NodeJs,\n                }\n            )\n        );\n\n        const catLibs = Object.values(libs).join('\\n');\n        const catlibsNoExport = Object.keys(libs).filter(lib => lib !== 'sdk')\n            .map(lib => libs[lib]).map(lib =>\n                lib.toString().replace(/export /g, '').replace(/import.*?/g, ''))\n            .join('\\n');\n        monaco.languages.typescript.typescriptDefaults.addExtraLib(`\n        ${catLibs}\n\n        declare global {\n            ${catlibsNoExport}\n\n            const log: Logger;\n\n            const deviceManager: DeviceManager;\n            const endpointManager: EndpointManager;\n            const mediaManager: MediaManager;\n            const systemManager: SystemManager;\n            const mqtt: MqttClient;\n            const device: ScryptedDeviceBase & { pathname : string };\n        }\n        `,\n\n            \"node_modules/@types/scrypted__sdk/types/index.d.ts\"\n        );\n\n        monaco.languages.typescript.typescriptDefaults.addExtraLib(\n            libs['sdk'],\n            \"node_modules/@types/scrypted__sdk/index.d.ts\"\n        );\n\n        monaco.languages.typescript.typescriptDefaults.addExtraLib(\n            safeLibs.bufferTypeDefs,\n            \"node_modules/@types/node/buffer.d.ts\"\n        );\n    }\n\n    return `(function() {\n    const safeLibs = ${JSON.stringify(safeLibs)};\n    const libs = ${JSON.stringify(libs)};\n\n    return (monaco) => {\n        (${monacoEvalDefaultsFunction})(monaco, safeLibs, libs);\n    }\n    })();\n    `;\n}\n\nexport interface ScriptDeviceImpl extends ScriptDevice {\n    mergeHandler(device: ScryptedDeviceBase): string[];\n}\n\nconst methodInterfaces = new Map<string, string>();\nfor (const desc of Object.values(ScryptedInterfaceDescriptors)) {\n    for (const method of desc.methods) {\n        methodInterfaces.set(method, desc.name);\n    }\n}\n\nexport function createScriptDevice(baseInterfaces: string[]): ScriptDeviceImpl {\n    let scriptHandler: any;\n    const allInterfaces = baseInterfaces.slice();\n\n    return {\n        handle: <T>(handler?: T & object) => {\n            scriptHandler = handler;\n        },\n        handleTypes: (...interfaces: ScryptedInterface[]) => {\n            allInterfaces.push(...interfaces);\n        },\n        mergeHandler: (device: ScryptedDeviceBase) => {\n            const handler = scriptHandler || {};\n            let keys: string[];\n            if (handler.constructor === Object)\n                keys = Object.keys(handler);\n            else\n                keys = Object.getOwnPropertyNames(handler.__proto__);\n\n            for (const method of keys) {\n                const iface = methodInterfaces.get(method);\n                if (iface) {\n                    allInterfaces.push(iface);\n                    (device as any)[method] = handler[method].bind(handler);\n                }\n            }\n            return allInterfaces;\n        },\n    };\n}\n","import sdk, { Device, DeviceCreator, DeviceCreatorSettings, DeviceProvider, Readme, ScryptedDeviceBase, ScryptedDeviceType, ScryptedInterface, Setting } from '@scrypted/sdk';\nimport { AggregateDevice, createAggregateDevice } from './aggregate';\n\nconst { deviceManager } = sdk;\nexport const AggregateCoreNativeId = 'aggregatecore';\n\nexport class AggregateCore extends ScryptedDeviceBase implements DeviceProvider, DeviceCreator, Readme {\n    aggregate = new Map<string, AggregateDevice>();\n\n    constructor() {\n        super(AggregateCoreNativeId);\n\n        for (const nativeId of deviceManager.getNativeIds()) {\n            if (nativeId?.startsWith('aggregate:')) {\n                const aggregate = createAggregateDevice(nativeId);\n                this.aggregate.set(nativeId, aggregate);\n                this.reportAggregate(nativeId, aggregate.computeInterfaces(), aggregate.providedName);\n            }\n        }\n\n        sdk.systemManager.listen((eventSource, eventDetails, eventData) => {\n            if (eventDetails.eventInterface === 'Storage') {\n                const ids = [...this.aggregate.values()].map(a => a.id);\n                if (ids.includes(eventSource.id)) {\n                    const aggregate = [...this.aggregate.values()].find(a => a.id === eventSource.id);\n                    this.reportAggregate(aggregate.nativeId, aggregate.computeInterfaces(), aggregate.providedName);\n                }\n            }\n        });\n    }\n\n    async getReadmeMarkdown(): Promise<string> {\n        return \"Combine multiple devices into a single virtual device. Commands sent to the device group will be sent to all the devices in that group.\";\n    }\n\n    async getCreateDeviceSettings(): Promise<Setting[]> {\n        return [\n            {\n                key: 'name',\n                title: 'Name',\n                description: 'The name or description of the new device group.',\n            },\n        ]\n    }\n\n    async createDevice(settings: DeviceCreatorSettings): Promise<string> {\n        const { name } = settings;\n        const nativeId = `aggregate:${Math.random()}`;\n        await this.reportAggregate(nativeId, [], name?.toString());\n        const aggregate = createAggregateDevice(nativeId);\n        this.aggregate.set(nativeId, aggregate);\n        return nativeId;\n    }\n\n    async reportAggregate(nativeId: string, interfaces: string[], name: string) {\n        const device: Device = {\n            providerNativeId: AggregateCoreNativeId,\n            name,\n            nativeId,\n            type: ScryptedDeviceType.Unknown,\n            interfaces: [ScryptedInterface.Settings, ...interfaces],\n        }\n        await deviceManager.onDeviceDiscovered(device);\n    }\n\n    async getDevice(nativeId: string) {\n        return this.aggregate.get(nativeId);\n    }\n\n    async releaseDevice(id: string, nativeId: string): Promise<void> {\n    }\n}\n","import sdk, { EventListener, EventListenerRegister, FFmpegInput, LockState, MediaStreamDestination, RequestMediaStreamOptions, ResponseMediaStreamOptions, ScryptedDevice, ScryptedDeviceBase, ScryptedInterface, ScryptedInterfaceDescriptors, ScryptedMimeTypes, Setting, Settings, SettingValue, VideoCamera } from \"@scrypted/sdk\";\nimport { StorageSettings } from \"@scrypted/sdk/storage-settings\";\nconst { systemManager, mediaManager, deviceManager } = sdk;\n\nexport interface AggregateDevice extends ScryptedDeviceBase {\n    computeInterfaces(): string[];\n}\n\ninterface Aggregator<T> {\n    (values: T[]): T;\n}\n\nconst aggregators = new Map<string, Aggregator<any>>();\n\nconst average: Aggregator<number> = values => values.reduce((prev, cur) => prev + (cur || 0), 0) / (values.length || 0);\nconst allFalse: Aggregator<boolean> = values => values.reduce((prev, cur) => prev || cur, false);\nconst allTrue: Aggregator<boolean> = values => values.reduce((prev, cur) => prev && cur, true);\n\naggregators.set(ScryptedInterface.Online, allTrue);\naggregators.set(ScryptedInterface.StartStop, allTrue);\naggregators.set(ScryptedInterface.Pause, allFalse);\naggregators.set(ScryptedInterface.OnOff, allFalse);\naggregators.set(ScryptedInterface.Brightness, average);\naggregators.set(ScryptedInterface.Battery, average);\naggregators.set(ScryptedInterface.MotionSensor, average);\naggregators.set(ScryptedInterface.HumiditySensor, average);\naggregators.set(ScryptedInterface.Thermometer, average);\naggregators.set(ScryptedInterface.BinarySensor, allFalse);\naggregators.set(ScryptedInterface.TamperSensor, allFalse);\naggregators.set(ScryptedInterface.PowerSensor, allFalse);\naggregators.set(ScryptedInterface.MotionSensor, allFalse);\naggregators.set(ScryptedInterface.AudioSensor, allFalse);\naggregators.set(ScryptedInterface.LuminanceSensor, average);\naggregators.set(ScryptedInterface.UltravioletSensor, average);\naggregators.set(ScryptedInterface.CO2Sensor, average);\naggregators.set(ScryptedInterface.PM25Sensor, average);\naggregators.set(ScryptedInterface.PM10Sensor, average);\naggregators.set(ScryptedInterface.NOXSensor, average);\naggregators.set(ScryptedInterface.FloodSensor, allFalse);\naggregators.set(ScryptedInterface.Lock,\n    values => values.reduce((prev, cur) => cur === LockState.Unlocked ? cur : prev, LockState.Locked));\n\n\nfunction createVideoCamera(devices: VideoCamera[], console: Console): VideoCamera {\n    async function getVideoStreamWrapped(options: RequestMediaStreamOptions) {\n        const destination: MediaStreamDestination = devices.length > 4 ? 'low-resolution' : \"medium-resolution\";\n        const args = await Promise.allSettled(devices.map(async (device) => {\n            const mo = await device.getVideoStream({\n                destination,\n            });\n            const buffer = await mediaManager.convertMediaObjectToBuffer(mo, ScryptedMimeTypes.FFmpegInput);\n            const ffmpegInput = JSON.parse(buffer.toString()) as FFmpegInput;\n            return ffmpegInput;\n        }));\n\n        const inputs = args.map(arg => (arg as PromiseFulfilledResult<FFmpegInput>).value).filter(input => !!input);\n\n        if (!inputs.length)\n            throw new Error('no inputs');\n\n        let dim = 1;\n        while (dim * dim < inputs.length) {\n            dim++;\n        }\n\n        const w = 1920 / dim;\n        const h = 1080 / dim;\n\n        const filter = [\n            'nullsrc=size=1920x1080 [base];'\n        ];\n\n        const ffmpegInput: FFmpegInput = {\n            url: undefined,\n            container: 'rawvideo',\n            mediaStreamOptions: (await createVideoStreamOptions())?.[0],\n            inputArguments: [],\n            h264FilterArguments: [],\n        };\n\n        for (let i = 0; i < inputs.length; i++) {\n            ffmpegInput.inputArguments.push(...inputs[i].inputArguments);\n            filter.push(`[${i}:v] scale=-1:${h},pad=${w}:ih:(ow-iw)/2 [pos${i}];`)\n        }\n        for (let i = inputs.length; i < dim * dim; i++) {\n            ffmpegInput.inputArguments.push(\n                '-f', 'lavfi', '-i', `color=black:s=${w}x${h}`,\n            );\n            filter.push(`[${i}:v] scale=${w}x${h} [pos${i}];`)\n        }\n\n        let prev = 'base';\n        let curx = 0;\n        let cury = 0;\n        for (let i = 0; i < dim * dim - 1; i++) {\n            let cur = `tmp${i}`;\n            cury = Math.floor(i / dim) * h;\n            filter.push(`[${prev}][pos${i}] overlay=shortest=1:x=${curx % 1920}:y=${cury % 1080} [${cur}];`);\n            prev = cur;\n            curx += w;\n        }\n\n\n        let i = dim * dim - 1;\n        filter.push(`[${prev}][pos${i}] overlay=shortest=1:x=${curx % 1920}:y=${cury % 1080}`);\n\n        ffmpegInput.h264FilterArguments.push(\n            '-filter_complex',\n            filter.join(' '),\n        );\n\n        return ffmpegInput;\n    };\n\n    const createVideoStreamOptions: () => Promise<ResponseMediaStreamOptions[]> = async () => {\n        if (devices.length === 1)\n            return devices[0].getVideoStreamOptions();\n        return [{\n            id: 'default',\n            name: 'Default',\n            container: 'ffmpeg',\n            video: {},\n            audio: null,\n        }]\n    }\n\n    return {\n        async getVideoStreamOptions() {\n            return createVideoStreamOptions();\n        },\n\n        async getVideoStream(options) {\n            if (devices.length === 1)\n                return devices[0].getVideoStream(options);\n\n            const ffmpegInput = await getVideoStreamWrapped(options);\n\n            return mediaManager.createFFmpegMediaObject(ffmpegInput);\n        }\n    }\n}\n\nexport function createAggregateDevice(nativeId: string): AggregateDevice {\n    class AggregateDeviceImpl extends ScryptedDeviceBase implements Settings {\n        listeners: EventListenerRegister[] = [];\n        storageSettings = new StorageSettings(this, {\n            deviceInterfaces: {\n                title: 'Selected Device Interfaces',\n                description: 'The components of other devices to combine into this device group.',\n                type: 'interface',\n                multiple: true,\n                deviceFilter: `id !== ${this.id} && interface !== ${ScryptedInterface.Settings}`,\n            }\n        })\n\n        constructor() {\n            super(nativeId);\n\n            try {\n                const data = this.storage.getItem('data');\n                if (data) {\n                    const { deviceInterfaces } = JSON.parse(data);\n                    this.storageSettings.values.deviceInterfaces = deviceInterfaces;\n                }\n            }\n            catch (e) {\n            }\n           this.storage.removeItem('data');\n        }\n\n        getSettings(): Promise<Setting[]> {\n            return this.storageSettings.getSettings();\n        }\n        putSetting(key: string, value: SettingValue): Promise<void> {\n            return this.storageSettings.putSetting(key, value);\n        }\n\n        makeListener(iface: string, devices: ScryptedDevice[]) {\n            const aggregator = aggregators.get(iface);\n            if (!aggregator) {\n                const ds = deviceManager.getDeviceState(this.nativeId);\n                // if this device can't be aggregated for whatever reason, pass property through.\n                for (const device of devices) {\n                    const register = device.listen({\n                        event: iface,\n                        watch: true,\n                    }, (source, details, data) => {\n                        if (details.property)\n                            ds[details.property] = data;\n                    });\n                    this.listeners.push(register);\n                }\n                return;\n            }\n\n            const property = ScryptedInterfaceDescriptors[iface]?.properties?.[0];\n            if (!property) {\n                this.console.warn('aggregating interface with no property?', iface);\n                return;\n            }\n\n            const runAggregator = () => {\n                const values = devices.map(device => device[property]);\n                (this as any)[property] = aggregator(values);\n            }\n\n            const listener: EventListener = () => runAggregator();\n\n            for (const device of devices) {\n                const register = device.listen({\n                    event: iface,\n                    watch: true,\n                }, listener);\n                this.listeners.push(register);\n            }\n\n            return runAggregator;\n        }\n\n        computeInterfaces(): string[] {\n            this.listeners.forEach(listener => listener.removeListener());\n            this.listeners = [];\n\n            try {\n                const interfaces = new Map<string, string[]>();\n                for (const deviceInterface of this.storageSettings.values.deviceInterfaces as string[]) {\n                    const parts = deviceInterface.split('#');\n                    const id = parts[0];\n                    const iface = parts[1];\n                    if (!interfaces.has(iface))\n                        interfaces.set(iface, []);\n                    interfaces.get(iface).push(id);\n                }\n\n                for (const [iface, ids] of interfaces.entries()) {\n                    const devices = ids.map(id => systemManager.getDeviceById(id));\n                    const runAggregator = this.makeListener(iface, devices);\n                    runAggregator?.();\n                }\n\n                for (const [iface, ids] of interfaces.entries()) {\n                    const devices = ids.map(id => systemManager.getDeviceById(id));\n                    const descriptor = ScryptedInterfaceDescriptors[iface];\n                    if (!descriptor) {\n                        this.console.warn(`descriptor not found for ${iface}, skipping method generation`);\n                        continue;\n                    }\n\n                    if (iface === ScryptedInterface.VideoCamera) {\n                        const camera = createVideoCamera(devices as any, this.console);\n                        for (const method of descriptor.methods) {\n                            AggregateDeviceImpl.prototype[method] = (...args: any[]) => camera[method](...args);\n                        }\n                        continue;\n                    }\n\n                    for (const method of descriptor.methods) {\n                        AggregateDeviceImpl.prototype[method] = async function (...args: any[]) {\n                            const ret: Promise<any>[] = [];\n                            for (const device of devices) {\n                                ret.push(device[method](...args));\n                            }\n\n                            const results = await Promise.all(ret);\n                            return results[0];\n                        }\n                    }\n                }\n\n                return [...interfaces.keys()];\n            }\n            catch (e) {\n                // this.console.error('error loading aggregate device', e);\n                return [];\n            }\n        }\n    }\n\n    const ret = new AggregateDeviceImpl();\n    ret.computeInterfaces();\n    return new AggregateDeviceImpl();\n}","import { EventDetails, EventListenerRegister, OnOff, ScryptedDevice, ScryptedDeviceBase, Setting, Settings, SettingValue } from \"@scrypted/sdk\";\nimport sdk from \"@scrypted/sdk\";\nimport { AutomationJavascript } from \"./builtins/javascript\";\nimport { Scheduler } from \"./builtins/scheduler\";\nimport { Listen } from \"./builtins/listen\";\nimport { scryptedEval } from \"./scrypted-eval\";\nimport { AutomationShellScript } from \"./builtins/shellscript\";\nconst { systemManager } = sdk;\n\ninterface Abort {\n    aborted: boolean;\n}\n\nexport class Automation extends ScryptedDeviceBase implements OnOff, Settings {\n    registers: EventListenerRegister[] = [];\n    pendings = new Map<string, Abort>();\n\n    constructor(nativeId: string) {\n        super(nativeId);\n\n        this.bind();\n\n        this.on = this.storage.getItem('enabled') !== 'false';\n    }\n\n    async getSettings(): Promise<Setting[]> {\n        return [\n            {\n                key: 'denoiseEvents',\n                value: this.storage.getItem('denoiseEvents') === 'true',\n                title: 'Denoise Events',\n                description: 'Denoising events will suppress events where the same event data is sent multiple times in a row. For example, if a sensor sent multiple door open events, only the first event will trigger this automation. The automation will fire again once the door sends a close event.',\n                type: 'boolean',\n            },\n            {\n                key: 'runToCompletion',\n                value: this.storage.getItem('runToCompletion') === 'true',\n                title: 'Run Automations to Completion',\n                description: 'By default, automations that are executing will reset if triggered by a new event. Check this box to require an automation to run to completion before it can be triggered again. This setting can be used in conjunction with a timer to prevent an automation from running too often.',\n                type: 'boolean',\n            },\n            {\n                key: 'staticEvents',\n                value: this.storage.getItem('staticEvents') === 'true',\n                title: 'Reset Automation on All Events',\n                description: 'By default, running Automation timers will be reset if the same device fires the event again. Check this box to reset Automation timers on all of the configured events.',\n                type: 'boolean',\n            },\n        ]\n    }\n\n    async putSetting(key: string, value: SettingValue): Promise<void> {\n        this.storage.setItem(key, value.toString());\n        this.bind();\n    }\n\n    async eval(script: string, variables: { [name: string]: any }) {\n        return (await scryptedEval(this, script, variables)).value;\n    }\n\n    async turnOff() {\n        this.storage.setItem('enabled', 'false');\n        this.on = false;\n        this.bind();\n    }\n\n    async turnOn() {\n        this.storage.removeItem('enabled');\n        this.on = true;\n        this.bind();\n    }\n\n    abort(id?: string) {\n        if (!id) {\n            for (const abort of this.pendings.values()) {\n                abort.aborted = true;\n            }\n            this.pendings.clear();\n        }\n        else {\n            const pending = this.pendings.get(id);\n            if (pending) {\n                this.pendings.delete(id);\n                pending.aborted = true;\n            }\n        }\n    }\n\n    bind() {\n        this.abort();\n        for (const register of this.registers) {\n            register.removeListener();\n        }\n        this.registers = [];\n\n        if (!this.on) {\n            this.log.i('automation is turned off, and will not be scheduled.')\n            return;\n        }\n        this.log.i('automation is waiting for event trigger.')\n\n        try {\n            const data = JSON.parse(this.storage.getItem('data'));\n            const { denoiseEvents, runToCompletion, staticEvents } = this.storage;\n\n            const runActions = async (eventSource: ScryptedDevice, eventDetails: EventDetails, eventData: any) => {\n                const pendingKey = staticEvents === 'true' ? undefined : eventSource.id + ':' + eventDetails.eventInterface;\n                const pending = this.pendings.get(pendingKey);\n                this.console.log('automation trigger key', pendingKey);\n\n                if (runToCompletion === 'true' && pending) {\n                    this.console.info('automation already in progress, trigger ignored', pendingKey);\n                    return;\n                }\n                if (pending) {\n                    pending.aborted = true;\n                }\n                const abort: Abort = {\n                    aborted: false,\n                }\n                this.pendings.set(pendingKey, abort);\n\n                try {\n                    for (const action of data.actions) {\n                        if (abort.aborted) {\n                            this.console.log('automation aborted', pendingKey);\n                            return;\n                        }\n\n                        const parts = action.id.split('#');\n                        const id = parts[0];\n\n                        if (id === 'scriptable') {\n                            const script = new AutomationJavascript(this, eventSource, eventDetails, eventData);\n                            await script.run(action.model['script.ts'])\n                        }\n                        else if (id === 'shell-scriptable') {\n                            const script = new AutomationShellScript(this, eventSource, eventDetails, eventData);\n                            await script.run(action.model['script.sh'])\n                        }\n                        else if (id === 'timer') {\n                            await new Promise(resolve => setTimeout(resolve, action.model.seconds * 1000));\n                        }\n                        else if (id === 'update-plugins') {\n                            const plugins = await systemManager.getComponent('plugins');\n                            await plugins.updatePlugins();\n                        }\n                        else {\n                            const device = systemManager.getDeviceById(id);\n                            if (!device)\n                                throw new Error(`unknown action ${action.id}`);\n\n                            const { rpc } = action.model;\n                            device[rpc.method](...rpc.parameters || []);\n                        }\n                    }\n                }\n                finally {\n                    if (!abort.aborted) {\n                        this.pendings.delete(pendingKey);\n                    }\n                }\n            }\n\n            for (const trigger of data.triggers) {\n                const parts = trigger.id.split('#');\n                const id = parts[0];\n                const event = parts[1];\n                const { condition } = trigger;\n\n                let register: EventListenerRegister;\n                let listen: Listen;\n                if (event) {\n                    const device = systemManager.getDeviceById(id);\n                    listen = device;\n                }\n                else {\n                    let device: any;\n                    if (id === 'scheduler') {\n                        device = new Scheduler();\n                    }\n                    else {\n                        throw new Error(`unknown action ${trigger.id}`);\n                    }\n\n                    const { rpc } = trigger.model;\n                    listen = device[rpc.method](...rpc.parameters || []);\n                }\n\n                register = listen.listen({\n                    denoise: denoiseEvents === 'true',\n                    event,\n                }, (eventSource, eventDetails, eventData) => {\n                    this.log.i(`automation triggered by ${eventSource.name}`);\n\n                    if (condition) {\n                        const f = eval(`(function(eventSource, eventDetails, eventData) {\n                            return ${condition};\n                        })`);\n\n                        if (!f(eventSource, eventDetails, eventData)) {\n                            this.log.i('condition check false, not starting automation');\n                            return;\n                        }\n                    }\n\n                    console.log('starting automation');\n                    runActions(eventSource, eventDetails, eventData);\n                }, this);\n\n                this.registers.push(register);\n            }\n        }\n        catch (e) {\n            // console.error('automation load error', e);\n        }\n    }\n}\n","import sdk, { Device, DeviceCreator, DeviceCreatorSettings, DeviceProvider, Readme, ScryptedDeviceBase, ScryptedDeviceType, ScryptedInterface, Setting } from '@scrypted/sdk';\nimport { randomBytes } from \"crypto\";\nimport { Automation } from \"./automation\";\nimport { updatePluginsData } from './update-plugins';\n\nconst { deviceManager } = sdk;\nexport const AutomationCoreNativeId = 'automationcore';\n\nexport class AutomationCore extends ScryptedDeviceBase implements DeviceProvider, DeviceCreator, Readme {\n    automations = new Map<string, Automation>();\n\n    constructor() {\n        super(AutomationCoreNativeId);\n\n        for (const nativeId of deviceManager.getNativeIds()) {\n            if (nativeId?.startsWith('automation:')) {\n                const automation = new Automation(nativeId);\n                this.automations.set(nativeId, automation);\n                this.reportAutomation(nativeId, automation.providedName);\n            }\n        }\n\n\n        (async () => {\n            const updatePluginsNativeId = 'automation:update-plugins'\n            let updatePlugins = this.automations.get(updatePluginsNativeId);\n            if (!updatePlugins) {\n                await this.reportAutomation(updatePluginsNativeId, 'Autoupdate Plugins');\n                updatePlugins = new Automation(updatePluginsNativeId);\n                updatePlugins.storage.setItem('data', JSON.stringify(updatePluginsData));\n                this.automations.set(updatePluginsNativeId, updatePlugins);\n            }\n        })();\n\n        // update the automations devices on storage change.\n        // todo: make this use setting api\n        sdk.systemManager.listen((eventSource, eventDetails, eventData) => {\n            if (eventDetails.eventInterface === 'Storage') {\n                const ids = [...this.automations.values()].map(a => a.id);\n                if (ids.includes(eventSource.id)) {\n                    const automation = [...this.automations.values()].find(a => a.id === eventSource.id);\n                    automation.bind();\n                }\n            }\n        });\n    }\n\n    async getReadmeMarkdown(): Promise<string> {\n        return \"Create custom smart home actions that trigger on specific events.\";\n    }\n\n    async getCreateDeviceSettings(): Promise<Setting[]> {\n        return [\n            {\n                key: 'name',\n                title: 'Name',\n                description: 'The name or description of the new automation.',\n            },\n        ]\n    }\n\n    async createDevice(settings: DeviceCreatorSettings): Promise<string> {\n        const { name } = settings;\n        const nativeId = 'automation:' + randomBytes(8).toString('hex');\n        await this.reportAutomation(nativeId, name?.toString());\n        const automation = new Automation(nativeId);\n        this.automations.set(nativeId, automation);\n        return nativeId;\n    }\n\n    async reportAutomation(nativeId: string, name?: string) {\n        const device: Device = {\n            providerNativeId: AutomationCoreNativeId,\n            name,\n            nativeId,\n            type: ScryptedDeviceType.Automation,\n            interfaces: [ScryptedInterface.OnOff, ScryptedInterface.Settings]\n        }\n        await deviceManager.onDeviceDiscovered(device);\n    }\n\n\n    async getDevice(nativeId: string) {\n        return this.automations.get(nativeId);\n    }\n \n    async releaseDevice(id: string, nativeId: string): Promise<void> {\n    }\n}\n","import { Logger, EventDetails, ScryptedDevice } from \"@scrypted/sdk\";\nimport { Automation } from \"../automation\";\nimport { scryptedEval } from \"../scrypted-eval\";\n\nexport class AutomationJavascript {\n    eventSource: ScryptedDevice;\n    eventDetails: EventDetails;\n    eventData: any;\n    log: Logger;\n\n    constructor(public automation: Automation, eventSource: ScryptedDevice, eventDetails: EventDetails, eventData: any) {\n        this.eventSource = eventSource;\n        this.eventDetails = eventDetails;\n        this.eventData = eventData;\n    }\n\n    async run(script: string) {\n        return (await scryptedEval(this.automation, script, {\n            eventDetails: this.eventDetails,\n            eventData: this.eventData,\n            eventSource: this.eventSource,\n        })).value;\n    }\n}\n","import { ScryptedDevice, EventListenerOptions, ScryptedDeviceBase } from \"@scrypted/sdk\";\nimport { Listen } from \"./listen\";\n\nexport interface Schedule {\n    clockType: \"AM\" | \"PM\" | \"24HourClock\" | \"BeforeSunrise\" | \"BeforeSunset\" | \"AfterSunrise\" | \"AfterSunset\";\n    friday: boolean;\n    hour: number;\n    minute: number;\n    monday: boolean\n    saturday: boolean\n    sunday: boolean\n    thursday: boolean;\n    tuesday: boolean\n    wednesday: boolean\n}\n\nexport class Scheduler {\n    schedule(schedule: Schedule): Listen {\n        const days = [\n            schedule.sunday,\n            schedule.monday,\n            schedule.tuesday,\n            schedule.wednesday,\n            schedule.thursday,\n            schedule.friday,\n            schedule.saturday,\n        ];\n\n        const date = new Date();\n        date.setHours(schedule.hour);\n        date.setMinutes(schedule.minute);\n\n        const ret: ScryptedDevice = {\n            async setName() { },\n            async setType() { },\n            async setRoom() { },\n            async setMixins() { },\n            async probe() { return true },\n            listen(event: EventListenerOptions, callback, source?: ScryptedDeviceBase) {\n                function reschedule(): Date {\n                    const now = Date.now();\n                    for (let i = 0; i < 8; i++) {\n                        const future = new Date(date.getTime() + i * 24 * 60 * 60 * 1000);\n                        // don't reschedule for anything within 10 seconds.\n                        if (future.getTime() <= now + 10000)\n                            continue;\n                        const day = future.getDay();\n                        if (!days[day])\n                            continue;\n        \n                        source.log.i(`event will fire at ${future.toLocaleString()}`);\n                        return future;\n                    }\n                    source.log.w('event will never fire');\n                }\n\n                const when = reschedule();\n                if (!when) {\n                    return {\n                        removeListener() {\n                        }\n                    }\n                }\n\n                const delay = when.getTime() - Date.now();\n                source.log.i(`event will fire in ${Math.round(delay / 60 / 1000)} minutes.`);\n\n                let timeout = setTimeout(() => {\n                    reschedule();\n\n                    callback(ret, {\n                        eventId: undefined,\n                        eventInterface: 'Scheduler',\n                        eventTime: Date.now(),\n                    }, when)\n                }, delay);\n\n                return {\n                    removeListener() {\n                        clearTimeout(timeout);\n                    }\n                }\n            }\n        }\n\n        ret.name = 'Scheduler';\n        return ret;\n    }\n}","import { Logger, EventDetails, ScryptedDevice } from \"@scrypted/sdk\";\nimport { Automation } from \"../automation\";\nimport child_process from 'child_process';\n\nexport class AutomationShellScript {\n    eventSource: ScryptedDevice;\n    eventDetails: EventDetails;\n    eventData: any;\n    log: Logger;\n\n    constructor(public automation: Automation, eventSource: ScryptedDevice, eventDetails: EventDetails, eventData: any) {\n        this.eventSource = eventSource;\n        this.eventDetails = eventDetails;\n        this.eventData = eventData;\n    }\n\n    async run(script: string) {\n        const cp = child_process.spawn('sh', {\n            env: {\n                EVENT_DATA: this.eventData?.toString(),\n            },\n        });\n        cp.stdin.write(script);\n        cp.stdin.end();\n        cp.stdout.on('data', data => this.automation.console.log(data.toString()));\n        cp.stderr.on('data', data => this.automation.console.log(data.toString()));\n        cp.on('exit', () => this.automation.console.log('shell exited'));\n    }\n}\n","import sdk, { BufferConverter, HttpRequest, HttpRequestHandler, HttpResponse, HttpResponseOptions, MediaObject, RequestMediaObject, ScryptedDeviceBase, ScryptedMimeTypes } from \"@scrypted/sdk\";\nimport crypto from 'crypto';\nimport mime from \"mime/lite\";\nimport path from 'path';\n\nconst { endpointManager } = sdk;\n\nfunction uuidv4() {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n        var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n        return v.toString(16);\n    });\n}\n\nexport class BufferHost extends ScryptedDeviceBase implements HttpRequestHandler, BufferConverter {\n    hosted = new Map<string, { data: Buffer | string, fromMimeType: string, toMimeType: string }>()\n\n    constructor(public secure: boolean) {\n        super(secure ? 'https' : 'http');\n        this.fromMimeType = '*/*';\n        this.secure = secure;\n        this.toMimeType = secure ? ScryptedMimeTypes.LocalUrl : ScryptedMimeTypes.InsecureLocalUrl;\n    }\n\n    async onRequest(request: HttpRequest, response: HttpResponse) {\n        const normalizedRequest = Object.assign({}, request);\n        normalizedRequest.url = normalizedRequest.url.replace(normalizedRequest.rootPath, '');\n        const pathOnly = normalizedRequest.url.split('?')[0];\n        const file = this.hosted.get(pathOnly);\n\n        if (!file) {\n            response.send('Not Found', {\n                code: 404,\n            });\n            return;\n        }\n\n\n        let options: HttpResponseOptions = {\n            headers: {\n                'Content-Type': file.fromMimeType,\n            }\n        };\n\n        const q = new URLSearchParams(request.url.split('?')[1]);\n        if (q.has('attachment')) {\n            options.headers['Content-Disposition'] = 'attachment';\n        }\n\n        response.send(file.data as Buffer, );\n    }\n\n    async convert(buffer: string, fromMimeType: string, toMimeType: string): Promise<Buffer> {\n        const uuid = uuidv4();\n\n        const endpoint = await (this.secure ? endpointManager.getPublicLocalEndpoint(this.nativeId) : endpointManager.getInsecurePublicLocalEndpoint(this.nativeId));\n        const extension = mime.getExtension(fromMimeType);\n\n        const filename = uuid + (extension ? `.${extension}` : '');\n\n        this.hosted.set(`/${filename}`, { data: buffer, fromMimeType, toMimeType });\n\n        return Buffer.from(`${endpoint}${filename}`);\n    }\n}\n\nexport class RequestMediaObjectHost extends ScryptedDeviceBase implements HttpRequestHandler, BufferConverter {\n    secureHosted = new Map<string, { request: RequestMediaObject, fromMimeType: string, toMimeType: string }>()\n    insecureHosted = new Map<string, { request: RequestMediaObject, fromMimeType: string, toMimeType: string }>()\n\n    constructor() {\n        super('rmo-host');\n        this.fromMimeType = ScryptedMimeTypes.RequestMediaObject;\n        this.toMimeType = ScryptedMimeTypes.MediaObject;\n        // this.toMimeType = secure ? ScryptedMimeTypes.LocalUrl : ScryptedMimeTypes.InsecureLocalUrl;\n    }\n\n    async onRequest(request: HttpRequest, response: HttpResponse) {\n        const normalizedRequest = Object.assign({}, request);\n        normalizedRequest.url = normalizedRequest.url.replace(normalizedRequest.rootPath, '');\n        const pathOnly = normalizedRequest.url.split('?')[0];\n        const file = this.secureHosted.get(pathOnly) || this.insecureHosted.get(pathOnly);;\n\n        if (!file) {\n            response.send('Not Found', {\n                code: 404,\n            });\n            return;\n        }\n\n\n        let options: HttpResponseOptions = {\n            headers: {\n                'Content-Type': file.fromMimeType,\n            }\n        };\n\n        const q = new URLSearchParams(request.url.split('?')[1]);\n        if (q.has('attachment')) {\n            options.headers['Content-Disposition'] = 'attachment';\n        }\n\n        try {\n            const mo = await file.request();\n            const data = await sdk.mediaManager.convertMediaObjectToBuffer(mo, mo.mimeType);\n\n            response.send(data);\n        }\n        catch (e) {\n            this.secureHosted.delete(pathOnly);\n            this.insecureHosted.delete(pathOnly);\n            throw e;\n        }\n    }\n\n    async convert(request: RequestMediaObject, fromMimeType: string, toMimeType: string): Promise<MediaObject> {\n        let hosted: typeof this.secureHosted;\n        if (toMimeType === ScryptedMimeTypes.Url || toMimeType === ScryptedMimeTypes.LocalUrl) {\n            hosted = this.secureHosted;\n            toMimeType = ScryptedMimeTypes.LocalUrl;\n        }\n        else if (toMimeType === ScryptedMimeTypes.InsecureLocalUrl) {\n            hosted = this.insecureHosted;\n        }\n        else {\n            return request();\n        }\n\n        const uuid = uuidv4();\n\n        const endpoint = await (toMimeType === ScryptedMimeTypes.LocalUrl ? endpointManager.getPublicLocalEndpoint(this.nativeId) : endpointManager.getInsecurePublicLocalEndpoint(this.nativeId));\n        const data = await request();\n        fromMimeType = data.mimeType;\n        const extension = mime.getExtension(fromMimeType);\n\n        const filename = uuid + (extension ? `.${extension}` : '');\n\n        const pathOnly = `/${filename}`;\n        hosted.set(pathOnly, { request, fromMimeType, toMimeType });\n        // free this resource after an hour.\n        setTimeout(() => hosted.delete(pathOnly), 1 * 60 * 60 * 1000);\n\n        const url = Buffer.from(`${endpoint}${filename}`);\n        return sdk.mediaManager.createMediaObject(url, toMimeType);\n    }\n}\n\nexport class FileHost extends ScryptedDeviceBase implements HttpRequestHandler, BufferConverter {\n    hosted = new Map<string, { data: Buffer | string }>()\n\n    constructor(public secure: boolean) {\n        super(secure ? 'files' : 'file');\n        this.fromMimeType = ScryptedMimeTypes.SchemePrefix + 'file';\n        this.secure = secure;\n        this.toMimeType = secure ? ScryptedMimeTypes.LocalUrl : ScryptedMimeTypes.InsecureLocalUrl;\n    }\n\n    async onRequest(request: HttpRequest, response: HttpResponse) {\n        const normalizedRequest = Object.assign({}, request);\n        normalizedRequest.url = normalizedRequest.url.replace(normalizedRequest.rootPath, '');\n        const pathOnly = normalizedRequest.url.split('?')[0];\n        const file = this.hosted.get(pathOnly);\n\n        let options: HttpResponseOptions;\n        const q = new URLSearchParams(request.url.split('?')[1]);\n        if (q.has('attachment')) {\n            options = {\n                headers: {\n                    'Content-Disposition': 'attachment',\n                },\n            };\n        }\n        response.sendFile(file.data as string, options);\n    }\n\n    async convert(buffer: string, fromMimeType: string, toMimeType: string): Promise<Buffer> {\n        const { pathname } = new URL(buffer);\n        // one way hash that is browser cache friendly\n        const uuid = crypto.createHash('sha256').update(pathname).digest('hex');\n\n        const endpoint = await (this.secure ? endpointManager.getPublicLocalEndpoint(this.nativeId) : endpointManager.getInsecurePublicLocalEndpoint(this.nativeId));\n        const extension = path.extname(pathname).substring(1);\n\n        const filename = uuid + (extension ? `.${extension}` : '');\n\n        this.hosted.set(`/${filename}`, { data: pathname });\n\n        return Buffer.from(`${endpoint}${filename}`);\n    }\n}\n","import { DeviceState, MixinProvider, Readme, ScryptedDeviceBase, ScryptedDeviceType, ScryptedInterface } from \"@scrypted/sdk\";\nimport { typeToIcon } from \"../ui/src/components/helpers\";\n\nexport class LauncherMixin extends ScryptedDeviceBase implements MixinProvider, Readme {\n    async getReadmeMarkdown(): Promise<string> {\n        return 'Add Scrypted Plugins or Devices to the Scrypted launch screen for quick access.';\n    }\n\n    async canMixin(type: ScryptedDeviceType, interfaces: string[]): Promise<string[]> {\n        if (interfaces.includes(\"@scrypted/launcher-ignore\"))\n            return;\n        if (type === ScryptedDeviceType.Builtin || type === ScryptedDeviceType.API)\n            return;\n        return [\n            ScryptedInterface.LauncherApplication,\n        ];\n    }\n\n    async getMixin(mixinDevice: any, mixinDeviceInterfaces: ScryptedInterface[], mixinDeviceState: DeviceState): Promise<any> {\n        mixinDeviceState.applicationInfo = {\n            icon: 'fa ' + typeToIcon(mixinDeviceState.type),\n            href: '/endpoint/@scrypted/core/public/#/device/' + mixinDeviceState.id,\n        }\n        return mixinDevice;\n    }\n\n    async releaseMixin(id: string, mixinDevice: any): Promise<void> {\n\n    }\n}\n","import { tsCompile } from '@scrypted/common/src/eval/scrypted-eval';\nimport sdk, { DeviceProvider, EngineIOHandler, HttpRequest, HttpRequestHandler, HttpResponse, ScryptedDeviceBase, ScryptedDeviceType, ScryptedInterface, Setting, Settings, SettingValue } from '@scrypted/sdk';\nimport { StorageSettings } from \"@scrypted/sdk/storage-settings\";\nimport fs from 'fs';\nimport net from 'net';\nimport os from 'os';\nimport Router from 'router';\nimport { AggregateCore, AggregateCoreNativeId } from './aggregate-core';\nimport { AutomationCore, AutomationCoreNativeId } from './automations-core';\nimport { LauncherMixin } from './launcher-mixin';\nimport { MediaCore } from './media-core';\nimport { ScriptCore, ScriptCoreNativeId } from './script-core';\nimport { UsersCore, UsersNativeId } from './user';\n\nconst { systemManager, deviceManager, endpointManager } = sdk;\n\nconst indexHtml = fs.readFileSync('dist/index.html').toString();\n\nexport function getAddresses() {\n    const addresses = Object.entries(os.networkInterfaces()).filter(([iface]) => iface.startsWith('en') || iface.startsWith('eth') || iface.startsWith('wlan')).map(([_, addr]) => addr).flat().map(info => info.address).filter(address => address);\n    return addresses;\n}\n\ninterface RoutedHttpRequest extends HttpRequest {\n    params: { [key: string]: string };\n}\n\nclass ScryptedCore extends ScryptedDeviceBase implements HttpRequestHandler, EngineIOHandler, DeviceProvider, Settings {\n    router: any = Router();\n    publicRouter: any = Router();\n    mediaCore: MediaCore;\n    launcher: LauncherMixin;\n    scriptCore: ScriptCore;\n    aggregateCore: AggregateCore;\n    automationCore: AutomationCore;\n    users: UsersCore;\n    localAddresses: string[];\n    storageSettings = new StorageSettings(this, {\n        localAddresses: {\n            title: 'Scrypted Server Address',\n            description: 'The IP address used by the Scrypted server. Set this to the wired IP address to prevent usage of a wireless address.',\n            combobox: true,\n            async onGet() {\n                return {\n                    choices: getAddresses(),\n                };\n            },\n            mapGet: () => this.localAddresses?.[0],\n            onPut: async (oldValue, newValue) => {\n                this.localAddresses = newValue ? [newValue] : undefined;\n                const service = await sdk.systemManager.getComponent('addresses');\n                service.setLocalAddresses(this.localAddresses);\n            },\n        }\n    });\n\n    constructor() {\n        super();\n\n        (async () => {\n            await deviceManager.onDeviceDiscovered(\n                {\n                    name: 'Media Core',\n                    nativeId: 'mediacore',\n                    interfaces: [ScryptedInterface.DeviceProvider, ScryptedInterface.BufferConverter, ScryptedInterface.HttpRequestHandler],\n                    type: ScryptedDeviceType.Builtin,\n                },\n            );\n            this.mediaCore = new MediaCore('mediacore');\n        })();\n        (async () => {\n            await deviceManager.onDeviceDiscovered(\n                {\n                    name: 'Scripts',\n                    nativeId: ScriptCoreNativeId,\n                    interfaces: [ScryptedInterface.DeviceProvider, ScryptedInterface.DeviceCreator, ScryptedInterface.Readme],\n                    type: ScryptedDeviceType.Builtin,\n                },\n            );\n            this.scriptCore = new ScriptCore();\n        })();\n\n        (async () => {\n            await deviceManager.onDeviceDiscovered(\n                {\n                    name: 'Automations',\n                    nativeId: AutomationCoreNativeId,\n                    interfaces: [ScryptedInterface.DeviceProvider, ScryptedInterface.DeviceCreator, ScryptedInterface.Readme],\n                    type: ScryptedDeviceType.Builtin,\n                },\n            );\n            this.automationCore = new AutomationCore();\n        })();\n\n        deviceManager.onDeviceDiscovered({\n            name: 'Add to Launcher',\n            nativeId: 'launcher',\n            interfaces: [\n                '@scrypted/launcher-ignore',\n                ScryptedInterface.MixinProvider,\n                ScryptedInterface.Readme,\n            ],\n            type: ScryptedDeviceType.Builtin,\n        });\n\n        (async () => {\n            await deviceManager.onDeviceDiscovered(\n                {\n                    name: 'Device Groups',\n                    nativeId: AggregateCoreNativeId,\n                    interfaces: [ScryptedInterface.DeviceProvider, ScryptedInterface.DeviceCreator, ScryptedInterface.Readme],\n                    type: ScryptedDeviceType.Builtin,\n                },\n            );\n            this.aggregateCore = new AggregateCore();\n        })();\n\n\n        (async () => {\n            await deviceManager.onDeviceDiscovered(\n                {\n                    name: 'Scrypted Users',\n                    nativeId: UsersNativeId,\n                    interfaces: [ScryptedInterface.DeviceProvider, ScryptedInterface.DeviceCreator, ScryptedInterface.Readme],\n                    type: ScryptedDeviceType.Builtin,\n                },\n            );\n            this.users = new UsersCore();\n        })();\n    }\n\n    async getSettings(): Promise<Setting[]> {\n        try {\n            const service = await sdk.systemManager.getComponent('addresses');\n            this.localAddresses = await service.getLocalAddresses();\n        }\n        catch (e) {\n        }\n        return this.storageSettings.getSettings();\n    }\n    async putSetting(key: string, value: SettingValue): Promise<void> {\n        await this.storageSettings.putSetting(key, value);\n    }\n\n    async getDevice(nativeId: string) {\n        if (nativeId === 'launcher')\n            return new LauncherMixin('launcher');\n        if (nativeId === 'mediacore')\n            return this.mediaCore;\n        if (nativeId === ScriptCoreNativeId)\n            return this.scriptCore;\n        if (nativeId === AutomationCoreNativeId)\n            return this.automationCore;\n        if (nativeId === AggregateCoreNativeId)\n            return this.aggregateCore;\n        if (nativeId === UsersNativeId)\n            return this.users;\n    }\n\n    async releaseDevice(id: string, nativeId: string): Promise<void> {\n    }\n\n    checkEngineIoEndpoint(request: HttpRequest, name: string) {\n        const check = `/endpoint/@scrypted/core/engine.io/${name}/`;\n        if (!request.url.startsWith(check))\n            return null;\n        return check;\n    }\n\n    async checkService(request: HttpRequest, ws: WebSocket, name: string): Promise<boolean> {\n        // only allow admin users to access these services.\n        if (request.aclId)\n            return false;\n        const check = this.checkEngineIoEndpoint(request, name);\n        if (!check)\n            return false;\n        const deviceId = request.url.substr(check.length).split('/')[0];\n        const plugins = await systemManager.getComponent('plugins');\n        const { nativeId, pluginId } = await plugins.getDeviceInfo(deviceId);\n        const port = await plugins.getRemoteServicePort(pluginId, name);\n        const socket = net.connect(port);\n        socket.on('close', () => ws.close());\n        socket.on('data', data => ws.send(data));\n        socket.resume();\n        socket.write(nativeId?.toString() || 'undefined');\n        ws.onclose = () => socket.destroy();\n        ws.onmessage = message => socket.write(message.data);\n        return true;\n    }\n\n    async onConnection(request: HttpRequest, ws: WebSocket): Promise<void> {\n        if (await this.checkService(request, ws, 'console') || await this.checkService(request, ws, 'repl')) {\n            return;\n        }\n\n        ws.close();\n    }\n\n    handlePublicFinal(request: HttpRequest, response: HttpResponse) {\n        // need to strip off the query.\n        const incomingPathname = request.url.split('?')[0];\n        if (request.url !== '/index.html') {\n            response.sendFile(\"dist\" + incomingPathname);\n            return;\n        }\n\n        // the rel hrefs (manifest, icons) are pulled in a web worker which does not\n        // have cookies. need to attach auth info to them.\n        endpointManager.getPublicCloudEndpoint()\n            .then(endpoint => {\n                const u = new URL(endpoint);\n\n                const rewritten = indexHtml\n                    .replace('href=\"/endpoint/@scrypted/core/public/manifest.json\"', `href=\"/endpoint/@scrypted/core/public/manifest.json${u.search}\"`)\n                    .replace('href=\"/endpoint/@scrypted/core/public/img/icons/apple-touch-icon-152x152.png\"', `href=\"/endpoint/@scrypted/core/public/img/icons/apple-touch-icon-152x152.png${u.search}\"`)\n                    .replace('href=\"/endpoint/@scrypted/core/public/img/icons/safari-pinned-tab.svg\"', `href=\"/endpoint/@scrypted/core/public/img/icons/safari-pinned-tab.svg${u.search}\"`)\n                    ;\n                response.send(rewritten, {\n                    headers: {\n                        'Content-Type': 'text/html',\n                    }\n                });\n            })\n            .catch(() => {\n                response.sendFile(\"dist\" + incomingPathname);\n            });\n    }\n\n    async onRequest(request: HttpRequest, response: HttpResponse) {\n        const normalizedRequest: RoutedHttpRequest = Object.assign({\n            params: {},\n        }, request);\n        normalizedRequest.url = normalizedRequest.url.replace(normalizedRequest.rootPath, '');\n        if (normalizedRequest.url == '/' || normalizedRequest.url == '/?') {\n            normalizedRequest.url = '/index.html';\n        }\n\n        if (request.isPublicEndpoint) {\n            this.publicRouter(normalizedRequest, response, () => this.handlePublicFinal(normalizedRequest, response));\n        }\n        else {\n            this.router(normalizedRequest, response, () => {\n                response.send('Not Found', {\n                    code: 404,\n                });\n            });\n        }\n    }\n}\n\nexport default ScryptedCore;\n\nexport async function fork() {\n    return {\n        tsCompile,\n    }\n}","import path from 'path';\nimport { ScryptedDeviceBase, DeviceProvider, ScryptedInterface, ScryptedDeviceType, BufferConverter, MediaObject, VideoCamera, Camera, ScryptedMimeTypes, RequestMediaStreamOptions, HttpRequestHandler, HttpRequest, HttpResponse, RequestMediaObject } from '@scrypted/sdk';\nimport sdk from '@scrypted/sdk';\nconst { systemManager, deviceManager, mediaManager, endpointManager } = sdk;\nimport { RequestMediaObjectHost, FileHost, BufferHost } from './converters';\nimport url from 'url';\n\nexport class MediaCore extends ScryptedDeviceBase implements DeviceProvider, BufferConverter, HttpRequestHandler {\n    httpHost: BufferHost;\n    httpsHost: BufferHost;\n    rmoHost: RequestMediaObjectHost;\n    fileHost: FileHost;\n    filesHost: FileHost;\n\n    constructor(nativeId: string) {\n        super(nativeId);\n\n        this.fromMimeType = ScryptedMimeTypes.SchemePrefix + 'scrypted-media';\n        this.toMimeType = ScryptedMimeTypes.MediaObject;\n\n        (async () => {\n            await deviceManager.onDevicesChanged({\n                providerNativeId: this.nativeId,\n                devices: [\n                    {\n                        name: 'HTTP Buffer Host',\n                        nativeId: 'http',\n                        interfaces: [ScryptedInterface.BufferConverter, ScryptedInterface.HttpRequestHandler],\n                        type: ScryptedDeviceType.API,\n                    },\n                    {\n                        providerNativeId: this.nativeId,\n                        name: 'HTTPS Buffer Host',\n                        nativeId: 'https',\n                        interfaces: [ScryptedInterface.BufferConverter, ScryptedInterface.HttpRequestHandler],\n                        type: ScryptedDeviceType.API,\n                    },\n                    {\n                        name: 'RequestMediaObject Host',\n                        nativeId: 'rmo-host',\n                        interfaces: [ScryptedInterface.BufferConverter, ScryptedInterface.HttpRequestHandler],\n                        type: ScryptedDeviceType.API,\n                    },\n                    {\n                        name: 'HTTP File Host',\n                        nativeId: 'file',\n                        interfaces: [ScryptedInterface.BufferConverter, ScryptedInterface.HttpRequestHandler],\n                        type: ScryptedDeviceType.API,\n                    },\n                    {\n                        providerNativeId: this.nativeId,\n                        name: 'HTTPS File Host',\n                        nativeId: 'files',\n                        interfaces: [ScryptedInterface.BufferConverter, ScryptedInterface.HttpRequestHandler],\n                        type: ScryptedDeviceType.API,\n                    },\n                ]\n            })\n            this.httpHost = new BufferHost(false);\n            this.httpsHost = new BufferHost(true);\n            this.rmoHost = new RequestMediaObjectHost();\n            this.fileHost = new FileHost(false);\n            this.filesHost = new FileHost(true);\n        })();\n    }\n\n    async onRequest(request: HttpRequest, response: HttpResponse): Promise<void> {\n        if (request.isPublicEndpoint) {\n            response.send('', {\n                code: 404,\n            });\n            return;\n        }\n        const pathname = request.url.substring(request.rootPath.length);\n        const [_, id, iface] = pathname.split('/');\n        try {\n            if (iface !== ScryptedInterface.Camera)\n                throw new Error();\n\n            const search = new URLSearchParams(pathname.split('?')[1]);\n\n            const picture = await systemManager.getDeviceById<Camera>(id).takePicture({\n                picture: {\n                    width: parseInt(search.get('width')) || undefined,\n                    height: parseInt(search.get('height')) || undefined,\n                }\n            });\n            const buffer = await mediaManager.convertMediaObjectToBuffer(picture, 'image/jpeg');\n\n            response.send(buffer, {\n                headers: {\n                    'Content-Type': 'image/jpeg',\n                    'Cache-Control': 'max-age=10',\n                }\n            });\n        }\n        catch (e) {\n            response.send('', {\n                code: 500,\n            });\n        }\n    }\n\n    async getLocalSnapshot(id: string, iface: string, search: string) {\n        const endpoint = await endpointManager.getAuthenticatedPath(this.nativeId);\n        const ret = url.resolve(path.join(endpoint, id, iface, `${Date.now()}.jpg`) + `${search}`, '');\n        return mediaManager.createMediaObject(Buffer.from(ret), ScryptedMimeTypes.LocalUrl);\n    }\n\n    async convert(data: string, fromMimeType: string, toMimeType: string): Promise<MediaObject> {\n        const url = new URL(data.toString());\n        const id = url.hostname;\n        const path = url.pathname.split('/')[1];\n        if (path === ScryptedInterface.Camera) {\n            if (toMimeType === ScryptedMimeTypes.LocalUrl)\n                return this.getLocalSnapshot(id, path, url.search);\n            const rmo: RequestMediaObject = async () => systemManager.getDeviceById<Camera>(id).takePicture();\n            return mediaManager.createMediaObject(rmo, ScryptedMimeTypes.RequestMediaObject);\n        }\n        if (path === ScryptedInterface.VideoCamera) {\n            const rmo: RequestMediaObject = async () => systemManager.getDeviceById<VideoCamera>(id).getVideoStream();\n            return mediaManager.createMediaObject(rmo, ScryptedMimeTypes.RequestMediaObject);\n        }\n        else {\n            throw new Error('Unrecognized Scrypted Media interface.')\n        }\n    }\n\n    async getDevice(nativeId: string) {\n        if (nativeId === 'http')\n            return this.httpHost;\n        if (nativeId === 'https')\n            return this.httpsHost;\n        if (nativeId === 'rmo-host')\n            return this.rmoHost;\n        if (nativeId === 'file')\n            return this.fileHost;\n        if (nativeId === 'files')\n            return this.filesHost;\n    }\n\n    async releaseDevice(id: string, nativeId: string): Promise<void> {\n    }\n}","import { createMonacoEvalDefaults } from \"../../../common/src/eval/scrypted-eval\";\n\nconst libs = {\n    script: require(\"!!raw-loader!@scrypted/common/src/eval/monaco/script-device.ts\").default,\n    util: require(\"!!raw-loader!./api/util.ts\").default,\n};\n\nexport const monacoEvalDefaults = createMonacoEvalDefaults(libs);\n","import { Device, DeviceCreator, DeviceCreatorSettings, DeviceProvider, Readme, ScryptedDeviceBase, ScryptedDeviceType, ScryptedInterface, Setting } from \"@scrypted/sdk\";\nimport { Script } from \"./script\";\nimport sdk from '@scrypted/sdk';\nimport { randomBytes } from \"crypto\";\nimport fs from 'fs';\nimport path from \"path/posix\";\n\nconst { deviceManager } = sdk;\nexport const ScriptCoreNativeId = 'scriptcore';\n\nexport class ScriptCore extends ScryptedDeviceBase implements DeviceProvider, DeviceCreator, Readme {\n    scripts = new Map<string, Promise<Script>>();\n\n    constructor() {\n        super(ScriptCoreNativeId);\n\n        for (const nativeId of deviceManager.getNativeIds()) {\n            if (nativeId?.startsWith('script:')) {\n                const script = new Script(nativeId);\n                this.scripts.set(nativeId, (async () => {\n                    if (script.providedInterfaces.length > 2) {\n                        await script.run();\n                    }\n                    else {\n                        this.reportScript(nativeId);\n                    }\n                    return script;\n                })());\n            }\n        }\n    }\n\n    async getCreateDeviceSettings(): Promise<Setting[]> {\n        return [\n            {\n                key: 'name',\n                title: 'Name',\n                description: 'The name or description of the new script.',\n            },\n            {\n                key: 'template',\n                title: 'Template',\n                description: 'The script template to use as a starting point.',\n                choices: fs.readdirSync('examples').filter(f => fs.statSync('examples/' + f).isFile()).map(f => path.basename(f)),\n            }\n        ]\n    }\n\n    async createDevice(settings: DeviceCreatorSettings): Promise<string> {\n        const { name, template } = settings;\n        const nativeId = 'script:' + randomBytes(8).toString('hex');\n        await this.reportScript(nativeId, name?.toString());\n        const script = new Script(nativeId);\n        if (template) {\n            try {\n                await script.saveScript({\n                    script: fs.readFileSync('examples/' + template).toString()\n                        .split('\\n')\n                        .filter(line => !line.includes('SCRYPTED_FILTER_EXAMPLE_LINE'))\n                        .join('\\n')\n                        .trim(),\n                });\n                await script.run();\n            }\n            catch (e) {\n            }\n        }\n        this.scripts.set(nativeId, Promise.resolve(script));\n        return nativeId;\n    }\n\n    async getReadmeMarkdown(): Promise<string> {\n        return \"Create powerful reusable scripts that can run complex actions or create custom devices.\"\n    }\n\n    async reportScript(nativeId: string, name?: string) {\n        const device: Device = {\n            providerNativeId: this.nativeId,\n            name,\n            nativeId,\n            type: ScryptedDeviceType.Program,\n            interfaces: [ScryptedInterface.Scriptable, ScryptedInterface.Program]\n        }\n        return await deviceManager.onDeviceDiscovered(device);\n    }\n\n    getDevice(nativeId: string) {\n        return this.scripts.get(nativeId);\n    }\n\n    async releaseDevice(id: string, nativeId: string): Promise<void> {\n    }\n}\n","import sdk, { Scriptable, Program, ScryptedDeviceBase, ScriptSource, ScryptedInterface, ScryptedDeviceType } from \"@scrypted/sdk\";\nimport { scryptedEval } from \"./scrypted-eval\";\nimport { monacoEvalDefaults } from \"./monaco\";\nimport { createScriptDevice, ScriptDeviceImpl } from \"@scrypted/common/src/eval/scrypted-eval\";\nimport { ScriptCoreNativeId } from \"./script-core\";\nimport { PluginAPIProxy } from \"../../../server/src/plugin/plugin-api\";\n\nconst { log, deviceManager, systemManager } = sdk;\n\nexport class Script extends ScryptedDeviceBase implements Scriptable, Program, ScriptDeviceImpl {\n    apiProxy: PluginAPIProxy;\n\n    constructor(nativeId: string) {\n        super(nativeId);\n    }\n\n    async saveScript(source: ScriptSource): Promise<void> {\n        this.storage.setItem('data', JSON.stringify({\n            'script.ts': source.script,\n        }));\n    }\n\n    async loadScripts(): Promise<{ [filename: string]: ScriptSource; }> {\n        try {\n            const scripts = JSON.parse(this.storage.getItem('data'));\n            // currently only support 1 script\n            return {\n                'script.ts': {\n                    name: 'Script',\n                    script: scripts['script.ts'],\n                    language: 'typescript',\n                    monacoEvalDefaults,\n                }\n            }\n        }\n        catch (e) {\n            return {\n                'script.ts': {\n                    name: 'Script',\n                    script: '',\n                    language: 'typescript',\n                    monacoEvalDefaults,\n                },\n            }\n        }\n    }\n\n    async postRunScript(defaultExport: any) {\n        if (defaultExport) {\n            let deviceInstance = defaultExport;\n            // support exporting a plugin class, plugin main function,\n            // or a plugin instance\n            if (deviceInstance.toString().startsWith('class '))\n                deviceInstance = new deviceInstance(this.nativeId);\n            if (typeof deviceInstance === 'function')\n                deviceInstance = await deviceInstance();\n            this.handle(deviceInstance);\n        }\n\n        const allInterfaces = this.mergeHandler(this);\n        if (allInterfaces.length !== 2) {\n            await deviceManager.onDeviceDiscovered({\n                providerNativeId: ScriptCoreNativeId,\n                nativeId: this.nativeId,\n                interfaces: allInterfaces,\n                type: ScryptedDeviceType.Unknown,\n                name: this.providedName,\n            });\n        }\n    }\n\n    prepareScript() {\n        this.apiProxy?.removeListeners();\n\n        Object.assign(this, createScriptDevice([\n            ScryptedInterface.Scriptable,\n            ScryptedInterface.Program,\n        ]));\n    }\n\n    async run(variables?: { [name: string]: any; }): Promise<any> {\n        this.prepareScript();\n\n        try {\n            const data = JSON.parse(this.storage.getItem('data'));\n\n            const { value, defaultExport, apiProxy } = await scryptedEval(this, data['script.ts'], Object.assign({\n                device: this,\n            }, variables));\n\n            this.apiProxy = apiProxy;\n\n            await this.postRunScript(defaultExport);\n            return value;\n        }\n        catch (e) {\n            this.console.error('error loading script', e);\n            throw e;\n        }\n    }\n\n    async eval(source: ScriptSource, variables?: { [name: string]: any }) {\n        this.prepareScript();\n\n        const { value, defaultExport, apiProxy } = await scryptedEval(this, source.script, Object.assign({\n            device: this,\n        }, variables));\n\n        this.apiProxy = apiProxy;\n\n        await this.postRunScript(defaultExport);\n        return value;\n    }\n\n    // will be done at runtime\n    mergeHandler(device: ScryptedDeviceBase): string[] {\n        throw new Error(\"Method not implemented.\");\n    }\n    handle<T>(handler?: T & object): void {\n        throw new Error(\"Method not implemented.\");\n    }\n    handleTypes(...interfaces: string[]): void {\n        throw new Error(\"Method not implemented.\");\n    }\n}\n","import { ScryptedDeviceBase } from \"@scrypted/sdk\";\nimport { scryptedEval as scryptedEvalBase } from \"@scrypted/common/src/eval/scrypted-eval\";\n\nexport async function scryptedEval(device: ScryptedDeviceBase, script: string, params: { [name: string]: any }) {\n    return scryptedEvalBase(device, script, {}, params);\n}\n","export const updatePluginsData = {\n    \"triggers\": [\n        {\n            \"condition\": null,\n            \"id\": \"scheduler\",\n            \"model\": {\n                \"hour\": \"03\",\n                \"minute\": \"15\",\n                \"rpc\": {\n                    \"method\": \"schedule\",\n                    \"parameters\": [\n                        {\n                            \"hour\": 3,\n                            \"minute\": 15,\n                            \"clockType\": \"AM\",\n                            \"sunday\": true,\n                            \"monday\": true,\n                            \"tuesday\": true,\n                            \"wednesday\": true,\n                            \"thursday\": true,\n                            \"friday\": true,\n                            \"saturday\": true\n                        }\n                    ]\n                },\n                \"clockType\": \"AM\",\n                \"sunday\": true,\n                \"monday\": true,\n                \"tuesday\": true,\n                \"saturday\": true,\n                \"wednesday\": true,\n                \"thursday\": true,\n                \"friday\": true\n            }\n        }\n    ],\n    \"actions\": [\n        {\n            \"id\": \"update-plugins\",\n            \"model\": {\n            }\n        }\n    ],\n    \"staticEvents\": false,\n    \"denoiseEvents\": false,\n    \"runToCompletion\": false,\n    \"automationType\": \"Automation\"\n}\n","import sdk, { DeviceCreator, DeviceCreatorSettings, DeviceProvider, Readme, ScryptedDeviceBase, ScryptedDeviceType, ScryptedInterface, ScryptedUser, ScryptedUserAccessControl, Setting, Settings, SettingValue } from \"@scrypted/sdk\";\nimport { addAccessControlsForInterface } from \"@scrypted/sdk/acl\";\nimport { StorageSettings } from \"@scrypted/sdk/storage-settings\";\nexport const UsersNativeId = 'users';\n\ntype DBUser = { username: string, admin: boolean };\n\nexport class User extends ScryptedDeviceBase implements Settings, ScryptedUser {\n    storageSettings = new StorageSettings(this, {\n        defaultAccess: {\n            title: 'Default Access',\n            description: 'Grant access to @scrypted/core and @scrypted/webrtc',\n            defaultValue: true,\n            type: 'boolean',\n        },\n        interfaces: {\n            title: 'Interfaces',\n            description: 'The interfaces this user can access. Admin users can access all interfaces on all devices. Scrypted NVR users should use NVR Permissions to grant access to the NVR and associated cameras.',\n            type: 'interface',\n            multiple: true,\n            defaultValue: [],\n        },\n    })\n\n    async getScryptedUserAccessControl(): Promise<ScryptedUserAccessControl> {\n        const usersService = await sdk.systemManager.getComponent('users');\n        const users: DBUser[] = await usersService.getAllUsers();\n        const user = users.find(user => user.username === this.username);\n        if (!user)\n            throw new Error(\"user not found\");\n\n        if (user.admin)\n            return;\n\n        const self = sdk.deviceManager.getDeviceState(this.nativeId);\n\n        const ret: ScryptedUserAccessControl = {\n            devicesAccessControls: [\n                ...this.storageSettings.values.defaultAccess\n                    ? [\n                        // grant this? not sure.\n                        addAccessControlsForInterface(self.id, ScryptedInterface.ScryptedDevice),\n                        addAccessControlsForInterface(sdk.systemManager.getDeviceByName('@scrypted/webrtc').id,\n                            ScryptedInterface.ScryptedDevice,\n                            ScryptedInterface.EngineIOHandler),\n                        addAccessControlsForInterface(sdk.systemManager.getDeviceByName('@scrypted/core').id,\n                            ScryptedInterface.ScryptedDevice,\n                            ScryptedInterface.EngineIOHandler),\n                    ]\n                    : [],\n                ...this.storageSettings.values.interfaces.map((deviceInterface: string) => {\n                    const [id, scryptedInterface] = deviceInterface.split('#');\n                    return addAccessControlsForInterface(id, ScryptedInterface.ScryptedDevice, scryptedInterface as ScryptedInterface);\n                }),\n            ]\n        };\n\n        return ret;\n    }\n\n    get username() {\n        return this.nativeId.substring('user:'.length);\n    }\n\n    async getSettings(): Promise<Setting[]> {\n        return [\n            {\n                key: 'username',\n                title: 'User Name',\n                readonly: true,\n                value: this.username,\n            },\n            {\n                key: 'password',\n                title: 'Password',\n                description: 'Change the password.',\n                type: 'password',\n            },\n            ...await this.storageSettings.getSettings(),\n        ]\n    }\n\n    async putSetting(key: string, value: SettingValue): Promise<void> {\n        if (key !== 'password')\n            return this.storageSettings.putSetting(key, value);\n        const usersService = await sdk.systemManager.getComponent('users');\n        const users: DBUser[] = await usersService.getAllUsers();\n        const user = users.find(user => user.username === this.username);\n        if (!user)\n            return;\n        const { username, admin } = user;\n        const nativeId = `user:${username}`;\n        const aclId = await sdk.deviceManager.onDeviceDiscovered({\n            providerNativeId: this.nativeId,\n            name: username.toString(),\n            nativeId,\n            interfaces: [\n                ScryptedInterface.ScryptedUser,\n                ScryptedInterface.Settings,\n            ],\n            type: ScryptedDeviceType.Person,\n        })\n        await usersService.addUser(user.username, value.toString(), admin ? undefined : aclId);\n    }\n}\n\nexport class UsersCore extends ScryptedDeviceBase implements Readme, DeviceProvider, DeviceCreator {\n    constructor() {\n        super(UsersNativeId);\n\n        this.syncUsers();\n    }\n\n    async getDevice(nativeId: string): Promise<any> {\n        return new User(nativeId);\n    }\n\n    async releaseDevice(id: string, nativeId: string): Promise<void> {\n        const username = nativeId.substring('user:'.length);\n        const usersService = await sdk.systemManager.getComponent('users');\n        await usersService.removeUser(username);\n    }\n\n    async getCreateDeviceSettings(): Promise<Setting[]> {\n        return [\n            {\n                key: 'username',\n                title: 'User name',\n            },\n            {\n                key: 'password',\n                type: 'password',\n                title: 'Password',\n            },\n            {\n                key: 'admin',\n                type: 'boolean',\n                title: 'Admin',\n                description: 'Grant this user administrator privileges.',\n            },\n        ]\n    }\n\n    async createDevice(settings: DeviceCreatorSettings): Promise<string> {\n        const { username, password, admin } = settings;\n        const usersService = await sdk.systemManager.getComponent('users');\n        const nativeId = `user:${username}`;\n        const aclId = await sdk.deviceManager.onDeviceDiscovered({\n            providerNativeId: this.nativeId,\n            name: username.toString(),\n            nativeId,\n            interfaces: [\n                ScryptedInterface.ScryptedUser,\n                ScryptedInterface.Settings,\n            ],\n            type: ScryptedDeviceType.Person,\n        })\n\n        await usersService.addUser(username, password, admin ? undefined : aclId);\n        await this.syncUsers();\n        return nativeId;\n    }\n\n    async getReadmeMarkdown(): Promise<string> {\n        return \"Create and Manage the users that can log into Scrypted.\";\n    }\n\n    async syncUsers() {\n        const usersService = await sdk.systemManager.getComponent('users');\n        const users: DBUser[] = await usersService.getAllUsers();\n        await sdk.deviceManager.onDevicesChanged({\n            providerNativeId: this.nativeId,\n            devices: users.map(user => ({\n                name: user.username,\n                nativeId: `user:${user.username}`,\n                interfaces: [\n                    ScryptedInterface.ScryptedUser,\n                    ScryptedInterface.Settings,\n                ],\n                type: ScryptedDeviceType.Person,\n            })),\n        })\n    }\n}\n","import { ScryptedDevice, ScryptedDeviceType, ScryptedInterface, SystemManager } from \"@scrypted/types\";\n\nexport function findPluginDevice<T>(systemManager: SystemManager, pluginId: string, nativeId: string): ScryptedDevice & T {\n    for (const id of Object.keys(systemManager.getSystemState())) {\n        const device = systemManager.getDeviceById<T>(id);\n        if (device.nativeId === nativeId && device.pluginId === pluginId)\n            return device;\n    }\n}\n\nexport function deviceIsEditable(device: ScryptedDevice) {\n    if (!device)\n        return;\n    if (device.interfaces.includes(ScryptedInterface.ScryptedPlugin))\n        return;\n    if (device.type === ScryptedDeviceType.Builtin || device.type === ScryptedDeviceType.API)\n        return;\n\n    return true;\n}\n\nexport function typeToIcon(type) {\n    switch (type) {\n        case ScryptedDeviceType.Camera: return \"fa-video\";\n        case ScryptedDeviceType.Doorbell: return \"fa-bell\";\n        case ScryptedDeviceType.Fan: return \"fa-fan\";\n        case ScryptedDeviceType.Light: return \"fa-lightbulb\";\n        case ScryptedDeviceType.Switch: return \"fa-toggle-on\";\n        case ScryptedDeviceType.Outlet: return \"fa-plug\";\n        case ScryptedDeviceType.Sensor: return \"fa-exclamation-triangle\";\n        case ScryptedDeviceType.Scene: return \"fa-sun\";\n        case ScryptedDeviceType.Program: return \"fa-code\";\n        case ScryptedDeviceType.Automation: return \"fa-bolt\";\n        case ScryptedDeviceType.Event: return \"fa-exclamation\";\n        case ScryptedDeviceType.Vacuum: return \"fa-trash\";\n        case ScryptedDeviceType.Notifier: return \"fa-bell\";\n        case ScryptedDeviceType.Lock: return \"fa-unlock-alt\";\n        case ScryptedDeviceType.Thermostat: return \"fa-thermometer-three-quarters\";\n        case ScryptedDeviceType.PasswordControl: return \"fa-key\";\n        case ScryptedDeviceType.Display: return \"fa-tv\";\n        case ScryptedDeviceType.Speaker: return \"fa-volume-up\";\n        case ScryptedDeviceType.Entry: return \"fa-warehouse\";\n        case ScryptedDeviceType.Garage: return \"fa-warehouse\";\n        case ScryptedDeviceType.API: return \"fa-cloud\";\n        case ScryptedDeviceType.DataSource: return \"fa-chart-area\";\n        case ScryptedDeviceType.DeviceProvider: return \"fa-server\";\n        case ScryptedDeviceType.Unknown: return \"fa-question-circle\";\n        case ScryptedDeviceType.Valve: return \"fa-faucet\";\n        case ScryptedDeviceType.Irrigation: return \"fa-faucet\";\n        case ScryptedDeviceType.Person: return \"fa-user\";\n        case ScryptedDeviceType.SecuritySystem: return \"fa-shield-alt\";\n        case ScryptedDeviceType.Builtin: return \"fa-server\";\n        case ScryptedDeviceType.Siren: return \"fa-siren\";\n\n    }\n    return \"fa-toggle-on\";\n}\n\nexport function getComponentName(id: string) {\n    switch (id) {\n        case \"script\":\n            return \"Plugins\";\n        case \"aggregate\":\n            return \"Device Groups\";\n        case \"mail\":\n            return \"Incoming Mail\";\n        case \"webpush\":\n            return \"Web Push Notifier\";\n        case \"automation\":\n            return \"Automations\";\n    }\n    return \"Unknown Component\";\n}\n\nexport function getComponentWebPath(id) {\n    return `/web/component/${id}`;\n}\n\nexport function getDeviceViewPath(id) {\n    return `/device/${id}`;\n}\n\nexport function getComponentViewPath(id) {\n    return `/component/${id}`;\n}\n\nexport async function removeAlert(alert) {\n    const alerts = await this.$scrypted.systemManager.getComponent('alerts');\n    await alerts.removeAlert(alert);\n    this.$store.commit(\"removeAlert\", alert._id);\n}\n\nexport function getAlertIcon(alert) {\n    const device = '/device/';\n    if (alert.path.startsWith(device)) {\n        const id = alert.path.replace(device, '');\n        const d = this.$scrypted.systemManager.getDeviceById(id);\n        if (!d)\n            return 'fa-question';\n        return typeToIcon(d.type);\n    }\n    return 'fa-bell';\n}\n\nexport function hasFixedPhysicalLocation(type: ScryptedDeviceType, interfaces?: ScryptedInterface[]): boolean {\n    // prevent unused.\n    interfaces;\n    switch (type) {\n        case ScryptedDeviceType.Builtin:\n        case ScryptedDeviceType.Program:\n        case ScryptedDeviceType.Automation:\n        case ScryptedDeviceType.API:\n        case ScryptedDeviceType.Scene:\n        case ScryptedDeviceType.Event:\n        case ScryptedDeviceType.DeviceProvider:\n        case ScryptedDeviceType.DataSource:\n        case ScryptedDeviceType.Person:\n            return false;\n    }\n    return true;\n}\n\ninterface Inference {\n    type: ScryptedDeviceType,\n    interfaces: ScryptedInterface[];\n}\nconst inference: Inference[] = [];\n\nfunction addInference(type: ScryptedDeviceType, ...interfaces: ScryptedInterface[]) {\n    inference.push({\n        type,\n        interfaces,\n    })\n}\n\n// in order of least ambiguous to most ambiguous\naddInference(ScryptedDeviceType.Display, ScryptedInterface.MediaPlayer);\naddInference(ScryptedDeviceType.Speaker, ScryptedInterface.MediaPlayer);\n\naddInference(ScryptedDeviceType.Lock, ScryptedInterface.Lock);\naddInference(ScryptedDeviceType.PasswordControl, ScryptedInterface.PasswordStore);\naddInference(ScryptedDeviceType.Camera, ScryptedInterface.Camera);\naddInference(ScryptedDeviceType.Camera, ScryptedInterface.VideoCamera);\naddInference(ScryptedDeviceType.Camera, ScryptedInterface.RTCSignalingChannel);\naddInference(ScryptedDeviceType.Doorbell, ScryptedInterface.VideoCamera);\naddInference(ScryptedDeviceType.Doorbell, ScryptedInterface.RTCSignalingChannel);\naddInference(ScryptedDeviceType.Thermostat, ScryptedInterface.TemperatureSetting);\naddInference(ScryptedDeviceType.Garage, ScryptedInterface.Entry);\naddInference(ScryptedDeviceType.Entry, ScryptedInterface.Entry);\n\naddInference(ScryptedDeviceType.Light, ScryptedInterface.Brightness);\n\naddInference(ScryptedDeviceType.Outlet, ScryptedInterface.OnOff);\naddInference(ScryptedDeviceType.Switch, ScryptedInterface.OnOff);\naddInference(ScryptedDeviceType.Light, ScryptedInterface.OnOff);\naddInference(ScryptedDeviceType.Fan, ScryptedInterface.OnOff);\n\naddInference(ScryptedDeviceType.Sensor, ScryptedInterface.Thermometer);\n\naddInference(ScryptedDeviceType.DeviceProvider, ScryptedInterface.DeviceProvider);\n\nfunction checkSubset(set: ScryptedInterface[], subset: ScryptedInterface[]) {\n    for (const i of subset) {\n        if (!set.includes(i))\n            return false;\n    }\n\n    return true;\n}\n\nexport function inferTypesFromInterfaces(existingType: ScryptedDeviceType, providedType: ScryptedDeviceType, interfaces: ScryptedInterface[]): ScryptedDeviceType[] {\n    if (providedType === ScryptedDeviceType.Unknown) {\n        return Object.values(ScryptedDeviceType).filter(t => t !== ScryptedDeviceType.Builtin);\n    }\n    const ret: Set<ScryptedDeviceType> = new Set();\n    if (existingType)\n        ret.add(existingType);\n    if (providedType)\n        ret.add(providedType);\n    inference.filter(i => checkSubset(interfaces, i.interfaces)).forEach(i => ret.add(i.type));\n\n    for (const iface of interfaces) {\n        if (iface.indexOf(\"Sensor\") !== -1) {\n            ret.add(ScryptedDeviceType.Sensor);\n        }\n    }\n\n    return [...ret];\n}\n\nexport function isSyncable(type: ScryptedDeviceType) {\n    if (hasFixedPhysicalLocation(type)) {\n        return true;\n    }\n    switch (type) {\n        case ScryptedDeviceType.Scene:\n            return true;\n        // more?\n    }\n    return false;\n}\n\nconst interfaceFriendlyNames = new Map<ScryptedInterface, string>();\ninterfaceFriendlyNames.set(ScryptedInterface.MixinProvider, \"Compatible Things\");\ninterfaceFriendlyNames.set(ScryptedInterface.DeviceProvider, \"Providing Things\");\ninterfaceFriendlyNames.set(ScryptedInterface.VideoClips, \"Video Clips\");\ninterfaceFriendlyNames.set(ScryptedInterface.Notifier, \"Send Notification\");\ninterfaceFriendlyNames.set(ScryptedInterface.PasswordStore, \"Passwords\");\ninterfaceFriendlyNames.set(ScryptedInterface.Brightness, \"Adjust Brightness\");\n\nexport function getInterfaceFriendlyName(iface: ScryptedInterface) {\n    return interfaceFriendlyNames.get(iface) || iface.toString();\n}","import { EventDetails, EventListenerOptions, EventListenerRegister, ScryptedInterface } from \"@scrypted/types\";\n\nexport class EventListenerRegisterImpl implements EventListenerRegister {\n    removeListener: () => void;\n\n    constructor(removeListener: () => void) {\n        this.removeListener = removeListener;\n    }\n}\n\nexport function getMixinEventName(options: string | EventListenerOptions) {\n    let { event, mixinId } = (options || {}) as EventListenerOptions;\n    if (!event && typeof options === 'string')\n        event = options as string;\n    if (!event)\n        event = undefined;\n    if (!mixinId)\n        return event;\n    let ret = `${event}-mixin-${mixinId}`;\n    return ret;\n}\n\n// todo: storage should only go to host plugin\nconst allowedEventInterfaces = new Set<string>([ScryptedInterface.ScryptedDevice, 'Logger', 'Storage'])\n\nexport class EventRegistry {\n    systemListeners = new Set<(id: string, eventDetails: EventDetails, eventData: any) => void>();\n    listeners: { [token: string]: Set<(eventDetails: EventDetails, eventData: any) => void> } = {};\n\n    listen(callback: (id: string, eventDetails: EventDetails, eventData: any) => void): EventListenerRegister {\n        const events = this.systemListeners;\n        events.add(callback);\n        return new EventListenerRegisterImpl(() => {\n            events.delete(callback);\n            callback = undefined;\n        });\n    }\n\n    listenDevice(id: string, options: string | EventListenerOptions, callback: (eventDetails: EventDetails, eventData: any) => void): EventListenerRegister {\n        let event = getMixinEventName(options)\n        const token = `${id}#${event}`;\n        let events = this.listeners[token];\n        if (!events) {\n            events = new Set();\n            this.listeners[token] = events;\n        }\n\n        events.add(callback);\n        return new EventListenerRegisterImpl(() => {\n            events.delete(callback);\n            callback = undefined;\n        });\n    }\n\n    notify(id: string | undefined, eventTime: number, eventInterface: string, property: string | undefined, value: any, options?: {\n        changed?: boolean;\n        mixinId?: string;\n    }): boolean {\n        const { changed, mixinId } = options || {};\n        // prevent property event noise\n        if (property && !changed)\n            return false;\n\n        const eventDetails: EventDetails = {\n            eventId: undefined,\n            eventInterface,\n            eventTime,\n            property,\n            mixinId,\n        };\n\n        return this.notifyEventDetails(id, eventDetails, value);\n    }\n\n    notifyEventDetails(id: string | undefined, eventDetails: EventDetails, value: any, eventInterface?: string) {\n        eventDetails.eventId ||= Math.random().toString(36).substring(2);\n        eventInterface ||= eventDetails.eventInterface;\n\n        // system listeners only get state changes.\n        // there are many potentially noisy stateless events, like\n        // object detection and settings changes.\n        if ((eventDetails.property && !eventDetails.mixinId) || allowedEventInterfaces.has(eventInterface)) {\n            for (const event of this.systemListeners) {\n                event(id, eventDetails, value);\n            }\n        }\n\n        const events = this.listeners[`${id}#${eventInterface}`];\n        if (events) {\n            for (const event of events) {\n                event(eventDetails, value);\n            }\n        }\n\n        const allEvents = this.listeners[`${id}#${undefined}`];\n        if (allEvents) {\n            for (const event of allEvents) {\n                event(eventDetails, value);\n            }\n        }\n\n        return true;\n    }\n}\n","import { ScryptedInterface, ScryptedInterfaceDescriptor, ScryptedInterfaceDescriptors } from \"@scrypted/types\";\n\nexport const allInterfaceProperties: string[] = [].concat(...Object.values(ScryptedInterfaceDescriptors).map(type => type.properties));\n\nexport function getPropertyInterfaces(descriptors: { [scryptedInterface: string]: ScryptedInterfaceDescriptor }) {\n    const propertyInterfaces: { [property: string]: ScryptedInterface } = {};\n\n    for (const descriptor of Object.values(descriptors)) {\n        for (const property of descriptor.properties) {\n            propertyInterfaces[property] = descriptor.name as ScryptedInterface;\n        }\n    }\n\n    return propertyInterfaces;\n}\n\nexport const propertyInterfaces = getPropertyInterfaces(ScryptedInterfaceDescriptors);\n\nexport function getInterfaceMethods(descriptors: { [scryptedInterface: string]: ScryptedInterfaceDescriptor }, interfaces: Set<string>) {\n    return Object.values(descriptors).filter(e => interfaces.has(e.name)).map(type => type.methods).flat();\n}\n\nexport function getInterfaceProperties(descriptors: { [scryptedInterface: string]: ScryptedInterfaceDescriptor }, interfaces: Set<string>) {\n    return Object.values(descriptors).filter(e => interfaces.has(e.name)).map(type => type.properties).flat();\n}\n\nexport function isValidInterfaceMethod(descriptors: { [scryptedInterface: string]: ScryptedInterfaceDescriptor }, interfaces: Set<string>, method: string) {\n    const availableMethods = getInterfaceMethods(descriptors, interfaces);\n    return availableMethods.includes(method) || descriptors[ScryptedInterface.ScryptedDevice].methods.includes(method);\n}\n\nexport function isValidInterfaceProperty(descriptors: { [scryptedInterface: string]: ScryptedInterfaceDescriptor }, interfaces: string[], property: string): boolean {\n    const availableProperties = getInterfaceProperties(descriptors, new Set(interfaces));\n    return availableProperties.includes(property);\n}\n","import type { Device, DeviceManifest, EventDetails, EventListenerOptions, EventListenerRegister, MediaManager, MediaObject, ScryptedDevice, ScryptedInterfaceDescriptor, ScryptedInterfaceProperty, ScryptedNativeId, SystemDeviceState } from '@scrypted/types';\nimport { AccessControls } from './acl';\n\nexport interface PluginLogger {\n    log(level: string, message: string): Promise<void>;\n    clear(): Promise<void>;\n    clearAlert(message: string): Promise<void>;\n    clearAlerts(): Promise<void>;\n}\n\nexport interface PluginHostInfo {\n    serverVersion: string;\n}\n\nexport interface PluginAPI {\n    setState(nativeId: ScryptedNativeId, key: string, value: any): Promise<void>;\n    onDevicesChanged(deviceManifest: DeviceManifest): Promise<void>;\n    onDeviceDiscovered(device: Device): Promise<string>;\n    onDeviceEvent(nativeId: ScryptedNativeId, eventInterface: string, eventData?: any): Promise<void>;\n    onMixinEvent(id: string, nativeId: ScryptedNativeId, eventInterface: string, eventData?: any): Promise<void>;\n    onDeviceRemoved(nativeId: string): Promise<void>;\n    setStorage(nativeId: string, storage: { [key: string]: any }): Promise<void>;\n\n    getDeviceById(id: string): Promise<ScryptedDevice>;\n    setDeviceProperty(id: string, property: ScryptedInterfaceProperty, value: any): Promise<void>;\n    removeDevice(id: string): Promise<void>;\n    listen(EventListener: (id: string, eventDetails: EventDetails, eventData: any) => void): Promise<EventListenerRegister>;\n    listenDevice(id: string, event: string | EventListenerOptions, callback: (eventDetails: EventDetails, eventData: any) => void): Promise<EventListenerRegister>;\n\n    getLogger(nativeId: ScryptedNativeId): Promise<PluginLogger>;\n\n    getComponent(id: string): Promise<any>;\n\n    getMediaManager(): Promise<MediaManager>;\n\n    requestRestart(): Promise<void>;\n\n    setScryptedInterfaceDescriptors(typesVersion: string, descriptors: { [scryptedInterface: string]: ScryptedInterfaceDescriptor }): Promise<void>;\n}\n\nclass EventListenerRegisterProxy implements EventListenerRegister {\n    __proxy_oneway_methods = [\n        'removeListener',\n    ];\n\n    removeListener() {\n        this.listeners.delete(this);\n        this.listener.removeListener();\n    }\n\n    constructor(public listener: EventListenerRegister, public listeners: Set<EventListenerRegister>) {\n        this.listeners.add(this);\n    }\n}\n\nexport class PluginAPIManagedListeners {\n    listeners = new Set<EventListenerRegister>();\n\n    manageListener(listener: EventListenerRegister): EventListenerRegister {\n        return new EventListenerRegisterProxy(listener, this.listeners);\n    }\n\n    removeListeners() {\n        for (const l of [...this.listeners]) {\n            l.removeListener();\n        }\n        this.listeners.clear();\n    }\n}\n\nexport class PluginAPIProxy extends PluginAPIManagedListeners implements PluginAPI {\n    acl: AccessControls;\n\n    constructor(public api: PluginAPI, public mediaManager?: MediaManager) {\n        super();\n    }\n\n    setScryptedInterfaceDescriptors(typesVersion: string, descriptors: { [scryptedInterface: string]: ScryptedInterfaceDescriptor }): Promise<void> {\n        this.acl?.deny();\n        return this.api.setScryptedInterfaceDescriptors(typesVersion, descriptors);\n    }\n\n    setState(nativeId: ScryptedNativeId, key: string, value: any): Promise<void> {\n        this.acl?.deny();\n        return this.api.setState(nativeId, key, value);\n    }\n    onDevicesChanged(deviceManifest: DeviceManifest): Promise<void> {\n        this.acl?.deny();\n        return this.api.onDevicesChanged(deviceManifest);\n    }\n    onDeviceDiscovered(device: Device): Promise<string> {\n        this.acl?.deny();\n        return this.api.onDeviceDiscovered(device);\n    }\n    onDeviceEvent(nativeId: ScryptedNativeId, eventInterface: any, eventData?: any): Promise<void> {\n        this.acl?.deny();\n        return this.api.onDeviceEvent(nativeId, eventInterface, eventData);\n    }\n    onMixinEvent(id: string, nativeId: ScryptedNativeId, eventInterface: string, eventData?: any): Promise<void> {\n        this.acl?.deny();\n        return this.api.onMixinEvent(id, nativeId, eventInterface, eventData);\n    }\n    onDeviceRemoved(nativeId: string): Promise<void> {\n        this.acl?.deny();\n        return this.api.onDeviceRemoved(nativeId);\n    }\n    setStorage(nativeId: ScryptedNativeId, storage: { [key: string]: any; }): Promise<void> {\n        this.acl?.deny();\n        return this.api.setStorage(nativeId, storage);\n    }\n    getDeviceById(id: string): Promise<ScryptedDevice> {\n        if (this.acl?.shouldRejectDevice(id))\n            return;\n        return this.api.getDeviceById(id);\n    }\n    setDeviceProperty(id: string, property: ScryptedInterfaceProperty, value: any): Promise<void> {\n        this.acl?.deny();\n        return this.api.setDeviceProperty(id, property, value);\n    }\n    removeDevice(id: string): Promise<void> {\n        this.acl?.deny();\n        return this.api.removeDevice(id);\n    }\n    async listen(callback: (id: string, eventDetails: EventDetails, eventData: any) => void): Promise<EventListenerRegister> {\n        if (!this.acl)\n            return this.manageListener(await this.api.listen(callback));\n\n        return this.manageListener(await this.api.listen((id, details, data) => {\n            if (!this.acl.shouldRejectEvent(id, details))\n                callback(id, details, data);\n        }));\n    }\n    async listenDevice(id: string, event: string | EventListenerOptions, callback: (eventDetails: EventDetails, eventData: any) => void): Promise<EventListenerRegister> {\n        if (!this.acl)\n            return this.manageListener(await this.api.listenDevice(id, event, callback));\n\n        return this.manageListener(await this.api.listenDevice(id, event, (details, data) => {\n            if (!this.acl.shouldRejectEvent(id, details))\n                callback(details, data);\n        }));\n    }\n    getLogger(nativeId: ScryptedNativeId): Promise<PluginLogger> {\n        this.acl?.deny();\n        return this.api.getLogger(nativeId);\n    }\n    getComponent(id: string): Promise<any> {\n        this.acl?.deny();\n        return this.api.getComponent(id);\n    }\n    async getMediaManager(): Promise<MediaManager> {\n        return this.mediaManager;\n    }\n\n    async requestRestart() {\n        this.acl?.deny();\n        return this.api.requestRestart();\n    }\n}\n\nexport interface PluginRemoteLoadZipOptions {\n    /**\n     * The filename to load the script as. Use for debugger source mapping.\n     */\n    filename?: string;\n    /**\n     * The path that the zip is currently unzipped at on the server. May not\n     * exist on the \"remote\", if it is not the same machine.\n     */\n    unzippedPath?: string;\n    fork?: boolean;\n\n    clusterId: string;\n    clusterSecret: string;\n}\n\nexport interface PluginRemote {\n    loadZip(packageJson: any, zipData: Buffer | string, options: PluginRemoteLoadZipOptions): Promise<any>;\n    setSystemState(state: { [id: string]: { [property: string]: SystemDeviceState } }): Promise<void>;\n    setNativeId(nativeId: ScryptedNativeId, id: string, storage: { [key: string]: any }): Promise<void>;\n    updateDeviceState(id: string, state: { [property: string]: SystemDeviceState }): Promise<void>;\n    /**\n     * @deprecated\n     */\n    notify(id: string, eventTime: number, eventInterface: string, property: string | undefined, value: SystemDeviceState | any, changed?: boolean): Promise<void>;\n    notify(id: string, eventDetails: EventDetails, eventData: SystemDeviceState | any): Promise<void>;\n\n    ioEvent(id: string, event: string, message?: any): Promise<void>;\n\n    createDeviceState(id: string, setState: (property: string, value: any) => Promise<any>): Promise<any>;\n\n    getServicePort(name: string, ...args: any[]): Promise<number>;\n}\n\nexport interface MediaObjectRemote extends MediaObject {\n    getData(): Promise<Buffer | string>;\n}\n","import { EventListener, EventListenerOptions, EventListenerRegister, Logger, ScryptedDevice, ScryptedDeviceType, ScryptedInterface, ScryptedInterfaceDescriptor, ScryptedInterfaceDescriptors, ScryptedInterfaceProperty, SystemDeviceState, SystemManager } from \"@scrypted/types\";\nimport { EventRegistry } from \"../event-registry\";\nimport { PrimitiveProxyHandler, RpcPeer } from '../rpc';\n// import type { PluginComponent } from \"../services/plugin\";\nimport { getInterfaceMethods, getInterfaceProperties, getPropertyInterfaces, isValidInterfaceMethod, propertyInterfaces } from \"./descriptor\";\nimport { PluginAPI } from \"./plugin-api\";\n\nfunction newDeviceProxy(id: string, systemManager: SystemManagerImpl) {\n    const handler = new DeviceProxyHandler(id, systemManager);\n    return new Proxy(handler, handler);\n}\n\nclass DeviceProxyHandler implements PrimitiveProxyHandler<any>, ScryptedDevice {\n    customProperties: Map<string | number | symbol, any>;\n    device: Promise<ScryptedDevice>;\n    constructor(public id: string, public systemManager: SystemManagerImpl) {\n    }\n\n    toPrimitive() {\n        return `ScryptedDevice-${this.id}`\n    }\n\n    ownKeys(target: any): ArrayLike<string | symbol> {\n        const interfaces = new Set<string>(this.systemManager.state[this.id].interfaces.value);\n        const methods = getInterfaceMethods(this.systemManager.descriptors || ScryptedInterfaceDescriptors, interfaces);\n        const properties = getInterfaceProperties(this.systemManager.descriptors || ScryptedInterfaceDescriptors, interfaces);\n        return [...methods, ...properties];\n    }\n\n    getOwnPropertyDescriptor(target: any, p: string | symbol): PropertyDescriptor {\n        const interfaces = new Set<string>(this.systemManager.state[this.id].interfaces.value);\n        const methods = getInterfaceMethods(this.systemManager.descriptors || ScryptedInterfaceDescriptors, interfaces);\n        const prop = p.toString();\n        if (methods.includes(prop)) {\n            return {\n                configurable: true,\n            };\n        }\n        const properties = getInterfaceProperties(this.systemManager.descriptors || ScryptedInterfaceDescriptors, interfaces);\n        if (properties.includes(prop)) {\n            return {\n                configurable: true,\n                value: this.systemManager.state[this.id][prop]?.value\n            }\n        }\n    }\n\n    deleteProperty(target: any, p: string | symbol): boolean {\n        const prop = p.toString();\n        if (Object.keys(ScryptedInterfaceProperty).includes(prop))\n            return false;\n\n        this.customProperties ||= new Map();\n        this.customProperties.set(p, undefined);\n        return true;\n    }\n\n    set(target: any, p: string | symbol, newValue: any, receiver: any): boolean {\n        const prop = p.toString();\n        if (Object.keys(ScryptedInterfaceProperty).includes(prop))\n            return false;\n\n        this.customProperties ||= new Map();\n        this.customProperties.set(p, newValue);\n\n        return true;\n    }\n\n    get(target: any, p: PropertyKey, receiver: any): any {\n        if (p === 'id')\n            return this.id;\n\n        if (this.customProperties?.has(p))\n            return this.customProperties.get(p);\n\n        const handled = RpcPeer.handleFunctionInvocations(this, target, p, receiver);\n        if (handled)\n            return handled;\n\n        const interfaces = new Set<string>(this.systemManager.state[this.id].interfaces?.value || []);\n        const prop = p.toString();\n        const isValidProperty = this.systemManager.propertyInterfaces?.[prop] || propertyInterfaces[prop];\n\n        // this will also return old properties that should not exist on a device. ie, a disabled mixin provider.\n        // should this change?\n        if (isValidProperty)\n            return (this.systemManager.state[this.id] as any)?.[p]?.value;\n\n        if (!isValidInterfaceMethod(this.systemManager.descriptors || ScryptedInterfaceDescriptors, interfaces, prop))\n            return;\n\n        if (ScryptedInterfaceDescriptors[ScryptedInterface.ScryptedDevice].methods.includes(prop))\n            return (this as any)[p].bind(this);\n\n        return new Proxy(() => p, this);\n    }\n\n    ensureDevice() {\n        if (!this.device)\n            this.device = this.systemManager.api.getDeviceById(this.id);\n        return this.device;\n    }\n\n    async apply(target: any, thisArg: any, argArray?: any) {\n        const method = target();\n        const device = await this.ensureDevice();\n        return (device as any)[method](...argArray);\n    }\n\n    listen(event: string | EventListenerOptions, callback: EventListener): EventListenerRegister {\n        return this.systemManager.listenDevice(this.id, event, callback);\n    }\n\n    async setName(name: string): Promise<void> {\n        return this.systemManager.api.setDeviceProperty(this.id, ScryptedInterfaceProperty.name, name);\n    }\n    async setRoom(room: string): Promise<void> {\n        return this.systemManager.api.setDeviceProperty(this.id, ScryptedInterfaceProperty.room, room);\n    }\n    async setType(type: ScryptedDeviceType): Promise<void> {\n        return this.systemManager.api.setDeviceProperty(this.id, ScryptedInterfaceProperty.type, type);\n    }\n\n    async setMixins(mixins: string[]) {\n        const plugins = await this.systemManager.getComponent('plugins');// as PluginComponent;\n        await plugins.setMixins(this.id, mixins);\n    }\n\n    async probe(): Promise<boolean> {\n        return this.apply(() => 'probe', undefined, []);\n    }\n}\n\n\nclass EventListenerRegisterImpl implements EventListenerRegister {\n    promise: Promise<EventListenerRegister>;\n    constructor(promise: Promise<EventListenerRegister>) {\n        this.promise = promise;\n    }\n    async removeListener(): Promise<void> {\n        try {\n            const register = await this.promise;\n            this.promise = undefined;\n            register?.removeListener();\n        }\n        catch (e) {\n            console.error('removeListener', e);\n        }\n    }\n}\n\nfunction makeOneWayCallback<T>(input: T): T {\n    const f: any = input;\n    const oneways: string[] = f[RpcPeer.PROPERTY_PROXY_ONEWAY_METHODS] || [];\n    if (!oneways.includes(null))\n        oneways.push(null);\n    f[RpcPeer.PROPERTY_PROXY_ONEWAY_METHODS] = oneways;\n    return input;\n}\n\nexport class SystemManagerImpl implements SystemManager {\n    api: PluginAPI;\n    state: { [id: string]: { [property: string]: SystemDeviceState } };\n    deviceProxies: { [id: string]: ScryptedDevice } = {};\n    log: Logger;\n    events = new EventRegistry();\n    typesVersion: string;\n    descriptors: { [scryptedInterface: string]: ScryptedInterfaceDescriptor };\n    propertyInterfaces: ReturnType<typeof getPropertyInterfaces>;\n\n    getDeviceState(id: string) {\n        return this.state[id];\n    }\n    getSystemState(): { [id: string]: { [property: string]: SystemDeviceState } } {\n        return this.state;\n    }\n\n    getDeviceById(id: string): any {\n        if (!this.state[id])\n            return;\n        let proxy = this.deviceProxies[id];\n        if (!proxy)\n            proxy = this.deviceProxies[id] = newDeviceProxy(id, this);\n        return proxy;\n    }\n\n    getDeviceByName(name: string): any {\n        for (const id of Object.keys(this.state)) {\n            const s = this.state[id];\n            if ((s.interfaces?.value as string[])?.includes(ScryptedInterface.ScryptedPlugin) && s.pluginId?.value === name)\n                return this.getDeviceById(id);\n            if (s.name.value === name)\n                return this.getDeviceById(id);\n        }\n    }\n    listen(callback: EventListener): EventListenerRegister {\n        return this.events.listen(makeOneWayCallback((id, eventDetails, eventData) => callback(this.getDeviceById(id), eventDetails, eventData)));\n    }\n    listenDevice(id: string, options: string | EventListenerOptions, callback: EventListener): EventListenerRegister {\n        let { watch } = (options || {}) as EventListenerOptions;\n\n        // passive watching can be fast pathed to observe local state\n        if (watch)\n            return this.events.listenDevice(id, options, (eventDetails, eventData) => callback(this.getDeviceById(id), eventDetails, eventData));\n\n        return new EventListenerRegisterImpl(this.api.listenDevice(id, options, makeOneWayCallback((eventDetails, eventData) => callback(this.getDeviceById(id), eventDetails, eventData))));\n    }\n\n    async removeDevice(id: string) {\n        return this.api.removeDevice(id);\n    }\n\n    getComponent(id: string): Promise<any> {\n        return this.api.getComponent(id);\n    }\n\n    setScryptedInterfaceDescriptors(typesVersion: string, descriptors: { [scryptedInterface: string]: ScryptedInterfaceDescriptor }): Promise<void> {\n        this.typesVersion = typesVersion;\n        this.descriptors = descriptors;\n        this.propertyInterfaces = getPropertyInterfaces(descriptors);\n        return this.api.setScryptedInterfaceDescriptors(typesVersion, descriptors);\n    }\n}\n","import type { CompileFunctionOptions } from 'vm';\ntype CompileFunction = (code: string, params?: ReadonlyArray<string>, options?: CompileFunctionOptions) => Function;\n\nexport function startPeriodicGarbageCollection() {\n    if (!global.gc) {\n        console.warn('rpc peer garbage collection not available: global.gc is not exposed.');\n    }\n    let g: typeof global;\n    try {\n        g = global;\n    }\n    catch (e) {\n    }\n\n    // periodically see if new objects were created or finalized,\n    // and collect gc if so.\n    let lastCollection = 0;\n    return setInterval(() => {\n        const now = Date.now();\n        const sinceLastCollection = now - lastCollection;\n        const remotesCreated = RpcPeer.remotesCreated;\n        RpcPeer.remotesCreated = 0;\n        const remotesCollected = RpcPeer.remotesCollected;\n        RpcPeer.remotesCollected = 0;\n        if (remotesCreated || remotesCollected || sinceLastCollection > 5 * 60 * 1000) {\n            lastCollection = now;\n            g?.gc?.();\n        }\n    }, 10000);\n}\n\nexport interface RpcMessage {\n    type: 'apply' | 'result' | 'finalize' | 'param';\n}\n\nexport interface RpcParam extends RpcMessage {\n    type: 'param';\n    id: string;\n    param: string;\n}\n\nexport interface RpcApply extends RpcMessage {\n    type: 'apply';\n    id: string | undefined;\n    proxyId: string;\n    args: any[];\n    method: string;\n    oneway?: boolean;\n}\n\nexport interface RpcResult extends RpcMessage {\n    type: 'result';\n    id: string;\n    // TODO 3/2/2023\n    // deprecate these properties from rpc protocol. treat error results like any other result\n    // and auto serialize them.\n    /**\n     * @deprecated\n     */\n    stack?: string;\n    /**\n     * @deprecated\n     */\n    message?: string;\n    throw?: boolean;\n    result?: any;\n}\n\ninterface RpcFinalize extends RpcMessage {\n    type: 'finalize';\n    __local_proxy_id: string;\n    __local_proxy_finalizer_id: string | undefined;\n}\n\ninterface RpcRemoteProxyValue {\n    __remote_proxy_id: string | undefined;\n    __remote_proxy_finalizer_id: string | undefined;\n    __remote_constructor_name: string;\n    __remote_proxy_props: any;\n    __remote_proxy_oneway_methods: string[];\n    __serialized_value?: any;\n}\n\ninterface RpcLocalProxyValue {\n    __local_proxy_id: string;\n}\n\ninterface Deferred {\n    resolve: any;\n    reject: any;\n}\n\nexport interface PrimitiveProxyHandler<T extends object> extends ProxyHandler<T> {\n    toPrimitive(): any;\n}\n\nclass RpcProxy implements PrimitiveProxyHandler<any> {\n    static iteratorMethods = new Set([\n        'next',\n        'throw',\n        'return',\n    ]);\n\n    constructor(public peer: RpcPeer,\n        public entry: LocalProxiedEntry,\n        public constructorName: string,\n        public proxyProps: any,\n        public proxyOneWayMethods: string[]) {\n    }\n\n    toPrimitive() {\n        const peer = this.peer;\n        return `RpcProxy-${peer.selfName}:${peer.peerName}: ${this.constructorName}`;\n    }\n\n    get(target: any, p: PropertyKey, receiver: any): any {\n        if (p === Symbol.asyncIterator) {\n            if (!this.proxyProps?.[Symbol.asyncIterator.toString()])\n                return;\n            return () => {\n                return new Proxy(() => { }, this);\n            };\n        }\n        if (RpcProxy.iteratorMethods.has(p?.toString())) {\n            const asyncIteratorMethod = this.proxyProps?.[Symbol.asyncIterator.toString()]?.[p];\n            if (asyncIteratorMethod)\n                return new Proxy(() => asyncIteratorMethod, this);\n        }\n        if (p === RpcPeer.PROPERTY_PROXY_ID)\n            return this.entry.id;\n        if (p === '__proxy_constructor')\n            return this.constructorName;\n        if (p === '__proxy_peer')\n            return this.peer;\n        if (p === RpcPeer.PROPERTY_PROXY_PROPERTIES)\n            return this.proxyProps;\n        if (p === RpcPeer.PROPERTY_PROXY_ONEWAY_METHODS)\n            return this.proxyOneWayMethods;\n        if (p === RpcPeer.PROPERTY_JSON_DISABLE_SERIALIZATION || p === RpcPeer.PROPERTY_JSON_COPY_SERIALIZE_CHILDREN)\n            return;\n        if (p === 'then')\n            return;\n        if (p === 'constructor')\n            return;\n        if (this.proxyProps?.[p] !== undefined)\n            return this.proxyProps?.[p];\n        const handled = RpcPeer.handleFunctionInvocations(this, target, p, receiver);\n        if (handled)\n            return handled;\n        return new Proxy(() => p, this);\n    }\n\n    set(target: any, p: string | symbol, value: any, receiver: any): boolean {\n        if (p === RpcPeer.finalizerIdSymbol) {\n            this.entry.finalizerId = value;\n        }\n        else {\n            this.proxyProps ||= {};\n            this.proxyProps[p] = value;\n        }\n\n        return true;\n    }\n\n    apply(target: any, thisArg: any, argArray?: any): any {\n        const method = target() || null;\n        const oneway = this.proxyOneWayMethods?.includes?.(method);\n\n        if (Object.isFrozen(this.peer.pendingResults)) {\n            if (oneway)\n                return Promise.resolve();\n            return Promise.reject(new RPCResultError(this.peer, 'RpcPeer has been killed (apply) ' + target()));\n        }\n\n        // rpc objects can be functions. if the function is a oneway method,\n        // it will have a null in the oneway method list. this is because\n        // undefined is not JSON serializable.\n        const args: any[] = [];\n        const serializationContext: any = {};\n        for (const arg of (argArray || [])) {\n            args.push(this.peer.serialize(arg, serializationContext));\n        }\n\n        const rpcApply: RpcApply = {\n            type: \"apply\",\n            id: undefined,\n            proxyId: this.entry.id,\n            args,\n            method,\n        };\n\n        if (oneway) {\n            rpcApply.oneway = true;\n            // a oneway callable object doesn't need to be in the JSON payload.\n            if (method === null)\n                delete rpcApply.method;\n            this.peer.send(rpcApply, undefined, serializationContext);\n            return Promise.resolve();\n        }\n\n        const pendingResult = this.peer.createPendingResult((id, reject) => {\n            rpcApply.id = id;\n            this.peer.send(rpcApply, reject, serializationContext);\n        });\n\n        const asyncIterator = this.proxyProps?.[Symbol.asyncIterator.toString()];\n        if (!asyncIterator || (method !== asyncIterator.next && method !== asyncIterator.return))\n            return pendingResult;\n\n        return pendingResult\n            .then(value => {\n                if (method === asyncIterator.return) {\n                    return {\n                        done: true,\n                        value: undefined,\n                    }\n                }\n                return ({\n                    value,\n                    done: false,\n                });\n            })\n            .catch(e => {\n                if (e.name === 'StopAsyncIteration') {\n                    return {\n                        done: true,\n                        value: undefined,\n                    }\n                }\n                throw e;\n            })\n    }\n}\n\ninterface SerialiedRpcResultError {\n    name: string;\n    stack: string;\n    message: string;\n}\n\n// todo: error constructor adds a \"cause\" variable in Chrome 93, Node v??\nexport class RPCResultError extends Error {\n    constructor(peer: RpcPeer, message: string, public cause?: Error, options?: { name: string, stack: string | undefined }) {\n        super(`${message}\\n${peer.selfName}:${peer.peerName}`);\n\n        if (options?.name) {\n            this.name = options?.name;\n        }\n        if (options?.stack) {\n            this.stack = `${cause?.stack || options.stack}\\n${peer.peerName}:${peer.selfName}`;\n        }\n    }\n}\n\nfunction compileFunction(code: string, params?: ReadonlyArray<string>, options?: CompileFunctionOptions): any {\n    params = params || [];\n    const f = `(function(${params.join(',')}) {;${code};})`;\n    return eval(f);\n}\n\ndeclare class WeakRef<T> {\n    target: T;\n    constructor(target: any);\n    deref(): T;\n}\n\ntry {\n    // @ts-ignore\n    const fr = FinalizationRegistry;\n}\ncatch (e) {\n    (window as any).WeakRef = class WeakRef {\n        target: any;\n        constructor(target: any) {\n            this.target = target;\n        }\n        deref(): any {\n            return this.target;\n        }\n    };\n\n    (window as any).FinalizationRegistry = class FinalizationRegistry {\n        register() {\n        }\n    }\n}\n\nexport interface RpcSerializer {\n    serialize(value: any, serializationContext?: any): any;\n    deserialize(serialized: any, serializationContext?: any): any;\n}\n\ninterface LocalProxiedEntry {\n    id: string;\n    finalizerId: string | undefined;\n}\n\ninterface ErrorType {\n    name: string;\n    message: string;\n    stack?: string;\n}\n\nexport class RpcPeer {\n    idCounter = 1;\n    params: { [name: string]: any } = {};\n    pendingResults: { [id: string]: Deferred } = {};\n    proxyCounter = 1;\n    localProxied = new Map<any, LocalProxiedEntry>();\n    localProxyMap = new Map<string, any>();\n    // @ts-ignore\n    remoteWeakProxies: { [id: string]: WeakRef<any> } = {};\n    // @ts-ignore\n    finalizers = new FinalizationRegistry(entry => this.finalize(entry as LocalProxiedEntry));\n    nameDeserializerMap = new Map<string, RpcSerializer>();\n    onProxyTypeSerialization = new Map<string, (value: any) => void>();\n    onProxySerialization: (value: any, proxyId: string) => any;\n    constructorSerializerMap = new Map<any, string>();\n    transportSafeArgumentTypes = RpcPeer.getDefaultTransportSafeArgumentTypes();\n    killed: Promise<string>;\n    killedDeferred: Deferred;\n    tags: any = {};\n\n    static readonly finalizerIdSymbol = Symbol('rpcFinalizerId');\n    static remotesCollected = 0;\n    static remotesCreated = 0;\n    static activeRpcPeer: RpcPeer;\n\n    static isRpcProxy(value: any) {\n        return !!value?.[RpcPeer.PROPERTY_PROXY_ID];\n    }\n\n    static getDefaultTransportSafeArgumentTypes() {\n        const jsonSerializable = new Set<string>();\n        jsonSerializable.add(Number.name);\n        jsonSerializable.add(String.name);\n        jsonSerializable.add(Object.name);\n        jsonSerializable.add(Boolean.name);\n        jsonSerializable.add(Array.name);\n        return jsonSerializable;\n    }\n\n    static handleFunctionInvocations(thiz: PrimitiveProxyHandler<any>, target: any, p: PropertyKey, receiver: any): any {\n        if (p === 'apply') {\n            return (thisArg: any, args: any[]) => {\n                return thiz.apply!(target, thiz, args);\n            }\n        }\n        else if (p === 'call') {\n            return (thisArg: any, ...args: any[]) => {\n                return thiz.apply!(target, thiz, args);\n            }\n        }\n        else if (p === 'toString' || p === Symbol.toPrimitive) {\n            return (thisArg: any, ...args: any[]) => {\n                return thiz.toPrimitive();\n            }\n        }\n    }\n\n    // static setProxyProperties(value: any, properties: any) {\n    //     value[RpcPeer.PROPERTY_PROXY_PROPERTIES] = properties;\n    // }\n\n    // static getProxyProperties(value: any) {\n    //     return value?.[RpcPeer.PROPERTY_PROXY_PROPERTIES];\n    // }\n\n    static getIteratorNext(target: any): string {\n        if (!target[Symbol.asyncIterator])\n            return;\n        const proxyProps = target[this.PROPERTY_PROXY_PROPERTIES]?.[Symbol.asyncIterator.toString()];\n        return proxyProps?.next || 'next';\n    }\n\n    static prepareProxyProperties(value: any) {\n        let props = value?.[RpcPeer.PROPERTY_PROXY_PROPERTIES];\n        if (!value[Symbol.asyncIterator])\n            return props;\n        props ||= {};\n        if (!props[Symbol.asyncIterator.toString()]) {\n            props[Symbol.asyncIterator.toString()] = {\n                next: 'next',\n                throw: 'throw',\n                return: 'return',\n            };\n        }\n        return props;\n    }\n\n    static readonly RPC_RESULT_ERROR_NAME = 'RPCResultError';\n    static readonly PROPERTY_PROXY_ID = '__proxy_id';\n    static readonly PROPERTY_PROXY_ONEWAY_METHODS = '__proxy_oneway_methods';\n    static readonly PROPERTY_JSON_DISABLE_SERIALIZATION = '__json_disable_serialization';\n    static readonly PROPERTY_PROXY_PROPERTIES = '__proxy_props';\n    static readonly PROPERTY_JSON_COPY_SERIALIZE_CHILDREN = '__json_copy_serialize_children';\n    static readonly PROBED_PROPERTIES = new Set<any>([\n        'then',\n        'constructor',\n        '__proxy_id',\n        '__proxy_constructor',\n        '__proxy_peer',\n        RpcPeer.PROPERTY_PROXY_ONEWAY_METHODS,\n        RpcPeer.PROPERTY_JSON_DISABLE_SERIALIZATION,\n        RpcPeer.PROPERTY_PROXY_PROPERTIES,\n        RpcPeer.PROPERTY_JSON_COPY_SERIALIZE_CHILDREN,\n    ]);\n\n    constructor(public selfName: string, public peerName: string, public send: (message: RpcMessage, reject?: (e: Error) => void, serializationContext?: any) => void) {\n        this.killed = new Promise<string>((resolve, reject) => {\n            this.killedDeferred = { resolve, reject };\n        }).catch(e => e.message || 'Unknown Error');\n    }\n\n    static isTransportSafe(value: any) {\n        return !value || (!value[RpcPeer.PROPERTY_JSON_DISABLE_SERIALIZATION] && this.getDefaultTransportSafeArgumentTypes().has(value.constructor?.name));\n    }\n\n    isTransportSafe(value: any) {\n        return !value || (!value[RpcPeer.PROPERTY_JSON_DISABLE_SERIALIZATION] && this.transportSafeArgumentTypes.has(value.constructor?.name));\n    }\n\n    createPendingResult(cb: (id: string, reject: (e: Error) => void) => void): Promise<any> {\n        if (Object.isFrozen(this.pendingResults))\n            return Promise.reject(new RPCResultError(this, 'RpcPeer has been killed (createPendingResult)'));\n\n        const promise = new Promise((resolve, reject) => {\n            const id = (this.idCounter++).toString();\n            this.pendingResults[id] = { resolve, reject };\n\n            cb(id, e => reject(new RPCResultError(this, e.message, e)));\n        });\n\n        // todo: make this an option so rpc doesn't nuke the process if uncaught?\n        promise.catch(() => { });\n\n        return promise;\n    }\n\n    kill(message?: string) {\n        if (Object.isFrozen(this.pendingResults))\n            return;\n        const error = new RPCResultError(this, message || 'peer was killed');\n        this.killedDeferred.reject(error);\n        for (const result of Object.values(this.pendingResults)) {\n            result.reject(error);\n        }\n        this.pendingResults = Object.freeze({});\n        this.params = Object.freeze({});\n        this.remoteWeakProxies = Object.freeze({});\n        this.localProxyMap.clear()\n        this.localProxied.clear();\n    }\n\n    // need a name/constructor map due to babel name mangling? fix somehow?\n    addSerializer(ctr: any, name: string, serializer: RpcSerializer) {\n        this.nameDeserializerMap.set(name, serializer);\n        this.constructorSerializerMap.set(ctr, name);\n    }\n\n    finalize(entry: LocalProxiedEntry) {\n        RpcPeer.remotesCollected++;\n\n        delete this.remoteWeakProxies[entry.id];\n        const rpcFinalize: RpcFinalize = {\n            __local_proxy_id: entry.id,\n            __local_proxy_finalizer_id: entry.finalizerId,\n            type: 'finalize',\n        }\n        this.send(rpcFinalize);\n    }\n\n    async getParam(param: string) {\n        return this.createPendingResult((id, reject) => {\n            const paramMessage: RpcParam = {\n                id,\n                type: 'param',\n                param,\n            };\n\n            this.send(paramMessage, reject);\n        });\n    }\n\n    evalLocal<T>(script: string, filename?: string, coercedParams?: { [name: string]: any }): T {\n        const params = Object.assign({}, this.params, coercedParams);\n        let compile: CompileFunction;\n        try {\n            // prevent bundlers from trying to include non-existent vm module.\n            compile = module[`require`]('vm').compileFunction;\n        }\n        catch (e) {\n            compile = compileFunction;\n        }\n        const f = compile(script, Object.keys(params), {\n            filename,\n        });\n        const value = f(...Object.values(params));\n        return value;\n    }\n\n    /**\n     * @deprecated\n     * @param result\n     * @param e\n     */\n    createErrorResult(result: RpcResult, e: ErrorType) {\n        result.result = this.serializeError(e);\n        result.throw = true;\n        result.message = (e as Error).message || 'no message';\n        result.stack = e.stack || 'no stack';\n    }\n\n    deserialize(value: any, deserializationContext: any): any {\n        if (!value)\n            return value;\n\n        const copySerializeChildren = value[RpcPeer.PROPERTY_JSON_COPY_SERIALIZE_CHILDREN];\n        if (copySerializeChildren) {\n            const ret: any = {};\n            for (const [key, val] of Object.entries(value)) {\n                ret[key] = this.deserialize(val, deserializationContext);\n            }\n            return ret;\n        }\n\n        const { __remote_proxy_id, __remote_proxy_finalizer_id, __local_proxy_id, __remote_constructor_name, __serialized_value, __remote_proxy_props, __remote_proxy_oneway_methods } = value;\n        if (__remote_constructor_name === RpcPeer.RPC_RESULT_ERROR_NAME)\n            return this.deserializeError(__serialized_value);\n\n        if (__remote_proxy_id) {\n            let proxy = this.remoteWeakProxies[__remote_proxy_id]?.deref();\n            if (!proxy)\n                proxy = this.newProxy(__remote_proxy_id, __remote_constructor_name, __remote_proxy_props, __remote_proxy_oneway_methods);\n            proxy[RpcPeer.finalizerIdSymbol] = __remote_proxy_finalizer_id;\n\n            const deserializer = this.nameDeserializerMap.get(__remote_constructor_name);\n            if (deserializer) {\n                return deserializer.deserialize(proxy, deserializationContext);\n            }\n\n            return proxy;\n        }\n\n        if (__local_proxy_id) {\n            const ret = this.localProxyMap.get(__local_proxy_id);\n            if (!ret)\n                throw new RPCResultError(this, `invalid local proxy id ${__local_proxy_id}`);\n            return ret;\n        }\n\n        const deserializer = this.nameDeserializerMap.get(__remote_constructor_name);\n        if (deserializer) {\n            return deserializer.deserialize(__serialized_value, deserializationContext);\n        }\n\n        return value;\n    }\n\n    deserializeError(e: SerialiedRpcResultError): RPCResultError {\n        const { name, stack, message } = e;\n        return new RPCResultError(this, message, undefined, { name, stack });\n    }\n\n    serializeError(e: ErrorType): RpcRemoteProxyValue {\n        const __serialized_value: SerialiedRpcResultError = {\n            stack: e.stack || '[no stack]',\n            name: e.name || '[no name]',\n            message: e.message || '[no message]',\n        }\n        return {\n            // probably not safe to use constructor.name\n            __remote_constructor_name: RpcPeer.RPC_RESULT_ERROR_NAME,\n            __remote_proxy_id: undefined,\n            __remote_proxy_finalizer_id: undefined,\n            __remote_proxy_oneway_methods: undefined,\n            __remote_proxy_props: undefined,\n            __serialized_value,\n        };\n    }\n\n    serialize(value: any, serializationContext: any): any {\n        if (value?.[RpcPeer.PROPERTY_JSON_COPY_SERIALIZE_CHILDREN] === true) {\n            const ret: any = {};\n            for (const [key, val] of Object.entries(value)) {\n                ret[key] = this.serialize(val, serializationContext);\n            }\n            return ret;\n        }\n\n        if (this.isTransportSafe(value)) {\n            return value;\n        }\n\n        let __remote_constructor_name = value.__proxy_constructor || value.constructor?.name?.toString();\n\n        if (value instanceof Error)\n            return this.serializeError(value);\n\n        const serializerMapName = this.constructorSerializerMap.get(value.constructor);\n        if (serializerMapName) {\n            __remote_constructor_name = serializerMapName;\n            const serializer = this.nameDeserializerMap.get(serializerMapName);\n            if (!serializer)\n                throw new Error('serializer not found for ' + serializerMapName);\n            const serialized = serializer.serialize(value, serializationContext);\n            const ret: RpcRemoteProxyValue = {\n                __remote_proxy_id: undefined,\n                __remote_proxy_finalizer_id: undefined,\n                __remote_constructor_name,\n                __remote_proxy_props: RpcPeer.prepareProxyProperties(value),\n                __remote_proxy_oneway_methods: value?.[RpcPeer.PROPERTY_PROXY_ONEWAY_METHODS],\n                __serialized_value: serialized,\n            }\n            return ret;\n        }\n\n        let proxiedEntry = this.localProxied.get(value);\n        if (proxiedEntry) {\n            const __remote_proxy_finalizer_id = (this.proxyCounter++).toString();\n            proxiedEntry.finalizerId = __remote_proxy_finalizer_id;\n            const ret: RpcRemoteProxyValue = {\n                __remote_proxy_id: proxiedEntry.id,\n                __remote_proxy_finalizer_id,\n                __remote_constructor_name,\n                __remote_proxy_props: RpcPeer.prepareProxyProperties(value),\n                __remote_proxy_oneway_methods: value?.[RpcPeer.PROPERTY_PROXY_ONEWAY_METHODS],\n            }\n            return ret;\n        }\n\n        const { __proxy_id, __proxy_peer } = value;\n        if (__proxy_id && __proxy_peer === this) {\n            const ret: RpcLocalProxyValue = {\n                __local_proxy_id: __proxy_id,\n            }\n            return ret;\n        }\n\n        this.onProxyTypeSerialization.get(__remote_constructor_name)?.(value);\n\n        const __remote_proxy_id = (this.proxyCounter++).toString();\n        proxiedEntry = {\n            id: __remote_proxy_id,\n            finalizerId: __remote_proxy_id,\n        };\n        this.localProxied.set(value, proxiedEntry);\n        this.localProxyMap.set(__remote_proxy_id, value);\n\n        const __remote_proxy_props = this.onProxySerialization ? this.onProxySerialization(value, __remote_proxy_id) : RpcPeer.prepareProxyProperties(value);\n\n        const ret: RpcRemoteProxyValue = {\n            __remote_proxy_id,\n            __remote_proxy_finalizer_id: __remote_proxy_id,\n            __remote_constructor_name,\n            __remote_proxy_props,\n            __remote_proxy_oneway_methods: value?.[RpcPeer.PROPERTY_PROXY_ONEWAY_METHODS],\n        }\n\n        return ret;\n    }\n\n    newProxy(proxyId: string, proxyConstructorName: string, proxyProps: any, proxyOneWayMethods: string[]) {\n        RpcPeer.remotesCreated++;\n\n        const localProxiedEntry: LocalProxiedEntry = {\n            id: proxyId,\n            finalizerId: undefined,\n        }\n        const rpc = new RpcProxy(this, localProxiedEntry, proxyConstructorName, proxyProps, proxyOneWayMethods);\n        const target = proxyConstructorName === 'Function' || proxyConstructorName === 'AsyncFunction' ? function () { } : rpc;\n        const proxy = new Proxy(target, rpc);\n        // @ts-ignore\n        const weakref = new WeakRef(proxy);\n        this.remoteWeakProxies[proxyId] = weakref;\n        this.finalizers.register(rpc, localProxiedEntry);\n        return proxy;\n    }\n\n    handleMessage(message: RpcMessage, deserializationContext?: any) {\n        try {\n            RpcPeer.activeRpcPeer = this;\n            this.handleMessageInternal(message, deserializationContext);\n        }\n        finally {\n            RpcPeer.activeRpcPeer = undefined;\n        }\n    }\n\n    private async handleMessageInternal(message: RpcMessage, deserializationContext?: any) {\n        if (Object.isFrozen(this.pendingResults))\n            return;\n\n        try {\n            switch (message.type) {\n                case 'param': {\n                    const rpcParam = message as RpcParam;\n                    const serializationContext: any = {};\n                    let result: RpcResult;\n                    try {\n                        result = {\n                            type: 'result',\n                            id: rpcParam.id,\n                            result: this.serialize(this.params[rpcParam.param], serializationContext)\n                        };\n                    }\n                    catch (e) {\n                        // console.error('failure', rpcApply.method, e);\n                        this.createErrorResult(result, e);\n                    }\n\n                    this.send(result, undefined, serializationContext);\n                    break;\n                }\n                case 'apply': {\n                    const rpcApply = message as RpcApply;\n                    const result: RpcResult = {\n                        type: 'result',\n                        id: rpcApply.id || '',\n                    };\n                    const serializationContext: any = {};\n\n                    try {\n                        const target = this.localProxyMap.get(rpcApply.proxyId);\n                        if (!target)\n                            throw new Error(`proxy id ${rpcApply.proxyId} not found`);\n\n                        const args = [];\n                        for (const arg of (rpcApply.args || [])) {\n                            args.push(this.deserialize(arg, deserializationContext));\n                        }\n\n                        let value: any;\n                        if (rpcApply.method) {\n                            const method = target[rpcApply.method];\n                            if (!method)\n                                throw new Error(`target ${target?.constructor?.name} does not have method ${rpcApply.method}`);\n                            value = await target[rpcApply.method](...args);\n\n                            if (RpcPeer.getIteratorNext(target) === rpcApply.method) {\n                                if (value.done) {\n                                    const errorType: ErrorType = {\n                                        name: 'StopAsyncIteration',\n                                        message: undefined,\n                                    };\n                                    throw errorType;\n                                }\n                                else {\n                                    value = value.value;\n                                }\n                            }\n                        }\n                        else {\n                            value = await target(...args);\n                        }\n\n                        result.result = this.serialize(value, serializationContext);\n                    }\n                    catch (e) {\n                        // console.error('failure', rpcApply.method, e);\n                        this.createErrorResult(result, e);\n                    }\n\n                    if (!rpcApply.oneway)\n                        this.send(result, undefined, serializationContext);\n                    break;\n                }\n                case 'result': {\n                    // console.log(message)\n                    const rpcResult = message as RpcResult;\n                    const deferred = this.pendingResults[rpcResult.id];\n                    delete this.pendingResults[rpcResult.id];\n                    if (!deferred)\n                        throw new Error(`unknown result ${rpcResult.id}`);\n                    if ((rpcResult.message || rpcResult.stack) && !rpcResult.throw) {\n                        const e = new RPCResultError(this, rpcResult.message || 'no message', undefined, {\n                            name: rpcResult.result,\n                            stack: rpcResult.stack,\n                        });\n                        deferred.reject(e);\n                        return;\n                    }\n                    const deserialized = this.deserialize(rpcResult.result, deserializationContext);\n                    if (rpcResult.throw)\n                        deferred.reject(deserialized);\n                    else\n                        deferred.resolve(deserialized);\n                    break;\n                }\n                case 'finalize': {\n                    const rpcFinalize = message as RpcFinalize;\n                    const local = this.localProxyMap.get(rpcFinalize.__local_proxy_id);\n                    if (local) {\n                        const localProxiedEntry = this.localProxied.get(local);\n                        // if a finalizer id is specified, it must match.\n                        if (rpcFinalize.__local_proxy_finalizer_id && rpcFinalize.__local_proxy_finalizer_id !== localProxiedEntry?.finalizerId) {\n                            break;\n                        }\n                        this.localProxyMap.delete(rpcFinalize.__local_proxy_id);\n                        this.localProxied.delete(local);\n                    }\n                    break;\n                }\n                default:\n                    throw new Error(`unknown rpc message type ${message.type}`);\n            }\n        }\n        catch (e) {\n            console.error('unhandled rpc error', this.peerName, e);\n            return;\n        }\n    }\n}\n\nexport function getEvalSource() {\n    return `\n    (() => {\n        ${RpcProxy}\n\n        ${RpcPeer}\n\n        ${startPeriodicGarbageCollection}\n    \n        return {\n            startPeriodicGarbageCollection,\n            RpcPeer,\n            RpcProxy,\n        };\n    })();\n    `;\n}\n","const realfs = __non_webpack_require__('realfs'); module.exports = realfs;","const typescript = __non_webpack_require__('typescript'); module.exports = typescript;","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ScryptedMimeTypes = exports.ScryptedInterface = exports.MediaPlayerState = exports.SecuritySystemObstruction = exports.SecuritySystemMode = exports.AirQuality = exports.ChargeState = exports.LockState = exports.PanTiltZoomMovement = exports.ThermostatMode = exports.TemperatureUnit = exports.FanMode = exports.HumidityMode = exports.ScryptedDeviceType = exports.ScryptedInterfaceDescriptors = exports.ScryptedInterfaceMethod = exports.ScryptedInterfaceProperty = exports.DeviceBase = exports.TYPES_VERSION = void 0;\nexports.TYPES_VERSION = \"0.2.79\";\nclass DeviceBase {\n}\nexports.DeviceBase = DeviceBase;\nvar ScryptedInterfaceProperty;\n(function (ScryptedInterfaceProperty) {\n    ScryptedInterfaceProperty[\"id\"] = \"id\";\n    ScryptedInterfaceProperty[\"info\"] = \"info\";\n    ScryptedInterfaceProperty[\"interfaces\"] = \"interfaces\";\n    ScryptedInterfaceProperty[\"mixins\"] = \"mixins\";\n    ScryptedInterfaceProperty[\"name\"] = \"name\";\n    ScryptedInterfaceProperty[\"nativeId\"] = \"nativeId\";\n    ScryptedInterfaceProperty[\"pluginId\"] = \"pluginId\";\n    ScryptedInterfaceProperty[\"providedInterfaces\"] = \"providedInterfaces\";\n    ScryptedInterfaceProperty[\"providedName\"] = \"providedName\";\n    ScryptedInterfaceProperty[\"providedRoom\"] = \"providedRoom\";\n    ScryptedInterfaceProperty[\"providedType\"] = \"providedType\";\n    ScryptedInterfaceProperty[\"providerId\"] = \"providerId\";\n    ScryptedInterfaceProperty[\"room\"] = \"room\";\n    ScryptedInterfaceProperty[\"type\"] = \"type\";\n    ScryptedInterfaceProperty[\"on\"] = \"on\";\n    ScryptedInterfaceProperty[\"brightness\"] = \"brightness\";\n    ScryptedInterfaceProperty[\"colorTemperature\"] = \"colorTemperature\";\n    ScryptedInterfaceProperty[\"rgb\"] = \"rgb\";\n    ScryptedInterfaceProperty[\"hsv\"] = \"hsv\";\n    ScryptedInterfaceProperty[\"running\"] = \"running\";\n    ScryptedInterfaceProperty[\"paused\"] = \"paused\";\n    ScryptedInterfaceProperty[\"docked\"] = \"docked\";\n    ScryptedInterfaceProperty[\"temperatureSetting\"] = \"temperatureSetting\";\n    ScryptedInterfaceProperty[\"thermostatActiveMode\"] = \"thermostatActiveMode\";\n    ScryptedInterfaceProperty[\"thermostatAvailableModes\"] = \"thermostatAvailableModes\";\n    ScryptedInterfaceProperty[\"thermostatMode\"] = \"thermostatMode\";\n    ScryptedInterfaceProperty[\"thermostatSetpoint\"] = \"thermostatSetpoint\";\n    ScryptedInterfaceProperty[\"thermostatSetpointHigh\"] = \"thermostatSetpointHigh\";\n    ScryptedInterfaceProperty[\"thermostatSetpointLow\"] = \"thermostatSetpointLow\";\n    ScryptedInterfaceProperty[\"temperature\"] = \"temperature\";\n    ScryptedInterfaceProperty[\"temperatureUnit\"] = \"temperatureUnit\";\n    ScryptedInterfaceProperty[\"humidity\"] = \"humidity\";\n    ScryptedInterfaceProperty[\"ptzCapabilities\"] = \"ptzCapabilities\";\n    ScryptedInterfaceProperty[\"lockState\"] = \"lockState\";\n    ScryptedInterfaceProperty[\"entryOpen\"] = \"entryOpen\";\n    ScryptedInterfaceProperty[\"batteryLevel\"] = \"batteryLevel\";\n    ScryptedInterfaceProperty[\"chargeState\"] = \"chargeState\";\n    ScryptedInterfaceProperty[\"online\"] = \"online\";\n    ScryptedInterfaceProperty[\"fromMimeType\"] = \"fromMimeType\";\n    ScryptedInterfaceProperty[\"toMimeType\"] = \"toMimeType\";\n    ScryptedInterfaceProperty[\"binaryState\"] = \"binaryState\";\n    ScryptedInterfaceProperty[\"tampered\"] = \"tampered\";\n    ScryptedInterfaceProperty[\"powerDetected\"] = \"powerDetected\";\n    ScryptedInterfaceProperty[\"audioDetected\"] = \"audioDetected\";\n    ScryptedInterfaceProperty[\"motionDetected\"] = \"motionDetected\";\n    ScryptedInterfaceProperty[\"ambientLight\"] = \"ambientLight\";\n    ScryptedInterfaceProperty[\"occupied\"] = \"occupied\";\n    ScryptedInterfaceProperty[\"flooded\"] = \"flooded\";\n    ScryptedInterfaceProperty[\"ultraviolet\"] = \"ultraviolet\";\n    ScryptedInterfaceProperty[\"luminance\"] = \"luminance\";\n    ScryptedInterfaceProperty[\"position\"] = \"position\";\n    ScryptedInterfaceProperty[\"securitySystemState\"] = \"securitySystemState\";\n    ScryptedInterfaceProperty[\"pm10Density\"] = \"pm10Density\";\n    ScryptedInterfaceProperty[\"pm25Density\"] = \"pm25Density\";\n    ScryptedInterfaceProperty[\"vocDensity\"] = \"vocDensity\";\n    ScryptedInterfaceProperty[\"noxDensity\"] = \"noxDensity\";\n    ScryptedInterfaceProperty[\"co2ppm\"] = \"co2ppm\";\n    ScryptedInterfaceProperty[\"airQuality\"] = \"airQuality\";\n    ScryptedInterfaceProperty[\"humiditySetting\"] = \"humiditySetting\";\n    ScryptedInterfaceProperty[\"fan\"] = \"fan\";\n    ScryptedInterfaceProperty[\"applicationInfo\"] = \"applicationInfo\";\n})(ScryptedInterfaceProperty = exports.ScryptedInterfaceProperty || (exports.ScryptedInterfaceProperty = {}));\nvar ScryptedInterfaceMethod;\n(function (ScryptedInterfaceMethod) {\n    ScryptedInterfaceMethod[\"listen\"] = \"listen\";\n    ScryptedInterfaceMethod[\"probe\"] = \"probe\";\n    ScryptedInterfaceMethod[\"setMixins\"] = \"setMixins\";\n    ScryptedInterfaceMethod[\"setName\"] = \"setName\";\n    ScryptedInterfaceMethod[\"setRoom\"] = \"setRoom\";\n    ScryptedInterfaceMethod[\"setType\"] = \"setType\";\n    ScryptedInterfaceMethod[\"getPluginJson\"] = \"getPluginJson\";\n    ScryptedInterfaceMethod[\"turnOff\"] = \"turnOff\";\n    ScryptedInterfaceMethod[\"turnOn\"] = \"turnOn\";\n    ScryptedInterfaceMethod[\"setBrightness\"] = \"setBrightness\";\n    ScryptedInterfaceMethod[\"getTemperatureMaxK\"] = \"getTemperatureMaxK\";\n    ScryptedInterfaceMethod[\"getTemperatureMinK\"] = \"getTemperatureMinK\";\n    ScryptedInterfaceMethod[\"setColorTemperature\"] = \"setColorTemperature\";\n    ScryptedInterfaceMethod[\"setRgb\"] = \"setRgb\";\n    ScryptedInterfaceMethod[\"setHsv\"] = \"setHsv\";\n    ScryptedInterfaceMethod[\"sendNotification\"] = \"sendNotification\";\n    ScryptedInterfaceMethod[\"start\"] = \"start\";\n    ScryptedInterfaceMethod[\"stop\"] = \"stop\";\n    ScryptedInterfaceMethod[\"pause\"] = \"pause\";\n    ScryptedInterfaceMethod[\"resume\"] = \"resume\";\n    ScryptedInterfaceMethod[\"dock\"] = \"dock\";\n    ScryptedInterfaceMethod[\"setTemperature\"] = \"setTemperature\";\n    ScryptedInterfaceMethod[\"setThermostatMode\"] = \"setThermostatMode\";\n    ScryptedInterfaceMethod[\"setThermostatSetpoint\"] = \"setThermostatSetpoint\";\n    ScryptedInterfaceMethod[\"setThermostatSetpointHigh\"] = \"setThermostatSetpointHigh\";\n    ScryptedInterfaceMethod[\"setThermostatSetpointLow\"] = \"setThermostatSetpointLow\";\n    ScryptedInterfaceMethod[\"setTemperatureUnit\"] = \"setTemperatureUnit\";\n    ScryptedInterfaceMethod[\"getPictureOptions\"] = \"getPictureOptions\";\n    ScryptedInterfaceMethod[\"takePicture\"] = \"takePicture\";\n    ScryptedInterfaceMethod[\"getAudioStream\"] = \"getAudioStream\";\n    ScryptedInterfaceMethod[\"startDisplay\"] = \"startDisplay\";\n    ScryptedInterfaceMethod[\"stopDisplay\"] = \"stopDisplay\";\n    ScryptedInterfaceMethod[\"getVideoStream\"] = \"getVideoStream\";\n    ScryptedInterfaceMethod[\"getVideoStreamOptions\"] = \"getVideoStreamOptions\";\n    ScryptedInterfaceMethod[\"getRecordingStream\"] = \"getRecordingStream\";\n    ScryptedInterfaceMethod[\"getRecordingStreamCurrentTime\"] = \"getRecordingStreamCurrentTime\";\n    ScryptedInterfaceMethod[\"getRecordingStreamOptions\"] = \"getRecordingStreamOptions\";\n    ScryptedInterfaceMethod[\"getRecordingStreamThumbnail\"] = \"getRecordingStreamThumbnail\";\n    ScryptedInterfaceMethod[\"ptzCommand\"] = \"ptzCommand\";\n    ScryptedInterfaceMethod[\"getRecordedEvents\"] = \"getRecordedEvents\";\n    ScryptedInterfaceMethod[\"getVideoClip\"] = \"getVideoClip\";\n    ScryptedInterfaceMethod[\"getVideoClipThumbnail\"] = \"getVideoClipThumbnail\";\n    ScryptedInterfaceMethod[\"getVideoClips\"] = \"getVideoClips\";\n    ScryptedInterfaceMethod[\"removeVideoClips\"] = \"removeVideoClips\";\n    ScryptedInterfaceMethod[\"setVideoStreamOptions\"] = \"setVideoStreamOptions\";\n    ScryptedInterfaceMethod[\"startIntercom\"] = \"startIntercom\";\n    ScryptedInterfaceMethod[\"stopIntercom\"] = \"stopIntercom\";\n    ScryptedInterfaceMethod[\"lock\"] = \"lock\";\n    ScryptedInterfaceMethod[\"unlock\"] = \"unlock\";\n    ScryptedInterfaceMethod[\"addPassword\"] = \"addPassword\";\n    ScryptedInterfaceMethod[\"getPasswords\"] = \"getPasswords\";\n    ScryptedInterfaceMethod[\"removePassword\"] = \"removePassword\";\n    ScryptedInterfaceMethod[\"activate\"] = \"activate\";\n    ScryptedInterfaceMethod[\"deactivate\"] = \"deactivate\";\n    ScryptedInterfaceMethod[\"isReversible\"] = \"isReversible\";\n    ScryptedInterfaceMethod[\"closeEntry\"] = \"closeEntry\";\n    ScryptedInterfaceMethod[\"openEntry\"] = \"openEntry\";\n    ScryptedInterfaceMethod[\"getDevice\"] = \"getDevice\";\n    ScryptedInterfaceMethod[\"releaseDevice\"] = \"releaseDevice\";\n    ScryptedInterfaceMethod[\"adoptDevice\"] = \"adoptDevice\";\n    ScryptedInterfaceMethod[\"discoverDevices\"] = \"discoverDevices\";\n    ScryptedInterfaceMethod[\"createDevice\"] = \"createDevice\";\n    ScryptedInterfaceMethod[\"getCreateDeviceSettings\"] = \"getCreateDeviceSettings\";\n    ScryptedInterfaceMethod[\"getRefreshFrequency\"] = \"getRefreshFrequency\";\n    ScryptedInterfaceMethod[\"refresh\"] = \"refresh\";\n    ScryptedInterfaceMethod[\"getMediaStatus\"] = \"getMediaStatus\";\n    ScryptedInterfaceMethod[\"load\"] = \"load\";\n    ScryptedInterfaceMethod[\"seek\"] = \"seek\";\n    ScryptedInterfaceMethod[\"skipNext\"] = \"skipNext\";\n    ScryptedInterfaceMethod[\"skipPrevious\"] = \"skipPrevious\";\n    ScryptedInterfaceMethod[\"convert\"] = \"convert\";\n    ScryptedInterfaceMethod[\"getSettings\"] = \"getSettings\";\n    ScryptedInterfaceMethod[\"putSetting\"] = \"putSetting\";\n    ScryptedInterfaceMethod[\"armSecuritySystem\"] = \"armSecuritySystem\";\n    ScryptedInterfaceMethod[\"disarmSecuritySystem\"] = \"disarmSecuritySystem\";\n    ScryptedInterfaceMethod[\"getReadmeMarkdown\"] = \"getReadmeMarkdown\";\n    ScryptedInterfaceMethod[\"getOauthUrl\"] = \"getOauthUrl\";\n    ScryptedInterfaceMethod[\"onOauthCallback\"] = \"onOauthCallback\";\n    ScryptedInterfaceMethod[\"canMixin\"] = \"canMixin\";\n    ScryptedInterfaceMethod[\"getMixin\"] = \"getMixin\";\n    ScryptedInterfaceMethod[\"releaseMixin\"] = \"releaseMixin\";\n    ScryptedInterfaceMethod[\"onRequest\"] = \"onRequest\";\n    ScryptedInterfaceMethod[\"onConnection\"] = \"onConnection\";\n    ScryptedInterfaceMethod[\"onPush\"] = \"onPush\";\n    ScryptedInterfaceMethod[\"run\"] = \"run\";\n    ScryptedInterfaceMethod[\"eval\"] = \"eval\";\n    ScryptedInterfaceMethod[\"loadScripts\"] = \"loadScripts\";\n    ScryptedInterfaceMethod[\"saveScript\"] = \"saveScript\";\n    ScryptedInterfaceMethod[\"trackObjects\"] = \"trackObjects\";\n    ScryptedInterfaceMethod[\"getDetectionInput\"] = \"getDetectionInput\";\n    ScryptedInterfaceMethod[\"getObjectTypes\"] = \"getObjectTypes\";\n    ScryptedInterfaceMethod[\"detectObjects\"] = \"detectObjects\";\n    ScryptedInterfaceMethod[\"generateObjectDetections\"] = \"generateObjectDetections\";\n    ScryptedInterfaceMethod[\"getDetectionModel\"] = \"getDetectionModel\";\n    ScryptedInterfaceMethod[\"setHumidity\"] = \"setHumidity\";\n    ScryptedInterfaceMethod[\"setFan\"] = \"setFan\";\n    ScryptedInterfaceMethod[\"startRTCSignalingSession\"] = \"startRTCSignalingSession\";\n    ScryptedInterfaceMethod[\"createRTCSignalingSession\"] = \"createRTCSignalingSession\";\n    ScryptedInterfaceMethod[\"getScryptedUserAccessControl\"] = \"getScryptedUserAccessControl\";\n    ScryptedInterfaceMethod[\"generateVideoFrames\"] = \"generateVideoFrames\";\n})(ScryptedInterfaceMethod = exports.ScryptedInterfaceMethod || (exports.ScryptedInterfaceMethod = {}));\nexports.ScryptedInterfaceDescriptors = {\n    ScryptedDevice: {\n        name: 'ScryptedDevice',\n        methods: [\n            'listen',\n            'probe',\n            'setMixins',\n            'setName',\n            'setRoom',\n            'setType'\n        ],\n        properties: [\n            'id',\n            'info',\n            'interfaces',\n            'mixins',\n            'name',\n            'nativeId',\n            'pluginId',\n            'providedInterfaces',\n            'providedName',\n            'providedRoom',\n            'providedType',\n            'providerId',\n            'room',\n            'type'\n        ]\n    },\n    ScryptedPlugin: {\n        name: 'ScryptedPlugin',\n        methods: [\n            'getPluginJson'\n        ],\n        properties: []\n    },\n    OnOff: {\n        name: 'OnOff',\n        methods: [\n            'turnOff',\n            'turnOn'\n        ],\n        properties: [\n            'on'\n        ]\n    },\n    Brightness: {\n        name: 'Brightness',\n        methods: [\n            'setBrightness'\n        ],\n        properties: [\n            'brightness'\n        ]\n    },\n    ColorSettingTemperature: {\n        name: 'ColorSettingTemperature',\n        methods: [\n            'getTemperatureMaxK',\n            'getTemperatureMinK',\n            'setColorTemperature'\n        ],\n        properties: [\n            'colorTemperature'\n        ]\n    },\n    ColorSettingRgb: {\n        name: 'ColorSettingRgb',\n        methods: [\n            'setRgb'\n        ],\n        properties: [\n            'rgb'\n        ]\n    },\n    ColorSettingHsv: {\n        name: 'ColorSettingHsv',\n        methods: [\n            'setHsv'\n        ],\n        properties: [\n            'hsv'\n        ]\n    },\n    Notifier: {\n        name: 'Notifier',\n        methods: [\n            'sendNotification'\n        ],\n        properties: []\n    },\n    StartStop: {\n        name: 'StartStop',\n        methods: [\n            'start',\n            'stop'\n        ],\n        properties: [\n            'running'\n        ]\n    },\n    Pause: {\n        name: 'Pause',\n        methods: [\n            'pause',\n            'resume'\n        ],\n        properties: [\n            'paused'\n        ]\n    },\n    Dock: {\n        name: 'Dock',\n        methods: [\n            'dock'\n        ],\n        properties: [\n            'docked'\n        ]\n    },\n    TemperatureSetting: {\n        name: 'TemperatureSetting',\n        methods: [\n            'setTemperature',\n            'setThermostatMode',\n            'setThermostatSetpoint',\n            'setThermostatSetpointHigh',\n            'setThermostatSetpointLow'\n        ],\n        properties: [\n            'temperatureSetting',\n            'thermostatActiveMode',\n            'thermostatAvailableModes',\n            'thermostatMode',\n            'thermostatSetpoint',\n            'thermostatSetpointHigh',\n            'thermostatSetpointLow'\n        ]\n    },\n    Thermometer: {\n        name: 'Thermometer',\n        methods: [\n            'setTemperatureUnit'\n        ],\n        properties: [\n            'temperature',\n            'temperatureUnit'\n        ]\n    },\n    HumiditySensor: {\n        name: 'HumiditySensor',\n        methods: [],\n        properties: [\n            'humidity'\n        ]\n    },\n    Camera: {\n        name: 'Camera',\n        methods: [\n            'getPictureOptions',\n            'takePicture'\n        ],\n        properties: []\n    },\n    Microphone: {\n        name: 'Microphone',\n        methods: [\n            'getAudioStream'\n        ],\n        properties: []\n    },\n    Display: {\n        name: 'Display',\n        methods: [\n            'startDisplay',\n            'stopDisplay'\n        ],\n        properties: []\n    },\n    VideoCamera: {\n        name: 'VideoCamera',\n        methods: [\n            'getVideoStream',\n            'getVideoStreamOptions'\n        ],\n        properties: []\n    },\n    VideoRecorder: {\n        name: 'VideoRecorder',\n        methods: [\n            'getRecordingStream',\n            'getRecordingStreamCurrentTime',\n            'getRecordingStreamOptions',\n            'getRecordingStreamThumbnail'\n        ],\n        properties: []\n    },\n    PanTiltZoom: {\n        name: 'PanTiltZoom',\n        methods: [\n            'ptzCommand'\n        ],\n        properties: [\n            'ptzCapabilities'\n        ]\n    },\n    EventRecorder: {\n        name: 'EventRecorder',\n        methods: [\n            'getRecordedEvents'\n        ],\n        properties: []\n    },\n    VideoClips: {\n        name: 'VideoClips',\n        methods: [\n            'getVideoClip',\n            'getVideoClipThumbnail',\n            'getVideoClips',\n            'removeVideoClips'\n        ],\n        properties: []\n    },\n    VideoCameraConfiguration: {\n        name: 'VideoCameraConfiguration',\n        methods: [\n            'setVideoStreamOptions'\n        ],\n        properties: []\n    },\n    Intercom: {\n        name: 'Intercom',\n        methods: [\n            'startIntercom',\n            'stopIntercom'\n        ],\n        properties: []\n    },\n    Lock: {\n        name: 'Lock',\n        methods: [\n            'lock',\n            'unlock'\n        ],\n        properties: [\n            'lockState'\n        ]\n    },\n    PasswordStore: {\n        name: 'PasswordStore',\n        methods: [\n            'addPassword',\n            'getPasswords',\n            'removePassword'\n        ],\n        properties: []\n    },\n    Scene: {\n        name: 'Scene',\n        methods: [\n            'activate',\n            'deactivate',\n            'isReversible'\n        ],\n        properties: []\n    },\n    Entry: {\n        name: 'Entry',\n        methods: [\n            'closeEntry',\n            'openEntry'\n        ],\n        properties: []\n    },\n    EntrySensor: {\n        name: 'EntrySensor',\n        methods: [],\n        properties: [\n            'entryOpen'\n        ]\n    },\n    DeviceProvider: {\n        name: 'DeviceProvider',\n        methods: [\n            'getDevice',\n            'releaseDevice'\n        ],\n        properties: []\n    },\n    DeviceDiscovery: {\n        name: 'DeviceDiscovery',\n        methods: [\n            'adoptDevice',\n            'discoverDevices'\n        ],\n        properties: []\n    },\n    DeviceCreator: {\n        name: 'DeviceCreator',\n        methods: [\n            'createDevice',\n            'getCreateDeviceSettings'\n        ],\n        properties: []\n    },\n    Battery: {\n        name: 'Battery',\n        methods: [],\n        properties: [\n            'batteryLevel'\n        ]\n    },\n    Charger: {\n        name: 'Charger',\n        methods: [],\n        properties: [\n            'chargeState'\n        ]\n    },\n    Refresh: {\n        name: 'Refresh',\n        methods: [\n            'getRefreshFrequency',\n            'refresh'\n        ],\n        properties: []\n    },\n    MediaPlayer: {\n        name: 'MediaPlayer',\n        methods: [\n            'getMediaStatus',\n            'load',\n            'seek',\n            'skipNext',\n            'skipPrevious'\n        ],\n        properties: []\n    },\n    Online: {\n        name: 'Online',\n        methods: [],\n        properties: [\n            'online'\n        ]\n    },\n    BufferConverter: {\n        name: 'BufferConverter',\n        methods: [\n            'convert'\n        ],\n        properties: [\n            'fromMimeType',\n            'toMimeType'\n        ]\n    },\n    Settings: {\n        name: 'Settings',\n        methods: [\n            'getSettings',\n            'putSetting'\n        ],\n        properties: []\n    },\n    BinarySensor: {\n        name: 'BinarySensor',\n        methods: [],\n        properties: [\n            'binaryState'\n        ]\n    },\n    TamperSensor: {\n        name: 'TamperSensor',\n        methods: [],\n        properties: [\n            'tampered'\n        ]\n    },\n    PowerSensor: {\n        name: 'PowerSensor',\n        methods: [],\n        properties: [\n            'powerDetected'\n        ]\n    },\n    AudioSensor: {\n        name: 'AudioSensor',\n        methods: [],\n        properties: [\n            'audioDetected'\n        ]\n    },\n    MotionSensor: {\n        name: 'MotionSensor',\n        methods: [],\n        properties: [\n            'motionDetected'\n        ]\n    },\n    AmbientLightSensor: {\n        name: 'AmbientLightSensor',\n        methods: [],\n        properties: [\n            'ambientLight'\n        ]\n    },\n    OccupancySensor: {\n        name: 'OccupancySensor',\n        methods: [],\n        properties: [\n            'occupied'\n        ]\n    },\n    FloodSensor: {\n        name: 'FloodSensor',\n        methods: [],\n        properties: [\n            'flooded'\n        ]\n    },\n    UltravioletSensor: {\n        name: 'UltravioletSensor',\n        methods: [],\n        properties: [\n            'ultraviolet'\n        ]\n    },\n    LuminanceSensor: {\n        name: 'LuminanceSensor',\n        methods: [],\n        properties: [\n            'luminance'\n        ]\n    },\n    PositionSensor: {\n        name: 'PositionSensor',\n        methods: [],\n        properties: [\n            'position'\n        ]\n    },\n    SecuritySystem: {\n        name: 'SecuritySystem',\n        methods: [\n            'armSecuritySystem',\n            'disarmSecuritySystem'\n        ],\n        properties: [\n            'securitySystemState'\n        ]\n    },\n    PM10Sensor: {\n        name: 'PM10Sensor',\n        methods: [],\n        properties: [\n            'pm10Density'\n        ]\n    },\n    PM25Sensor: {\n        name: 'PM25Sensor',\n        methods: [],\n        properties: [\n            'pm25Density'\n        ]\n    },\n    VOCSensor: {\n        name: 'VOCSensor',\n        methods: [],\n        properties: [\n            'vocDensity'\n        ]\n    },\n    NOXSensor: {\n        name: 'NOXSensor',\n        methods: [],\n        properties: [\n            'noxDensity'\n        ]\n    },\n    CO2Sensor: {\n        name: 'CO2Sensor',\n        methods: [],\n        properties: [\n            'co2ppm'\n        ]\n    },\n    AirQualitySensor: {\n        name: 'AirQualitySensor',\n        methods: [],\n        properties: [\n            'airQuality'\n        ]\n    },\n    Readme: {\n        name: 'Readme',\n        methods: [\n            'getReadmeMarkdown'\n        ],\n        properties: []\n    },\n    OauthClient: {\n        name: 'OauthClient',\n        methods: [\n            'getOauthUrl',\n            'onOauthCallback'\n        ],\n        properties: []\n    },\n    MixinProvider: {\n        name: 'MixinProvider',\n        methods: [\n            'canMixin',\n            'getMixin',\n            'releaseMixin'\n        ],\n        properties: []\n    },\n    HttpRequestHandler: {\n        name: 'HttpRequestHandler',\n        methods: [\n            'onRequest'\n        ],\n        properties: []\n    },\n    EngineIOHandler: {\n        name: 'EngineIOHandler',\n        methods: [\n            'onConnection'\n        ],\n        properties: []\n    },\n    PushHandler: {\n        name: 'PushHandler',\n        methods: [\n            'onPush'\n        ],\n        properties: []\n    },\n    Program: {\n        name: 'Program',\n        methods: [\n            'run'\n        ],\n        properties: []\n    },\n    Scriptable: {\n        name: 'Scriptable',\n        methods: [\n            'eval',\n            'loadScripts',\n            'saveScript'\n        ],\n        properties: []\n    },\n    ObjectTracker: {\n        name: 'ObjectTracker',\n        methods: [\n            'trackObjects'\n        ],\n        properties: []\n    },\n    ObjectDetector: {\n        name: 'ObjectDetector',\n        methods: [\n            'getDetectionInput',\n            'getObjectTypes'\n        ],\n        properties: []\n    },\n    ObjectDetection: {\n        name: 'ObjectDetection',\n        methods: [\n            'detectObjects',\n            'generateObjectDetections',\n            'getDetectionModel'\n        ],\n        properties: []\n    },\n    HumiditySetting: {\n        name: 'HumiditySetting',\n        methods: [\n            'setHumidity'\n        ],\n        properties: [\n            'humiditySetting'\n        ]\n    },\n    Fan: {\n        name: 'Fan',\n        methods: [\n            'setFan'\n        ],\n        properties: [\n            'fan'\n        ]\n    },\n    RTCSignalingChannel: {\n        name: 'RTCSignalingChannel',\n        methods: [\n            'startRTCSignalingSession'\n        ],\n        properties: []\n    },\n    RTCSignalingClient: {\n        name: 'RTCSignalingClient',\n        methods: [\n            'createRTCSignalingSession'\n        ],\n        properties: []\n    },\n    LauncherApplication: {\n        name: 'LauncherApplication',\n        methods: [],\n        properties: [\n            'applicationInfo'\n        ]\n    },\n    ScryptedUser: {\n        name: 'ScryptedUser',\n        methods: [\n            'getScryptedUserAccessControl'\n        ],\n        properties: []\n    },\n    VideoFrameGenerator: {\n        name: 'VideoFrameGenerator',\n        methods: [\n            'generateVideoFrames'\n        ],\n        properties: []\n    }\n};\n/**\n * @category Core Reference\n */\nvar ScryptedDeviceType;\n(function (ScryptedDeviceType) {\n    ScryptedDeviceType[\"Builtin\"] = \"Builtin\";\n    ScryptedDeviceType[\"Camera\"] = \"Camera\";\n    ScryptedDeviceType[\"Fan\"] = \"Fan\";\n    ScryptedDeviceType[\"Light\"] = \"Light\";\n    ScryptedDeviceType[\"Switch\"] = \"Switch\";\n    ScryptedDeviceType[\"Outlet\"] = \"Outlet\";\n    ScryptedDeviceType[\"Sensor\"] = \"Sensor\";\n    ScryptedDeviceType[\"Scene\"] = \"Scene\";\n    ScryptedDeviceType[\"Program\"] = \"Program\";\n    ScryptedDeviceType[\"Automation\"] = \"Automation\";\n    ScryptedDeviceType[\"Vacuum\"] = \"Vacuum\";\n    ScryptedDeviceType[\"Notifier\"] = \"Notifier\";\n    ScryptedDeviceType[\"Thermostat\"] = \"Thermostat\";\n    ScryptedDeviceType[\"Lock\"] = \"Lock\";\n    ScryptedDeviceType[\"PasswordControl\"] = \"PasswordControl\";\n    /**\n     * Displays have audio and video output.\n     */\n    ScryptedDeviceType[\"Display\"] = \"Display\";\n    /**\n     * Smart Displays have two way audio and video.\n     */\n    ScryptedDeviceType[\"SmartDisplay\"] = \"SmartDisplay\";\n    ScryptedDeviceType[\"Speaker\"] = \"Speaker\";\n    /**\n     * Smart Speakers have two way audio.\n     */\n    ScryptedDeviceType[\"SmartSpeaker\"] = \"SmartSpeaker\";\n    ScryptedDeviceType[\"Event\"] = \"Event\";\n    ScryptedDeviceType[\"Entry\"] = \"Entry\";\n    ScryptedDeviceType[\"Garage\"] = \"Garage\";\n    ScryptedDeviceType[\"DeviceProvider\"] = \"DeviceProvider\";\n    ScryptedDeviceType[\"DataSource\"] = \"DataSource\";\n    ScryptedDeviceType[\"API\"] = \"API\";\n    ScryptedDeviceType[\"Doorbell\"] = \"Doorbell\";\n    ScryptedDeviceType[\"Irrigation\"] = \"Irrigation\";\n    ScryptedDeviceType[\"Valve\"] = \"Valve\";\n    ScryptedDeviceType[\"Person\"] = \"Person\";\n    ScryptedDeviceType[\"SecuritySystem\"] = \"SecuritySystem\";\n    ScryptedDeviceType[\"WindowCovering\"] = \"WindowCovering\";\n    ScryptedDeviceType[\"Siren\"] = \"Siren\";\n    ScryptedDeviceType[\"Unknown\"] = \"Unknown\";\n})(ScryptedDeviceType = exports.ScryptedDeviceType || (exports.ScryptedDeviceType = {}));\nvar HumidityMode;\n(function (HumidityMode) {\n    HumidityMode[\"Humidify\"] = \"Humidify\";\n    HumidityMode[\"Dehumidify\"] = \"Dehumidify\";\n    HumidityMode[\"Auto\"] = \"Auto\";\n    HumidityMode[\"Off\"] = \"Off\";\n})(HumidityMode = exports.HumidityMode || (exports.HumidityMode = {}));\nvar FanMode;\n(function (FanMode) {\n    FanMode[\"Auto\"] = \"Auto\";\n    FanMode[\"Manual\"] = \"Manual\";\n})(FanMode = exports.FanMode || (exports.FanMode = {}));\nvar TemperatureUnit;\n(function (TemperatureUnit) {\n    TemperatureUnit[\"C\"] = \"C\";\n    TemperatureUnit[\"F\"] = \"F\";\n})(TemperatureUnit = exports.TemperatureUnit || (exports.TemperatureUnit = {}));\nvar ThermostatMode;\n(function (ThermostatMode) {\n    ThermostatMode[\"Off\"] = \"Off\";\n    ThermostatMode[\"Cool\"] = \"Cool\";\n    ThermostatMode[\"Heat\"] = \"Heat\";\n    ThermostatMode[\"HeatCool\"] = \"HeatCool\";\n    ThermostatMode[\"Auto\"] = \"Auto\";\n    ThermostatMode[\"FanOnly\"] = \"FanOnly\";\n    ThermostatMode[\"Purifier\"] = \"Purifier\";\n    ThermostatMode[\"Eco\"] = \"Eco\";\n    ThermostatMode[\"Dry\"] = \"Dry\";\n    ThermostatMode[\"On\"] = \"On\";\n})(ThermostatMode = exports.ThermostatMode || (exports.ThermostatMode = {}));\nvar PanTiltZoomMovement;\n(function (PanTiltZoomMovement) {\n    PanTiltZoomMovement[\"Absolute\"] = \"Absolute\";\n    PanTiltZoomMovement[\"Relative\"] = \"Relative\";\n})(PanTiltZoomMovement = exports.PanTiltZoomMovement || (exports.PanTiltZoomMovement = {}));\nvar LockState;\n(function (LockState) {\n    LockState[\"Locked\"] = \"Locked\";\n    LockState[\"Unlocked\"] = \"Unlocked\";\n    LockState[\"Jammed\"] = \"Jammed\";\n})(LockState = exports.LockState || (exports.LockState = {}));\nvar ChargeState;\n(function (ChargeState) {\n    ChargeState[\"Trickle\"] = \"trickle\";\n    ChargeState[\"Charging\"] = \"charging\";\n    ChargeState[\"NotCharging\"] = \"not-charging\";\n})(ChargeState = exports.ChargeState || (exports.ChargeState = {}));\nvar AirQuality;\n(function (AirQuality) {\n    AirQuality[\"Unknown\"] = \"Unknown\";\n    AirQuality[\"Excellent\"] = \"Excellent\";\n    AirQuality[\"Good\"] = \"Good\";\n    AirQuality[\"Fair\"] = \"Fair\";\n    AirQuality[\"Inferior\"] = \"Inferior\";\n    AirQuality[\"Poor\"] = \"Poor\";\n})(AirQuality = exports.AirQuality || (exports.AirQuality = {}));\nvar SecuritySystemMode;\n(function (SecuritySystemMode) {\n    SecuritySystemMode[\"Disarmed\"] = \"Disarmed\";\n    SecuritySystemMode[\"HomeArmed\"] = \"HomeArmed\";\n    SecuritySystemMode[\"AwayArmed\"] = \"AwayArmed\";\n    SecuritySystemMode[\"NightArmed\"] = \"NightArmed\";\n})(SecuritySystemMode = exports.SecuritySystemMode || (exports.SecuritySystemMode = {}));\nvar SecuritySystemObstruction;\n(function (SecuritySystemObstruction) {\n    SecuritySystemObstruction[\"Sensor\"] = \"Sensor\";\n    SecuritySystemObstruction[\"Occupied\"] = \"Occupied\";\n    SecuritySystemObstruction[\"Time\"] = \"Time\";\n    SecuritySystemObstruction[\"Error\"] = \"Error\";\n})(SecuritySystemObstruction = exports.SecuritySystemObstruction || (exports.SecuritySystemObstruction = {}));\nvar MediaPlayerState;\n(function (MediaPlayerState) {\n    MediaPlayerState[\"Idle\"] = \"Idle\";\n    MediaPlayerState[\"Playing\"] = \"Playing\";\n    MediaPlayerState[\"Paused\"] = \"Paused\";\n    MediaPlayerState[\"Buffering\"] = \"Buffering\";\n})(MediaPlayerState = exports.MediaPlayerState || (exports.MediaPlayerState = {}));\nvar ScryptedInterface;\n(function (ScryptedInterface) {\n    ScryptedInterface[\"ScryptedDevice\"] = \"ScryptedDevice\";\n    ScryptedInterface[\"ScryptedPlugin\"] = \"ScryptedPlugin\";\n    ScryptedInterface[\"OnOff\"] = \"OnOff\";\n    ScryptedInterface[\"Brightness\"] = \"Brightness\";\n    ScryptedInterface[\"ColorSettingTemperature\"] = \"ColorSettingTemperature\";\n    ScryptedInterface[\"ColorSettingRgb\"] = \"ColorSettingRgb\";\n    ScryptedInterface[\"ColorSettingHsv\"] = \"ColorSettingHsv\";\n    ScryptedInterface[\"Notifier\"] = \"Notifier\";\n    ScryptedInterface[\"StartStop\"] = \"StartStop\";\n    ScryptedInterface[\"Pause\"] = \"Pause\";\n    ScryptedInterface[\"Dock\"] = \"Dock\";\n    ScryptedInterface[\"TemperatureSetting\"] = \"TemperatureSetting\";\n    ScryptedInterface[\"Thermometer\"] = \"Thermometer\";\n    ScryptedInterface[\"HumiditySensor\"] = \"HumiditySensor\";\n    ScryptedInterface[\"Camera\"] = \"Camera\";\n    ScryptedInterface[\"Microphone\"] = \"Microphone\";\n    ScryptedInterface[\"Display\"] = \"Display\";\n    ScryptedInterface[\"VideoCamera\"] = \"VideoCamera\";\n    ScryptedInterface[\"VideoRecorder\"] = \"VideoRecorder\";\n    ScryptedInterface[\"PanTiltZoom\"] = \"PanTiltZoom\";\n    ScryptedInterface[\"EventRecorder\"] = \"EventRecorder\";\n    ScryptedInterface[\"VideoClips\"] = \"VideoClips\";\n    ScryptedInterface[\"VideoCameraConfiguration\"] = \"VideoCameraConfiguration\";\n    ScryptedInterface[\"Intercom\"] = \"Intercom\";\n    ScryptedInterface[\"Lock\"] = \"Lock\";\n    ScryptedInterface[\"PasswordStore\"] = \"PasswordStore\";\n    ScryptedInterface[\"Scene\"] = \"Scene\";\n    ScryptedInterface[\"Entry\"] = \"Entry\";\n    ScryptedInterface[\"EntrySensor\"] = \"EntrySensor\";\n    ScryptedInterface[\"DeviceProvider\"] = \"DeviceProvider\";\n    ScryptedInterface[\"DeviceDiscovery\"] = \"DeviceDiscovery\";\n    ScryptedInterface[\"DeviceCreator\"] = \"DeviceCreator\";\n    ScryptedInterface[\"Battery\"] = \"Battery\";\n    ScryptedInterface[\"Charger\"] = \"Charger\";\n    ScryptedInterface[\"Refresh\"] = \"Refresh\";\n    ScryptedInterface[\"MediaPlayer\"] = \"MediaPlayer\";\n    ScryptedInterface[\"Online\"] = \"Online\";\n    ScryptedInterface[\"BufferConverter\"] = \"BufferConverter\";\n    ScryptedInterface[\"Settings\"] = \"Settings\";\n    ScryptedInterface[\"BinarySensor\"] = \"BinarySensor\";\n    ScryptedInterface[\"TamperSensor\"] = \"TamperSensor\";\n    ScryptedInterface[\"PowerSensor\"] = \"PowerSensor\";\n    ScryptedInterface[\"AudioSensor\"] = \"AudioSensor\";\n    ScryptedInterface[\"MotionSensor\"] = \"MotionSensor\";\n    ScryptedInterface[\"AmbientLightSensor\"] = \"AmbientLightSensor\";\n    ScryptedInterface[\"OccupancySensor\"] = \"OccupancySensor\";\n    ScryptedInterface[\"FloodSensor\"] = \"FloodSensor\";\n    ScryptedInterface[\"UltravioletSensor\"] = \"UltravioletSensor\";\n    ScryptedInterface[\"LuminanceSensor\"] = \"LuminanceSensor\";\n    ScryptedInterface[\"PositionSensor\"] = \"PositionSensor\";\n    ScryptedInterface[\"SecuritySystem\"] = \"SecuritySystem\";\n    ScryptedInterface[\"PM10Sensor\"] = \"PM10Sensor\";\n    ScryptedInterface[\"PM25Sensor\"] = \"PM25Sensor\";\n    ScryptedInterface[\"VOCSensor\"] = \"VOCSensor\";\n    ScryptedInterface[\"NOXSensor\"] = \"NOXSensor\";\n    ScryptedInterface[\"CO2Sensor\"] = \"CO2Sensor\";\n    ScryptedInterface[\"AirQualitySensor\"] = \"AirQualitySensor\";\n    ScryptedInterface[\"Readme\"] = \"Readme\";\n    ScryptedInterface[\"OauthClient\"] = \"OauthClient\";\n    ScryptedInterface[\"MixinProvider\"] = \"MixinProvider\";\n    ScryptedInterface[\"HttpRequestHandler\"] = \"HttpRequestHandler\";\n    ScryptedInterface[\"EngineIOHandler\"] = \"EngineIOHandler\";\n    ScryptedInterface[\"PushHandler\"] = \"PushHandler\";\n    ScryptedInterface[\"Program\"] = \"Program\";\n    ScryptedInterface[\"Scriptable\"] = \"Scriptable\";\n    ScryptedInterface[\"ObjectTracker\"] = \"ObjectTracker\";\n    ScryptedInterface[\"ObjectDetector\"] = \"ObjectDetector\";\n    ScryptedInterface[\"ObjectDetection\"] = \"ObjectDetection\";\n    ScryptedInterface[\"HumiditySetting\"] = \"HumiditySetting\";\n    ScryptedInterface[\"Fan\"] = \"Fan\";\n    ScryptedInterface[\"RTCSignalingChannel\"] = \"RTCSignalingChannel\";\n    ScryptedInterface[\"RTCSignalingClient\"] = \"RTCSignalingClient\";\n    ScryptedInterface[\"LauncherApplication\"] = \"LauncherApplication\";\n    ScryptedInterface[\"ScryptedUser\"] = \"ScryptedUser\";\n    ScryptedInterface[\"VideoFrameGenerator\"] = \"VideoFrameGenerator\";\n})(ScryptedInterface = exports.ScryptedInterface || (exports.ScryptedInterface = {}));\nvar ScryptedMimeTypes;\n(function (ScryptedMimeTypes) {\n    ScryptedMimeTypes[\"Url\"] = \"text/x-uri\";\n    ScryptedMimeTypes[\"InsecureLocalUrl\"] = \"text/x-insecure-local-uri\";\n    ScryptedMimeTypes[\"LocalUrl\"] = \"text/x-local-uri\";\n    ScryptedMimeTypes[\"PushEndpoint\"] = \"text/x-push-endpoint\";\n    ScryptedMimeTypes[\"SchemePrefix\"] = \"x-scrypted/x-scrypted-scheme-\";\n    ScryptedMimeTypes[\"MediaStreamUrl\"] = \"text/x-media-url\";\n    ScryptedMimeTypes[\"MediaObject\"] = \"x-scrypted/x-scrypted-media-object\";\n    ScryptedMimeTypes[\"RequestMediaObject\"] = \"x-scrypted/x-scrypted-request-media-object\";\n    ScryptedMimeTypes[\"RequestMediaStream\"] = \"x-scrypted/x-scrypted-request-stream\";\n    ScryptedMimeTypes[\"MediaStreamFeedback\"] = \"x-scrypted/x-media-stream-feedback\";\n    ScryptedMimeTypes[\"FFmpegInput\"] = \"x-scrypted/x-ffmpeg-input\";\n    ScryptedMimeTypes[\"FFmpegTranscodeStream\"] = \"x-scrypted/x-ffmpeg-transcode-stream\";\n    ScryptedMimeTypes[\"RTCSignalingChannel\"] = \"x-scrypted/x-scrypted-rtc-signaling-channel\";\n    ScryptedMimeTypes[\"RTCSignalingSession\"] = \"x-scrypted/x-scrypted-rtc-signaling-session\";\n    ScryptedMimeTypes[\"RTCConnectionManagement\"] = \"x-scrypted/x-scrypted-rtc-connection-management\";\n    ScryptedMimeTypes[\"Image\"] = \"x-scrypted/x-scrypted-image\";\n})(ScryptedMimeTypes = exports.ScryptedMimeTypes || (exports.ScryptedMimeTypes = {}));\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ScryptedMimeTypes = exports.ScryptedInterface = exports.MediaPlayerState = exports.SecuritySystemObstruction = exports.SecuritySystemMode = exports.AirQuality = exports.ChargeState = exports.LockState = exports.PanTiltZoomMovement = exports.ThermostatMode = exports.TemperatureUnit = exports.FanMode = exports.HumidityMode = exports.ScryptedDeviceType = exports.ScryptedInterfaceDescriptors = exports.ScryptedInterfaceMethod = exports.ScryptedInterfaceProperty = exports.DeviceBase = exports.TYPES_VERSION = void 0;\nexports.TYPES_VERSION = \"0.2.79\";\nclass DeviceBase {\n}\nexports.DeviceBase = DeviceBase;\nvar ScryptedInterfaceProperty;\n(function (ScryptedInterfaceProperty) {\n    ScryptedInterfaceProperty[\"id\"] = \"id\";\n    ScryptedInterfaceProperty[\"info\"] = \"info\";\n    ScryptedInterfaceProperty[\"interfaces\"] = \"interfaces\";\n    ScryptedInterfaceProperty[\"mixins\"] = \"mixins\";\n    ScryptedInterfaceProperty[\"name\"] = \"name\";\n    ScryptedInterfaceProperty[\"nativeId\"] = \"nativeId\";\n    ScryptedInterfaceProperty[\"pluginId\"] = \"pluginId\";\n    ScryptedInterfaceProperty[\"providedInterfaces\"] = \"providedInterfaces\";\n    ScryptedInterfaceProperty[\"providedName\"] = \"providedName\";\n    ScryptedInterfaceProperty[\"providedRoom\"] = \"providedRoom\";\n    ScryptedInterfaceProperty[\"providedType\"] = \"providedType\";\n    ScryptedInterfaceProperty[\"providerId\"] = \"providerId\";\n    ScryptedInterfaceProperty[\"room\"] = \"room\";\n    ScryptedInterfaceProperty[\"type\"] = \"type\";\n    ScryptedInterfaceProperty[\"on\"] = \"on\";\n    ScryptedInterfaceProperty[\"brightness\"] = \"brightness\";\n    ScryptedInterfaceProperty[\"colorTemperature\"] = \"colorTemperature\";\n    ScryptedInterfaceProperty[\"rgb\"] = \"rgb\";\n    ScryptedInterfaceProperty[\"hsv\"] = \"hsv\";\n    ScryptedInterfaceProperty[\"running\"] = \"running\";\n    ScryptedInterfaceProperty[\"paused\"] = \"paused\";\n    ScryptedInterfaceProperty[\"docked\"] = \"docked\";\n    ScryptedInterfaceProperty[\"temperatureSetting\"] = \"temperatureSetting\";\n    ScryptedInterfaceProperty[\"thermostatActiveMode\"] = \"thermostatActiveMode\";\n    ScryptedInterfaceProperty[\"thermostatAvailableModes\"] = \"thermostatAvailableModes\";\n    ScryptedInterfaceProperty[\"thermostatMode\"] = \"thermostatMode\";\n    ScryptedInterfaceProperty[\"thermostatSetpoint\"] = \"thermostatSetpoint\";\n    ScryptedInterfaceProperty[\"thermostatSetpointHigh\"] = \"thermostatSetpointHigh\";\n    ScryptedInterfaceProperty[\"thermostatSetpointLow\"] = \"thermostatSetpointLow\";\n    ScryptedInterfaceProperty[\"temperature\"] = \"temperature\";\n    ScryptedInterfaceProperty[\"temperatureUnit\"] = \"temperatureUnit\";\n    ScryptedInterfaceProperty[\"humidity\"] = \"humidity\";\n    ScryptedInterfaceProperty[\"ptzCapabilities\"] = \"ptzCapabilities\";\n    ScryptedInterfaceProperty[\"lockState\"] = \"lockState\";\n    ScryptedInterfaceProperty[\"entryOpen\"] = \"entryOpen\";\n    ScryptedInterfaceProperty[\"batteryLevel\"] = \"batteryLevel\";\n    ScryptedInterfaceProperty[\"chargeState\"] = \"chargeState\";\n    ScryptedInterfaceProperty[\"online\"] = \"online\";\n    ScryptedInterfaceProperty[\"fromMimeType\"] = \"fromMimeType\";\n    ScryptedInterfaceProperty[\"toMimeType\"] = \"toMimeType\";\n    ScryptedInterfaceProperty[\"binaryState\"] = \"binaryState\";\n    ScryptedInterfaceProperty[\"tampered\"] = \"tampered\";\n    ScryptedInterfaceProperty[\"powerDetected\"] = \"powerDetected\";\n    ScryptedInterfaceProperty[\"audioDetected\"] = \"audioDetected\";\n    ScryptedInterfaceProperty[\"motionDetected\"] = \"motionDetected\";\n    ScryptedInterfaceProperty[\"ambientLight\"] = \"ambientLight\";\n    ScryptedInterfaceProperty[\"occupied\"] = \"occupied\";\n    ScryptedInterfaceProperty[\"flooded\"] = \"flooded\";\n    ScryptedInterfaceProperty[\"ultraviolet\"] = \"ultraviolet\";\n    ScryptedInterfaceProperty[\"luminance\"] = \"luminance\";\n    ScryptedInterfaceProperty[\"position\"] = \"position\";\n    ScryptedInterfaceProperty[\"securitySystemState\"] = \"securitySystemState\";\n    ScryptedInterfaceProperty[\"pm10Density\"] = \"pm10Density\";\n    ScryptedInterfaceProperty[\"pm25Density\"] = \"pm25Density\";\n    ScryptedInterfaceProperty[\"vocDensity\"] = \"vocDensity\";\n    ScryptedInterfaceProperty[\"noxDensity\"] = \"noxDensity\";\n    ScryptedInterfaceProperty[\"co2ppm\"] = \"co2ppm\";\n    ScryptedInterfaceProperty[\"airQuality\"] = \"airQuality\";\n    ScryptedInterfaceProperty[\"humiditySetting\"] = \"humiditySetting\";\n    ScryptedInterfaceProperty[\"fan\"] = \"fan\";\n    ScryptedInterfaceProperty[\"applicationInfo\"] = \"applicationInfo\";\n})(ScryptedInterfaceProperty = exports.ScryptedInterfaceProperty || (exports.ScryptedInterfaceProperty = {}));\nvar ScryptedInterfaceMethod;\n(function (ScryptedInterfaceMethod) {\n    ScryptedInterfaceMethod[\"listen\"] = \"listen\";\n    ScryptedInterfaceMethod[\"probe\"] = \"probe\";\n    ScryptedInterfaceMethod[\"setMixins\"] = \"setMixins\";\n    ScryptedInterfaceMethod[\"setName\"] = \"setName\";\n    ScryptedInterfaceMethod[\"setRoom\"] = \"setRoom\";\n    ScryptedInterfaceMethod[\"setType\"] = \"setType\";\n    ScryptedInterfaceMethod[\"getPluginJson\"] = \"getPluginJson\";\n    ScryptedInterfaceMethod[\"turnOff\"] = \"turnOff\";\n    ScryptedInterfaceMethod[\"turnOn\"] = \"turnOn\";\n    ScryptedInterfaceMethod[\"setBrightness\"] = \"setBrightness\";\n    ScryptedInterfaceMethod[\"getTemperatureMaxK\"] = \"getTemperatureMaxK\";\n    ScryptedInterfaceMethod[\"getTemperatureMinK\"] = \"getTemperatureMinK\";\n    ScryptedInterfaceMethod[\"setColorTemperature\"] = \"setColorTemperature\";\n    ScryptedInterfaceMethod[\"setRgb\"] = \"setRgb\";\n    ScryptedInterfaceMethod[\"setHsv\"] = \"setHsv\";\n    ScryptedInterfaceMethod[\"sendNotification\"] = \"sendNotification\";\n    ScryptedInterfaceMethod[\"start\"] = \"start\";\n    ScryptedInterfaceMethod[\"stop\"] = \"stop\";\n    ScryptedInterfaceMethod[\"pause\"] = \"pause\";\n    ScryptedInterfaceMethod[\"resume\"] = \"resume\";\n    ScryptedInterfaceMethod[\"dock\"] = \"dock\";\n    ScryptedInterfaceMethod[\"setTemperature\"] = \"setTemperature\";\n    ScryptedInterfaceMethod[\"setThermostatMode\"] = \"setThermostatMode\";\n    ScryptedInterfaceMethod[\"setThermostatSetpoint\"] = \"setThermostatSetpoint\";\n    ScryptedInterfaceMethod[\"setThermostatSetpointHigh\"] = \"setThermostatSetpointHigh\";\n    ScryptedInterfaceMethod[\"setThermostatSetpointLow\"] = \"setThermostatSetpointLow\";\n    ScryptedInterfaceMethod[\"setTemperatureUnit\"] = \"setTemperatureUnit\";\n    ScryptedInterfaceMethod[\"getPictureOptions\"] = \"getPictureOptions\";\n    ScryptedInterfaceMethod[\"takePicture\"] = \"takePicture\";\n    ScryptedInterfaceMethod[\"getAudioStream\"] = \"getAudioStream\";\n    ScryptedInterfaceMethod[\"startDisplay\"] = \"startDisplay\";\n    ScryptedInterfaceMethod[\"stopDisplay\"] = \"stopDisplay\";\n    ScryptedInterfaceMethod[\"getVideoStream\"] = \"getVideoStream\";\n    ScryptedInterfaceMethod[\"getVideoStreamOptions\"] = \"getVideoStreamOptions\";\n    ScryptedInterfaceMethod[\"getRecordingStream\"] = \"getRecordingStream\";\n    ScryptedInterfaceMethod[\"getRecordingStreamCurrentTime\"] = \"getRecordingStreamCurrentTime\";\n    ScryptedInterfaceMethod[\"getRecordingStreamOptions\"] = \"getRecordingStreamOptions\";\n    ScryptedInterfaceMethod[\"getRecordingStreamThumbnail\"] = \"getRecordingStreamThumbnail\";\n    ScryptedInterfaceMethod[\"ptzCommand\"] = \"ptzCommand\";\n    ScryptedInterfaceMethod[\"getRecordedEvents\"] = \"getRecordedEvents\";\n    ScryptedInterfaceMethod[\"getVideoClip\"] = \"getVideoClip\";\n    ScryptedInterfaceMethod[\"getVideoClipThumbnail\"] = \"getVideoClipThumbnail\";\n    ScryptedInterfaceMethod[\"getVideoClips\"] = \"getVideoClips\";\n    ScryptedInterfaceMethod[\"removeVideoClips\"] = \"removeVideoClips\";\n    ScryptedInterfaceMethod[\"setVideoStreamOptions\"] = \"setVideoStreamOptions\";\n    ScryptedInterfaceMethod[\"startIntercom\"] = \"startIntercom\";\n    ScryptedInterfaceMethod[\"stopIntercom\"] = \"stopIntercom\";\n    ScryptedInterfaceMethod[\"lock\"] = \"lock\";\n    ScryptedInterfaceMethod[\"unlock\"] = \"unlock\";\n    ScryptedInterfaceMethod[\"addPassword\"] = \"addPassword\";\n    ScryptedInterfaceMethod[\"getPasswords\"] = \"getPasswords\";\n    ScryptedInterfaceMethod[\"removePassword\"] = \"removePassword\";\n    ScryptedInterfaceMethod[\"activate\"] = \"activate\";\n    ScryptedInterfaceMethod[\"deactivate\"] = \"deactivate\";\n    ScryptedInterfaceMethod[\"isReversible\"] = \"isReversible\";\n    ScryptedInterfaceMethod[\"closeEntry\"] = \"closeEntry\";\n    ScryptedInterfaceMethod[\"openEntry\"] = \"openEntry\";\n    ScryptedInterfaceMethod[\"getDevice\"] = \"getDevice\";\n    ScryptedInterfaceMethod[\"releaseDevice\"] = \"releaseDevice\";\n    ScryptedInterfaceMethod[\"adoptDevice\"] = \"adoptDevice\";\n    ScryptedInterfaceMethod[\"discoverDevices\"] = \"discoverDevices\";\n    ScryptedInterfaceMethod[\"createDevice\"] = \"createDevice\";\n    ScryptedInterfaceMethod[\"getCreateDeviceSettings\"] = \"getCreateDeviceSettings\";\n    ScryptedInterfaceMethod[\"getRefreshFrequency\"] = \"getRefreshFrequency\";\n    ScryptedInterfaceMethod[\"refresh\"] = \"refresh\";\n    ScryptedInterfaceMethod[\"getMediaStatus\"] = \"getMediaStatus\";\n    ScryptedInterfaceMethod[\"load\"] = \"load\";\n    ScryptedInterfaceMethod[\"seek\"] = \"seek\";\n    ScryptedInterfaceMethod[\"skipNext\"] = \"skipNext\";\n    ScryptedInterfaceMethod[\"skipPrevious\"] = \"skipPrevious\";\n    ScryptedInterfaceMethod[\"convert\"] = \"convert\";\n    ScryptedInterfaceMethod[\"getSettings\"] = \"getSettings\";\n    ScryptedInterfaceMethod[\"putSetting\"] = \"putSetting\";\n    ScryptedInterfaceMethod[\"armSecuritySystem\"] = \"armSecuritySystem\";\n    ScryptedInterfaceMethod[\"disarmSecuritySystem\"] = \"disarmSecuritySystem\";\n    ScryptedInterfaceMethod[\"getReadmeMarkdown\"] = \"getReadmeMarkdown\";\n    ScryptedInterfaceMethod[\"getOauthUrl\"] = \"getOauthUrl\";\n    ScryptedInterfaceMethod[\"onOauthCallback\"] = \"onOauthCallback\";\n    ScryptedInterfaceMethod[\"canMixin\"] = \"canMixin\";\n    ScryptedInterfaceMethod[\"getMixin\"] = \"getMixin\";\n    ScryptedInterfaceMethod[\"releaseMixin\"] = \"releaseMixin\";\n    ScryptedInterfaceMethod[\"onRequest\"] = \"onRequest\";\n    ScryptedInterfaceMethod[\"onConnection\"] = \"onConnection\";\n    ScryptedInterfaceMethod[\"onPush\"] = \"onPush\";\n    ScryptedInterfaceMethod[\"run\"] = \"run\";\n    ScryptedInterfaceMethod[\"eval\"] = \"eval\";\n    ScryptedInterfaceMethod[\"loadScripts\"] = \"loadScripts\";\n    ScryptedInterfaceMethod[\"saveScript\"] = \"saveScript\";\n    ScryptedInterfaceMethod[\"trackObjects\"] = \"trackObjects\";\n    ScryptedInterfaceMethod[\"getDetectionInput\"] = \"getDetectionInput\";\n    ScryptedInterfaceMethod[\"getObjectTypes\"] = \"getObjectTypes\";\n    ScryptedInterfaceMethod[\"detectObjects\"] = \"detectObjects\";\n    ScryptedInterfaceMethod[\"generateObjectDetections\"] = \"generateObjectDetections\";\n    ScryptedInterfaceMethod[\"getDetectionModel\"] = \"getDetectionModel\";\n    ScryptedInterfaceMethod[\"setHumidity\"] = \"setHumidity\";\n    ScryptedInterfaceMethod[\"setFan\"] = \"setFan\";\n    ScryptedInterfaceMethod[\"startRTCSignalingSession\"] = \"startRTCSignalingSession\";\n    ScryptedInterfaceMethod[\"createRTCSignalingSession\"] = \"createRTCSignalingSession\";\n    ScryptedInterfaceMethod[\"getScryptedUserAccessControl\"] = \"getScryptedUserAccessControl\";\n    ScryptedInterfaceMethod[\"generateVideoFrames\"] = \"generateVideoFrames\";\n})(ScryptedInterfaceMethod = exports.ScryptedInterfaceMethod || (exports.ScryptedInterfaceMethod = {}));\nexports.ScryptedInterfaceDescriptors = {\n    ScryptedDevice: {\n        name: 'ScryptedDevice',\n        methods: [\n            'listen',\n            'probe',\n            'setMixins',\n            'setName',\n            'setRoom',\n            'setType'\n        ],\n        properties: [\n            'id',\n            'info',\n            'interfaces',\n            'mixins',\n            'name',\n            'nativeId',\n            'pluginId',\n            'providedInterfaces',\n            'providedName',\n            'providedRoom',\n            'providedType',\n            'providerId',\n            'room',\n            'type'\n        ]\n    },\n    ScryptedPlugin: {\n        name: 'ScryptedPlugin',\n        methods: [\n            'getPluginJson'\n        ],\n        properties: []\n    },\n    OnOff: {\n        name: 'OnOff',\n        methods: [\n            'turnOff',\n            'turnOn'\n        ],\n        properties: [\n            'on'\n        ]\n    },\n    Brightness: {\n        name: 'Brightness',\n        methods: [\n            'setBrightness'\n        ],\n        properties: [\n            'brightness'\n        ]\n    },\n    ColorSettingTemperature: {\n        name: 'ColorSettingTemperature',\n        methods: [\n            'getTemperatureMaxK',\n            'getTemperatureMinK',\n            'setColorTemperature'\n        ],\n        properties: [\n            'colorTemperature'\n        ]\n    },\n    ColorSettingRgb: {\n        name: 'ColorSettingRgb',\n        methods: [\n            'setRgb'\n        ],\n        properties: [\n            'rgb'\n        ]\n    },\n    ColorSettingHsv: {\n        name: 'ColorSettingHsv',\n        methods: [\n            'setHsv'\n        ],\n        properties: [\n            'hsv'\n        ]\n    },\n    Notifier: {\n        name: 'Notifier',\n        methods: [\n            'sendNotification'\n        ],\n        properties: []\n    },\n    StartStop: {\n        name: 'StartStop',\n        methods: [\n            'start',\n            'stop'\n        ],\n        properties: [\n            'running'\n        ]\n    },\n    Pause: {\n        name: 'Pause',\n        methods: [\n            'pause',\n            'resume'\n        ],\n        properties: [\n            'paused'\n        ]\n    },\n    Dock: {\n        name: 'Dock',\n        methods: [\n            'dock'\n        ],\n        properties: [\n            'docked'\n        ]\n    },\n    TemperatureSetting: {\n        name: 'TemperatureSetting',\n        methods: [\n            'setTemperature',\n            'setThermostatMode',\n            'setThermostatSetpoint',\n            'setThermostatSetpointHigh',\n            'setThermostatSetpointLow'\n        ],\n        properties: [\n            'temperatureSetting',\n            'thermostatActiveMode',\n            'thermostatAvailableModes',\n            'thermostatMode',\n            'thermostatSetpoint',\n            'thermostatSetpointHigh',\n            'thermostatSetpointLow'\n        ]\n    },\n    Thermometer: {\n        name: 'Thermometer',\n        methods: [\n            'setTemperatureUnit'\n        ],\n        properties: [\n            'temperature',\n            'temperatureUnit'\n        ]\n    },\n    HumiditySensor: {\n        name: 'HumiditySensor',\n        methods: [],\n        properties: [\n            'humidity'\n        ]\n    },\n    Camera: {\n        name: 'Camera',\n        methods: [\n            'getPictureOptions',\n            'takePicture'\n        ],\n        properties: []\n    },\n    Microphone: {\n        name: 'Microphone',\n        methods: [\n            'getAudioStream'\n        ],\n        properties: []\n    },\n    Display: {\n        name: 'Display',\n        methods: [\n            'startDisplay',\n            'stopDisplay'\n        ],\n        properties: []\n    },\n    VideoCamera: {\n        name: 'VideoCamera',\n        methods: [\n            'getVideoStream',\n            'getVideoStreamOptions'\n        ],\n        properties: []\n    },\n    VideoRecorder: {\n        name: 'VideoRecorder',\n        methods: [\n            'getRecordingStream',\n            'getRecordingStreamCurrentTime',\n            'getRecordingStreamOptions',\n            'getRecordingStreamThumbnail'\n        ],\n        properties: []\n    },\n    PanTiltZoom: {\n        name: 'PanTiltZoom',\n        methods: [\n            'ptzCommand'\n        ],\n        properties: [\n            'ptzCapabilities'\n        ]\n    },\n    EventRecorder: {\n        name: 'EventRecorder',\n        methods: [\n            'getRecordedEvents'\n        ],\n        properties: []\n    },\n    VideoClips: {\n        name: 'VideoClips',\n        methods: [\n            'getVideoClip',\n            'getVideoClipThumbnail',\n            'getVideoClips',\n            'removeVideoClips'\n        ],\n        properties: []\n    },\n    VideoCameraConfiguration: {\n        name: 'VideoCameraConfiguration',\n        methods: [\n            'setVideoStreamOptions'\n        ],\n        properties: []\n    },\n    Intercom: {\n        name: 'Intercom',\n        methods: [\n            'startIntercom',\n            'stopIntercom'\n        ],\n        properties: []\n    },\n    Lock: {\n        name: 'Lock',\n        methods: [\n            'lock',\n            'unlock'\n        ],\n        properties: [\n            'lockState'\n        ]\n    },\n    PasswordStore: {\n        name: 'PasswordStore',\n        methods: [\n            'addPassword',\n            'getPasswords',\n            'removePassword'\n        ],\n        properties: []\n    },\n    Scene: {\n        name: 'Scene',\n        methods: [\n            'activate',\n            'deactivate',\n            'isReversible'\n        ],\n        properties: []\n    },\n    Entry: {\n        name: 'Entry',\n        methods: [\n            'closeEntry',\n            'openEntry'\n        ],\n        properties: []\n    },\n    EntrySensor: {\n        name: 'EntrySensor',\n        methods: [],\n        properties: [\n            'entryOpen'\n        ]\n    },\n    DeviceProvider: {\n        name: 'DeviceProvider',\n        methods: [\n            'getDevice',\n            'releaseDevice'\n        ],\n        properties: []\n    },\n    DeviceDiscovery: {\n        name: 'DeviceDiscovery',\n        methods: [\n            'adoptDevice',\n            'discoverDevices'\n        ],\n        properties: []\n    },\n    DeviceCreator: {\n        name: 'DeviceCreator',\n        methods: [\n            'createDevice',\n            'getCreateDeviceSettings'\n        ],\n        properties: []\n    },\n    Battery: {\n        name: 'Battery',\n        methods: [],\n        properties: [\n            'batteryLevel'\n        ]\n    },\n    Charger: {\n        name: 'Charger',\n        methods: [],\n        properties: [\n            'chargeState'\n        ]\n    },\n    Refresh: {\n        name: 'Refresh',\n        methods: [\n            'getRefreshFrequency',\n            'refresh'\n        ],\n        properties: []\n    },\n    MediaPlayer: {\n        name: 'MediaPlayer',\n        methods: [\n            'getMediaStatus',\n            'load',\n            'seek',\n            'skipNext',\n            'skipPrevious'\n        ],\n        properties: []\n    },\n    Online: {\n        name: 'Online',\n        methods: [],\n        properties: [\n            'online'\n        ]\n    },\n    BufferConverter: {\n        name: 'BufferConverter',\n        methods: [\n            'convert'\n        ],\n        properties: [\n            'fromMimeType',\n            'toMimeType'\n        ]\n    },\n    Settings: {\n        name: 'Settings',\n        methods: [\n            'getSettings',\n            'putSetting'\n        ],\n        properties: []\n    },\n    BinarySensor: {\n        name: 'BinarySensor',\n        methods: [],\n        properties: [\n            'binaryState'\n        ]\n    },\n    TamperSensor: {\n        name: 'TamperSensor',\n        methods: [],\n        properties: [\n            'tampered'\n        ]\n    },\n    PowerSensor: {\n        name: 'PowerSensor',\n        methods: [],\n        properties: [\n            'powerDetected'\n        ]\n    },\n    AudioSensor: {\n        name: 'AudioSensor',\n        methods: [],\n        properties: [\n            'audioDetected'\n        ]\n    },\n    MotionSensor: {\n        name: 'MotionSensor',\n        methods: [],\n        properties: [\n            'motionDetected'\n        ]\n    },\n    AmbientLightSensor: {\n        name: 'AmbientLightSensor',\n        methods: [],\n        properties: [\n            'ambientLight'\n        ]\n    },\n    OccupancySensor: {\n        name: 'OccupancySensor',\n        methods: [],\n        properties: [\n            'occupied'\n        ]\n    },\n    FloodSensor: {\n        name: 'FloodSensor',\n        methods: [],\n        properties: [\n            'flooded'\n        ]\n    },\n    UltravioletSensor: {\n        name: 'UltravioletSensor',\n        methods: [],\n        properties: [\n            'ultraviolet'\n        ]\n    },\n    LuminanceSensor: {\n        name: 'LuminanceSensor',\n        methods: [],\n        properties: [\n            'luminance'\n        ]\n    },\n    PositionSensor: {\n        name: 'PositionSensor',\n        methods: [],\n        properties: [\n            'position'\n        ]\n    },\n    SecuritySystem: {\n        name: 'SecuritySystem',\n        methods: [\n            'armSecuritySystem',\n            'disarmSecuritySystem'\n        ],\n        properties: [\n            'securitySystemState'\n        ]\n    },\n    PM10Sensor: {\n        name: 'PM10Sensor',\n        methods: [],\n        properties: [\n            'pm10Density'\n        ]\n    },\n    PM25Sensor: {\n        name: 'PM25Sensor',\n        methods: [],\n        properties: [\n            'pm25Density'\n        ]\n    },\n    VOCSensor: {\n        name: 'VOCSensor',\n        methods: [],\n        properties: [\n            'vocDensity'\n        ]\n    },\n    NOXSensor: {\n        name: 'NOXSensor',\n        methods: [],\n        properties: [\n            'noxDensity'\n        ]\n    },\n    CO2Sensor: {\n        name: 'CO2Sensor',\n        methods: [],\n        properties: [\n            'co2ppm'\n        ]\n    },\n    AirQualitySensor: {\n        name: 'AirQualitySensor',\n        methods: [],\n        properties: [\n            'airQuality'\n        ]\n    },\n    Readme: {\n        name: 'Readme',\n        methods: [\n            'getReadmeMarkdown'\n        ],\n        properties: []\n    },\n    OauthClient: {\n        name: 'OauthClient',\n        methods: [\n            'getOauthUrl',\n            'onOauthCallback'\n        ],\n        properties: []\n    },\n    MixinProvider: {\n        name: 'MixinProvider',\n        methods: [\n            'canMixin',\n            'getMixin',\n            'releaseMixin'\n        ],\n        properties: []\n    },\n    HttpRequestHandler: {\n        name: 'HttpRequestHandler',\n        methods: [\n            'onRequest'\n        ],\n        properties: []\n    },\n    EngineIOHandler: {\n        name: 'EngineIOHandler',\n        methods: [\n            'onConnection'\n        ],\n        properties: []\n    },\n    PushHandler: {\n        name: 'PushHandler',\n        methods: [\n            'onPush'\n        ],\n        properties: []\n    },\n    Program: {\n        name: 'Program',\n        methods: [\n            'run'\n        ],\n        properties: []\n    },\n    Scriptable: {\n        name: 'Scriptable',\n        methods: [\n            'eval',\n            'loadScripts',\n            'saveScript'\n        ],\n        properties: []\n    },\n    ObjectTracker: {\n        name: 'ObjectTracker',\n        methods: [\n            'trackObjects'\n        ],\n        properties: []\n    },\n    ObjectDetector: {\n        name: 'ObjectDetector',\n        methods: [\n            'getDetectionInput',\n            'getObjectTypes'\n        ],\n        properties: []\n    },\n    ObjectDetection: {\n        name: 'ObjectDetection',\n        methods: [\n            'detectObjects',\n            'generateObjectDetections',\n            'getDetectionModel'\n        ],\n        properties: []\n    },\n    HumiditySetting: {\n        name: 'HumiditySetting',\n        methods: [\n            'setHumidity'\n        ],\n        properties: [\n            'humiditySetting'\n        ]\n    },\n    Fan: {\n        name: 'Fan',\n        methods: [\n            'setFan'\n        ],\n        properties: [\n            'fan'\n        ]\n    },\n    RTCSignalingChannel: {\n        name: 'RTCSignalingChannel',\n        methods: [\n            'startRTCSignalingSession'\n        ],\n        properties: []\n    },\n    RTCSignalingClient: {\n        name: 'RTCSignalingClient',\n        methods: [\n            'createRTCSignalingSession'\n        ],\n        properties: []\n    },\n    LauncherApplication: {\n        name: 'LauncherApplication',\n        methods: [],\n        properties: [\n            'applicationInfo'\n        ]\n    },\n    ScryptedUser: {\n        name: 'ScryptedUser',\n        methods: [\n            'getScryptedUserAccessControl'\n        ],\n        properties: []\n    },\n    VideoFrameGenerator: {\n        name: 'VideoFrameGenerator',\n        methods: [\n            'generateVideoFrames'\n        ],\n        properties: []\n    }\n};\n/**\n * @category Core Reference\n */\nvar ScryptedDeviceType;\n(function (ScryptedDeviceType) {\n    ScryptedDeviceType[\"Builtin\"] = \"Builtin\";\n    ScryptedDeviceType[\"Camera\"] = \"Camera\";\n    ScryptedDeviceType[\"Fan\"] = \"Fan\";\n    ScryptedDeviceType[\"Light\"] = \"Light\";\n    ScryptedDeviceType[\"Switch\"] = \"Switch\";\n    ScryptedDeviceType[\"Outlet\"] = \"Outlet\";\n    ScryptedDeviceType[\"Sensor\"] = \"Sensor\";\n    ScryptedDeviceType[\"Scene\"] = \"Scene\";\n    ScryptedDeviceType[\"Program\"] = \"Program\";\n    ScryptedDeviceType[\"Automation\"] = \"Automation\";\n    ScryptedDeviceType[\"Vacuum\"] = \"Vacuum\";\n    ScryptedDeviceType[\"Notifier\"] = \"Notifier\";\n    ScryptedDeviceType[\"Thermostat\"] = \"Thermostat\";\n    ScryptedDeviceType[\"Lock\"] = \"Lock\";\n    ScryptedDeviceType[\"PasswordControl\"] = \"PasswordControl\";\n    /**\n     * Displays have audio and video output.\n     */\n    ScryptedDeviceType[\"Display\"] = \"Display\";\n    /**\n     * Smart Displays have two way audio and video.\n     */\n    ScryptedDeviceType[\"SmartDisplay\"] = \"SmartDisplay\";\n    ScryptedDeviceType[\"Speaker\"] = \"Speaker\";\n    /**\n     * Smart Speakers have two way audio.\n     */\n    ScryptedDeviceType[\"SmartSpeaker\"] = \"SmartSpeaker\";\n    ScryptedDeviceType[\"Event\"] = \"Event\";\n    ScryptedDeviceType[\"Entry\"] = \"Entry\";\n    ScryptedDeviceType[\"Garage\"] = \"Garage\";\n    ScryptedDeviceType[\"DeviceProvider\"] = \"DeviceProvider\";\n    ScryptedDeviceType[\"DataSource\"] = \"DataSource\";\n    ScryptedDeviceType[\"API\"] = \"API\";\n    ScryptedDeviceType[\"Doorbell\"] = \"Doorbell\";\n    ScryptedDeviceType[\"Irrigation\"] = \"Irrigation\";\n    ScryptedDeviceType[\"Valve\"] = \"Valve\";\n    ScryptedDeviceType[\"Person\"] = \"Person\";\n    ScryptedDeviceType[\"SecuritySystem\"] = \"SecuritySystem\";\n    ScryptedDeviceType[\"WindowCovering\"] = \"WindowCovering\";\n    ScryptedDeviceType[\"Siren\"] = \"Siren\";\n    ScryptedDeviceType[\"Unknown\"] = \"Unknown\";\n})(ScryptedDeviceType = exports.ScryptedDeviceType || (exports.ScryptedDeviceType = {}));\nvar HumidityMode;\n(function (HumidityMode) {\n    HumidityMode[\"Humidify\"] = \"Humidify\";\n    HumidityMode[\"Dehumidify\"] = \"Dehumidify\";\n    HumidityMode[\"Auto\"] = \"Auto\";\n    HumidityMode[\"Off\"] = \"Off\";\n})(HumidityMode = exports.HumidityMode || (exports.HumidityMode = {}));\nvar FanMode;\n(function (FanMode) {\n    FanMode[\"Auto\"] = \"Auto\";\n    FanMode[\"Manual\"] = \"Manual\";\n})(FanMode = exports.FanMode || (exports.FanMode = {}));\nvar TemperatureUnit;\n(function (TemperatureUnit) {\n    TemperatureUnit[\"C\"] = \"C\";\n    TemperatureUnit[\"F\"] = \"F\";\n})(TemperatureUnit = exports.TemperatureUnit || (exports.TemperatureUnit = {}));\nvar ThermostatMode;\n(function (ThermostatMode) {\n    ThermostatMode[\"Off\"] = \"Off\";\n    ThermostatMode[\"Cool\"] = \"Cool\";\n    ThermostatMode[\"Heat\"] = \"Heat\";\n    ThermostatMode[\"HeatCool\"] = \"HeatCool\";\n    ThermostatMode[\"Auto\"] = \"Auto\";\n    ThermostatMode[\"FanOnly\"] = \"FanOnly\";\n    ThermostatMode[\"Purifier\"] = \"Purifier\";\n    ThermostatMode[\"Eco\"] = \"Eco\";\n    ThermostatMode[\"Dry\"] = \"Dry\";\n    ThermostatMode[\"On\"] = \"On\";\n})(ThermostatMode = exports.ThermostatMode || (exports.ThermostatMode = {}));\nvar PanTiltZoomMovement;\n(function (PanTiltZoomMovement) {\n    PanTiltZoomMovement[\"Absolute\"] = \"Absolute\";\n    PanTiltZoomMovement[\"Relative\"] = \"Relative\";\n})(PanTiltZoomMovement = exports.PanTiltZoomMovement || (exports.PanTiltZoomMovement = {}));\nvar LockState;\n(function (LockState) {\n    LockState[\"Locked\"] = \"Locked\";\n    LockState[\"Unlocked\"] = \"Unlocked\";\n    LockState[\"Jammed\"] = \"Jammed\";\n})(LockState = exports.LockState || (exports.LockState = {}));\nvar ChargeState;\n(function (ChargeState) {\n    ChargeState[\"Trickle\"] = \"trickle\";\n    ChargeState[\"Charging\"] = \"charging\";\n    ChargeState[\"NotCharging\"] = \"not-charging\";\n})(ChargeState = exports.ChargeState || (exports.ChargeState = {}));\nvar AirQuality;\n(function (AirQuality) {\n    AirQuality[\"Unknown\"] = \"Unknown\";\n    AirQuality[\"Excellent\"] = \"Excellent\";\n    AirQuality[\"Good\"] = \"Good\";\n    AirQuality[\"Fair\"] = \"Fair\";\n    AirQuality[\"Inferior\"] = \"Inferior\";\n    AirQuality[\"Poor\"] = \"Poor\";\n})(AirQuality = exports.AirQuality || (exports.AirQuality = {}));\nvar SecuritySystemMode;\n(function (SecuritySystemMode) {\n    SecuritySystemMode[\"Disarmed\"] = \"Disarmed\";\n    SecuritySystemMode[\"HomeArmed\"] = \"HomeArmed\";\n    SecuritySystemMode[\"AwayArmed\"] = \"AwayArmed\";\n    SecuritySystemMode[\"NightArmed\"] = \"NightArmed\";\n})(SecuritySystemMode = exports.SecuritySystemMode || (exports.SecuritySystemMode = {}));\nvar SecuritySystemObstruction;\n(function (SecuritySystemObstruction) {\n    SecuritySystemObstruction[\"Sensor\"] = \"Sensor\";\n    SecuritySystemObstruction[\"Occupied\"] = \"Occupied\";\n    SecuritySystemObstruction[\"Time\"] = \"Time\";\n    SecuritySystemObstruction[\"Error\"] = \"Error\";\n})(SecuritySystemObstruction = exports.SecuritySystemObstruction || (exports.SecuritySystemObstruction = {}));\nvar MediaPlayerState;\n(function (MediaPlayerState) {\n    MediaPlayerState[\"Idle\"] = \"Idle\";\n    MediaPlayerState[\"Playing\"] = \"Playing\";\n    MediaPlayerState[\"Paused\"] = \"Paused\";\n    MediaPlayerState[\"Buffering\"] = \"Buffering\";\n})(MediaPlayerState = exports.MediaPlayerState || (exports.MediaPlayerState = {}));\nvar ScryptedInterface;\n(function (ScryptedInterface) {\n    ScryptedInterface[\"ScryptedDevice\"] = \"ScryptedDevice\";\n    ScryptedInterface[\"ScryptedPlugin\"] = \"ScryptedPlugin\";\n    ScryptedInterface[\"OnOff\"] = \"OnOff\";\n    ScryptedInterface[\"Brightness\"] = \"Brightness\";\n    ScryptedInterface[\"ColorSettingTemperature\"] = \"ColorSettingTemperature\";\n    ScryptedInterface[\"ColorSettingRgb\"] = \"ColorSettingRgb\";\n    ScryptedInterface[\"ColorSettingHsv\"] = \"ColorSettingHsv\";\n    ScryptedInterface[\"Notifier\"] = \"Notifier\";\n    ScryptedInterface[\"StartStop\"] = \"StartStop\";\n    ScryptedInterface[\"Pause\"] = \"Pause\";\n    ScryptedInterface[\"Dock\"] = \"Dock\";\n    ScryptedInterface[\"TemperatureSetting\"] = \"TemperatureSetting\";\n    ScryptedInterface[\"Thermometer\"] = \"Thermometer\";\n    ScryptedInterface[\"HumiditySensor\"] = \"HumiditySensor\";\n    ScryptedInterface[\"Camera\"] = \"Camera\";\n    ScryptedInterface[\"Microphone\"] = \"Microphone\";\n    ScryptedInterface[\"Display\"] = \"Display\";\n    ScryptedInterface[\"VideoCamera\"] = \"VideoCamera\";\n    ScryptedInterface[\"VideoRecorder\"] = \"VideoRecorder\";\n    ScryptedInterface[\"PanTiltZoom\"] = \"PanTiltZoom\";\n    ScryptedInterface[\"EventRecorder\"] = \"EventRecorder\";\n    ScryptedInterface[\"VideoClips\"] = \"VideoClips\";\n    ScryptedInterface[\"VideoCameraConfiguration\"] = \"VideoCameraConfiguration\";\n    ScryptedInterface[\"Intercom\"] = \"Intercom\";\n    ScryptedInterface[\"Lock\"] = \"Lock\";\n    ScryptedInterface[\"PasswordStore\"] = \"PasswordStore\";\n    ScryptedInterface[\"Scene\"] = \"Scene\";\n    ScryptedInterface[\"Entry\"] = \"Entry\";\n    ScryptedInterface[\"EntrySensor\"] = \"EntrySensor\";\n    ScryptedInterface[\"DeviceProvider\"] = \"DeviceProvider\";\n    ScryptedInterface[\"DeviceDiscovery\"] = \"DeviceDiscovery\";\n    ScryptedInterface[\"DeviceCreator\"] = \"DeviceCreator\";\n    ScryptedInterface[\"Battery\"] = \"Battery\";\n    ScryptedInterface[\"Charger\"] = \"Charger\";\n    ScryptedInterface[\"Refresh\"] = \"Refresh\";\n    ScryptedInterface[\"MediaPlayer\"] = \"MediaPlayer\";\n    ScryptedInterface[\"Online\"] = \"Online\";\n    ScryptedInterface[\"BufferConverter\"] = \"BufferConverter\";\n    ScryptedInterface[\"Settings\"] = \"Settings\";\n    ScryptedInterface[\"BinarySensor\"] = \"BinarySensor\";\n    ScryptedInterface[\"TamperSensor\"] = \"TamperSensor\";\n    ScryptedInterface[\"PowerSensor\"] = \"PowerSensor\";\n    ScryptedInterface[\"AudioSensor\"] = \"AudioSensor\";\n    ScryptedInterface[\"MotionSensor\"] = \"MotionSensor\";\n    ScryptedInterface[\"AmbientLightSensor\"] = \"AmbientLightSensor\";\n    ScryptedInterface[\"OccupancySensor\"] = \"OccupancySensor\";\n    ScryptedInterface[\"FloodSensor\"] = \"FloodSensor\";\n    ScryptedInterface[\"UltravioletSensor\"] = \"UltravioletSensor\";\n    ScryptedInterface[\"LuminanceSensor\"] = \"LuminanceSensor\";\n    ScryptedInterface[\"PositionSensor\"] = \"PositionSensor\";\n    ScryptedInterface[\"SecuritySystem\"] = \"SecuritySystem\";\n    ScryptedInterface[\"PM10Sensor\"] = \"PM10Sensor\";\n    ScryptedInterface[\"PM25Sensor\"] = \"PM25Sensor\";\n    ScryptedInterface[\"VOCSensor\"] = \"VOCSensor\";\n    ScryptedInterface[\"NOXSensor\"] = \"NOXSensor\";\n    ScryptedInterface[\"CO2Sensor\"] = \"CO2Sensor\";\n    ScryptedInterface[\"AirQualitySensor\"] = \"AirQualitySensor\";\n    ScryptedInterface[\"Readme\"] = \"Readme\";\n    ScryptedInterface[\"OauthClient\"] = \"OauthClient\";\n    ScryptedInterface[\"MixinProvider\"] = \"MixinProvider\";\n    ScryptedInterface[\"HttpRequestHandler\"] = \"HttpRequestHandler\";\n    ScryptedInterface[\"EngineIOHandler\"] = \"EngineIOHandler\";\n    ScryptedInterface[\"PushHandler\"] = \"PushHandler\";\n    ScryptedInterface[\"Program\"] = \"Program\";\n    ScryptedInterface[\"Scriptable\"] = \"Scriptable\";\n    ScryptedInterface[\"ObjectTracker\"] = \"ObjectTracker\";\n    ScryptedInterface[\"ObjectDetector\"] = \"ObjectDetector\";\n    ScryptedInterface[\"ObjectDetection\"] = \"ObjectDetection\";\n    ScryptedInterface[\"HumiditySetting\"] = \"HumiditySetting\";\n    ScryptedInterface[\"Fan\"] = \"Fan\";\n    ScryptedInterface[\"RTCSignalingChannel\"] = \"RTCSignalingChannel\";\n    ScryptedInterface[\"RTCSignalingClient\"] = \"RTCSignalingClient\";\n    ScryptedInterface[\"LauncherApplication\"] = \"LauncherApplication\";\n    ScryptedInterface[\"ScryptedUser\"] = \"ScryptedUser\";\n    ScryptedInterface[\"VideoFrameGenerator\"] = \"VideoFrameGenerator\";\n})(ScryptedInterface = exports.ScryptedInterface || (exports.ScryptedInterface = {}));\nvar ScryptedMimeTypes;\n(function (ScryptedMimeTypes) {\n    ScryptedMimeTypes[\"Url\"] = \"text/x-uri\";\n    ScryptedMimeTypes[\"InsecureLocalUrl\"] = \"text/x-insecure-local-uri\";\n    ScryptedMimeTypes[\"LocalUrl\"] = \"text/x-local-uri\";\n    ScryptedMimeTypes[\"PushEndpoint\"] = \"text/x-push-endpoint\";\n    ScryptedMimeTypes[\"SchemePrefix\"] = \"x-scrypted/x-scrypted-scheme-\";\n    ScryptedMimeTypes[\"MediaStreamUrl\"] = \"text/x-media-url\";\n    ScryptedMimeTypes[\"MediaObject\"] = \"x-scrypted/x-scrypted-media-object\";\n    ScryptedMimeTypes[\"RequestMediaObject\"] = \"x-scrypted/x-scrypted-request-media-object\";\n    ScryptedMimeTypes[\"RequestMediaStream\"] = \"x-scrypted/x-scrypted-request-stream\";\n    ScryptedMimeTypes[\"MediaStreamFeedback\"] = \"x-scrypted/x-media-stream-feedback\";\n    ScryptedMimeTypes[\"FFmpegInput\"] = \"x-scrypted/x-ffmpeg-input\";\n    ScryptedMimeTypes[\"FFmpegTranscodeStream\"] = \"x-scrypted/x-ffmpeg-transcode-stream\";\n    ScryptedMimeTypes[\"RTCSignalingChannel\"] = \"x-scrypted/x-scrypted-rtc-signaling-channel\";\n    ScryptedMimeTypes[\"RTCSignalingSession\"] = \"x-scrypted/x-scrypted-rtc-signaling-session\";\n    ScryptedMimeTypes[\"RTCConnectionManagement\"] = \"x-scrypted/x-scrypted-rtc-connection-management\";\n    ScryptedMimeTypes[\"Image\"] = \"x-scrypted/x-scrypted-image\";\n})(ScryptedMimeTypes = exports.ScryptedMimeTypes || (exports.ScryptedMimeTypes = {}));\n//# sourceMappingURL=index.js.map","module.exports = require(\"buffer\");","module.exports = require(\"child_process\");","module.exports = require(\"crypto\");","module.exports = require(\"fs\");","module.exports = require(\"http\");","module.exports = require(\"https\");","module.exports = require(\"net\");","module.exports = require(\"os\");","module.exports = require(\"path\");","module.exports = require(\"path/posix\");","module.exports = require(\"stream\");","module.exports = require(\"tty\");","module.exports = require(\"url\");","module.exports = require(\"util\");","module.exports = require(\"vm\");","module.exports = require(\"worker_threads\");","module.exports = require(\"zlib\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(6360);\n"],"names":["http","https","zlib","Stream","util","url","net","_interopDefaultLegacy","e","http__default","https__default","zlib__default","Stream__default","globalThis","ReadableStream","Object","assign","Blob","prototype","stream","params","position","blob","this","type","async","ctrl","chunk","slice","Math","min","size","buffer","arrayBuffer","byteLength","enqueue","Uint8Array","close","error","toIterator","parts","clone","part","ArrayBuffer","isView","byteOffset","end","_Blob","constructor","blobParts","options","map","element","TextEncoder","encode","undefined","String","test","decoder","TextDecoder","str","decode","data","offset","set","length","it","next","done","value","start","relativeStart","max","relativeEnd","span","added","subarray","push","toLowerCase","toStringTag","Symbol","static","hasInstance","object","defineProperties","enumerable","Blob$1","File","fileBits","fileName","arguments","TypeError","super","modified","Number","lastModified","isNaN","Date","now","name","t","iterator","i","h","r","random","m","split","f","a","b","c","replace","x","n","FormData","entries","o","some","append","delete","filter","get","l","getAll","forEach","has","d","call","FetchBaseError","Error","message","captureStackTrace","FetchError","systemError","code","errno","erroredSysCall","syscall","NAME","isURLSearchParameters","sort","isBlob","INTERNALS$2","Body","body","boundary","Buffer","from","toString","isBuffer","types","isAnyArrayBuffer","F","B","padStart","p","v","formDataToBlob","Readable","disturbed","on","error_","bodyUsed","consumeBody","ct","headers","startsWith","formData","parameters","URLSearchParams","text","toFormData","Promise","resolve","then","buf","JSON","parse","alloc","accum","accumBytes","destroy","readableEnded","_readableState","ended","every","join","concat","deprecate","json","instance","highWaterMark","p1","p2","getBoundary","PassThrough","pipe","getNonSpecFormDataBoundary","extractContentType","request","validateHeaderName","defineProperty","validateHeaderValue","Headers","init","result","raw","values","isBoxedPrimitive","method","pair","Proxy","target","receiver","Set","keys","Reflect","callback","thisArg","apply","reduce","key","for","property","redirectStatus","isRedirect","INTERNALS$1","Response","status","contentType","statusText","counter","ok","redirected","RangeError","location","URL","response","stripURLForUseAsAReferrer","originOnly","protocol","username","password","hash","pathname","search","ReferrerPolicy","isUrlPotentiallyTrustworthy","hostIp","host","hostIPVersion","isIP","isOriginPotentiallyTrustworthy","INTERNALS","isRequest","Request","input","parsedURL","toUpperCase","inputBody","signal","referrer","parsedReferrer","redirect","follow","compress","agent","insecureHTTPParser","referrerPolicy","format","validateReferrerPolicy","getNodeRequestOptions","contentLengthValue","totalBytes","getLengthSync","hasKnownLength","getTotalBytes","referrerURLCallback","referrerOriginCallback","policy","referrerSource","referrerURL","referrerOrigin","currentURL","origin","determineRequestsReferrer","lastOffset","href","getSearch","path","AbortError","supportedSchemas","exports","fetch","options_","reject","uri","firstComma","indexOf","meta","substring","charset","base64","typeFull","encoding","unescape","dataUriToBuffer","send","abort","emit","aborted","abortAndFinalize","finalize","request_","addEventListener","removeEventListener","errorCallback","LAST_CHUNK","previousChunk","isChunkedTransfer","properLastChunkReceived","socket","onSocketClose","prependListener","removeListener","compare","fixResponseChunkedTransferBadEnding","process","version","s","endedWithEventsCount","_eventsCount","hadError","response_","setTimeout","index","array","fromRawHeaders","rawHeaders","statusCode","locationURL","requestOptions","responseReferrerPolicy","policyTokens","token","parseReferrerPolicyFromHeader","once","pipeline","responseOptions","statusMessage","codings","zlibOptions","flush","Z_SYNC_FLUSH","finishFlush","createGunzip","createBrotliDecompress","createInflate","createInflateRaw","dest","writeToStream","module","worker_threads","DOMException","port","MessageChannel","port1","ab","postMessage","err","S","START_BOUNDARY","HEADER_FIELD_START","HEADER_FIELD","HEADER_VALUE_START","HEADER_VALUE","HEADER_VALUE_ALMOST_DONE","HEADERS_ALMOST_DONE","PART_DATA_START","PART_DATA","END","lower","noop","MultipartParser","flags","onHeaderEnd","onHeaderField","onHeadersEnd","onHeaderValue","onPartBegin","onPartData","onPartEnd","boundaryChars","ui8a","charCodeAt","lookbehind","state","write","length_","previousIndex","boundaryLength","boundaryEnd","bufferLength","cl","mark","clear","callbackSymbol","dataCallback","markSymbol","_lookbehind","match","parser","headerField","headerValue","entryValue","entryName","filename","entryChunks","appendToFile","appendFileToFormData","file","appendEntryToFormData","lastIndexOf","fromCharCode","_fileName","factory","SymbolPolyfill","description","globals","self","window","global","typeIsObject","rethrowAssertionErrorRejection","originalPromise","originalPromiseThen","originalPromiseResolve","bind","originalPromiseReject","newPromise","executor","promiseResolvedWith","promiseRejectedWith","reason","PerformPromiseThen","promise","onFulfilled","onRejected","uponPromise","uponFulfillment","uponRejection","transformPromiseWith","fulfillmentHandler","rejectionHandler","setPromiseIsHandledToTrue","queueMicrotask","globalQueueMicrotask","resolvedPromise","fn","reflectCall","V","args","Function","promiseCall","SimpleQueue","_cursor","_size","_front","_elements","_next","_back","oldBack","newBack","QUEUE_MAX_ARRAY_SIZE","shift","oldFront","newFront","oldCursor","newCursor","elements","node","peek","front","cursor","ReadableStreamReaderGenericInitialize","reader","_ownerReadableStream","_reader","_state","defaultReaderClosedPromiseInitialize","defaultReaderClosedPromiseResolve","defaultReaderClosedPromiseInitializeAsResolved","defaultReaderClosedPromiseInitializeAsRejected","_storedError","ReadableStreamReaderGenericCancel","ReadableStreamCancel","ReadableStreamReaderGenericRelease","defaultReaderClosedPromiseReject","defaultReaderClosedPromiseResetToRejected","readerLockException","_closedPromise","_closedPromise_resolve","_closedPromise_reject","AbortSteps","ErrorSteps","CancelSteps","PullSteps","NumberIsFinite","isFinite","MathTrunc","trunc","ceil","floor","assertDictionary","obj","context","assertFunction","assertObject","isObject","assertRequiredArgument","assertRequiredField","field","convertUnrestrictedDouble","censorNegativeZero","convertUnsignedLongLongWithEnforceRange","upperBound","MAX_SAFE_INTEGER","integerPart","assertReadableStream","IsReadableStream","AcquireReadableStreamDefaultReader","ReadableStreamDefaultReader","ReadableStreamAddReadRequest","readRequest","_readRequests","ReadableStreamFulfillReadRequest","_closeSteps","_chunkSteps","ReadableStreamGetNumReadRequests","ReadableStreamHasDefaultReader","IsReadableStreamDefaultReader","IsReadableStreamLocked","closed","defaultReaderBrandCheckException","cancel","read","resolvePromise","rejectPromise","ReadableStreamDefaultReaderRead","_errorSteps","releaseLock","hasOwnProperty","_disturbed","_readableStreamController","configurable","AsyncIteratorPrototype","getPrototypeOf","ReadableStreamAsyncIteratorImpl","preventCancel","_ongoingPromise","_isFinished","_preventCancel","nextSteps","_nextSteps","return","returnSteps","_returnSteps","ReadableStreamAsyncIteratorPrototype","IsReadableStreamAsyncIterator","_asyncIteratorImpl","streamAsyncIteratorBrandCheckException","_a","setPrototypeOf","NumberIsNaN","CreateArrayFromList","CopyDataBlockBytes","destOffset","src","srcOffset","ArrayBufferSlice","begin","CloneAsUint8Array","O","DequeueValue","container","_queue","_queueTotalSize","EnqueueValueWithSize","Infinity","ResetQueue","ReadableStreamBYOBRequest","view","IsReadableStreamBYOBRequest","byobRequestBrandCheckException","_view","respond","bytesWritten","_associatedReadableByteStreamController","ReadableByteStreamControllerRespond","respondWithNewView","ReadableByteStreamControllerRespondWithNewView","ReadableByteStreamController","byobRequest","IsReadableByteStreamController","byteStreamControllerBrandCheckException","ReadableByteStreamControllerGetBYOBRequest","desiredSize","ReadableByteStreamControllerGetDesiredSize","_closeRequested","_controlledReadableByteStream","ReadableByteStreamControllerClose","ReadableByteStreamControllerEnqueue","ReadableByteStreamControllerError","ReadableByteStreamControllerClearPendingPullIntos","_cancelAlgorithm","ReadableByteStreamControllerClearAlgorithms","entry","ReadableByteStreamControllerHandleQueueDrain","autoAllocateChunkSize","_autoAllocateChunkSize","bufferE","pullIntoDescriptor","bufferByteLength","bytesFilled","elementSize","viewConstructor","readerType","_pendingPullIntos","ReadableByteStreamControllerCallPullIfNeeded","controller","shouldPull","_started","ReadableStreamHasBYOBReader","ReadableStreamGetNumReadIntoRequests","ReadableByteStreamControllerShouldCallPull","_pulling","_pullAgain","_pullAlgorithm","ReadableByteStreamControllerInvalidateBYOBRequest","ReadableByteStreamControllerCommitPullIntoDescriptor","filledView","ReadableByteStreamControllerConvertPullIntoDescriptor","readIntoRequest","_readIntoRequests","ReadableStreamFulfillReadIntoRequest","ReadableByteStreamControllerEnqueueChunkToQueue","ReadableByteStreamControllerFillPullIntoDescriptorFromQueue","currentAlignedBytes","maxBytesToCopy","maxBytesFilled","maxAlignedBytes","totalBytesToCopyRemaining","ready","queue","headOfQueue","bytesToCopy","destStart","ReadableByteStreamControllerFillHeadPullIntoDescriptor","ReadableStreamClose","_byobRequest","ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue","ReadableByteStreamControllerShiftPendingPullInto","ReadableByteStreamControllerRespondInternal","firstDescriptor","ReadableByteStreamControllerRespondInClosedState","remainderSize","remainder","ReadableByteStreamControllerRespondInReadableState","transferredBuffer","firstPendingPullInto","ReadableStreamError","create","SetUpReadableStreamBYOBRequest","_strategyHWM","viewByteLength","SetUpReadableByteStreamController","startAlgorithm","pullAlgorithm","cancelAlgorithm","AcquireReadableStreamBYOBReader","ReadableStreamBYOBReader","ReadableStreamAddReadIntoRequest","IsReadableStreamBYOBReader","byobReaderBrandCheckException","ReadableStreamBYOBReaderRead","DataView","BYTES_PER_ELEMENT","ctor","emptyView","ReadableByteStreamControllerPullInto","ExtractHighWaterMark","strategy","defaultHWM","ExtractSizeAlgorithm","convertQueuingStrategy","convertQueuingStrategySize","convertUnderlyingSinkAbortCallback","original","convertUnderlyingSinkCloseCallback","convertUnderlyingSinkStartCallback","convertUnderlyingSinkWriteCallback","assertWritableStream","IsWritableStream","supportsAbortController","AbortController","WritableStream","rawUnderlyingSink","rawStrategy","underlyingSink","convertUnderlyingSink","InitializeWritableStream","sizeAlgorithm","WritableStreamDefaultController","writeAlgorithm","closeAlgorithm","abortAlgorithm","SetUpWritableStreamDefaultController","SetUpWritableStreamDefaultControllerFromUnderlyingSink","locked","streamBrandCheckException$2","IsWritableStreamLocked","WritableStreamAbort","WritableStreamCloseQueuedOrInFlight","WritableStreamClose","getWriter","AcquireWritableStreamDefaultWriter","WritableStreamDefaultWriter","_writer","_writableStreamController","_writeRequests","_inFlightWriteRequest","_closeRequest","_inFlightCloseRequest","_pendingAbortRequest","_backpressure","_abortReason","_abortController","_promise","wasAlreadyErroring","_resolve","_reject","_reason","_wasAlreadyErroring","WritableStreamStartErroring","closeRequest","writer","defaultWriterReadyPromiseResolve","closeSentinel","WritableStreamDefaultControllerAdvanceQueueIfNeeded","WritableStreamDealWithRejection","WritableStreamFinishErroring","WritableStreamDefaultWriterEnsureReadyPromiseRejected","WritableStreamHasOperationMarkedInFlight","storedError","writeRequest","WritableStreamRejectCloseAndClosedPromiseIfNeeded","abortRequest","defaultWriterClosedPromiseReject","WritableStreamUpdateBackpressure","backpressure","defaultWriterReadyPromiseInitialize","defaultWriterReadyPromiseReset","_ownerWritableStream","defaultWriterReadyPromiseInitializeAsResolved","defaultWriterClosedPromiseInitialize","defaultWriterReadyPromiseInitializeAsRejected","defaultWriterClosedPromiseResolve","defaultWriterClosedPromiseInitializeAsRejected","IsWritableStreamDefaultWriter","defaultWriterBrandCheckException","defaultWriterLockException","WritableStreamDefaultControllerGetDesiredSize","WritableStreamDefaultWriterGetDesiredSize","_readyPromise","WritableStreamDefaultWriterAbort","WritableStreamDefaultWriterClose","WritableStreamDefaultWriterRelease","WritableStreamDefaultWriterWrite","WritableStreamDefaultWriterEnsureClosedPromiseRejected","_closedPromiseState","defaultWriterClosedPromiseResetToRejected","_readyPromiseState","defaultWriterReadyPromiseReject","defaultWriterReadyPromiseResetToRejected","releasedError","chunkSize","_strategySizeAlgorithm","chunkSizeE","WritableStreamDefaultControllerErrorIfNeeded","WritableStreamDefaultControllerGetChunkSize","WritableStreamAddWriteRequest","enqueueE","_controlledWritableStream","WritableStreamDefaultControllerGetBackpressure","WritableStreamDefaultControllerWrite","abortReason","IsWritableStreamDefaultController","defaultControllerBrandCheckException$2","WritableStreamDefaultControllerError","_abortAlgorithm","WritableStreamDefaultControllerClearAlgorithms","createAbortController","_writeAlgorithm","_closeAlgorithm","WritableStreamMarkCloseRequestInFlight","sinkClosePromise","WritableStreamFinishInFlightClose","WritableStreamFinishInFlightCloseWithError","WritableStreamDefaultControllerProcessClose","WritableStreamMarkFirstWriteRequestInFlight","WritableStreamFinishInFlightWrite","WritableStreamFinishInFlightWriteWithError","WritableStreamDefaultControllerProcessWrite","_readyPromise_resolve","_readyPromise_reject","NativeDOMException","DOMException$1","isDOMExceptionConstructor","writable","createDOMExceptionPolyfill","ReadableStreamPipeTo","source","preventClose","preventAbort","shuttingDown","currentWrite","actions","shutdownWithAction","all","action","isOrBecomesErrored","shutdown","WritableStreamDefaultWriterCloseWithErrorPropagation","destClosed","waitForWritesToFinish","oldCurrentWrite","originalIsError","originalError","doTheRest","newError","isError","resolveLoop","rejectLoop","resolveRead","rejectRead","ReadableStreamDefaultController","IsReadableStreamDefaultController","defaultControllerBrandCheckException$1","ReadableStreamDefaultControllerGetDesiredSize","ReadableStreamDefaultControllerCanCloseOrEnqueue","ReadableStreamDefaultControllerClose","ReadableStreamDefaultControllerEnqueue","ReadableStreamDefaultControllerError","ReadableStreamDefaultControllerClearAlgorithms","_controlledReadableStream","ReadableStreamDefaultControllerCallPullIfNeeded","ReadableStreamDefaultControllerShouldCallPull","SetUpReadableStreamDefaultController","ReadableStreamTee","cloneForBranch2","reason1","reason2","branch1","branch2","resolveCancelPromise","reading","readAgainForBranch1","readAgainForBranch2","canceled1","canceled2","cancelPromise","forwardReaderError","thisReader","pullWithDefaultReader","chunk1","chunk2","cloneE","pull1Algorithm","pull2Algorithm","pullWithBYOBReader","forBranch2","byobBranch","otherBranch","byobCanceled","clonedChunk","otherCanceled","cancel1Algorithm","compositeReason","cancelResult","cancel2Algorithm","CreateReadableByteStream","ReadableByteStreamTee","readAgain","CreateReadableStream","ReadableStreamDefaultTee","convertUnderlyingSourceCancelCallback","convertUnderlyingSourcePullCallback","convertUnderlyingSourceStartCallback","convertReadableStreamType","convertReadableStreamReaderMode","mode","convertPipeOptions","isAbortSignal","assertAbortSignal","Boolean","rawUnderlyingSource","underlyingSource","pull","convertUnderlyingDefaultOrByteSource","InitializeReadableStream","underlyingByteSource","SetUpReadableByteStreamControllerFromUnderlyingSource","SetUpReadableStreamDefaultControllerFromUnderlyingSource","streamBrandCheckException$1","getReader","rawOptions","convertReaderOptions","pipeThrough","rawTransform","transform","readable","convertReadableWritablePair","pipeTo","destination","tee","impl","AcquireReadableStreamAsyncIterator","convertIteratorOptions","convertQueuingStrategyInit","asyncIterator","byteLengthSizeFunction","ByteLengthQueuingStrategy","_byteLengthQueuingStrategyHighWaterMark","IsByteLengthQueuingStrategy","byteLengthBrandCheckException","countSizeFunction","CountQueuingStrategy","_countQueuingStrategyHighWaterMark","IsCountQueuingStrategy","countBrandCheckException","convertTransformerFlushCallback","convertTransformerStartCallback","convertTransformerTransformCallback","TransformStream","rawTransformer","rawWritableStrategy","rawReadableStrategy","writableStrategy","readableStrategy","transformer","readableType","writableType","convertTransformer","readableHighWaterMark","readableSizeAlgorithm","writableHighWaterMark","writableSizeAlgorithm","startPromise_resolve","startPromise","_transformStreamController","_backpressureChangePromise","_writable","TransformStreamDefaultControllerPerformTransform","TransformStreamDefaultSinkWriteAlgorithm","TransformStreamError","TransformStreamDefaultSinkAbortAlgorithm","_readable","flushPromise","_flushAlgorithm","TransformStreamDefaultControllerClearAlgorithms","TransformStreamDefaultSinkCloseAlgorithm","TransformStreamSetBackpressure","TransformStreamDefaultSourcePullAlgorithm","TransformStreamErrorWritableAndUnblockWrite","CreateWritableStream","_backpressureChangePromise_resolve","InitializeTransformStream","TransformStreamDefaultController","transformAlgorithm","TransformStreamDefaultControllerEnqueue","transformResultE","flushAlgorithm","_controlledTransformStream","_transformAlgorithm","SetUpTransformStreamDefaultController","SetUpTransformStreamDefaultControllerFromTransformer","IsTransformStream","streamBrandCheckException","IsTransformStreamDefaultController","defaultControllerBrandCheckException","terminate","TransformStreamDefaultControllerTerminate","readableController","ReadableStreamDefaultControllerHasBackpressure","flatten","$flatten","Array","isArray","METHODS","Mime","_types","_extensions","define","getType","getExtension","typeMap","force","extensions","ext","substr","last","hasPath","RegExp","$1","Url","parseurl","req","parsed","_parsedUrl","fresh","fastparse","_raw","query","parsedUrl","originalUrl","_parsedOriginalUrl","pathtoRegexp","strict","sensitive","extraOffset","keysOffset","MATCHING_GROUP_REGEXP","exec","optional","slash","capture","star","len","escapeCount","charAt","splice","debug","Layer","methods","mixin","parseUrl","Route","defer","setImmediate","nextTick","Router","opts","router","res","handle","caseSensitive","mergeParams","stack","matchLayer","layer","param","old","idx","protohost","searchIndex","pathLength","fqdnIndex","getProtohost","removed","slashAdded","sync","paramcalled","parentParams","parentUrl","baseUrl","props","vals","restore","layerError","route","getPathname","has_method","_handles_method","_methods","parent","layerPath","process_params","handle_request","handle_error","trim_prefix","allow","setHeader","sendOptionsResponse","trySendOptionsResponse","generateOptionsResponder","called","paramVal","paramCallbacks","paramCalled","paramIndex","paramCallback","use","handler","arg","callbacks","dispatch","pathRegexp","regexp","fast_star","fast_slash","decode_param","val","decodeURIComponent","URIError","prop","_all","head","load","storage","env","DEBUG","log","console","formatArgs","useColors","namespace","humanize","diff","color","lastC","save","namespaces","removeItem","document","documentElement","style","WebkitAppearance","firebug","exception","table","navigator","userAgent","parseInt","chrome","local","localStorage","localstorage","colors","formatters","j","stringify","enable","prevTime","createDebug","enabled","curr","ms","prev","coerce","unshift","formatter","logFn","abs","selectColor","disable","names","skips","tty","inspectOpts","prefix","toUTCString","isatty","fd","_","k","DEBUG_FD","stdout","stderr","binding","guessHandleType","WriteStream","_type","_handle","unref","fs","SyncWriteStream","autoClose","Socket","_isStdio","createWritableStdioStream","inspect","trim","y","plural","parseFloat","long","round","fmtShort","__proto__","proto","mergeDeviceAccessControls","addAccessControlsForInterface","_1","id","scryptedInterfaces","scryptedInterface","ScryptedInterfaceDescriptors","flat","properties","interfaces","accessControls","dacls","devicesAccessControls","__createBinding","k2","desc","getOwnPropertyDescriptor","__esModule","__exportStar","MixinDeviceBase","ScryptedDeviceBase","index_1","DeviceBase","nativeId","_storage","deviceManager","getDeviceStorage","_log","getDeviceLogger","_console","getDeviceConsole","mimeType","mediaManager","createMediaObject","sourceId","getMediaObjectConsole","mediaObject","getMixinConsole","_lazyLoadDeviceState","_deviceState","getDeviceState","onDeviceEvent","eventInterface","eventData","_listeners","systemManager","getDeviceById","mixinDevice","mixinDeviceInterfaces","mixinStorageSuffix","mixinDeviceState","__rpcproxy_traps_all_properties","createDeviceState","setState","mixinProviderNativeId","mixinStorageKey","getMixinStorage","onMixinEvent","manageListener","listener","add","release","_createGetState","_createSetState","warn","ScryptedInterfaceProperty","sdk","runtimeAPI","pluginRuntimeAPI","endpointManager","pluginHostAPI","setScryptedInterfaceDescriptors","TYPES_VERSION","catch","__setModuleDefault","__importStar","mod","StorageSettings","default","device","settings","hasValue","setting","rawGet","getItem","putSetting","ret","onGet","hide","getItemInternal","onPut","mapPut","mapGet","oldValue","putSettingInternal","noStore","setItem","ScryptedInterface","Settings","rawDevice","readDefaultValue","multiple","parseValue","persistedDefaultValue","defaultValue","ScryptedMimeTypes","MediaPlayerState","SecuritySystemObstruction","SecuritySystemMode","AirQuality","ChargeState","LockState","PanTiltZoomMovement","ThermostatMode","TemperatureUnit","FanMode","HumidityMode","ScryptedDeviceType","ScryptedInterfaceMethod","ScryptedDevice","ScryptedPlugin","OnOff","Brightness","ColorSettingTemperature","ColorSettingRgb","ColorSettingHsv","Notifier","StartStop","Pause","Dock","TemperatureSetting","Thermometer","HumiditySensor","Camera","Microphone","Display","VideoCamera","VideoRecorder","PanTiltZoom","EventRecorder","VideoClips","VideoCameraConfiguration","Intercom","Lock","PasswordStore","Scene","Entry","EntrySensor","DeviceProvider","DeviceDiscovery","DeviceCreator","Battery","Charger","Refresh","MediaPlayer","Online","BufferConverter","BinarySensor","TamperSensor","PowerSensor","AudioSensor","MotionSensor","AmbientLightSensor","OccupancySensor","FloodSensor","UltravioletSensor","LuminanceSensor","PositionSensor","SecuritySystem","PM10Sensor","PM25Sensor","VOCSensor","NOXSensor","CO2Sensor","AirQualitySensor","Readme","OauthClient","MixinProvider","HttpRequestHandler","EngineIOHandler","PushHandler","Program","Scriptable","ObjectTracker","ObjectDetector","ObjectDetection","HumiditySetting","Fan","RTCSignalingChannel","RTCSignalingClient","LauncherApplication","ScryptedUser","VideoFrameGenerator","getTypeDefs","scryptedTypesDefs","readFileSync","scryptedIndexDefs","ts","ScriptTarget","compilerOptions","ESNext","ModuleKind","CommonJS","transpileModule","outputText","script","extraLibs","libs","allScripts","compiled","worker","fork","tsCompile","smProxy","SystemManagerImpl","getSystemState","apiProxy","PluginAPIProxy","api","allParams","require","asyncWrappedCompiled","asyncFunction","compileFunction","functionGenerator","defaultExport","safeLibs","bufferTypeDefs","monaco","languages","typescript","typescriptDefaults","setDiagnosticsOptions","getDiagnosticsOptions","diagnosticCodesToIgnore","setCompilerOptions","getCompilerOptions","moduleResolution","ModuleResolutionKind","NodeJs","catLibs","catlibsNoExport","lib","addExtraLib","methodInterfaces","Map","baseInterfaces","scriptHandler","allInterfaces","handleTypes","mergeHandler","getOwnPropertyNames","iface","AggregateCoreNativeId","AggregateCore","aggregate","getNativeIds","createAggregateDevice","reportAggregate","computeInterfaces","providedName","listen","eventSource","eventDetails","includes","find","title","providerNativeId","Unknown","onDeviceDiscovered","aggregators","average","cur","allFalse","allTrue","createVideoCamera","devices","createVideoStreamOptions","getVideoStreamOptions","video","audio","getVideoStream","ffmpegInput","inputs","allSettled","mo","convertMediaObjectToBuffer","FFmpegInput","dim","w","mediaStreamOptions","inputArguments","h264FilterArguments","curx","cury","getVideoStreamWrapped","createFFmpegMediaObject","Unlocked","Locked","AggregateDeviceImpl","listeners","storageSettings","deviceInterfaces","deviceFilter","getSettings","makeListener","aggregator","ds","register","event","watch","details","runAggregator","deviceInterface","ids","descriptor","camera","Automation","registers","pendings","variables","scryptedEval","pending","runActions","pendingKey","staticEvents","runToCompletion","info","AutomationJavascript","run","model","AutomationShellScript","seconds","plugins","getComponent","updatePlugins","rpc","trigger","triggers","Scheduler","denoise","denoiseEvents","condition","eval","AutomationCoreNativeId","AutomationCore","automations","automation","reportAutomation","updatePluginsNativeId","updatePluginsData","randomBytes","schedule","days","sunday","monday","tuesday","wednesday","thursday","friday","saturday","date","setHours","hour","setMinutes","minute","reschedule","future","getTime","day","getDay","toLocaleString","when","delay","timeout","eventId","eventTime","clearTimeout","cp","spawn","EVENT_DATA","stdin","uuidv4","BufferHost","secure","hosted","fromMimeType","toMimeType","LocalUrl","InsecureLocalUrl","normalizedRequest","rootPath","pathOnly","uuid","endpoint","getPublicLocalEndpoint","getInsecurePublicLocalEndpoint","extension","RequestMediaObjectHost","secureHosted","insecureHosted","RequestMediaObject","MediaObject","FileHost","SchemePrefix","sendFile","createHash","update","digest","extname","LauncherMixin","Builtin","API","applicationInfo","icon","typeToIcon","indexHtml","getAddresses","networkInterfaces","addr","address","ScryptedCore","publicRouter","localAddresses","combobox","choices","newValue","setLocalAddresses","mediaCore","MediaCore","ScriptCoreNativeId","scriptCore","ScriptCore","automationCore","aggregateCore","UsersNativeId","users","UsersCore","service","getLocalAddresses","checkEngineIoEndpoint","check","ws","aclId","deviceId","pluginId","getDeviceInfo","getRemoteServicePort","connect","resume","onclose","onmessage","checkService","handlePublicFinal","incomingPathname","getPublicCloudEndpoint","u","rewritten","isPublicEndpoint","onDevicesChanged","httpHost","httpsHost","rmoHost","fileHost","filesHost","picture","takePicture","width","height","getAuthenticatedPath","hostname","getLocalSnapshot","rmo","monacoEvalDefaults","createMonacoEvalDefaults","scripts","Script","providedInterfaces","reportScript","readdirSync","statSync","isFile","basename","template","saveScript","line","getDevice","language","deviceInstance","prepareScript","removeListeners","createScriptDevice","postRunScript","User","defaultAccess","usersService","user","getAllUsers","admin","getDeviceByName","readonly","Person","addUser","syncUsers","removeUser","Doorbell","Light","Switch","Outlet","Sensor","Event","Vacuum","Thermostat","PasswordControl","Speaker","Garage","DataSource","Valve","Irrigation","Siren","hasFixedPhysicalLocation","alert","alerts","$scrypted","removeAlert","$store","commit","_id","inference","addInference","existingType","providedType","subset","checkSubset","interfaceFriendlyNames","EventListenerRegisterImpl","getMixinEventName","mixinId","allowedEventInterfaces","systemListeners","events","listenDevice","notify","changed","notifyEventDetails","allEvents","getPropertyInterfaces","descriptors","propertyInterfaces","getInterfaceMethods","getInterfaceProperties","allInterfaceProperties","EventListenerRegisterProxy","__proxy_oneway_methods","PluginAPIManagedListeners","typesVersion","acl","deny","deviceManifest","onDeviceRemoved","setStorage","shouldRejectDevice","setDeviceProperty","removeDevice","shouldRejectEvent","getLogger","requestRestart","DeviceProxyHandler","toPrimitive","ownKeys","deleteProperty","customProperties","handled","RpcPeer","handleFunctionInvocations","isValidInterfaceMethod","ensureDevice","argArray","room","mixins","setMixins","makeOneWayCallback","oneways","PROPERTY_PROXY_ONEWAY_METHODS","deviceProxies","EventRegistry","proxy","newDeviceProxy","startPeriodicGarbageCollection","g","gc","lastCollection","setInterval","sinceLastCollection","remotesCreated","remotesCollected","RpcProxy","peer","constructorName","proxyProps","proxyOneWayMethods","selfName","peerName","iteratorMethods","asyncIteratorMethod","PROPERTY_PROXY_ID","PROPERTY_PROXY_PROPERTIES","PROPERTY_JSON_DISABLE_SERIALIZATION","PROPERTY_JSON_COPY_SERIALIZE_CHILDREN","finalizerIdSymbol","finalizerId","oneway","isFrozen","pendingResults","RPCResultError","serializationContext","serialize","rpcApply","proxyId","pendingResult","createPendingResult","cause","fr","FinalizationRegistry","WeakRef","deref","jsonSerializable","thiz","throw","idCounter","proxyCounter","localProxied","localProxyMap","remoteWeakProxies","finalizers","nameDeserializerMap","onProxyTypeSerialization","constructorSerializerMap","transportSafeArgumentTypes","getDefaultTransportSafeArgumentTypes","tags","killed","killedDeferred","isTransportSafe","cb","kill","freeze","addSerializer","ctr","serializer","rpcFinalize","__local_proxy_id","__local_proxy_finalizer_id","paramMessage","evalLocal","coercedParams","compile","createErrorResult","serializeError","deserialize","deserializationContext","__remote_proxy_id","__remote_proxy_finalizer_id","__remote_constructor_name","__serialized_value","__remote_proxy_props","__remote_proxy_oneway_methods","RPC_RESULT_ERROR_NAME","deserializeError","newProxy","deserializer","__proxy_constructor","serializerMapName","serialized","prepareProxyProperties","proxiedEntry","__proxy_id","__proxy_peer","onProxySerialization","proxyConstructorName","localProxiedEntry","weakref","handleMessage","activeRpcPeer","handleMessageInternal","rpcParam","getIteratorNext","rpcResult","deferred","deserialized","getEvalSource","PROBED_PROPERTIES","realfs","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","loaded","__webpack_modules__","definition","nmd","paths","children","__webpack_exports__"],"sourceRoot":""}