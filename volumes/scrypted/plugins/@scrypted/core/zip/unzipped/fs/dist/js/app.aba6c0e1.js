(function(e){function t(t){for(var i,s,o=t[0],c=t[1],l=t[2],d=0,p=[];d<o.length;d++)s=o[d],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&p.push(r[s][0]),r[s]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);u&&u(t);while(p.length)p.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],i=!0,s=1;s<n.length;s++){var c=n[s];0!==r[c]&&(i=!1)}i&&(a.splice(t--,1),e=o(o.s=n[0]))}return e}var i={},r={app:0},a=[];function s(e){return o.p+"js/"+({}[e]||e)+"."+{"chunk-0b65ffb6":"f41cd050","chunk-2d0a3196":"60c58826","chunk-2d0a3577":"c1b5e70f","chunk-2d0a40c8":"d8026b00","chunk-2d0a43df":"ab736537","chunk-2d0a4bbf":"047a93da","chunk-2d0aa90c":"19818a1e","chunk-2d0aab07":"bb7ef2b5","chunk-2d0abc00":"ac8a5c26","chunk-2d0ae937":"25e52380","chunk-2d0aeb45":"f58c100d","chunk-2d0af08c":"bd3d248f","chunk-2d0afa49":"ce2bdd65","chunk-2d0b1fd5":"a39bb3bf","chunk-2d0b21d7":"c1f6e591","chunk-2d0b2762":"0ff1a975","chunk-2d0b6187":"d24e3905","chunk-2d0ba136":"5fd56d48","chunk-2d0bb267":"77e693cf","chunk-2d0bcec1":"4fe52bf4","chunk-2d0bdf38":"827087d0","chunk-2d0bff92":"c91179fb","chunk-2d0c0494":"8fef595c","chunk-2d0c0a09":"4b4d325b","chunk-2d0c4313":"ae8defcb","chunk-2d0c46d1":"b2407698","chunk-2d0c4a95":"8ccb2cb6","chunk-2d0c512b":"9d76f854","chunk-2d0c86e3":"6631565c","chunk-2d0c8f4c":"7714e40d","chunk-2d0cf16e":"5d53717b","chunk-2d0d056d":"fc7e0644","chunk-2d0d0645":"be9ad33c","chunk-2d0d61fd":"23535d44","chunk-2d0d7e63":"437c83d0","chunk-2d0dda4e":"693c4fea","chunk-2d0de971":"96df7a76","chunk-2d0e1b57":"0b074091","chunk-2d0e1fbe":"5cd9360c","chunk-2d0e22d6":"d50dbacf","chunk-2d0e4fe5":"5222f603","chunk-2d0e542a":"9d5520fe","chunk-2d0e57ec":"76defb7a","chunk-2d0e5b34":"3d80c77d","chunk-2d0e6553":"e63efc5b","chunk-2d0e6c86":"04ca78cc","chunk-2d0ea098":"517b6894","chunk-2d0f0a11":"394918ad","chunk-2d208ac5":"38ab1b75","chunk-2d209408":"dcf3e796","chunk-2d20f745":"b9346d33","chunk-2d20ff23":"0a32951c","chunk-2d2138c7":"f67541ef","chunk-2d216f3b":"646421ca","chunk-2d217e5b":"d7277d77","chunk-2d21ab79":"e55ce5be","chunk-2d21b84a":"023b6594","chunk-2d21dcd2":"62ea1944","chunk-2d21f327":"fb178513","chunk-2d2214b3":"c76d3b1e","chunk-2d221799":"37f3803e","chunk-2d221814":"ec689564","chunk-2d221a34":"9e9bdca7","chunk-2d22502a":"d26a05f4","chunk-2d226775":"78870e4c","chunk-2d229411":"6884603b","chunk-2d2295e9":"6826d516","chunk-2d22c171":"d09ba544","chunk-2d22c2b8":"d3921267","chunk-2d22ca58":"7c0faf32","chunk-2d2311f7":"23948822","chunk-2d237ee7":"85ee0d5c","chunk-2d238465":"1b34f26e","chunk-30597b4a":"03df21d5","chunk-7498b54e":"777c03ab","chunk-7532b3ea":"ec803065","chunk-e13e4362":"661d1c43"}[e]+".js"}function o(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var i=new Promise((function(t,i){n=r[e]=[t,i]}));t.push(n[2]=i);var a,c=document.createElement("script");c.charset="utf-8",c.timeout=120,o.nc&&c.setAttribute("nonce",o.nc),c.src=s(e),0!==c.src.indexOf(window.location.origin+"/")&&(c.crossOrigin="anonymous");var l=new Error;a=function(t){c.onerror=c.onload=null,clearTimeout(d);var n=r[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+i+": "+a+")",l.name="ChunkLoadError",l.type=i,l.request=a,n[1](l)}r[e]=void 0}};var d=setTimeout((function(){a({type:"timeout",target:c})}),12e4);c.onerror=c.onload=a,document.head.appendChild(c)}return Promise.all(t)},o.m=e,o.c=i,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/endpoint/@scrypted/core/public/",o.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var d=0;d<c.length;d++)t(c[d]);var u=l;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"02dd":function(e,t,n){"use strict";t["a"]='/// <reference types="node" />\n/// <reference types="node" />\n/// <reference types="node" />\nexport declare const TYPES_VERSION = "0.2.79";\nexport interface DeviceState {\n    id?: string;\n    info?: DeviceInformation;\n    interfaces?: string[];\n    mixins?: string[];\n    name?: string;\n    nativeId?: string;\n    pluginId?: string;\n    providedInterfaces?: string[];\n    providedName?: ScryptedDeviceType;\n    providedRoom?: string;\n    providedType?: ScryptedDeviceType;\n    providerId?: string;\n    room?: string;\n    type?: ScryptedDeviceType;\n    on?: boolean;\n    brightness?: number;\n    colorTemperature?: number;\n    rgb?: ColorRgb;\n    hsv?: ColorHsv;\n    running?: boolean;\n    paused?: boolean;\n    docked?: boolean;\n    temperatureSetting?: TemperatureSettingStatus;\n    thermostatActiveMode?: ThermostatMode;\n    thermostatAvailableModes?: ThermostatMode[];\n    thermostatMode?: ThermostatMode;\n    thermostatSetpoint?: number;\n    thermostatSetpointHigh?: number;\n    thermostatSetpointLow?: number;\n    temperature?: number;\n    temperatureUnit?: TemperatureUnit;\n    humidity?: number;\n    ptzCapabilities?: PanTiltZoomCapabilities;\n    lockState?: LockState;\n    entryOpen?: boolean | \'jammed\';\n    batteryLevel?: number;\n    chargeState?: ChargeState;\n    online?: boolean;\n    fromMimeType?: string;\n    toMimeType?: string;\n    binaryState?: boolean;\n    tampered?: TamperState;\n    powerDetected?: boolean;\n    audioDetected?: boolean;\n    motionDetected?: boolean;\n    ambientLight?: number;\n    occupied?: boolean;\n    flooded?: boolean;\n    ultraviolet?: number;\n    luminance?: number;\n    position?: Position;\n    securitySystemState?: SecuritySystemState;\n    pm10Density?: number;\n    pm25Density?: number;\n    vocDensity?: number;\n    noxDensity?: number;\n    co2ppm?: number;\n    airQuality?: AirQuality;\n    humiditySetting?: HumiditySettingStatus;\n    fan?: FanStatus;\n    applicationInfo?: LauncherApplicationInfo;\n}\nexport declare class DeviceBase implements DeviceState {\n    id?: string;\n    info?: DeviceInformation;\n    interfaces?: string[];\n    mixins?: string[];\n    name?: string;\n    nativeId?: string;\n    pluginId?: string;\n    providedInterfaces?: string[];\n    providedName?: ScryptedDeviceType;\n    providedRoom?: string;\n    providedType?: ScryptedDeviceType;\n    providerId?: string;\n    room?: string;\n    type?: ScryptedDeviceType;\n    on?: boolean;\n    brightness?: number;\n    colorTemperature?: number;\n    rgb?: ColorRgb;\n    hsv?: ColorHsv;\n    running?: boolean;\n    paused?: boolean;\n    docked?: boolean;\n    temperatureSetting?: TemperatureSettingStatus;\n    thermostatActiveMode?: ThermostatMode;\n    thermostatAvailableModes?: ThermostatMode[];\n    thermostatMode?: ThermostatMode;\n    thermostatSetpoint?: number;\n    thermostatSetpointHigh?: number;\n    thermostatSetpointLow?: number;\n    temperature?: number;\n    temperatureUnit?: TemperatureUnit;\n    humidity?: number;\n    ptzCapabilities?: PanTiltZoomCapabilities;\n    lockState?: LockState;\n    entryOpen?: boolean | \'jammed\';\n    batteryLevel?: number;\n    chargeState?: ChargeState;\n    online?: boolean;\n    fromMimeType?: string;\n    toMimeType?: string;\n    binaryState?: boolean;\n    tampered?: TamperState;\n    powerDetected?: boolean;\n    audioDetected?: boolean;\n    motionDetected?: boolean;\n    ambientLight?: number;\n    occupied?: boolean;\n    flooded?: boolean;\n    ultraviolet?: number;\n    luminance?: number;\n    position?: Position;\n    securitySystemState?: SecuritySystemState;\n    pm10Density?: number;\n    pm25Density?: number;\n    vocDensity?: number;\n    noxDensity?: number;\n    co2ppm?: number;\n    airQuality?: AirQuality;\n    humiditySetting?: HumiditySettingStatus;\n    fan?: FanStatus;\n    applicationInfo?: LauncherApplicationInfo;\n}\nexport declare enum ScryptedInterfaceProperty {\n    id = "id",\n    info = "info",\n    interfaces = "interfaces",\n    mixins = "mixins",\n    name = "name",\n    nativeId = "nativeId",\n    pluginId = "pluginId",\n    providedInterfaces = "providedInterfaces",\n    providedName = "providedName",\n    providedRoom = "providedRoom",\n    providedType = "providedType",\n    providerId = "providerId",\n    room = "room",\n    type = "type",\n    on = "on",\n    brightness = "brightness",\n    colorTemperature = "colorTemperature",\n    rgb = "rgb",\n    hsv = "hsv",\n    running = "running",\n    paused = "paused",\n    docked = "docked",\n    temperatureSetting = "temperatureSetting",\n    thermostatActiveMode = "thermostatActiveMode",\n    thermostatAvailableModes = "thermostatAvailableModes",\n    thermostatMode = "thermostatMode",\n    thermostatSetpoint = "thermostatSetpoint",\n    thermostatSetpointHigh = "thermostatSetpointHigh",\n    thermostatSetpointLow = "thermostatSetpointLow",\n    temperature = "temperature",\n    temperatureUnit = "temperatureUnit",\n    humidity = "humidity",\n    ptzCapabilities = "ptzCapabilities",\n    lockState = "lockState",\n    entryOpen = "entryOpen",\n    batteryLevel = "batteryLevel",\n    chargeState = "chargeState",\n    online = "online",\n    fromMimeType = "fromMimeType",\n    toMimeType = "toMimeType",\n    binaryState = "binaryState",\n    tampered = "tampered",\n    powerDetected = "powerDetected",\n    audioDetected = "audioDetected",\n    motionDetected = "motionDetected",\n    ambientLight = "ambientLight",\n    occupied = "occupied",\n    flooded = "flooded",\n    ultraviolet = "ultraviolet",\n    luminance = "luminance",\n    position = "position",\n    securitySystemState = "securitySystemState",\n    pm10Density = "pm10Density",\n    pm25Density = "pm25Density",\n    vocDensity = "vocDensity",\n    noxDensity = "noxDensity",\n    co2ppm = "co2ppm",\n    airQuality = "airQuality",\n    humiditySetting = "humiditySetting",\n    fan = "fan",\n    applicationInfo = "applicationInfo"\n}\nexport declare enum ScryptedInterfaceMethod {\n    listen = "listen",\n    probe = "probe",\n    setMixins = "setMixins",\n    setName = "setName",\n    setRoom = "setRoom",\n    setType = "setType",\n    getPluginJson = "getPluginJson",\n    turnOff = "turnOff",\n    turnOn = "turnOn",\n    setBrightness = "setBrightness",\n    getTemperatureMaxK = "getTemperatureMaxK",\n    getTemperatureMinK = "getTemperatureMinK",\n    setColorTemperature = "setColorTemperature",\n    setRgb = "setRgb",\n    setHsv = "setHsv",\n    sendNotification = "sendNotification",\n    start = "start",\n    stop = "stop",\n    pause = "pause",\n    resume = "resume",\n    dock = "dock",\n    setTemperature = "setTemperature",\n    setThermostatMode = "setThermostatMode",\n    setThermostatSetpoint = "setThermostatSetpoint",\n    setThermostatSetpointHigh = "setThermostatSetpointHigh",\n    setThermostatSetpointLow = "setThermostatSetpointLow",\n    setTemperatureUnit = "setTemperatureUnit",\n    getPictureOptions = "getPictureOptions",\n    takePicture = "takePicture",\n    getAudioStream = "getAudioStream",\n    startDisplay = "startDisplay",\n    stopDisplay = "stopDisplay",\n    getVideoStream = "getVideoStream",\n    getVideoStreamOptions = "getVideoStreamOptions",\n    getRecordingStream = "getRecordingStream",\n    getRecordingStreamCurrentTime = "getRecordingStreamCurrentTime",\n    getRecordingStreamOptions = "getRecordingStreamOptions",\n    getRecordingStreamThumbnail = "getRecordingStreamThumbnail",\n    ptzCommand = "ptzCommand",\n    getRecordedEvents = "getRecordedEvents",\n    getVideoClip = "getVideoClip",\n    getVideoClipThumbnail = "getVideoClipThumbnail",\n    getVideoClips = "getVideoClips",\n    removeVideoClips = "removeVideoClips",\n    setVideoStreamOptions = "setVideoStreamOptions",\n    startIntercom = "startIntercom",\n    stopIntercom = "stopIntercom",\n    lock = "lock",\n    unlock = "unlock",\n    addPassword = "addPassword",\n    getPasswords = "getPasswords",\n    removePassword = "removePassword",\n    activate = "activate",\n    deactivate = "deactivate",\n    isReversible = "isReversible",\n    closeEntry = "closeEntry",\n    openEntry = "openEntry",\n    getDevice = "getDevice",\n    releaseDevice = "releaseDevice",\n    adoptDevice = "adoptDevice",\n    discoverDevices = "discoverDevices",\n    createDevice = "createDevice",\n    getCreateDeviceSettings = "getCreateDeviceSettings",\n    getRefreshFrequency = "getRefreshFrequency",\n    refresh = "refresh",\n    getMediaStatus = "getMediaStatus",\n    load = "load",\n    seek = "seek",\n    skipNext = "skipNext",\n    skipPrevious = "skipPrevious",\n    convert = "convert",\n    getSettings = "getSettings",\n    putSetting = "putSetting",\n    armSecuritySystem = "armSecuritySystem",\n    disarmSecuritySystem = "disarmSecuritySystem",\n    getReadmeMarkdown = "getReadmeMarkdown",\n    getOauthUrl = "getOauthUrl",\n    onOauthCallback = "onOauthCallback",\n    canMixin = "canMixin",\n    getMixin = "getMixin",\n    releaseMixin = "releaseMixin",\n    onRequest = "onRequest",\n    onConnection = "onConnection",\n    onPush = "onPush",\n    run = "run",\n    eval = "eval",\n    loadScripts = "loadScripts",\n    saveScript = "saveScript",\n    trackObjects = "trackObjects",\n    getDetectionInput = "getDetectionInput",\n    getObjectTypes = "getObjectTypes",\n    detectObjects = "detectObjects",\n    generateObjectDetections = "generateObjectDetections",\n    getDetectionModel = "getDetectionModel",\n    setHumidity = "setHumidity",\n    setFan = "setFan",\n    startRTCSignalingSession = "startRTCSignalingSession",\n    createRTCSignalingSession = "createRTCSignalingSession",\n    getScryptedUserAccessControl = "getScryptedUserAccessControl",\n    generateVideoFrames = "generateVideoFrames"\n}\nexport declare const ScryptedInterfaceDescriptors: {\n    [scryptedInterface: string]: ScryptedInterfaceDescriptor;\n};\nimport type { Worker as NodeWorker } from \'worker_threads\';\nimport type { Socket as NodeNetSocket } from \'net\';\nexport type ScryptedNativeId = string | undefined;\n/**\n * All devices in Scrypted implement ScryptedDevice, which contains the id, name, and type. Add listeners to subscribe to events from that device.\n *\n * @category Core Reference\n */\nexport interface ScryptedDevice {\n    /**\n     * Subscribe to events from a specific interface on a device, such as \'OnOff\' or \'Brightness\'.\n     */\n    listen(event: ScryptedInterface | string | EventListenerOptions, callback: EventListener): EventListenerRegister;\n    setName(name: string): Promise<void>;\n    setRoom(room: string): Promise<void>;\n    setType(type: ScryptedDeviceType): Promise<void>;\n    setMixins(mixins: string[]): Promise<void>;\n    /**\n     * Probes the device, ensuring creation of it and any mixins.\n     */\n    probe(): Promise<boolean>;\n    id?: string;\n    nativeId?: ScryptedNativeId;\n    pluginId?: string;\n    interfaces?: string[];\n    mixins?: string[];\n    name?: string;\n    info?: DeviceInformation;\n    providedInterfaces?: string[];\n    providedName?: ScryptedDeviceType;\n    providedRoom?: string;\n    providedType?: ScryptedDeviceType;\n    providerId?: string;\n    room?: string;\n    type?: ScryptedDeviceType;\n}\nexport interface ScryptedPlugin {\n    getPluginJson(): Promise<any>;\n}\nexport interface EventListenerOptions {\n    /**\n     * This EventListener will denoise events, and will not be called unless the state changes.\n     */\n    denoise?: boolean;\n    /**\n     * The EventListener will subscribe to this event interface.\n     */\n    event?: ScryptedInterface | string;\n    /**\n     * This EventListener will passively watch for events, and not initiate polling.\n     */\n    watch?: boolean;\n    /**\n     * The EventListener will listen to events and property changes from a device or mixin that is suppressed by a mixin.\n     */\n    mixinId?: string;\n}\n/**\n * @category Core Reference\n */\nexport type EventListener = (eventSource: ScryptedDevice | undefined, eventDetails: EventDetails, eventData: any) => void;\nexport interface EventDetails {\n    eventId: string;\n    eventInterface?: string;\n    eventTime: number;\n    property?: string;\n    mixinId?: string;\n}\n/**\n * Returned when an event listener is attached to an EventEmitter. Call removeListener to unregister from events.\n *\n * @category Core Reference\n*/\nexport interface EventListenerRegister {\n    removeListener(): void;\n}\n/**\n * @category Core Reference\n */\nexport declare enum ScryptedDeviceType {\n    Builtin = "Builtin",\n    Camera = "Camera",\n    Fan = "Fan",\n    Light = "Light",\n    Switch = "Switch",\n    Outlet = "Outlet",\n    Sensor = "Sensor",\n    Scene = "Scene",\n    Program = "Program",\n    Automation = "Automation",\n    Vacuum = "Vacuum",\n    Notifier = "Notifier",\n    Thermostat = "Thermostat",\n    Lock = "Lock",\n    PasswordControl = "PasswordControl",\n    /**\n     * Displays have audio and video output.\n     */\n    Display = "Display",\n    /**\n     * Smart Displays have two way audio and video.\n     */\n    SmartDisplay = "SmartDisplay",\n    Speaker = "Speaker",\n    /**\n     * Smart Speakers have two way audio.\n     */\n    SmartSpeaker = "SmartSpeaker",\n    Event = "Event",\n    Entry = "Entry",\n    Garage = "Garage",\n    DeviceProvider = "DeviceProvider",\n    DataSource = "DataSource",\n    API = "API",\n    Doorbell = "Doorbell",\n    Irrigation = "Irrigation",\n    Valve = "Valve",\n    Person = "Person",\n    SecuritySystem = "SecuritySystem",\n    WindowCovering = "WindowCovering",\n    Siren = "Siren",\n    Unknown = "Unknown"\n}\n/**\n * OnOff is a basic binary switch.\n */\nexport interface OnOff {\n    turnOff(): Promise<void>;\n    turnOn(): Promise<void>;\n    on?: boolean;\n}\n/**\n * Brightness is a lighting device that can be dimmed/lit between 0 to 100.\n */\nexport interface Brightness {\n    setBrightness(brightness: number): Promise<void>;\n    brightness?: number;\n}\n/**\n * ColorSettingTemperature sets the color temperature of a light in Kelvin.\n */\nexport interface ColorSettingTemperature {\n    getTemperatureMaxK(): Promise<number>;\n    getTemperatureMinK(): Promise<number>;\n    setColorTemperature(kelvin: number): Promise<void>;\n    colorTemperature?: number;\n}\n/**\n * ColorSettingRgb sets the color of a colored light using the RGB representation.\n */\nexport interface ColorSettingRgb {\n    setRgb(r: number, g: number, b: number): Promise<void>;\n    rgb?: ColorRgb;\n}\n/**\n * Represents an RGB color with component values between 0 and 255.\n */\nexport interface ColorRgb {\n    b?: number;\n    g?: number;\n    r?: number;\n}\n/**\n * ColorSettingHsv sets the color of a colored light using the HSV representation.\n */\nexport interface ColorSettingHsv {\n    setHsv(hue: number, saturation: number, value: number): Promise<void>;\n    hsv?: ColorHsv;\n}\n/**\n * Represents an HSV color value component.\n */\nexport interface ColorHsv {\n    /**\n     * Hue. 0 to 360.\n     */\n    h?: number;\n    /**\n     * Saturation. 0 to 1.\n     */\n    s?: number;\n    /**\n     * Value. 0 to 1.\n     */\n    v?: number;\n}\nexport interface NotifierOptions {\n    subtitle?: string;\n    actions?: NotificationAction[];\n    badge?: string;\n    bodyWithSubtitle?: string;\n    body?: string;\n    data?: any;\n    dir?: NotificationDirection;\n    lang?: string;\n    renotify?: boolean;\n    requireInteraction?: boolean;\n    silent?: boolean;\n    tag?: string;\n    timestamp?: EpochTimeStamp;\n    vibrate?: VibratePattern;\n}\n/**\n * Notifier can be any endpoint that can receive messages, such as speakers, phone numbers, messaging clients, etc. The messages may optionally contain media.\n */\nexport interface Notifier {\n    sendNotification(title: string, options?: NotifierOptions, media?: MediaObject | string, icon?: MediaObject | string): Promise<void>;\n}\n/**\n * MediaObject is an intermediate object within Scrypted to represent all media objects. Plugins should use the MediaConverter to convert the Scrypted MediaObject into a desired type, whether it is a externally accessible URL, a Buffer, etc.\n *\n * @category Media Reference\n */\nexport interface MediaObject {\n    mimeType: string;\n    sourceId?: string;\n}\n/**\n * StartStop represents a device that can be started, stopped, and possibly paused and resumed. Typically vacuum cleaners or washers.\n */\nexport interface StartStop {\n    start(): Promise<void>;\n    stop(): Promise<void>;\n    running?: boolean;\n}\nexport interface Pause {\n    pause(): Promise<void>;\n    resume(): Promise<void>;\n    paused?: boolean;\n}\n/**\n * Dock instructs devices that have a base station or charger, to return to their home.\n */\nexport interface Dock {\n    dock(): Promise<void>;\n    docked?: boolean;\n}\nexport interface TemperatureCommand {\n    mode?: ThermostatMode;\n    setpoint?: number | [number, number];\n}\nexport interface TemperatureSettingStatus {\n    availableModes?: ThermostatMode[];\n    mode?: ThermostatMode;\n    activeMode?: ThermostatMode;\n    setpoint?: number | [number, number];\n}\n/**\n * TemperatureSetting represents a thermostat device.\n */\nexport interface TemperatureSetting {\n    temperatureSetting?: TemperatureSettingStatus;\n    setTemperature(command: TemperatureCommand): Promise<void>;\n    /**\n     * @deprecated\n     * @param mode\n     */\n    setThermostatMode(mode: ThermostatMode): Promise<void>;\n    /**\n     * @deprecated\n     * @param mode\n     */\n    setThermostatSetpoint(degrees: number): Promise<void>;\n    /**\n     * @deprecated\n     * @param mode\n     */\n    setThermostatSetpointHigh(high: number): Promise<void>;\n    /**\n     * @deprecated\n     * @param mode\n     */\n    setThermostatSetpointLow(low: number): Promise<void>;\n    /**\n     * @deprecated\n     * @param mode\n     */\n    thermostatAvailableModes?: ThermostatMode[];\n    /**\n     * @deprecated\n     * @param mode\n     */\n    thermostatMode?: ThermostatMode;\n    /**\n     * @deprecated\n     * @param mode\n     */\n    thermostatActiveMode?: ThermostatMode;\n    /**\n     * @deprecated\n     * @param mode\n     */\n    thermostatSetpoint?: number;\n    /**\n     * @deprecated\n     * @param mode\n     */\n    thermostatSetpointHigh?: number;\n    /**\n     * @deprecated\n     * @param mode\n     */\n    thermostatSetpointLow?: number;\n}\nexport declare enum HumidityMode {\n    Humidify = "Humidify",\n    Dehumidify = "Dehumidify",\n    Auto = "Auto",\n    Off = "Off"\n}\nexport interface HumidityCommand {\n    mode?: HumidityMode;\n    humidifierSetpoint?: number;\n    dehumidifierSetpoint?: number;\n}\nexport interface HumiditySettingStatus {\n    mode: HumidityMode;\n    activeMode?: HumidityMode;\n    availableModes: HumidityMode[];\n    humidifierSetpoint?: number;\n    dehumidifierSetpoint?: number;\n}\nexport interface HumiditySetting {\n    humiditySetting?: HumiditySettingStatus;\n    setHumidity(humidity: HumidityCommand): Promise<void>;\n}\nexport declare enum FanMode {\n    Auto = "Auto",\n    Manual = "Manual"\n}\nexport interface FanStatus {\n    /**\n     * Rotations per minute, if available, otherwise 0 or 1.\n     */\n    speed: number;\n    mode?: FanMode;\n    active?: boolean;\n    /**\n     * Rotations per minute, if available.\n     */\n    maxSpeed?: number;\n    counterClockwise?: boolean;\n    availableModes?: FanMode[];\n    swing?: boolean;\n}\nexport interface FanState {\n    speed?: number;\n    mode?: FanMode;\n    counterClockwise?: boolean;\n    swing?: boolean;\n}\nexport interface Fan {\n    fan?: FanStatus;\n    setFan(fan: FanState): Promise<void>;\n}\nexport interface Thermometer {\n    /**\n     * Get the ambient temperature in Celsius.\n     */\n    temperature?: number;\n    /**\n     * Get the user facing unit of measurement for this thermometer, if any. Note that while this may be Fahrenheit, getTemperatureAmbient will return the temperature in Celsius.\n     */\n    temperatureUnit?: TemperatureUnit;\n    setTemperatureUnit(temperatureUnit: TemperatureUnit): Promise<void>;\n}\nexport declare enum TemperatureUnit {\n    C = "C",\n    F = "F"\n}\nexport interface HumiditySensor {\n    humidity?: number;\n}\nexport declare enum ThermostatMode {\n    Off = "Off",\n    Cool = "Cool",\n    Heat = "Heat",\n    HeatCool = "HeatCool",\n    Auto = "Auto",\n    FanOnly = "FanOnly",\n    Purifier = "Purifier",\n    Eco = "Eco",\n    Dry = "Dry",\n    On = "On"\n}\nexport interface PictureDimensions {\n    width?: number;\n    height?: number;\n}\nexport interface PictureOptions {\n    id?: string;\n    /**\n     * The native dimensions of the camera.\n     */\n    picture?: PictureDimensions;\n}\nexport interface ResponsePictureOptions extends PictureOptions {\n    name?: string;\n    /**\n     * Flag that indicates that the request supports resizing to custom dimensions.\n     */\n    canResize?: boolean;\n    /**\n     * Flag that indicates the camera will return a stale/cached image.\n     */\n    staleDuration?: number;\n}\nexport interface RequestPictureOptions extends PictureOptions {\n    reason?: \'user\' | \'event\';\n    /**\n     * Flag that hints whether this user request is happening due to a periodic refresh.\n     */\n    periodicRequest?: boolean;\n    /**\n     * Flag that hints whether multiple cameras are being refreshed by this user request. Can be used to prefetch the snapshots.\n     */\n    bulkRequest?: boolean;\n}\n/**\n * Camera devices can take still photos.\n */\nexport interface Camera {\n    takePicture(options?: RequestPictureOptions): Promise<MediaObject>;\n    getPictureOptions(): Promise<ResponsePictureOptions[]>;\n}\nexport interface H264Info {\n    sei?: boolean;\n    stapb?: boolean;\n    mtap16?: boolean;\n    mtap32?: boolean;\n    fuab?: boolean;\n    reserved0?: boolean;\n    reserved30?: boolean;\n    reserved31?: boolean;\n}\nexport interface VideoStreamOptions {\n    codec?: string;\n    profile?: string;\n    width?: number;\n    height?: number;\n    bitrate?: number;\n    bitrateControl?: \'variable\' | \'constant\';\n    minBitrate?: number;\n    maxBitrate?: number;\n    fps?: number;\n    /**\n     * Key Frame interval in milliseconds.\n     */\n    idrIntervalMillis?: number;\n    /**\n     * Key Frame interval in frames.\n     */\n    keyframeInterval?: number;\n    h264Info?: H264Info;\n}\nexport interface AudioStreamOptions {\n    codec?: string;\n    encoder?: string;\n    profile?: string;\n    bitrate?: number;\n}\nexport type MediaStreamSource = "local" | "cloud";\nexport type MediaStreamTool = \'ffmpeg\' | \'scrypted\' | \'gstreamer\';\n/**\n * Options passed to VideoCamera.getVideoStream to\n * request specific media formats.\n * The audio/video properties may be omitted\n * to indicate no audio/video is available when\n * calling getVideoStreamOptions or no audio/video\n * is requested when calling getVideoStream.\n */\nexport interface MediaStreamOptions {\n    id?: string;\n    name?: string;\n    /**\n     * Prebuffer time in milliseconds.\n     */\n    prebuffer?: number;\n    /**\n     * Prebuffer size in bytes.\n     */\n    prebufferBytes?: number;\n    /**\n     * The container type of this stream, ie: mp4, mpegts, rtsp.\n     */\n    container?: string;\n    /**\n    * Stream specific metadata.\n    */\n    metadata?: any;\n    /**\n     * The tool was used to write the container or will be used to read teh container. Ie, scrypted,\n     * the ffmpeg tools, gstreamer.\n     */\n    tool?: MediaStreamTool;\n    video?: VideoStreamOptions;\n    audio?: AudioStreamOptions;\n}\nexport interface ResponseMediaStreamOptions extends MediaStreamOptions {\n    id: string;\n    /**\n     * The time in milliseconds that this stream must be refreshed again\n     * via a call to getVideoStream.\n     */\n    refreshAt?: number;\n    source?: MediaStreamSource;\n    userConfigurable?: boolean;\n    sdp?: string;\n    /**\n     * The stream\'s codec parameters are not contained in the stream\n     * and are available out of band via another mechanism such as the SDP.\n     */\n    oobCodecParameters?: boolean;\n    destinations?: MediaStreamDestination[];\n    /**\n     * Set this to true to allow for prebuffering even if the device implements the Battery interface.\n     * Handy if you have a device that can continuously prebuffer when on mains power, but you still\n     * want battery status reported.\n     */\n    allowBatteryPrebuffer?: boolean;\n}\nexport type MediaStreamDestination = "local" | "remote" | "medium-resolution" | "low-resolution" | "local-recorder" | "remote-recorder";\nexport interface RequestMediaStreamOptions extends MediaStreamOptions {\n    /**\n     * When retrieving media, setting route directs how the media should be\n     * retrieved and exposed. A direct route will get the stream\n     * as is from the source. This will bypass any intermediaries if possible,\n     * such as an NVR or restreamers.\n     * An external route will request that that provided route is exposed to the local network.\n     */\n    route?: \'external\' | \'direct\' | \'internal\';\n    /**\n     * Specify the stream refresh behavior when this stream is requested.\n     * Use case is primarily for perioidic snapshot of streams\n     * while they are active.\n     * @default true\n     */\n    refresh?: boolean;\n    /**\n     * The intended destination for this media stream. May be used as\n     * a hint to determine which main/substream to send if no id\n     * is explicitly provided.\n     */\n    destination?: MediaStreamDestination;\n    /**\n     * The destination id for this media stream. This should generally be\n     * the IP address of the destination, if known. May be used by to\n     * determine stream selection and track dynamic bitrate history.\n     */\n    destinationId?: string;\n    /**\n     * Request an adaptive bitrate stream, if available. The destination\n     * will need to report packet loss indication.\n     */\n    adaptive?: boolean;\n}\nexport interface MediaStreamPacketLoss {\n    ssrc: number;\n    highestSequence: number;\n    packetsLost: number;\n}\nexport interface MediaStreamFeedback {\n    onRtcp(buffer: Buffer): Promise<void>;\n    reconfigureStream(options: {\n        video: {\n            bitrate?: number;\n            width?: number;\n            height?: number;\n        };\n    }): Promise<void>;\n    requestKeyframe(): Promise<void>;\n    reportPacketLoss(report: MediaStreamPacketLoss): Promise<void>;\n    reportPictureLoss(): Promise<void>;\n    reportEstimatedMaxBitrate(bitrate: number): Promise<void>;\n}\n/**\n * Microphone devices can capture audio streams.\n */\nexport interface Microphone {\n    getAudioStream(): Promise<MediaObject>;\n}\n/**\n * VideoCamera devices can capture video streams.\n */\nexport interface VideoCamera {\n    /**\n     * Get a video stream.\n     * @param options The media stream to fetch. If the id is specified, the exact\n     * stream will be retrieved. Otherwise, the returned stream will be implementation\n     * dependent.\n     * If no options are provided at all, the implementation must return the\n     * first stream listed in getVideoStreamOptions.\n     */\n    getVideoStream(options?: RequestMediaStreamOptions): Promise<MediaObject>;\n    /**\n     * Get the available video streaming options.\n     */\n    getVideoStreamOptions(): Promise<ResponseMediaStreamOptions[]>;\n}\nexport interface VideoCameraConfiguration {\n    setVideoStreamOptions(options: MediaStreamOptions): Promise<void>;\n}\nexport interface RequestRecordingStreamOptions extends RequestMediaStreamOptions {\n    startTime: number;\n    duration?: number;\n    loop?: boolean;\n    playbackRate?: number;\n}\nexport interface RecordingStreamThumbnailOptions {\n    detectionId?: string;\n    resize?: {\n        width?: number;\n        height?: number;\n        percent?: boolean;\n    };\n    crop?: {\n        left: number;\n        top: number;\n        width: number;\n        height: number;\n        percent?: boolean;\n    };\n}\nexport interface VideoRecorder {\n    /**\n     * Returns a MediaObject for a recording stream.\n     * @param options Options that denote where to start the recording stream.\n     * If a duration is specified, a downloadable stream will be returned.\n     * If a duration is not specified, a playback stream will be returned.\n     * @param recordingStream Optionally provide a previously returned recording stream\n     * to seek to a new position within that stream. If the seek is successful, the previous\n     * MediaObject will update its playback position and no MediaObject will be returned.\n     */\n    getRecordingStream(options: RequestRecordingStreamOptions, recordingStream?: MediaObject): Promise<MediaObject>;\n    getRecordingStreamCurrentTime(recordingStream: MediaObject): Promise<number>;\n    getRecordingStreamOptions(): Promise<ResponseMediaStreamOptions[]>;\n    getRecordingStreamThumbnail(time: number, options?: RecordingStreamThumbnailOptions): Promise<MediaObject>;\n}\nexport interface RecordedEvent {\n    details: EventDetails;\n    data: any;\n}\nexport interface RecordedEventOptions {\n    startTime?: number;\n    endTime?: number;\n    startId?: string;\n    count?: number;\n    reverseOrder?: boolean;\n}\nexport interface EventRecorder {\n    getRecordedEvents(options: RecordedEventOptions): Promise<RecordedEvent[]>;\n}\nexport interface Resource {\n    file?: string;\n    href?: string;\n}\nexport interface VideoResource {\n    thumbnail?: Resource;\n    video?: Resource;\n}\nexport interface VideoClip {\n    id: string;\n    startTime: number;\n    duration?: number;\n    event?: string;\n    description?: string;\n    detectionClasses?: ObjectDetectionClass[];\n    thumbnailId?: string;\n    videoId?: string;\n    resources?: VideoResource;\n}\nexport interface VideoClipOptions {\n    startTime?: number;\n    endTime?: number;\n    startId?: string;\n    count?: number;\n    reverseOrder?: boolean;\n}\nexport interface VideoClips {\n    getVideoClips(options?: VideoClipOptions): Promise<VideoClip[]>;\n    getVideoClip(videoId: string): Promise<MediaObject>;\n    getVideoClipThumbnail(thumbnailId: string): Promise<MediaObject>;\n    removeVideoClips(...videoClipIds: string[]): Promise<void>;\n}\n/**\n * Intercom devices can playback audio.\n */\nexport interface Intercom {\n    startIntercom(media: MediaObject): Promise<void>;\n    stopIntercom(): Promise<void>;\n}\nexport declare enum PanTiltZoomMovement {\n    Absolute = "Absolute",\n    Relative = "Relative"\n}\nexport interface PanTiltZoomCommand {\n    /**\n     * Specify the movement origin. If unspecified, the movement will be relative to the current position.\n     */\n    movement?: PanTiltZoomMovement;\n    /**\n     * Ranges between -1 and 1.\n     */\n    pan?: number;\n    /**\n     * Ranges between -1 and 1.\n     */\n    tilt?: number;\n    /**\n     * Ranges between 0 and 1 for max zoom.\n     */\n    zoom?: number;\n    /**\n     * The speed of the movement.\n     */\n    speed?: {\n        /**\n         * Ranges between 0 and 1 for max zoom.\n         */\n        pan?: number;\n        /**\n         * Ranges between 0 and 1 for max zoom.\n         */\n        tilt?: number;\n        /**\n         * Ranges between 0 and 1 for max zoom.\n         */\n        zoom?: number;\n    };\n}\nexport interface PanTiltZoomCapabilities {\n    pan?: boolean;\n    tilt?: boolean;\n    zoom?: boolean;\n}\nexport interface PanTiltZoom {\n    ptzCapabilities?: PanTiltZoomCapabilities;\n    ptzCommand(command: PanTiltZoomCommand): Promise<void>;\n}\n/**\n * Display devices can play back audio and video.\n */\nexport interface Display {\n    startDisplay(media: MediaObject): Promise<void>;\n    stopDisplay(): Promise<void>;\n}\n/**\n * Lock controls devices that can lock or unlock entries. Often works in tandem with PasswordControl.\n */\nexport interface Lock {\n    lock(): Promise<void>;\n    unlock(): Promise<void>;\n    lockState?: LockState;\n}\nexport declare enum LockState {\n    Locked = "Locked",\n    Unlocked = "Unlocked",\n    Jammed = "Jammed"\n}\n/**\n * PasswordControl represents devices that authorize users via a passcode or pin code.\n */\nexport interface PasswordStore {\n    addPassword(password: string): Promise<void>;\n    getPasswords(): Promise<string[]>;\n    removePassword(password: string): Promise<void>;\n}\n/**\n * Scenes control multiple different devices into a given state.\n */\nexport interface Scene {\n    activate(): Promise<void>;\n    deactivate(): Promise<void>;\n    /**\n     * If a scene can be reversed, isReversible should return true. Otherwise deactivate will not be called.\n     */\n    isReversible(): boolean;\n}\n/**\n * Entry represents devices that can open and close barriers, such as garage doors.\n */\nexport interface Entry {\n    closeEntry(): Promise<void>;\n    openEntry(): Promise<void>;\n}\nexport interface EntrySensor {\n    entryOpen?: boolean | \'jammed\';\n}\n/**\n * DeviceManager is the interface used by DeviceProvider to report new devices, device states, and device events to Scrypted.\n *\n * @category Device Provider Reference\n */\nexport interface DeviceManager {\n    /**\n     * Get the logger for a device given a native id.\n     */\n    getDeviceLogger(nativeId?: ScryptedNativeId): Logger;\n    /**\n     * Get the console for the device given a native id.\n     */\n    getDeviceConsole?(nativeId?: ScryptedNativeId): Console;\n    /**\n     * Get the console for the device given a native id.\n     */\n    getMixinConsole?(mixinId: string, nativeId?: ScryptedNativeId): Console;\n    /**\n     * Get the device state maintained by Scrypted. Setting properties on this state will update the state in Scrypted.\n     */\n    getDeviceState(nativeId?: ScryptedNativeId): DeviceState;\n    /**\n     * Create a device state object that will trap all state setting calls. Used internally by mixins and fork.\n     */\n    createDeviceState?(id: string, setState: (property: string, value: any) => Promise<void>): DeviceState;\n    /**\n     * Get the storage for a mixin.\n     * @param id The id of the device being mixined.\n     * @param nativeId The nativeId of the MixinProvider.\n     */\n    getMixinStorage(id: string, nativeId?: ScryptedNativeId): Storage;\n    /**\n     * Fire an event for a mixin provided by this plugin.\n     */\n    onMixinEvent(id: string, mixinDevice: any, eventInterface: string, eventData: any): Promise<void>;\n    /**\n    * Get the device Storage object.\n    */\n    getDeviceStorage(nativeId?: ScryptedNativeId): Storage;\n    /**\n     * Get all the native ids that have been reported by this plugin. This always includes "undefined", the plugin itself.\n     */\n    getNativeIds(): string[];\n    /**\n     * onDeviceDiscovered is used to report new devices that are trickle discovered, one by one, such as via a network broadcast.\n     */\n    onDeviceDiscovered(device: Device): Promise<string>;\n    /**\n     * Fire an event for a device provided by this plugin.\n     */\n    onDeviceEvent(nativeId: ScryptedNativeId, eventInterface: string, eventData: any): Promise<void>;\n    /**\n     * onDeviceRemoved is used to report when discovered devices are removed.\n     */\n    onDeviceRemoved(nativeId: ScryptedNativeId): Promise<void>;\n    /**\n     * onDevicesChanged is used to sync Scrypted with devices that are attached to a hub, such as Hue or SmartThings. All the devices should be reported at once.\n     */\n    onDevicesChanged(devices: DeviceManifest): Promise<void>;\n    /**\n     * Restart the plugin. May not happen immediately.\n     */\n    requestRestart(): Promise<void>;\n}\n/**\n * DeviceProvider acts as a controller/hub and exposes multiple devices to Scrypted Device Manager.\n *\n * @category Device Provider Reference\n */\nexport interface DeviceProvider {\n    /**\n     * Get an instance of a previously discovered device that was reported to the device manager.\n     * This method will be called every time onDeviceDiscovered or onDevicesChanged is invoked\n     * by the plugin. A previously returned instance may be returned again. If a different\n     * instance is returned, the plugin is responsible for cleaning up the old instance.\n     */\n    getDevice(nativeId: ScryptedNativeId): Promise<any>;\n    /**\n     * Called when a previously returned device from getDevice was deleted from Scrypted.\n     */\n    releaseDevice(id: string, nativeId: ScryptedNativeId): Promise<void>;\n}\n/**\n * DeviceManifest is passed to DeviceManager.onDevicesChanged to sync a full list of devices from the controller/hub (Hue, SmartThings, etc)\n *\n * @category Device Provider Reference\n */\nexport interface DeviceManifest {\n    /**\n     * The native id of the hub or discovery DeviceProvider that manages these devices.\n     */\n    providerNativeId?: ScryptedNativeId;\n    devices?: Device[];\n}\nexport interface DeviceCreatorSettings {\n    [key: string]: SettingValue;\n}\n/**\n * A DeviceProvider that allows the user to create a device.\n *\n * @category Device Provider Reference\n */\nexport interface DeviceCreator {\n    getCreateDeviceSettings(): Promise<Setting[]>;\n    /**\n     * Return the id of the created device.\n     */\n    createDevice(settings: DeviceCreatorSettings): Promise<string>;\n}\nexport interface DiscoveredDevice {\n    name: string;\n    /**\n     * Identifying information such as IP Address or Serial Number.\n     */\n    description: string;\n    nativeId: ScryptedNativeId;\n    type: ScryptedDeviceType;\n    interfaces?: string[];\n    info?: DeviceInformation;\n    settings?: Setting[];\n}\nexport interface AdoptDevice {\n    nativeId: ScryptedNativeId;\n    settings: DeviceCreatorSettings;\n}\n/**\n * A DeviceProvider that has a device discovery mechanism.\n *\n * @category Device Provider Reference\n */\nexport interface DeviceDiscovery {\n    /**\n     * Perform device discovery, scanning if requested.\n     * If no scan is requested, the current list of discovered devices\n     * is returned.\n     */\n    discoverDevices(scan?: boolean): Promise<DiscoveredDevice[]>;\n    /**\n     * Returns the id of the newly adopted device.\n     * @param device\n     */\n    adoptDevice(device: AdoptDevice): Promise<string>;\n}\n/**\n * Battery retrieves the battery level of battery powered devices.\n */\nexport interface Battery {\n    batteryLevel?: number;\n}\nexport declare enum ChargeState {\n    Trickle = "trickle",\n    Charging = "charging",\n    NotCharging = "not-charging"\n}\n/**\n * Charger reports whether or not a device is being charged from an external power source.\n * Usually used for battery powered devices.\n */\nexport interface Charger {\n    chargeState?: ChargeState;\n}\n/**\n * Refresh indicates that this device has properties that are not automatically updated, and must be periodically refreshed via polling. Device implementations should never implement their own underlying polling algorithm, and instead implement Refresh to allow Scrypted to manage polling intelligently.\n *\n * @category Device Provider Reference\n */\nexport interface Refresh {\n    /**\n     * Get the recommended refresh/poll frequency in seconds for this device.\n     */\n    getRefreshFrequency(): Promise<number>;\n    /**\n     * This method is called by Scrypted when the properties of the device need to be refreshed. When the device has completed the refresh, the appropriate DeviceState properties should be set. The parameters provide the specific interface that needs to be refreshed and whether it was user initiated (via UI or voice).\n     */\n    refresh(refreshInterface: string, userInitiated: boolean): Promise<void>;\n}\n/**\n * MediaPlayer allows media playback on screen or speaker devices, such as Chromecasts or TVs.\n */\nexport interface MediaPlayer {\n    getMediaStatus(): Promise<MediaStatus>;\n    load(media: string | MediaObject, options?: MediaPlayerOptions): Promise<void>;\n    seek(milliseconds: number): Promise<void>;\n    skipNext(): Promise<void>;\n    skipPrevious(): Promise<void>;\n}\nexport interface MediaPlayerOptions {\n    autoplay?: boolean;\n    mimeType?: string;\n    title?: string;\n}\n/**\n * Online denotes whether the device is online or unresponsive. It may be unresponsive due to being unplugged, network error, etc.\n */\nexport interface Online {\n    online?: boolean;\n}\nexport interface Program {\n    /**\n     * Asynchronously run a script given the provided arguments.\n     */\n    run(variables?: {\n        [name: string]: any;\n    }): Promise<any>;\n}\nexport interface ScriptSource {\n    name?: string;\n    script?: string;\n    language?: string;\n    monacoEvalDefaults?: string;\n}\nexport interface Scriptable {\n    saveScript(script: ScriptSource): Promise<void>;\n    loadScripts(): Promise<{\n        [filename: string]: ScriptSource;\n    }>;\n    eval(source: ScriptSource, variables?: {\n        [name: string]: any;\n    }): Promise<any>;\n}\n/**\n * Add a converter to be used by Scrypted to convert buffers from one mime type to another mime type.\n * May optionally accept string urls if accept-url is a fromMimeType parameter.\n */\nexport interface BufferConverter {\n    convert(data: string | Buffer | any, fromMimeType: string, toMimeType: string, options?: MediaObjectOptions): Promise<MediaObject | Buffer | any>;\n    fromMimeType?: string;\n    toMimeType?: string;\n}\n/**\n * Settings viewing and editing of device configurations that describe or modify behavior.\n */\nexport interface Settings {\n    getSettings(): Promise<Setting[]>;\n    putSetting(key: string, value: SettingValue): Promise<void>;\n}\nexport interface BinarySensor {\n    binaryState?: boolean;\n}\nexport type TamperState = \'intrusion\' | \'motion\' | \'magnetic\' | \'cover\' | true | false;\nexport interface TamperSensor {\n    tampered?: TamperState;\n}\nexport interface PowerSensor {\n    powerDetected?: boolean;\n}\nexport interface AudioSensor {\n    audioDetected?: boolean;\n}\nexport interface MotionSensor {\n    motionDetected?: boolean;\n}\nexport interface AmbientLightSensor {\n    /**\n     * The ambient light in lux.\n     */\n    ambientLight: number;\n}\nexport interface OccupancySensor {\n    occupied?: boolean;\n}\nexport interface FloodSensor {\n    flooded?: boolean;\n}\nexport interface UltravioletSensor {\n    ultraviolet?: number;\n}\nexport interface LuminanceSensor {\n    luminance?: number;\n}\nexport interface Position {\n    /**\n     * The accuracy radius of this position in meters.\n     */\n    accuracyRadius?: number;\n    latitude?: number;\n    longitude?: number;\n}\nexport interface PositionSensor {\n    position?: Position;\n}\nexport interface PM10Sensor {\n    pm10Density?: number;\n}\nexport interface PM25Sensor {\n    pm25Density?: number;\n}\nexport interface VOCSensor {\n    vocDensity?: number;\n}\nexport interface NOXSensor {\n    noxDensity?: number;\n}\nexport interface CO2Sensor {\n    co2ppm?: number;\n}\nexport declare enum AirQuality {\n    Unknown = "Unknown",\n    Excellent = "Excellent",\n    Good = "Good",\n    Fair = "Fair",\n    Inferior = "Inferior",\n    Poor = "Poor"\n}\nexport interface AirQualitySensor {\n    airQuality?: AirQuality;\n}\nexport declare enum SecuritySystemMode {\n    Disarmed = "Disarmed",\n    HomeArmed = "HomeArmed",\n    AwayArmed = "AwayArmed",\n    NightArmed = "NightArmed"\n}\nexport declare enum SecuritySystemObstruction {\n    Sensor = "Sensor",\n    Occupied = "Occupied",\n    Time = "Time",\n    Error = "Error"\n}\nexport interface SecuritySystemState {\n    mode: SecuritySystemMode;\n    triggered?: boolean;\n    supportedModes?: SecuritySystemMode[];\n    obstruction?: SecuritySystemObstruction;\n}\nexport interface SecuritySystem {\n    securitySystemState?: SecuritySystemState;\n    armSecuritySystem(mode: SecuritySystemMode): Promise<void>;\n    disarmSecuritySystem(): Promise<void>;\n}\nexport interface ObjectDetectionHistory {\n    firstSeen: number;\n    lastSeen: number;\n}\nexport interface BoundingBoxResult {\n    /**\n     * x, y, width, height\n     */\n    boundingBox?: [number, number, number, number];\n    zoneHistory?: {\n        [zone: string]: ObjectDetectionHistory;\n    };\n    zones?: string[];\n    history?: ObjectDetectionHistory;\n}\nexport interface ObjectDetectionResult extends BoundingBoxResult {\n    /**\n     * The id of the tracked object.\n     */\n    id?: string;\n    /**\n     * The detection class of the object.\n     */\n    className: ObjectDetectionClass;\n    /**\n     * The name of the object, if it was recognized as a familiar object (person, pet, etc).\n     */\n    name?: string;\n    score: number;\n    resources?: VideoResource;\n}\nexport interface ObjectsDetected {\n    /**\n     * Object detection session state. Will be true if processing video, until\n     * the video ends or is timed out.\n     */\n    running?: boolean;\n    detections?: ObjectDetectionResult[];\n    /**\n     * The id for the detection session.\n     */\n    detectionId?: string;\n    /**\n     * The id for this specific event/frame within a detection video session.\n     * Will be undefined for single image detections.\n     */\n    eventId?: any;\n    inputDimensions?: [number, number];\n    timestamp: number;\n    resources?: VideoResource;\n}\nexport type ObjectDetectionClass = \'motion\' | \'face\' | \'person\' | string;\nexport interface ObjectDetectionTypes {\n    /**\n     * Classes of objects that can be recognized. This can include motion\n     * or the names of specific people.\n     */\n    classes?: ObjectDetectionClass[];\n}\n/**\n * Given object detections with bounding boxes, return a similar list with tracker ids.\n */\nexport interface ObjectTracker {\n    trackObjects(detection: ObjectsDetected): Promise<ObjectsDetected>;\n}\n/**\n * ObjectDetector is found on Cameras that have smart detection capabilities.\n */\nexport interface ObjectDetector {\n    /**\n     * Get the media (image or video) that contains this detection.\n     * @param detectionId\n     */\n    getDetectionInput(detectionId: string, eventId?: any): Promise<MediaObject>;\n    getObjectTypes(): Promise<ObjectDetectionTypes>;\n}\nexport interface ObjectDetectionGeneratorSession {\n    settings?: {\n        [key: string]: any;\n    };\n    sourceId?: string;\n}\nexport interface ObjectDetectionSession extends ObjectDetectionGeneratorSession {\n    detectionId?: string;\n    duration?: number;\n}\nexport interface ObjectDetectionModel extends ObjectDetectionTypes {\n    name: string;\n    inputSize?: number[];\n    inputFormat?: \'gray\' | \'rgb\' | \'rgba\';\n    settings: Setting[];\n    triggerClasses?: string[];\n}\nexport interface ObjectDetectionCallbacks {\n    onDetection(detection: ObjectsDetected, redetect?: (boundingBox: [number, number, number, number]) => Promise<ObjectDetectionResult[]>, mediaObject?: MediaObject): Promise<boolean>;\n    onDetectionEnded(detection: ObjectsDetected): Promise<void>;\n}\nexport interface ObjectDetectionGeneratorResult {\n    __json_copy_serialize_children: true;\n    videoFrame: VideoFrame;\n    detected: ObjectsDetected;\n}\n/**\n * ObjectDetection can run classifications or analysis on arbitrary media sources.\n * E.g. TensorFlow, OpenCV, or a Coral TPU.\n */\nexport interface ObjectDetection {\n    generateObjectDetections(videoFrames: AsyncGenerator<VideoFrame>, session: ObjectDetectionGeneratorSession): Promise<AsyncGenerator<ObjectDetectionGeneratorResult>>;\n    detectObjects(mediaObject: MediaObject, session?: ObjectDetectionSession, callbacks?: ObjectDetectionCallbacks): Promise<ObjectsDetected>;\n    getDetectionModel(settings?: {\n        [key: string]: any;\n    }): Promise<ObjectDetectionModel>;\n}\nexport type ImageFormat = \'gray\' | \'rgba\' | \'rgb\' | \'jpg\';\nexport interface ImageOptions {\n    crop?: {\n        left: number;\n        top: number;\n        width: number;\n        height: number;\n    };\n    resize?: {\n        width?: number;\n        height?: number;\n    };\n    format?: ImageFormat;\n}\nexport interface Image {\n    width: number;\n    height: number;\n    /**\n     * The in raw memory format of this image.\n     * Operations of this image may only safely request\n     * this format, or a compressed format such as jpg.\n     */\n    format?: ImageFormat;\n    toBuffer(options?: ImageOptions): Promise<Buffer>;\n    toImage(options?: ImageOptions): Promise<Image & MediaObject>;\n}\nexport interface VideoFrame extends Image {\n    timestamp: number;\n}\nexport interface VideoFrameGeneratorOptions extends ImageOptions {\n}\nexport interface VideoFrameGenerator {\n    generateVideoFrames(mediaObject: MediaObject, options?: VideoFrameGeneratorOptions, filter?: (videoFrame: VideoFrame & MediaObject) => Promise<boolean>): Promise<AsyncGenerator<VideoFrame & MediaObject>>;\n}\n/**\n * Logger is exposed via log.* to allow writing to the Scrypted log.\n */\nexport interface Logger {\n    /**\n     * Alert. Alert level logs will be displayed as a notification in the management console.\n     */\n    a(msg: string): void;\n    /**\n     * Clear the log\n     */\n    clear(): void;\n    /**\n     * Clear a specific alert\n     */\n    clearAlert(msg: string): void;\n    /**\n     * Clear all alerts\n     */\n    clearAlerts(): void;\n    /**\n     * Debug\n     */\n    d(msg: string): void;\n    /**\n     * Error\n     */\n    e(msg: string): void;\n    /**\n     * Info\n     */\n    i(msg: string): void;\n    /**\n     * Verbose\n     */\n    v(msg: string): void;\n    /**\n     * Warn\n     */\n    w(msg: string): void;\n}\nexport interface Readme {\n    getReadmeMarkdown(): Promise<string>;\n}\n/**\n * The OauthClient can be implemented to perform the browser based Oauth process from within a plugin.\n */\nexport interface OauthClient {\n    /**\n     * Get the Oauth URL to navigate to in the browser. The redirect_uri parameter is not needed and will be automatically set by Scrypted.\n     */\n    getOauthUrl(): Promise<string>;\n    /**\n     * When an oauth request by a plugin completes, the callback url, with the code/token, will be passed to this method.\n     */\n    onOauthCallback(callbackUrl: string): Promise<void>;\n}\nexport type SerializableType = null | undefined | number | string | {\n    [key: string]: SerializableType;\n} | SerializableType[];\nexport type TopLevelSerializableType = Function | Buffer | SerializableType;\nexport interface MediaObjectOptions {\n    /**\n     * The device id of the source of the MediaObject.\n     */\n    sourceId?: string;\n    [key: string]: TopLevelSerializableType;\n}\n/**\n * @category Media Reference\n */\nexport interface MediaManager {\n    /**\n     * Add an convertor to consider for use when converting MediaObjects.\n     */\n    addConverter(converter: BufferConverter): Promise<void>;\n    clearConverters(): Promise<void>;\n    /**\n     * Convert a media object to a Buffer, primtive type, or RPC Object.\n     */\n    convertMediaObject<T>(mediaObject: MediaObject, toMimeType: string): Promise<T>;\n    /**\n     * Convert a media object to a Buffer of the given mime type, and them parse it as JSON.\n     */\n    convertMediaObjectToJSON<T>(mediaObject: MediaObject, toMimeType: string): Promise<T>;\n    /**\n     * Convert a media object to a Buffer of the given mime type.\n     */\n    convertMediaObjectToBuffer(mediaObject: MediaObject, toMimeType: string): Promise<Buffer>;\n    /**\n     * Convert a media object to a locally accessible URL that serves a media file of the given mime type. If the media object is an externally accessible URL, that will be returned.\n     */\n    convertMediaObjectToInsecureLocalUrl(mediaObject: string | MediaObject, toMimeType: string): Promise<string>;\n    /**\n     * Convert a media object to a locally accessible URL that serves a media file of the given mime type. If the media object is an externally accessible URL, that will be returned.\n     */\n    convertMediaObjectToLocalUrl(mediaObject: string | MediaObject, toMimeType: string): Promise<string>;\n    /**\n     * Convert a media object to a publically accessible URL that serves a media file of the given mime type.\n     */\n    convertMediaObjectToUrl(mediaObject: string | MediaObject, toMimeType: string): Promise<string>;\n    /**\n     * Create a MediaObject from FFmpeg input arguments.\n     */\n    createFFmpegMediaObject(ffmpegInput: FFmpegInput, options?: MediaObjectOptions): Promise<MediaObject>;\n    /**\n     * Create a MediaObject from an URL. The mime type will be determined dynamically while resolving the url.\n     */\n    createMediaObjectFromUrl<T extends MediaObjectOptions>(data: string, options?: T): Promise<MediaObject>;\n    /**\n     * Create a MediaObject.\n     * If the data is a buffer, JSON object, or primitive type, it will be serialized.\n     * All other objects will be objects will become RPC objects.\n     */\n    createMediaObject<T extends MediaObjectOptions>(data: any | Buffer, mimeType: string, options?: T): Promise<MediaObject & T>;\n    /**\n     * Get the path to ffmpeg on the host system.\n     */\n    getFFmpegPath(): Promise<string>;\n    /**\n     * Get the directory where the plugin should store files.\n     */\n    getFilesPath(): Promise<string>;\n}\nexport interface MediaContainer {\n    container?: string;\n    mediaStreamOptions?: ResponseMediaStreamOptions;\n}\nexport interface MediaStreamUrl extends MediaContainer {\n    url: string;\n}\nexport interface FFmpegInput extends MediaContainer {\n    /**\n     * The media url for this FFmpegInput.\n     */\n    url?: string;\n    /**\n     * Alternate media urls for this FFmpegInput.\n     */\n    urls?: string[];\n    inputArguments?: string[];\n    destinationVideoBitrate?: number;\n    h264EncoderArguments?: string[];\n    videoDecoderArguments?: string[];\n    h264FilterArguments?: string[];\n}\nexport interface DeviceInformation {\n    model?: string;\n    manufacturer?: string;\n    version?: string;\n    firmware?: string;\n    serialNumber?: string;\n    ip?: string;\n    mac?: string;\n    metadata?: any;\n    managementUrl?: string;\n}\n/**\n * Device objects are created by DeviceProviders when new devices are discover and synced to Scrypted via the DeviceManager.\n *\n * @category Device Provider Reference\n */\nexport interface Device {\n    name: string;\n    /**\n     * The native id that is used by the DeviceProvider used to internally identify provided devices.\n     */\n    nativeId: ScryptedNativeId;\n    type: ScryptedDeviceType;\n    interfaces: string[];\n    info?: DeviceInformation;\n    /**\n     * The native id of the hub or discovery DeviceProvider that manages this device.\n     */\n    providerNativeId?: ScryptedNativeId;\n    room?: string;\n}\nexport interface EndpointAccessControlAllowOrigin {\n    nativeId?: ScryptedNativeId;\n    origins: string[];\n}\n/**\n * EndpointManager provides publicly accessible URLs that can be used to contact your Scrypted Plugin.\n *\n * @category Webhook and Push Reference\n */\nexport interface EndpointManager {\n    /**\n     * Get an URL pathname for a device that can be accessed with authentication. This is a relative path that can be used in browser sessions.\n     * @deprecated\n     */\n    getAuthenticatedPath(nativeId?: ScryptedNativeId): Promise<string>;\n    /**\n    * Get an URL that can only be accessed on your local network by anyone with the link. HTTP requests and responses are without any encryption. Plugin implementation is responsible for authentication.\n    * @deprecated\n    */\n    getInsecurePublicLocalEndpoint(nativeId?: ScryptedNativeId): Promise<string>;\n    /**\n     * Get an URL that can only be accessed on your local network by anyone with the link. HTTP requests and responses are over SSL with a self signed certificate. Plugin implementation is responsible for authentication.\n     * @deprecated\n     */\n    getPublicLocalEndpoint(nativeId?: ScryptedNativeId): Promise<string>;\n    /**\n     * Get an URL that can be used to send a push message to the client. This differs from a cloud endpoint, in that, the Plugin does not send a response back. Plugin implementation is responsible for authentication.\n     * @deprecated\n     */\n    getPublicPushEndpoint(nativeId?: ScryptedNativeId): Promise<string>;\n    /**\n     * Get an URL that can be externally accessed by anyone with the link. Plugin implementation is responsible for authentication.\n     * @deprecated\n     */\n    getPublicCloudEndpoint(nativeId?: ScryptedNativeId): Promise<string>;\n    /**\n     * Get an URL pathname for a device that can be accessed without authentication. This is a relative path that can be used in browser sessions.\n     */\n    getPath(nativeId?: ScryptedNativeId, options?: {\n        public?: boolean;\n    }): Promise<string>;\n    /**\n     * Get an URL that can only be accessed on your local network by anyone with the link.\n     */\n    getLocalEndpoint(nativeId?: string, options?: {\n        /**\n         * A public endpoint that does not require authentication with the local Scrypted server.\n         */\n        public?: boolean;\n        /**\n         * An insecure endpoint served by http, not https.\n         */\n        insecure?: boolean;\n    }): Promise<string>;\n    /**\n     * Get an URL that can be externally accessed by anyone with the link. Plugin implementation is responsible for authentication.\n     * @deprecated\n     */\n    getCloudEndpoint(nativeId?: ScryptedNativeId, options?: {\n        /**\n         * A public endpoint that does not require authentication with the local Scrypted server.\n         */\n        public?: boolean;\n    }): Promise<string>;\n    /**\n     * Get an URL that can be used to send a push message to the client. This differs from a cloud endpoint, in that, the Plugin does not send a response back.\n     */\n    getCloudPushEndpoint(nativeId?: ScryptedNativeId): Promise<string>;\n    /**\n     * Set the recommended local addresses used by Scrypted plugins that listen for incoming connections.\n     * @param addresses\n     */\n    setLocalAddresses(addresses: string[]): Promise<void>;\n    /**\n     * Get the recommended local addresess used by Scrypted plugins that listen for incoming connections.\n     */\n    getLocalAddresses(): Promise<string[]>;\n    /**\n     * Set the allowed origins for an endpoint for cross origin requests.\n     * I.e. \'https://example.com\' would allow cross origin requests from that origin.\n     * For security, this setting will not persist between plugin reloads and must\n     * be called per desired origin after plugin startup.\n     */\n    setAccessControlAllowOrigin(options: EndpointAccessControlAllowOrigin): Promise<void>;\n}\n/**\n * SystemManager is used by scripts to query device state and access devices.\n *\n * @category Core Reference\n */\nexport interface SystemManager {\n    /**\n     * Retrieve a system service.\n     */\n    getComponent(id: string): Promise<any>;\n    /**\n     * Find a Scrypted device by id.\n     */\n    getDeviceById(id: string): ScryptedDevice;\n    /**\n     * Find a Scrypted device by id.\n     */\n    getDeviceById<T>(id: string): ScryptedDevice & T;\n    /**\n     * Find a Scrypted device by name.\n     */\n    getDeviceByName(name: string): ScryptedDevice;\n    /**\n     * Find a Scrypted device by name.\n     */\n    getDeviceByName<T>(name: string): ScryptedDevice & T;\n    /**\n     * Get the current state of a device.\n     * @deprecated\n     */\n    getDeviceState(id: string): {\n        [property: string]: SystemDeviceState;\n    };\n    /**\n     * Get the current state of every device.\n     */\n    getSystemState(): {\n        [id: string]: {\n            [property: string]: SystemDeviceState;\n        };\n    };\n    /**\n     * Passively (without polling) listen to property changed events.\n     */\n    listen(callback: EventListener): EventListenerRegister;\n    /**\n     * Subscribe to events from a specific interface on a device id, such as \'OnOff\' or \'Brightness\'. This is a convenience method for ScryptedDevice.listen.\n     */\n    listenDevice(id: string, event: ScryptedInterface | string | EventListenerOptions, callback: EventListener): EventListenerRegister;\n    /**\n     * Remove a device from Scrypted. Plugins should use DeviceManager.onDevicesChanged or DeviceManager.onDeviceRemoved to remove their own devices\n     */\n    removeDevice(id: string): Promise<void>;\n}\n/**\n * MixinProviders can add and intercept interfaces to other devices to add or augment their behavior.\n *\n * @category Mixin Reference\n */\nexport interface MixinProvider {\n    /**\n     * Called by the system to determine if this provider can create a mixin for the supplied device. Returns null if a mixin can not be created, otherwise returns a list of new interfaces (which may be an empty list) that are provided by the mixin.\n     */\n    canMixin(type: ScryptedDeviceType, interfaces: string[]): Promise<string[]>;\n    /**\n     * Create a mixin that can be applied to the supplied device.\n     */\n    getMixin(mixinDevice: any, mixinDeviceInterfaces: ScryptedInterface[], mixinDeviceState: DeviceState): Promise<any>;\n    /**\n     * Release a mixin device that was previously returned from getMixin.\n     */\n    releaseMixin(id: string, mixinDevice: any): Promise<void>;\n}\n/**\n * The HttpRequestHandler allows handling of web requests under the endpoint path: /endpoint/npm-package-name/*.\n *\n * @category Webhook and Push Reference\n */\nexport interface HttpRequestHandler {\n    /**\n     * Callback to handle an incoming request.\n     */\n    onRequest(request: HttpRequest, response: HttpResponse): Promise<void>;\n}\n/**\n * @category Webhook and Push Reference\n */\nexport interface HttpRequest {\n    body?: string;\n    headers?: {\n        [header: string]: string;\n    };\n    isPublicEndpoint?: boolean;\n    method?: string;\n    rootPath?: string;\n    url?: string;\n    username?: string;\n    aclId?: string;\n}\n/**\n * Response object provided by the HttpRequestHandler.\n *\n * @category Webhook and Push Reference\n */\nexport interface HttpResponse {\n    send(body: string): void;\n    send(body: string, options: HttpResponseOptions): void;\n    send(body: Buffer): void;\n    send(body: Buffer, options: HttpResponseOptions): void;\n    sendFile(path: string): void;\n    sendFile(path: string, options: HttpResponseOptions): void;\n    sendSocket(socket: any, options: HttpResponseOptions): void;\n}\n/**\n * @category Webhook and Push Reference\n */\nexport interface HttpResponseOptions {\n    code?: number;\n    headers?: object;\n}\nexport interface EngineIOHandler {\n    onConnection(request: HttpRequest, webScoket: WebSocket): Promise<void>;\n}\n/**\n * @category Webhook and Push Reference\n *\n */\nexport interface PushHandler {\n    /**\n     * Callback to handle an incoming push.\n     */\n    onPush(request: HttpRequest): Promise<void>;\n}\nexport interface SystemDeviceState {\n    value?: any;\n}\nexport interface MediaStatus {\n    duration?: number;\n    mediaPlayerState?: MediaPlayerState;\n    metadata?: any;\n    position?: number;\n}\nexport declare enum MediaPlayerState {\n    Idle = "Idle",\n    Playing = "Playing",\n    Paused = "Paused",\n    Buffering = "Buffering"\n}\nexport type SettingValue = undefined | null | string | number | boolean | string[] | number[];\nexport interface Setting {\n    key?: string;\n    title?: string;\n    group?: string;\n    subgroup?: string;\n    description?: string;\n    placeholder?: string;\n    type?: \'string\' | \'password\' | \'number\' | \'boolean\' | \'device\' | \'integer\' | \'button\' | \'clippath\' | \'interface\' | \'qrcode\' | \'textarea\' | \'date\' | \'time\' | \'datetime\';\n    /**\n     * The range of allowed numbers, if any, when the type is \'number\'.\n     */\n    range?: [number, number];\n    readonly?: boolean;\n    choices?: string[];\n    combobox?: boolean;\n    deviceFilter?: string;\n    multiple?: boolean;\n    value?: SettingValue;\n}\nexport interface LauncherApplicationInfo {\n    name?: string;\n    /**\n     * Supports: mdi-icon, fa-icon, urls.\n     */\n    icon?: string;\n    description?: string;\n    href?: string;\n}\nexport interface LauncherApplication {\n    applicationInfo?: LauncherApplicationInfo;\n}\nexport declare enum ScryptedInterface {\n    ScryptedDevice = "ScryptedDevice",\n    ScryptedPlugin = "ScryptedPlugin",\n    OnOff = "OnOff",\n    Brightness = "Brightness",\n    ColorSettingTemperature = "ColorSettingTemperature",\n    ColorSettingRgb = "ColorSettingRgb",\n    ColorSettingHsv = "ColorSettingHsv",\n    Notifier = "Notifier",\n    StartStop = "StartStop",\n    Pause = "Pause",\n    Dock = "Dock",\n    TemperatureSetting = "TemperatureSetting",\n    Thermometer = "Thermometer",\n    HumiditySensor = "HumiditySensor",\n    Camera = "Camera",\n    Microphone = "Microphone",\n    Display = "Display",\n    VideoCamera = "VideoCamera",\n    VideoRecorder = "VideoRecorder",\n    PanTiltZoom = "PanTiltZoom",\n    EventRecorder = "EventRecorder",\n    VideoClips = "VideoClips",\n    VideoCameraConfiguration = "VideoCameraConfiguration",\n    Intercom = "Intercom",\n    Lock = "Lock",\n    PasswordStore = "PasswordStore",\n    Scene = "Scene",\n    Entry = "Entry",\n    EntrySensor = "EntrySensor",\n    DeviceProvider = "DeviceProvider",\n    DeviceDiscovery = "DeviceDiscovery",\n    DeviceCreator = "DeviceCreator",\n    Battery = "Battery",\n    Charger = "Charger",\n    Refresh = "Refresh",\n    MediaPlayer = "MediaPlayer",\n    Online = "Online",\n    BufferConverter = "BufferConverter",\n    Settings = "Settings",\n    BinarySensor = "BinarySensor",\n    TamperSensor = "TamperSensor",\n    PowerSensor = "PowerSensor",\n    AudioSensor = "AudioSensor",\n    MotionSensor = "MotionSensor",\n    AmbientLightSensor = "AmbientLightSensor",\n    OccupancySensor = "OccupancySensor",\n    FloodSensor = "FloodSensor",\n    UltravioletSensor = "UltravioletSensor",\n    LuminanceSensor = "LuminanceSensor",\n    PositionSensor = "PositionSensor",\n    SecuritySystem = "SecuritySystem",\n    PM10Sensor = "PM10Sensor",\n    PM25Sensor = "PM25Sensor",\n    VOCSensor = "VOCSensor",\n    NOXSensor = "NOXSensor",\n    CO2Sensor = "CO2Sensor",\n    AirQualitySensor = "AirQualitySensor",\n    Readme = "Readme",\n    OauthClient = "OauthClient",\n    MixinProvider = "MixinProvider",\n    HttpRequestHandler = "HttpRequestHandler",\n    EngineIOHandler = "EngineIOHandler",\n    PushHandler = "PushHandler",\n    Program = "Program",\n    Scriptable = "Scriptable",\n    ObjectTracker = "ObjectTracker",\n    ObjectDetector = "ObjectDetector",\n    ObjectDetection = "ObjectDetection",\n    HumiditySetting = "HumiditySetting",\n    Fan = "Fan",\n    RTCSignalingChannel = "RTCSignalingChannel",\n    RTCSignalingClient = "RTCSignalingClient",\n    LauncherApplication = "LauncherApplication",\n    ScryptedUser = "ScryptedUser",\n    VideoFrameGenerator = "VideoFrameGenerator"\n}\n/**\n * @category WebRTC Reference\n */\nexport type RTCSignalingSendIceCandidate = (candidate: RTCIceCandidateInit) => Promise<void>;\n/**\n * Implemented by WebRTC cameras to negotiate a peer connection session with Scrypted.\n *\n * @category WebRTC Reference\n */\nexport interface RTCSignalingSession {\n    createLocalDescription(type: \'offer\' | \'answer\', setup: RTCAVSignalingSetup, sendIceCandidate: undefined | RTCSignalingSendIceCandidate): Promise<RTCSessionDescriptionInit>;\n    setRemoteDescription(description: RTCSessionDescriptionInit, setup: RTCAVSignalingSetup): Promise<void>;\n    addIceCandidate(candidate: RTCIceCandidateInit): Promise<void>;\n    getOptions(): Promise<RTCSignalingOptions>;\n}\n/**\n * @category WebRTC Reference\n */\nexport interface RTCSignalingOptions {\n    /**\n     * Indicates that this client requires an answer, and is providing an offer.\n     */\n    offer?: RTCSessionDescriptionInit;\n    requiresOffer?: boolean;\n    requiresAnswer?: boolean;\n    /**\n     * Disables trickle ICE. All candidates must be sent in the initial offer/answer sdp.\n     */\n    disableTrickle?: boolean;\n    /**\n     * Disables usage of TURN servers, if this client exposes public addresses or provides its own.\n     */\n    disableTurn?: boolean;\n    /**\n     * Hint to proxy the feed, as the target client may be inflexible.\n     */\n    proxy?: boolean;\n    capabilities?: {\n        video?: RTCRtpCapabilities;\n        audio?: RTCRtpCapabilities;\n    };\n    userAgent?: string;\n    screen?: {\n        devicePixelRatio: number;\n        width: number;\n        height: number;\n    };\n}\n/**\n * A flexible RTC signaling endpoint, typically a browser, that can handle offer and answer.\n * Like Chromecast, etc, which has a Chromecast AppId that can connect to Scrypted.\n */\nexport interface RTCSignalingClient {\n    createRTCSignalingSession(): Promise<RTCSignalingSession>;\n}\n/**\n * @category WebRTC Reference\n */\nexport interface RTCSessionControl {\n    getRefreshAt(): Promise<number | void>;\n    extendSession(): Promise<void>;\n    endSession(): Promise<void>;\n    setPlayback(options: {\n        audio: boolean;\n        video: boolean;\n    }): Promise<void>;\n}\n/**\n * @category WebRTC Reference\n */\nexport interface RTCMediaObjectTrack {\n    onStop(): Promise<void>;\n    replace(mediaObject: MediaObject): Promise<void>;\n    stop(): Promise<void>;\n    setPlayback(options: {\n        audio: boolean;\n        video: boolean;\n    }): Promise<void>;\n}\n/**\n * @category WebRTC Reference\n */\nexport interface RTCConnectionManagement {\n    negotiateRTCSignalingSession(): Promise<void>;\n    addTrack(mediaObject: MediaObject, options?: {\n        videoMid?: string;\n        audioMid?: string;\n        intercomId?: string;\n    }): Promise<RTCMediaObjectTrack>;\n    close(): Promise<void>;\n    probe(): Promise<void>;\n}\n/**\n * An inflexible RTC Signaling channel, typically a vendor, like Nest or Ring.\n * They generally can only handle either offer or answer, but not both. Usually has\n * strict requirements and expectations on client setup.\n *\n * @category WebRTC Reference\n */\nexport interface RTCSignalingChannel {\n    startRTCSignalingSession(session: RTCSignalingSession): Promise<RTCSessionControl | undefined>;\n}\n/**\n * @category WebRTC Reference\n */\nexport interface RTCAVSignalingSetup {\n    /**\n     * Mechanism to allow configuration of TURN/STUN servers, etc.\n     */\n    configuration?: RTCConfiguration;\n    audio?: RTCRtpTransceiverInit;\n    video?: RTCRtpTransceiverInit;\n    /**\n     * Some endpoints like Ring do not stream to Safari unless getUserMedia is called. Unclear why.\n     */\n    getUserMediaSafariHack?: boolean;\n    datachannel?: {\n        label: string;\n        dict?: RTCDataChannelInit;\n    };\n    type: \'offer\' | \'answer\';\n}\nexport declare enum ScryptedMimeTypes {\n    Url = "text/x-uri",\n    InsecureLocalUrl = "text/x-insecure-local-uri",\n    LocalUrl = "text/x-local-uri",\n    PushEndpoint = "text/x-push-endpoint",\n    SchemePrefix = "x-scrypted/x-scrypted-scheme-",\n    MediaStreamUrl = "text/x-media-url",\n    MediaObject = "x-scrypted/x-scrypted-media-object",\n    RequestMediaObject = "x-scrypted/x-scrypted-request-media-object",\n    RequestMediaStream = "x-scrypted/x-scrypted-request-stream",\n    MediaStreamFeedback = "x-scrypted/x-media-stream-feedback",\n    FFmpegInput = "x-scrypted/x-ffmpeg-input",\n    FFmpegTranscodeStream = "x-scrypted/x-ffmpeg-transcode-stream",\n    RTCSignalingChannel = "x-scrypted/x-scrypted-rtc-signaling-channel",\n    RTCSignalingSession = "x-scrypted/x-scrypted-rtc-signaling-session",\n    RTCConnectionManagement = "x-scrypted/x-scrypted-rtc-connection-management",\n    Image = "x-scrypted/x-scrypted-image"\n}\nexport type RequestMediaObject = () => Promise<MediaObject>;\nexport type RequestMediaStream = (options?: RequestMediaStreamOptions) => Promise<MediaObject>;\nexport interface FFmpegTranscode {\n    videoDecoderArguments?: string[];\n    videoTranscodeArguments?: string[];\n    audioTranscodeArguments?: string[];\n}\nexport type FFmpegTranscodeStream = (options: FFmpegTranscode) => Promise<void>;\nexport interface PluginFork<T> {\n    result: Promise<T>;\n    worker: NodeWorker;\n}\nexport declare interface DeviceState {\n    id?: string;\n    setState?(property: string, value: any): Promise<void>;\n}\nexport interface ScryptedInterfaceDescriptor {\n    name: string;\n    properties: string[];\n    methods: string[];\n}\n/**\n * ScryptedDeviceAccessControl describes the methods and properties on a device\n * that will be visible to the user.\n * If methods is nullish, the user will be granted full access to all methods.\n * If properties is nullish, the user will be granted full access to all properties.\n * If events is nullish, the user will be granted full access to all events.\n */\nexport interface ScryptedDeviceAccessControl {\n    id: string;\n    methods?: string[];\n    properties?: string[];\n    interfaces?: string[];\n}\n/**\n * ScryptedUserAccessControl describes the list of devices that\n * may be accessed by the user.\n */\nexport interface ScryptedUserAccessControl {\n    /**\n     * If devicesAccessControls is null, the user has full access to all devices.\n     */\n    devicesAccessControls?: ScryptedDeviceAccessControl[] | null;\n}\n/**\n * ScryptedUser represents a user managed by Scrypted.\n * This interface can not be implemented, only extended by Mixins.\n */\nexport interface ScryptedUser {\n    /**\n     * Retrieve the ScryptedUserAccessControl for a user. If no access control object is returned\n     * the user has full access to all devices. This differs from an admin user that can also\n     * access admin related system services.\n     */\n    getScryptedUserAccessControl(): Promise<ScryptedUserAccessControl>;\n}\nexport interface APIOptions {\n    username?: string;\n    accessControls?: ScryptedUserAccessControl;\n}\nexport interface ConnectOptions extends APIOptions {\n    pluginId: string;\n}\nexport interface ScryptedStatic {\n    /**\n     * @deprecated\n     */\n    log?: Logger;\n    deviceManager: DeviceManager;\n    endpointManager: EndpointManager;\n    mediaManager: MediaManager;\n    systemManager: SystemManager;\n    serverVersion?: string;\n    pluginHostAPI: any;\n    pluginRemoteAPI: any;\n    /**\n     * Start a new instance of the plugin, returning an instance of the new process\n     * and the result of the fork method.\n     */\n    fork?<T>(): PluginFork<T>;\n    /**\n     * Initiate the Scrypted RPC wire protocol on a socket.\n     * @param socket\n     * @param options\n     */\n    connect?(socket: NodeNetSocket, options?: ConnectOptions): void;\n    /**\n     * Attempt to retrieve an RPC object by directly connecting to the plugin\n     * that created the object. All operations on this object will bypass routing\n     * through the Scrypted Server which typically manages plugin communication.\n     * This is ideal for sending large amounts of data.\n     */\n    connectRPCObject?<T>(value: T): Promise<T>;\n}\n'},"04c3":function(e,t,n){"use strict";n("8208")},"252f3":function(e,t,n){},"257a":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScryptedMimeTypes=t.ScryptedInterface=t.MediaPlayerState=t.SecuritySystemObstruction=t.SecuritySystemMode=t.AirQuality=t.ChargeState=t.LockState=t.PanTiltZoomMovement=t.ThermostatMode=t.TemperatureUnit=t.FanMode=t.HumidityMode=t.ScryptedDeviceType=t.ScryptedInterfaceDescriptors=t.ScryptedInterfaceMethod=t.ScryptedInterfaceProperty=t.DeviceBase=t.TYPES_VERSION=void 0,t.TYPES_VERSION="0.2.79";class i{}t.DeviceBase=i,function(e){e["id"]="id",e["info"]="info",e["interfaces"]="interfaces",e["mixins"]="mixins",e["name"]="name",e["nativeId"]="nativeId",e["pluginId"]="pluginId",e["providedInterfaces"]="providedInterfaces",e["providedName"]="providedName",e["providedRoom"]="providedRoom",e["providedType"]="providedType",e["providerId"]="providerId",e["room"]="room",e["type"]="type",e["on"]="on",e["brightness"]="brightness",e["colorTemperature"]="colorTemperature",e["rgb"]="rgb",e["hsv"]="hsv",e["running"]="running",e["paused"]="paused",e["docked"]="docked",e["temperatureSetting"]="temperatureSetting",e["thermostatActiveMode"]="thermostatActiveMode",e["thermostatAvailableModes"]="thermostatAvailableModes",e["thermostatMode"]="thermostatMode",e["thermostatSetpoint"]="thermostatSetpoint",e["thermostatSetpointHigh"]="thermostatSetpointHigh",e["thermostatSetpointLow"]="thermostatSetpointLow",e["temperature"]="temperature",e["temperatureUnit"]="temperatureUnit",e["humidity"]="humidity",e["ptzCapabilities"]="ptzCapabilities",e["lockState"]="lockState",e["entryOpen"]="entryOpen",e["batteryLevel"]="batteryLevel",e["chargeState"]="chargeState",e["online"]="online",e["fromMimeType"]="fromMimeType",e["toMimeType"]="toMimeType",e["binaryState"]="binaryState",e["tampered"]="tampered",e["powerDetected"]="powerDetected",e["audioDetected"]="audioDetected",e["motionDetected"]="motionDetected",e["ambientLight"]="ambientLight",e["occupied"]="occupied",e["flooded"]="flooded",e["ultraviolet"]="ultraviolet",e["luminance"]="luminance",e["position"]="position",e["securitySystemState"]="securitySystemState",e["pm10Density"]="pm10Density",e["pm25Density"]="pm25Density",e["vocDensity"]="vocDensity",e["noxDensity"]="noxDensity",e["co2ppm"]="co2ppm",e["airQuality"]="airQuality",e["humiditySetting"]="humiditySetting",e["fan"]="fan",e["applicationInfo"]="applicationInfo"}(t.ScryptedInterfaceProperty||(t.ScryptedInterfaceProperty={})),function(e){e["listen"]="listen",e["probe"]="probe",e["setMixins"]="setMixins",e["setName"]="setName",e["setRoom"]="setRoom",e["setType"]="setType",e["getPluginJson"]="getPluginJson",e["turnOff"]="turnOff",e["turnOn"]="turnOn",e["setBrightness"]="setBrightness",e["getTemperatureMaxK"]="getTemperatureMaxK",e["getTemperatureMinK"]="getTemperatureMinK",e["setColorTemperature"]="setColorTemperature",e["setRgb"]="setRgb",e["setHsv"]="setHsv",e["sendNotification"]="sendNotification",e["start"]="start",e["stop"]="stop",e["pause"]="pause",e["resume"]="resume",e["dock"]="dock",e["setTemperature"]="setTemperature",e["setThermostatMode"]="setThermostatMode",e["setThermostatSetpoint"]="setThermostatSetpoint",e["setThermostatSetpointHigh"]="setThermostatSetpointHigh",e["setThermostatSetpointLow"]="setThermostatSetpointLow",e["setTemperatureUnit"]="setTemperatureUnit",e["getPictureOptions"]="getPictureOptions",e["takePicture"]="takePicture",e["getAudioStream"]="getAudioStream",e["startDisplay"]="startDisplay",e["stopDisplay"]="stopDisplay",e["getVideoStream"]="getVideoStream",e["getVideoStreamOptions"]="getVideoStreamOptions",e["getRecordingStream"]="getRecordingStream",e["getRecordingStreamCurrentTime"]="getRecordingStreamCurrentTime",e["getRecordingStreamOptions"]="getRecordingStreamOptions",e["getRecordingStreamThumbnail"]="getRecordingStreamThumbnail",e["ptzCommand"]="ptzCommand",e["getRecordedEvents"]="getRecordedEvents",e["getVideoClip"]="getVideoClip",e["getVideoClipThumbnail"]="getVideoClipThumbnail",e["getVideoClips"]="getVideoClips",e["removeVideoClips"]="removeVideoClips",e["setVideoStreamOptions"]="setVideoStreamOptions",e["startIntercom"]="startIntercom",e["stopIntercom"]="stopIntercom",e["lock"]="lock",e["unlock"]="unlock",e["addPassword"]="addPassword",e["getPasswords"]="getPasswords",e["removePassword"]="removePassword",e["activate"]="activate",e["deactivate"]="deactivate",e["isReversible"]="isReversible",e["closeEntry"]="closeEntry",e["openEntry"]="openEntry",e["getDevice"]="getDevice",e["releaseDevice"]="releaseDevice",e["adoptDevice"]="adoptDevice",e["discoverDevices"]="discoverDevices",e["createDevice"]="createDevice",e["getCreateDeviceSettings"]="getCreateDeviceSettings",e["getRefreshFrequency"]="getRefreshFrequency",e["refresh"]="refresh",e["getMediaStatus"]="getMediaStatus",e["load"]="load",e["seek"]="seek",e["skipNext"]="skipNext",e["skipPrevious"]="skipPrevious",e["convert"]="convert",e["getSettings"]="getSettings",e["putSetting"]="putSetting",e["armSecuritySystem"]="armSecuritySystem",e["disarmSecuritySystem"]="disarmSecuritySystem",e["getReadmeMarkdown"]="getReadmeMarkdown",e["getOauthUrl"]="getOauthUrl",e["onOauthCallback"]="onOauthCallback",e["canMixin"]="canMixin",e["getMixin"]="getMixin",e["releaseMixin"]="releaseMixin",e["onRequest"]="onRequest",e["onConnection"]="onConnection",e["onPush"]="onPush",e["run"]="run",e["eval"]="eval",e["loadScripts"]="loadScripts",e["saveScript"]="saveScript",e["trackObjects"]="trackObjects",e["getDetectionInput"]="getDetectionInput",e["getObjectTypes"]="getObjectTypes",e["detectObjects"]="detectObjects",e["generateObjectDetections"]="generateObjectDetections",e["getDetectionModel"]="getDetectionModel",e["setHumidity"]="setHumidity",e["setFan"]="setFan",e["startRTCSignalingSession"]="startRTCSignalingSession",e["createRTCSignalingSession"]="createRTCSignalingSession",e["getScryptedUserAccessControl"]="getScryptedUserAccessControl",e["generateVideoFrames"]="generateVideoFrames"}(t.ScryptedInterfaceMethod||(t.ScryptedInterfaceMethod={})),t.ScryptedInterfaceDescriptors={ScryptedDevice:{name:"ScryptedDevice",methods:["listen","probe","setMixins","setName","setRoom","setType"],properties:["id","info","interfaces","mixins","name","nativeId","pluginId","providedInterfaces","providedName","providedRoom","providedType","providerId","room","type"]},ScryptedPlugin:{name:"ScryptedPlugin",methods:["getPluginJson"],properties:[]},OnOff:{name:"OnOff",methods:["turnOff","turnOn"],properties:["on"]},Brightness:{name:"Brightness",methods:["setBrightness"],properties:["brightness"]},ColorSettingTemperature:{name:"ColorSettingTemperature",methods:["getTemperatureMaxK","getTemperatureMinK","setColorTemperature"],properties:["colorTemperature"]},ColorSettingRgb:{name:"ColorSettingRgb",methods:["setRgb"],properties:["rgb"]},ColorSettingHsv:{name:"ColorSettingHsv",methods:["setHsv"],properties:["hsv"]},Notifier:{name:"Notifier",methods:["sendNotification"],properties:[]},StartStop:{name:"StartStop",methods:["start","stop"],properties:["running"]},Pause:{name:"Pause",methods:["pause","resume"],properties:["paused"]},Dock:{name:"Dock",methods:["dock"],properties:["docked"]},TemperatureSetting:{name:"TemperatureSetting",methods:["setTemperature","setThermostatMode","setThermostatSetpoint","setThermostatSetpointHigh","setThermostatSetpointLow"],properties:["temperatureSetting","thermostatActiveMode","thermostatAvailableModes","thermostatMode","thermostatSetpoint","thermostatSetpointHigh","thermostatSetpointLow"]},Thermometer:{name:"Thermometer",methods:["setTemperatureUnit"],properties:["temperature","temperatureUnit"]},HumiditySensor:{name:"HumiditySensor",methods:[],properties:["humidity"]},Camera:{name:"Camera",methods:["getPictureOptions","takePicture"],properties:[]},Microphone:{name:"Microphone",methods:["getAudioStream"],properties:[]},Display:{name:"Display",methods:["startDisplay","stopDisplay"],properties:[]},VideoCamera:{name:"VideoCamera",methods:["getVideoStream","getVideoStreamOptions"],properties:[]},VideoRecorder:{name:"VideoRecorder",methods:["getRecordingStream","getRecordingStreamCurrentTime","getRecordingStreamOptions","getRecordingStreamThumbnail"],properties:[]},PanTiltZoom:{name:"PanTiltZoom",methods:["ptzCommand"],properties:["ptzCapabilities"]},EventRecorder:{name:"EventRecorder",methods:["getRecordedEvents"],properties:[]},VideoClips:{name:"VideoClips",methods:["getVideoClip","getVideoClipThumbnail","getVideoClips","removeVideoClips"],properties:[]},VideoCameraConfiguration:{name:"VideoCameraConfiguration",methods:["setVideoStreamOptions"],properties:[]},Intercom:{name:"Intercom",methods:["startIntercom","stopIntercom"],properties:[]},Lock:{name:"Lock",methods:["lock","unlock"],properties:["lockState"]},PasswordStore:{name:"PasswordStore",methods:["addPassword","getPasswords","removePassword"],properties:[]},Scene:{name:"Scene",methods:["activate","deactivate","isReversible"],properties:[]},Entry:{name:"Entry",methods:["closeEntry","openEntry"],properties:[]},EntrySensor:{name:"EntrySensor",methods:[],properties:["entryOpen"]},DeviceProvider:{name:"DeviceProvider",methods:["getDevice","releaseDevice"],properties:[]},DeviceDiscovery:{name:"DeviceDiscovery",methods:["adoptDevice","discoverDevices"],properties:[]},DeviceCreator:{name:"DeviceCreator",methods:["createDevice","getCreateDeviceSettings"],properties:[]},Battery:{name:"Battery",methods:[],properties:["batteryLevel"]},Charger:{name:"Charger",methods:[],properties:["chargeState"]},Refresh:{name:"Refresh",methods:["getRefreshFrequency","refresh"],properties:[]},MediaPlayer:{name:"MediaPlayer",methods:["getMediaStatus","load","seek","skipNext","skipPrevious"],properties:[]},Online:{name:"Online",methods:[],properties:["online"]},BufferConverter:{name:"BufferConverter",methods:["convert"],properties:["fromMimeType","toMimeType"]},Settings:{name:"Settings",methods:["getSettings","putSetting"],properties:[]},BinarySensor:{name:"BinarySensor",methods:[],properties:["binaryState"]},TamperSensor:{name:"TamperSensor",methods:[],properties:["tampered"]},PowerSensor:{name:"PowerSensor",methods:[],properties:["powerDetected"]},AudioSensor:{name:"AudioSensor",methods:[],properties:["audioDetected"]},MotionSensor:{name:"MotionSensor",methods:[],properties:["motionDetected"]},AmbientLightSensor:{name:"AmbientLightSensor",methods:[],properties:["ambientLight"]},OccupancySensor:{name:"OccupancySensor",methods:[],properties:["occupied"]},FloodSensor:{name:"FloodSensor",methods:[],properties:["flooded"]},UltravioletSensor:{name:"UltravioletSensor",methods:[],properties:["ultraviolet"]},LuminanceSensor:{name:"LuminanceSensor",methods:[],properties:["luminance"]},PositionSensor:{name:"PositionSensor",methods:[],properties:["position"]},SecuritySystem:{name:"SecuritySystem",methods:["armSecuritySystem","disarmSecuritySystem"],properties:["securitySystemState"]},PM10Sensor:{name:"PM10Sensor",methods:[],properties:["pm10Density"]},PM25Sensor:{name:"PM25Sensor",methods:[],properties:["pm25Density"]},VOCSensor:{name:"VOCSensor",methods:[],properties:["vocDensity"]},NOXSensor:{name:"NOXSensor",methods:[],properties:["noxDensity"]},CO2Sensor:{name:"CO2Sensor",methods:[],properties:["co2ppm"]},AirQualitySensor:{name:"AirQualitySensor",methods:[],properties:["airQuality"]},Readme:{name:"Readme",methods:["getReadmeMarkdown"],properties:[]},OauthClient:{name:"OauthClient",methods:["getOauthUrl","onOauthCallback"],properties:[]},MixinProvider:{name:"MixinProvider",methods:["canMixin","getMixin","releaseMixin"],properties:[]},HttpRequestHandler:{name:"HttpRequestHandler",methods:["onRequest"],properties:[]},EngineIOHandler:{name:"EngineIOHandler",methods:["onConnection"],properties:[]},PushHandler:{name:"PushHandler",methods:["onPush"],properties:[]},Program:{name:"Program",methods:["run"],properties:[]},Scriptable:{name:"Scriptable",methods:["eval","loadScripts","saveScript"],properties:[]},ObjectTracker:{name:"ObjectTracker",methods:["trackObjects"],properties:[]},ObjectDetector:{name:"ObjectDetector",methods:["getDetectionInput","getObjectTypes"],properties:[]},ObjectDetection:{name:"ObjectDetection",methods:["detectObjects","generateObjectDetections","getDetectionModel"],properties:[]},HumiditySetting:{name:"HumiditySetting",methods:["setHumidity"],properties:["humiditySetting"]},Fan:{name:"Fan",methods:["setFan"],properties:["fan"]},RTCSignalingChannel:{name:"RTCSignalingChannel",methods:["startRTCSignalingSession"],properties:[]},RTCSignalingClient:{name:"RTCSignalingClient",methods:["createRTCSignalingSession"],properties:[]},LauncherApplication:{name:"LauncherApplication",methods:[],properties:["applicationInfo"]},ScryptedUser:{name:"ScryptedUser",methods:["getScryptedUserAccessControl"],properties:[]},VideoFrameGenerator:{name:"VideoFrameGenerator",methods:["generateVideoFrames"],properties:[]}},function(e){e["Builtin"]="Builtin",e["Camera"]="Camera",e["Fan"]="Fan",e["Light"]="Light",e["Switch"]="Switch",e["Outlet"]="Outlet",e["Sensor"]="Sensor",e["Scene"]="Scene",e["Program"]="Program",e["Automation"]="Automation",e["Vacuum"]="Vacuum",e["Notifier"]="Notifier",e["Thermostat"]="Thermostat",e["Lock"]="Lock",e["PasswordControl"]="PasswordControl",e["Display"]="Display",e["SmartDisplay"]="SmartDisplay",e["Speaker"]="Speaker",e["SmartSpeaker"]="SmartSpeaker",e["Event"]="Event",e["Entry"]="Entry",e["Garage"]="Garage",e["DeviceProvider"]="DeviceProvider",e["DataSource"]="DataSource",e["API"]="API",e["Doorbell"]="Doorbell",e["Irrigation"]="Irrigation",e["Valve"]="Valve",e["Person"]="Person",e["SecuritySystem"]="SecuritySystem",e["WindowCovering"]="WindowCovering",e["Siren"]="Siren",e["Unknown"]="Unknown"}(t.ScryptedDeviceType||(t.ScryptedDeviceType={})),function(e){e["Humidify"]="Humidify",e["Dehumidify"]="Dehumidify",e["Auto"]="Auto",e["Off"]="Off"}(t.HumidityMode||(t.HumidityMode={})),function(e){e["Auto"]="Auto",e["Manual"]="Manual"}(t.FanMode||(t.FanMode={})),function(e){e["C"]="C",e["F"]="F"}(t.TemperatureUnit||(t.TemperatureUnit={})),function(e){e["Off"]="Off",e["Cool"]="Cool",e["Heat"]="Heat",e["HeatCool"]="HeatCool",e["Auto"]="Auto",e["FanOnly"]="FanOnly",e["Purifier"]="Purifier",e["Eco"]="Eco",e["Dry"]="Dry",e["On"]="On"}(t.ThermostatMode||(t.ThermostatMode={})),function(e){e["Absolute"]="Absolute",e["Relative"]="Relative"}(t.PanTiltZoomMovement||(t.PanTiltZoomMovement={})),function(e){e["Locked"]="Locked",e["Unlocked"]="Unlocked",e["Jammed"]="Jammed"}(t.LockState||(t.LockState={})),function(e){e["Trickle"]="trickle",e["Charging"]="charging",e["NotCharging"]="not-charging"}(t.ChargeState||(t.ChargeState={})),function(e){e["Unknown"]="Unknown",e["Excellent"]="Excellent",e["Good"]="Good",e["Fair"]="Fair",e["Inferior"]="Inferior",e["Poor"]="Poor"}(t.AirQuality||(t.AirQuality={})),function(e){e["Disarmed"]="Disarmed",e["HomeArmed"]="HomeArmed",e["AwayArmed"]="AwayArmed",e["NightArmed"]="NightArmed"}(t.SecuritySystemMode||(t.SecuritySystemMode={})),function(e){e["Sensor"]="Sensor",e["Occupied"]="Occupied",e["Time"]="Time",e["Error"]="Error"}(t.SecuritySystemObstruction||(t.SecuritySystemObstruction={})),function(e){e["Idle"]="Idle",e["Playing"]="Playing",e["Paused"]="Paused",e["Buffering"]="Buffering"}(t.MediaPlayerState||(t.MediaPlayerState={})),function(e){e["ScryptedDevice"]="ScryptedDevice",e["ScryptedPlugin"]="ScryptedPlugin",e["OnOff"]="OnOff",e["Brightness"]="Brightness",e["ColorSettingTemperature"]="ColorSettingTemperature",e["ColorSettingRgb"]="ColorSettingRgb",e["ColorSettingHsv"]="ColorSettingHsv",e["Notifier"]="Notifier",e["StartStop"]="StartStop",e["Pause"]="Pause",e["Dock"]="Dock",e["TemperatureSetting"]="TemperatureSetting",e["Thermometer"]="Thermometer",e["HumiditySensor"]="HumiditySensor",e["Camera"]="Camera",e["Microphone"]="Microphone",e["Display"]="Display",e["VideoCamera"]="VideoCamera",e["VideoRecorder"]="VideoRecorder",e["PanTiltZoom"]="PanTiltZoom",e["EventRecorder"]="EventRecorder",e["VideoClips"]="VideoClips",e["VideoCameraConfiguration"]="VideoCameraConfiguration",e["Intercom"]="Intercom",e["Lock"]="Lock",e["PasswordStore"]="PasswordStore",e["Scene"]="Scene",e["Entry"]="Entry",e["EntrySensor"]="EntrySensor",e["DeviceProvider"]="DeviceProvider",e["DeviceDiscovery"]="DeviceDiscovery",e["DeviceCreator"]="DeviceCreator",e["Battery"]="Battery",e["Charger"]="Charger",e["Refresh"]="Refresh",e["MediaPlayer"]="MediaPlayer",e["Online"]="Online",e["BufferConverter"]="BufferConverter",e["Settings"]="Settings",e["BinarySensor"]="BinarySensor",e["TamperSensor"]="TamperSensor",e["PowerSensor"]="PowerSensor",e["AudioSensor"]="AudioSensor",e["MotionSensor"]="MotionSensor",e["AmbientLightSensor"]="AmbientLightSensor",e["OccupancySensor"]="OccupancySensor",e["FloodSensor"]="FloodSensor",e["UltravioletSensor"]="UltravioletSensor",e["LuminanceSensor"]="LuminanceSensor",e["PositionSensor"]="PositionSensor",e["SecuritySystem"]="SecuritySystem",e["PM10Sensor"]="PM10Sensor",e["PM25Sensor"]="PM25Sensor",e["VOCSensor"]="VOCSensor",e["NOXSensor"]="NOXSensor",e["CO2Sensor"]="CO2Sensor",e["AirQualitySensor"]="AirQualitySensor",e["Readme"]="Readme",e["OauthClient"]="OauthClient",e["MixinProvider"]="MixinProvider",e["HttpRequestHandler"]="HttpRequestHandler",e["EngineIOHandler"]="EngineIOHandler",e["PushHandler"]="PushHandler",e["Program"]="Program",e["Scriptable"]="Scriptable",e["ObjectTracker"]="ObjectTracker",e["ObjectDetector"]="ObjectDetector",e["ObjectDetection"]="ObjectDetection",e["HumiditySetting"]="HumiditySetting",e["Fan"]="Fan",e["RTCSignalingChannel"]="RTCSignalingChannel",e["RTCSignalingClient"]="RTCSignalingClient",e["LauncherApplication"]="LauncherApplication",e["ScryptedUser"]="ScryptedUser",e["VideoFrameGenerator"]="VideoFrameGenerator"}(t.ScryptedInterface||(t.ScryptedInterface={})),function(e){e["Url"]="text/x-uri",e["InsecureLocalUrl"]="text/x-insecure-local-uri",e["LocalUrl"]="text/x-local-uri",e["PushEndpoint"]="text/x-push-endpoint",e["SchemePrefix"]="x-scrypted/x-scrypted-scheme-",e["MediaStreamUrl"]="text/x-media-url",e["MediaObject"]="x-scrypted/x-scrypted-media-object",e["RequestMediaObject"]="x-scrypted/x-scrypted-request-media-object",e["RequestMediaStream"]="x-scrypted/x-scrypted-request-stream",e["MediaStreamFeedback"]="x-scrypted/x-media-stream-feedback",e["FFmpegInput"]="x-scrypted/x-ffmpeg-input",e["FFmpegTranscodeStream"]="x-scrypted/x-ffmpeg-transcode-stream",e["RTCSignalingChannel"]="x-scrypted/x-scrypted-rtc-signaling-channel",e["RTCSignalingSession"]="x-scrypted/x-scrypted-rtc-signaling-session",e["RTCConnectionManagement"]="x-scrypted/x-scrypted-rtc-connection-management",e["Image"]="x-scrypted/x-scrypted-image"}(t.ScryptedMimeTypes||(t.ScryptedMimeTypes={}))},2634:function(e,t,n){"use strict";n("6e0d")},"2b79":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("42a6"),r=n("aecd"),a=n("2e65");function s(e,t){if(e===i["ScryptedInterfaceProperty"].id)throw new Error("id is read only");if(e===i["ScryptedInterfaceProperty"].nativeId)throw new Error("nativeId is read only");if(e===i["ScryptedInterfaceProperty"].mixins)throw new Error("mixins is read only");if(e===i["ScryptedInterfaceProperty"].interfaces)throw new Error("interfaces is a read only post-mixin computed property, use providedInterfaces");if(r["b"].isRpcProxy(t))throw new Error("value must be a primitive type");const n=a["e"][e.toString()];if(n===i["ScryptedInterface"].ScryptedDevice&&e!==i["ScryptedInterfaceProperty"].info)throw new Error(e.toString()+" can not be set. Use DeviceManager.onDevicesChanges or DeviceManager.onDeviceDiscovered to update the device description.")}},"2bb0":function(e,t,n){},"2bf2":function(module,__webpack_exports__,__webpack_require__){"use strict";var _RPCInterface_vue__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("ce2e"),_raw_loader_scrypted_types_dist_index_d_ts__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("02dd"),_raw_loader_scrypted_sdk_dist_src_index_d_ts__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("6810"),monaco_editor__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("c2c6"),monaco_editor__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(monaco_editor__WEBPACK_IMPORTED_MODULE_3__);function monacoEvalDefaults(){monaco_editor__WEBPACK_IMPORTED_MODULE_3__["languages"].typescript.typescriptDefaults.setDiagnosticsOptions(Object.assign({},monaco_editor__WEBPACK_IMPORTED_MODULE_3__["languages"].typescript.typescriptDefaults.getDiagnosticsOptions(),{diagnosticCodesToIgnore:[1108,1375,1378]})),monaco_editor__WEBPACK_IMPORTED_MODULE_3__["languages"].typescript.typescriptDefaults.setCompilerOptions(Object.assign({},monaco_editor__WEBPACK_IMPORTED_MODULE_3__["languages"].typescript.typescriptDefaults.getCompilerOptions(),{moduleResolution:monaco_editor__WEBPACK_IMPORTED_MODULE_3__["languages"].typescript.ModuleResolutionKind.NodeJs})),monaco_editor__WEBPACK_IMPORTED_MODULE_3__["languages"].typescript.typescriptDefaults.addExtraLib(`${_raw_loader_scrypted_types_dist_index_d_ts__WEBPACK_IMPORTED_MODULE_1__["a"]}\n    ${_raw_loader_scrypted_sdk_dist_src_index_d_ts__WEBPACK_IMPORTED_MODULE_2__["a"]}\n    \n    declare global {\n      ${_raw_loader_scrypted_types_dist_index_d_ts__WEBPACK_IMPORTED_MODULE_1__["a"].replace("export interface","interface")}\n\n      const log: Logger;\n\n      const deviceManager: DeviceManager;\n      const endpointManager: EndpointManager;\n      const mediaManager: MediaManager;\n      const systemManager: SystemManager;\n      const eventSource: any;\n      const eventDetails: EventDetails;\n      const eventData: any;\n    }\n    `,"node_modules/@types/scrypted__sdk/types.d.ts"),monaco_editor__WEBPACK_IMPORTED_MODULE_3__["languages"].typescript.typescriptDefaults.addExtraLib(_raw_loader_scrypted_sdk_dist_src_index_d_ts__WEBPACK_IMPORTED_MODULE_2__["a"],"node_modules/@types/scrypted__sdk/index.d.ts")}__webpack_exports__["a"]={mixins:[_RPCInterface_vue__WEBPACK_IMPORTED_MODULE_0__["a"]],mounted(){this.reload()},computed:{divStyle(){const e=this.expanded?1e3:500;return`height: ${e}px`}},data(){return{expanded:!1,scriptSource:{filename:"script.ts",script:"",scriptTitle:"Script",language:"typescript",monacoEvalDefaults:()=>monacoEvalDefaults}}},methods:{async reload(){var _this$scriptSource$mo,_this$scriptSource;if(monaco_editor__WEBPACK_IMPORTED_MODULE_3__["editor"].getModels().forEach(e=>e.dispose()),this.device){var _scripts$this$scriptS,_scripts$this$scriptS2;const scripts=await this.device.loadScripts();this.scriptSource.filename=Object.keys(scripts)[0],this.scriptSource.script=null===(_scripts$this$scriptS=scripts[this.scriptSource.filename].script)||void 0===_scripts$this$scriptS?void 0:_scripts$this$scriptS.toString(),this.scriptSource.scriptTitle=null===(_scripts$this$scriptS2=scripts[this.scriptSource.filename].name)||void 0===_scripts$this$scriptS2?void 0:_scripts$this$scriptS2.toString(),this.scriptSource.language=scripts[this.scriptSource.filename].language||"typescript",this.scriptSource.monacoEvalDefaults=()=>{var _scripts$this$scriptS3;return eval((null===(_scripts$this$scriptS3=scripts[this.scriptSource.filename].monacoEvalDefaults)||void 0===_scripts$this$scriptS3?void 0:_scripts$this$scriptS3.toString())||"")}}else{var _this$lazyValue$this$;this.scriptSource.filename=Object.keys(this.lazyValue).filter(e=>"rpc"!==e)[0]||this.scriptSource.filename,this.scriptSource.script=null===(_this$lazyValue$this$=this.lazyValue[this.scriptSource.filename])||void 0===_this$lazyValue$this$?void 0:_this$lazyValue$this$.toString()}const editor=monaco_editor__WEBPACK_IMPORTED_MODULE_3__["editor"].create(this.$refs.container,{automaticLayout:!0,theme:this.$vuetify.theme.dark?"vs-dark":"vs",minimap:{enabled:!1},model:monaco_editor__WEBPACK_IMPORTED_MODULE_3__["editor"].createModel(this.scriptSource.script,this.scriptSource.language,new monaco_editor__WEBPACK_IMPORTED_MODULE_3__["Uri"](this.scriptSource.filename))});editor.onDidChangeModelContent(e=>{this.device?this.scriptSource.script=editor.getValue():(this.lazyValue[this.scriptSource.filename]=editor.getValue(),this.save())});const f=null===(_this$scriptSource$mo=(_this$scriptSource=this.scriptSource).monacoEvalDefaults)||void 0===_this$scriptSource$mo?void 0:_this$scriptSource$mo.call(_this$scriptSource);null===f||void 0===f||f(monaco_editor__WEBPACK_IMPORTED_MODULE_3__)},eval(){this.device.eval({script:this.scriptSource.script})},onChange(){this.device||this.save()},save(){this.rpc({varargs:!0}).saveScript(this.scriptSource)}}}},"2c7f":function(module,__webpack_exports__,__webpack_require__){"use strict";var _RPCInterface_vue__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("ce2e"),_common_DevicePicker_vue__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("c543"),_common_Grower_vue__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("bde8"),lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("0644"),lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_3__),_Camera_vue__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("bb90"),qrcode__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("d055"),qrcode__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(qrcode__WEBPACK_IMPORTED_MODULE_5__);__webpack_exports__["a"]={mixins:[_RPCInterface_vue__WEBPACK_IMPORTED_MODULE_0__["a"]],components:{Camera:_Camera_vue__WEBPACK_IMPORTED_MODULE_4__["a"],DevicePicker:_common_DevicePicker_vue__WEBPACK_IMPORTED_MODULE_1__["a"],Grower:_common_Grower_vue__WEBPACK_IMPORTED_MODULE_2__["a"]},data(){return{editingZone:!1,clipPathThrottle:null}},watch:{dirty(){this.device||this.onInput()}},asyncComputed:{qrcode:{async get(){if("qrcode"!==this.lazyValue.type)return;let e;return e=this.$vuetify.theme.dark?{dark:"#FFFFFFFF",light:"#FF000000"}:{light:"#FFFFFFFF",dark:"#404040FF"},qrcode__WEBPACK_IMPORTED_MODULE_5___default.a.toDataURL(this.lazyValue.value,{margin:.5,color:e,width:320,rendererOpts:{type:"image/jpeg"}})},default:"https://poops.com/farts.jpg"}},computed:{sanitizedClipPathValue(){try{return JSON.parse(JSON.stringify(this.lazyValue.value))||[]}catch(e){return[]}},dateValue:{get(){var e,t;return this.lazyValue.combobox?{start:new Date(parseInt(null===(e=this.lazyValue.value)||void 0===e?void 0:e[0])||Date.now()),end:new Date(parseInt(null===(t=this.lazyValue.value)||void 0===t?void 0:t[1])||Date.now())}:new Date(parseInt(this.lazyValue.value)||Date.now())},set(e){this.lazyValue.combobox?this.lazyValue.value=[e.start.getTime(),e.end.getTime()]:this.lazyValue.value=e.getTime()}},booleanValue:{get(){return this.lazyValue.value&&"true"===this.lazyValue.value.toString().toLowerCase()},set(e){this.lazyValue.value=!!e}},dirty(){return JSON.stringify(this.lazyValue.value)!==JSON.stringify(this.value.value)},devices(){var expression;try{expression=this.lazyValue.deviceFilter||"true;"}catch(e){expression="true;"}var ret=this.$store.state.scrypted.devices.map(e=>this.$scrypted.systemManager.getDeviceById(e)).filter(device=>{try{return eval(`(function() { var interfaces = ${JSON.stringify(device.interfaces)}; var type='${device.type}'; var id = '${device.id}'; return ${expression} })`)()}catch(e){return!0}}).map(e=>({id:e.id,text:e.name}));return this.lazyValue.multiple||ret.splice(0,0,{id:null,text:this.lazyValue.placeholder||"Select a Device"}),ret},interfaces(){var expression;try{expression=this.lazyValue.deviceFilter||"true;"}catch(e){expression="true;"}var ret=this.$store.state.scrypted.devices.map(e=>{const t=this.$scrypted.systemManager.getDeviceById(e);return t.interfaces.map(e=>({device:t,deviceInterface:e}))}).flat().filter(({device:device,deviceInterface:deviceInterface})=>{try{return eval(`(function() { var interfaces = ${JSON.stringify(device.interfaces)}; var deviceInterface = '${deviceInterface}'}; var type='${device.type}'; return ${expression} })`)()}catch(e){return!0}}).map(({device:e,deviceInterface:t})=>({id:e.id+"#"+t,text:e.name+` (${t})`}));return this.lazyValue.multiple||ret.splice(0,0,{id:null,text:this.lazyValue.placeholder||"Select an Interface"}),ret}},methods:{onChange(){},updateClipPath(e){clearTimeout(this.clipPathThrottle),this.clipPathThrottle=setTimeout(()=>{this.lazyValue.value=e,this.rpc().putSetting(this.lazyValue.key,this.createInputValue().value),this.onInput()},500)},editingZoneChanged(e){this.editingZone=e,e||(this.rpc().putSetting(this.lazyValue.key,this.createInputValue().value),this.onInput())},createLazyValue(){var e=this.value.type||"";if(-1==e.indexOf("[]")&&"clippath"!==e)return lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_3___default()(this.value);var t=lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_3___default()(this.value);try{t.value=JSON.parse(t.value)}catch(n){t.value=[]}return t},createInputValue(){var e=this.lazyValue.type||"";if(-1==e.indexOf("[]")&&"clippath"!==e)return this.lazyValue;var t=lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_3___default()(this.lazyValue);return t.value=JSON.stringify(t.value.filter(e=>e)),t},save(){this.rpc().putSetting(this.lazyValue.key,this.createInputValue().value),this.onInput()},editZone(){this.editingZone=!0}}}},"2ce1":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));class i extends Error{constructor(e){super("Operation Timed Out"),this.promise=e}}function r(e,t){return new Promise((n,r)=>{const a=setTimeout(()=>r(new i(t)),e);t.then(e=>{clearTimeout(a),n(e)}).catch(e=>{clearTimeout(a),r(e)})})}},"2e65":function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"e",(function(){return a})),n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return o})),n.d(t,"d",(function(){return c}));var i=n("42a6");[].concat(...Object.values(i["ScryptedInterfaceDescriptors"]).map(e=>e.properties));function r(e){const t={};for(const n of Object.values(e))for(const e of n.properties)t[e]=n.name;return t}const a=r(i["ScryptedInterfaceDescriptors"]);function s(e,t){return Object.values(e).filter(e=>t.has(e.name)).map(e=>e.methods).flat()}function o(e,t){return Object.values(e).filter(e=>t.has(e.name)).map(e=>e.properties).flat()}function c(e,t,n){const r=s(e,t);return r.includes(n)||e[i["ScryptedInterface"].ScryptedDevice].methods.includes(n)}},"38a0":function(e,t,n){"use strict";n("b930")},"3a54":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));class i{serialize(e){return e.toString("base64")}deserialize(t){return e.from(t,"base64")}}class r{constructor(){this.bufferSerializer=new i}serialize(e,t){if(!t)return this.bufferSerializer.serialize(e);const n=t.buffers=t.buffers||[];return n.push(e),n.length-1}deserialize(e,t){if(!(null===t||void 0===t?void 0:t.buffers))return this.bufferSerializer.deserialize(e);const n=t.buffers;return n[e]}}}).call(this,n("b639").Buffer)},"410f":function(e,t,n){"use strict";(function(e){var i=n("fcf3"),r=n("47d0"),a=n("94ac"),s=n.n(a);t["a"]={socket:null,mounted(){const t=new i["Terminal"]({theme:this.$vuetify.theme.dark?void 0:{foreground:"black",background:"white",cursor:"black"},convertEol:!0}),n=new r["FitAddon"];t.loadAddon(n),t.open(this.$refs.terminal),n.fit();const a={path:"/engine.io/shell"},o=`${window.location.protocol}//${window.location.host}`;this.socket=s()(o,a),this.socket.on("message",n=>{t.write(new Uint8Array(e.from(n)))}),t.onData(e=>{this.socket.send(e)}),t.onBinary(e=>{this.socket.send(e)})},destroyed(){var e;null===(e=this.socket)||void 0===e||e.close()}}}).call(this,n("b639").Buffer)},42208:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return h}));var i=n("42a6"),r=n("aecd"),a=n("3a54"),s=n("edad"),o=n("2b79"),c=n("fa7b");class l{constructor(e,t,n){this.console=n,this.api=e,this.nativeId=t}async ensureLogger(){return this.logger||(this.logger=this.api.getLogger(this.nativeId)),await this.logger}async log(e,t){(await this.ensureLogger()).log(e,t)}a(e){this.log("a",e)}async clear(){(await this.ensureLogger()).clear()}async clearAlert(e){(await this.ensureLogger()).clearAlert(e)}async clearAlerts(){(await this.ensureLogger()).clearAlerts()}d(e){this.log("d",e)}e(e){this.log("e",e)}i(e){this.log("i",e)}v(e){this.log("v",e)}w(e){this.log("w",e)}}class d{getEndpoint(e){var t;if(!e)return this.pluginId;const n=null===(t=this.deviceManager.nativeIds.get(e))||void 0===t?void 0:t.id;if(!n)throw new Error("invalid nativeId "+e);return e?n:this.pluginId}async getUrlSafeIp(){const e=await this.api.getComponent("SCRYPTED_IP_ADDRESS");return(null===e||void 0===e?void 0:e.includes(":"))?`[${e}]`:e}async getAuthenticatedPath(e){return this.getPath(e)}async getInsecurePublicLocalEndpoint(e){return this.getLocalEndpoint(e,{insecure:!0,public:!0})}async getPublicCloudEndpoint(e){return this.getCloudEndpoint(e,{public:!0})}async getPublicLocalEndpoint(e){return this.getLocalEndpoint(e,{public:!0})}async getPublicPushEndpoint(t){const n=await this.mediaManager.createMediaObject(e.from(this.getEndpoint(t)),i["ScryptedMimeTypes"].PushEndpoint);return this.mediaManager.convertMediaObjectToUrl(n,i["ScryptedMimeTypes"].PushEndpoint)}async getPath(e,t){return`/endpoint/${this.getEndpoint(e)}/${(null===t||void 0===t?void 0:t.public)?"public/":""}`}async getLocalEndpoint(e,t){const n=(null===t||void 0===t?void 0:t.insecure)?"http":"https",i=await this.api.getComponent((null===t||void 0===t?void 0:t.insecure)?"SCRYPTED_INSECURE_PORT":"SCRYPTED_SECURE_PORT"),r=await this.getPath(e,t),a=`${n}://${await this.getUrlSafeIp()}:${i}${r}`;return a}async getCloudEndpoint(t,n){const r=await this.getLocalEndpoint(t,n),a=await this.mediaManager.createMediaObject(e.from(r),i["ScryptedMimeTypes"].LocalUrl);return this.mediaManager.convertMediaObjectToUrl(a,i["ScryptedMimeTypes"].LocalUrl)}async getCloudPushEndpoint(t){const n=await this.mediaManager.createMediaObject(e.from(this.getEndpoint(t)),i["ScryptedMimeTypes"].PushEndpoint);return this.mediaManager.convertMediaObjectToUrl(n,i["ScryptedMimeTypes"].PushEndpoint)}async setLocalAddresses(e){const t=await this.api.getComponent("addresses");return t.setLocalAddresses(e)}async getLocalAddresses(){const e=await this.api.getComponent("addresses");return await e.getLocalAddresses()}async setAccessControlAllowOrigin(e){const t=await this.deviceManager.systemManager.getComponent("setAccessControlAllowOrigin");return t(e)}}class u{constructor(e,t,n){this.deviceManager=e,this.id=t,this.setState=n}get(e,t,n){var i;return"id"===t?this.id:t===r["b"].PROPERTY_PROXY_PROPERTIES?{id:this.id}:"setState"===t?this.setState:null===(i=this.deviceManager.systemManager.state[this.id][t])||void 0===i?void 0:i.value}set(e,t,n,i){Object(o["a"])(t.toString(),n);Date.now();return this.deviceManager.systemManager.state[this.id][t]={value:n},this.setState(t.toString(),n),!0}}class p{constructor(e,t,n){this.systemManager=e,this.getDeviceConsole=t,this.getMixinConsole=n,this.nativeIds=new Map,this.deviceStorage=new Map,this.mixinStorage=new Map}async requestRestart(){return this.api.requestRestart()}getDeviceLogger(e){var t;return new l(this.api,e,(null===(t=this.getDeviceConsole)||void 0===t?void 0:t.call(this,e))||console)}getDeviceState(e){const t=new u(this,this.nativeIds.get(e).id,(t,n)=>this.api.setState(e,t,n));return new Proxy(t,t)}createDeviceState(e,t){const n=new u(this,e,t);return new Proxy(n,n)}getDeviceStorage(e){let t=this.deviceStorage.get(e);return t||(t=new v(this,e),this.deviceStorage.set(e,t)),t}getMixinStorage(e,t){let n=this.mixinStorage.get(t);n||(n=new Map,this.mixinStorage.set(t,n));let i=n.get(e);return i||(i=new v(this,t,`mixin:${e}:`),n.set(e,i)),i}pruneMixinStorage(){for(const e of this.nativeIds.keys()){const t=this.nativeIds.get(e).storage;for(const e of Object.keys(t)){if(!e.startsWith("mixin:"))continue;const[,n]=e.split(":");n&&!this.systemManager.state[n]&&delete t[e]}}}async onMixinEvent(e,t,n,i){return this.api.onMixinEvent(e,t,n,i)}getNativeIds(){return Array.from(this.nativeIds.keys())}async onDeviceDiscovered(e){return this.api.onDeviceDiscovered(e)}async onDeviceRemoved(e){return this.api.onDeviceRemoved(e)}async onDeviceEvent(e,t,n){return this.api.onDeviceEvent(e,t,n)}async onDevicesChanged(e){return this.api.onDevicesChanged(e)}}function m(e){return null===e?"null":void 0===e?"undefined":e.toString()}class v{constructor(e,t,n){return this.deviceManager=e,this.nativeId=t,this.prefix=n,this.deviceManager=e,this.api=e.api,this.nativeId=t,this.prefix||(this.prefix=""),new Proxy(this,v.indexedHandler)}get storage(){return this.deviceManager.nativeIds.get(this.nativeId).storage}get length(){return Object.keys(this.storage).filter(e=>e.startsWith(this.prefix)).length}clear(){if(this.prefix){const e=this.storage;Object.keys(this.storage).filter(e=>e.startsWith(this.prefix)).forEach(t=>delete e[t])}else this.deviceManager.nativeIds.get(this.nativeId).storage={};this.api.setStorage(this.nativeId,this.storage)}getItem(e){return this.storage[this.prefix+e]}key(e){return this.prefix?Object.keys(this.storage).filter(e=>e.startsWith(this.prefix))[e].substring(this.prefix.length):Object.keys(this.storage)[e]}removeItem(e){delete this.storage[this.prefix+e],this.api.setStorage(this.nativeId,this.storage)}setItem(e,t){e=m(e),t=m(t),this.storage[this.prefix+e]!==t&&(this.storage[this.prefix+e]=t,this.api.setStorage(this.nativeId,this.storage))}}function h(t,n){const{createMediaManager:o,getServicePort:l,getDeviceConsole:u,getMixinConsole:m}=n||{};t.constructorSerializerMap.get(e)||t.addSerializer(e,"Buffer",new a["a"]);const h={},g=new s["b"];let f;t.addSerializer(s["a"],s["a"].name,g);const y=new Promise(e=>f=e);return t.params.getRemote=async(e,a,y)=>{var b;g.WebSocket=Object(s["c"])((e,t)=>{const{url:n}=e;if(!n.startsWith("io://")&&!n.startsWith("ws://"))throw new Error("unsupported websocket");{const i=n.substring("xx://".length);h[i]=t,t.connect(void 0,{close:t=>e.close(t),send:t=>e.send(t)})}}),await(null===(b=null===n||void 0===n?void 0:n.onGetRemote)||void 0===b?void 0:b.call(n,e,a));const S=new c["a"],_=new p(S,u,m),x=new d,w=await e.getMediaManager();w||(t.params["createMediaManager"]=async()=>o(S,_));const C=w||await o(S,_);t.params["mediaManager"]=C,S.api=e,_.api=e;const P=_.getDeviceLogger(void 0);S.log=P;const k={systemManager:S,deviceManager:_,endpointManager:x,mediaManager:C,log:P,pluginHostAPI:e,pluginRemoteAPI:void 0,serverVersion:null===y||void 0===y?void 0:y.serverVersion};delete t.params.getRemote,x.api=e,x.deviceManager=_,x.mediaManager=C,x.pluginId=a;const D=new v(_,void 0),I={[r["b"].PROPERTY_JSON_DISABLE_SERIALIZATION]:!0,[r["b"].PROPERTY_PROXY_ONEWAY_METHODS]:["notify","updateDeviceState","setSystemState","ioEvent","setNativeId"],getServicePort:l,async createDeviceState(e,t){return _.createDeviceState(e,t)},async ioEvent(e,t,n){const i=h[e];if(i)switch(t){case"message":i.data(n);break;case"close":i.end(),delete h[e];break}},async setNativeId(e,t,n){null===e&&(e=void 0),t?_.nativeIds.set(null===e||void 0===e?void 0:e.toString(),{id:t,storage:n}):_.nativeIds.delete(e)},async updateDeviceState(e,t){t?(S.state[e]=t,S.events.notify(e,void 0,i["ScryptedInterface"].ScryptedDevice,void 0,t,{changed:!0})):(delete S.state[e],S.events.notify(void 0,void 0,i["ScryptedInterface"].ScryptedDevice,i["ScryptedInterfaceProperty"].id,e,{changed:!0}))},async notify(e,t,n,i,r,a){var s,o;if("number"===typeof t){const o=t,c=n;if(i){const t=null===(s=S.state)||void 0===s?void 0:s[e];if(!t)return void P.w("state not found for "+e);t[i]=r,S.events.notify(e,o,c,i,r.value,{changed:a})}else S.events.notify(e,o,c,i,r,{changed:a})}else{const i=t,r=n;if(i.property&&!i.mixinId){const t=null===(o=S.state)||void 0===o?void 0:o[e];if(!t)return void P.w("state not found for "+e);t[i.property]=r,S.events.notifyEventDetails(e,i,r.value)}else S.events.notifyEventDetails(e,i,r)}},async setSystemState(e){S.state=e,_.pruneMixinStorage(),f(k)},async loadZip(t,i,r){const a={__filename:void 0,deviceManager:_,systemManager:S,mediaManager:C,endpointManager:x,log:P,localStorage:D,pluginHostAPI:e,WebSocket:function(e){if("string"===typeof e)throw new Error("unsupported websocket");return e},pluginRuntimeAPI:k};a.pluginRuntimeAPI=k;try{return await n.onLoadZip(k,a,t,i,r)}catch(s){throw console.error("plugin start/fork failed",s),s}}};return k.pluginRemoteAPI=I,I},y}v.allowedMethods=["length","clear","getItem","setItem","key","removeItem"],v.indexedHandler={get(e,t){const n=t.toString();if(v.allowedMethods.includes(n)){const t=e[n];return"length"===n?t:t.bind(e)}return e.getItem(m(t))},set(e,t,n){return e.setItem(m(t),n),!0}}}).call(this,n("b639").Buffer)},"43b3":function(e,t,n){"use strict";var i,r,a=n("0644"),s=n.n(a),o={props:["value"],data(){return{lazyValue:this.createLazyValue()}},methods:{createLazyValue(){return s()(this.value)},createInputValue(){return this.lazyValue},onInput(){this.$emit("input",this.createInputValue())}},watch:{value(){this.lazyValue=this.createLazyValue()}}},c=o,l=n("2877"),d=Object(l["a"])(c,i,r,!1,null,null,null);t["a"]=d.exports},"469e":function(e,t,n){},"5b9e":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return r}));const i=65536;class r{constructor(e,t){this.dc=e,this.kill=t,this.maxWait=10}send(t){var n,r;(null===(n=this.pending)||void 0===n?void 0:n.length)+t.length>=i&&this.flush(),this.pending?this.pending=e.concat([this.pending,t]):this.pending=t,clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.flush(),this.maxWait),(null===(r=this.pending)||void 0===r?void 0:r.length)+t.length>=i&&this.flush()}flush(){try{let e=0;while(e<this.pending.length)this.dc.send(this.pending.slice(e,e+i)),e+=i;this.pending=void 0,clearTimeout(this.timeout),this.timeout=void 0}catch(e){this.kill(e)}}}}).call(this,n("b639").Buffer)},6810:function(e,t,n){"use strict";t["a"]="export * from '../types/gen/index';\nimport type { DeviceState, EventListenerRegister, Logger, MediaObject, ScryptedInterface, ScryptedNativeId, ScryptedStatic } from '../types/gen/index';\nimport { DeviceBase } from '../types/gen/index';\n/**\n * @category Core Reference\n */\nexport declare class ScryptedDeviceBase extends DeviceBase {\n    readonly nativeId?: string;\n    private _storage;\n    private _log;\n    private _console;\n    private _deviceState;\n    constructor(nativeId?: string);\n    get storage(): Storage;\n    get log(): Logger;\n    get console(): Console;\n    createMediaObject(data: any, mimeType: string): Promise<MediaObject & {\n        sourceId: string;\n    }>;\n    getMediaObjectConsole(mediaObject: MediaObject): Console;\n    _lazyLoadDeviceState(): void;\n    /**\n     * Fire an event for this device.\n     */\n    onDeviceEvent(eventInterface: string, eventData: any): Promise<void>;\n}\n/**\n * @category Mixin Reference\n */\nexport interface MixinDeviceOptions<T> {\n    mixinDevice: T;\n    mixinProviderNativeId: ScryptedNativeId;\n    mixinDeviceInterfaces: ScryptedInterface[];\n    mixinStorageSuffix?: string;\n    mixinDeviceState: DeviceState;\n}\n/**\n * @category Mixin Reference\n */\nexport declare class MixinDeviceBase<T> extends DeviceBase implements DeviceState {\n    mixinProviderNativeId: ScryptedNativeId;\n    mixinDevice: T;\n    mixinDeviceInterfaces: ScryptedInterface[];\n    private _storage;\n    private mixinStorageSuffix;\n    private _log;\n    private _console;\n    private _deviceState;\n    private _listeners;\n    constructor(options: MixinDeviceOptions<T>);\n    get storage(): Storage;\n    get console(): Console;\n    createMediaObject(data: any, mimeType: string): Promise<MediaObject & {\n        sourceId: string;\n    }>;\n    getMediaObjectConsole(mediaObject: MediaObject): Console;\n    /**\n     * Fire an event for this device.\n     */\n    onDeviceEvent(eventInterface: string, eventData: any): Promise<void>;\n    _lazyLoadDeviceState(): void;\n    manageListener(listener: EventListenerRegister): void;\n    release(): void;\n}\ndeclare let sdk: ScryptedStatic;\nexport default sdk;\n"},"6a8b":function(e,t,n){"use strict";n("469e")},"6e0d":function(e,t,n){},"72a3":function(e,t,n){"use strict";(function(e){var i=n("fcf3"),r=n("47d0"),a=n("94ac"),s=n.n(a),o=n("caf7");t["a"]={props:["deviceId"],socket:null,buffer:[],term:null,watch:{expanded(e,t){this.expanded?this.term.resize(this.term.cols,2.5*this.term.rows):this.term.resize(this.term.cols,this.term.rows/2.5)}},data(){return{expanded:!1}},methods:{async clear(){this.term.clear(),this.buffer=[];const e=await this.$scrypted.systemManager.getComponent("plugins");e.clearConsole(this.deviceId)},reconnect(t){this.buffer=[];const n="/endpoint/@scrypted/core",i={path:`${n}/engine.io/console/${this.deviceId}`},r=`${window.location.protocol}//${window.location.host}`;this.socket=s()(r,i),this.socket.on("message",n=>{this.buffer.push(e.from(n)),t.write(new Uint8Array(n))}),this.socket.on("close",async()=>{await Object(o["a"])(1e3),this.reconnect(t)})},copy(){this.$copyText(e.concat(this.buffer).toString())}},mounted(){const e=new i["Terminal"]({theme:this.$vuetify.theme.dark?void 0:{foreground:"black",background:"white",cursor:"black"},convertEol:!0,disableStdin:!0,scrollback:1e4}),t=new r["FitAddon"];e.loadAddon(t),e.open(this.$refs.terminal),t.fit(),this.term=e,this.reconnect(e)},destroyed(){var e;null===(e=this.socket)||void 0===e||e.close()}}}).call(this,n("b639").Buffer)},"7f8e":function(e,t,n){"use strict";n("cbc1")},8208:function(e,t,n){},"87c4":function(e,t,n){"use strict";n.r(t),t["default"]="import sdk, {ScryptedPlugin} from '@scrypted/sdk'; // SCRYPTED_FILTER_EXAMPLE_LINE\nconst { systemManager } = sdk; // SCRYPTED_FILTER_EXAMPLE_LINE\n\ndeclare const snapshot: { [pluginId: string]: string }; // SCRYPTED_FILTER_EXAMPLE_LINE\n\nconst plugins = await systemManager.getComponent('plugins');\nconst forceReinstall = false;\n\ndelete snapshot['@scrypted/core'];\n\nfor (const pluginId of Object.keys(snapshot)) {\n    try {\n        const id = systemManager.getDeviceByName(pluginId).id;\n        const pluginVersion = `${pluginId}@${snapshot[pluginId]}`;\n        if (id) {\n            const plugin = systemManager.getDeviceById<ScryptedPlugin>(id);\n            if (plugin?.info?.version === snapshot[pluginId]) {\n                console.log(`${pluginVersion} matches. Skipping installation.`);\n                continue;\n            }\n            console.log('\\x1b[33m%s\\x1b[0m', `${pluginVersion} version mismatch. Installing...`);\n        }\n        else {\n            console.log('\\x1b[33m%s\\x1b[0m', `${pluginVersion} not installed. Installing..`);\n        }\n\n        await plugins.installNpm(pluginId, snapshot[pluginId]);\n        console.log('\\x1b[32m%s\\x1b[0m', `${pluginVersion} installed.`);\n\n    }\n    catch (e) {\n        console.error('\\x1b[31m%s\\x1b[0m', 'Error installing plugin!', pluginId, e.message);\n    }\n}\n"},"909a":function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}));var i=n("3a54");n("aecd");function r(t){let n;const{sendMessageBuffer:r,sendMessageFinish:a}=t;let s=!0;const o=()=>{s=!1,n.kill("connection closed.")},c=(e,t,n)=>{if(!s)return void(null===t||void 0===t||t(new Error("peer disconnected")));const i=null===n||void 0===n?void 0:n.buffers;if(i)for(const a of i)r(a);a(e)};let l={};const d=t=>{n=t,n.addSerializer(e,"Buffer",new i["b"]),n.constructorSerializerMap.set(Uint8Array,"Buffer")},u=e=>{l=l||{buffers:[]};const t=l.buffers;t.push(e)},p=e=>{const t=l;l=void 0,n.handleMessage(e,t)},m=e=>{n.kill(e)};return{kill:m,sendMessage:c,setupRpcPeer:d,onMessageBuffer:u,onMessageFinish:p,onDisconnected:o}}function a(t){const n=(n,i)=>{const r=e.alloc(5);r.writeUInt32BE(i.length+1,0),r.writeUInt8(n,4),t.write(e.concat([r,i]))},i=e=>t=>n(e,t),a=i(1),s=i(0),o=r({sendMessageBuffer:a,sendMessageFinish:t=>s(e.from(JSON.stringify(t)))});let c,l;const d=e=>{if(!l||l.length<e)return;const t=l.slice(0,e);return l=l.slice(e),l.length||(l=void 0),t},u=t=>{l=l?e.concat([l,t]):t;while(1){if(!c&&(c=d(5),!c))return;const e=c.readUInt32BE(0),t=c.readUInt8(4),i=d(e-1);if(!i)return;if(c=void 0,0===t)try{const e=JSON.parse(i.toString());o.onMessageFinish(e)}catch(n){o.kill("message parse failure "+n.message)}else o.onMessageBuffer(i)}};return{onData:u,setupRpcPeer:o.setupRpcPeer,sendMessage:o.sendMessage,onDisconnected:o.onDisconnected}}}).call(this,n("b639").Buffer)},"9d4f":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));const i=/^(\d{1,3}\.){3,3}\d{1,3}$/,r=/^(::)?(((\d{1,3}\.){3}(\d{1,3}){1})?([0-9a-f]){0,4}:{0,2}){1,8}(::)?$/i;function a(e){return i.test(e)}function s(e){return r.test(e)}function o(e){return a(e)||s(e)}},a419:function(e,t,n){"use strict";(function(e){var i=n("ce2e");t["a"]={mixins:[i["a"]],data(){return{img:null,lastDetection:null}},mounted(){},computed:{svgWidth(){var e,t;return(null===(e=this.lastDetection)||void 0===e||null===(t=e.inputDimensions)||void 0===t?void 0:t[0])||1920},svgHeight(){var e,t;return(null===(e=this.lastDetection)||void 0===e||null===(t=e.inputDimensions)||void 0===t?void 0:t[1])||1080},svgContents(){if(!this.lastDetection)return"";let e="";for(const t of this.lastDetection.detections||[]){if(!t.boundingBox)continue;const n=this.svgWidth/1080,i=6*n,r="red",a=t.boundingBox[0],s=t.boundingBox[1],o=t.boundingBox[2],c=t.boundingBox[3];let l="",d=0;t.score&&"motion"!==t.className&&(l+=`<tspan x='${a}' dy='${d}em'>${Math.round(100*t.score)/100}</tspan>`,d-=1.2);const u=t.className+(t.id?": "+t.id:"");l+=`<tspan x='${a}' dy='${d}em'>${u}</tspan>`;const p=30*n,m=`<rect x="${a}" y="${s}" width="${o}" height="${c}" stroke="${r}" stroke-width="${i}" fill="none" />\n        <text x="${a}" y="${s-5}" font-size="${p}" dx="0.05em" dy="0.05em" fill="black">${l}</text>\n        <text x="${a}" y="${s-5}" font-size="${p}" fill="white">${l}</text>\n      `;e+=m}return e}},methods:{async onDrop(t){t.preventDefault();const n=t.dataTransfer.files[0];this.img=URL.createObjectURL(n);const i=e.from(await n.arrayBuffer()),r=this.$scrypted.mediaManager,a=await r.createMediaObject(i,"image/*"),s=await this.rpc().detectObjects(a);console.log(s),this.lastDetection=s},allowDrop(e){e.preventDefault()}}}}).call(this,n("b639").Buffer)},a84e:function(e,t,n){"use strict";n("252f3")},a936:function(e,t,n){"use strict";(function(e){n.d(t,"c",(function(){return y})),n.d(t,"a",(function(){return b})),n.d(t,"d",(function(){return _})),n.d(t,"b",(function(){return x}));var i=n("88ba"),r=n.n(i),a=n("542c"),s=n("e1df"),o=n("2ce1"),c=n("b8ca"),l=n("5b9e"),d=n("d798"),u=n("42208"),p=n("aecd"),m=n("909a"),v=n("f5d3"),h=n("9d4f");function g(e,t){return new Promise((n,i)=>{const r=e=>{s(),i(e)},a=(...e)=>{s(),n(e)},s=()=>{e.removeListener("error",r),e.removeListener(t,a)};e.once("error",r),e.once(t,a)})}function f(){var e,t;return(null===(e=globalThis.matchMedia)||void 0===e?void 0:e.call(globalThis,"(display-mode: standalone)").matches)||(null===(t=globalThis.navigator)||void 0===t?void 0:t.userAgent.includes("InstalledApp"))}async function y(e){let{baseUrl:t,username:n,password:i,change_password:a,maxAge:s}=e;!s&&f()&&(s=31536e6);const o=(t||"")+"/login",c=await r.a.post(o,{username:n,password:i,change_password:a,maxAge:s},Object.assign({withCredentials:!0},e.axiosConfig));if(200!==c.status)throw new Error("status "+c.status);const l=c.data.addresses||[],d="true"===c.headers["x-scrypted-cloud"],u=c.headers["x-scrypted-direct-address"];return{error:c.data.error,authorization:c.data.authorization,queryToken:c.data.queryToken,token:c.data.token,addresses:l,scryptedCloud:d,directAddress:u}}async function b(e){let{baseUrl:t}=e||{};const n=(t||"")+"/login",i=await r.a.get(n,Object.assign({withCredentials:!0},null===e||void 0===e?void 0:e.axiosConfig)),a="true"===i.headers["x-scrypted-cloud"],s=i.headers["x-scrypted-direct-address"];return{redirect:i.data.redirect,username:i.data.username,expiration:i.data.expiration,hasLogin:!!i.data.hasLogin,error:i.data.error,authorization:i.data.authorization,queryToken:i.data.queryToken,addresses:i.data.addresses,scryptedCloud:a,directAddress:s}}class S extends Error{constructor(e){super(e.error),this.result=e}}function _(e){let{baseUrl:t,redirect:n}=e||{};if(n=n||"/endpoint/@scrypted/core/public/",t){const e=new URL(n,t);e.searchParams.set("redirect_uri",window.location.href),n=e.toString()}else n=`${n}?redirect_uri=${encodeURIComponent(window.location.href)}`;const i=n;console.log("redirect_uri",i),globalThis.location.href=i}async function x(t){var n,i;const r=Date.now();let f,_,{baseUrl:x,pluginId:w,clientName:C,username:P,password:k}=t;const D={};let I,T,O,V;if(console.log("@scrypted/client",v.version),P&&k){const e=await y(t);e.authorization&&(D["Authorization"]=e.authorization),I=e.addresses,T=e.scryptedCloud,f=e.authorization,_=e.queryToken,console.log("login result",Date.now()-r,e)}else{const e=await b({baseUrl:x});if(e.error||e.redirect)throw new S(e);I=e.addresses,T=e.scryptedCloud,O=e.directAddress,P=e.username,f=e.authorization,_=e.queryToken,console.log("login checked",Date.now()-r,e)}const M="/endpoint/"+w,R={path:M+"/engine.io/api",withCredentials:!0,extraHeaders:D,rejectUnauthorized:!1,transports:null===t||void 0===t?void 0:t.transports},E=x||`${globalThis.location.protocol}//${globalThis.location.host}`,L=new s["a"],z=null===(n=globalThis.navigator)||void 0===n?void 0:n.userAgent.includes("Chrome"),A=[],j=!z;(T&&void 0===t.local&&j||t.local)&&I&&A.push(...I);const $=O&&(!z||!Object(h["a"])(O));(T&&void 0===t.direct&&$||t.direct)&&O&&A.push(O);const B=!!A.length,N=!!globalThis.RTCPeerConnection&&T&&void 0===t.webrtc||t.webrtc;console.log({tryLocalAddressess:B,tryWebrtc:N});const U=Object.assign(Object.assign({},R),{extraHeaders:Object.assign({},R.extraHeaders)});(i=U.extraHeaders)["Authorization"]||(i["Authorization"]=f);let F=[];const H=[];if(B)for(const e of A){console.log("trying",e);const t=new a["a"](e,U);F.push(t),H.push((async()=>(await g(t,"open"),{connectionType:"http-direct",ready:t,address:e}))())}if(N){console.log("trying webrtc");const n={path:"/endpoint/@scrypted/webrtc/engine.io/",withCredentials:!0,extraHeaders:D,rejectUnauthorized:!1,transports:null===t||void 0===t?void 0:t.transports},i=new a["a"](E,n);F.push(i),H.push((async()=>{await g(i,"open");const t="connectionManagement-"+Math.random(),n="updateSessionId-"+Math.random();i.send(JSON.stringify({pluginId:w,updateSessionId:n,connectionManagementId:t}));const a=new s["a"],o=new c["a"],d=[];o.onPeerConnection=async e=>{e.ondatachannel=e=>{e.channel.onmessage=e=>d.push(e),e.channel.binaryType="arraybuffer",a.resolve(e.channel)}};const u=o.pcDeferred.promise,v=Object(m["b"])({sendMessageBuffer:e=>i.send(e),sendMessageFinish:e=>i.send(JSON.stringify(e))}),h=new p["b"](C||"webrtc-upgrade","api",(e,t,n)=>{try{v.sendMessage(e,t,n)}catch(i){null===t||void 0===t||t(i)}});i.on("message",t=>{t.constructor===e||t.constructor===ArrayBuffer?v.onMessageBuffer(e.from(t)):v.onMessageFinish(JSON.parse(t))}),v.setupRpcPeer(h);new Promise((e,t)=>{i.on("close",()=>t(new Error("closed")))});h.params["session"]=o;const f=await u;console.log("peer connection received"),await Object(c["c"])(f),console.log("waiting for data channel");const y=await a.promise;console.log("datachannel received",Date.now()-r);const b=new l["a"](y,e=>{console.error("datachannel send error",e),_.kill("datachannel send error")}),S=Object(m["a"])({write:e=>b.send(e)});while(d.length){const e=d.shift();y.dispatchEvent(e)}const _=new p["b"]("webrtc-client","api",(e,t,n)=>{try{S.sendMessage(e,t,n)}catch(i){null===t||void 0===t||t(i),f.close()}});return S.setupRpcPeer(_),_.params["connectionManagementId"]=t,_.params["updateSessionId"]=n,_.params["browserSignalingSession"]=o,Object(c["d"])(f).then(()=>i.close()),i.on("close",()=>{console.log("datachannel upgrade cancelled/closed"),f.close()}),await new Promise(t=>{let n=[];y.onmessage=i=>{n.push(e.from(i.data)),t(void 0),L.promise.finally(()=>{if(n){for(const t of n)S.onData(e.from(t));n=void 0}y.onmessage=t=>S.onData(e.from(t.data))})}}),{ready:i,connectionType:"webrtc",rpcPeer:_}})())}const q=[...H];H.push((async()=>{const e=N?3e3:B?1e3:0;if(console.log("waiting",e),e)try{const t=Promise.any(q);return await Object(o["a"])(e,t),void console.log("found direct connection, aborting scrypted cloud connection")}catch(n){}const t=new a["a"](E,R);return F.push(t),await g(t,"open"),{ready:t,connectionType:"http"}})());const G=Promise.any(H);let{ready:W,connectionType:Y,address:J,rpcPeer:K}=await G;console.log("connected",Y,J),V=W,F=F.filter(e=>e!==W),F.forEach(e=>{try{e.close()}catch(t){}});try{if(!K){const t=Object(m["b"])({sendMessageBuffer:e=>V.send(e),sendMessageFinish:e=>V.send(JSON.stringify(e))});K=new p["b"](C||"engine.io-client","api",(e,n,i)=>{try{t.sendMessage(e,n,i)}catch(r){null===n||void 0===n||n(r)}}),V.on("message",n=>{n.constructor===e||n.constructor===ArrayBuffer?t.onMessageBuffer(e.from(n)):t.onMessageFinish(JSON.parse(n))}),t.setupRpcPeer(K)}setTimeout(()=>L.resolve(void 0),0);const t=await Object(u["a"])(K,void 0),{serverVersion:n,systemManager:i,deviceManager:a,endpointManager:s,mediaManager:o}=t;console.log("api attached",Date.now()-r),o.createMediaObject=async(e,t,n)=>new d["a"](t,e,n);const{browserSignalingSession:c,connectionManagementId:l,updateSessionId:v}=K.params;v&&c&&i.getComponent("plugins").then(async e=>{const t=await e.getHostParam("@scrypted/webrtc",v);t&&(await t(c),console.log("signaling channel upgraded."),V.removeAllListeners(),V.close())});const[h,g]=await Promise.all([(async()=>{let e="unknown";try{const t=await i.getComponent("info");e=await t.getVersion()}catch(t){}return e})(),(async()=>{let e;if(l)try{const t=await i.getComponent("plugins");return e=await t.getHostParam("@scrypted/webrtc",l),e}catch(t){}})()]);console.log("api initialized",Date.now()-r),console.log("api queried, version:",h);const y=Object.keys(i.getSystemState()).map(e=>i.getDeviceById(e)).find(e=>"@scrypted/core"===e.pluginId&&e.nativeId==="user:"+P),b={userId:null===y||void 0===y?void 0:y.id,serverVersion:n,username:P,pluginRemoteAPI:void 0,address:J,connectionType:Y,version:h,systemManager:i,deviceManager:a,endpointManager:s,mediaManager:o,disconnect(){K.kill("disconnect requested")},pluginHostAPI:void 0,rtcConnectionManagement:g,browserSignalingSession:c,authorization:f,queryToken:_,rpcPeer:K};return V.on("close",()=>{K.kill("socket closed")}),K.killed.finally(()=>{var e;V.close(),null===(e=b.onClose)||void 0===e||e.call(b)}),b}catch(Z){throw V.close(),Z}}}).call(this,n("b639").Buffer)},aadf:function(e,t,n){"use strict";n("f870")},ae36:function(e,t,n){},aeb9:function(e,t,n){"use strict";n("ae36")},aecd:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(global,module){function startPeriodicGarbageCollection(){let e;global.gc||console.warn("rpc peer garbage collection not available: global.gc is not exposed.");try{e=global}catch(n){}let t=0;return setInterval(()=>{var n;const i=Date.now(),r=i-t,a=RpcPeer.remotesCreated;RpcPeer.remotesCreated=0;const s=RpcPeer.remotesCollected;RpcPeer.remotesCollected=0,(a||s||r>3e5)&&(t=i,null===(n=null===e||void 0===e?void 0:e.gc)||void 0===n||n.call(e))},1e4)}__webpack_require__.d(__webpack_exports__,"a",(function(){return RPCResultError})),__webpack_require__.d(__webpack_exports__,"b",(function(){return RpcPeer}));class RpcProxy{constructor(e,t,n,i,r){this.peer=e,this.entry=t,this.constructorName=n,this.proxyProps=i,this.proxyOneWayMethods=r}toPrimitive(){const e=this.peer;return`RpcProxy-${e.selfName}:${e.peerName}: ${this.constructorName}`}get(e,t,n){var i,r,a,s,o;if(t===Symbol.asyncIterator){if(!(null===(i=this.proxyProps)||void 0===i?void 0:i[Symbol.asyncIterator.toString()]))return;return()=>new Proxy(()=>{},this)}if(RpcProxy.iteratorMethods.has(null===t||void 0===t?void 0:t.toString())){const e=null===(a=null===(r=this.proxyProps)||void 0===r?void 0:r[Symbol.asyncIterator.toString()])||void 0===a?void 0:a[t];if(e)return new Proxy(()=>e,this)}if(t===RpcPeer.PROPERTY_PROXY_ID)return this.entry.id;if("__proxy_constructor"===t)return this.constructorName;if("__proxy_peer"===t)return this.peer;if(t===RpcPeer.PROPERTY_PROXY_PROPERTIES)return this.proxyProps;if(t===RpcPeer.PROPERTY_PROXY_ONEWAY_METHODS)return this.proxyOneWayMethods;if(t===RpcPeer.PROPERTY_JSON_DISABLE_SERIALIZATION||t===RpcPeer.PROPERTY_JSON_COPY_SERIALIZE_CHILDREN)return;if("then"===t)return;if("constructor"===t)return;if(void 0!==(null===(s=this.proxyProps)||void 0===s?void 0:s[t]))return null===(o=this.proxyProps)||void 0===o?void 0:o[t];const c=RpcPeer.handleFunctionInvocations(this,e,t,n);return c||new Proxy(()=>t,this)}set(e,t,n,i){return t===RpcPeer.finalizerIdSymbol?this.entry.finalizerId=n:(this.proxyProps||(this.proxyProps={}),this.proxyProps[t]=n),!0}apply(e,t,n){var i,r,a;const s=e()||null,o=null===(r=null===(i=this.proxyOneWayMethods)||void 0===i?void 0:i.includes)||void 0===r?void 0:r.call(i,s);if(Object.isFrozen(this.peer.pendingResults))return o?Promise.resolve():Promise.reject(new RPCResultError(this.peer,"RpcPeer has been killed (apply) "+e()));const c=[],l={};for(const m of n||[])c.push(this.peer.serialize(m,l));const d={type:"apply",id:void 0,proxyId:this.entry.id,args:c,method:s};if(o)return d.oneway=!0,null===s&&delete d.method,this.peer.send(d,void 0,l),Promise.resolve();const u=this.peer.createPendingResult((e,t)=>{d.id=e,this.peer.send(d,t,l)}),p=null===(a=this.proxyProps)||void 0===a?void 0:a[Symbol.asyncIterator.toString()];return!p||s!==p.next&&s!==p.return?u:u.then(e=>s===p.return?{done:!0,value:void 0}:{value:e,done:!1}).catch(e=>{if("StopAsyncIteration"===e.name)return{done:!0,value:void 0};throw e})}}RpcProxy.iteratorMethods=new Set(["next","throw","return"]);class RPCResultError extends Error{constructor(e,t,n,i){super(`${t}\n${e.selfName}:${e.peerName}`),this.cause=n,(null===i||void 0===i?void 0:i.name)&&(this.name=null===i||void 0===i?void 0:i.name),(null===i||void 0===i?void 0:i.stack)&&(this.stack=`${(null===n||void 0===n?void 0:n.stack)||i.stack}\n${e.peerName}:${e.selfName}`)}}function compileFunction(code,params,options){params=params||[];const f=`(function(${params.join(",")}) {;${code};})`;return eval(f)}try{const e=FinalizationRegistry}catch(e){window.WeakRef=class{constructor(e){this.target=e}deref(){return this.target}},window.FinalizationRegistry=class{register(){}}}class RpcPeer{constructor(e,t,n){this.selfName=e,this.peerName=t,this.send=n,this.idCounter=1,this.params={},this.pendingResults={},this.proxyCounter=1,this.localProxied=new Map,this.localProxyMap=new Map,this.remoteWeakProxies={},this.finalizers=new FinalizationRegistry(e=>this.finalize(e)),this.nameDeserializerMap=new Map,this.onProxyTypeSerialization=new Map,this.constructorSerializerMap=new Map,this.transportSafeArgumentTypes=RpcPeer.getDefaultTransportSafeArgumentTypes(),this.tags={},this.killed=new Promise((e,t)=>{this.killedDeferred={resolve:e,reject:t}}).catch(e=>e.message||"Unknown Error")}static isRpcProxy(e){return!!(null===e||void 0===e?void 0:e[RpcPeer.PROPERTY_PROXY_ID])}static getDefaultTransportSafeArgumentTypes(){const e=new Set;return e.add(Number.name),e.add(String.name),e.add(Object.name),e.add(Boolean.name),e.add(Array.name),e}static handleFunctionInvocations(e,t,n,i){return"apply"===n?(n,i)=>e.apply(t,e,i):"call"===n?(n,...i)=>e.apply(t,e,i):"toString"===n||n===Symbol.toPrimitive?(t,...n)=>e.toPrimitive():void 0}static getIteratorNext(e){var t;if(!e[Symbol.asyncIterator])return;const n=null===(t=e[this.PROPERTY_PROXY_PROPERTIES])||void 0===t?void 0:t[Symbol.asyncIterator.toString()];return(null===n||void 0===n?void 0:n.next)||"next"}static prepareProxyProperties(e){let t=null===e||void 0===e?void 0:e[RpcPeer.PROPERTY_PROXY_PROPERTIES];return e[Symbol.asyncIterator]?(t||(t={}),t[Symbol.asyncIterator.toString()]||(t[Symbol.asyncIterator.toString()]={next:"next",throw:"throw",return:"return"}),t):t}static isTransportSafe(e){var t;return!e||!e[RpcPeer.PROPERTY_JSON_DISABLE_SERIALIZATION]&&this.getDefaultTransportSafeArgumentTypes().has(null===(t=e.constructor)||void 0===t?void 0:t.name)}isTransportSafe(e){var t;return!e||!e[RpcPeer.PROPERTY_JSON_DISABLE_SERIALIZATION]&&this.transportSafeArgumentTypes.has(null===(t=e.constructor)||void 0===t?void 0:t.name)}createPendingResult(e){if(Object.isFrozen(this.pendingResults))return Promise.reject(new RPCResultError(this,"RpcPeer has been killed (createPendingResult)"));const t=new Promise((t,n)=>{const i=(this.idCounter++).toString();this.pendingResults[i]={resolve:t,reject:n},e(i,e=>n(new RPCResultError(this,e.message,e)))});return t.catch(()=>{}),t}kill(e){if(Object.isFrozen(this.pendingResults))return;const t=new RPCResultError(this,e||"peer was killed");this.killedDeferred.reject(t);for(const n of Object.values(this.pendingResults))n.reject(t);this.pendingResults=Object.freeze({}),this.params=Object.freeze({}),this.remoteWeakProxies=Object.freeze({}),this.localProxyMap.clear(),this.localProxied.clear()}addSerializer(e,t,n){this.nameDeserializerMap.set(t,n),this.constructorSerializerMap.set(e,t)}finalize(e){RpcPeer.remotesCollected++,delete this.remoteWeakProxies[e.id];const t={__local_proxy_id:e.id,__local_proxy_finalizer_id:e.finalizerId,type:"finalize"};this.send(t)}async getParam(e){return this.createPendingResult((t,n)=>{const i={id:t,type:"param",param:e};this.send(i,n)})}evalLocal(t,n,i){const r=Object.assign({},this.params,i);let a;try{a=module["require"]("vm").compileFunction}catch(e){a=compileFunction}const s=a(t,Object.keys(r),{filename:n}),o=s(...Object.values(r));return o}createErrorResult(e,t){e.result=this.serializeError(t),e.throw=!0,e.message=t.message||"no message",e.stack=t.stack||"no stack"}deserialize(e,t){var n;if(!e)return e;const i=e[RpcPeer.PROPERTY_JSON_COPY_SERIALIZE_CHILDREN];if(i){const n={};for(const[i,r]of Object.entries(e))n[i]=this.deserialize(r,t);return n}const{__remote_proxy_id:r,__remote_proxy_finalizer_id:a,__local_proxy_id:s,__remote_constructor_name:o,__serialized_value:c,__remote_proxy_props:l,__remote_proxy_oneway_methods:d}=e;if(o===RpcPeer.RPC_RESULT_ERROR_NAME)return this.deserializeError(c);if(r){let e=null===(n=this.remoteWeakProxies[r])||void 0===n?void 0:n.deref();e||(e=this.newProxy(r,o,l,d)),e[RpcPeer.finalizerIdSymbol]=a;const i=this.nameDeserializerMap.get(o);return i?i.deserialize(e,t):e}if(s){const e=this.localProxyMap.get(s);if(!e)throw new RPCResultError(this,"invalid local proxy id "+s);return e}const u=this.nameDeserializerMap.get(o);return u?u.deserialize(c,t):e}deserializeError(e){const{name:t,stack:n,message:i}=e;return new RPCResultError(this,i,void 0,{name:t,stack:n})}serializeError(e){const t={stack:e.stack||"[no stack]",name:e.name||"[no name]",message:e.message||"[no message]"};return{__remote_constructor_name:RpcPeer.RPC_RESULT_ERROR_NAME,__remote_proxy_id:void 0,__remote_proxy_finalizer_id:void 0,__remote_proxy_oneway_methods:void 0,__remote_proxy_props:void 0,__serialized_value:t}}serialize(e,t){var n,i,r;if(!0===(null===e||void 0===e?void 0:e[RpcPeer.PROPERTY_JSON_COPY_SERIALIZE_CHILDREN])){const n={};for(const[i,r]of Object.entries(e))n[i]=this.serialize(r,t);return n}if(this.isTransportSafe(e))return e;let a=e.__proxy_constructor||(null===(i=null===(n=e.constructor)||void 0===n?void 0:n.name)||void 0===i?void 0:i.toString());if(e instanceof Error)return this.serializeError(e);const s=this.constructorSerializerMap.get(e.constructor);if(s){a=s;const n=this.nameDeserializerMap.get(s);if(!n)throw new Error("serializer not found for "+s);const i=n.serialize(e,t),r={__remote_proxy_id:void 0,__remote_proxy_finalizer_id:void 0,__remote_constructor_name:a,__remote_proxy_props:RpcPeer.prepareProxyProperties(e),__remote_proxy_oneway_methods:null===e||void 0===e?void 0:e[RpcPeer.PROPERTY_PROXY_ONEWAY_METHODS],__serialized_value:i};return r}let o=this.localProxied.get(e);if(o){const t=(this.proxyCounter++).toString();o.finalizerId=t;const n={__remote_proxy_id:o.id,__remote_proxy_finalizer_id:t,__remote_constructor_name:a,__remote_proxy_props:RpcPeer.prepareProxyProperties(e),__remote_proxy_oneway_methods:null===e||void 0===e?void 0:e[RpcPeer.PROPERTY_PROXY_ONEWAY_METHODS]};return n}const{__proxy_id:c,__proxy_peer:l}=e;if(c&&l===this){const e={__local_proxy_id:c};return e}null===(r=this.onProxyTypeSerialization.get(a))||void 0===r||r(e);const d=(this.proxyCounter++).toString();o={id:d,finalizerId:d},this.localProxied.set(e,o),this.localProxyMap.set(d,e);const u=this.onProxySerialization?this.onProxySerialization(e,d):RpcPeer.prepareProxyProperties(e),p={__remote_proxy_id:d,__remote_proxy_finalizer_id:d,__remote_constructor_name:a,__remote_proxy_props:u,__remote_proxy_oneway_methods:null===e||void 0===e?void 0:e[RpcPeer.PROPERTY_PROXY_ONEWAY_METHODS]};return p}newProxy(e,t,n,i){RpcPeer.remotesCreated++;const r={id:e,finalizerId:void 0},a=new RpcProxy(this,r,t,n,i),s="Function"===t||"AsyncFunction"===t?function(){}:a,o=new Proxy(s,a),c=new WeakRef(o);return this.remoteWeakProxies[e]=c,this.finalizers.register(a,r),o}handleMessage(e,t){try{RpcPeer.activeRpcPeer=this,this.handleMessageInternal(e,t)}finally{RpcPeer.activeRpcPeer=void 0}}async handleMessageInternal(t,n){var i;if(!Object.isFrozen(this.pendingResults))try{switch(t.type){case"param":{const n=t,i={};let r;try{r={type:"result",id:n.id,result:this.serialize(this.params[n.param],i)}}catch(e){this.createErrorResult(r,e)}this.send(r,void 0,i);break}case"apply":{const r=t,a={type:"result",id:r.id||""},s={};try{const e=this.localProxyMap.get(r.proxyId);if(!e)throw new Error(`proxy id ${r.proxyId} not found`);const t=[];for(const i of r.args||[])t.push(this.deserialize(i,n));let o;if(r.method){const n=e[r.method];if(!n)throw new Error(`target ${null===(i=null===e||void 0===e?void 0:e.constructor)||void 0===i?void 0:i.name} does not have method ${r.method}`);if(o=await e[r.method](...t),RpcPeer.getIteratorNext(e)===r.method){if(o.done){const e={name:"StopAsyncIteration",message:void 0};throw e}o=o.value}}else o=await e(...t);a.result=this.serialize(o,s)}catch(e){this.createErrorResult(a,e)}r.oneway||this.send(a,void 0,s);break}case"result":{const e=t,i=this.pendingResults[e.id];if(delete this.pendingResults[e.id],!i)throw new Error("unknown result "+e.id);if((e.message||e.stack)&&!e.throw){const t=new RPCResultError(this,e.message||"no message",void 0,{name:e.result,stack:e.stack});return void i.reject(t)}const r=this.deserialize(e.result,n);e.throw?i.reject(r):i.resolve(r);break}case"finalize":{const e=t,n=this.localProxyMap.get(e.__local_proxy_id);if(n){const t=this.localProxied.get(n);if(e.__local_proxy_finalizer_id&&e.__local_proxy_finalizer_id!==(null===t||void 0===t?void 0:t.finalizerId))break;this.localProxyMap.delete(e.__local_proxy_id),this.localProxied.delete(n)}break}default:throw new Error("unknown rpc message type "+t.type)}}catch(e){return void console.error("unhandled rpc error",this.peerName,e)}}}function getEvalSource(){return`\n    (() => {\n        ${RpcProxy}\n\n        ${RpcPeer}\n\n        ${startPeriodicGarbageCollection}\n    \n        return {\n            startPeriodicGarbageCollection,\n            RpcPeer,\n            RpcProxy,\n        };\n    })();\n    `}RpcPeer.finalizerIdSymbol=Symbol("rpcFinalizerId"),RpcPeer.remotesCollected=0,RpcPeer.remotesCreated=0,RpcPeer.RPC_RESULT_ERROR_NAME="RPCResultError",RpcPeer.PROPERTY_PROXY_ID="__proxy_id",RpcPeer.PROPERTY_PROXY_ONEWAY_METHODS="__proxy_oneway_methods",RpcPeer.PROPERTY_JSON_DISABLE_SERIALIZATION="__json_disable_serialization",RpcPeer.PROPERTY_PROXY_PROPERTIES="__proxy_props",RpcPeer.PROPERTY_JSON_COPY_SERIALIZE_CHILDREN="__json_copy_serialize_children",RpcPeer.PROBED_PROPERTIES=new Set(["then","constructor","__proxy_id","__proxy_constructor","__proxy_peer",RpcPeer.PROPERTY_PROXY_ONEWAY_METHODS,RpcPeer.PROPERTY_JSON_DISABLE_SERIALIZATION,RpcPeer.PROPERTY_PROXY_PROPERTIES,RpcPeer.PROPERTY_JSON_COPY_SERIALIZE_CHILDREN])}).call(this,__webpack_require__("c8ba"),__webpack_require__("dd40")(module))},b8ca:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return s})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return u}));var i=n("e1df");function r(){try{return navigator.userAgent}catch(e){}}function a(e){return new Promise((t,n)=>{"connected"!==e.iceConnectionState?(e.addEventListener("iceconnectionstatechange",()=>{"connected"===e.iceConnectionState&&t(void 0)}),s(e).then(e=>n(new Error(e)))):t(void 0)})}function s(e){return new Promise(t=>{e.addEventListener("iceconnectionstatechange",()=>{o(e)&&t(e.iceConnectionState)})})}function o(e){return"disconnected"===e.iceConnectionState||"failed"===e.iceConnectionState||"closed"===e.iceConnectionState}class c{constructor(){var e,t;this.pcDeferred=new i["a"],this.dcDeferred=new i["a"],this.micEnabled=!1,this.options={userAgent:r(),capabilities:{audio:(null===(e=RTCRtpReceiver.getCapabilities)||void 0===e?void 0:e.call(RTCRtpReceiver,"audio"))||{codecs:void 0,headerExtensions:void 0},video:(null===(t=RTCRtpReceiver.getCapabilities)||void 0===t?void 0:t.call(RTCRtpReceiver,"video"))||{codecs:void 0,headerExtensions:void 0}},screen:{devicePixelRatio:window.devicePixelRatio,width:screen.width,height:screen.height}}}async getOptions(){return this.options}async setMicrophone(e){if(this.microphone&&e&&!this.micEnabled){this.micEnabled=!0;const e=await navigator.mediaDevices.getUserMedia({video:!1,audio:!0});await this.microphone.replaceTrack(e.getTracks()[0])}this.microphone.track.enabled=e}close(){var e;this.pcDeferred.promise.then(e=>{var t,n,i;for(const a of e.getTransceivers()||[])try{null===(i=null===(n=null===(t=a.sender)||void 0===t?void 0:t.track)||void 0===n?void 0:n.stop)||void 0===i||i.call(n)}catch(r){}e.close()}).catch(()=>{}),this.pcDeferred.reject(new Error("iceConnectionState "+(null===(e=this.pc)||void 0===e?void 0:e.iceConnectionState)))}async createPeerConnection(e){var t;if(this.pc)return;const n=()=>{console.log("iceConnectionState",i.iceConnectionState),console.log("connectionState",i.connectionState),o(i)&&this.close()},i=this.pc=new RTCPeerConnection(e.configuration);if(this.pcDeferred.resolve(i),await(null===(t=this.onPeerConnection)||void 0===t?void 0:t.call(this,i)),i.addEventListener("iceconnectionstatechange",n),e.datachannel){const t=i.createDataChannel(e.datachannel.label,e.datachannel.dict);t.binaryType="arraybuffer",this.dcDeferred.resolve(t)}if(e.audio){let t;t=e.getUserMediaSafariHack&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")?i.addTransceiver("audio",Object.assign(Object.assign({},e.audio),{streams:[await navigator.mediaDevices.getUserMedia({audio:!0})]})):i.addTransceiver("audio",e.audio),"sendrecv"!==e.audio.direction&&"sendonly"!==e.audio.direction||(this.microphone=t.sender)}if(e.video)if("sendrecv"===e.video.direction||"sendonly"===e.video.direction)try{const e=await navigator.mediaDevices.getUserMedia({video:!0});for(const t of e.getTracks())i.addTrack(t)}catch(r){}else i.addTransceiver("video",e.video)}async createLocalDescription(e,t,n){await this.createPeerConnection(t);const i=new Promise(e=>{this.pc.onicecandidate=t=>{t.candidate?null===n||void 0===n||n(JSON.parse(JSON.stringify(t.candidate))):e(void 0)},this.pc.onicegatheringstatechange=()=>{"complete"===this.pc.iceGatheringState&&e(void 0)}}),r=e=>({type:e.type,sdp:e.sdp});if("offer"===e){let e=await this.pc.createOffer({offerToReceiveAudio:!!t.audio,offerToReceiveVideo:!!t.video});const a=this.pc.setLocalDescription(e);return n||(await a,await i,e=await this.pc.createOffer({offerToReceiveAudio:!!t.audio,offerToReceiveVideo:!!t.video})),r(e)}{let e=await this.pc.createAnswer();const t=this.pc.setLocalDescription(e);return n||(await t,await i,e=this.pc.currentLocalDescription||e),r(e)}}async setRemoteDescription(e,t){await this.createPeerConnection(t),await this.pc.setRemoteDescription(e)}async addIceCandidate(e){await this.pc.addIceCandidate(e)}async endSession(){}}function l(e,t,n){return async i=>{try{"true"===localStorage.getItem("debugLog")&&e.log(t+" trickled candidate:",i.sdpMLineIndex,i.candidate),await n.addIceCandidate(i)}catch(r){throw e.error("addIceCandidate error",r),r}}}function d(e,t,n){let i=!1,r=[];const a=l(e,t,n),s=async e=>{i?a(e):r.push(e)};return{flush(){i=!0;for(const e of r)a(e);r=[]},queueSendCandidate:s}}async function u(e,t,n,i,r){const a=await t.getOptions(),s=await i.getOptions(),o=(null===a||void 0===a?void 0:a.disableTrickle)||(null===s||void 0===s?void 0:s.disableTrickle);if((null===a||void 0===a?void 0:a.offer)&&(null===s||void 0===s?void 0:s.offer))throw new Error("Both RTC clients have offers and can not negotiate. Consider implementing this in @scrypted/webrtc.");if((null===a||void 0===a?void 0:a.requiresOffer)&&(null===s||void 0===s?void 0:s.requiresOffer))throw new Error("Both RTC clients require offers and can not negotiate.");n.type="offer",r.type="answer";const c=d(e,"offer",i),l=d(e,"answer",t),u=await t.createLocalDescription("offer",n,o?void 0:c.queueSendCandidate);"true"===localStorage.getItem("debugLog")&&e.log("offer sdp",u.sdp),await i.setRemoteDescription(u,r);const p=await i.createLocalDescription("answer",r,o?void 0:l.queueSendCandidate);"true"===localStorage.getItem("debugLog")&&e.log("answer sdp",p.sdp),await t.setRemoteDescription(p,n),l.flush(),c.flush()}},b930:function(e,t,n){},bb90:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{width:"1024",disabled:e.disabled,fullscreen:e.$isMobile()},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[e.hidePreview?e._e():n("a",e._g({},i),[n("img",{staticStyle:{"max-width":"100%","max-height":"100%",width:"100%"},attrs:{src:e.src},on:{load:function(t){e.imageReady=!0}}})])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[e.dialog?n("CameraViewer",{attrs:{clipPathValue:e.clipPathValue,device:e.device},on:{clipPath:e.clipPath,exitFullscreen:function(t){e.dialog=!1}}}):e._e()],1)},r=[],a=n("ce2e"),s=n("b8ca"),o=n("257a");async function c(e,t,n){const i=await d(t);return n().srcObject=i.mediaStream,i}async function l(e,t,n,i,r){if(i){const e=await t.getRecordingStream({startTime:n,container:"rtsp"},i);if(e){if(e===i)return;console.warn("Received different stream from initial stream. Implementation is incorrect and should return null or undefined.")}}let a;const s=new Promise(async e=>{a=async r=>{const a=Object.assign({startTime:n,container:"rtsp"},r);return i=await t.getRecordingStream(a,i),e(i),i}}),c=await e.createMediaObject(a,o["ScryptedMimeTypes"].RequestMediaStream),l=await e.convertMediaObject(c,o["ScryptedMimeTypes"].RTCSignalingChannel),u=await d(l);return r().srcObject=u.mediaStream,i=await s,Object.assign({recordingStream:i},u)}async function d(e){const t=new s["a"],n=new MediaStream;t.onPeerConnection=async e=>{e.ontrack=e=>{console.log("add track",e.track),n.addTrack(e.track)}};const i=await e.startRTCSignalingSession(t);t.pcDeferred.promise.then(e=>{e.addEventListener("iceconnectionstatechange",()=>{console.log("iceConnectionStateChange",e.iceConnectionState),"disconnected"!==e.iceConnectionState&&"failed"!==e.iceConnectionState&&"closed"!==e.iceConnectionState||i.endSession()})});const r=()=>{i.endSession(),t.close()};return{control:i,session:t,close:r,mediaStream:n}}async function u(e,t){const n=await e.convertMediaObjectToBuffer(t,"image/*"),i=new Blob([n]);return URL.createObjectURL(i)}var p=n("0644"),m=n.n(p),v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{background:"black",position:"relative",overflow:"hidden",width:"100%",height:"100%",display:"flex"},on:{wheel:e.doTimeScroll}},[e.clipPath?n("ClipPathEditor",{staticStyle:{background:"transparent",top:"0",left:"0",position:"absolute",width:"100%",height:"100%","z-index":"2"},model:{value:e.clipPath,callback:function(t){e.clipPath=t},expression:"clipPath"}}):e._e(),n("div",{class:e.clipPath?"clip-path":void 0,staticStyle:{position:"relative",width:"100%",height:"100%"}},[n("video",{ref:"video",staticStyle:{"background-color":"black",width:"100%",height:"100%","z-index":"0","-webkit-transform-style":"preserve-3d"},attrs:{playsinline:"",autoplay:""}}),n("svg",{ref:"svg",staticStyle:{top:"0",left:"0",position:"absolute",width:"100%",height:"100%","z-index":"1"},attrs:{viewBox:"0 0 "+e.svgWidth+" "+e.svgHeight},domProps:{innerHTML:e._s(e.svgContents)}}),e.$isMobile()?n("v-btn",{staticStyle:{position:"absolute",top:"10px",right:"10px","z-index":"3"},attrs:{small:"",icon:"",color:"white"},on:{click:function(t){return e.$emit("exitFullscreen")}}},[n("v-icon",{attrs:{small:""}},[e._v("fa fa-times")])],1):e._e(),n("div",{staticStyle:{position:"absolute",bottom:"10px",right:"10px","z-index":"3"}},[e.showNvr?n("v-dialog",{attrs:{width:"unset"},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[n("v-btn",e._g({attrs:{dark:!e.isLive,small:"",color:e.isLive?"white":"blue",outlined:e.isLive}},i),[n("v-icon",{attrs:{small:"",color:"white",outlined:e.isLive}},[e._v("fa fa-calendar-alt")]),e._v(""+e._s(e.monthDay))],1)]}}],null,!1,3668498808),model:{value:e.dateDialog,callback:function(t){e.dateDialog=t},expression:"dateDialog"}},[n("vc-date-picker",{attrs:{mode:"date",value:e.startTime},on:{input:e.datePicked}})],1):e._e(),e.showNvr?n("v-btn",{attrs:{dark:!e.isLive,small:"",color:e.isLive?"white":e.adjustingTime?"green":"blue",outlined:e.isLive},on:{click:function(t){e.streamRecorder(Date.now()-12e4)}}},[!e.isLive&&e.adjustingTime?n("v-btn",{attrs:{small:"",color:e.isLive?"white":e.adjustingTime?"green":"blue",outlined:e.isLive}},[e._v(" "+e._s(e.time))]):n("v-icon",{attrs:{small:"",color:"white",outlined:e.isLive}},[e._v("fa fa-video")])],1):e._e(),e.isLive&&e.hasIntercom?n("v-btn",{attrs:{small:"",color:"white",outlined:""},on:{click:e.toggleMute}},[e.muted?n("v-icon",{attrs:{small:"",color:"white",outlined:e.isLive}},[e._v("fa fa-microphone-slash ")]):n("v-icon",{attrs:{small:"",color:"white",outlined:e.isLive}},[e._v("fa fa-microphone ")])],1):e._e(),e.showNvr?n("v-btn",{attrs:{dark:!e.isLive,small:"",color:"red",outlined:!e.isLive},on:{click:e.streamCamera}},[e._v("Live")]):e._e()],1)],1)],1)},h=[],g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"playground-container flex",attrs:{id:"playground_container"}},[n("v-btn-toggle",{staticStyle:{position:"absolute",left:"0",top:"0","z-index":"3000"},attrs:{mandatory:""},model:{value:e.pointMode,callback:function(t){e.pointMode=t},expression:"pointMode"}},[n("v-btn",{attrs:{width:"100px"},on:{click:function(t){e.customizing=!1}}},[e._v(" "+e._s("Drag Points")+" ")]),n("v-btn",{attrs:{width:"100px"},on:{click:function(t){e.customizing=!0}}},[e._v(" "+e._s("Add Points")+" ")]),n("v-btn",{attrs:{width:"100px"},on:{click:e.clearPoints}},[e._v(" "+e._s("Clear Points")+" ")])],1),n("div",{staticClass:"playground pa-0",class:{customizing:e.customizing,start:!e.lazyValue.length},staticStyle:{width:"100%",height:"100%"},on:{click:e.addHandle}},[n("div",{staticClass:"sandbox",staticStyle:{width:"100%",height:"100%"}},[n("div",{staticClass:"shadowboard"}),e.lazyValue.length>=3?n("div",{staticClass:"clipboard",style:[{"clip-path":e.clipCSS(e.lazyValue)},{"-webkit-clip-path":e.clipCSS(e.lazyValue)},{background:"red",opacity:".2"}]}):e._e(),n("ClipPathEditorHandles",{ref:"handles",attrs:{customizing:e.customizing},on:{updateHandle:e.updateHandle,removeHandle:e.removeHandle},model:{value:e.lazyValue,callback:function(t){e.lazyValue=t},expression:"lazyValue"}})],1)])],1)},f=[];function y(e){return e.length<3?"none":"polygon("+b(e).join(", ")+")"}function b(e){return e.map(e=>e.map(e=>e+"%").join(" "))}var S=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"handles"},e._l(e.dragCoords||e.lazyValue,(function(t,i){return n("div",{key:i,ref:"handleRefs",refInFor:!0,staticClass:"handle",style:e.handleStyle(t),attrs:{"data-handle":i},on:{mousedown:e.mousedown,mouseup:e.mouseup}},[n("div",{staticClass:"delete-point"})])})),0)},_=[],x=n("ce88"),w=n.n(x),C=n("43b3"),P=n("a026"),k={props:["customizing"],mixins:[C["a"]],data(){return{draggies:[],dragCoords:null}},mounted(){P["default"].nextTick(()=>this.resetHandles())},destroyed(){this.clearDraggies()},watch:{value(){this.customizing&&P["default"].nextTick(()=>this.resetHandles())},customizing(){P["default"].nextTick(()=>this.resetHandles())}},methods:{handleStyle(e){return{left:e[0]+"%",top:e[1]+"%"}},handleAdded(e){},resetHandles(){this.clearDraggies(),this.$refs.handleRefs.forEach(e=>{Object.assign(e.style,this.handleStyle(this.lazyValue[e.dataset.handle])),this.makeDraggable(e)})},clearDraggies(){this.draggies.forEach(e=>e.destroy()),this.draggies=[]},makeDraggable(e){let t=this,n=e.dataset.handle;e.classList.add("draggable");let i=!1,r=new w.a(e,{containment:!0,grid:[0,0]}).on("pointerDown",(function(){var e;i=!1,t.dragCoords=m()(t.lazyValue),null===(e=document.querySelectorAll('[data-point="'+n+'"]')[0])||void 0===e||e.classList.add("changing")})).on("dragMove",(function(){i=!0;let e=this.position.x,r=this.position.y;t.$emit("updateHandle",{x:e,y:r,i:n})})).on("pointerUp",(function(){if(document.querySelectorAll(".point").forEach(e=>e.classList.remove("changing")),t.dragCoords=null,this.element.classList.contains("show-delete"))return t.$emit("removeHandle",n),void document.querySelectorAll(".handle").forEach(e=>e.classList.remove("show-delete"));i||(document.querySelectorAll(".handle").forEach(e=>e.classList.remove("show-delete")),t.lazyValue.length>3&&(this.element.classList.add("show-delete"),setTimeout(()=>{this.element.classList.remove("show-delete")},2500)))}));this.draggies.push(r)},mousedown(e){console.log("mousedown"),document.querySelectorAll(".handle").forEach(e=>e.classList.remove("show-delete")),e.srcElement.classList.contains("delete-point")&&this.$emit("removeHandle",parseInt(e.srcElement.parentElement.dataset.handle)),this.lazyValue.length>3&&e.target.classList.add("show-delete")},mouseup(e){setTimeout(()=>{e.target.classList.remove("show-delete")},2500)}}},D=k,I=(n("6a8b"),n("2877")),T=Object(I["a"])(D,S,_,!1,null,null,null),O=T.exports,V={mixins:[C["a"]],components:{ClipPathEditorHandles:O},data(){return{pointMode:this.value.length<3?1:0,customizing:this.value.length<3}},mounted(){console.log("mounted clippatheditor")},watch:{lazyValue(){}},methods:{clipCSS:y,addHandle(e){if(!this.customizing)return;let t=e.offsetX/e.target.offsetWidth*100,n=e.offsetY/e.target.offsetHeight*100;this.lazyValue.push([t,n]),this.onInput()},updateHandle(e){let t=e.x/this.$refs.handles.$el.offsetWidth*100,n=e.y/this.$refs.handles.$el.offsetHeight*100;this.$set(this.lazyValue,e.i,[t,n]),this.onInput()},removeHandle(e){this.lazyValue.splice(e,1),this.onInput()},clearPoints(){this.customizing=!0,this.lazyValue.splice(0,this.lazyValue.length),this.onInput()}}},M=V,R=(n("04c3"),n("6544")),E=n.n(R),L=n("8336"),z=n("a609"),A=Object(I["a"])(M,g,f,!1,null,null,null),j=A.exports;E()(A,{VBtn:L["a"],VBtnToggle:z["a"]});var $={components:{ClipPathEditor:j},props:["clipPathValue","device"],data(){const e=this.clipPathValue?m()(this.clipPathValue):void 0;if(e)for(const t of e)t[0]=.8*t[0]+10,t[1]=.8*t[1]+10;return{dateDialog:!1,adjustingTime:null,startTime:null,lastDetection:{},objectListener:this.device.listen(o["ScryptedInterface"].ObjectDetector,(e,t,n)=>{this.lastDetection=n||{}}),muted:!0,sessionControl:void 0,control:void 0,clipPath:e}},computed:{hasIntercom(){return this.device.interfaces.includes(o["ScryptedInterface"].Intercom)||this.device.providedInterfaces.includes(o["ScryptedInterface"].RTCSignalingChannel)},isLive(){return!this.startTime},time(){const e=this.startTime?new Date(this.startTime):new Date,t=e.getHours().toString().padStart(2,"0"),n=e.getMinutes().toString().padStart(2,"0"),i=e.getSeconds().toString().padStart(2,"0");return`${t}:${n}:${i}`},monthDay(){const e=this.startTime?new Date(this.startTime):new Date;return e.toLocaleDateString(void 0,{month:"short",day:"numeric"})},showNvr(){return this.device.interfaces.includes(o["ScryptedInterface"].VideoRecorder)},svgWidth(){var e,t;return(null===(e=this.lastDetection)||void 0===e||null===(t=e.inputDimensions)||void 0===t?void 0:t[0])||1920},svgHeight(){var e,t;return(null===(e=this.lastDetection)||void 0===e||null===(t=e.inputDimensions)||void 0===t?void 0:t[1])||1080},svgContents(){if(!this.lastDetection)return"";let e="";for(const t of this.lastDetection.detections||[]){if(!t.boundingBox)continue;const n=this.svgWidth/1080,i=2*n,r="red",a=t.boundingBox[0],s=t.boundingBox[1],o=t.boundingBox[2],c=t.boundingBox[3];let l="",d=0;t.score&&"motion"!==t.className&&(l+=`<tspan x='${a}' dy='${d}em'>${Math.round(100*t.score)/100}</tspan>`,d-=1.2);const u=t.className+(t.id?": "+t.id:"");l+=`<tspan x='${a}' dy='${d}em'>${u}</tspan>`;const p=20*n,m=`<rect x="${a}" y="${s}" width="${o}" height="${c}" stroke="${r}" stroke-width="${i}" fill="none" />\n        <text x="${a}" y="${s-5}" font-size="${p}" dx="0.05em" dy="0.05em" fill="black">${l}</text>\n        <text x="${a}" y="${s-5}" font-size="${p}" fill="white">${l}</text>\n      `;e+=m}return e}},mounted(){this.streamCamera()},destroyed(){this.cleanupConnection(),this.objectListener.removeListener()},methods:{datePicked(e){this.dateDialog=!1,e&&e.getTime&&this.streamRecorder(e.getTime())},doTimeScroll(e){if(!this.device.interfaces.includes(o["ScryptedInterface"].VideoRecorder))return;if(!this.startTime)return void(this.startTime=Date.now()-12e4);const t=Math.round(e.deltaY/7);this.startTime-=6e4*t,clearTimeout(this.adjustingTime),this.adjustingTime=setTimeout(()=>{this.adjustingTime=null,this.streamRecorder(this.startTime)},10)},cleanupConnection(){var e;console.log("control cleanup"),null===(e=this.sessionControl)||void 0===e||e.close(),this.sessionControl=void 0},async toggleMute(){var e;this.muted=!this.muted,null!==(e=this.sessionControl)&&void 0!==e&&e.control&&(this.sessionControl.control.setPlayback({audio:!this.muted,video:!0}),this.sessionControl.session.setMicrophone(!0))},async streamCamera(){this.cleanupConnection(),this.startTime=null,this.sessionControl=await c(this.$scrypted.mediaManager,this.device,()=>this.$refs.video)},async streamRecorder(e){var t;this.startTime=e;const n=await l(this.$scrypted.mediaManager,this.device,e,null===(t=this.sessionControl)||void 0===t?void 0:t.recordingStream,()=>this.$refs.video);n&&(this.cleanupConnection(),this.sessionControl=n)}},watch:{clipPath(){const e=m()(this.clipPath);for(const t of e)t[0]=(t[0]-10)/.8,t[1]=(t[1]-10)/.8;this.$emit("clipPath",e)}}},B=$,N=(n("2634"),n("169a")),U=n("132d"),F=Object(I["a"])(B,v,h,!1,null,"41f3b46c",null),H=F.exports;E()(F,{VBtn:L["a"],VDialog:N["a"],VIcon:U["a"]});var q={components:{CameraViewer:H},mixins:[a["a"]],props:["clipPathValue","hidePreview","showDialog"],data(){return{imageReady:!1,src:"images/cameraloading.jpg",dialog:!1,disabled:!this.device.interfaces.includes(o["ScryptedInterface"].RTCSignalingChannel)}},methods:{async refresh(){this.imageReady=!1;const e=await this.device.takePicture();this.src=await u(this.$scrypted.mediaManager,e)},clipPath(e){this.$emit("clipPath",m()(e))}},watch:{showDialog(){this.dialog=this.showDialog},async dialog(e){this.$emit("dialog",e)}},mounted(){this.refresh()}},G=q,W=Object(I["a"])(G,i,r,!1,null,null,null);t["a"]=W.exports;E()(W,{VDialog:N["a"]})},bde8:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._l(e.lazyValue,(function(t,i){return n("div",{key:i},[e._t("default",null,{item:t,onInput:e.setIndex(i)})],2)})),n("v-card-actions",[e.left?e._e():n("v-spacer"),n("v-btn",{attrs:{small:""},on:{click:e.add}},[e._v(e._s(e.addButton))]),e.saveButton?n("v-btn",{attrs:{small:""},on:{click:function(t){return e.$emit("save")}}},[e._v(e._s(e.saveButton))]):e._e()],1),e._t("append-outer")],2)},r=[],a=n("0644"),s=n.n(a),o=n("43b3"),c={props:{left:!1,empty:void 0,addButton:{default:"Add",type:String},saveButton:{default:void 0,type:String}},mixins:[o["a"]],methods:{setIndex(e){return t=>{this.lazyValue[e]=t,this.onInput()}},add(){this.lazyValue.push(s()(this.empty)),this.onInput()}}},l=c,d=n("2877"),u=n("6544"),p=n.n(u),m=n("8336"),v=n("99d9"),h=n("2fa4"),g=Object(d["a"])(l,i,r,!1,null,null,null);t["a"]=g.exports;p()(g,{VBtn:m["a"],VCardActions:v["a"],VSpacer:h["a"]})},c543:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-autocomplete",{attrs:{dense:"","small-chips":e.multiple,items:e.devices,"item-value":"id",outlined:"",multiple:e.multiple,readonly:e.readonly,label:e.title,hint:e.description,"persistent-hint":""},on:{change:e.onInput},scopedSlots:e._u([{key:"append-outer",fn:function(){return[e._t("append-outer")]},proxy:!0}],null,!0),model:{value:e.lazyValue,callback:function(t){e.lazyValue=t},expression:"lazyValue"}})},r=[],a=n("43b3"),s={mixins:[a["a"]],props:["devices","title","description","multiple","readonly"]},o=s,c=n("2877"),l=n("6544"),d=n.n(l),u=n("c6a6"),p=Object(c["a"])(o,i,r,!1,null,null,null);t["a"]=p.exports;d()(p,{VAutocomplete:u["a"]})},caf7:function(e,t,n){"use strict";async function i(e){await new Promise(t=>setTimeout(t,e))}n.d(t,"a",(function(){return i}))},cbc1:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);var i=n("a026"),r=n("62ad"),a=n.n(r),s=n("be33"),o=n("11ca"),c=n("4ab5"),l=n("ad3d");i["default"].use(a.a);const d=[o["F"],o["X"],o["ab"],o["W"],o["Ab"],o["G"],o["S"],o["fb"],o["Q"],o["cb"],o["O"],o["u"],o["J"],o["C"],o["xb"],c["a"],o["db"],o["vb"],o["wb"],o["t"],o["s"],o["H"],o["q"],o["D"],o["R"],o["ub"],o["N"],o["tb"],o["M"],o["Z"],o["ob"],o["ib"],o["lb"],o["jb"],o["kb"],o["hb"],o["n"],o["l"],o["m"],o["b"],o["y"],o["z"],o["rb"],o["d"],o["g"],o["e"],o["f"],o["c"],o["r"],o["L"],o["Cb"],c["b"],o["yb"],o["a"],o["K"],o["pb"],o["T"],o["U"],o["V"],o["w"],o["gb"],o["o"],o["i"],o["v"],o["qb"],o["h"],o["ub"],o["I"],o["sb"],o["Bb"],o["Y"],o["A"],o["B"],o["x"],o["eb"],o["p"],o["E"],o["nb"],o["k"],o["bb"],o["Db"],o["zb"],o["mb"],o["P"],o["j"]];for(var u in d)s["c"].add(d[u]);i["default"].component("font-awesome-icon",l["a"]);n("abb2"),n("15f5");var p=n("f309"),m=n("2f62"),v=n("8c4f");i["default"].use(p["a"]),i["default"].use(m["a"]),i["default"].use(v["a"]);var h=new p["a"]({icons:{iconfont:"fa"}}),g=n("395c"),f=n.n(g);i["default"].use(f.a);var y=n("4eb5"),b=n.n(y);b.a.config.autoSetContainer=!0,i["default"].use(b.a);var S=n("755e");i["default"].use(S,{load:{key:"AIzaSyCBbKhH_IM1oIZMOO65xOnzgDDrmC2lAoc",libraries:"places"}});var _=n("3003");i["default"].use(_["a"]);var x=n("1321"),w=n.n(x);i["default"].use(w.a),i["default"].component("apexchart",w.a);var C=n("ba48"),P=n.n(C);i["default"].use(P.a);var k=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.launcherRoute?n("v-app",{staticStyle:{"background-color":"#6200EA"}},[!1===e.$store.state.isLoggedIn?n("Login"):!1===e.$store.state.isConnected?n("Reconnect"):n("div",{staticStyle:{width:"100%",height:"100%",display:"flex","align-items":"center","justify-content":"center"}},[n("div",[n("v-card",{staticClass:"elevation-24",attrs:{width:"300px"}},[n("v-card-title",{staticClass:"headline text-uppercase",staticStyle:{"justify-content":"center"}},[e._v("Scrypted ")]),n("v-card-subtitle",{staticStyle:{"text-align":"center"}},[e._v(e._s(e.$store.state.version))]),n("v-list",{staticClass:"transparent"},[e._l(e.applications,(function(t){return n("v-list-item",{key:t.name,attrs:{to:t.to,href:t.href}},[n("v-icon",{attrs:{small:""}},[e._v(e._s(t.icon))]),n("v-list-item-title",{staticStyle:{"text-align":"center"}},[e._v(e._s(t.name)+" ")])],1)})),e.loading?n("v-list-item",[n("v-progress-circular",{attrs:{size:16,color:"primary",indeterminate:""}}),n("v-list-item-title",{staticStyle:{"text-align":"center"}},[e._v("Loading... ")])],1):e._e()],2),n("v-card-actions",[n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[n("v-btn",e._g({attrs:{icon:"",href:"https://twitter.com/scryptedapp/"}},i),[n("v-icon",{attrs:{small:""}},[e._v("fab fa-twitter")])],1)]}}],null,!1,2659123544)},[n("span",[e._v("Twitter")])]),n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[n("v-btn",e._g({attrs:{icon:"",href:"https://www.reddit.com/r/Scrypted/"}},i),[n("v-icon",{attrs:{small:""}},[e._v("fab fa-reddit")])],1)]}}],null,!1,3564018973)},[n("span",[e._v("Reddit")])]),n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[n("v-btn",e._g({attrs:{icon:"",href:"https://github.com/koush/scrypted"}},i),[n("v-icon",{attrs:{small:""}},[e._v("fab fa-github")])],1)]}}],null,!1,1046136211)},[n("span",[e._v("Github")])]),n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[n("v-btn",e._g({attrs:{icon:"",href:"https://discord.gg/DcFzmBHYGq"}},i),[n("v-icon",{attrs:{small:""}},[e._v("fab fa-discord")])],1)]}}],null,!1,2175568346)},[n("span",[e._v("Discord")])]),n("v-spacer"),n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[n("v-btn",e._g({attrs:{icon:""},on:{click:e.logout}},i),[n("v-icon",{attrs:{small:""}},[e._v("fa-solid fa-arrow-right-from-bracket")])],1)]}}],null,!1,2085971745)},[n("span",[e._v("Log Out")])])],1)],1),e.showNvr?n("v-card",{staticClass:"elevation-24 mt-4",attrs:{width:"300px",dark:""}},[n("v-card-title",{staticClass:"headline text-uppercase",staticStyle:{"justify-content":"center"}},[e._v("Support Scrypted ")]),n("v-card-subtitle",{staticClass:"headline text-uppercase",staticStyle:{"justify-content":"center","text-align":"center"}},[e._v("Get Scrypted NVR")]),n("v-list",{staticStyle:{"font-size":".85rem"}},[n("v-list-item",[n("v-list-item-icon",{staticClass:"mr-2"},[n("v-icon",{attrs:{small:""}},[e._v("fa fa-timeline")])],1),e._v(" 24/7 recording with smart detections. ")],1),n("v-list-item",[n("v-list-item-icon",{staticClass:"mr-2"},[n("v-icon",{attrs:{small:""}},[e._v("fa-solid fa-bolt-lightning")])],1),e._v(" Adaptive bitrate streaming for HomeKit, Google Home, Alexa, and Chromecast. ")],1),n("v-list-item",[n("v-list-item-icon",{staticClass:"mr-2"},[n("v-icon",{attrs:{small:""}},[e._v("fa-solid fa-video-camera")])],1),e._v(" Camera Dashboard and live view grid. 4K camera support. ")],1),n("v-list-item",[n("v-list-item-icon",{staticClass:"mr-2"},[n("v-icon",{attrs:{small:""}},[e._v("fa fa-cloud")])],1),e._v(" Cloud access from browsers or apps. ")],1)],1),n("div",{staticStyle:{width:"100%",display:"flex","justify-content":"center"}},[n("v-btn",{staticStyle:{"justify-self":"center"},attrs:{href:"https://demo.scrypted.app/#/demo"}},[e._v("View Demo ")]),n("v-btn",{staticStyle:{"justify-self":"center"},attrs:{to:e.nvrInstall}},[e._v("Install ")])],1)],1):e._e()],1)])],1):n("App")],1)},D=[],I=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{value:!0,persistent:"","max-width":"300px"}},[n("v-form",{on:{submit:function(t){return t.preventDefault(),e.doLogin.apply(null,arguments)}}},[n("v-card",[n("v-card-text",[n("v-card-title",{staticClass:"headline text-uppercase",staticStyle:{"justify-content":"center"}},[e._v("Scrypted ")]),n("v-container",{attrs:{"grid-list-md":""}},[n("v-layout",{attrs:{wrap:""}},[n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{dense:"",outlined:"",label:"User Name"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),n("v-text-field",{attrs:{dense:"",outlined:"",type:"password",label:"Password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),!0===e.$store.state.hasLogin?n("v-checkbox",{attrs:{dense:"",label:"Change Password"},model:{value:e.changePassword,callback:function(t){e.changePassword=t},expression:"changePassword"}}):e._e(),e.changePassword?n("v-text-field",{attrs:{dense:"",outlined:"",type:"password",label:"New Password"},model:{value:e.newPassword,callback:function(t){e.newPassword=t},expression:"newPassword"}}):e._e(),e.changePassword||!1===e.$store.state.hasLogin?n("v-text-field",{attrs:{dense:"",outlined:"",type:"password",label:"Confirm Password",rules:[(e.changePassword?e.confirmPassword===e.newPassword:e.confirmPassword===e.password)||"Passwords do not match."]},model:{value:e.confirmPassword,callback:function(t){e.confirmPassword=t},expression:"confirmPassword"}}):e._e()],1)],1),e.loginResult?n("div",[e._v(e._s(e.loginResult))]):e._e()],1)],1),n("v-card-actions",[n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[n("v-btn",e._g({attrs:{icon:"",href:"https://twitter.com/scryptedapp/"}},i),[n("v-icon",{attrs:{small:""}},[e._v("fab fa-twitter")])],1)]}}])},[n("span",[e._v("Twitter")])]),n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[n("v-btn",e._g({attrs:{icon:"",href:"https://www.reddit.com/r/Scrypted/"}},i),[n("v-icon",{attrs:{small:""}},[e._v("fab fa-reddit")])],1)]}}])},[n("span",[e._v("Reddit")])]),n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[n("v-btn",e._g({attrs:{icon:"",href:"https://github.com/koush/scrypted"}},i),[n("v-icon",{attrs:{small:""}},[e._v("fab fa-github")])],1)]}}])},[n("span",[e._v("Github")])]),n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[n("v-btn",e._g({attrs:{icon:"",href:"https://discord.gg/DcFzmBHYGq"}},i),[n("v-icon",{attrs:{small:""}},[e._v("fab fa-discord")])],1)]}}])},[n("span",[e._v("Discord")])]),n("v-spacer"),n("v-btn",{attrs:{type:"submit",text:""},on:{click:function(t){return t.preventDefault(),e.doLogin.apply(null,arguments)}}},[e._v("Log In")])],1)],1)],1)],1)},T=[];i["default"].use(m["a"]);const O=new m["a"].Store({state:{version:void 0,menu:void 0,systemState:{},scrypted:{devices:[],alerts:[]},username:void 0,isLoggedIn:void 0,isLoggedIntoCloud:void 0,isConnected:void 0,hasLogin:void 0},mutations:{setSystemState:function(e,t){e.systemState=t},setDevices(e,t){e.scrypted.devices=t},setAlerts(e,t){e.scrypted.alerts=t},removeAlert(e,t){e.scrypted.alerts=e.scrypted.alerts.filter(e=>e._id!=t)},addAlert(e,t){const n=e.scrypted.alerts.filter(e=>e.id!=t.id);n.push(t),e.scrypted.alerts=n},addDevice(e,t){var n=e.scrypted.devices.filter(e=>e!==t);n.push(t),e.scrypted.devices=n},removeDevice(e,t){e.scrypted.devices=e.scrypted.devices.filter(e=>e!==t)},setIsLoggedIntoCloud(e,t){e.isLoggedIntoCloud=t},setIsLoggedIn(e,t){e.isLoggedIn=t},setUsername(e,t){e.username=t},setIsConnected(e,t){e.isConnected=t},setHasLogin(e,t){e.hasLogin=t},setVersion(e,t){e.version=t},setMenu(e,t){i["default"].set(e,"menu",t)},clearMenu(e){i["default"].delete(e,"menu")}}});var V=O,M=n("a936");function R(e,t){return e[t]&&e[t].value}function E(e){const t=V.state.systemState[e];for(const n of["name","interfaces","type"])if(!R(t,n))return!1;return!0}function L(e,t,n){return Object(M["c"])({baseUrl:void 0,username:e,password:t,change_password:n})}i["default"].use(e=>{e.prototype.$connectScrypted=()=>{const t=Object(M["b"])({pluginId:"@scrypted/core"});return V.commit("setHasLogin",void 0),V.commit("setIsLoggedIn",void 0),V.commit("setUsername",void 0),V.commit("setIsConnected",void 0),Object(M["a"])().then(e=>{if(!e.redirect){if(!e.expiration)throw V.commit("setHasLogin",e.hasLogin),new Error("Login failed.");return V.commit("setHasLogin",!0),V.commit("setIsLoggedIn",!0),V.commit("setUsername",e.username),setTimeout(()=>{V.commit("setIsLoggedIn",!1)},e.expiration),t}Object(M["d"])({redirect:e.redirect})}).catch(e=>{throw V.commit("setIsLoggedIn",!1),e}).then(t=>{e.prototype.$scrypted=t;const n=t.systemManager.getSystemState();V.commit("setSystemState",n),V.commit("setDevices",Object.keys(n)),V.commit("setIsConnected",!0),V.commit("setVersion",t.version),t.onClose=()=>{V.commit("setIsConnected",!1)},t.systemManager.listen(async(i,r,a)=>{if(i){const t=i.id;if("ScryptedDevice"===r.eventInterface)return e.set(n,t,n[t]),void(E(t)&&V.commit("addDevice",t))}else if("Logger"===r.eventInterface){const e=await t.systemManager.getComponent("alerts"),n=await e.getAlerts();V.commit("setAlerts",n)}else if("id"===r.property)return e.delete(n,a),void V.commit("removeDevice",a)}),t.systemManager.getComponent("alerts").then(async e=>{const t=await e.getAlerts();V.commit("setAlerts",t)})}).catch(e=>{throw V.commit("setIsConnected",!1),e})},e.prototype.$connectingScrypted=e.prototype.$connectScrypted()});var z={name:"Login",methods:{async doLogin(){const e={username:this.username,password:this.password};if(this.changePassword||!1===this.$store.state.hasLogin){if(!1===this.$store.state.hasLogin&&this.password!==this.confirmPassword)return void(this.loginResult="Passwords do not match.");if(this.changePassword&&this.newPassword!==this.confirmPassword)return void(this.loginResult="Passwords do not match.");e.change_password=this.confirmPassword}this.loginResult="";try{const e=await L(this.username,this.password,this.confirmPassword||void 0);if(e.error)return void(this.loginResult=e.error);try{const e=new URL(window.location).searchParams.get("redirect_uri");if(e)return void(window.location=e)}catch(t){}window.location.reload()}catch(t){this.loginResult=t.toString(),t.toString().includes("Network Error")&&window.location.href.startsWith("https:")&&(window.location="/")}}},store:V,data(){const e=this;return{changePassword:!1,username:null,password:null,confirmPassword:null,newPassword:null,loginResult:void 0,passwordRules:[()=>e.password==e.confirmPassword||!e.changePassword||"Passwords do not match."]}}},A=z,j=n("2877"),$=n("6544"),B=n.n($),N=n("8336"),U=n("b0af"),F=n("99d9"),H=n("ac7c"),q=n("a523"),G=n("169a"),W=n("0e8f"),Y=n("4bd4"),J=n("132d"),K=n("a722"),Z=n("2fa4"),X=n("8654"),Q=n("3a2f"),ee=Object(j["a"])(A,I,T,!1,null,null,null),te=ee.exports;B()(ee,{VBtn:N["a"],VCard:U["a"],VCardActions:F["a"],VCardText:F["c"],VCardTitle:F["d"],VCheckbox:H["a"],VContainer:q["a"],VDialog:G["a"],VFlex:W["a"],VForm:Y["a"],VIcon:J["a"],VLayout:K["a"],VSpacer:Z["a"],VTextField:X["a"],VTooltip:Q["a"]});var ne=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("Drawer",{model:{value:e.$data,callback:function(t){e.$data=t},expression:"$data"}}),n("v-app-bar",{attrs:{app:"","clipped-left":""}},[n("v-app-bar-nav-icon",{on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}}),n("v-toolbar-title",{staticClass:"headline text-uppercase"},[n("span",{staticStyle:{cursor:"pointer"},on:{click:e.goHome}},[e._v(e._s(e.title))])]),n("v-spacer"),n("v-menu",{attrs:{left:"",bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[n("v-btn",e._g({attrs:{text:""}},i),[e._v(e._s(e.$store.state.username))])]}}])},[n("v-list",[n("v-list-item",{on:{click:e.reload}},[n("v-list-item-content",[n("v-list-item-title",[e._v("Reload")])],1)],1),n("v-list-item",{on:{click:e.logout}},[n("v-list-item-content",[n("v-list-item-title",[e._v("Logout")])],1)],1)],1)],1),n("v-btn",{attrs:{icon:"",small:""},on:{click:e.toggleDarkMode}},[n("v-icon",{attrs:{small:""}},[e._v("fa fa-sun")])],1),n("v-menu",{attrs:{left:"",bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[n("v-btn",e._g({attrs:{small:"",icon:""}},i),[n("v-badge",{attrs:{value:e.$store.state.scrypted.alerts.length,color:"red",overlap:""},scopedSlots:e._u([{key:"badge",fn:function(){return[e._v(e._s(e.$store.state.scrypted.alerts.length))]},proxy:!0}],null,!0)},[n("v-icon",{attrs:{small:""}},[e._v("notifications")])],1)],1)]}}])},[n("v-list",[e._l(e.$store.state.scrypted.alerts,(function(t){return n("v-list-item",{key:t.id,on:{click:function(n){return e.doAlert(t)}}},[n("v-list-item-icon",[n("v-icon",{staticStyle:{color:"#a9afbb"},attrs:{"x-small":""}},[e._v(e._s(e.getAlertIcon(t)))])],1),n("v-list-item-content",[n("v-list-item-title",{staticClass:"caption"},[e._v(e._s(t.title))]),n("v-list-item-subtitle",{staticClass:"caption"},[e._v(e._s(t.message))]),n("v-list-item-subtitle",{staticClass:"caption"},[e._v(e._s(e.friendlyTime(t.timestamp)))])],1)],1)})),e.$store.state.scrypted.alerts.length?n("v-divider"):e._e(),e.$store.state.scrypted.alerts.length?n("v-list-item",{on:{click:e.clearAlerts}},[n("v-list-item-icon",[n("v-icon",{staticStyle:{color:"#a9afbb"},attrs:{"x-small":""}},[e._v("fa-trash")])],1),n("v-list-item-content",[n("v-list-item-title",{staticClass:"caption"},[e._v("Clear All Alerts")])],1)],1):n("v-list-item",[n("v-list-item-content",[n("v-list-item-title",{staticClass:"caption"},[e._v("No notifications.")])],1)],1)],2)],1),e.$store.state.menu?n("v-menu",{attrs:{left:"",bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[n("v-btn",e._g({attrs:{small:"",icon:""}},i),[n("v-icon",{attrs:{small:""}},[e._v("more_vert")])],1)]}}],null,!1,2942721647)},[n("v-list",e._l(e.$store.state.menu,(function(t,i){return n("v-list-item",{key:i,on:{click:t.click}},[t.icon?n("v-list-item-icon",[n("v-icon",{staticStyle:{color:"#a9afbb"},attrs:{"x-small":""}},[e._v(e._s(t.icon))])],1):e._e(),n("v-list-item-content",[n("v-list-item-title",{staticClass:"caption"},[e._v(e._s(t.title))]),n("v-list-item-subtitle",{staticClass:"caption"},[e._v(e._s(t.subtitle))])],1)],1)})),1)],1):e._e()],1),!1===e.$store.state.isLoggedIn?n("Login"):!1===e.$store.state.isConnected?n("Reconnect"):e._e(),n("v-main",{attrs:{elevation:"-2"}},[n("v-container",{attrs:{"grid-list-xs":"","grid-list-xl":"","grid-list-md":"","grid-list-sm":"","grid-list-lg":"",fluid:""}},[n("v-fade-transition",{attrs:{mode:"out-in"}},[e.$store.state.isConnected?n("router-view"):e._e()],1)],1)],1)],1)},ie=[],re=n("bc3a"),ae=n.n(re),se=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-navigation-drawer",{attrs:{fixed:"",app:"",clipped:"",color:e.$vuetify.theme.dark?void 0:"#F0F0F0"},model:{value:e.value.drawer,callback:function(t){e.$set(e.value,"drawer",t)},expression:"value.drawer"}},[n("v-list",{attrs:{dense:"",nav:""}},[n("v-subheader"),e.updateAvailable?n("v-list-item",{attrs:{link:"",href:"#/component/settings","active-class":"deep-purple accent-4 white--text"}},[n("v-list-item-icon",[n("v-icon",{attrs:{color:"red",small:""}},[e._v("fa-download")])],1),n("v-list-item-content",[n("v-list-item-title",[e._v("Update "+e._s(e.updateAvailable))])],1)],1):e._e(),e._l(e.builtinComponents,(function(t){return n("v-list-item",{key:t.id,attrs:{link:"",to:t.path,active:t.active,"active-class":"deep-purple accent-4 white--text"}},[n("v-list-item-icon",[n("v-icon",{attrs:{small:""}},[e._v(e._s(t.icon))])],1),n("v-list-item-content",[n("v-list-item-title",[e._v(e._s(t.name))])],1)],1)})),e._l(e.categories,(function(t){return n("div",{key:t,attrs:{dense:"",nav:""}},[n("v-subheader",[e._v(e._s(t))]),e._l(e.filterComponents(t),(function(t){return n("v-list-item",{key:t.id,attrs:{link:"",to:e.getComponentViewPath(t.id),"active-class":"deep-purple accent-4 white--text"}},[n("v-list-item-icon",[n("v-icon",{attrs:{small:""}},[e._v(e._s(t.icon))])],1),n("v-list-item-content",[n("v-list-item-title",[e._v(e._s(t.name))])],1)],1)})),n("v-divider")],2)})),n("v-subheader",[e._v("Social")]),n("v-list-item",{attrs:{link:"",href:"https://discord.gg/DcFzmBHYGq","active-class":"purple white--text tile"}},[n("v-list-item-icon",[n("v-icon",{attrs:{small:""}},[e._v("fab fa-discord")])],1),n("v-list-item-content",[n("v-list-item-title",[e._v("Discord")])],1)],1),n("v-list-item",{attrs:{link:"",href:"https://github.com/koush/scrypted","active-class":"purple white--text tile"}},[n("v-list-item-icon",[n("v-icon",{attrs:{small:""}},[e._v("fab fa-github")])],1),n("v-list-item-content",[n("v-list-item-title",[e._v("Github")])],1)],1),n("v-divider"),n("v-list-item",{attrs:{"active-class":"deep-purple accent-4 white--text"}},[n("v-list-item-icon",[n("v-icon",{attrs:{small:""}},[e._v("fa-code-branch")])],1),n("v-list-item-content",[n("v-list-item-title",[e._v("Version "+e._s(e.scryptedVersion||"Unknown"))])],1)],1)],2)],1)},oe=[],ce=n("257a");function le(e){if(e&&!e.interfaces.includes(ce["ScryptedInterface"].ScryptedPlugin)&&e.type!==ce["ScryptedDeviceType"].Builtin&&e.type!==ce["ScryptedDeviceType"].API)return!0}function de(e){switch(e){case ce["ScryptedDeviceType"].Camera:return"fa-video";case ce["ScryptedDeviceType"].Doorbell:return"fa-bell";case ce["ScryptedDeviceType"].Fan:return"fa-fan";case ce["ScryptedDeviceType"].Light:return"fa-lightbulb";case ce["ScryptedDeviceType"].Switch:return"fa-toggle-on";case ce["ScryptedDeviceType"].Outlet:return"fa-plug";case ce["ScryptedDeviceType"].Sensor:return"fa-exclamation-triangle";case ce["ScryptedDeviceType"].Scene:return"fa-sun";case ce["ScryptedDeviceType"].Program:return"fa-code";case ce["ScryptedDeviceType"].Automation:return"fa-bolt";case ce["ScryptedDeviceType"].Event:return"fa-exclamation";case ce["ScryptedDeviceType"].Vacuum:return"fa-trash";case ce["ScryptedDeviceType"].Notifier:return"fa-bell";case ce["ScryptedDeviceType"].Lock:return"fa-unlock-alt";case ce["ScryptedDeviceType"].Thermostat:return"fa-thermometer-three-quarters";case ce["ScryptedDeviceType"].PasswordControl:return"fa-key";case ce["ScryptedDeviceType"].Display:return"fa-tv";case ce["ScryptedDeviceType"].Speaker:return"fa-volume-up";case ce["ScryptedDeviceType"].Entry:return"fa-warehouse";case ce["ScryptedDeviceType"].Garage:return"fa-warehouse";case ce["ScryptedDeviceType"].API:return"fa-cloud";case ce["ScryptedDeviceType"].DataSource:return"fa-chart-area";case ce["ScryptedDeviceType"].DeviceProvider:return"fa-server";case ce["ScryptedDeviceType"].Unknown:return"fa-question-circle";case ce["ScryptedDeviceType"].Valve:return"fa-faucet";case ce["ScryptedDeviceType"].Irrigation:return"fa-faucet";case ce["ScryptedDeviceType"].Person:return"fa-user";case ce["ScryptedDeviceType"].SecuritySystem:return"fa-shield-alt";case ce["ScryptedDeviceType"].Builtin:return"fa-server";case ce["ScryptedDeviceType"].Siren:return"fa-siren"}return"fa-toggle-on"}function ue(e){return"/web/component/"+e}function pe(e){return"/device/"+e}function me(e){return"/component/"+e}async function ve(e){const t=await this.$scrypted.systemManager.getComponent("alerts");await t.removeAlert(e),this.$store.commit("removeAlert",e._id)}function he(e){const t="/device/";if(e.path.startsWith(t)){const n=e.path.replace(t,""),i=this.$scrypted.systemManager.getDeviceById(n);return i?de(i.type):"fa-question"}return"fa-bell"}function ge(e,t){switch(e){case ce["ScryptedDeviceType"].Builtin:case ce["ScryptedDeviceType"].Program:case ce["ScryptedDeviceType"].Automation:case ce["ScryptedDeviceType"].API:case ce["ScryptedDeviceType"].Scene:case ce["ScryptedDeviceType"].Event:case ce["ScryptedDeviceType"].DeviceProvider:case ce["ScryptedDeviceType"].DataSource:case ce["ScryptedDeviceType"].Person:return!1}return!0}const fe=[];function ye(e,...t){fe.push({type:e,interfaces:t})}function be(e,t){for(const n of t)if(!e.includes(n))return!1;return!0}function Se(e,t,n){if(t===ce["ScryptedDeviceType"].Unknown)return Object.values(ce["ScryptedDeviceType"]).filter(e=>e!==ce["ScryptedDeviceType"].Builtin);const i=new Set;e&&i.add(e),t&&i.add(t),fe.filter(e=>be(n,e.interfaces)).forEach(e=>i.add(e.type));for(const r of n)-1!==r.indexOf("Sensor")&&i.add(ce["ScryptedDeviceType"].Sensor);return[...i]}ye(ce["ScryptedDeviceType"].Display,ce["ScryptedInterface"].MediaPlayer),ye(ce["ScryptedDeviceType"].Speaker,ce["ScryptedInterface"].MediaPlayer),ye(ce["ScryptedDeviceType"].Lock,ce["ScryptedInterface"].Lock),ye(ce["ScryptedDeviceType"].PasswordControl,ce["ScryptedInterface"].PasswordStore),ye(ce["ScryptedDeviceType"].Camera,ce["ScryptedInterface"].Camera),ye(ce["ScryptedDeviceType"].Camera,ce["ScryptedInterface"].VideoCamera),ye(ce["ScryptedDeviceType"].Camera,ce["ScryptedInterface"].RTCSignalingChannel),ye(ce["ScryptedDeviceType"].Doorbell,ce["ScryptedInterface"].VideoCamera),ye(ce["ScryptedDeviceType"].Doorbell,ce["ScryptedInterface"].RTCSignalingChannel),ye(ce["ScryptedDeviceType"].Thermostat,ce["ScryptedInterface"].TemperatureSetting),ye(ce["ScryptedDeviceType"].Garage,ce["ScryptedInterface"].Entry),ye(ce["ScryptedDeviceType"].Entry,ce["ScryptedInterface"].Entry),ye(ce["ScryptedDeviceType"].Light,ce["ScryptedInterface"].Brightness),ye(ce["ScryptedDeviceType"].Outlet,ce["ScryptedInterface"].OnOff),ye(ce["ScryptedDeviceType"].Switch,ce["ScryptedInterface"].OnOff),ye(ce["ScryptedDeviceType"].Light,ce["ScryptedInterface"].OnOff),ye(ce["ScryptedDeviceType"].Fan,ce["ScryptedInterface"].OnOff),ye(ce["ScryptedDeviceType"].Sensor,ce["ScryptedInterface"].Thermometer),ye(ce["ScryptedDeviceType"].DeviceProvider,ce["ScryptedInterface"].DeviceProvider);const _e=new Map;function xe(e){return _e.get(e)||e.toString()}_e.set(ce["ScryptedInterface"].MixinProvider,"Compatible Things"),_e.set(ce["ScryptedInterface"].DeviceProvider,"Providing Things"),_e.set(ce["ScryptedInterface"].VideoClips,"Video Clips"),_e.set(ce["ScryptedInterface"].Notifier,"Send Notification"),_e.set(ce["ScryptedInterface"].PasswordStore,"Passwords"),_e.set(ce["ScryptedInterface"].Brightness,"Adjust Brightness");var we=n("8d61"),Ce=n.n(we),Pe=n("2ce1");async function ke(e,t,n,i){const r=await e.getComponent("plugins");let a=(t.mixins||[]).slice();i?a.push(n):a=a.filter(e=>n!==e),r.setMixins(t.id,a)}function De(e){return Object.keys(e.getSystemState()).map(t=>e.getDeviceById(t)).filter(e=>!!e)}async function Ie(e,t){const n=await Promise.all(De(e).map(async e=>{try{if(e.interfaces.includes(ce["ScryptedInterface"].MixinProvider)){const n=await Object(Pe["a"])(5e3,e.canMixin(t.type,t.interfaces));if(n)return e}}catch(n){console.warn(e.name,"canMixin error",n)}}));return n.filter(e=>!!e)}async function Te(e,t){const n=De(e),i=await Promise.all(n.map(async e=>{var n;try{if((null===(n=e.mixins)||void 0===n?void 0:n.includes(t.id))||await t.canMixin(e.type,e.interfaces))return e}catch(i){}})),r=i.filter(e=>!!e).sort((e,t)=>e.id<t.id?-1:1);return r.map(e=>{var n;return{id:e.id,name:e.name,type:e.type,enabled:null===(n=e.mixins)||void 0===n?void 0:n.includes(t.id)}})}const Oe=n("87c4").default.split("\n").filter(e=>!e.includes("SCRYPTED_FILTER_EXAMPLE_LINE")).join("\n").trim(),Ve=ue("script");async function Me(e,t){let n;try{n=await ae.a.get("https://registry.npmjs.org/"+e)}catch(c){n=await ae.a.get(`${Ve}/npm/${e}`)}const{data:i}=n,r=Object.values(i.versions).sort((e,t)=>Ce.a.compare(e.version,t.version)).reverse();let a,s;i["dist-tags"]&&(s=i["dist-tags"].latest,t&&Ce.a.gt(s,t)&&(a=s));for(const[l,d]of Object.entries(i["dist-tags"])){const e=r.find(e=>e.version===d);e&&(e.tag=l)}const o=r.find(e=>e.version===t);if(o&&(o.tag="installed"),s){const e=r.findIndex(e=>e.version===s),[t]=r.splice(e,1);r.unshift(t)}return{updateAvailable:a,versions:r}}async function Re(e,t,n){let i=n?"/"+n:"";const r=await ae.a.post(`${Ve}/install/${t}${i}`);return r.data.id}function Ee(e){return"https://www.npmjs.com/package/"+e}function Le(e,t,n){const i=De(e).find(e=>e.pluginId===t&&e.nativeId===n);return null===i||void 0===i?void 0:i.id}async function ze(e){const{systemManager:t,deviceManager:n}=e,i=Le(t,"@scrypted/core","scriptcore"),r=t.getDeviceById(i),a=await r.createDevice({}),s="Plugins Snapshot: "+(new Date).toDateString(),o=t.getDeviceById(a);await o.setName(s);const c={};Object.keys(t.getSystemState()).map(e=>t.getDeviceById(e)).filter(e=>e.interfaces.includes(ce["ScryptedInterface"].ScryptedPlugin)).forEach(e=>c[e.info.manufacturer]=e.info.version);const l=`const snapshot = ${JSON.stringify(c,void 0,2)};\n${Oe}`;return console.log(l),await o.saveScript({script:`// Running the script will restore your plugins to the versions\n// contained in this snapshot. Your settings will remain.\n// You can view the progress and errors in the console.\nconst snapshot = ${JSON.stringify(c,void 0,2)};\n${Oe}`}),a}var Ae={props:{value:Object,components:{type:Array,default(){return[{id:"automation",name:"Automations",icon:"fa-bolt",category:"Components"},{id:"aggregate",name:"Device Groups",icon:"fa-folder-plus",category:"Components"},{id:"script",name:"Scripts",icon:"fa-terminal",category:"Components"},{id:"users",name:"Users",icon:"fa-users",category:"Utilities"},{id:"shell",name:"Terminal",icon:"fa-terminal",category:"Utilities"},{id:"settings",name:"Settings",icon:"fa-cog",category:"Utilities"}]}}},mounted(){this.checkUpdateAvailable()},computed:{scryptedVersion(){return this.$store.state.version}},methods:{getComponentViewPath:me,async checkUpdateAvailable(){await this.$connectingScrypted;const e=await this.$scrypted.systemManager.getComponent("info"),t=await e.getVersion();this.currentVersion=t;const{updateAvailable:n}=await Me("@scrypted/server",t);if(this.updateAvailable=n,n){const e=this.$scrypted.deviceManager.getDeviceLogger(),t=new URL(window.location);t.hash="#/component/settings",e.clearAlerts(),e.a(`Scrypted Server update available: ${n}. ${t}`)}},filterComponents:function(e){return this.components.filter(t=>t.category==e)}},data:function(){return{updateAvailable:null,actives:{},builtinComponents:[{id:"plugin",name:"Plugins",icon:"fa-puzzle-piece",path:"/component/plugin"},{id:"devices",name:"Devices",icon:"fa-list",path:"/device",active:!1}],categories:["Components","Utilities"]}}},je=Ae,$e=n("ce7e"),Be=n("8860"),Ne=n("da13"),Ue=n("5d23"),Fe=n("34c3"),He=n("f774"),qe=n("e0c7"),Ge=Object(j["a"])(je,se,oe,!1,null,"7b901212",null),We=Ge.exports;B()(Ge,{VDivider:$e["a"],VIcon:J["a"],VList:Be["a"],VListItem:Ne["a"],VListItemContent:Ue["a"],VListItemIcon:Fe["a"],VListItemTitle:Ue["c"],VNavigationDrawer:He["a"],VSubheader:qe["a"]});var Ye=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",{attrs:{wrap:""}},[e.deviceAlerts.length?n("v-flex",{attrs:{xs12:""}},e._l(e.deviceAlerts,(function(t){return n("v-alert",{key:t.id,attrs:{dark:"",dismissible:"",xs12:"",md6:"",lg6:"",color:"primary",icon:"mdi-vuetify",border:"left"},on:{input:function(n){return e.removeAlert(t)}},scopedSlots:e._u([{key:"prepend",fn:function(){return[n("v-icon",{staticClass:"white--text mr-3",attrs:{size:"sm",color:"#a9afbb"}},[e._v(e._s(e.getAlertIcon(t)))])]},proxy:!0}],null,!0)},[n("div",{staticClass:"caption"},[e._v(e._s(t.title))]),n("div",{directives:[{name:"linkified",rawName:"v-linkified:options",value:{className:"alert-link"},expression:"{ className: 'alert-link' }",arg:"options"}],domProps:{innerHTML:e._s(t.message.replace("origin:",e.origin))}})])})),1):e._e(),e._l(e.aboveInterfaces,(function(t){return n("v-flex",{key:t,attrs:{xs12:""}},[e.noCardInterfaces.includes(t)?n(t,{tag:"component",attrs:{value:e.deviceState,device:e.device}}):n("v-card",[n("CardTitle",[e._v(e._s(e.getInterfaceFriendlyName(t)))]),n(t,{tag:"component",attrs:{value:e.deviceState,device:e.device}})],1)],1)})),e.showConsole?n("v-flex",{ref:"consoleEl",attrs:{xs12:""}},[n("ConsoleCard",{attrs:{deviceId:e.id}})],1):e._e(),e.showRepl?n("v-flex",{ref:"replEl",attrs:{xs12:""}},[n("REPLCard",{attrs:{deviceId:e.id}})],1):e._e(),n("v-flex",{attrs:{xs12:"",md7:""}},[n("v-layout",{attrs:{row:"",wrap:""}},[e._l(e.leftAboveInterfaces,(function(t){return n("v-flex",{key:t,staticClass:"pb-0",attrs:{xs12:""}},[e.noCardInterfaces.includes(t)?n(t,{tag:"component",attrs:{value:e.deviceState,device:e.device}}):n("v-card",[n("CardTitle",[e._v(e._s(e.getInterfaceFriendlyName(t)))]),n(t,{tag:"component",attrs:{value:e.deviceState,device:e.device}})],1)],1)})),n("v-flex",{staticClass:"pb-0",attrs:{xs12:""}},[n("v-card",{attrs:{raised:""}},[n("v-card-title",[e._v(" "+e._s(e.device&&e.device.name||"No Device Name")+" "),e.cardHeaderInterfaces.length?n("v-layout",{attrs:{"mr-1":"",row:"","justify-end":"","align-center":""}},e._l(e.cardHeaderInterfaces,(function(t){return n(t,{key:t,tag:"component",attrs:{value:e.deviceState,device:e.device}})})),1):e._e()],1),e.ownerDevice&&e.pluginData?n("v-card-subtitle",[n("a",{on:{click:function(t){return e.openDevice(e.ownerDevice.id)}}},[e._v(e._s(e.ownerDevice.name))]),e._v(" (Native ID: "+e._s(e.pluginData.nativeId)+") "),n("div")]):e._e(),e.cardButtonInterfaces.length?n("v-flex",[n("v-layout",{attrs:{"align-center":"","justify-center":""}},e._l(e.cardButtonInterfaces,(function(t){return n(t,{key:t,tag:"component",attrs:{value:e.deviceState,device:e.device}})})),1)],1):e._e(),e.ownerDevice?e._e():n("v-card-actions",[n("v-spacer"),n("v-btn",{staticClass:"mr-2",attrs:{small:"",outlined:"",color:"blue"},on:{click:e.reloadPlugin}},[e._v("Reload Plugin")]),e.pluginData?n("PluginAdvancedUpdate",{attrs:{pluginData:e.pluginData},on:{installed:e.reload}}):e._e()],1),n("v-card-actions",[e._l(e.cardActionInterfaces,(function(t){return n(t,{key:t,tag:"component",attrs:{value:e.deviceState,device:e.device}})})),n("v-spacer"),n("v-btn",{attrs:{color:"info",text:""},on:{click:e.openConsole}},[e._v("Console")]),e.device.info&&e.device.info.managementUrl?n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[n("v-btn",e._g({attrs:{"x-small":"",color:"info",text:""},on:{click:e.openManagementUrl}},i),[n("v-icon",{attrs:{"x-small":""}},[e._v("fa-wrench")])],1)]}}],null,!1,2316656933)},[n("span",[e._v("Open Device Management Url")])]):e._e(),n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[n("v-btn",e._g({attrs:{"x-small":"",color:"info",text:""},on:{click:e.openRepl}},i),[n("v-icon",{attrs:{"x-small":""}},[e._v("fa-terminal")])],1)]}}])},[n("span",[e._v("REPL")])]),n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[n("v-btn",e._g({attrs:{"x-small":"",color:"info",text:""},on:{click:e.openLogs}},i),[n("v-icon",{attrs:{"x-small":""}},[e._v("fa-history")])],1)]}}])},[n("span",[e._v("Events")])]),e.pluginData?n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[n("v-btn",e._g({attrs:{"x-small":"",color:"info",text:""},on:{click:function(t){e.showStorage=!e.showStorage}}},i),[n("v-icon",{attrs:{"x-small":""}},[e._v("fa-hdd")])],1)]}}],null,!1,3804361845)},[n("span",[e._v("Storage")])]):e._e(),n("v-dialog",{attrs:{width:"500"},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("v-btn",e._g({attrs:{"x-small":"",color:"error",text:""}},Object.assign({},r,i)),[n("v-icon",{attrs:{"x-small":""}},[e._v("fa-trash")])],1)]}}],null,!0)},[n("span",[e._v("Delete")])])]}}]),model:{value:e.showDelete,callback:function(t){e.showDelete=t},expression:"showDelete"}},[n("v-card",[n("CardTitle",{staticClass:"red white--text",staticStyle:{"margin-bottom":"8px"},attrs:{"primary-title":""}},[e._v("Delete Device")]),n("v-card-text",[e._v("This will permanently delete the device. It can not be undone.")]),n("v-divider"),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"primary",text:""},on:{click:function(t){e.showDelete=!1}}},[e._v("Cancel")]),n("v-btn",{attrs:{color:"red",text:""},on:{click:e.remove}},[e._v("Delete Device")])],1)],1)],1)],2)],1)],1),e.deviceComponent&&"Script"!==e.deviceComponent?n("v-flex",{attrs:{xs12:""}},[n(e.deviceComponent,{ref:"componentCard",tag:"component",attrs:{id:e.id},on:{save:e.saveStorage},model:{value:e.deviceData,callback:function(t){e.deviceData=t},expression:"deviceData"}})],1):e._e(),e._l(e.leftInterfaces,(function(t){return n("v-flex",{key:t,staticClass:"pb-0",attrs:{xs12:""}},[e.noCardInterfaces.includes(t)?n(t,{tag:"component",attrs:{value:e.deviceState,device:e.device}}):n("v-card",[n("CardTitle",[e._v(e._s(e.getInterfaceFriendlyName(t)))]),n(t,{tag:"component",attrs:{value:e.deviceState,device:e.device}})],1)],1)})),e.showStorage?n("v-flex",{attrs:{xs12:""}},[n("v-card",{attrs:{raised:""}},[n("CardTitle",[e._v("Storage")]),n("v-container",[n("v-layout",[n("v-flex",{attrs:{xs12:""}},[n("Storage",{on:{input:e.onChange,save:e.saveStorage},model:{value:e.pluginData.storage,callback:function(t){e.$set(e.pluginData,"storage",t)},expression:"pluginData.storage"}})],1)],1)],1)],1)],1):e._e()],2)],1),n("v-flex",{attrs:{xs12:"",md5:""}},[n("v-layout",{attrs:{row:"",wrap:""}},[e._l(e.rightInterfaces,(function(t){return n("v-flex",{key:t,staticClass:"pb-0",attrs:{xs12:""}},[e.noCardInterfaces.includes(t)?n(t,{tag:"component",attrs:{value:e.deviceState,device:e.device}}):n("v-card",[n("CardTitle",[e._v(e._s(e.getInterfaceFriendlyName(t)))]),n(t,{tag:"component",attrs:{value:e.deviceState,device:e.device}})],1)],1)})),e.showLogs?n("v-flex",{ref:"logsEl"},[n("LogCard",{attrs:{rows:15,logRoute:"/device/"+e.id+"/"}})],1):e._e(),e.device.interfaces.includes(e.ScryptedInterface.Settings)||!e.availableMixins.length&&!e.deviceIsEditable(e.device)?e._e():n("v-flex",{attrs:{xs12:""}},[n("Settings",{attrs:{device:e.device}})],1)],2)],1)],2)},Je=[],Ke=n("4971"),Ze=n.n(Ke),Xe=(n("8445"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{attrs:{raised:""}},[n("v-toolbar",{attrs:{dark:"",color:"blue"}},[e._v(" Events "),n("v-spacer"),n("v-text-field",{attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e.$vuetify.breakpoint.mdAndUp?n("v-data-table",{attrs:{headers:e.headers,items:e.logs,"disable-sort":"","items-per-page":e.rows,search:e.search},scopedSlots:e._u([{key:"item.date",fn:function(t){var i=t.item;return[n("pre",{staticClass:"caption"},[e._v(e._s(new Date(i.timestamp).toLocaleTimeString()))])]}},{key:"item.pri",fn:function(t){var i=t.item;return[n("v-chip",{attrs:{"x-small":"",color:e.priToColor(i.level)}},[e._v(e._s(i.level))])]}},{key:"item.log",fn:function(t){var i=t.item;return[n("pre",{staticClass:"caption"},[e._v(e._s(i.message))])]}}],null,!0)}):n("v-card-text",{attrs:{light:""}},e._l(e.logs.slice(0,100),(function(t,i){return n("div",{key:i},[n("pre",{staticClass:"caption"},[e._v(e._s(new Date(t.timestamp||Date.now()).toLocaleTimeString()))]),n("pre",{staticClass:"caption"},[e._v(e._s(t.message))]),n("div",[e._v(e._s(t.date))])])})),0)],1)}),Qe=[],et={props:{logRoute:{type:String},rows:{type:Number,default:500}},disconnect:null,watch:{logRoute:{deep:!0,handler(){var e;null===(e=this.disconnect)||void 0===e||e.call(this),this.connect()}}},data(){return{search:"",logs:[],headers:[{text:"Time",value:"date",width:40},{text:"Priority",value:"pri",width:40},{text:"Message",value:"log"}]}},methods:{priToColor(e){switch(e.toUpperCase()){case"E":return"error";case"I":return"info";case"W":return"warning";case"V":return"success"}},async connect(){let e=await this.$scrypted.systemManager.getComponent("logger");const t=this.logRoute.split("/");for(const i of t)i&&(e=await e.getLogger(i));this.logs.push(...await e.getLogs()),this.logs.reverse();const n=e=>{this.logs.unshift(e)};this.disconnect=()=>{this.disconnect=null,e.removeListener("log",n)},e.on("log",n)}},destroyed(){this.disconnect()},mounted(){this.connect()}},tt=et,nt=n("cc20"),it=n("8fea"),rt=n("71d9"),at=Object(j["a"])(tt,Xe,Qe,!1,null,null,null),st=at.exports;B()(at,{VCard:U["a"],VCardText:F["c"],VChip:nt["a"],VDataTable:it["a"],VSpacer:Z["a"],VTextField:X["a"],VToolbar:rt["a"]});var ot=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{attrs:{raised:""}},[n("v-toolbar",{attrs:{dark:"",color:"blue"}},[e._v(" Console "),n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[n("v-btn",e._g({attrs:{text:""},on:{click:e.copy}},i),[n("v-icon",{attrs:{small:""}},[e._v(" far fa-copy")])],1)]}}])},[n("span",[e._v("Copy")])]),n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[n("v-btn",e._g({attrs:{text:""},on:{click:function(t){e.expanded=!e.expanded}}},i),[n("v-icon",{attrs:{"x-small":""}},[e._v("fa-angle-double-down")])],1)]}}])},[n("span",[e._v("Toggle Expand")])]),n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[n("v-btn",e._g({attrs:{text:""},on:{click:e.clear}},i),[n("v-icon",{attrs:{small:""}},[e._v(" fas fa-trash")])],1)]}}])},[n("span",[e._v("Clear")])])],1),n("div",{ref:"terminal"})],1)},ct=[],lt=n("72a3"),dt=lt["a"],ut=Object(j["a"])(dt,ot,ct,!1,null,null,null),pt=ut.exports;B()(ut,{VBtn:N["a"],VCard:U["a"],VIcon:J["a"],VToolbar:rt["a"],VTooltip:Q["a"]});var mt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{attrs:{raised:""}},[n("v-toolbar",{attrs:{dark:"",color:"blue"}},[e._v(" JavaScript REPL ")]),n("div",{ref:"terminal"})],1)},vt=[],ht=n("fcf3"),gt=n("47d0"),ft=n("94ac"),yt=n.n(ft),bt={props:["deviceId"],socket:null,mounted(){const e=new ht["Terminal"]({theme:this.$vuetify.theme.dark?void 0:{foreground:"black",background:"white",cursor:"black"},convertEol:!0}),t=new gt["FitAddon"];e.loadAddon(t),e.open(this.$refs.terminal),t.fit();const n="/endpoint/@scrypted/core",i={path:`${n}/engine.io/repl/${this.deviceId}`},r=`${window.location.protocol}//${window.location.host}`;this.socket=yt()(r,i),this.socket.on("message",t=>{e.write(new Uint8Array(t))}),e.onData(e=>{this.socket.send(e)}),e.onBinary(e=>{this.socket.send(e)})},destroyed(){var e;null===(e=this.socket)||void 0===e||e.close()}},St=bt,_t=Object(j["a"])(St,mt,vt,!1,null,null,null),xt=_t.exports;B()(_t,{VCard:U["a"],VToolbar:rt["a"]});var wt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-btn",{attrs:{block:""},on:{click:e.streamCamera}},[e._v("Stream Web Camera")])],1)},Ct=[],Pt=n("ce2e"),kt=n("b8ca"),Dt={mixins:[Pt["a"]],data(){return{pc:null}},destroyed(){this.cleanupPeerConnection()},methods:{cleanupPeerConnection(){var e;null===(e=this.pc)||void 0===e||e.close(),this.pc=void 0},async streamCamera(){this.cleanupPeerConnection(),await navigator.mediaDevices.getUserMedia({video:!0,audio:!0});const e=new kt["a"];e.pcDeferred.promise.then(e=>{this.pc=e,e.ontrack=e=>{if("audio"===e.track.kind){console.log("received audio track",e.track);const t=new MediaStream([e.track]),n=document.createElement("audio");n.srcObject=t,n.play()}}});const t=await this.rpc().createRTCSignalingSession();Object(kt["b"])(console,e,{audio:{direction:"sendrecv"},video:{direction:"sendrecv"}},t,{audio:{direction:"sendrecv"},video:{direction:"sendrecv"}})}}},It=Dt,Tt=Object(j["a"])(It,wt,Ct,!1,null,null,null),Ot=Tt.exports;B()(Tt,{VBtn:N["a"],VContainer:q["a"]});var Vt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-container",[n("v-layout",[n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{dense:"",label:"Notification Title",outlined:""},on:{input:e.onChange},model:{value:e.lazyValue.notificationTitle,callback:function(t){e.$set(e.lazyValue,"notificationTitle",t)},expression:"lazyValue.notificationTitle"}}),n("v-text-field",{attrs:{dense:"",label:"Notification Body",outlined:""},on:{input:e.onChange},model:{value:e.lazyValue.notificationBody,callback:function(t){e.$set(e.lazyValue,"notificationBody",t)},expression:"lazyValue.notificationBody"}}),n("v-combobox",{attrs:{dense:"",items:e.mediaInterfaces,label:"Notification Media URL",outlined:"","return-object":!1},on:{input:e.onChange},model:{value:e.lazyValue.notificationMediaUrl,callback:function(t){e.$set(e.lazyValue,"notificationMediaUrl",t)},expression:"lazyValue.notificationMediaUrl"}})],1)],1)],1),e.device?n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{text:""},on:{click:e.send}},[e._v("Send")])],1):e._e()],1)},Mt=[],Rt=n("0644"),Et=n.n(Rt);const Lt=[ce["ScryptedInterface"].VideoCamera,ce["ScryptedInterface"].Camera];var zt={mixins:[Pt["a"]],methods:{ensureString(e,t){return void 0===e?t:e},update(){this.lazyValue.notificationMediaUrl.length?this.rpc().sendNotification(this.lazyValue.notificationTitle,{body:this.lazyValue.notificationBody},this.lazyValue.notificationMediaUrl):this.rpc().sendNotification(this.lazyValue.notificationTitle,{body:this.lazyValue.notificationBody})},createLazyValue(){var e=Et()(this.value);return e.notificationTitle=this.ensureString(e.notificationTitle,"Scrypted Notification"),e.notificationBody=this.ensureString(e.notificationBody,"This is a message from Scrypted"),e.notificationMediaUrl=this.ensureString(e.notificationMediaUrl,"https://home.scrypted.app/_punch/web_hi_res_512.png"),e},onChange:function(){this.device||this.update()},send(){this.update()}},computed:{mediaInterfaces(){const e=[];for(const t of Object.keys(this.$scrypted.systemManager.getSystemState())){const n=this.$scrypted.systemManager.getDeviceById(t);for(const i of[...new Set(n.interfaces)])Lt.includes(i)&&e.push({value:`scrypted-media://${t}/${i}`,text:`${n.name} (${i})`})}return e}}},At=zt,jt=n("2b5d"),$t=Object(j["a"])(At,Vt,Mt,!1,null,null,null),Bt=$t.exports;B()($t,{VBtn:N["a"],VCardActions:F["a"],VCombobox:jt["a"],VContainer:q["a"],VFlex:W["a"],VLayout:K["a"],VSpacer:Z["a"],VTextField:X["a"]});var Nt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-switch",{staticClass:"mt-0",staticStyle:{"margin-bottom":"-20px"},attrs:{inset:"",label:e.device?void 0:e.label,color:"info"},on:{click:function(t){return t.target!==t.currentTarget?null:e.onClick.apply(null,arguments)},change:e.onChange},model:{value:e.lazyValue.on,callback:function(t){e.$set(e.lazyValue,"on",t)},expression:"lazyValue.on"}})},Ut=[],Ft={mixins:[Pt["a"]],computed:{label(){return this.lazyValue.on?"On":"Off"}},methods:{turnOn:function(){this.rpc().turnOn()},turnOff:function(){this.rpc().turnOff()},onClick(){this.device&&(this.lazyValue.on?this.turnOn():this.turnOff())},onChange:function(){this.lazyValue.on?this.turnOn():this.turnOff()}}},Ht=Ft,qt=n("b73d"),Gt=Object(j["a"])(Ht,Nt,Ut,!1,null,null,null),Wt=Gt.exports;B()(Gt,{VSwitch:qt["a"]});var Yt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-slider",{staticClass:"mx-5 mt-2",attrs:{"thumb-size":"20","thumb-label":"always",dense:"","append-icon":"brightness_high","prepend-icon":"brightness_low"},on:{change:e.onChange},model:{value:e.lazyValue.brightness,callback:function(t){e.$set(e.lazyValue,"brightness",t)},expression:"lazyValue.brightness"}})},Jt=[],Kt=n("0f32"),Zt=n.n(Kt),Xt={mixins:[Pt["a"]],methods:{debounceSetBrightness:Zt()((function(){this.rpc().setBrightness(this.lazyValue.brightness)}),500),onChange(){this.device?this.debounceSetBrightness():this.rpc().setBrightness(this.lazyValue.brightness)}}},Qt=Xt,en=n("ba0d"),tn=Object(j["a"])(Qt,Yt,Jt,!1,null,null,null),nn=tn.exports;B()(tn,{VSlider:en["a"]});var rn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("font-awesome-icon",{staticClass:"white--text mr-1 mr-1",attrs:{size:"sm",icon:e.batteryIcon,color:"#a9afbb"}}),n("span",{staticClass:"caption mr-1"},[e._v(e._s(e.lazyValue.batteryLevel)+"%")])],1)},an=[],sn={mixins:[Pt["a"]],computed:{batteryIcon(){return this.lazyValue.batteryLevel>80?"battery-full":this.lazyValue.batteryLevel>60?"battery-three-quarters":this.lazyValue.batteryLevel>40?"battery-half":this.lazyValue.batteryLevel>20?"battery-quarter":"battery-empty"}}},on=sn,cn=Object(j["a"])(on,rn,an,!1,null,null,null),ln=cn.exports,dn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-tooltip",{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[e.lazyValue.chargeState===e.Charging?n("v-icon",e._g({staticClass:"mr-1 mr-1",attrs:{small:""}},i),[e._v("fa-plug")]):e.lazyValue.chargeState==e.Trickle?n("v-icon",e._g({staticClass:"mr-1 mr-1",attrs:{small:""}},i),[e._v("fa-plug-circle-minus")]):n("v-icon",e._g({staticClass:"mr-1 mr-1",attrs:{small:""}},i),[e._v("fa-plug-circle-xmark")])]}}])},[n("span",[e._v(e._s(e.chargeText))])])},un=[],pn={mixins:[Pt["a"]],data(){return{Charging:ce["ChargeState"].Charging,Trickle:ce["ChargeState"].Trickle,NotCharging:ce["ChargeState"].NotCharging}},computed:{chargeText(){return"trickle"===this.lazyValue.chargeState?"Trickle Charging":"charging"===this.lazyValue.chargeState?"Charging":"Not Charging"}}},mn=pn,vn=Object(j["a"])(mn,dn,un,!1,null,null,null),hn=vn.exports;B()(vn,{VIcon:J["a"],VTooltip:Q["a"]});var gn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{attrs:{shrink:""}},[n("v-btn",{staticClass:"mx-2",attrs:{fab:"",color:"Locked"===e.lazyValue.lockState?"#a9afbb":"orange",dark:""},on:{click:e.unlock}},[n("v-icon",[e._v("lock_open")])],1),n("v-btn",{staticClass:"mx-2",attrs:{fab:"",color:"Locked"===e.lazyValue.lockState?"green":"#a9afbb",dark:""},on:{click:e.lock}},[n("v-icon",[e._v("lock")])],1)],1)},fn=[],yn={mixins:[Pt["a"]],methods:{lock:function(){this.lazyValue.lockState="Locked",this.onChange()},unlock:function(){this.lazyValue.lockState="Unlocked",this.onChange()},onChange:function(){"Unlocked"!==this.lazyValue.lockState?this.rpc().lock():this.rpc().unlock()}}},bn=yn,Sn=Object(j["a"])(bn,gn,fn,!1,null,null,null),_n=Sn.exports;B()(Sn,{VBtn:N["a"],VIcon:J["a"]});var xn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-flex",{attrs:{xs12:""}},[n("v-layout",{attrs:{"align-center":"","justify-center":""}},[n("ColorPicker",e._b({staticStyle:{"margin-bottom":"16px"},attrs:{variant:"persistent"},on:{input:e.onInputValue}},"ColorPicker",e.color,!1))],1)],1)},wn=[],Cn=n("1ba3"),Pn={mixins:[Pt["a"]],components:{ColorPicker:Cn["a"]},methods:{createLazyValue(){var e=Et()(this.value);return e.hsv=Object.assign({h:360,s:1,v:1},{h:this.value.hsv&&this.value.hsv.h}),e},debounceSetHsv:Zt()((function(){const{h:e,s:t,v:n}=this.lazyValue.hsv;this.rpc().setHsv(e,t,n)}),500),onChange(){if(this.device)return void this.debounceSetHsv();const{h:e,s:t,v:n}=this.lazyValue.hsv;this.rpc().setHsv(e,t,n)},onInputValue(e){this.lazyValue.hsv.h=e,this.onChange()}},computed:{color(){return{hue:this.lazyValue.hsv.h}}}},kn=Pn,Dn=(n("7f8e"),Object(j["a"])(kn,xn,wn,!1,null,null,null)),In=Dn.exports;B()(Dn,{VFlex:W["a"],VLayout:K["a"]});var Tn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",{attrs:{"align-center":"","justify-center":""}},[n("ColorPicker",e._b({staticStyle:{"margin-bottom":"16px"},attrs:{variant:"persistent"},on:{input:e.onInputValue}},"ColorPicker",e.color,!1))],1)},On=[],Vn={mixins:[Pt["a"]],components:{ColorPicker:Cn["a"]},methods:{rgbToHsv(e,t,n){e/=255,t/=255,n/=255;var i,r,a=Math.max(e,t,n),s=Math.min(e,t,n),o=a,c=a-s;if(r=0==a?0:c/a,a==s)i=0;else{switch(a){case e:i=(t-n)/c+(t<n?6:0);break;case t:i=(n-e)/c+2;break;case n:i=(e-t)/c+4;break}i/=6}return{h:i,s:r,v:o}},hsvToRgb(e,t,n){var i,r,a,s=Math.floor(6*e),o=6*e-s,c=n*(1-t),l=n*(1-o*t),d=n*(1-(1-o)*t);switch(s%6){case 0:i=n,r=d,a=c;break;case 1:i=l,r=n,a=c;break;case 2:i=c,r=n,a=d;break;case 3:i=c,r=l,a=n;break;case 4:i=d,r=c,a=n;break;case 5:i=n,r=c,a=l;break}return{r:255*i,g:255*r,b:255*a}},createLazyValue(){var e=Et()(this.value);const{r:t,g:n,b:i}=Object.assign({r:255,g:255,b:255},this.value.rgb),r=this.rgbToHsv(t,n,i);return r.h*=360,r.s=1,r.v=1,e.hsv=r,e},createInputValue(){const{h:e,s:t,v:n}=this.lazyValue.hsv,i=this.hsvToRgb(e/360,t,n);var r=Et()(this.lazyValue);return delete r.hsv,r.rgb=i,r},debounceSetRgb:Zt()((function(){const{h:e,s:t,v:n}=this.lazyValue.hsv,{r:i,g:r,b:a}=this.hsvToRgb(e/360,t,n);this.rpc().setRgb(i,r,a)}),500),onChange(){if(this.device)return void this.debounceSetRgb();const{h:e,s:t,v:n}=this.lazyValue.hsv,{r:i,g:r,b:a}=this.hsvToRgb(e/360,t,n);this.rpc().setRgb(i,r,a)},onInputValue(e){this.lazyValue.hsv.h=e,this.onChange()}},computed:{color(){return{hue:this.lazyValue.hsv.h}}}},Mn=Vn,Rn=(n("a84e"),Object(j["a"])(Mn,Tn,On,!1,null,null,null)),En=Rn.exports;B()(Rn,{VLayout:K["a"]});var Ln=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-btn",{attrs:{text:"",color:"primary"},on:{click:e.onClick}},[e._v("Login")])},zn=[],An=n("72bf"),jn=n.n(An),$n={mixins:[Pt["a"]],methods:{onChange(){},isIFrame(){try{return window.self!==window.top}catch(e){return!0}},onClick:function(){const e=this.isIFrame()?window.open(void 0,"_blank"):void 0;this.rpc().getOauthUrl().then(t=>{var n=new URL(t),i=jn.a.parse(n.search.replace("?",""));let{redirect_uri:r}=i;if(r){let e;try{e=new URL(r)}catch(a){const t=new URL(document.baseURI),n=new URL("../../../../",t);e=new URL("."+r,n),e.hostname="localhost"}"localhost"===e.hostname&&(e.hostname=new URL(window.location.href).hostname,r=e.toString())}else r="https://home.scrypted.app/web/oauth/callback";i.redirect_uri=r,i.state=JSON.stringify({d:this.device.id,s:i.state,r:window.location.toString()}),n.search=jn.a.stringify(i),e?e.location=n.toString():window.location=n.toString()})}}},Bn=$n,Nn=Object(j["a"])(Bn,Ln,zn,!1,null,null,null),Un=Nn.exports;B()(Nn,{VBtn:N["a"]});var Fn=n("bb90"),Hn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.playDialog?n("v-dialog",{model:{value:e.playDialog,callback:function(t){e.playDialog=t},expression:"playDialog"}},[n("video",{attrs:{src:e.playUrl,controls:"",autoplay:""}})]):e._e(),e._l(e.pageClips,(function(t,i){return n("v-list-item",{key:t.id,on:{click:function(n){return e.playClip(t,i)}}},[n("v-img",{staticClass:"mr-2",attrs:{src:e.pageThumbnails[i],contain:"","max-height":"100px","max-width":"100px"}}),n("v-list-item-content",[n("v-list-item-title",[e._v(" "+e._s(e.localTime(t.startTime))+" ")]),n("v-list-item-subtitle",[e._v(" "+e._s(t.duration/1e3)+"s ")]),t.description?n("v-list-item-subtitle",[e._v(" "+e._s(t.description)+" ")]):e._e()],1),n("v-list-item-action",[n("v-btn",{attrs:{text:"","x-small":""},on:{click:function(n){return n.stopPropagation(),e.downloadClip(t)}}},[n("v-icon",{attrs:{"x-small":""}},[e._v("fa fa-download")])],1)],1),n("v-list-item-action",[n("v-btn",{attrs:{text:"","x-small":""},on:{click:function(n){return n.stopPropagation(),e.removeClip(t)}}},[n("v-icon",{attrs:{"x-small":"",color:"red",small:""}},[e._v("fa fa-trash")])],1)],1)],1)})),e.pages?n("div",{staticClass:"text-center"},[n("v-pagination",{attrs:{length:e.pages},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}})],1):n("v-card-text",[e._v("No clips found.")]),n("v-card-actions",[n("v-dialog",{attrs:{width:"unset"},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[n("v-btn",e._g({attrs:{small:""}},i),[n("v-icon",{attrs:{"x-small":""}},[e._v("fa fa-calendar-alt")]),e._v("  "+e._s(new Date(e.date).getFullYear())+"-"+e._s(new Date(e.date).getMonth())+"-"+e._s(new Date(e.date).getDate())+" ")],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("vc-date-picker",{attrs:{mode:"date"},on:{input:e.onDate},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1)],1),e.pages?n("v-btn",{attrs:{text:"",small:"",disabled:""}},[e._v(e._s(e.pageRange))]):e._e(),n("v-spacer"),e.pages?n("v-dialog",{attrs:{width:"unset"},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[n("v-btn",e._g({attrs:{small:"",text:"",color:"red"}},i),[n("v-icon",{attrs:{"x-small":""}},[e._v("fa fa-trash")])],1)]}}],null,!1,4210433530),model:{value:e.removeAllClipsDialog,callback:function(t){e.removeAllClipsDialog=t},expression:"removeAllClipsDialog"}},[n("v-card",[n("v-card-title",[e._v(" Delete All Clips? ")]),n("v-card-text",[e._v("Please confirm deletion of all video clips. This action can not be undone.")]),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{small:"",text:""},on:{click:function(t){e.removeAllClipsDialog=!1}}},[e._v("Cancel")]),n("v-btn",{attrs:{small:"",text:"",color:"red"},on:{click:e.removeAllClips}},[e._v("Delete")])],1)],1)],1):e._e()],1)],2)},qn=[];async function Gn(e,t,n){const i=await t.getVideoClipThumbnail(n.thumbnailId||n.id),r=(await e.convertMediaObject(i,ce["ScryptedMimeTypes"].LocalUrl)).toString();try{const e=new URL(r);return e.pathname+e.search}catch(a){return r}}async function Wn(e,t,n){const i=await t.getVideoClip(n.videoId||n.id),r=(await e.convertMediaObject(i,ce["ScryptedMimeTypes"].LocalUrl)).toString();try{const e=new URL(r);return e.pathname+e.search}catch(a){return r}}var Yn=n("df7c"),Jn=n.n(Yn),Kn={mixins:[Pt["a"]],asyncComputed:{pageRange:{async get(){var e,t,n,i;const r=Date.now(),a=this.localTime((null===(e=this.pageClips)||void 0===e||null===(t=e[0])||void 0===t?void 0:t.startTime)||r),s=this.localTime((null===(n=this.pageClips)||void 0===n||null===(i=n[this.pageClips.length-1])||void 0===i?void 0:i.startTime)||r);return`${a} - ${s}`}},pageClips:{async get(){const e=4*(this.page-1);return this.clips.slice(e,e+4)},default:[]},pageThumbnails:{async get(){const e=i["default"].observable([]),t=this.pageClips.slice();for(let n=0;n<t.length;n++)e.push("images/cameraloading.jpg");return(async()=>{const n=this.$scrypted.mediaManager;for(let a=0;a<t.length;a++){var r;const s=t[a];if(!s)continue;if(s.id!==(null===(r=this.pageClips[a])||void 0===r?void 0:r.id))continue;const o=await Gn(n,this.device,s);i["default"].set(e,a,o)}})(),e},default:[]},clips:{async get(){await this.refreshNonce;const e=new Date(this.date);e.setMilliseconds(0),e.setSeconds(0),e.setMinutes(0),e.setHours(0),console.log(e);const t=e.getTime(),n=await this.device.getVideoClips({startTime:t,endTime:t+864e5});return n},default:[]},pages:{async get(){return Math.ceil(this.clips.length/this.clipsPerPage)},default:0}},data(){return{refreshNonce:Math.random(),removeAllClipsDialog:!1,playDialog:!1,playUrl:null,clipsPerPage:4,fetchingImage:null,fetchingImages:[],page:1,dialog:!1,date:Date.now()}},methods:{refresh(){this.refreshNonce=Math.random()},async downloadClip(e){const t=this.$scrypted.mediaManager,n=await Wn(t,this.device,e),i=document.createElement("a");i.setAttribute("href",n),i.setAttribute("download",Jn.a.basename(n)),i.click()},async removeClip(e){this.device.removeVideoClips(e.id)},async removeAllClips(){this.removeAllClipsDialog=!1,await this.device.removeVideoClips()},async playClip(e){const t=this.$scrypted.mediaManager,n=await Wn(t,this.device,e);this.playUrl=n,this.playDialog=!0},localTime(e){const t=new Date(e);return t.toLocaleTimeString()},onDate(e){this.page=1,this.dialog=!1,console.log(e),this.date=e,this.refresh()}}},Zn=Kn,Xn=n("adda"),Qn=n("1800"),ei=n("891e"),ti=Object(j["a"])(Zn,Hn,qn,!1,null,null,null),ni=ti.exports;B()(ti,{VBtn:N["a"],VCard:U["a"],VCardActions:F["a"],VCardText:F["c"],VCardTitle:F["d"],VDialog:G["a"],VIcon:J["a"],VImg:Xn["a"],VListItem:Ne["a"],VListItemAction:Qn["a"],VListItemContent:Ue["a"],VListItemSubtitle:Ue["b"],VListItemTitle:Ue["c"],VPagination:ei["a"],VSpacer:Z["a"]});var ii=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("font-awesome-icon",{staticClass:"mr-1 mr-1",attrs:{size:"sm",icon:"thermometer-three-quarters",color:"#a9afbb"}}),n("span",{staticClass:"caption mr-1"},[e._v(e._s(Math.round(e.lazyValue.temperature))+"")])],1)},ri=[],ai={mixins:[Pt["a"]]},si=ai,oi=Object(j["a"])(si,ii,ri,!1,null,null,null),ci=oi.exports,li=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("font-awesome-icon",{staticClass:"mr-1 mr-1",attrs:{size:"sm",icon:"tint",color:"#a9afbb"}}),n("span",{staticClass:"caption mr-1"},[e._v(e._s(Math.round(e.lazyValue.humidity))+"%")])],1)},di=[],ui={mixins:[Pt["a"]]},pi=ui,mi=Object(j["a"])(pi,li,di,!1,null,null,null),vi=mi.exports,hi=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-tooltip",{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[e.lazyValue.entryOpen?n("font-awesome-icon",e._g({staticClass:"mr-1 mr-1",attrs:{size:"sm",icon:"door-open",color:"#a9afbb"}},i)):n("font-awesome-icon",e._g({staticClass:"mr-1 mr-1",attrs:{size:"sm",icon:"door-closed",color:"#a9afbb"}},i))]}}])},[n("span",[e._v("Entry is "+e._s(e.lazyValue.entryOpen?"Open":"Closed"))])])},gi=[],fi={mixins:[Pt["a"]]},yi=fi,bi=Object(j["a"])(yi,hi,gi,!1,null,null,null),Si=bi.exports;B()(bi,{VTooltip:Q["a"]});var _i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-tooltip",{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[e.lazyValue.motionDetected?n("v-icon",e._g({staticClass:"mr-1 mr-1",attrs:{small:""}},i),[e._v("fa-user-circle")]):n("v-icon",e._g({staticClass:"mr-1 mr-1",attrs:{small:""}},i),[e._v("far fa-circle")])]}}])},[n("span",[e._v(e._s(e.lazyValue.motionDetected?"":"No ")+"Motion Detected")])])},xi=[],wi={mixins:[Pt["a"]]},Ci=wi,Pi=Object(j["a"])(Ci,_i,xi,!1,null,null,null),ki=Pi.exports;B()(Pi,{VIcon:J["a"],VTooltip:Q["a"]});var Di=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-tooltip",{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[e.lazyValue.binaryState?n("v-icon",e._g({staticClass:"mr-1 mr-1",attrs:{small:""}},i),[e._v("fa-circle")]):n("v-icon",e._g({staticClass:"mr-1 mr-1",attrs:{small:""}},i),[e._v("far fa-circle")])]}}])},[n("span",[e._v(e._s(e.lazyValue.binaryState?"Binary State True":"Binary State False "))])])},Ii=[],Ti={mixins:[Pt["a"]]},Oi=Ti,Vi=Object(j["a"])(Oi,Di,Ii,!1,null,null,null),Mi=Vi.exports;B()(Vi,{VIcon:J["a"],VTooltip:Q["a"]});var Ri=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-tooltip",{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[e.lazyValue.audioDetected?n("v-icon",e._g({staticClass:"mr-1 mr-1",attrs:{small:""}},i),[e._v("fa-volume-up")]):n("v-icon",e._g({staticClass:"mr-1 mr-1",attrs:{small:""}},i),[e._v("fa-volume-mute")])]}}])},[n("span",[e._v(e._s(e.lazyValue.audioDetected?"":"No ")+"Audio Detected")])])},Ei=[],Li={mixins:[Pt["a"]]},zi=Li,Ai=Object(j["a"])(zi,Ri,Ei,!1,null,null,null),ji=Ai.exports;B()(Ai,{VIcon:J["a"],VTooltip:Q["a"]});var $i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-tooltip",{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[e.lazyValue.occupied?n("font-awesome-icon",e._g({staticClass:"mr-1 mr-1",attrs:{size:"sm",icon:"user",color:"#a9afbb"}},i)):n("font-awesome-icon",e._g({staticClass:"mr-1 mr-1",attrs:{size:"sm",icon:"user-alt-slash",color:"#a9afbb"}},i))]}}])},[n("span",[e._v(e._s(e.lazyValue.occupied?"Occupied":"Unoccupied"))])])},Bi=[],Ni={mixins:[Pt["a"]]},Ui=Ni,Fi=Object(j["a"])(Ui,$i,Bi,!1,null,null,null),Hi=Fi.exports;B()(Fi,{VTooltip:Q["a"]});var qi,Gi,Wi=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",[e.customTitle?n("v-card-title",{staticClass:"pl-0 pt-0"},[e._v(e._s(e.customTitle))]):n("CardTitle",[e._v("Settings")]),e._t("prepend"),e.showChips?n("v-flex",{attrs:{xs12:""}},[n("v-chip-group",{staticClass:"pt-0",attrs:{mandatory:"","active-class":"deep-purple accent-4 white--text",column:""},model:{value:e.settingsGroupName,callback:function(t){e.settingsGroupName=t},expression:"settingsGroupName"}},[e._l(Object.entries(e.settingsGroups),(function(t){var i=t[0];return n("v-chip",{key:i,attrs:{small:"",value:i}},[e._v(" "+e._s(i.replace("Settings","")||"General")+" ")])})),e.availableMixins.length?n("v-chip",{attrs:{small:"",value:"extensions"}},[n("v-avatar",{attrs:{left:""}},[n("v-icon",{attrs:{"x-small":""}},[e._v("fas fa-bolt")])],1),e._v(" Extensions ")],1):e._e()],2)],1):e._e(),e.showChips?n("v-divider"):e._e(),e.settingsSubgroups?n("CardTitle",[e._v("Settings > "+e._s(e.settingsGroupName))]):e._e(),e.settingsSubgroups?n("v-flex",{attrs:{xs12:""}},[n("v-chip-group",{staticClass:"pt-0",attrs:{mandatory:"","active-class":"deep-purple accent-4 white--text",column:""},model:{value:e.settingsSubgroupName,callback:function(t){e.settingsSubgroupName=t},expression:"settingsSubgroupName"}},e._l(e.settingsSubgroups,(function(t){return n("v-chip",{key:t,attrs:{small:"",value:t}},[e._v(" "+e._s(t)+" ")])})),1)],1):e._e(),e.settingsSubgroups?n("v-divider"):e._e(),"extensions"===e.settingsGroupName&&e.showChips?n("AvailableMixins",{attrs:{device:e.device}}):n("v-flex",{attrs:{xs12:""}},e._l(e.settingsSubgroup,(function(t){return n("div",{key:t.key},[t.value.choices||"device"===t.value.type||"interface"===t.value.type||!t.value.multiple?n("Setting",{attrs:{device:e.needsDevice(t)?e.device:void 0},on:{input:e.onInput},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"setting.value"}}):n("SettingMultiple",{attrs:{device:e.needsDevice(t)?e.device:void 0},on:{input:e.onInput},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"setting.value"}})],1)})),0),e._t("append"),e.device?n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{disabled:!e.dirty,small:""},on:{click:e.save}},[e._v("Save")])],1):e._e()],2)},Yi=[],Ji=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-list-item-group",e._l(e.availableMixins,(function(t){return n("v-list-item",{key:t.id,attrs:{inactive:""},on:{click:function(n){t.enabled=!t.enabled,e.toggleMixin(t)}}},[n("v-list-item-action",[n("v-checkbox",{attrs:{dense:"",color:"primary"},on:{click:function(e){e.stopPropagation()},change:function(n){return e.toggleMixin(t)}},model:{value:t.enabled,callback:function(n){e.$set(t,"enabled",n)},expression:"mixin.enabled"}})],1),n("v-list-item-content",[n("v-list-item-subtitle",[e._v(e._s(t.name))])],1),n("v-list-item-action",[n("v-btn",{attrs:{small:"",to:e.getDeviceViewPath(t.id)},on:{click:function(e){e.stopPropagation()}}},[n("v-icon",{attrs:{"x-small":""}},[e._v("fa-external-link-alt")])],1)],1)],1)})),1)},Ki=[],Zi={methods:{async toggleMixin(e){await ke(this.$scrypted.systemManager,this.device,e.id,e.enabled)},openDevice(e){this.$router.push(pe(e))}},asyncComputed:{availableMixins:{async get(){var e;const t=(null===(e=this.device)||void 0===e?void 0:e.mixins)||[],n=(await Ie(this.$scrypted.systemManager,this.device)).filter(e=>!t.includes(e.id)),i=[...t.map(e=>this.$scrypted.systemManager.getDeviceById(e)).filter(e=>!!e),...n],r=i.map(e=>({id:e.id,name:e.name,enabled:t.includes(e.id)}));return r},watch:["id"],default:[]}}},Xi=Zi,Qi=Object(j["a"])(Xi,qi,Gi,!1,null,null,null),er=Qi.exports,tr={props:["device"],mixins:[er],methods:{getDeviceViewPath:pe}},nr=tr,ir=n("1baa"),rr=Object(j["a"])(nr,Ji,Ki,!1,null,null,null),ar=rr.exports;B()(rr,{VBtn:N["a"],VCheckbox:H["a"],VIcon:J["a"],VListItem:Ne["a"],VListItemAction:Qn["a"],VListItemContent:Ue["a"],VListItemGroup:ir["a"],VListItemSubtitle:Ue["b"]});var sr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-system-bar",{attrs:{color:e.color||(e.$vuetify.theme.dark?void 0:"white")}},[e.icon?n("v-icon",{attrs:{"x-small":""}},[e._v(e._s(e.icon))]):e._e(),n("span",{staticClass:"caption",staticStyle:{"text-transform":"uppercase","font-weight":"bold"}},[e._t("default")],2)],1)},or=[],cr=n("c0a4"),lr=n.n(cr),dr={props:["color","icon"],data(){return{colors:lr.a}}},ur=dr,pr=n("afd9"),mr=Object(j["a"])(ur,sr,or,!1,null,null,null),vr=mr.exports;B()(mr,{VIcon:J["a"],VSystemBar:pr["a"]});var hr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",["date"===e.lazyValue.type?n("vc-date-picker",{attrs:{mode:"date","is-range":e.lazyValue.combobox},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}}):"time"===e.lazyValue.type?n("vc-date-picker",{staticClass:"hide-header",attrs:{mode:"time","is-range":e.lazyValue.combobox},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}}):"datetime"===e.lazyValue.type?n("vc-date-picker",{attrs:{mode:"datetime","is-range":e.lazyValue.combobox},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}}):"boolean"===e.lazyValue.type?n("v-checkbox",{class:e.lazyValue.description?"mb-2":"",attrs:{dense:"",readonly:e.lazyValue.readonly,label:e.lazyValue.title,hint:e.lazyValue.description,placeholder:e.lazyValue.placeholder,"persistent-hint":""},on:{change:e.save},model:{value:e.booleanValue,callback:function(t){e.booleanValue=t},expression:"booleanValue"}}):"qrcode"===e.lazyValue.type?n("div",[n("div",{staticClass:"subtitle-2"},[e._v(" "+e._s(e.lazyValue.title))]),n("v-img",{attrs:{src:e.qrcode}})],1):"button"===e.lazyValue.type?n("div",{on:{click:e.save}},[n("v-btn",{attrs:{small:"",block:""}},[e._v(" "+e._s(e.lazyValue.title)+" ")]),e.lazyValue.description?n("span",{staticClass:"caption pl-1"},[e._v(e._s(e.lazyValue.description))]):e._e()],1):e.lazyValue.choices&&e.lazyValue.combobox?n("v-combobox",{attrs:{dense:"",readonly:e.lazyValue.readonly,items:e.lazyValue.choices,multiple:e.lazyValue.multiple,"small-chips":e.lazyValue.multiple,outlined:"",label:e.lazyValue.title,hint:e.lazyValue.description,"persistent-hint":"",placeholder:e.lazyValue.placeholder},scopedSlots:e._u([{key:"append-outer",fn:function(){return[e.dirty&&e.device?n("v-btn",{staticClass:"shift-up",attrs:{color:"success"},on:{click:e.save}},[n("v-icon",[e._v("send")])],1):e._e()]},proxy:!0}]),model:{value:e.lazyValue.value,callback:function(t){e.$set(e.lazyValue,"value",t)},expression:"lazyValue.value"}}):e.lazyValue.choices?n("v-select",{attrs:{dense:"",readonly:e.lazyValue.readonly,items:e.lazyValue.choices,multiple:e.lazyValue.multiple,"small-chips":e.lazyValue.multiple,outlined:"",label:e.lazyValue.title,hint:e.lazyValue.description,"persistent-hint":"",placeholder:e.lazyValue.placeholder},scopedSlots:e._u([{key:"append-outer",fn:function(){return[e.dirty&&e.device?n("v-btn",{staticClass:"shift-up",attrs:{color:"success"},on:{click:e.save}},[n("v-icon",[e._v("send")])],1):e._e()]},proxy:!0}]),model:{value:e.lazyValue.value,callback:function(t){e.$set(e.lazyValue,"value",t)},expression:"lazyValue.value"}}):"device"===e.lazyValue.type?n("DevicePicker",{attrs:{multiple:e.lazyValue.multiple,readonly:e.lazyValue.readonly,devices:e.devices,title:e.lazyValue.title,description:e.lazyValue.description},scopedSlots:e._u([{key:"append-outer",fn:function(){return[e.dirty&&e.device?n("v-btn",{staticClass:"shift-up",attrs:{color:"success"},on:{click:e.save}},[n("v-icon",[e._v("send")])],1):e._e()]},proxy:!0}]),model:{value:e.lazyValue.value,callback:function(t){e.$set(e.lazyValue,"value",t)},expression:"lazyValue.value"}}):"interface"===e.lazyValue.type?n("DevicePicker",{attrs:{multiple:e.lazyValue.multiple,readonly:e.lazyValue.readonly,devices:e.interfaces,title:e.lazyValue.title,description:e.lazyValue.description},scopedSlots:e._u([{key:"append-outer",fn:function(){return[e.dirty&&e.device?n("v-btn",{staticClass:"shift-up",attrs:{color:"success"},on:{click:e.save}},[n("v-icon",[e._v("send")])],1):e._e()]},proxy:!0}]),model:{value:e.lazyValue.value,callback:function(t){e.$set(e.lazyValue,"value",t)},expression:"lazyValue.value"}}):"clippath"===e.lazyValue.type?n("div",{staticClass:"mb-2"},[n("v-btn",{attrs:{small:"",block:""},on:{click:e.editZone}},[e._v(e._s(e.lazyValue.title)+" ")]),n("Camera",{attrs:{value:e.device,device:e.device,clipPathValue:e.sanitizedClipPathValue,showDialog:e.editingZone,hidePreview:!0},on:{dialog:e.editingZoneChanged,clipPath:e.updateClipPath}})],1):"textarea"===e.lazyValue.type?n("v-textarea",{attrs:{outlined:"","persistent-hint":"",hint:e.lazyValue.description,label:e.lazyValue.title},model:{value:e.lazyValue.value,callback:function(t){e.$set(e.lazyValue,"value",t)},expression:"lazyValue.value"}}):n("v-text-field",{attrs:{autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false",dense:"",readonly:e.lazyValue.readonly,outlined:"",placeholder:e.lazyValue.placeholder,label:e.lazyValue.title,hint:e.lazyValue.description,"persistent-hint":"",type:"password"===e.lazyValue.type?"password":void 0},scopedSlots:e._u([{key:"append-outer",fn:function(){return[e.dirty&&e.device?n("v-btn",{staticClass:"shift-up",attrs:{color:"success",text:""},on:{click:e.save}},[n("v-icon",[e._v("send")])],1):e._e()]},proxy:!0}]),model:{value:e.lazyValue.value,callback:function(t){e.$set(e.lazyValue,"value",t)},expression:"lazyValue.value"}})],1)},gr=[],fr=n("2c7f"),yr=fr["a"],br=(n("fa01"),n("b974")),Sr=n("a844"),_r=Object(j["a"])(yr,hr,gr,!1,null,"69cf9a81",null),xr=_r.exports;B()(_r,{VBtn:N["a"],VCheckbox:H["a"],VCombobox:jt["a"],VIcon:J["a"],VImg:Xn["a"],VSelect:br["a"],VTextField:X["a"],VTextarea:Sr["a"]});var wr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Grower",{attrs:{empty:e.empty,saveButton:e.dirty?"Save "+e.value.title:void 0},on:{save:e.save},scopedSlots:e._u([{key:"default",fn:function(t){return[n("Setting",{on:{input:t.onInput},model:{value:t.item,callback:function(n){e.$set(t,"item",n)},expression:"slotProps.item"}})]}}]),model:{value:e.lazyValue,callback:function(t){e.lazyValue=t},expression:"lazyValue"}})},Cr=[],Pr=n("bde8"),kr=n("43b3"),Dr={props:["value","device"],mixins:[kr["a"],xr],components:{Setting:xr,Grower:Pr["a"]},computed:{dirty(){return JSON.stringify(this.value)!==JSON.stringify(this.createInputValue())},empty(){const e=Et()(this.value);return e.value=void 0,e}},methods:{save(){let{key:e,value:t}=this.createInputValue();t=t.filter(e=>void 0!==e&&""!==e),this.rpc().putSetting(e,t),this.onInput()},createLazyValue(){var e;const t=(null===(e=this.value.value)||void 0===e?void 0:e.constructor)===Array?this.value.value:[];return t.length||t.push(void 0),t.map(e=>{const t=Et()(this.value);return t.value=e,t})},createInputValue(){const e=Et()(this.value);return e.value=this.lazyValue.map(e=>e.value),e}}},Ir=Dr,Tr=Object(j["a"])(Ir,wr,Cr,!1,null,null,null),Or=Tr.exports,Vr={components:{CardTitle:vr,Setting:xr,SettingMultiple:Or,AvailableMixins:ar},mixins:[Pt["a"],er],props:["customTitle"],data(){return{rawSettingsSubgroupName:void 0,rawSettingsGroupName:void 0,deviceSettings:[]}},watch:{device(){this.refresh()}},mounted(){this.refresh()},computed:{settingsGroupName:{get(){var e;return this.rawSettingsGroupName?this.rawSettingsGroupName:(null===(e=Object.keys(this.settingsGroups))||void 0===e?void 0:e[0])||"extensions"},set(e){this.rawSettingsGroupName=e,this.rawSettingsSubgroupName=void 0}},settingsSubgroupName:{get(){var e;if(this.settingsSubgroups)return-1!==this.settingsSubgroups.findIndex(e=>e===this.rawSettingsSubgroupName)?this.rawSettingsSubgroupName:null===(e=Object.values(this.settingsSubgroups))||void 0===e?void 0:e[0]},set(e){this.rawSettingsSubgroupName=e}},settings(){const e=[];if(le(this.device)){const t=Se(this.device.type,this.device.providedType,this.device.interfaces),n=[{group:"Edit",key:"__name",title:"Name",value:this.device.name}];t.length>1&&n.push({group:"Edit",key:"__type",title:"Type",value:this.device.type,choices:t});const i=this.$store.state.scrypted.devices.map(e=>this.$scrypted.systemManager.getDeviceById(e).room).filter(e=>e);ge(this.device.type,this.device.interfaces)&&n.push({group:"Edit",key:"__room",title:"Room",value:this.device.room,combobox:!0,choices:i}),e.push(...n)}for(const i of e)i.originalValue=i.value;const t=e.map(e=>({key:e.key,value:e})),n=this.deviceSettings.slice();return n.push(...t),i["default"].observable(n)},selectGroupNames(){const e=Object.keys(this.settingsGroups).map(e=>({text:e.replace("Settings","")||"General",value:e}));return this.availableMixins.length&&e.push({value:"extensions",text:"Integrations and Extensions"}),e},ScryptedInterface(){return ce["ScryptedInterface"]},showChips(){return!!this.availableMixins.length||Object.keys(this.settingsGroups).length>1},settingsGroup(){var e;return(null===(e=Object.entries(this.settingsGroups).find(e=>e[0]===this.settingsGroupName))||void 0===e?void 0:e[1])||[]},settingsSubgroup(){if(!this.settingsSubgroups||1===this.settingsSubgroups.length)return this.settingsGroup;const e=this.settingsGroup.filter(e=>e.value.subgroup===this.settingsSubgroupName||!e.value.subgroup&&e.value.group===this.settingsSubgroupName||!e.value.subgroup&&!e.value.group&&"General"===this.settingsSubgroupName);return e},settingsSubgroups(){const e=new Set;for(const{value:t}of this.settingsGroup)e.add(t.subgroup||t.group||"General");if(e.size>1)return[...e.values()]},settingsGroups(){const e={};for(const t of this.settings){const n=t.value.group||"Settings";e[n]||(e[n]=[]),e[n].push(t)}return e},dirty(){for(const{value:e}of this.settings)if(JSON.stringify(e.value)!==JSON.stringify(e.originalValue))return!0;return!1}},methods:{onChange(){},createInputValue(e){return{settings:this.settings.map(e=>e.value)}},needsDevice(e){return"clippath"===e.value.type||"button"===e.value.type},async refresh(){let e;e=this.device?this.device.interfaces.includes(ce["ScryptedInterface"].Settings)?await this.rpc().getSettings():[]:this.value.settings;for(const t of e)t.originalValue=t.value;this.deviceSettings=e.map(e=>({key:e.key,value:e}))},save(){for(const{value:e}of this.settings)"__name"!==e.key||e.value===e.originalValue?"__type"!==e.key||e.value===e.originalValue?"__room"!==e.key||e.value===e.originalValue?JSON.stringify(e.value)!==JSON.stringify(e.originalValue)&&this.device.putSetting(e.key,e.value):this.device.setRoom(e.value):this.device.setType(e.value):this.device.setName(e.value)}}},Mr=Vr,Rr=n("8212"),Er=n("ef9a"),Lr=Object(j["a"])(Mr,Wi,Yi,!1,null,null,null),zr=Lr.exports;B()(Lr,{VAvatar:Rr["a"],VBtn:N["a"],VCard:U["a"],VCardActions:F["a"],VCardTitle:F["d"],VChip:nt["a"],VChipGroup:Er["a"],VDivider:$e["a"],VFlex:W["a"],VIcon:J["a"],VSpacer:Z["a"]});var Ar=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("span",[n("v-btn",{attrs:{depressed:"",dark:"",tile:"",outlined:!e.value.running,color:"green"},on:{click:e.start}},[e._v("Start")])],1),n("span",[n("v-btn",{attrs:{depressed:"",dark:"",tile:"",outlined:e.value.running,color:"red"},on:{click:e.stop}},[e._v("Stop")])],1)])},jr=[],$r={mixins:[Pt["a"]],methods:{start(){this.lazyValue.running=!0,this.rpc().start()},stop(){this.lazyValue.running=!1,this.rpc().stop()},onChange(){this.rpc().stop()}}},Br=$r,Nr=Object(j["a"])(Br,Ar,jr,!1,null,null,null),Ur=Nr.exports;B()(Nr,{VBtn:N["a"]});var Fr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("v-btn",{attrs:{depressed:"",dark:"",tile:"",outlined:!e.value.docked,color:"blue"},on:{click:e.dock}},[e._v("Dock")])],1)},Hr=[],qr={mixins:[Pt["a"]],methods:{dock(){this.rpc().dock()},onChange(){this.rpc().dock()}}},Gr=qr,Wr=Object(j["a"])(Gr,Fr,Hr,!1,null,null,null),Yr=Wr.exports;B()(Wr,{VBtn:N["a"]});var Jr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("span",[n("v-btn",{attrs:{depressed:"",dark:"",tile:"",outlined:!e.lazyValue.paused,color:"blue"},on:{click:e.pause}},[e._v("Pause")])],1),n("span",[n("v-btn",{attrs:{depressed:"",dark:"",tile:"",outlined:"",color:"green"},on:{click:e.resume}},[e._v("Resume")])],1)])},Kr=[],Zr={mixins:[Pt["a"]],methods:{pause(){this.lazyValue.paused=!0,this.rpc().pause()},resume(){this.lazyValue.paused=!1,this.rpc().resume()},onChange(){this.pause()}}},Xr=Zr,Qr=Object(j["a"])(Xr,Jr,Kr,!1,null,null,null),ea=Qr.exports;B()(Qr,{VBtn:N["a"]});var ta=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[e.device?n("v-btn",{attrs:{text:"",color:"green"},on:{click:e.run}},[e._v("Run Program")]):e._e()],1)},na=[],ia={mixins:[Pt["a"]],methods:{onChange(){this.run()},run:function(){this.rpc({varargs:!0}).run()}}},ra=ia,aa=Object(j["a"])(ra,ta,na,!1,null,null,null),sa=aa.exports;B()(aa,{VBtn:N["a"]});var oa=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-slider",{staticClass:"mx-5 mt-2",attrs:{"thumb-size":"20","thumb-label":"always",dense:""},on:{change:e.onChange},scopedSlots:e._u([{key:"append",fn:function(){return[n("v-icon",{attrs:{color:e.colors.orange.base}},[e._v(" fa fa-sun ")])]},proxy:!0},{key:"prepend",fn:function(){return[n("v-icon",{attrs:{color:e.colors.blue.base}},[e._v(" fa fa-snowflake ")])]},proxy:!0}]),model:{value:e.lazyValue.colorTemperature,callback:function(t){e.$set(e.lazyValue,"colorTemperature",t)},expression:"lazyValue.colorTemperature"}})},ca=[],la={mixins:[Pt["a"]],data(){return{colors:lr.a}},methods:{debounceSetColorTemperature:Zt()((function(){this.rpc().setColorTemperature(this.lazyValue.colorTemperature)}),500),onChange(){this.device?this.debounceSetColorTemperature():this.rpc().setColorTemperature(this.lazyValue.colorTemperature)}}},da=la,ua=Object(j["a"])(da,oa,ca,!1,null,null,null),pa=ua.exports;B()(ua,{VIcon:J["a"],VSlider:en["a"]});var ma=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("span",[n("v-btn",{attrs:{depressed:"",dark:"",tile:"",outlined:!e.value.entryOpen,color:"green"},on:{click:e.openEntry}},[e._v("Open")])],1),n("span",[n("v-btn",{attrs:{depressed:"",dark:"",tile:"",outlined:e.value.entryOpen,color:"red"},on:{click:e.closeEntry}},[e._v("Close")])],1)])},va=[],ha={mixins:[Pt["a"]],methods:{openEntry(){this.lazyValue.entryOpen=!0,this.rpc().openEntry()},closeEntry(){this.lazyValue.entryOpen=!1,this.rpc().closeEntry()},onChange(){this.rpc().closeEntry()}}},ga=ha,fa=Object(j["a"])(ga,ma,va,!1,null,null,null),ya=fa.exports;B()(fa,{VBtn:N["a"]});var ba=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[n("v-btn",e._g({attrs:{small:"",text:"",href:"/endpoint/"+e.device.id+"/public/"}},i),[n("font-awesome-icon",{attrs:{size:"lg",icon:["fab","chrome"],color:e.colors.blue.base}})],1)]}}])},[n("span",[e._v("View the public endpoint of this plugin.")])]),n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[n("v-btn",e._g({attrs:{small:"",text:"",href:"/endpoint/"+e.device.id+"/"}},i),[n("font-awesome-icon",{attrs:{size:"lg",icon:"user-secret",color:e.colors.red.base}})],1)]}}])},[n("span",[e._v("View the private http endpoint of this plugin.")])])],1)},Sa=[],_a={mixins:[Pt["a"]],data(){return{colors:lr.a}}},xa=_a,wa=Object(j["a"])(xa,ba,Sa,!1,null,null,null),Ca=wa.exports;B()(wa,{VBtn:N["a"],VTooltip:Q["a"]});var Pa=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-layout",[n("v-flex",[n("Grower",{attrs:{addButton:"Add Password",empty:{key:"",value:""}},on:{input:e.onInput},scopedSlots:e._u([{key:"default",fn:function(t){return[n("PasswordEntry",{attrs:{device:e.device},on:{input:t.onInput},model:{value:t.item,callback:function(n){e.$set(t,"item",n)},expression:"slotProps.item"}})]}}]),model:{value:e.passwords,callback:function(t){e.passwords=t},expression:"passwords"}})],1)],1)],1)},ka=[],Da=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-text-field",{attrs:{autocomplete:"off",outlined:"",solo:"",flat:"","persistent-hint":"",type:e.showPassword?void 0:"password"},scopedSlots:e._u([{key:"append",fn:function(){return[e.dirty?n("v-btn",{attrs:{outlined:"",text:"",color:"green",dark:"",tile:""},on:{click:e.save}},[n("font-awesome-icon",{attrs:{size:"lg",icon:"check"}})],1):e._e(),n("v-btn",{attrs:{outlined:"",text:"",color:"blue",dark:"",tile:""},on:{click:function(t){e.showPassword=!e.showPassword}}},[n("font-awesome-icon",{attrs:{size:"lg",icon:"eye-slash"}})],1),e.value.value&&e.confirmTrash?n("v-btn",{attrs:{outlined:"",text:"",color:"red",dark:"",tile:""},on:{click:function(t){e.confirmTrash=!1}}},[n("font-awesome-icon",{attrs:{size:"lg",icon:"ban"}})],1):e._e(),e.value.value?n("v-btn",{attrs:{outlined:"",text:"",color:"red",dark:"",tile:""},on:{click:e.remove}},[n("font-awesome-icon",{attrs:{size:"lg",icon:"trash"}})],1):e._e()]},proxy:!0}]),model:{value:e.lazyValue.value,callback:function(t){e.$set(e.lazyValue,"value",t)},expression:"lazyValue.value"}})},Ia=[],Ta={mixins:[Pt["a"]],data(){return{showPassword:!1,confirmTrash:!1}},computed:{dirty(){return this.lazyValue.value!==this.value.value}},methods:{async save(){await this.rpc().removePassword(this.value.value),await this.rpc().addPassword(this.lazyValue.value),this.onInput()},async remove(){this.confirmTrash?(await this.rpc().removePassword(this.value.value),this.lazyValue.value="",this.onInput()):this.confirmTrash=!0}}},Oa=Ta,Va=Object(j["a"])(Oa,Da,Ia,!1,null,null,null),Ma=Va.exports;B()(Va,{VBtn:N["a"],VTextField:X["a"]});var Ra={mixins:[Pt["a"]],components:{Grower:Pr["a"],PasswordEntry:Ma},data(){return{passwords:[]}},watch:{value(){this.refresh()}},methods:{async refresh(){this.passwords=(await this.rpc().getPasswords()).map((e,t)=>({key:t,value:e}))}},mounted(){this.refresh()},onChange(){}},Ea=Ra,La=Object(j["a"])(Ea,Pa,ka,!1,null,null,null),za=La.exports;B()(La,{VContainer:q["a"],VFlex:W["a"],VLayout:K["a"]});var Aa=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("span",[n("v-btn",{attrs:{depressed:"",dark:"",tile:"",outlined:void 0===e.lazyValue.activate||!1===e.lazyValue.activate,color:"green"},on:{click:e.activate}},[e._v("Activate")])],1),n("span",[n("v-btn",{attrs:{depressed:"",dark:"",tile:"",outlined:void 0===e.lazyValue.activate||!0===e.lazyValue.activate,color:"red"},on:{click:e.deactivate}},[e._v("Deactivate")])],1)])},ja=[],$a={mixins:[Pt["a"]],methods:{activate(){this.device||(this.lazyValue.activate=!0),this.rpc().activate()},deactivate(){this.device||(this.lazyValue.activate=!1),this.rpc().deactivate()},onChange(){this.rpc().activate()}}},Ba=$a,Na=Object(j["a"])(Ba,Aa,ja,!1,null,null,null),Ua=Na.exports;B()(Na,{VBtn:N["a"]});var Fa=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-flex",[n("v-label",[e._v("Temperature")]),e.lazyValue.thermostatMode===e.HeatCool?n("v-range-slider",{attrs:{dense:"",color:"purple","thumb-color":"purple","thumb-label":"always",max:90,min:0},on:{change:e.setThermostatSetpointRange},model:{value:e.range,callback:function(t){e.range=t},expression:"range"}}):n("v-slider",{attrs:{dense:"",color:"purple","thumb-color":"purple","thumb-label":"always",max:90,min:0},on:{change:e.setThermostatSetpoint},model:{value:e.lazyValue.thermostatSetpoint,callback:function(t){e.$set(e.lazyValue,"thermostatSetpoint",t)},expression:"lazyValue.thermostatSetpoint"}}),n("v-select",{attrs:{dense:"",outlined:"",items:e.lazyValue.thermostatAvailableModes,label:"Mode"},on:{change:e.onChangeMode},model:{value:e.lazyValue.thermostatMode,callback:function(t){e.$set(e.lazyValue,"thermostatMode",t)},expression:"lazyValue.thermostatMode"}})],1)},Ha=[],qa={mixins:[Pt["a"]],data(){return{HeatCool:ce["ThermostatMode"].HeatCool}},methods:{setThermostatSetpoint(){this.device?this.debounceSetThermostatSetpoint():this.onChange()},debounceSetThermostatSetpoint:Zt()((function(){this.rpc().setThermostatSetpoint(this.lazyValue.thermostatSetpoint)}),500),setThermostatSetpointRange(){this.device?this.debounceSetThermostatSetpointRange():this.onChange()},debounceSetThermostatSetpointRange:Zt()((function(){this.rpc().setThermostatSetpointLow(this.lazyValue.thermostatSetpointLow),this.rpc().setThermostatSetpointHigh(this.lazyValue.thermostatSetpointHigh)}),500),onChange(){this.device||(this.rpc().setThermostatMode(this.lazyValue.thermostatMode),this.lazyValue.thermostatMode==ce["ThermostatMode"].HeatCool?this.rpc().setThermostatSetpoint(this.lazyValue.thermostatSetpoint):this.rpc().setThermostatSetpoint(this.lazyValue.thermostatMode))},onChangeMode(){this.device?this.rpc().setThermostatMode(this.lazyValue.thermostatMode):this.onChange()},createLazyValue(){var e=Et()(this.value);return e=Object.assign({thermostatMode:"Off",thermostatSetpoint:22.2},e),e}},computed:{range:{get(){return[this.lazyValue.thermostatSetpointLow,this.lazyValue.thermostatSetpointHigh]},set(e){this.lazyValue.thermostatSetpointLow=e[0],this.lazyValue.thermostatSetpointHigh=e[1]}}}},Ga=qa,Wa=n("24c9"),Ya=n("5963"),Ja=Object(j["a"])(Ga,Fa,Ha,!1,null,null,null),Ka=Ja.exports;B()(Ja,{VFlex:W["a"],VLabel:Wa["a"],VRangeSlider:Ya["a"],VSelect:br["a"],VSlider:en["a"]});var Za=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("GmapMap",{ref:"mapRef",staticStyle:{height:"400px"},attrs:{center:e.center,zoom:e.zoom,options:{mapTypeControl:!1,fullscreenControl:!1}}},[e.position?n("GmapMarker",{attrs:{position:e.position,label:e.lazyValue.name}}):e._e()],1)},Xa=[],Qa={mixins:[Pt["a"]],computed:{center(){return this.position?this.position:{lat:0,lng:0}},zoom(){return this.position?16:2},position(){if(this.lazyValue.position)return{lat:this.lazyValue.position.latitude,lng:this.lazyValue.position.longitude}}}},es=Qa,ts=Object(j["a"])(es,Za,Xa,!1,null,null,null),ns=ts.exports,is=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-flex",{attrs:{xs12:""}},[e.device.interfaces.includes("DeviceCreator")||e.device.interfaces.includes("DeviceDiscovery")?n("v-card-actions",[e.showCreateDeviceSettings?n("v-dialog",{attrs:{"max-width":"600px"},model:{value:e.showCreateDeviceSettings,callback:function(t){e.showCreateDeviceSettings=t},expression:"showCreateDeviceSettings"}},[n("Settings",{staticClass:"pa-2",attrs:{"custom-title":"Add New"},scopedSlots:e._u([{key:"prepend",fn:function(){return[e.createError?n("v-alert",{attrs:{type:"error"}},[e._v(e._s(e.createError))]):e._e()]},proxy:!0},{key:"append",fn:function(){return[n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:e.createDevice}},[e._v("Create")])],1)]},proxy:!0}],null,!1,1462625797),model:{value:e.createDeviceSettings,callback:function(t){e.createDeviceSettings=t},expression:"createDeviceSettings"}})],1):e._e(),e.device.interfaces.includes("DeviceCreator")?n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.openDeviceCreationDialog()}}},[e._v("Add New")]):e._e(),e.device.interfaces.includes("DeviceDiscovery")?n("v-btn",{attrs:{text:"",color:"primary"},on:{click:e.discoverDevices}},[e._v("Discover Devices")]):e._e()],1):e._e(),e.discoveredDevices&&e.discoveredDevices.length?n("v-simple-table",[n("thead",[n("tr",[n("th",{staticStyle:{width:"10px"}}),n("th",[e._v("Discovered")]),n("th")])]),e.discoveredDevices.length?n("tbody",e._l(e.discoveredDevices,(function(t){return n("tr",{key:t.id},[n("td",[n("v-btn",{attrs:{"x-small":"",outlined:"",fab:"",color:"info"},on:{click:function(n){return e.openDeviceAdoptionDialog(t)}}},[n("v-icon",[e._v("fa-solid fa-plus")])],1)],1),n("td",[e._v(" "+e._s(t.name)+" ")]),n("td",[e._v(" "+e._s(t.description))])])})),0):n("tbody",[n("td"),n("td",[e._v("None found.")]),n("td")])]):e._e(),n("v-card-text",[e._v("These things were created by "+e._s(e.device.name)+".")]),e.managedDevices.devices.length>10?n("v-text-field",{attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}):e._e(),e.managedDevices.devices.length>10?n("v-data-table",{attrs:{headers:e.headers,items:e.managedDevices.devices,"items-per-page":10,search:e.search},scopedSlots:e._u([{key:"item.icon",fn:function(t){var i=t.item;return[n("v-icon",{attrs:{"x-small":"",color:"grey"}},[e._v(" "+e._s(e.typeToIcon(i.type))+" ")])]}},{key:"item.name",fn:function(t){var i=t.item;return[i.nativeId?n("div",[e._v(e._s(i.name))]):n("a",{attrs:{link:"",href:"#"+e.getDeviceViewPath(i.id)}},[e._v(e._s(i.name))]),i.description?n("div",[e._v(e._s(i.description))]):e._e()]}}],null,!0)}):n("DeviceGroup",{attrs:{deviceGroup:e.managedDevices}})],1)},rs=[],as=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-simple-table",[n("thead",[n("tr",[n("th",{staticClass:"text-xs-left",staticStyle:{width:"10px"}}),n("th",{staticClass:"text-xs-left"},[e._v("Name")]),e.extraColumn0?n("th",[e._v(e._s(e.extraColumn0))]):e._e(),e.$vuetify.breakpoint.mdAndUp&&e.deviceGroup.ownerColumn?n("th",{staticClass:"text-xs-left"},[e._v(e._s(e.deviceGroup.ownerColumn))]):e._e(),e.$vuetify.breakpoint.mdAndUp&&e.extraColumn1?n("th",[e._v(e._s(e.extraColumn1))]):e._e(),e.$vuetify.breakpoint.mdAndUp&&!e.hideType?n("th",{staticClass:"text-xs-left"},[e._v("Type")]):e._e()])]),e.deviceGroup.devices.length?n("tbody",e._l(e.deviceGroup.devices,(function(t){return n("tr",{key:t.id},[n("td",[n("v-icon",{attrs:{"x-small":"",color:"#a9afbb"}},[e._v(e._s(e.typeToIcon(t.type)))])],1),n("td",[n("a",{attrs:{link:"",href:"#"+e.getDeviceViewPath(t.id)}},[e._v(e._s(t.name))])]),e.extraColumn0?n("td",[e._t("extra-column-0",null,{device:t})],2):e._e(),e.$vuetify.breakpoint.mdAndUp&&e.deviceGroup.ownerColumn&&e.getOwnerLink(t)?n("td",[n("a",{attrs:{href:e.getOwnerLink(t)}},[e._v(e._s(e.getOwnerColumn(t)))])]):e.$vuetify.breakpoint.mdAndUp&&e.deviceGroup.ownerColumn?n("td",[e._v(e._s(e.getOwnerColumn(t)))]):e._e(),e.$vuetify.breakpoint.mdAndUp&&e.extraColumn1?n("td",[e._t("extra-column-1",null,{device:t})],2):e._e(),e.$vuetify.breakpoint.mdAndUp&&!e.hideType?n("td",[e._v(e._s(t.type))]):e._e()])})),0):n("tbody",[n("td"),n("td",[e._v("None found.")])])])},ss=[],os={props:["deviceGroup","getOwnerColumn","getOwnerLink","hideType","extraColumn0","extraColumn1"],methods:{getDeviceViewPath:pe,typeToIcon:de}},cs=os,ls=n("1f4f"),ds=Object(j["a"])(cs,as,ss,!1,null,null,null),us=ds.exports;B()(ds,{VIcon:J["a"],VSimpleTable:ls["a"]});var ps={mixins:[Pt["a"]],data(){return{adopting:!1,discoveredDevices:[],adoptListener:null,createError:"",showCreateDeviceSettings:!1,showCreateDevice:!1,createDeviceSettings:null,search:""}},components:{Settings:zr,DeviceGroup:us},mounted(){this.adoptListener=this.device.listen(ce["ScryptedInterface"].DeviceDiscovery,(e,t,n)=>{this.discoveredDevices=n})},unmounted(){this.adoptListener.removeListener()},methods:{typeToIcon:de,getDeviceViewPath:pe,async openDeviceAdoptionDialog(e){this.openDeviceCreationDialog(e),this.adopting=e.nativeId},async createDevice(){const e={};for(const n of this.createDeviceSettings.settings)e[n.key]=n.value;try{if(this.adopting){const t=await this.device.adoptDevice({nativeId:this.adopting,settings:e});this.$router.push(pe(t))}else{const t=await this.device.createDevice(e);this.$router.push(pe(t))}}catch(t){this.createError=t.message}},async openDeviceCreationDialog(e){this.adopting=void 0;const t=e?e.settings||[]:await this.device.getCreateDeviceSettings();if(null!==t&&void 0!==t&&t.length){for(const e of t)e.value=e.value||null;this.createDeviceSettings={settings:t},this.showCreateDeviceSettings=!0}else try{const e=await this.device.createDevice([]);this.$router.push(pe(e))}catch(n){this.createError=n.message}},async discoverDevices(){this.discoveredDevices=await this.rpc().discoverDevices(!0)}},computed:{headers(){var e=[];return e.push({width:40,text:"",align:"left",sortable:!1,value:"icon"}),e.push({text:"Name",align:"left",sortable:!0,value:"name"}),e.push({text:"Type",align:"left",sortable:!0,value:"type"}),e},managedDevices(){const e=this.$store.state.scrypted.devices.filter(e=>this.$store.state.systemState[e].providerId.value===this.device.id&&this.device.id!==e).map(e=>({id:e,name:this.$store.state.systemState[e].name.value,type:this.$store.state.systemState[e].type.value}));return{devices:e}}}},ms=ps,vs=n("0798"),hs=Object(j["a"])(ms,is,rs,!1,null,null,null),gs=hs.exports;B()(hs,{VAlert:vs["a"],VBtn:N["a"],VCardActions:F["a"],VCardText:F["c"],VDataTable:it["a"],VDialog:G["a"],VFlex:W["a"],VIcon:J["a"],VSimpleTable:ls["a"],VSpacer:Z["a"],VTextField:X["a"]});var fs=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-sheet",{staticClass:"d-flex align-center justify-center flex-wrap text-center mx-auto",attrs:{height:600,width:"100%"},on:{drop:e.onDrop,dragover:e.allowDrop}},[e.img?n("div",{staticStyle:{position:"relative",height:"100%"}},[n("img",{staticStyle:{height:"100%"},attrs:{src:e.img}}),e.lastDetection?n("svg",{ref:"svg",staticStyle:{top:"0",left:"0",position:"absolute",width:"100%",height:"100%","z-index":"1"},attrs:{viewBox:"0 0 "+e.svgWidth+" "+e.svgHeight},domProps:{innerHTML:e._s(e.svgContents)}}):e._e()]):n("div",[e._v("Drag and Drop a JPG or PNG to analyze.")])])},ys=[],bs=n("a419"),Ss=bs["a"],_s=n("8dd9"),xs=Object(j["a"])(Ss,fs,ys,!1,null,null,null),ws=xs.exports;B()(xs,{VSheet:_s["a"]});var Cs=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-card-text",[e._v(e._s(e.device.name)+" can be enabled for these things.")]),n("v-list-item-group",e._l(e.availableMixins,(function(t){return n("v-list-item",{key:t.id,attrs:{inactive:""},on:{click:function(n){t.enabled=!t.enabled,e.toggleMixin(t)}}},[n("v-list-item-action",[n("v-checkbox",{attrs:{dense:"",color:"primary"},on:{click:function(e){e.stopPropagation()},change:function(n){return e.toggleMixin(t)}},model:{value:t.enabled,callback:function(n){e.$set(t,"enabled",n)},expression:"mixin.enabled"}})],1),n("v-list-item-content",[n("v-list-item-subtitle",[e._v(e._s(t.name))])],1),n("v-list-item-action",[n("v-btn",{attrs:{"x-small":"",to:e.getDeviceViewPath(t.id)},on:{click:function(e){e.stopPropagation()}}},[n("v-icon",{attrs:{"x-small":""}},[e._v(e._s(e.typeToIcon(t.type)))])],1)],1)],1)})),1)],1)},Ps=[],ks={mixins:[Pt["a"]],components:{DeviceGroup:us},methods:{getDeviceViewPath:pe,typeToIcon:de,async toggleMixin(e){const t=this.$scrypted.systemManager.getDeviceById(e.id);await ke(this.$scrypted.systemManager,t,this.device.id,e.enabled)}},computed:{currentMixins(){const e=this.$store.state.scrypted.devices.map(e=>this.$scrypted.systemManager.getDeviceById(e)).filter(e=>{var t;return null===(t=e.mixins)||void 0===t?void 0:t.includes(this.device.id)}).map(e=>({id:e.id,name:e.name,type:e.type,enabled:!0}));return e}},asyncComputed:{availableMixins:{default(){return this.currentMixins},async get(){return Te(this.$scrypted.systemManager,this.device)}}}},Ds=ks,Is=Object(j["a"])(Ds,Cs,Ps,!1,null,null,null),Ts=Is.exports;B()(Is,{VBtn:N["a"],VCardText:F["c"],VCheckbox:H["a"],VIcon:J["a"],VListItem:Ne["a"],VListItemAction:Qn["a"],VListItemContent:Ue["a"],VListItemGroup:ir["a"],VListItemSubtitle:Ue["b"]});var Os=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.readme?n("v-flex",[n("VueMarkdown",{attrs:{source:e.readme}})],1):n("v-card-text",[e._v(" Loading... ")])],1)},Vs=[],Ms=n("9ce6"),Rs=n.n(Ms),Es={mixins:[Pt["a"]],components:{VueMarkdown:Rs.a,CardTitle:vr},data(){return{token:0}},methods:{refresh(){this.token++}},asyncComputed:{readme:{async get(){return await this.token,this.device.getReadmeMarkdown()},default:void 0}}},Ls=Es,zs=Object(j["a"])(Ls,Os,Vs,!1,null,null,null),As=zs.exports;B()(zs,{VCardText:F["c"],VFlex:W["a"]});var js=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-toolbar",{attrs:{dense:""}},[n("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[n("v-btn",e._g({attrs:{text:""},on:{click:function(t){e.expanded=!e.expanded}}},i),[n("v-icon",{attrs:{"x-small":""}},[e._v("fa-angle-double-down")])],1)]}}])},[n("span",[e._v("Toggle Expand")])]),e.device?n("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[n("v-btn",e._g({attrs:{text:""},on:{click:e.save}},i),[n("v-icon",{attrs:{"x-small":""}},[e._v("fa-save")])],1)]}}],null,!1,3029232853)},[n("span",[e._v("Save")])]):e._e(),e.device?n("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[n("v-btn",e._g({attrs:{text:""},on:{click:e.eval}},i),[n("v-icon",{attrs:{"x-small":""}},[e._v("fa-play")])],1)]}}],null,!1,1054762319)},[e._v("> "),n("span",[e._v("Run")])]):e._e(),n("v-toolbar-title",{staticClass:"ml-2"},[e._v(e._s(e.scriptSource.scriptTitle))])],1),n("div",{style:e.divStyle},[n("div",{ref:"container",staticStyle:{width:"100%",height:"100%"}})])],1)},$s=[],Bs=n("2bf2"),Ns=Bs["a"],Us=n("2a7f"),Fs=Object(j["a"])(Ns,js,$s,!1,null,null,null),Hs=Fs.exports;B()(Fs,{VBtn:N["a"],VIcon:J["a"],VToolbar:rt["a"],VToolbarTitle:Us["a"],VTooltip:Q["a"]});var qs=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Grower",{attrs:{saveButton:"Save Storage",addButton:"Add Storage Entry",empty:{key:"",value:""}},on:{input:e.onInput,save:function(t){return e.$emit("save")}},scopedSlots:e._u([{key:"default",fn:function(t){return[n("StorageEntry",{on:{input:t.onInput},model:{value:t.item,callback:function(n){e.$set(t,"item",n)},expression:"slotProps.item"}})]}}]),model:{value:e.lazyValue,callback:function(t){e.lazyValue=t},expression:"lazyValue"}})},Gs=[],Ws=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",{attrs:{row:""}},[n("v-flex",{staticClass:"pr-0 pt-1 pb-1",attrs:{xs5:""}},[n("v-text-field",{ref:"variableName",attrs:{dense:"",outlined:"",label:"Storage Key",xs6:"","hide-details":""},on:{input:e.onInput},model:{value:e.lazyValue.key,callback:function(t){e.$set(e.lazyValue,"key",t)},expression:"lazyValue.key"}})],1),n("v-flex",{staticClass:"pl-0 pt-1 pb-1",attrs:{xs7:""}},[n("v-text-field",{ref:"variableValue",attrs:{dense:"",outlined:"",label:"Storage Value",xs6:"","hide-details":""},on:{input:e.onInput},model:{value:e.lazyValue.value,callback:function(t){e.$set(e.lazyValue,"value",t)},expression:"lazyValue.value"}})],1)],1)},Ys=[],Js={name:"StorageEntry",mixins:[kr["a"]]},Ks=Js,Zs=Object(j["a"])(Ks,Ws,Ys,!1,null,null,null),Xs=Zs.exports;B()(Zs,{VFlex:W["a"],VLayout:K["a"],VTextField:X["a"]});var Qs,eo,to={methods:{createLazyValue(){return Object.entries(this.value).map(([e,t])=>({key:e,value:t}))},createInputValue(){var e={};return this.lazyValue.forEach(t=>e[t.key]=t.value),e}}},no=to,io=Object(j["a"])(no,Qs,eo,!1,null,null,null),ro=io.exports,ao={mixins:[kr["a"],ro],components:{Grower:Pr["a"],StorageEntry:Xs},computed:{StorageEntry(){return Xs}}},so=ao,oo=Object(j["a"])(so,qs,Gs,!1,null,null,null),co=oo.exports,lo=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",["Scene"!==e.device.automationType?n("v-card",{staticStyle:{"margin-bottom":"30px"},attrs:{raised:""}},[n("card-title",{attrs:{icon:"fa-bolt"}},[e._v(" Automation Triggers ")]),n("v-card-subtitle",[e._v("Specify the events (and optional conditions) that will trigger the automation.")]),n("v-flex",{staticClass:"pt-0",attrs:{xs12:""}},[n("EventsPicker",{attrs:{name:e.device.triggers.name,events:e.availableEvents,interfaces:e.availableInterfaces},on:{input:e.onChange},model:{value:e.device.triggers,callback:function(t){e.$set(e.device,"triggers",t)},expression:"device.triggers"}})],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"primary",text:""},on:{click:e.saveAutomation}},[e._v(" Save Triggers ")])],1)],1):e._e(),n("v-card",{staticStyle:{"margin-bottom":"30px"},attrs:{raised:""}},[e.device.automationType?n("CardTitle",{attrs:{icon:"fa-play"}},[e._v(e._s(e.device.automationType?"Automation Actions ":"Scene Activation Actions")+" ")]):e._e(),"Scene"!==e.device.automationType?n("v-card-subtitle",[e._v("Specify action(s) to take when the automation is triggered.")]):n("v-card-subtitle",[e._v("Specify action(s) to take when the scene is activated.")]),n("v-flex",{staticClass:"pt-0",attrs:{xs12:""}},[n("InterfacesPicker",{attrs:{name:e.device.actions.name,interfaces:e.contextualInterfaces},on:{input:e.onChange},model:{value:e.device.actions,callback:function(t){e.$set(e.device,"actions",t)},expression:"device.actions"}})],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"primary",text:""},on:{click:e.saveAutomation}},[e._v(" Save Actions ")])],1)],1),"Scene"===e.device.automationType?n("v-card",{attrs:{raised:""}},[n("v-card-title",[n("v-icon",{attrs:{"x-small":""}},[e._v("fa-play")]),n("h5",{staticClass:"card-title"},[e._v("Scene Deactivation Actions")])],1),n("v-card-text",[e._v("Specify action(s) to take when the scene deactivated.")]),n("v-flex",{attrs:{xs12:""}},[n("InterfacesPicker",{attrs:{name:e.device.deactivateActions.name,interfaces:e.contextualInterfaces},on:{input:e.onChange},model:{value:e.device.deactivateActions.actions,callback:function(t){e.$set(e.device.deactivateActions,"actions",t)},expression:"device.deactivateActions.actions"}})],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"primary",text:""},on:{click:e.saveAutomation}},[e._v(" Save Actions ")])],1)],1):e._e()],1)},uo=[],po=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Grower",{attrs:{empty:e.unassigned,left:!0,addButton:"Add Action"},on:{input:e.onInput},scopedSlots:e._u([{key:"default",fn:function(t){return[n("InterfacePicker",{attrs:{interfaces:e.interfaces},on:{input:t.onInput},model:{value:t.item,callback:function(n){e.$set(t,"item",n)},expression:"slotProps.item"}})]}}]),model:{value:e.lazyValue,callback:function(t){e.lazyValue=t},expression:"lazyValue"}})},mo=[],vo=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{staticStyle:{"margin-bottom":"16px"}},[n("v-card-title",[e._v("Action")]),n("v-flex",{staticClass:"pt-0",attrs:{xs12:""}},[n("Select2",{attrs:{options:e.interfaces,unselected:e.unselected},on:{input:e.onInput},model:{value:e.lazyValue.selected,callback:function(t){e.$set(e.lazyValue,"selected",t)},expression:"lazyValue.selected"}}),n(e.lazyValue.selected.component,{tag:"component",attrs:{properties:e.lazyValue.selected.properties},on:{input:e.onInput},model:{value:e.lazyValue.model,callback:function(t){e.$set(e.lazyValue,"model",t)},expression:"lazyValue.model"}})],1)],1)},ho=[],go=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div")},fo=[],yo={},bo=Object(j["a"])(yo,go,fo,!1,null,null,null),So=bo.exports,_o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div")},xo=[],wo={},Co=wo,Po=Object(j["a"])(Co,_o,xo,!1,null,null,null),ko=Po.exports,Do=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-slider",{attrs:{label:"Hours","thumb-label":"always",min:"0",max:"23"},on:{input:e.onChange},model:{value:e.hours,callback:function(t){e.hours=t},expression:"hours"}}),n("v-slider",{attrs:{label:"Minutes","thumb-label":"always",min:"0",max:"59"},on:{input:e.onChange},model:{value:e.minutes,callback:function(t){e.minutes=t},expression:"minutes"}}),n("v-slider",{attrs:{label:"Seconds","thumb-label":"always",min:"0",max:"59"},on:{input:e.onChange},model:{value:e.seconds,callback:function(t){e.seconds=t},expression:"seconds"}}),n("v-btn",{attrs:{outlined:"",color:"indigo"}},[e._v(e._s(e.time))])],1)},Io=[],To={mixins:[Pt["a"]],methods:{update(e,t,n){this.lazyValue.seconds=60*e*60+60*t+n},onChange(){this.rpc({varargs:!0}).create(parseInt(1e3*(this.lazyValue.seconds||0)))}},computed:{hours:{get(){return Math.floor(this.lazyValue.seconds/60/60)||0},set(e){this.update(e,this.minutes,this.seconds)}},minutes:{get(){return Math.floor(this.lazyValue.seconds/60)%60||0},set(e){this.update(this.hours,e,this.seconds)}},seconds:{get(){return this.lazyValue.seconds%60||0},set(e){this.update(this.hours,this.minutes,e)}},time(){var e=[];return this.hours&&e.push(this.hours+" hours"),this.minutes&&e.push(this.minutes+" minutes"),this.seconds&&e.push(this.seconds+" seconds"),e.length?"Timer: "+e.join(", "):"Adjust the sliders to set the timer."}}},Oo=To,Vo=Object(j["a"])(Oo,Do,Io,!1,null,null,null),Mo=Vo.exports;B()(Vo,{VBtn:N["a"],VSlider:en["a"]});var Ro,Eo,Lo={mixins:[Hs],data(){return{scriptSource:{filename:"script.sh",script:"",scriptTitle:"Script",language:"shell",monacoEvalDefaults:void 0}}}},zo=Lo,Ao=Object(j["a"])(zo,Ro,Eo,!1,null,null,null),jo=Ao.exports,$o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div")},Bo=[],No={mixins:[Pt["a"]],methods:{onChange(){this.rpc({varargs:!0}).onEvent()}}},Uo=No,Fo=Object(j["a"])(Uo,$o,Bo,!1,null,null,null),Ho=Fo.exports,qo=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-autocomplete",{ref:"autocomplete",attrs:{dense:"",outlined:"",multiple:e.multiple,chips:e.multiple,items:e.sortedOptions,label:e.label,"item-value":"id","return-object":"",hint:e.hint,"persistent-hint":""},on:{input:e.onInput},scopedSlots:e._u([{key:"message",fn:function(t){var i=t.message;return[n("span",{domProps:{innerHTML:e._s(i)}})]}}]),model:{value:e.lazyValue,callback:function(t){e.lazyValue=t},expression:"lazyValue"}})},Go=[],Wo={props:["label","options","unselected","multiple","hint"],mixins:[kr["a"]],computed:{sortedOptions(){var e=this.lazyValue;this.multiple||(e=e?[e]:[]);const t=e.map(e=>e.id),n=Et()(this.options).filter(e=>!t.includes(e.id));return n.unshift(...e),this.unselected&&n.unshift(this.unselected),n}}},Yo=Wo,Jo=n("c6a6"),Ko=Object(j["a"])(Yo,qo,Go,!1,null,null,null),Zo=Ko.exports;function Xo(){return{id:"unassigned",text:"Select Action",component:"Unassigned"}}B()(Ko,{VAutocomplete:Jo["a"]});var Qo={props:{name:String,interfaces:Array,unselected:{type:Object,default:Xo}},mixins:[kr["a"]],components:{Unassigned:So,CustomValue:kr["a"],UpdatePlugins:ko,Timer:Mo,Scriptable:Hs,ShellScriptable:jo,EventListener:Ho,OnOff:Wt,Brightness:nn,Lock:_n,Notifier:Bt,ColorSettingHsv:In,ColorSettingRgb:En,ColorSettingTemperature:pa,StartStop:Ur,Dock:Yr,Pause:ea,Scene:Ua,Program:sa,Select2:Zo},watch:{"lazyValue.selected.component"(){this.lazyValue.model={}}},methods:{createLazyValue(){let e=("unassigned"==this.value.id?Xo():this.interfaces.find(e=>e.id==this.value.id))||Xo();return e=Et()(e)||Xo(),{selected:e,model:Et()(this.value.model)}},createInputValue(){return{id:this.lazyValue.selected.id,model:this.lazyValue.model}}}},ec=Qo,tc=Object(j["a"])(ec,vo,ho,!1,null,null,null),nc=tc.exports;B()(tc,{VCard:U["a"],VCardTitle:F["d"],VFlex:W["a"]});var ic={props:{name:String,interfaces:Array},mixins:[kr["a"]],components:{Grower:Pr["a"],InterfacePicker:nc},computed:{unassigned(){return{id:"unassigned",model:{}}}},methods:{createInputValue(){return this.lazyValue.slice()}}},rc=ic,ac=Object(j["a"])(rc,po,mo,!1,null,null,null),sc=ac.exports,oc=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Grower",{attrs:{empty:e.unassigned,left:!0,addButton:"Add Trigger"},on:{input:e.onInput},scopedSlots:e._u([{key:"default",fn:function(t){return[n("EventPicker",{attrs:{events:e.events,interfaces:e.interfaces},on:{input:t.onInput},model:{value:t.item,callback:function(n){e.$set(t,"item",n)},expression:"slotProps.item"}})]}}]),model:{value:e.lazyValue,callback:function(t){e.lazyValue=t},expression:"lazyValue"}})},cc=[],lc=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",[n("v-card-title",[e._v("Trigger")]),n("v-flex",{staticClass:"pt-0",attrs:{xs12:""}},[n("Select2",{attrs:{options:e.events,unselected:e.unselected,label:"Event"},on:{input:e.onInput},model:{value:e.lazyValue.selected,callback:function(t){e.$set(e.lazyValue,"selected",t)},expression:"lazyValue.selected"}}),e.lazyValue.selected.component&&e.lazyValue.selected.event?n(e.lazyValue.selected.component,{tag:"component",attrs:{events:e.events,interfaces:e.interfaces},on:{input:e.onInput},model:{value:e.lazyValue.model,callback:function(t){e.$set(e.lazyValue,"model",t)},expression:"lazyValue.model"}}):e._e(),n("v-text-field",{attrs:{dense:"",label:"Trigger Condition (optional)","persistent-hint":"",hint:"OnOff example: eventData === true"},on:{input:e.onInput},model:{value:e.lazyValue.condition,callback:function(t){e.$set(e.lazyValue,"condition",t)},expression:"lazyValue.condition"}})],1)],1)},dc=[],uc=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",{attrs:{row:"",wrap:"","justify-center":"","align-center":""}},[e._l(e.days,(function(t){return n("v-flex",{key:t,attrs:{xs3:"",md2:"",lg2:"",xl1:""}},[n("v-btn",{staticClass:"white--text",attrs:{block:"",color:"info",small:"",text:!e.lazyValue[t]},on:{click:function(n){return e.toggleDay(t)}}},[e._v(e._s(t.substring(0,3)))])],1)})),n("v-flex",{attrs:{xs12:""}},[n("v-layout",{attrs:{"justify-center":"","align-center":""}},[n("vc-date-picker",{staticClass:"hide-header",attrs:{mode:"time"},on:{input:e.onChange},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}})],1)],1)],2)},pc=[];const mc=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],vc=[],hc=[];function gc(e,t){for(var n=0;n<=t;n++)e.push(n>=10?n.toString():"0"+n)}gc(vc,24),gc(hc,59);var fc={mixins:[Pt["a"]],data:function(){return{days:mc}},computed:{time:{get(){const e=new Date;return e.setMilliseconds(0),e.setSeconds(0),e.setMinutes(this.lazyValue.minute),e.setHours(this.lazyValue.hour),e},set(e){this.lazyValue.hour=e.getHours(),this.lazyValue.minute=e.getMinutes(),this.onChange()}}},methods:{toggleDay:function(e){this.lazyValue[e]=!this.lazyValue[e],this.onChange()},createLazyValue(){var e=Et()(this.value);return e.hour=e.hour||0,e.minute=e.minute||0,e},onChange:function(){const e={hour:parseInt(this.lazyValue.hour)||0,minute:parseInt(this.lazyValue.minute)||0};mc.forEach(t=>{e[t]=this.lazyValue[t]||!1}),this.rpc().schedule(e)}}},yc=fc,bc=(n("aadf"),Object(j["a"])(yc,uc,pc,!1,null,null,null)),Sc=bc.exports;B()(bc,{VBtn:N["a"],VFlex:W["a"],VLayout:K["a"]});var _c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",[e._v("Webhook Address:")]),n("a",{attrs:{target:"webhook",href:e.webhookAddress}},[e._v(e._s(e.webhookAddress))])])},xc=[];function wc(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=n.length,r=0;r<e;r++)t+=n.charAt(Math.floor(Math.random()*i));return t}var Cc={mixins:[Pt["a"]],computed:{webhookAddress(){var e=new URL("/endpoint/webhook/public/?id="+this.lazyValue.webhookId,window.location.toString());return e.toString()}},methods:{createLazyValue(){var e=Et()(this.value);return e.webhookId||(e.rpc=void 0,e.webhookId=wc(16)),e},onChange(){this.rpc().listenWebhook(this.lazyValue.webhookId)}}},Pc=Cc,kc=Object(j["a"])(Pc,_c,xc,!1,null,null,null),Dc=kc.exports;function Ic(){return{id:"unassigned",text:"Select Event Trigger",component:"Unassigned",model:{}}}var Tc={props:{events:Array,interfaces:Array,unselected:{type:Object,default:Ic}},mixins:[kr["a"]],components:{Select2:Zo,Scheduler:Sc,Webhook:Dc},methods:{createLazyValue(){let e=this.value.id&&"unassigned"!==this.value.id?this.events.find(e=>e.id===this.value.id):Ic();e=Et()(e)||Ic();const t=this.value.condition;return{selected:e,condition:t,model:Et()(this.value.model)}},createInputValue(){return{condition:this.lazyValue.condition,id:this.lazyValue.selected.id,model:this.lazyValue.model}}}},Oc=Tc,Vc=Object(j["a"])(Oc,lc,dc,!1,null,null,null),Mc=Vc.exports;B()(Vc,{VCard:U["a"],VCardTitle:F["d"],VFlex:W["a"],VTextField:X["a"]});var Rc={props:{name:String,events:Array,interfaces:Array},mixins:[kr["a"]],components:{Grower:Pr["a"],EventPicker:Mc},methods:{createInputValue(){return this.lazyValue.slice()}},computed:{componentProps(){return{events:this.events,interfaces:this.interfaces}},unassigned(){return{id:"unassigned",condition:null,model:{}}}}},Ec=Rc,Lc=Object(j["a"])(Ec,oc,cc,!1,null,null,null),zc=Lc.exports;const Ac=[ce["ScryptedInterface"].OnOff,ce["ScryptedInterface"].Brightness,ce["ScryptedInterface"].ColorSettingHsv,ce["ScryptedInterface"].ColorSettingRgb,ce["ScryptedInterface"].ColorSettingTemperature,ce["ScryptedInterface"].Dock,ce["ScryptedInterface"].Entry,ce["ScryptedInterface"].Lock,ce["ScryptedInterface"].Notifier,ce["ScryptedInterface"].Pause,ce["ScryptedInterface"].Scene,ce["ScryptedInterface"].StartStop],jc=[ce["ScryptedInterface"].Online,ce["ScryptedInterface"].OnOff,ce["ScryptedInterface"].Brightness,ce["ScryptedInterface"].ColorSettingHsv,ce["ScryptedInterface"].ColorSettingRgb,ce["ScryptedInterface"].ColorSettingTemperature,ce["ScryptedInterface"].Dock,ce["ScryptedInterface"].Entry,ce["ScryptedInterface"].Lock,ce["ScryptedInterface"].Notifier,ce["ScryptedInterface"].Pause,ce["ScryptedInterface"].StartStop,ce["ScryptedInterface"].Thermometer,ce["ScryptedInterface"].HumiditySensor,ce["ScryptedInterface"].BinarySensor,ce["ScryptedInterface"].TamperSensor,ce["ScryptedInterface"].PowerSensor,ce["ScryptedInterface"].AudioSensor,ce["ScryptedInterface"].MotionSensor,ce["ScryptedInterface"].OccupancySensor,ce["ScryptedInterface"].FloodSensor,ce["ScryptedInterface"].UltravioletSensor,ce["ScryptedInterface"].LuminanceSensor,ce["ScryptedInterface"].PositionSensor,ce["ScryptedInterface"].ObjectDetector];ce["ScryptedInterface"].OnOff,ce["ScryptedInterface"].Lock,ce["ScryptedInterface"].StartStop,ce["ScryptedInterface"].Scene,ce["ScryptedInterface"].Entry,ce["ScryptedInterface"].TemperatureSetting;var $c={data(){let e;try{e=JSON.parse(this.value)}catch(t){e={triggers:[],actions:[],staticEvents:!1,denoiseEvents:!1,runToCompletion:!1,automationType:"Automation"}}return{device:e}},props:["value","id"],components:{CardTitle:vr,InterfacesPicker:sc,EventsPicker:zc},computed:{availableEvents(){const e=[{id:"scheduler",text:"Scheduler",component:"Scheduler",event:!0}];for(const t of Object.keys(this.$scrypted.systemManager.getSystemState())){const n=this.$scrypted.systemManager.getDeviceById(t);for(const i of[...new Set(n.interfaces)])jc.includes(i)&&e.push({id:`${t}#${i}`,text:`${n.name} (${i})`,component:i})}return e},availableInterfaces(){const e=[{id:"scriptable",text:"Run Javascript",component:"Scriptable"},{id:"shell-scriptable",text:"Run Shell Script",component:"ShellScriptable"},{id:"timer",text:"Wait",component:"Timer"},{id:"update-plugins",text:"Update Plugins",component:"UpdatePlugins"}];for(const t of Object.keys(this.$scrypted.systemManager.getSystemState())){const n=this.$scrypted.systemManager.getDeviceById(t);for(const i of[...new Set(n.interfaces)])Ac.includes(i)&&e.push({id:`${t}#${i}`,text:`${n.name} (${i})`,component:i})}return e},contextualInterfaces:{get:function(){return this.availableInterfaces}}},methods:{saveAutomation(){var e;this.device.triggers=this.device.triggers.slice().filter(e=>"unassigned"!=e.id),this.device.actions=this.device.actions.slice().filter(e=>"unassigned"!=e.id),this.device.deactivateActions=null===(e=this.device.deactivateActions)||void 0===e?void 0:e.slice().filter(e=>"unassigned"!=e.id),this.onChange(),this.$emit("save")},onChange(){this.$emit("input",JSON.stringify(this.device))}}},Bc=$c,Nc=Object(j["a"])(Bc,lo,uo,!1,null,null,null),Uc=Nc.exports;B()(Nc,{VBtn:N["a"],VCard:U["a"],VCardActions:F["a"],VCardSubtitle:F["b"],VCardText:F["c"],VCardTitle:F["d"],VFlex:W["a"],VIcon:J["a"],VSpacer:Z["a"]});var Fc=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-menu",{attrs:{text:"","close-on-click":"",bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,r=t.attrs;return[n("v-btn",e._g(e._b({attrs:{small:"",dark:"",color:e.pluginData.updateAvailable?"orange":"blue"}},"v-btn",r,!1),i),[e._v(" "+e._s(e.menuName)+" "),n("v-icon",{attrs:{right:""}},[e._v("fa-caret-down")])],1)]}}])},[e.pluginData.versions?n("v-list",{attrs:{dense:""}},[n("v-list-item",{attrs:{color:"orange","input-value":!0},on:{click:e.openNpm}},[n("v-list-item-title",[e._v("View on NPM")]),n("v-list-item-icon",[n("v-icon",[e._v("fab fa-npm")])],1),n("v-divider")],1),e._l(e.versions,(function(t,i){return n("div",{key:i},[0===i?n("v-subheader",[e._v("Install Latest Release")]):e._e(),1===i?n("v-divider"):e._e(),1===i?n("v-subheader",[e._v("Install Older Release")]):e._e(),n("v-list-item",{attrs:{color:e.releaseColor(t.tag),"input-value":!!e.releaseColor(t.tag)},on:{click:function(n){return e.installVersion(t.version)}}},[n("v-list-item-title",[e._v(e._s(t.version+(t.tag?" ("+t.tag+")":"")))])],1)],1)}))],2):n("v-list")],1)},Hc=[],qc={props:["pluginData"],computed:{menuName(){return this.pluginData.updateAvailable?"Update Available":`${this.pluginData.packageJson.name}@${this.pluginData.packageJson.version}`},versions(){return this.pluginData.versions.slice(0,10)}},methods:{releaseColor(e){return"latest"===e?"success":"beta"===e?"red":"installed"===e?"info":void 0},openNpm(){window.open(Ee(this.pluginData.packageJson.name),"_blank")},async installVersion(e){await Re(this.$scrypted.systemManager,this.pluginData.pluginId,e===this.pluginData.updateAvailable?void 0:e),this.$emit("installed")}}},Gc=qc,Wc=n("e449"),Yc=Object(j["a"])(Gc,Fc,Hc,!1,null,null,null),Jc=Yc.exports;B()(Yc,{VBtn:N["a"],VDivider:$e["a"],VIcon:J["a"],VList:Be["a"],VListItem:Ne["a"],VListItemIcon:Fe["a"],VListItemTitle:Ue["c"],VMenu:Wc["a"],VSubheader:qe["a"]});const Kc=[ce["ScryptedInterface"].OccupancySensor,ce["ScryptedInterface"].EntrySensor,ce["ScryptedInterface"].MotionSensor,ce["ScryptedInterface"].BinarySensor,ce["ScryptedInterface"].AudioSensor,ce["ScryptedInterface"].HumiditySensor,ce["ScryptedInterface"].Thermometer,ce["ScryptedInterface"].Charger,ce["ScryptedInterface"].Battery,ce["ScryptedInterface"].Lock,ce["ScryptedInterface"].OnOff],Zc=[ce["ScryptedInterface"].Brightness,ce["ScryptedInterface"].ColorSettingTemperature,ce["ScryptedInterface"].RTCSignalingClient,ce["ScryptedInterface"].Notifier,ce["ScryptedInterface"].ColorSettingHsv,ce["ScryptedInterface"].ColorSettingRgb,ce["ScryptedInterface"].VideoClips,ce["ScryptedInterface"].TemperatureSetting,ce["ScryptedInterface"].PasswordStore,ce["ScryptedInterface"].PositionSensor,ce["ScryptedInterface"].Program,ce["ScryptedInterface"].Settings,ce["ScryptedInterface"].MixinProvider],Xc=[ce["ScryptedInterface"].DeviceProvider,ce["ScryptedInterface"].Readme],Qc=[ce["ScryptedInterface"].Camera],el=[ce["ScryptedInterface"].Camera,ce["ScryptedInterface"].Settings,ce["ScryptedInterface"].Scriptable],tl=[ce["ScryptedInterface"].ObjectDetection,ce["ScryptedInterface"].Scriptable],nl=[ce["ScryptedInterface"].OauthClient,ce["ScryptedInterface"].HttpRequestHandler],il=[ce["ScryptedInterface"].Dock,ce["ScryptedInterface"].Pause,ce["ScryptedInterface"].StartStop,ce["ScryptedInterface"].Entry,ce["ScryptedInterface"].Scene];function rl(e){return function(){var t,n;if(!this.device)return[];let i=e.filter(e=>this.$store.state.systemState[this.id].interfaces.value.includes(e));return null!==(t=this.pluginData)&&void 0!==t&&null!==(n=t.nativeId)&&void 0!==n&&n.startsWith("script:")&&(i=i.filter(e=>e!==ce["ScryptedInterface"].Program)),i}}var al={components:{CardTitle:vr,AvailableMixins:ar,DeviceProvider:gs,MixinProvider:Ts,StartStop:Ur,Dock:Yr,Pause:ea,Entry:ya,Scene:Ua,Brightness:nn,ColorSettingRgb:En,ColorSettingHsv:In,RTCSignalingClient:Ot,Notifier:Bt,Camera:Fn["a"],VideoClips:ni,PasswordStore:za,Settings:zr,ColorSettingTemperature:pa,TemperatureSetting:Ka,PositionSensor:ns,Lock:_n,OnOff:Wt,Charger:hn,Battery:ln,Thermometer:ci,HumiditySensor:vi,EntrySensor:Si,MotionSensor:ki,BinarySensor:Mi,AudioSensor:ji,OccupancySensor:Hi,OauthClient:Un,HttpRequestHandler:Ca,PluginAdvancedUpdate:Jc,VueSlider:Ze.a,LogCard:st,ConsoleCard:pt,REPLCard:xt,Readme:As,Storage:co,Automation:Uc,Program:sa,Scriptable:Hs,ObjectDetection:ws},mixins:[er],data(){return this.initialState()},mounted(){var e;this.needsLoad&&this.reload(),null===(e=this.device)||void 0===e||e.listen(void 0,(e,t,n)=>{"Storage"===t.eventInterface&&this.reloadStorage()})},destroyed(){this.cleanupListener()},watch:{devices(){},id(){Object.assign(this.$data,this.initialState())},needsLoad(){this.needsLoad&&this.reload()}},methods:{deviceIsEditable:le,getInterfaceFriendlyName:xe,hasFixedPhysicalLocation:ge,getComponentWebPath:ue,removeAlert:ve,getAlertIcon:he,initialState(){return{colors:lr.a,showLogs:!1,showConsole:!1,showRepl:!1,showDelete:!1,pluginData:void 0,loading:!1,deviceComponent:void 0,deviceData:void 0,showStorage:!1}},escapeHtml(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},async openConsole(){this.showConsole=!this.showConsole,this.showConsole&&(await i["default"].nextTick(),this.$vuetify.goTo(this.$refs.consoleEl))},openManagementUrl(){window.location=this.device.info.managementUrl},async openRepl(){this.showRepl=!this.showRepl,this.showRepl&&(await i["default"].nextTick(),this.$vuetify.goTo(this.$refs.replEl))},async openLogs(){this.showLogs=!this.showLogs,this.showLogs&&(await i["default"].nextTick(),this.$vuetify.goTo(this.$refs.logsEl))},onChange(){},cleanupListener(){this.listener&&this.listener.removeListener()},getMetadata(e){const t=this.$store.state.systemState[this.id].metadata;return t&&t.value&&t.value[e]},async reloadPlugin(){const e=await this.$scrypted.systemManager.getComponent("plugins");await e.reload(this.pluginData.packageJson.name)},async reloadStorage(){if(!this.pluginData)return;const e=await this.$scrypted.systemManager.getComponent("plugins");this.pluginData.storage=await e.getStorage(this.id)},async reload(){this.loading=!0;const e=await this.$scrypted.systemManager.getComponent("plugins"),t={updateAvailable:!1,versions:null},n=this.device;if(t.nativeId=n.nativeId,t.storage=await e.getStorage(this.id),t.pluginId=this.device.pluginId,n.interfaces.includes(ce["ScryptedInterface"].ScryptedPlugin)&&(t.packageJson=await this.device.getPluginJson(),Me(this.device.pluginId,t.packageJson.version).then(e=>Object.assign(t,e))),this.pluginData=t,"@scrypted/core"===this.device.pluginId){var i,r;const a=await e.getStorage(n.id);this.deviceData=a["data"],null!==(i=t.nativeId)&&void 0!==i&&i.startsWith("automation:")?this.deviceComponent="Automation":null!==(r=t.nativeId)&&void 0!==r&&r.startsWith("script:")&&(this.deviceComponent="Script",this.showConsole=!0)}this.loading=!1},remove(){const e=this.id;this.$router.back(),this.$scrypted.systemManager.removeDevice(e)},async saveStorage(){const e=await this.$scrypted.systemManager.getComponent("plugins");this.deviceData&&(this.pluginData.storage.data=this.deviceData),await e.setStorage(this.device.id,this.pluginData.storage)},openDevice(e){this.$router.push(pe(e))}},computed:{ScryptedInterface(){return ce["ScryptedInterface"]},origin(){return window.location.origin},ownerDevice(){if(this.device.providerId!==this.device.id)return this.$scrypted.systemManager.getDeviceById(this.device.providerId)},deviceState(){var e={};return Object.entries(this.$store.state.systemState[this.id]).forEach(([t,n])=>e[t]=n.value),e},cardButtonInterfaces:rl(il),cardActionInterfaces:rl(nl),leftInterfaces:rl(Xc),leftAboveInterfaces:rl(Qc),noCardInterfaces:rl(el),rightInterfaces:rl(Zc),cardHeaderInterfaces:rl(Kc),aboveInterfaces:rl(tl),deviceAlerts(){return this.$store.state.scrypted.alerts.filter(e=>e.path.startsWith(pe(this.id)))},devices(){return this.$store.state.scrypted.devices},id(){return this.$route.params.id||this.$props.deviceId},canLoad(){return this.devices.includes(this.id)},needsLoad(){return!this.pluginData&&this.canLoad&&!this.loading},device(){return this.$scrypted.systemManager.getDeviceById(this.id)}},props:["deviceId"]},sl=al,ol=(n("aeb9"),n("38a0"),Object(j["a"])(sl,Ye,Je,!1,null,"03931448",null)),cl=ol.exports;B()(ol,{VAlert:vs["a"],VBtn:N["a"],VCard:U["a"],VCardActions:F["a"],VCardSubtitle:F["b"],VCardText:F["c"],VCardTitle:F["d"],VContainer:q["a"],VDialog:G["a"],VDivider:$e["a"],VFlex:W["a"],VIcon:J["a"],VLayout:K["a"],VSpacer:Z["a"],VTooltip:Q["a"]});var ll=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",[n("v-flex",{attrs:{xs12:"",md10:"",lg8:""}},[n("v-card",{attrs:{raised:""}},[n("v-toolbar",{attrs:{dark:"",color:e.$vuetify.theme.dark?void 0:e.colors.indigo.darken2}},[e._v(" All Devices "),n("v-spacer"),n("v-text-field",{attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),n("v-data-table",{attrs:{headers:e.headers,items:e.tableDevices,"items-per-page":50,search:e.search},scopedSlots:e._u([{key:"item.icon",fn:function(t){var i=t.item;return[n("v-icon",{attrs:{"x-small":"",color:e.colors.blue.base}},[e._v(" "+e._s(e.typeToIcon(i.type))+" ")])]}},{key:"item.name",fn:function(t){var i=t.item;return[n("a",{attrs:{link:"",href:"#"+e.getDeviceViewPath(i.id)}},[e._v(e._s(i.name))])]}},{key:"item.plugin",fn:function(t){var i=t.item;return[n("a",{attrs:{link:"",href:i.provider.link}},[e._v(e._s(i.provider.name))])]}}],null,!0)})],1)],1)],1)},dl=[],ul={methods:{getDeviceViewPath:pe,getProvider(e){var t,n;return e.providerId===e.id?{name:null===(t=this.$scrypted.systemManager.getDeviceById(e.providerId))||void 0===t?void 0:t.name,link:"#/device/"+e.id}:{name:null===(n=this.$scrypted.systemManager.getDeviceById(e.providerId))||void 0===n?void 0:n.name,link:"#/device/"+e.id}},typeToIcon:de,getMetadata(e,t){const n=e.metadata;return n&&n[t]}},computed:{devices(){return this.$store.state.scrypted.devices.map(e=>this.$scrypted.systemManager.getDeviceById(e)).map(e=>({id:e.id,name:e.name,type:e.type,provider:this.getProvider(e)}))},tableDevices(){return this.devices.map(e=>Object.assign({plugin:e.owner||e.component},e))},headers(){var e=[];return this.$vuetify.breakpoint.smAndUp&&e.push({width:40,text:"",align:"left",sortable:!1,value:"icon"}),e.push({text:"Name",align:"left",sortable:!0,value:"name"}),this.$vuetify.breakpoint.smAndUp&&e.push({text:"Type",align:"left",sortable:!0,value:"type"}),this.$vuetify.breakpoint.mdAndUp&&e.push({text:"Source",align:"left",sortable:!0,value:"plugin"}),e}},data:function(){return{search:"",colors:lr.a}}},pl=ul,ml=Object(j["a"])(pl,ll,dl,!1,null,null,null),vl=ml.exports;B()(ml,{VCard:U["a"],VDataTable:it["a"],VFlex:W["a"],VIcon:J["a"],VLayout:K["a"],VSpacer:Z["a"],VTextField:X["a"],VToolbar:rt["a"]});var hl=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.id?n("Device",{attrs:{deviceId:e.id}}):e._e()},gl=[],fl={asyncComputed:{id:{async get(){const e=this.$store.state.scrypted.devices.map(e=>this.$scrypted.systemManager.getDeviceById(e)).find(e=>"@scrypted/core"===e.pluginId&&"aggregatecore"===e.nativeId);return null===e||void 0===e?void 0:e.id}}},components:{Device:cl}},yl=fl,bl=Object(j["a"])(yl,hl,gl,!1,null,null,null),Sl=bl.exports,_l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.id?n("Device",{attrs:{deviceId:e.id}}):e._e()},xl=[],wl={asyncComputed:{id:{async get(){const e=this.$store.state.scrypted.devices.map(e=>this.$scrypted.systemManager.getDeviceById(e)).find(e=>"@scrypted/core"===e.pluginId&&"automationcore"===e.nativeId);return null===e||void 0===e?void 0:e.id}}},components:{Device:cl}},Cl=wl,Pl=Object(j["a"])(Cl,_l,xl,!1,null,null,null),kl=Pl.exports,Dl=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.id?n("Device",{attrs:{deviceId:e.id}}):e._e()},Il=[],Tl={asyncComputed:{id:{async get(){const e=this.$store.state.scrypted.devices.map(e=>this.$scrypted.systemManager.getDeviceById(e)).find(e=>"@scrypted/core"===e.pluginId&&"scriptcore"===e.nativeId);return null===e||void 0===e?void 0:e.id}}},components:{Device:cl}},Ol=Tl,Vl=Object(j["a"])(Ol,Dl,Il,!1,null,null,null),Ml=Vl.exports,Rl=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.loading?e._e():n("v-layout",{attrs:{wrap:""}},[e._l(e.cards,(function(t,i){return n("v-flex",{key:i,attrs:{xs12:"",md6:e.cards.length>1}},[t.hide?e._e():n("v-card",{attrs:{raised:""}},[n("CardTitle",[e._v(e._s(t.title))]),n("v-card-text",[e._v(e._s(t.description))]),t.body?n(t.body,{tag:"component",model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"card.value"}}):e._e(),n("v-card-actions",e._l(t.buttons,(function(i,r){return n("v-btn",{key:r,attrs:{text:"",color:"info"},on:{click:function(e){i.click&&i.click(t.value)}}},[e._v(e._s(i.title))])})),1)],1)],1)})),e._l(e.deviceGroups,(function(t){return n("v-flex",{key:t.name,attrs:{xs12:"",md6:e.deviceGroups.length>1}},[n("v-card",{attrs:{raised:""}},[n("CardTitle",[e._v(e._s(t.name))]),n("DeviceTable",e._b({attrs:{hideType:t.hideType,deviceGroup:t,getOwnerColumn:e.getOwnerColumn,getOwnerLink:e.getOwnerLink},scopedSlots:e._u([t.extraColumn0?{key:"extra-column-0",fn:function(i){return[n(t.extraColumn0,e._b({tag:"component"},"component",i,!1))]}}:null,t.extraColumn1?{key:"extra-column-1",fn:function(i){return[n(t.extraColumn1,e._b({tag:"component"},"component",i,!1))]}}:null],null,!0)},"DeviceTable",t.tableProps,!1))],1)],1)}))],2),e.footer?n(e.footer,{tag:"component",model:{value:e.footerModel,callback:function(t){e.footerModel=t},expression:"footerModel"}}):e._e()],1)},El=[],Ll={data(){return{footer:null,loading:!1,settings:{}}},components:{DeviceTable:us,CardTitle:vr},methods:{typeToIcon:de,getOwnerColumn(){return null},getOwnerLink(){return null},newDevice(e){ae.a.post("/endpoint/@scrypted/core/api/new/"+e).then(e=>{const{id:t}=e.data;window.location.hash="#"+pe(t)})},refresh(){this.loading=!0,ae.a.get(this.componentWebPath+"/settings").then(e=>{this.$data.settings=e.data,this.loading=!1})}},asyncComputed:{async deviceGroups(){const e=this.$store.state.scrypted.devices,t=e.map(e=>this.$scrypted.systemManager.getDeviceById(e)).filter(e=>e&&e.component&&e.component===this.component.id&&!e.owner).map(e=>({id:e.id,name:e.name,type:e.type}));return[{ownerColumn:null,name:this.component.name,devices:t}]}},computed:{componentWebPath(){return ue(this.id)},componentViewPath(){return me(this.id)},id(){return window.location.hash.replace("#/component/","")}}},zl=Ll,Al=Object(j["a"])(zl,Rl,El,!1,null,null,null),jl=Al.exports;B()(Al,{VBtn:N["a"],VCard:U["a"],VCardActions:F["a"],VCardText:F["c"],VFlex:W["a"],VLayout:K["a"]});var $l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.updating?n("div",[e._v(" Updating... ")]):e.updateAvailable?n("v-btn",{attrs:{small:"",dark:"",block:"",outlined:"",color:"blue"},on:{click:e.doInstall}},[e._v("Update")]):n("div",[e._v(e._s(e.device.npmPackageVersion))])],1)},Bl=[],Nl={props:["device"],mounted(){Me(this.device.pluginId,this.device.npmPackageVersion).then(({updateAvailable:e})=>this.updateAvailable=e)},data(){return{updating:!1,updateAvailable:!1}},methods:{doInstall(){this.updating=!0,Re(this.$scrypted.systemManager,this.device.pluginId).then(e=>{this.updateAvailable=!1}).finally(()=>this.updating=!1)}}},Ul=Nl,Fl=Object(j["a"])(Ul,$l,Bl,!1,null,null,null),Hl=Fl.exports;B()(Fl,{VBtn:N["a"]});var ql=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[e._v(e._s(e.device.pid))])},Gl=[],Wl={props:["device"]},Yl=Wl,Jl=Object(j["a"])(Yl,ql,Gl,!1,null,null,null),Kl=Jl.exports,Zl=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",{attrs:{row:""}},[n("v-flex",{attrs:{xs12:"",md6:""}},[e.cpuInteresting.length?n("Stats",{attrs:{interesting:e.cpuInteresting,label:"CPU Usage (Seconds)",labels:e.cpuLabels,series:e.cpuSeries},on:{dataPointSelection:function(t){return e.dataPointSelection(t,e.cpuInteresting)}}}):e._e()],1),n("v-flex",{attrs:{xs12:"",md6:""}},[e.memoryInteresting.length?n("Stats",{attrs:{interesting:e.memoryInteresting,label:"Memory Usage (MB)",labels:e.memoryLabels,series:e.memorySeries},on:{dataPointSelection:function(t){return e.dataPointSelection(t,e.memoryInteresting)}}}):e._e()],1),n("v-flex",{attrs:{xs12:"",md6:""}},[e.objectInteresting.length?n("Stats",{attrs:{interesting:e.objectInteresting,label:"RPC Objects",labels:e.objectLabels,series:e.objectSeries},on:{dataPointSelection:function(t){return e.dataPointSelection(t,e.objectInteresting)}}}):e._e()],1),n("v-flex",{attrs:{xs12:"",md6:""}},[e.pendingInteresting.length?n("Stats",{attrs:{interesting:e.pendingInteresting,label:"Pending Results",labels:e.pendingLabels,series:e.pendingSeries},on:{dataPointSelection:function(t){return e.dataPointSelection(t,e.pendingInteresting)}}}):e._e()],1)],1)},Xl=[],Ql=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{staticStyle:{height:"400px"}},[n("v-card-title",[e._v(e._s(e.label))]),n("apexchart",{attrs:{type:"donut",height:"300",width:"100%",options:e.chartOptions,series:e.series}})],1)},ed=[];function td(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function nd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?td(Object(n),!0).forEach((function(t){id(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):td(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function id(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var rd={props:["labels","series","label"],computed:{chartOptions(){const e=this;return nd({chart:{events:{dataPointSelection(t,n,i){e.$emit("dataPointSelection",i)}},type:"donut",animations:{speed:400},background:"transparent"},stroke:{show:!0,colors:[this.$vuetify.theme.dark?"#333":"#fff"],width:1,dashArray:0},plotOptions:{pie:{expandOnClick:!1,donut:{size:"74%"}}},labels:this.labels.map(e=>e.replace(" Plugin","").replace(" Controller","")),dataLabels:{enabled:!1},legend:{show:this.$vuetify.breakpoint.smAndUp,offsetY:0,fontSize:"13px",fontFamily:"Quicksand",fontWeight:700,width:200}},this.options)}}},ad=rd,sd=Object(j["a"])(ad,Ql,ed,!1,null,null,null),od=sd.exports;B()(sd,{VCard:U["a"],VCardTitle:F["d"]});var cd={components:{Stats:od},props:["value"],methods:{dataPointSelection(e,t){const{id:n}=t[e.dataPointIndex];this.$router.push(pe(n))}},computed:{cpuInteresting(){const e=this.value.slice().filter(e=>{var t;return!(null===(t=e.stats)||void 0===t||!t.cpu)}).sort((e,t)=>e.stats.cpu.system+e.stats.cpu.user-(t.stats.cpu.system+t.stats.cpu.user)).reverse().slice(0,10);return e},cpuLabels(){return this.cpuInteresting.map(e=>e.name)},cpuSeries(){const e=this.cpuInteresting.map(e=>Math.round((e.stats.cpu.system+e.stats.cpu.user)/1e6));return e},memoryInteresting(){const e=this.value.slice().filter(e=>{var t;return!(null===(t=e.stats)||void 0===t||!t.memoryUsage)}).sort((e,t)=>e.stats.memoryUsage.heapTotal-t.stats.memoryUsage.heapTotal).reverse().slice(0,10);return e},memoryLabels(){return this.memoryInteresting.map(e=>e.name)},memorySeries(){const e=this.memoryInteresting.map(e=>Math.round(e.stats.memoryUsage.heapTotal/1e6));return e},pendingInteresting(){const e=this.value.slice().filter(e=>!!e.pendingResults).sort((e,t)=>e.pendingResults-t.pendingResults).reverse().slice(0,10);return e},pendingLabels(){return this.pendingInteresting.map(e=>e.name)},pendingSeries(){const e=this.pendingInteresting.slice().map(e=>e.pendingResults);return e},objectInteresting(){const e=this.value.slice().filter(e=>!!e.rpcObjects).sort((e,t)=>e.rpcObjects-t.rpcObjects).reverse().slice(0,10);return e},objectLabels(){return this.objectInteresting.map(e=>e.name)},objectSeries(){const e=this.objectInteresting.slice().map(e=>e.rpcObjects);return e}}},ld=cd,dd=Object(j["a"])(ld,Zl,Xl,!1,null,null,null),ud=dd.exports;B()(dd,{VFlex:W["a"],VLayout:K["a"]});var pd,md,vd={mixins:[jl],methods:{getOwnerColumn(e){return e.pluginId},getOwnerLink(e){return"https://www.npmjs.com/package/"+e.pluginId},async openAutoupdater(){const{systemManager:e}=this.$scrypted,t=Le(e,"@scrypted/core","automation:update-plugins");this.$router.push(pe(t))},async snapshotCurrentPlugins(){const e=await ze(this.$scrypted);this.$router.push(pe(e))}},data(){var e=this;return{stats:[],footer:ud,cards:[{body:null,buttons:[{title:"Install",click(){e.$router.push(e.componentViewPath+"/install")}},{title:"Auto Updates",click(){e.openAutoupdater()}},{title:"Snapshot Plugins",click(){e.snapshotCurrentPlugins()}}],description:"Integrate your existing smart home devices and services.",title:"Plugin Management"}],resettable:!0,component:{icon:"zap",id:"script",name:"Plugins"}}},asyncComputed:{footerModel:{async get(){return(await this.deviceGroups)[0].devices},default:[]},deviceGroups:{async get(){this.stats=[];const e=Object.keys(this.$store.state.systemState),t=[],n=e.map(async e=>{const n=this.$scrypted.systemManager.getDeviceById(e);if(n.id!==n.providerId)return;const{name:i,type:r}=n,a=n.pluginId;let s;try{const e=await this.$scrypted.systemManager.getComponent("plugins");s=await e.getPluginInfo(a)}catch(m){}const{packageJson:o,pid:c,stats:l,rpcObjects:d,pendingResults:u}=s||{},p=null===o||void 0===o?void 0:o.version;t.push({id:e,name:i,type:r,pluginId:a,npmPackageVersion:p,pid:c,stats:l,rpcObjects:d,pendingResults:u})});return await Promise.allSettled(n),t.sort((e,t)=>e.name<t.name?-1:t.name<e.name?1:0),[{name:"Plugins",ownerColumn:"Plugin Package",devices:t,hideType:!0,tableProps:{extraColumn0:"Version",extraColumn1:"PID"},extraColumn0:Hl,extraColumn1:Kl}]},default:[{name:"Plugins",ownerColumn:"Plugin Package",devices:[],hideType:!0,tableProps:{extraColumn0:"Version",extraColumn1:"PID"},extraColumn0:Hl,extraColumn1:Kl}]}}},hd=vd,gd=Object(j["a"])(hd,pd,md,!1,null,null,null),fd=gd.exports,yd=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-flex",{attrs:{xs12:"",md8:"",lg6:""}},[n("v-card",{staticStyle:{"margin-bottom":"30px"},attrs:{raised:""}},[n("CardToolbar",{attrs:{icon:"fa-bolt"}},[e._v(" Scrypted Plugins ")]),n("v-card-text",[e._v("Integrate your existing smart home devices and services.")]),n("v-container",[n("v-layout",[n("v-flex",[n("v-text-field",{attrs:{placeholder:"Try searching for 'Hue' or 'Lifx'","append-icon":"search",label:"Search","single-line":"","hide-details":""},on:{input:e.doSearch},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)],1)],1)],1),n("v-flex",{attrs:{xs12:""}},e._l(e.results,(function(t){return n("v-card",{key:t.package.name,staticClass:"mb-2"},[n("v-card-title",{staticClass:"title"},[e._v(e._s(t.package.name))]),n("v-card-text",{staticClass:"subtitle-2"},[e._v(e._s(t.package.description))]),n("v-container",{staticClass:"ml-2"},[n("v-layout",{attrs:{"align-center":""}},[n("img",{staticClass:"mx-1",attrs:{src:e.avatar(t.package.publisher.email)}}),n("span",[n("b",[e._v(e._s(t.package.publisher.username))])]),n("span",{staticClass:"mx-1"},[e._v(e._s(" published "+t.package.version+"  "+new Date(t.package.date).toDateString()))])])],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{small:"",color:"info",outlined:""},on:{click:function(n){return e.openLink(t.package.links.npm)}}},[e._v("View on npm")]),n("v-btn",{attrs:{color:"success",small:""},on:{click:function(n){return e.install(t.package.name)}}},[e._v("Install")])],1)],1)})),1)],1)},bd=[],Sd=n("b047c"),_d=n.n(Sd),xd=n("6821"),wd=n.n(xd),Cd=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-toolbar",{attrs:{dense:"",dark:"",color:e.color||(e.$vuetify.theme.dark?void 0:e.colors.indigo.darken2)}},[e.icon?n("v-icon",{attrs:{small:""}},[e._v(e._s(e.icon))]):e._e(),e._v(" "),e._t("default")],2)},Pd=[],kd={props:["color","icon"],data(){return{colors:lr.a}}},Dd=kd,Id=Object(j["a"])(Dd,Cd,Pd,!1,null,null,null),Td=Id.exports;B()(Id,{VIcon:J["a"],VToolbar:rt["a"]});var Od={components:{CardToolbar:Td},data:function(){return{search:this.$route.params.pathMatch||"",results:[]}},mounted:function(){this.doSearch()},methods:{install(e){Re(this.$scrypted.systemManager,e).then(e=>this.$router.push(pe(e)))},openLink(e){window.open(e,"_blank")},avatar(e){return`https://www.gravatar.com/avatar/${wd()(e)}?s=28`},doSearch:_d()((function(){ae.a.get("https://registry.npmjs.org/-/v1/search?text=keywords:scrypted+"+this.search).then(e=>{this.results=e.data.objects})}),500)}},Vd=Od,Md=Object(j["a"])(Vd,yd,bd,!1,null,null,null),Rd=Md.exports;B()(Md,{VBtn:N["a"],VCard:U["a"],VCardActions:F["a"],VCardText:F["c"],VCardTitle:F["d"],VContainer:q["a"],VFlex:W["a"],VLayout:K["a"],VSpacer:Z["a"],VTextField:X["a"]});var Ed=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-flex",{attrs:{xs12:""}},[n("LogCard",{attrs:{logRoute:e.logRoute}})],1)},Ld=[],zd={components:{LogCard:st},data(){return{logRoute:window.location.hash.replace("#/component/log","")}},watch:{$route:{deep:!0,handler(){this.logRoute=window.location.hash.replace("#/component/log","")}}}},Ad=zd,jd=Object(j["a"])(Ad,Ed,Ld,!1,null,null,null),$d=jd.exports;B()(jd,{VFlex:W["a"]});var Bd=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs12:"",md6:"",lg4:""}},[n("Settings",{staticClass:"mb-2",attrs:{device:e.coreDevice}}),e.updateAvailable?n("v-card",[n("v-toolbar",[n("v-toolbar-title",[e._v("Update Available ")])],1),n("v-card-text",[e._v(" Installed: "),n("v-chip",{attrs:{"x-small":"",color:"info"}},[e._v(e._s(e.currentVersion))]),e._v("  Update: "),n("v-chip",{attrs:{color:"green","x-small":""}},[e._v(e._s(e.updateAvailable))])],1),e.canUpdate?n("v-card-text",[e._v(" There is an update available for Scrypted. ")]):n("v-card-text",[e._v(" There is an update available for Scrypted. Pull the new docker image to upgrade. If you are using Watchtower, an update check and installation happens automatically once a day. ")]),n("v-card-actions",[n("v-spacer"),e.canUpdate?n("v-dialog",{attrs:{width:"500"},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[n("v-btn",e._g({attrs:{small:"",text:"",color:"red"}},i),[e._v("Update and Restart Scrypted")])]}}],null,!1,3085043908),model:{value:e.updateAndRestart,callback:function(t){e.updateAndRestart=t},expression:"updateAndRestart"}},[n("v-card",{attrs:{color:"red",dark:""}},[n("v-card-title",{attrs:{"primary-title":""}},[e._v("Restart Scrypted")]),n("v-card-text",[e._v("Are you sure you want to restart the Scrypted service?")]),n("v-card-text",[e._v(e._s(e.restartStatus))]),n("v-divider"),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{text:""},on:{click:function(t){e.updateAndRestart=!1}}},[e._v("Cancel")]),n("v-btn",{attrs:{text:""},on:{click:e.doUpdateAndRestart}},[e._v("Restart")])],1)],1)],1):n("v-btn",{attrs:{small:"",text:"",href:"https://github.com/koush/scrypted#installation"}},[e._v("More Information")])],1)],1):e.currentVersion?n("v-card",[n("v-toolbar",[n("v-toolbar-title",[e._v("Server Version")])],1),n("v-card-text",[e._v(" Current Version: "+e._s(e.currentVersion)+" ")]),n("v-card-text",[e._v(" You're up to date! ")])],1):e._e(),e.showRestart?n("v-card",{staticClass:"mt-2"},[n("v-toolbar",[n("v-toolbar-title",[e._v("Server Management")])],1),n("v-card-actions",[n("v-spacer"),n("v-dialog",{attrs:{width:"500"},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[n("v-btn",e._g({attrs:{small:"",text:"",color:"red"}},i),[e._v("Restart Scrypted")])]}}],null,!1,2012619646),model:{value:e.restart,callback:function(t){e.restart=t},expression:"restart"}},[n("v-card",{attrs:{color:"red",dark:""}},[n("v-card-title",{attrs:{"primary-title":""}},[e._v("Restart Scrypted")]),n("v-card-text",[e._v("Are you sure you want to restart the Scrypted service?")]),n("v-card-text",[e._v(e._s(e.restartStatus))]),n("v-divider"),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{text:""},on:{click:function(t){e.restart=!1}}},[e._v("Cancel")]),n("v-btn",{attrs:{text:""},on:{click:e.doRestart}},[e._v("Restart")])],1)],1)],1)],1)],1):e._e()],1)],1)},Nd=[];function Ud(e){const t=Object.keys(e.getSystemState()).map(t=>e.getDeviceById(t)).filter(e=>{var t;return null===(t=e.interfaces)||void 0===t?void 0:t.includes("SystemSettings")});return{name:"Settings",type:ce["ScryptedDeviceType"].Builtin,interfaces:[ce["ScryptedInterface"].Settings],async setName(e){},async setRoom(){},async setType(){},async probe(){return!0},async setMixins(){},listen(e,n){let i=t.map(t=>t.listen(e,n));return{removeListener(){for(const e of i)e.removeListener();i=[]}}},async getSettings(){const e=t.map(async e=>{const t=await e.getSettings();for(const n of t)"@scrypted/core"===e.pluginId?n.group="General":n.group=e.name,n.key=e.id+":"+n.key;return t});return(await Promise.all(e)).flat()},async putSetting(e,n){const[i,r]=e.split(":"),a=t.find(e=>e.id===i);return null===a||void 0===a?void 0:a.putSetting(r,n)}}}var Fd={components:{Settings:zr},data(){return{coreDevice:Ud(this.$scrypted.systemManager),currentVersion:null,updateAvailable:null,canUpdate:!1,updateAndRestart:!1,restart:!1,restartStatus:void 0,showRestart:!1}},mounted(){this.loadEnv(),this.checkUpdateAvailable()},methods:{async checkUpdateAvailable(){const e=await this.$scrypted.systemManager.getComponent("info"),t=await e.getVersion();this.currentVersion=t;const{updateAvailable:n}=await Me("@scrypted/server",t);this.updateAvailable=n},async loadEnv(){const e=await this.$scrypted.systemManager.getComponent("info"),t=await e.getScryptedEnv();this.showRestart=!!t.SCRYPTED_CAN_RESTART,this.canUpdate=!!t.SCRYPTED_NPM_SERVE||!!t.SCRYPTED_WEBHOOK_UPDATE},async doRestart(){this.restartStatus="Restarting...";const e=await this.$scrypted.systemManager.getComponent("service-control");await e.restart()},async doUpdateAndRestart(){this.restartStatus="Restarting...";const e=await this.$scrypted.systemManager.getComponent("service-control");await e.update()}}},Hd=Fd,qd=Object(j["a"])(Hd,Bd,Nd,!1,null,null,null),Gd=qd.exports;B()(qd,{VBtn:N["a"],VCard:U["a"],VCardActions:F["a"],VCardText:F["c"],VCardTitle:F["d"],VChip:nt["a"],VDialog:G["a"],VDivider:$e["a"],VFlex:W["a"],VLayout:K["a"],VSpacer:Z["a"],VToolbar:rt["a"],VToolbarTitle:Us["a"]});var Wd=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{attrs:{raised:""}},[n("v-toolbar",{attrs:{dark:"",color:"blue"}},[e._v(" Terminal ")]),n("div",{ref:"terminal",staticStyle:{height:"700px"}})],1)},Yd=[],Jd=n("410f"),Kd=Jd["a"],Zd=Object(j["a"])(Kd,Wd,Yd,!1,null,null,null),Xd=Zd.exports;B()(Zd,{VCard:U["a"],VToolbar:rt["a"]});var Qd=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.id?n("Device",{attrs:{deviceId:e.id}}):e._e()},eu=[],tu={asyncComputed:{id:{async get(){const e=this.$store.state.scrypted.devices.map(e=>this.$scrypted.systemManager.getDeviceById(e)).find(e=>"@scrypted/core"===e.pluginId&&"users"===e.nativeId);return null===e||void 0===e?void 0:e.id}}},components:{Device:cl}},nu=tu,iu=Object(j["a"])(nu,Qd,eu,!1,null,null,null),ru=iu.exports;let au=new v["a"]({routes:[{path:"/device",component:vl},{path:"/",redirect:"/component/plugin"},{path:"/component/automation",component:kl},{path:"/component/shell",component:Xd},{path:"/component/plugin",component:fd},{path:"/component/script",component:Ml},{path:"/component/plugin/install",component:Rd},{path:"/component/plugin/install/*",component:Rd},{path:"/component/aggregate",component:Sl},{path:"/component/settings",component:Gd},{path:"/component/users",component:ru},{path:"/component/log/:path*",component:$d},{path:"/device/:id",component:cl}]});var su=au,ou=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{value:!0,persistent:"","max-width":"300px"}},[n("v-form",[n("v-card",[n("v-card-title",{staticClass:"headline text-uppercase",staticStyle:{"justify-content":"center"}},[e._v("Scrypted ")]),n("v-card-text",[e._v("Connection interrupted.")]),n("v-card-actions",[n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[n("v-btn",e._g({attrs:{icon:"",href:"https://github.com/koush/scrypted"}},i),[n("v-icon",{attrs:{small:""}},[e._v("fab fa-github")])],1)]}}])},[n("span",[e._v("Github")])]),n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[n("v-btn",e._g({attrs:{icon:"",href:"https://discord.gg/DcFzmBHYGq"}},i),[n("v-icon",{attrs:{small:""}},[e._v("fab fa-discord")])],1)]}}])},[n("span",[e._v("Discord")])]),n("v-spacer"),n("v-btn",{attrs:{text:""},on:{click:e.reconnect}},[e._v("Reconnect")])],1)],1)],1)],1)},cu=[],lu={methods:{reconnect(){this.$connectScrypted().catch(e=>this.loginResult=e.toString())}}},du=lu,uu=Object(j["a"])(du,ou,cu,!1,null,null,null),pu=uu.exports;B()(uu,{VBtn:N["a"],VCard:U["a"],VCardActions:F["a"],VCardText:F["c"],VCardTitle:F["d"],VDialog:G["a"],VForm:Y["a"],VIcon:J["a"],VSpacer:Z["a"],VTooltip:Q["a"]});var mu={name:"App",components:{Drawer:We,Login:te,Reconnect:pu},mounted(){this.darkMode&&(this.$vuetify.theme.dark=!0),this._timer=setInterval(function(){this.$data.now=Date.now()}.bind(this),1e3)},destroyed:function(){clearInterval(this._timer)},methods:{goHome(){window.location="/"},toggleDarkMode(){this.darkMode=!this.darkMode,this.$vuetify.theme.dark=this.darkMode,localStorage.setItem("darkMode",this.darkMode.toString())},reload(){window.location.reload()},logout(){ae.a.get("/logout").then(()=>window.location.reload())},async clearAlerts(){const e=await this.$scrypted.systemManager.getComponent("alerts");await e.clearAlerts()},getAlertIcon:he,removeAlert:ve,doAlert(e){this.$router.push(e.path)},friendlyTime(e){var t=new Date(parseFloat(e)),n=Math.floor((this.now-t)/1e3),i=Math.floor(n/31536e3);return i>1?i+" years ago":(i=Math.floor(n/2592e3),i>1?i+" months ago":(i=Math.floor(n/86400),i>1?i+" days ago":(i=Math.floor(n/3600),i>1?i+" hours ago":(i=Math.floor(n/60),i>1?i+" minutes ago":Math.floor(n)+" seconds ago"))))},alertConvert(e){return e.replace("/web/","/")}},created(){su.beforeEach((e,t,n)=>{this.title=e.name||"Scrypted",n()})},router:su,store:V,data(){return{darkMode:"true"===localStorage.getItem("darkMode"),now:0,title:"Scrypted",drawer:this.$vuetify.breakpoint.lgAndUp}}},vu=mu,hu=n("7496"),gu=n("40dc"),fu=n("5bc1"),yu=n("4ca6"),bu=n("0789"),Su=n("f6c4"),_u=Object(j["a"])(vu,ne,ie,!1,null,null,null),xu=_u.exports;B()(_u,{VApp:hu["a"],VAppBar:gu["a"],VAppBarNavIcon:fu["a"],VBadge:yu["a"],VBtn:N["a"],VContainer:q["a"],VDivider:$e["a"],VFadeTransition:bu["d"],VIcon:J["a"],VList:Be["a"],VListItem:Ne["a"],VListItemContent:Ue["a"],VListItemIcon:Fe["a"],VListItemSubtitle:Ue["b"],VListItemTitle:Ue["c"],VMain:Su["a"],VMenu:Wc["a"],VSpacer:Z["a"],VToolbarTitle:Us["a"]});const wu="/component/plugin/install/@scrypted/nvr";let Cu=new v["a"]({routes:[{path:"/",name:"Launcher"}]});var Pu={name:"Launcher",components:{Login:te,App:xu,Reconnect:pu},data(){return{nvrInstall:wu,loading:!0,showNvr:!1,applications:[{name:"Management Console",icon:"fa-cog",to:"/component/plugin"}]}},mounted(){this.refreshApplications()},methods:{logout(){ae.a.get("/logout").then(()=>window.location.reload())},refreshApplications(){if(!this.$store.state.isConnected||!this.$store.state.isLoggedIn||"Launcher"!==this.$route.name)return;this.loading=!1;const{systemManager:e}=this.$scrypted,t=De(e).filter(e=>e.interfaces.includes(ce["ScryptedInterface"].LauncherApplication));this.applications=t.map(e=>{const t=e.interfaces.includes(ce["ScryptedInterface"].ScryptedPlugin)?e.pluginId:e.id,n={name:e.applicationInfo&&e.applicationInfo.name||e.name,icon:e.applicationInfo&&e.applicationInfo.icon,href:e.applicationInfo&&e.applicationInfo.href||`/endpoint/${t}/public/`};return n}),this.applications.unshift({name:"Management Console",icon:"fa-cog",to:"/component/plugin"}),this.showNvr=!e.getDeviceByName("@scrypted/nvr")}},watch:{async"$store.state.isLoggedIn"(e){this.refreshApplications()},async"$store.state.isConnected"(e){this.refreshApplications()}},computed:{launcherRoute(){return"Launcher"===this.$route.name}},store:V,router:Cu},ku=Pu,Du=n("490a"),Iu=Object(j["a"])(ku,k,D,!1,null,null,null),Tu=Iu.exports;B()(Iu,{VApp:hu["a"],VBtn:N["a"],VCard:U["a"],VCardActions:F["a"],VCardSubtitle:F["b"],VCardTitle:F["d"],VIcon:J["a"],VList:Be["a"],VListItem:Ne["a"],VListItemIcon:Fe["a"],VListItemTitle:Ue["c"],VProgressCircular:Du["a"],VSpacer:Z["a"],VTooltip:Q["a"]});var Ou=n("9483");Object(Ou["a"])("/endpoint/@scrypted/core/public/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var Vu=n("5887"),Mu=n.n(Vu);i["default"].use(Mu.a,{componentPrefix:"vc"}),i["default"].directive("linkified",n("9aa5")),i["default"].config.productionTip=!1,new i["default"]({render:e=>e(Tu),vuetify:h}).$mount("#app")},ce2e:function(e,t,n){"use strict";var i,r,a=n("43b3"),s={props:{device:void 0,value:Object,properties:Object},mixins:[a["a"]],interfaceListener:null,mounted(){this.device||this.lazyValue.rpc||this.onChange(),this.watchDevice()},destroyed(){var e;null===(e=this.interfaceListener)||void 0===e||e.removeListener()},watch:{device(){this.watchDevice(),this.refresh()}},methods:{watchDevice(){var e;null===(e=this.interfaceListener)||void 0===e||e.removeListener(),this.device&&(this.interfaceListener=this.device.listen(this.$options._componentTag,()=>this.refresh()))},refresh(){},rpc(e){if(e=e||{},this.device&&!e.rpc)return this.device;const{varargs:t,append:n}=e;var i=this;return new Proxy({},{get:function(r,a){return function(){if(!i.device||e.rpc){var r=Array.prototype.slice.call(arguments);n?i.lazyValue.rpc.push({method:a,parameters:r,varargs:t}):i.lazyValue.rpc={method:a,parameters:r,varargs:t},i.onInput()}}}})}}},o=s,c=n("2877"),l=Object(c["a"])(o,i,r,!1,null,null,null);t["a"]=l.exports},d798:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("aecd");class r{constructor(e,t,n){this.mimeType=e,this.data=t,this.__proxy_props={},n||(n={}),n.mimeType=e;for(const[r,a]of Object.entries(n))i["b"].isTransportSafe(a)&&(this.__proxy_props[r]=a),this[r]=a}async getData(){return Promise.resolve(this.data)}}},e1df:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));class i{constructor(){this.finished=!1,this.promise=new Promise((e,t)=>{this.resolve=t=>(this.finished=!0,e(t),this),this.reject=e=>(this.finished=!0,t(e),this)})}}},edad:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var i,r=n("aecd");class a{constructor(){this.events={}}dispatchEvent(e){const t=this.events[e.type];if(t)for(const n of t)n(e)}addEventListener(e,t){let n=this.events[e];n||(n=this.events[e]=[]),n.push(t)}removeEventListener(e,t){const n=this.events[e];if(!n)return;const i=n.indexOf(t);i>-1&&n.splice(i,1)}}function s(e,t){Object.defineProperty(e,"on"+t,{get:function(){throw new Error(t+" is write only")},set:function(e){this.events[t]=[e]}})}function o(e){class t extends a{constructor(t,n){super(),this.connection=t,this._url=t.url,this._protocols=n,this.readyState=0,e(t,{connect:(e,t)=>{null==e?(this.readyState=1,this.dispatchEvent({type:"open"})):this.dispatchEvent({type:"error",message:e.toString()})},end:()=>{this.readyState=3,this.dispatchEvent({type:"close",reason:"closed"})},error:e=>{this.readyState=3,this.dispatchEvent({type:"error",message:e.toString()})},data:e=>{this.dispatchEvent({type:"message",data:e,source:this})}})}send(e){this.connection.send(e)}get url(){return this._url}get extensions(){return""}close(e){this.connection.close(e)}}return s(t.prototype,"close"),s(t.prototype,"error"),s(t.prototype,"message"),s(t.prototype,"open"),t}class c{constructor(e,t){this.url=e,this.websocketMethods=t,this[i]=["send","close"],this[r["b"].PROPERTY_PROXY_PROPERTIES]={url:e}}send(e){return this.websocketMethods.send(e)}close(e){return this.websocketMethods.close(e)}}r["b"].PROPERTY_PROXY_PROPERTIES,i=r["b"].PROPERTY_PROXY_ONEWAY_METHODS;class l{serialize(e,t){throw new Error("WebSocketSerializer should only be used for deserialization.")}deserialize(e,t){if(this.WebSocket)return new this.WebSocket(e)}}},f5d3:function(e){e.exports=JSON.parse('{"name":"@scrypted/client","version":"1.1.48","description":"","main":"dist/packages/client/src/index.js","scripts":{"prebuild":"rimraf dist","build":"tsc --outDir dist","prepublishOnly":"npm run build","test":"echo \\"Error: no test specified\\" && exit 1"},"author":"","license":"ISC","devDependencies":{"@types/ip":"^1.1.0","@types/node":"^18.14.2","typescript":"^4.9.5"},"dependencies":{"@scrypted/types":"^0.2.78","axios":"^0.25.0","engine.io-client":"^6.4.0","rimraf":"^3.0.2"}}')},f870:function(e,t,n){},fa01:function(e,t,n){"use strict";n("2bb0")},fa7b:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var i=n("42a6");class r{constructor(e){this.removeListener=e}}function a(e){let{event:t,mixinId:n}=e||{};if(t||"string"!==typeof e||(t=e),t||(t=void 0),!n)return t;let i=`${t}-mixin-${n}`;return i}const s=new Set([i["ScryptedInterface"].ScryptedDevice,"Logger","Storage"]);class o{constructor(){this.systemListeners=new Set,this.listeners={}}listen(e){const t=this.systemListeners;return t.add(e),new r(()=>{t.delete(e),e=void 0})}listenDevice(e,t,n){let i=a(t);const s=`${e}#${i}`;let o=this.listeners[s];return o||(o=new Set,this.listeners[s]=o),o.add(n),new r(()=>{o.delete(n),n=void 0})}notify(e,t,n,i,r,a){const{changed:s,mixinId:o}=a||{};if(i&&!s)return!1;const c={eventId:void 0,eventInterface:n,eventTime:t,property:i,mixinId:o};return this.notifyEventDetails(e,c,r)}notifyEventDetails(e,t,n,i){if(t.eventId||(t.eventId=Math.random().toString(36).substring(2)),i||(i=t.eventInterface),t.property&&!t.mixinId||s.has(i))for(const s of this.systemListeners)s(e,t,n);const r=this.listeners[`${e}#${i}`];if(r)for(const s of r)s(t,n);const a=this.listeners[e+"#undefined"];if(a)for(const s of a)s(t,n);return!0}}var c=n("aecd"),l=n("2e65");function d(e,t){const n=new u(e,t);return new Proxy(n,n)}class u{constructor(e,t){this.id=e,this.systemManager=t}toPrimitive(){return"ScryptedDevice-"+this.id}ownKeys(e){const t=new Set(this.systemManager.state[this.id].interfaces.value),n=Object(l["a"])(this.systemManager.descriptors||i["ScryptedInterfaceDescriptors"],t),r=Object(l["b"])(this.systemManager.descriptors||i["ScryptedInterfaceDescriptors"],t);return[...n,...r]}getOwnPropertyDescriptor(e,t){var n;const r=new Set(this.systemManager.state[this.id].interfaces.value),a=Object(l["a"])(this.systemManager.descriptors||i["ScryptedInterfaceDescriptors"],r),s=t.toString();if(a.includes(s))return{configurable:!0};const o=Object(l["b"])(this.systemManager.descriptors||i["ScryptedInterfaceDescriptors"],r);return o.includes(s)?{configurable:!0,value:null===(n=this.systemManager.state[this.id][s])||void 0===n?void 0:n.value}:void 0}deleteProperty(e,t){const n=t.toString();return!Object.keys(i["ScryptedInterfaceProperty"]).includes(n)&&(this.customProperties||(this.customProperties=new Map),this.customProperties.set(t,void 0),!0)}set(e,t,n,r){const a=t.toString();return!Object.keys(i["ScryptedInterfaceProperty"]).includes(a)&&(this.customProperties||(this.customProperties=new Map),this.customProperties.set(t,n),!0)}get(e,t,n){var r,a,s,o,d;if("id"===t)return this.id;if(null===(r=this.customProperties)||void 0===r?void 0:r.has(t))return this.customProperties.get(t);const u=c["b"].handleFunctionInvocations(this,e,t,n);if(u)return u;const p=new Set((null===(a=this.systemManager.state[this.id].interfaces)||void 0===a?void 0:a.value)||[]),m=t.toString(),v=(null===(s=this.systemManager.propertyInterfaces)||void 0===s?void 0:s[m])||l["e"][m];return v?null===(d=null===(o=this.systemManager.state[this.id])||void 0===o?void 0:o[t])||void 0===d?void 0:d.value:Object(l["d"])(this.systemManager.descriptors||i["ScryptedInterfaceDescriptors"],p,m)?i["ScryptedInterfaceDescriptors"][i["ScryptedInterface"].ScryptedDevice].methods.includes(m)?this[t].bind(this):new Proxy(()=>t,this):void 0}ensureDevice(){return this.device||(this.device=this.systemManager.api.getDeviceById(this.id)),this.device}async apply(e,t,n){const i=e(),r=await this.ensureDevice();return r[i](...n)}listen(e,t){return this.systemManager.listenDevice(this.id,e,t)}async setName(e){return this.systemManager.api.setDeviceProperty(this.id,i["ScryptedInterfaceProperty"].name,e)}async setRoom(e){return this.systemManager.api.setDeviceProperty(this.id,i["ScryptedInterfaceProperty"].room,e)}async setType(e){return this.systemManager.api.setDeviceProperty(this.id,i["ScryptedInterfaceProperty"].type,e)}async setMixins(e){const t=await this.systemManager.getComponent("plugins");await t.setMixins(this.id,e)}async probe(){return this.apply(()=>"probe",void 0,[])}}class p{constructor(e){this.promise=e}async removeListener(){try{const e=await this.promise;this.promise=void 0,null===e||void 0===e||e.removeListener()}catch(e){console.error("removeListener",e)}}}function m(e){const t=e,n=t[c["b"].PROPERTY_PROXY_ONEWAY_METHODS]||[];return n.includes(null)||n.push(null),t[c["b"].PROPERTY_PROXY_ONEWAY_METHODS]=n,e}class v{constructor(){this.deviceProxies={},this.events=new o}getDeviceState(e){return this.state[e]}getSystemState(){return this.state}getDeviceById(e){if(!this.state[e])return;let t=this.deviceProxies[e];return t||(t=this.deviceProxies[e]=d(e,this)),t}getDeviceByName(e){var t,n,r;for(const a of Object.keys(this.state)){const s=this.state[a];if((null===(n=null===(t=s.interfaces)||void 0===t?void 0:t.value)||void 0===n?void 0:n.includes(i["ScryptedInterface"].ScryptedPlugin))&&(null===(r=s.pluginId)||void 0===r?void 0:r.value)===e)return this.getDeviceById(a);if(s.name.value===e)return this.getDeviceById(a)}}listen(e){return this.events.listen(m((t,n,i)=>e(this.getDeviceById(t),n,i)))}listenDevice(e,t,n){let{watch:i}=t||{};return i?this.events.listenDevice(e,t,(t,i)=>n(this.getDeviceById(e),t,i)):new p(this.api.listenDevice(e,t,m((t,i)=>n(this.getDeviceById(e),t,i))))}async removeDevice(e){return this.api.removeDevice(e)}getComponent(e){return this.api.getComponent(e)}setScryptedInterfaceDescriptors(e,t){return this.typesVersion=e,this.descriptors=t,this.propertyInterfaces=Object(l["c"])(t),this.api.setScryptedInterfaceDescriptors(e,t)}}}});