/*! For license information please see main.nodejs.js.LICENSE.txt */
(()=>{var __webpack_modules__={5573:(e,t,r)=>{"use strict";var n=r(3685),o=r(5687),i=r(9796),s=r(2781),a=r(3837),c=r(7310),l=r(1808);function d(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var p=d(n),u=d(o),m=d(i),h=d(s);globalThis.ReadableStream||Object.assign(globalThis,r(3648));try{const{Blob:e}=r(4300);e&&!e.prototype.stream&&(e.prototype.stream=function(e){let t=0;const r=this;return new ReadableStream({type:"bytes",async pull(e){const n=r.slice(t,Math.min(r.size,t+65536)),o=await n.arrayBuffer();t+=o.byteLength,e.enqueue(new Uint8Array(o)),t===r.size&&e.close()}})})}catch(e){}async function*f(e,t=!0){for(let r of e)if("stream"in r)yield*r.stream();else if(ArrayBuffer.isView(r))if(t){let e=r.byteOffset,t=r.byteOffset+r.byteLength;for(;e!==t;){const n=Math.min(t-e,65536),o=r.buffer.slice(e,e+n);e+=o.byteLength,yield new Uint8Array(o)}}else yield r;else{let e=0;for(;e!==r.size;){const t=r.slice(e,Math.min(r.size,e+65536)),n=await t.arrayBuffer();e+=n.byteLength,yield new Uint8Array(n)}}}const y=class e{#e=[];#t="";#r=0;constructor(t=[],r={}){let n=0;const o=t.map((t=>{let r;return r=ArrayBuffer.isView(t)?new Uint8Array(t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)):t instanceof ArrayBuffer?new Uint8Array(t.slice(0)):t instanceof e?t:(new TextEncoder).encode(t),n+=ArrayBuffer.isView(r)?r.byteLength:r.size,r})),i=void 0===r.type?"":String(r.type);this.#t=/[^\u0020-\u007E]/.test(i)?"":i,this.#r=n,this.#e=o}get size(){return this.#r}get type(){return this.#t}async text(){const e=new TextDecoder;let t="";for await(let r of f(this.#e,!1))t+=e.decode(r,{stream:!0});return t+=e.decode(),t}async arrayBuffer(){const e=new Uint8Array(this.size);let t=0;for await(const r of f(this.#e,!1))e.set(r,t),t+=r.length;return e.buffer}stream(){const e=f(this.#e,!0);return new ReadableStream({type:"bytes",async pull(t){const r=await e.next();r.done?t.close():t.enqueue(r.value)}})}slice(t=0,r=this.size,n=""){const{size:o}=this;let i=t<0?Math.max(o+t,0):Math.min(t,o),s=r<0?Math.max(o+r,0):Math.min(r,o);const a=Math.max(s-i,0),c=this.#e,l=[];let d=0;for(const e of c){if(d>=a)break;const t=ArrayBuffer.isView(e)?e.byteLength:e.size;if(i&&t<=i)i-=t,s-=t;else{let r;ArrayBuffer.isView(e)?(r=e.subarray(i,Math.min(t,s)),d+=r.byteLength):(r=e.slice(i,Math.min(t,s)),d+=r.size),l.push(r),i=0}}const p=new e([],{type:String(n).toLowerCase()});return p.#r=a,p.#e=l,p}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](e){return e&&"object"==typeof e&&"function"==typeof e.constructor&&("function"==typeof e.stream||"function"==typeof e.arrayBuffer)&&/^(Blob|File)$/.test(e[Symbol.toStringTag])}};Object.defineProperties(y.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});var g=y;const S=class extends g{#n=0;#o="";constructor(e,t,r={}){if(arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(e,r);const n=Number(r.lastModified);this.#n=Number.isNaN(n)?Date.now():n,this.#o=t}get name(){return this.#o}get lastModified(){return this.#n}get[Symbol.toStringTag](){return"File"}};var{toStringTag:v,iterator:b,hasInstance:_}=Symbol,w=Math.random,P="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),T=(e,t,r)=>(e+="",/^(Blob|File)$/.test(t&&t[v])?[(r=void 0!==r?r+"":"File"==t[v]?t.name:"blob",e),t.name!==r||"blob"==t[v]?new S([t],r,t):t]:[e,t+""]),x=(e,t)=>(t?e:e.replace(/\r?\n|\r/g,"\r\n")).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),D=(e,t,r)=>{if(t.length<r)throw new TypeError(`Failed to execute '${e}' on 'FormData': ${r} arguments required, but only ${t.length} present.`)};const R=class{#i=[];constructor(...e){if(e.length)throw new TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[v](){return"FormData"}[b](){return this.entries()}static[_](e){return e&&"object"==typeof e&&"FormData"===e[v]&&!P.some((t=>"function"!=typeof e[t]))}append(...e){D("append",arguments,2),this.#i.push(T(...e))}delete(e){D("delete",arguments,1),e+="",this.#i=this.#i.filter((([t])=>t!==e))}get(e){D("get",arguments,1),e+="";for(var t=this.#i,r=t.length,n=0;n<r;n++)if(t[n][0]===e)return t[n][1];return null}getAll(e,t){return D("getAll",arguments,1),t=[],e+="",this.#i.forEach((r=>r[0]===e&&t.push(r[1]))),t}has(e){return D("has",arguments,1),e+="",this.#i.some((t=>t[0]===e))}forEach(e,t){for(var[r,n]of(D("forEach",arguments,1),this))e.call(t,n,r,this)}set(...e){D("set",arguments,2);var t=[],r=!0;e=T(...e),this.#i.forEach((n=>{n[0]===e[0]?r&&(r=!t.push(e)):t.push(n)})),r&&t.push(e),this.#i=t}*entries(){yield*this.#i}*keys(){for(var[e]of this)yield e}*values(){for(var[,e]of this)yield e}};class O extends Error{constructor(e,t){super(e),Error.captureStackTrace(this,this.constructor),this.type=t}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}}class C extends O{constructor(e,t,r){super(e,t),r&&(this.code=this.errno=r.code,this.erroredSysCall=r.syscall)}}const M=Symbol.toStringTag,I=e=>"object"==typeof e&&"function"==typeof e.append&&"function"==typeof e.delete&&"function"==typeof e.get&&"function"==typeof e.getAll&&"function"==typeof e.has&&"function"==typeof e.set&&"function"==typeof e.sort&&"URLSearchParams"===e[M],E=e=>e&&"object"==typeof e&&"function"==typeof e.arrayBuffer&&"string"==typeof e.type&&"function"==typeof e.stream&&"function"==typeof e.constructor&&/^(Blob|File)$/.test(e[M]),k=Symbol("Body internals");class A{constructor(e,{size:t=0}={}){let r=null;null===e?e=null:I(e)?e=Buffer.from(e.toString()):E(e)||Buffer.isBuffer(e)||(a.types.isAnyArrayBuffer(e)?e=Buffer.from(e):ArrayBuffer.isView(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):e instanceof h.default||(e instanceof R?r=(e=function(e,t=g){var r=`${w()}${w()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),n=[],o=`--${r}\r\nContent-Disposition: form-data; name="`;return e.forEach(((e,t)=>"string"==typeof e?n.push(o+x(t)+`"\r\n\r\n${e.replace(/\r(?!\n)|(?<!\r)\n/g,"\r\n")}\r\n`):n.push(o+x(t)+`"; filename="${x(e.name,1)}"\r\nContent-Type: ${e.type||"application/octet-stream"}\r\n\r\n`,e,"\r\n"))),n.push(`--${r}--`),new t(n,{type:"multipart/form-data; boundary="+r})}(e)).type.split("=")[1]:e=Buffer.from(String(e))));let n=e;Buffer.isBuffer(e)?n=h.default.Readable.from(e):E(e)&&(n=h.default.Readable.from(e.stream())),this[k]={body:e,stream:n,boundary:r,disturbed:!1,error:null},this.size=t,e instanceof h.default&&e.on("error",(e=>{const t=e instanceof O?e:new C(`Invalid response body while trying to fetch ${this.url}: ${e.message}`,"system",e);this[k].error=t}))}get body(){return this[k].stream}get bodyUsed(){return this[k].disturbed}async arrayBuffer(){const{buffer:e,byteOffset:t,byteLength:r}=await j(this);return e.slice(t,t+r)}async formData(){const e=this.headers.get("content-type");if(e.startsWith("application/x-www-form-urlencoded")){const e=new R,t=new URLSearchParams(await this.text());for(const[r,n]of t)e.append(r,n);return e}const{toFormData:t}=await Promise.resolve().then((function(){return r(7707)}));return t(this.body,e)}async blob(){const e=this.headers&&this.headers.get("content-type")||this[k].body&&this[k].body.type||"",t=await this.buffer();return new g([t],{type:e})}async json(){const e=await j(this);return JSON.parse(e.toString())}async text(){return(await j(this)).toString()}buffer(){return j(this)}}async function j(e){if(e[k].disturbed)throw new TypeError(`body used already for: ${e.url}`);if(e[k].disturbed=!0,e[k].error)throw e[k].error;const{body:t}=e;if(null===t)return Buffer.alloc(0);if(!(t instanceof h.default))return Buffer.alloc(0);const r=[];let n=0;try{for await(const o of t){if(e.size>0&&n+o.length>e.size){const r=new C(`content size at ${e.url} over limit: ${e.size}`,"max-size");throw t.destroy(r),r}n+=o.length,r.push(o)}}catch(t){throw t instanceof O?t:new C(`Invalid response body while trying to fetch ${e.url}: ${t.message}`,"system",t)}if(!0!==t.readableEnded&&!0!==t._readableState.ended)throw new C(`Premature close of server response while trying to fetch ${e.url}`);try{return r.every((e=>"string"==typeof e))?Buffer.from(r.join("")):Buffer.concat(r,n)}catch(t){throw new C(`Could not create Buffer from response body for ${e.url}: ${t.message}`,"system",t)}}A.prototype.buffer=a.deprecate(A.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer"),Object.defineProperties(A.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}});const L=(e,t)=>{let r,n,{body:o}=e[k];if(e.bodyUsed)throw new Error("cannot clone body after it is used");return o instanceof h.default&&"function"!=typeof o.getBoundary&&(r=new s.PassThrough({highWaterMark:t}),n=new s.PassThrough({highWaterMark:t}),o.pipe(r),o.pipe(n),e[k].stream=r,o=n),o},B=a.deprecate((e=>e.getBoundary()),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),H=(e,t)=>null===e?null:"string"==typeof e?"text/plain;charset=UTF-8":I(e)?"application/x-www-form-urlencoded;charset=UTF-8":E(e)?e.type||null:Buffer.isBuffer(e)||a.types.isAnyArrayBuffer(e)||ArrayBuffer.isView(e)?null:e instanceof R?`multipart/form-data; boundary=${t[k].boundary}`:e&&"function"==typeof e.getBoundary?`multipart/form-data;boundary=${B(e)}`:e instanceof h.default?null:"text/plain;charset=UTF-8",q="function"==typeof p.default.validateHeaderName?p.default.validateHeaderName:e=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(e)){const t=new TypeError(`Header name must be a valid HTTP token [${e}]`);throw Object.defineProperty(t,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),t}},F="function"==typeof p.default.validateHeaderValue?p.default.validateHeaderValue:(e,t)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(t)){const t=new TypeError(`Invalid character in header content ["${e}"]`);throw Object.defineProperty(t,"code",{value:"ERR_INVALID_CHAR"}),t}};class N extends URLSearchParams{constructor(e){let t=[];if(e instanceof N){const r=e.raw();for(const[e,n]of Object.entries(r))t.push(...n.map((t=>[e,t])))}else if(null==e);else{if("object"!=typeof e||a.types.isBoxedPrimitive(e))throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");{const r=e[Symbol.iterator];if(null==r)t.push(...Object.entries(e));else{if("function"!=typeof r)throw new TypeError("Header pairs must be iterable");t=[...e].map((e=>{if("object"!=typeof e||a.types.isBoxedPrimitive(e))throw new TypeError("Each header pair must be an iterable object");return[...e]})).map((e=>{if(2!==e.length)throw new TypeError("Each header pair must be a name/value tuple");return[...e]}))}}}return t=t.length>0?t.map((([e,t])=>(q(e),F(e,String(t)),[String(e).toLowerCase(),String(t)]))):void 0,super(t),new Proxy(this,{get(e,t,r){switch(t){case"append":case"set":return(r,n)=>(q(r),F(r,String(n)),URLSearchParams.prototype[t].call(e,String(r).toLowerCase(),String(n)));case"delete":case"has":case"getAll":return r=>(q(r),URLSearchParams.prototype[t].call(e,String(r).toLowerCase()));case"keys":return()=>(e.sort(),new Set(URLSearchParams.prototype.keys.call(e)).keys());default:return Reflect.get(e,t,r)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(e){const t=this.getAll(e);if(0===t.length)return null;let r=t.join(", ");return/^content-encoding$/i.test(e)&&(r=r.toLowerCase()),r}forEach(e,t){for(const r of this.keys())Reflect.apply(e,t,[this.get(r),r,this])}*values(){for(const e of this.keys())yield this.get(e)}*entries(){for(const e of this.keys())yield[e,this.get(e)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce(((e,t)=>(e[t]=this.getAll(t),e)),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce(((e,t)=>{const r=this.getAll(t);return e[t]="host"===t?r[0]:r.length>1?r:r[0],e}),{})}}Object.defineProperties(N.prototype,["get","entries","forEach","values"].reduce(((e,t)=>(e[t]={enumerable:!0},e)),{}));const U=new Set([301,302,303,307,308]),V=e=>U.has(e),z=Symbol("Response internals");class $ extends A{constructor(e=null,t={}){super(e,t);const r=null!=t.status?t.status:200,n=new N(t.headers);if(null!==e&&!n.has("Content-Type")){const t=H(e,this);t&&n.append("Content-Type",t)}this[z]={type:"default",url:t.url,status:r,statusText:t.statusText||"",headers:n,counter:t.counter,highWaterMark:t.highWaterMark}}get type(){return this[z].type}get url(){return this[z].url||""}get status(){return this[z].status}get ok(){return this[z].status>=200&&this[z].status<300}get redirected(){return this[z].counter>0}get statusText(){return this[z].statusText}get headers(){return this[z].headers}get highWaterMark(){return this[z].highWaterMark}clone(){return new $(L(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(e,t=302){if(!V(t))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new $(null,{headers:{location:new URL(e).toString()},status:t})}static error(){const e=new $(null,{status:0,statusText:""});return e[z].type="error",e}get[Symbol.toStringTag](){return"Response"}}Object.defineProperties($.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});function W(e,t=!1){return null==e?"no-referrer":(e=new URL(e),/^(about|blob|data):$/.test(e.protocol)?"no-referrer":(e.username="",e.password="",e.hash="",t&&(e.pathname="",e.search=""),e))}const Y=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]);function G(e){return!!/^about:(blank|srcdoc)$/.test(e)||("data:"===e.protocol||(!!/^(blob|filesystem):$/.test(e.protocol)||function(e){if(/^(http|ws)s:$/.test(e.protocol))return!0;const t=e.host.replace(/(^\[)|(]$)/g,""),r=l.isIP(t);return!(4!==r||!/^127\./.test(t))||!(6!==r||!/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(t))||!/^(.+\.)*localhost$/.test(e.host)&&"file:"===e.protocol}(e)))}const J=Symbol("Request internals"),Q=e=>"object"==typeof e&&"object"==typeof e[J];class Z extends A{constructor(e,t={}){let r;if(Q(e)?r=new URL(e.url):(r=new URL(e),e={}),""!==r.username||""!==r.password)throw new TypeError(`${r} is an url with embedded credentails.`);let n=t.method||e.method||"GET";if(n=n.toUpperCase(),(null!=t.body||Q(e))&&null!==e.body&&("GET"===n||"HEAD"===n))throw new TypeError("Request with GET/HEAD method cannot have body");const o=t.body?t.body:Q(e)&&null!==e.body?L(e):null;super(o,{size:t.size||e.size||0});const i=new N(t.headers||e.headers||{});if(null!==o&&!i.has("Content-Type")){const e=H(o,this);e&&i.set("Content-Type",e)}let s=Q(e)?e.signal:null;if("signal"in t&&(s=t.signal),null!=s&&("object"!=typeof(a=s)||"AbortSignal"!==a[M]&&"EventTarget"!==a[M]))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");var a;let c=null==t.referrer?e.referrer:t.referrer;if(""===c)c="no-referrer";else if(c){const e=new URL(c);c=/^about:(\/\/)?client$/.test(e)?"client":e}else c=void 0;this[J]={method:n,redirect:t.redirect||e.redirect||"follow",headers:i,parsedURL:r,signal:s,referrer:c},this.follow=void 0===t.follow?void 0===e.follow?20:e.follow:t.follow,this.compress=void 0===t.compress?void 0===e.compress||e.compress:t.compress,this.counter=t.counter||e.counter||0,this.agent=t.agent||e.agent,this.highWaterMark=t.highWaterMark||e.highWaterMark||16384,this.insecureHTTPParser=t.insecureHTTPParser||e.insecureHTTPParser||!1,this.referrerPolicy=t.referrerPolicy||e.referrerPolicy||""}get method(){return this[J].method}get url(){return c.format(this[J].parsedURL)}get headers(){return this[J].headers}get redirect(){return this[J].redirect}get signal(){return this[J].signal}get referrer(){return"no-referrer"===this[J].referrer?"":"client"===this[J].referrer?"about:client":this[J].referrer?this[J].referrer.toString():void 0}get referrerPolicy(){return this[J].referrerPolicy}set referrerPolicy(e){this[J].referrerPolicy=function(e){if(!Y.has(e))throw new TypeError(`Invalid referrerPolicy: ${e}`);return e}(e)}clone(){return new Z(this)}get[Symbol.toStringTag](){return"Request"}}Object.defineProperties(Z.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});const X=e=>{const{parsedURL:t}=e[J],r=new N(e[J].headers);r.has("Accept")||r.set("Accept","*/*");let n=null;if(null===e.body&&/^(post|put)$/i.test(e.method)&&(n="0"),null!==e.body){const t=(e=>{const{body:t}=e[k];return null===t?0:E(t)?t.size:Buffer.isBuffer(t)?t.length:t&&"function"==typeof t.getLengthSync&&t.hasKnownLength&&t.hasKnownLength()?t.getLengthSync():null})(e);"number"!=typeof t||Number.isNaN(t)||(n=String(t))}n&&r.set("Content-Length",n),""===e.referrerPolicy&&(e.referrerPolicy="strict-origin-when-cross-origin"),e.referrer&&"no-referrer"!==e.referrer?e[J].referrer=function(e,{referrerURLCallback:t,referrerOriginCallback:r}={}){if("no-referrer"===e.referrer||""===e.referrerPolicy)return null;const n=e.referrerPolicy;if("about:client"===e.referrer)return"no-referrer";const o=e.referrer;let i=W(o),s=W(o,!0);i.toString().length>4096&&(i=s),t&&(i=t(i)),r&&(s=r(s));const a=new URL(e.url);switch(n){case"no-referrer":return"no-referrer";case"origin":return s;case"unsafe-url":return i;case"strict-origin":return G(i)&&!G(a)?"no-referrer":s.toString();case"strict-origin-when-cross-origin":return i.origin===a.origin?i:G(i)&&!G(a)?"no-referrer":s;case"same-origin":return i.origin===a.origin?i:"no-referrer";case"origin-when-cross-origin":return i.origin===a.origin?i:s;case"no-referrer-when-downgrade":return G(i)&&!G(a)?"no-referrer":i;default:throw new TypeError(`Invalid referrerPolicy: ${n}`)}}(e):e[J].referrer="no-referrer",e[J].referrer instanceof URL&&r.set("Referer",e.referrer),r.has("User-Agent")||r.set("User-Agent","node-fetch"),e.compress&&!r.has("Accept-Encoding")&&r.set("Accept-Encoding","gzip,deflate,br");let{agent:o}=e;"function"==typeof o&&(o=o(t)),r.has("Connection")||o||r.set("Connection","close");const i=(e=>{if(e.search)return e.search;const t=e.href.length-1,r=e.hash||("#"===e.href[t]?"#":"");return"?"===e.href[t-r.length]?"?":""})(t);return{parsedURL:t,options:{path:t.pathname+i,method:e.method,headers:r[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:e.insecureHTTPParser,agent:o}}};class K extends O{constructor(e,t="aborted"){super(e,t)}}const ee=new Set(["data:","http:","https:"]);t.AbortError=K,t.FetchError=C,t.File=S,t.FormData=R,t.Headers=N,t.Request=Z,t.Response=$,t.fetch=async function e(t,r){return new Promise(((n,o)=>{const i=new Z(t,r),{parsedURL:a,options:c}=X(i);if(!ee.has(a.protocol))throw new TypeError(`node-fetch cannot load ${t}. URL scheme "${a.protocol.replace(/:$/,"")}" is not supported.`);if("data:"===a.protocol){const e=function(e){if(!/^data:/i.test(e))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');const t=(e=e.replace(/\r?\n/g,"")).indexOf(",");if(-1===t||t<=4)throw new TypeError("malformed data: URI");const r=e.substring(5,t).split(";");let n="",o=!1;const i=r[0]||"text/plain";let s=i;for(let e=1;e<r.length;e++)"base64"===r[e]?o=!0:(s+=`;${r[e]}`,0===r[e].indexOf("charset=")&&(n=r[e].substring(8)));r[0]||n.length||(s+=";charset=US-ASCII",n="US-ASCII");const a=o?"base64":"ascii",c=unescape(e.substring(t+1)),l=Buffer.from(c,a);return l.type=i,l.typeFull=s,l.charset=n,l}(i.url),t=new $(e,{headers:{"Content-Type":e.typeFull}});return void n(t)}const l=("https:"===a.protocol?u.default:p.default).request,{signal:d}=i;let f=null;const y=()=>{const e=new K("The operation was aborted.");o(e),i.body&&i.body instanceof h.default.Readable&&i.body.destroy(e),f&&f.body&&f.body.emit("error",e)};if(d&&d.aborted)return void y();const g=()=>{y(),v()},S=l(a,c);d&&d.addEventListener("abort",g);const v=()=>{S.abort(),d&&d.removeEventListener("abort",g)};S.on("error",(e=>{o(new C(`request to ${i.url} failed, reason: ${e.message}`,"system",e)),v()})),function(e,t){const r=Buffer.from("0\r\n\r\n");let n,o=!1,i=!1;e.on("response",(e=>{const{headers:t}=e;o="chunked"===t["transfer-encoding"]&&!t["content-length"]})),e.on("socket",(s=>{const a=()=>{if(o&&!i){const e=new Error("Premature close");e.code="ERR_STREAM_PREMATURE_CLOSE",t(e)}};s.prependListener("close",a),e.on("abort",(()=>{s.removeListener("close",a)})),s.on("data",(e=>{i=0===Buffer.compare(e.slice(-5),r),!i&&n&&(i=0===Buffer.compare(n.slice(-3),r.slice(0,3))&&0===Buffer.compare(e.slice(-2),r.slice(3))),n=e}))}))}(S,(e=>{f.body.destroy(e)})),process.version<"v14"&&S.on("socket",(e=>{let t;e.prependListener("end",(()=>{t=e._eventsCount})),e.prependListener("close",(r=>{if(f&&t<e._eventsCount&&!r){const e=new Error("Premature close");e.code="ERR_STREAM_PREMATURE_CLOSE",f.body.emit("error",e)}}))})),S.on("response",(t=>{S.setTimeout(0);const a=function(e=[]){return new N(e.reduce(((e,t,r,n)=>(r%2==0&&e.push(n.slice(r,r+2)),e)),[]).filter((([e,t])=>{try{return q(e),F(e,String(t)),!0}catch{return!1}})))}(t.rawHeaders);if(V(t.statusCode)){const s=a.get("Location"),c=null===s?null:new URL(s,i.url);switch(i.redirect){case"error":return o(new C(`uri requested responds with a redirect, redirect mode is set to error: ${i.url}`,"no-redirect")),void v();case"manual":null!==c&&a.set("Location",c);break;case"follow":{if(null===c)break;if(i.counter>=i.follow)return o(new C(`maximum redirect reached at: ${i.url}`,"max-redirect")),void v();const s={headers:new N(i.headers),follow:i.follow,counter:i.counter+1,agent:i.agent,compress:i.compress,method:i.method,body:L(i),signal:i.signal,size:i.size,referrer:i.referrer,referrerPolicy:i.referrerPolicy};if(303!==t.statusCode&&i.body&&r.body instanceof h.default.Readable)return o(new C("Cannot follow redirect with body being a readable stream","unsupported-redirect")),void v();303!==t.statusCode&&(301!==t.statusCode&&302!==t.statusCode||"POST"!==i.method)||(s.method="GET",s.body=void 0,s.headers.delete("content-length"));const l=function(e){const t=(e.get("referrer-policy")||"").split(/[,\s]+/);let r="";for(const e of t)e&&Y.has(e)&&(r=e);return r}(a);return l&&(s.referrerPolicy=l),n(e(new Z(c,s))),void v()}default:return o(new TypeError(`Redirect option '${i.redirect}' is not a valid value of RequestRedirect`))}}d&&t.once("end",(()=>{d.removeEventListener("abort",g)}));let c=s.pipeline(t,new s.PassThrough,o);process.version<"v12.10"&&t.on("aborted",g);const l={url:i.url,status:t.statusCode,statusText:t.statusMessage,headers:a,size:i.size,counter:i.counter,highWaterMark:i.highWaterMark},p=a.get("Content-Encoding");if(!i.compress||"HEAD"===i.method||null===p||204===t.statusCode||304===t.statusCode)return f=new $(c,l),void n(f);const u={flush:m.default.Z_SYNC_FLUSH,finishFlush:m.default.Z_SYNC_FLUSH};if("gzip"===p||"x-gzip"===p)return c=s.pipeline(c,m.default.createGunzip(u),o),f=new $(c,l),void n(f);if("deflate"!==p&&"x-deflate"!==p){if("br"===p)return c=s.pipeline(c,m.default.createBrotliDecompress(),o),f=new $(c,l),void n(f);f=new $(c,l),n(f)}else{s.pipeline(t,new s.PassThrough,o).once("data",(e=>{c=8==(15&e[0])?s.pipeline(c,m.default.createInflate(),o):s.pipeline(c,m.default.createInflateRaw(),o),f=new $(c,l),n(f)}))}})),((e,{body:t})=>{null===t?e.end():t.pipe(e)})(S,i)}))},t.isRedirect=V},3699:(e,t,r)=>{"use strict";r(3685),r(5687),r(9796),r(2781);var n=r(5573);e.exports=t=n.fetch,Object.defineProperty(t,"__esModule",{value:!0}),r(3837),r(7310),r(1808),t.AbortError=n.AbortError,t.FetchError=n.FetchError,t.Headers=n.Headers,t.Request=n.Request,t.Response=n.Response,t.default=n.fetch,t.isRedirect=n.isRedirect},7707:(e,t,r)=>{"use strict";r(7147),r(1017);var n=r(1267),o=r(5573);r(3685),r(5687),r(9796),r(2781),r(3837),r(7310),r(1808),globalThis.DOMException||(()=>{const e=(new n.MessageChannel).port1,t=new ArrayBuffer(0);try{e.postMessage(t,[t,t])}catch(e){return e.constructor}})();let i=0;const s={START_BOUNDARY:i++,HEADER_FIELD_START:i++,HEADER_FIELD:i++,HEADER_VALUE_START:i++,HEADER_VALUE:i++,HEADER_VALUE_ALMOST_DONE:i++,HEADERS_ALMOST_DONE:i++,PART_DATA_START:i++,PART_DATA:i++,END:i++};let a=1;const c=a,l=a*=2,d=e=>32|e,p=()=>{};class u{constructor(e){this.index=0,this.flags=0,this.onHeaderEnd=p,this.onHeaderField=p,this.onHeadersEnd=p,this.onHeaderValue=p,this.onPartBegin=p,this.onPartData=p,this.onPartEnd=p,this.boundaryChars={},e="\r\n--"+e;const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r),this.boundaryChars[t[r]]=!0;this.boundary=t,this.lookbehind=new Uint8Array(this.boundary.length+8),this.state=s.START_BOUNDARY}write(e){let t=0;const r=e.length;let n=this.index,{lookbehind:o,boundary:i,boundaryChars:a,index:p,state:u,flags:m}=this;const h=this.boundary.length,f=h-1,y=e.length;let g,S;const v=e=>{this[e+"Mark"]=t},b=e=>{delete this[e+"Mark"]},_=(e,t,r,n)=>{void 0!==t&&t===r||this[e](n&&n.subarray(t,r))},w=(r,n)=>{const o=r+"Mark";o in this&&(n?(_(r,this[o],t,e),delete this[o]):(_(r,this[o],e.length,e),this[o]=0))};for(t=0;t<r;t++)switch(g=e[t],u){case s.START_BOUNDARY:if(p===i.length-2){if(45===g)m|=l;else if(13!==g)return;p++;break}if(p-1==i.length-2){if(m&l&&45===g)u=s.END,m=0;else{if(m&l||10!==g)return;p=0,_("onPartBegin"),u=s.HEADER_FIELD_START}break}g!==i[p+2]&&(p=-2),g===i[p+2]&&p++;break;case s.HEADER_FIELD_START:u=s.HEADER_FIELD,v("onHeaderField"),p=0;case s.HEADER_FIELD:if(13===g){b("onHeaderField"),u=s.HEADERS_ALMOST_DONE;break}if(p++,45===g)break;if(58===g){if(1===p)return;w("onHeaderField",!0),u=s.HEADER_VALUE_START;break}if(S=d(g),S<97||S>122)return;break;case s.HEADER_VALUE_START:if(32===g)break;v("onHeaderValue"),u=s.HEADER_VALUE;case s.HEADER_VALUE:13===g&&(w("onHeaderValue",!0),_("onHeaderEnd"),u=s.HEADER_VALUE_ALMOST_DONE);break;case s.HEADER_VALUE_ALMOST_DONE:if(10!==g)return;u=s.HEADER_FIELD_START;break;case s.HEADERS_ALMOST_DONE:if(10!==g)return;_("onHeadersEnd"),u=s.PART_DATA_START;break;case s.PART_DATA_START:u=s.PART_DATA,v("onPartData");case s.PART_DATA:if(n=p,0===p){for(t+=f;t<y&&!(e[t]in a);)t+=h;t-=f,g=e[t]}if(p<i.length)i[p]===g?(0===p&&w("onPartData",!0),p++):p=0;else if(p===i.length)p++,13===g?m|=c:45===g?m|=l:p=0;else if(p-1===i.length)if(m&c){if(p=0,10===g){m&=~c,_("onPartEnd"),_("onPartBegin"),u=s.HEADER_FIELD_START;break}}else m&l&&45===g?(_("onPartEnd"),u=s.END,m=0):p=0;if(p>0)o[p-1]=g;else if(n>0){const e=new Uint8Array(o.buffer,o.byteOffset,o.byteLength);_("onPartData",0,n,e),n=0,v("onPartData"),t--}break;case s.END:break;default:throw new Error(`Unexpected state entered: ${u}`)}w("onHeaderField"),w("onHeaderValue"),w("onPartData"),this.index=p,this.state=u,this.flags=m}end(){if(this.state===s.HEADER_FIELD_START&&0===this.index||this.state===s.PART_DATA&&this.index===this.boundary.length)this.onPartEnd();else if(this.state!==s.END)throw new Error("MultipartParser.end(): stream ended unexpectedly")}}t.toFormData=async function(e,t){if(!/multipart/i.test(t))throw new TypeError("Failed to fetch");const r=t.match(/boundary=(?:"([^"]+)"|([^;]+))/i);if(!r)throw new TypeError("no or bad content-type header, no multipart boundary");const n=new u(r[1]||r[2]);let i,s,a,c,l,d;const p=[],m=new o.FormData,h=e=>{a+=S.decode(e,{stream:!0})},f=e=>{p.push(e)},y=()=>{const e=new o.File(p,d,{type:l});m.append(c,e)},g=()=>{m.append(c,a)},S=new TextDecoder("utf-8");S.decode(),n.onPartBegin=function(){n.onPartData=h,n.onPartEnd=g,i="",s="",a="",c="",l="",d=null,p.length=0},n.onHeaderField=function(e){i+=S.decode(e,{stream:!0})},n.onHeaderValue=function(e){s+=S.decode(e,{stream:!0})},n.onHeaderEnd=function(){if(s+=S.decode(),i=i.toLowerCase(),"content-disposition"===i){const e=s.match(/\bname=("([^"]*)"|([^()<>@,;:\\"/[\]?={}\s\t]+))/i);e&&(c=e[2]||e[3]||""),d=function(e){const t=e.match(/\bfilename=("(.*?)"|([^()<>@,;:\\"/[\]?={}\s\t]+))($|;\s)/i);if(!t)return;const r=t[2]||t[3]||"";let n=r.slice(r.lastIndexOf("\\")+1);return n=n.replace(/%22/g,'"'),n=n.replace(/&#(\d{4});/g,((e,t)=>String.fromCharCode(t))),n}(s),d&&(n.onPartData=f,n.onPartEnd=y)}else"content-type"===i&&(l=s);s="",i=""};for await(const t of e)n.write(t);return n.end(),m}},3648:function(e,t){var r;r=function(e){"use strict";const t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol:e=>`Symbol(${e})`;function r(){}const n="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0;function o(e){return"object"==typeof e&&null!==e||"function"==typeof e}const i=r,s=Promise,a=Promise.prototype.then,c=Promise.resolve.bind(s),l=Promise.reject.bind(s);function d(e){return new s(e)}function p(e){return c(e)}function u(e){return l(e)}function m(e,t,r){return a.call(e,t,r)}function h(e,t,r){m(m(e,t,r),void 0,i)}function f(e,t){h(e,t)}function y(e,t){h(e,void 0,t)}function g(e,t,r){return m(e,t,r)}function S(e){m(e,void 0,i)}const v=(()=>{const e=n&&n.queueMicrotask;if("function"==typeof e)return e;const t=p(void 0);return e=>m(t,e)})();function b(e,t,r){if("function"!=typeof e)throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,t,r)}function _(e,t,r){try{return p(b(e,t,r))}catch(e){return u(e)}}class w{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(e){const t=this._back;let r=t;16383===t._elements.length&&(r={_elements:[],_next:void 0}),t._elements.push(e),r!==t&&(this._back=r,t._next=r),++this._size}shift(){const e=this._front;let t=e;const r=this._cursor;let n=r+1;const o=e._elements,i=o[r];return 16384===n&&(t=e._next,n=0),--this._size,this._cursor=n,e!==t&&(this._front=t),o[r]=void 0,i}forEach(e){let t=this._cursor,r=this._front,n=r._elements;for(;!(t===n.length&&void 0===r._next||t===n.length&&(r=r._next,n=r._elements,t=0,0===n.length));)e(n[t]),++t}peek(){const e=this._front,t=this._cursor;return e._elements[t]}}function P(e,t){e._ownerReadableStream=t,t._reader=e,"readable"===t._state?R(e):"closed"===t._state?function(e){R(e),M(e)}(e):O(e,t._storedError)}function T(e,t){return wr(e._ownerReadableStream,t)}function x(e){"readable"===e._ownerReadableStream._state?C(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):function(e,t){O(e,t)}(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),e._ownerReadableStream._reader=void 0,e._ownerReadableStream=void 0}function D(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function R(e){e._closedPromise=d(((t,r)=>{e._closedPromise_resolve=t,e._closedPromise_reject=r}))}function O(e,t){R(e),C(e,t)}function C(e,t){void 0!==e._closedPromise_reject&&(S(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function M(e){void 0!==e._closedPromise_resolve&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}const I=t("[[AbortSteps]]"),E=t("[[ErrorSteps]]"),k=t("[[CancelSteps]]"),A=t("[[PullSteps]]"),j=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)},L=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function B(e,t){if(void 0!==e&&"object"!=typeof(r=e)&&"function"!=typeof r)throw new TypeError(`${t} is not an object.`);var r}function H(e,t){if("function"!=typeof e)throw new TypeError(`${t} is not a function.`)}function q(e,t){if(!function(e){return"object"==typeof e&&null!==e||"function"==typeof e}(e))throw new TypeError(`${t} is not an object.`)}function F(e,t,r){if(void 0===e)throw new TypeError(`Parameter ${t} is required in '${r}'.`)}function N(e,t,r){if(void 0===e)throw new TypeError(`${t} is required in '${r}'.`)}function U(e){return Number(e)}function V(e){return 0===e?0:e}function z(e,t){const r=Number.MAX_SAFE_INTEGER;let n=Number(e);if(n=V(n),!j(n))throw new TypeError(`${t} is not a finite number`);if(n=function(e){return V(L(e))}(n),n<0||n>r)throw new TypeError(`${t} is outside the accepted range of 0 to ${r}, inclusive`);return j(n)&&0!==n?n:0}function $(e,t){if(!br(e))throw new TypeError(`${t} is not a ReadableStream.`)}function W(e){return new Z(e)}function Y(e,t){e._reader._readRequests.push(t)}function G(e,t,r){const n=e._reader._readRequests.shift();r?n._closeSteps():n._chunkSteps(t)}function J(e){return e._reader._readRequests.length}function Q(e){const t=e._reader;return void 0!==t&&!!X(t)}class Z{constructor(e){if(F(e,1,"ReadableStreamDefaultReader"),$(e,"First parameter"),_r(e))throw new TypeError("This stream has already been locked for exclusive reading by another reader");P(this,e),this._readRequests=new w}get closed(){return X(this)?this._closedPromise:u(ee("closed"))}cancel(e){return X(this)?void 0===this._ownerReadableStream?u(D("cancel")):T(this,e):u(ee("cancel"))}read(){if(!X(this))return u(ee("read"));if(void 0===this._ownerReadableStream)return u(D("read from"));let e,t;const r=d(((r,n)=>{e=r,t=n}));return K(this,{_chunkSteps:t=>e({value:t,done:!1}),_closeSteps:()=>e({value:void 0,done:!0}),_errorSteps:e=>t(e)}),r}releaseLock(){if(!X(this))throw ee("releaseLock");if(void 0!==this._ownerReadableStream){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");x(this)}}}function X(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readRequests")&&e instanceof Z}function K(e,t){const r=e._ownerReadableStream;r._disturbed=!0,"closed"===r._state?t._closeSteps():"errored"===r._state?t._errorSteps(r._storedError):r._readableStreamController[A](t)}function ee(e){return new TypeError(`ReadableStreamDefaultReader.prototype.${e} can only be used on a ReadableStreamDefaultReader`)}Object.defineProperties(Z.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(Z.prototype,t.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});const te=Object.getPrototypeOf(Object.getPrototypeOf((async function*(){})).prototype);class re{constructor(e,t){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=e,this._preventCancel=t}next(){const e=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?g(this._ongoingPromise,e,e):e(),this._ongoingPromise}return(e){const t=()=>this._returnSteps(e);return this._ongoingPromise?g(this._ongoingPromise,t,t):t()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});const e=this._reader;if(void 0===e._ownerReadableStream)return u(D("iterate"));let t,r;const n=d(((e,n)=>{t=e,r=n}));return K(e,{_chunkSteps:e=>{this._ongoingPromise=void 0,v((()=>t({value:e,done:!1})))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,x(e),t({value:void 0,done:!0})},_errorSteps:t=>{this._ongoingPromise=void 0,this._isFinished=!0,x(e),r(t)}}),n}_returnSteps(e){if(this._isFinished)return Promise.resolve({value:e,done:!0});this._isFinished=!0;const t=this._reader;if(void 0===t._ownerReadableStream)return u(D("finish iterating"));if(!this._preventCancel){const r=T(t,e);return x(t),g(r,(()=>({value:e,done:!0})))}return x(t),p({value:e,done:!0})}}const ne={next(){return oe(this)?this._asyncIteratorImpl.next():u(ie("next"))},return(e){return oe(this)?this._asyncIteratorImpl.return(e):u(ie("return"))}};function oe(e){if(!o(e))return!1;if(!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl"))return!1;try{return e._asyncIteratorImpl instanceof re}catch(e){return!1}}function ie(e){return new TypeError(`ReadableStreamAsyncIterator.${e} can only be used on a ReadableSteamAsyncIterator`)}void 0!==te&&Object.setPrototypeOf(ne,te);const se=Number.isNaN||function(e){return e!=e};function ae(e){return e.slice()}function ce(e,t,r,n,o){new Uint8Array(e).set(new Uint8Array(r,n,o),t)}function le(e,t,r){if(e.slice)return e.slice(t,r);const n=r-t,o=new ArrayBuffer(n);return ce(o,0,e,t,n),o}function de(e){const t=le(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(t)}function pe(e){const t=e._queue.shift();return e._queueTotalSize-=t.size,e._queueTotalSize<0&&(e._queueTotalSize=0),t.value}function ue(e,t,r){if("number"!=typeof(n=r)||se(n)||n<0||r===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");var n;e._queue.push({value:t,size:r}),e._queueTotalSize+=r}function me(e){e._queue=new w,e._queueTotalSize=0}class he{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!ge(this))throw qe("view");return this._view}respond(e){if(!ge(this))throw qe("respond");if(F(e,1,"respond"),e=z(e,"First parameter"),void 0===this._associatedReadableByteStreamController)throw new TypeError("This BYOB request has been invalidated");this._view.buffer,Le(this._associatedReadableByteStreamController,e)}respondWithNewView(e){if(!ge(this))throw qe("respondWithNewView");if(F(e,1,"respondWithNewView"),!ArrayBuffer.isView(e))throw new TypeError("You can only respond with array buffer views");if(void 0===this._associatedReadableByteStreamController)throw new TypeError("This BYOB request has been invalidated");e.buffer,Be(this._associatedReadableByteStreamController,e)}}Object.defineProperties(he.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(he.prototype,t.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class fe{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!ye(this))throw Fe("byobRequest");return Ae(this)}get desiredSize(){if(!ye(this))throw Fe("desiredSize");return je(this)}close(){if(!ye(this))throw Fe("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");const e=this._controlledReadableByteStream._state;if("readable"!==e)throw new TypeError(`The stream (in ${e} state) is not in the readable state and cannot be closed`);Ie(this)}enqueue(e){if(!ye(this))throw Fe("enqueue");if(F(e,1,"enqueue"),!ArrayBuffer.isView(e))throw new TypeError("chunk must be an array buffer view");if(0===e.byteLength)throw new TypeError("chunk must have non-zero byteLength");if(0===e.buffer.byteLength)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");const t=this._controlledReadableByteStream._state;if("readable"!==t)throw new TypeError(`The stream (in ${t} state) is not in the readable state and cannot be enqueued to`);Ee(this,e)}error(e){if(!ye(this))throw Fe("error");ke(this,e)}[k](e){ve(this),me(this);const t=this._cancelAlgorithm(e);return Me(this),t}[A](e){const t=this._controlledReadableByteStream;if(this._queueTotalSize>0){const t=this._queue.shift();this._queueTotalSize-=t.byteLength,xe(this);const r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return void e._chunkSteps(r)}const r=this._autoAllocateChunkSize;if(void 0!==r){let t;try{t=new ArrayBuffer(r)}catch(t){return void e._errorSteps(t)}const n={buffer:t,bufferByteLength:r,byteOffset:0,byteLength:r,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(n)}Y(t,e),Se(this)}}function ye(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")&&e instanceof fe}function ge(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")&&e instanceof he}function Se(e){const t=function(e){const t=e._controlledReadableByteStream;return"readable"===t._state&&(!e._closeRequested&&(!!e._started&&(!!(Q(t)&&J(t)>0)||(!!(ze(t)&&Ve(t)>0)||je(e)>0))))}(e);t&&(e._pulling?e._pullAgain=!0:(e._pulling=!0,h(e._pullAlgorithm(),(()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,Se(e))}),(t=>{ke(e,t)}))))}function ve(e){De(e),e._pendingPullIntos=new w}function be(e,t){let r=!1;"closed"===e._state&&(r=!0);const n=_e(t);"default"===t.readerType?G(e,n,r):function(e,t,r){const n=e._reader._readIntoRequests.shift();r?n._closeSteps(t):n._chunkSteps(t)}(e,n,r)}function _e(e){const t=e.bytesFilled,r=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,t/r)}function we(e,t,r,n){e._queue.push({buffer:t,byteOffset:r,byteLength:n}),e._queueTotalSize+=n}function Pe(e,t){const r=t.elementSize,n=t.bytesFilled-t.bytesFilled%r,o=Math.min(e._queueTotalSize,t.byteLength-t.bytesFilled),i=t.bytesFilled+o,s=i-i%r;let a=o,c=!1;s>n&&(a=s-t.bytesFilled,c=!0);const l=e._queue;for(;a>0;){const r=l.peek(),n=Math.min(a,r.byteLength),o=t.byteOffset+t.bytesFilled;ce(t.buffer,o,r.buffer,r.byteOffset,n),r.byteLength===n?l.shift():(r.byteOffset+=n,r.byteLength-=n),e._queueTotalSize-=n,Te(0,n,t),a-=n}return c}function Te(e,t,r){r.bytesFilled+=t}function xe(e){0===e._queueTotalSize&&e._closeRequested?(Me(e),Pr(e._controlledReadableByteStream)):Se(e)}function De(e){null!==e._byobRequest&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function Re(e){for(;e._pendingPullIntos.length>0;){if(0===e._queueTotalSize)return;const t=e._pendingPullIntos.peek();Pe(e,t)&&(Ce(e),be(e._controlledReadableByteStream,t))}}function Oe(e,t){const r=e._pendingPullIntos.peek();De(e),"closed"===e._controlledReadableByteStream._state?function(e,t){const r=e._controlledReadableByteStream;if(ze(r))for(;Ve(r)>0;)be(r,Ce(e))}(e):function(e,t,r){if(Te(0,t,r),r.bytesFilled<r.elementSize)return;Ce(e);const n=r.bytesFilled%r.elementSize;if(n>0){const t=r.byteOffset+r.bytesFilled,o=le(r.buffer,t-n,t);we(e,o,0,o.byteLength)}r.bytesFilled-=n,be(e._controlledReadableByteStream,r),Re(e)}(e,t,r),Se(e)}function Ce(e){return e._pendingPullIntos.shift()}function Me(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function Ie(e){const t=e._controlledReadableByteStream;if(!e._closeRequested&&"readable"===t._state)if(e._queueTotalSize>0)e._closeRequested=!0;else{if(e._pendingPullIntos.length>0&&e._pendingPullIntos.peek().bytesFilled>0){const t=new TypeError("Insufficient bytes to fill elements in the given buffer");throw ke(e,t),t}Me(e),Pr(t)}}function Ee(e,t){const r=e._controlledReadableByteStream;if(e._closeRequested||"readable"!==r._state)return;const n=t.buffer,o=t.byteOffset,i=t.byteLength,s=n;if(e._pendingPullIntos.length>0){const t=e._pendingPullIntos.peek();t.buffer,t.buffer=t.buffer}De(e),Q(r)?0===J(r)?we(e,s,o,i):(e._pendingPullIntos.length>0&&Ce(e),G(r,new Uint8Array(s,o,i),!1)):ze(r)?(we(e,s,o,i),Re(e)):we(e,s,o,i),Se(e)}function ke(e,t){const r=e._controlledReadableByteStream;"readable"===r._state&&(ve(e),me(e),Me(e),Tr(r,t))}function Ae(e){if(null===e._byobRequest&&e._pendingPullIntos.length>0){const t=e._pendingPullIntos.peek(),r=new Uint8Array(t.buffer,t.byteOffset+t.bytesFilled,t.byteLength-t.bytesFilled),n=Object.create(he.prototype);!function(e,t,r){e._associatedReadableByteStreamController=t,e._view=r}(n,e,r),e._byobRequest=n}return e._byobRequest}function je(e){const t=e._controlledReadableByteStream._state;return"errored"===t?null:"closed"===t?0:e._strategyHWM-e._queueTotalSize}function Le(e,t){const r=e._pendingPullIntos.peek();if("closed"===e._controlledReadableByteStream._state){if(0!==t)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(0===t)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(r.bytesFilled+t>r.byteLength)throw new RangeError("bytesWritten out of range")}r.buffer=r.buffer,Oe(e,t)}function Be(e,t){const r=e._pendingPullIntos.peek();if("closed"===e._controlledReadableByteStream._state){if(0!==t.byteLength)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(0===t.byteLength)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(r.byteOffset+r.bytesFilled!==t.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(r.bufferByteLength!==t.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(r.bytesFilled+t.byteLength>r.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");const n=t.byteLength;r.buffer=t.buffer,Oe(e,n)}function He(e,t,r,n,o,i,s){t._controlledReadableByteStream=e,t._pullAgain=!1,t._pulling=!1,t._byobRequest=null,t._queue=t._queueTotalSize=void 0,me(t),t._closeRequested=!1,t._started=!1,t._strategyHWM=i,t._pullAlgorithm=n,t._cancelAlgorithm=o,t._autoAllocateChunkSize=s,t._pendingPullIntos=new w,e._readableStreamController=t,h(p(r()),(()=>{t._started=!0,Se(t)}),(e=>{ke(t,e)}))}function qe(e){return new TypeError(`ReadableStreamBYOBRequest.prototype.${e} can only be used on a ReadableStreamBYOBRequest`)}function Fe(e){return new TypeError(`ReadableByteStreamController.prototype.${e} can only be used on a ReadableByteStreamController`)}function Ne(e){return new $e(e)}function Ue(e,t){e._reader._readIntoRequests.push(t)}function Ve(e){return e._reader._readIntoRequests.length}function ze(e){const t=e._reader;return void 0!==t&&!!We(t)}Object.defineProperties(fe.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(fe.prototype,t.toStringTag,{value:"ReadableByteStreamController",configurable:!0});class $e{constructor(e){if(F(e,1,"ReadableStreamBYOBReader"),$(e,"First parameter"),_r(e))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!ye(e._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");P(this,e),this._readIntoRequests=new w}get closed(){return We(this)?this._closedPromise:u(Ge("closed"))}cancel(e){return We(this)?void 0===this._ownerReadableStream?u(D("cancel")):T(this,e):u(Ge("cancel"))}read(e){if(!We(this))return u(Ge("read"));if(!ArrayBuffer.isView(e))return u(new TypeError("view must be an array buffer view"));if(0===e.byteLength)return u(new TypeError("view must have non-zero byteLength"));if(0===e.buffer.byteLength)return u(new TypeError("view's buffer must have non-zero byteLength"));if(e.buffer,void 0===this._ownerReadableStream)return u(D("read from"));let t,r;const n=d(((e,n)=>{t=e,r=n}));return Ye(this,e,{_chunkSteps:e=>t({value:e,done:!1}),_closeSteps:e=>t({value:e,done:!0}),_errorSteps:e=>r(e)}),n}releaseLock(){if(!We(this))throw Ge("releaseLock");if(void 0!==this._ownerReadableStream){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");x(this)}}}function We(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")&&e instanceof $e}function Ye(e,t,r){const n=e._ownerReadableStream;n._disturbed=!0,"errored"===n._state?r._errorSteps(n._storedError):function(e,t,r){const n=e._controlledReadableByteStream;let o=1;t.constructor!==DataView&&(o=t.constructor.BYTES_PER_ELEMENT);const i=t.constructor,s=t.buffer,a={buffer:s,bufferByteLength:s.byteLength,byteOffset:t.byteOffset,byteLength:t.byteLength,bytesFilled:0,elementSize:o,viewConstructor:i,readerType:"byob"};if(e._pendingPullIntos.length>0)return e._pendingPullIntos.push(a),void Ue(n,r);if("closed"!==n._state){if(e._queueTotalSize>0){if(Pe(e,a)){const t=_e(a);return xe(e),void r._chunkSteps(t)}if(e._closeRequested){const t=new TypeError("Insufficient bytes to fill elements in the given buffer");return ke(e,t),void r._errorSteps(t)}}e._pendingPullIntos.push(a),Ue(n,r),Se(e)}else{const e=new i(a.buffer,a.byteOffset,0);r._closeSteps(e)}}(n._readableStreamController,t,r)}function Ge(e){return new TypeError(`ReadableStreamBYOBReader.prototype.${e} can only be used on a ReadableStreamBYOBReader`)}function Je(e,t){const{highWaterMark:r}=e;if(void 0===r)return t;if(se(r)||r<0)throw new RangeError("Invalid highWaterMark");return r}function Qe(e){const{size:t}=e;return t||(()=>1)}function Ze(e,t){B(e,t);const r=null==e?void 0:e.highWaterMark,n=null==e?void 0:e.size;return{highWaterMark:void 0===r?void 0:U(r),size:void 0===n?void 0:Xe(n,`${t} has member 'size' that`)}}function Xe(e,t){return H(e,t),t=>U(e(t))}function Ke(e,t,r){return H(e,r),r=>_(e,t,[r])}function et(e,t,r){return H(e,r),()=>_(e,t,[])}function tt(e,t,r){return H(e,r),r=>b(e,t,[r])}function rt(e,t,r){return H(e,r),(r,n)=>_(e,t,[r,n])}function nt(e,t){if(!ct(e))throw new TypeError(`${t} is not a WritableStream.`)}Object.defineProperties($e.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty($e.prototype,t.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});const ot="function"==typeof AbortController;class it{constructor(e={},t={}){void 0===e?e=null:q(e,"First parameter");const r=Ze(t,"Second parameter"),n=function(e,t){B(e,t);const r=null==e?void 0:e.abort,n=null==e?void 0:e.close,o=null==e?void 0:e.start,i=null==e?void 0:e.type,s=null==e?void 0:e.write;return{abort:void 0===r?void 0:Ke(r,e,`${t} has member 'abort' that`),close:void 0===n?void 0:et(n,e,`${t} has member 'close' that`),start:void 0===o?void 0:tt(o,e,`${t} has member 'start' that`),write:void 0===s?void 0:rt(s,e,`${t} has member 'write' that`),type:i}}(e,"First parameter");if(at(this),void 0!==n.type)throw new RangeError("Invalid type is specified");const o=Qe(r);!function(e,t,r,n){const o=Object.create(Dt.prototype);let i=()=>{},s=()=>p(void 0),a=()=>p(void 0),c=()=>p(void 0);void 0!==t.start&&(i=()=>t.start(o)),void 0!==t.write&&(s=e=>t.write(e,o)),void 0!==t.close&&(a=()=>t.close()),void 0!==t.abort&&(c=e=>t.abort(e)),Ot(e,o,i,s,a,c,r,n)}(this,n,Je(r,1),o)}get locked(){if(!ct(this))throw jt("locked");return lt(this)}abort(e){return ct(this)?lt(this)?u(new TypeError("Cannot abort a stream that already has a writer")):dt(this,e):u(jt("abort"))}close(){return ct(this)?lt(this)?u(new TypeError("Cannot close a stream that already has a writer")):ft(this)?u(new TypeError("Cannot close an already-closing stream")):pt(this):u(jt("close"))}getWriter(){if(!ct(this))throw jt("getWriter");return st(this)}}function st(e){return new St(e)}function at(e){e._state="writable",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new w,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function ct(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")&&e instanceof it}function lt(e){return void 0!==e._writer}function dt(e,t){var r;if("closed"===e._state||"errored"===e._state)return p(void 0);e._writableStreamController._abortReason=t,null===(r=e._writableStreamController._abortController)||void 0===r||r.abort();const n=e._state;if("closed"===n||"errored"===n)return p(void 0);if(void 0!==e._pendingAbortRequest)return e._pendingAbortRequest._promise;let o=!1;"erroring"===n&&(o=!0,t=void 0);const i=d(((r,n)=>{e._pendingAbortRequest={_promise:void 0,_resolve:r,_reject:n,_reason:t,_wasAlreadyErroring:o}}));return e._pendingAbortRequest._promise=i,o||mt(e,t),i}function pt(e){const t=e._state;if("closed"===t||"errored"===t)return u(new TypeError(`The stream (in ${t} state) is not in the writable state and cannot be closed`));const r=d(((t,r)=>{const n={_resolve:t,_reject:r};e._closeRequest=n})),n=e._writer;var o;return void 0!==n&&e._backpressure&&"writable"===t&&Yt(n),ue(o=e._writableStreamController,xt,0),It(o),r}function ut(e,t){"writable"!==e._state?ht(e):mt(e,t)}function mt(e,t){const r=e._writableStreamController;e._state="erroring",e._storedError=t;const n=e._writer;void 0!==n&&wt(n,t),!function(e){return void 0!==e._inFlightWriteRequest||void 0!==e._inFlightCloseRequest}(e)&&r._started&&ht(e)}function ht(e){e._state="errored",e._writableStreamController[E]();const t=e._storedError;if(e._writeRequests.forEach((e=>{e._reject(t)})),e._writeRequests=new w,void 0===e._pendingAbortRequest)return void yt(e);const r=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,r._wasAlreadyErroring)return r._reject(t),void yt(e);h(e._writableStreamController[I](r._reason),(()=>{r._resolve(),yt(e)}),(t=>{r._reject(t),yt(e)}))}function ft(e){return void 0!==e._closeRequest||void 0!==e._inFlightCloseRequest}function yt(e){void 0!==e._closeRequest&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);const t=e._writer;void 0!==t&&Nt(t,e._storedError)}function gt(e,t){const r=e._writer;void 0!==r&&t!==e._backpressure&&(t?function(e){Vt(e)}(r):Yt(r)),e._backpressure=t}Object.defineProperties(it.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(it.prototype,t.toStringTag,{value:"WritableStream",configurable:!0});class St{constructor(e){if(F(e,1,"WritableStreamDefaultWriter"),nt(e,"First parameter"),lt(e))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=e,e._writer=this;const t=e._state;if("writable"===t)!ft(e)&&e._backpressure?Vt(this):$t(this),qt(this);else if("erroring"===t)zt(this,e._storedError),qt(this);else if("closed"===t)$t(this),qt(r=this),Ut(r);else{const t=e._storedError;zt(this,t),Ft(this,t)}var r}get closed(){return vt(this)?this._closedPromise:u(Bt("closed"))}get desiredSize(){if(!vt(this))throw Bt("desiredSize");if(void 0===this._ownerWritableStream)throw Ht("desiredSize");return function(e){const t=e._ownerWritableStream,r=t._state;return"errored"===r||"erroring"===r?null:"closed"===r?0:Mt(t._writableStreamController)}(this)}get ready(){return vt(this)?this._readyPromise:u(Bt("ready"))}abort(e){return vt(this)?void 0===this._ownerWritableStream?u(Ht("abort")):function(e,t){return dt(e._ownerWritableStream,t)}(this,e):u(Bt("abort"))}close(){if(!vt(this))return u(Bt("close"));const e=this._ownerWritableStream;return void 0===e?u(Ht("close")):ft(e)?u(new TypeError("Cannot close an already-closing stream")):bt(this)}releaseLock(){if(!vt(this))throw Bt("releaseLock");void 0!==this._ownerWritableStream&&Pt(this)}write(e){return vt(this)?void 0===this._ownerWritableStream?u(Ht("write to")):Tt(this,e):u(Bt("write"))}}function vt(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")&&e instanceof St}function bt(e){return pt(e._ownerWritableStream)}function _t(e,t){"pending"===e._closedPromiseState?Nt(e,t):function(e,t){Ft(e,t)}(e,t)}function wt(e,t){"pending"===e._readyPromiseState?Wt(e,t):function(e,t){zt(e,t)}(e,t)}function Pt(e){const t=e._ownerWritableStream,r=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");wt(e,r),_t(e,r),t._writer=void 0,e._ownerWritableStream=void 0}function Tt(e,t){const r=e._ownerWritableStream,n=r._writableStreamController,o=function(e,t){try{return e._strategySizeAlgorithm(t)}catch(t){return Et(e,t),1}}(n,t);if(r!==e._ownerWritableStream)return u(Ht("write to"));const i=r._state;if("errored"===i)return u(r._storedError);if(ft(r)||"closed"===i)return u(new TypeError("The stream is closing or closed and cannot be written to"));if("erroring"===i)return u(r._storedError);const s=function(e){return d(((t,r)=>{const n={_resolve:t,_reject:r};e._writeRequests.push(n)}))}(r);return function(e,t,r){try{ue(e,t,r)}catch(t){return void Et(e,t)}const n=e._controlledWritableStream;ft(n)||"writable"!==n._state||gt(n,kt(e)),It(e)}(n,t,o),s}Object.defineProperties(St.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(St.prototype,t.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});const xt={};class Dt{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!Rt(this))throw Lt("abortReason");return this._abortReason}get signal(){if(!Rt(this))throw Lt("signal");if(void 0===this._abortController)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(e){if(!Rt(this))throw Lt("error");"writable"===this._controlledWritableStream._state&&At(this,e)}[I](e){const t=this._abortAlgorithm(e);return Ct(this),t}[E](){me(this)}}function Rt(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")&&e instanceof Dt}function Ot(e,t,r,n,o,i,s,a){t._controlledWritableStream=e,e._writableStreamController=t,t._queue=void 0,t._queueTotalSize=void 0,me(t),t._abortReason=void 0,t._abortController=function(){if(ot)return new AbortController}(),t._started=!1,t._strategySizeAlgorithm=a,t._strategyHWM=s,t._writeAlgorithm=n,t._closeAlgorithm=o,t._abortAlgorithm=i;const c=kt(t);gt(e,c),h(p(r()),(()=>{t._started=!0,It(t)}),(r=>{t._started=!0,ut(e,r)}))}function Ct(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function Mt(e){return e._strategyHWM-e._queueTotalSize}function It(e){const t=e._controlledWritableStream;if(!e._started)return;if(void 0!==t._inFlightWriteRequest)return;if("erroring"===t._state)return void ht(t);if(0===e._queue.length)return;const r=e._queue.peek().value;r===xt?function(e){const t=e._controlledWritableStream;(function(e){e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0})(t),pe(e);const r=e._closeAlgorithm();Ct(e),h(r,(()=>{!function(e){e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0,"erroring"===e._state&&(e._storedError=void 0,void 0!==e._pendingAbortRequest&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state="closed";const t=e._writer;void 0!==t&&Ut(t)}(t)}),(e=>{!function(e,t){e._inFlightCloseRequest._reject(t),e._inFlightCloseRequest=void 0,void 0!==e._pendingAbortRequest&&(e._pendingAbortRequest._reject(t),e._pendingAbortRequest=void 0),ut(e,t)}(t,e)}))}(e):function(e,t){const r=e._controlledWritableStream;!function(e){e._inFlightWriteRequest=e._writeRequests.shift()}(r),h(e._writeAlgorithm(t),(()=>{!function(e){e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}(r);const t=r._state;if(pe(e),!ft(r)&&"writable"===t){const t=kt(e);gt(r,t)}It(e)}),(t=>{"writable"===r._state&&Ct(e),function(e,t){e._inFlightWriteRequest._reject(t),e._inFlightWriteRequest=void 0,ut(e,t)}(r,t)}))}(e,r)}function Et(e,t){"writable"===e._controlledWritableStream._state&&At(e,t)}function kt(e){return Mt(e)<=0}function At(e,t){const r=e._controlledWritableStream;Ct(e),mt(r,t)}function jt(e){return new TypeError(`WritableStream.prototype.${e} can only be used on a WritableStream`)}function Lt(e){return new TypeError(`WritableStreamDefaultController.prototype.${e} can only be used on a WritableStreamDefaultController`)}function Bt(e){return new TypeError(`WritableStreamDefaultWriter.prototype.${e} can only be used on a WritableStreamDefaultWriter`)}function Ht(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function qt(e){e._closedPromise=d(((t,r)=>{e._closedPromise_resolve=t,e._closedPromise_reject=r,e._closedPromiseState="pending"}))}function Ft(e,t){qt(e),Nt(e,t)}function Nt(e,t){void 0!==e._closedPromise_reject&&(S(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected")}function Ut(e){void 0!==e._closedPromise_resolve&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved")}function Vt(e){e._readyPromise=d(((t,r)=>{e._readyPromise_resolve=t,e._readyPromise_reject=r})),e._readyPromiseState="pending"}function zt(e,t){Vt(e),Wt(e,t)}function $t(e){Vt(e),Yt(e)}function Wt(e,t){void 0!==e._readyPromise_reject&&(S(e._readyPromise),e._readyPromise_reject(t),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected")}function Yt(e){void 0!==e._readyPromise_resolve&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled")}Object.defineProperties(Dt.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(Dt.prototype,t.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});const Gt="undefined"!=typeof DOMException?DOMException:void 0,Jt=function(e){if("function"!=typeof e&&"object"!=typeof e)return!1;try{return new e,!0}catch(e){return!1}}(Gt)?Gt:function(){const e=function(e,t){this.message=e||"",this.name=t||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0}),e}();function Qt(e,t,n,o,i,s){const a=W(e),c=st(t);e._disturbed=!0;let l=!1,g=p(void 0);return d(((v,b)=>{let _;if(void 0!==s){if(_=()=>{const r=new Jt("Aborted","AbortError"),n=[];o||n.push((()=>"writable"===t._state?dt(t,r):p(void 0))),i||n.push((()=>"readable"===e._state?wr(e,r):p(void 0))),O((()=>Promise.all(n.map((e=>e())))),!0,r)},s.aborted)return void _();s.addEventListener("abort",_)}var w,P,T;if(R(e,a._closedPromise,(e=>{o?C(!0,e):O((()=>dt(t,e)),!0,e)})),R(t,c._closedPromise,(t=>{i?C(!0,t):O((()=>wr(e,t)),!0,t)})),w=e,P=a._closedPromise,T=()=>{n?C():O((()=>function(e){const t=e._ownerWritableStream,r=t._state;return ft(t)||"closed"===r?p(void 0):"errored"===r?u(t._storedError):bt(e)}(c)))},"closed"===w._state?T():f(P,T),ft(t)||"closed"===t._state){const t=new TypeError("the destination writable stream closed before all data could be piped to it");i?C(!0,t):O((()=>wr(e,t)),!0,t)}function D(){const e=g;return m(g,(()=>e!==g?D():void 0))}function R(e,t,r){"errored"===e._state?r(e._storedError):y(t,r)}function O(e,r,n){function o(){h(e(),(()=>M(r,n)),(e=>M(!0,e)))}l||(l=!0,"writable"!==t._state||ft(t)?o():f(D(),o))}function C(e,r){l||(l=!0,"writable"!==t._state||ft(t)?M(e,r):f(D(),(()=>M(e,r))))}function M(e,t){Pt(c),x(a),void 0!==s&&s.removeEventListener("abort",_),e?b(t):v(void 0)}S(d(((e,t)=>{!function n(o){o?e():m(l?p(!0):m(c._readyPromise,(()=>d(((e,t)=>{K(a,{_chunkSteps:t=>{g=m(Tt(c,t),void 0,r),e(!1)},_closeSteps:()=>e(!0),_errorSteps:t})})))),n,t)}(!1)})))}))}class Zt{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Xt(this))throw cr("desiredSize");return ir(this)}close(){if(!Xt(this))throw cr("close");if(!sr(this))throw new TypeError("The stream is not in a state that permits close");rr(this)}enqueue(e){if(!Xt(this))throw cr("enqueue");if(!sr(this))throw new TypeError("The stream is not in a state that permits enqueue");return nr(this,e)}error(e){if(!Xt(this))throw cr("error");or(this,e)}[k](e){me(this);const t=this._cancelAlgorithm(e);return tr(this),t}[A](e){const t=this._controlledReadableStream;if(this._queue.length>0){const r=pe(this);this._closeRequested&&0===this._queue.length?(tr(this),Pr(t)):Kt(this),e._chunkSteps(r)}else Y(t,e),Kt(this)}}function Xt(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")&&e instanceof Zt}function Kt(e){er(e)&&(e._pulling?e._pullAgain=!0:(e._pulling=!0,h(e._pullAlgorithm(),(()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,Kt(e))}),(t=>{or(e,t)}))))}function er(e){const t=e._controlledReadableStream;return!!sr(e)&&(!!e._started&&(!!(_r(t)&&J(t)>0)||ir(e)>0))}function tr(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function rr(e){if(!sr(e))return;const t=e._controlledReadableStream;e._closeRequested=!0,0===e._queue.length&&(tr(e),Pr(t))}function nr(e,t){if(!sr(e))return;const r=e._controlledReadableStream;if(_r(r)&&J(r)>0)G(r,t,!1);else{let r;try{r=e._strategySizeAlgorithm(t)}catch(t){throw or(e,t),t}try{ue(e,t,r)}catch(t){throw or(e,t),t}}Kt(e)}function or(e,t){const r=e._controlledReadableStream;"readable"===r._state&&(me(e),tr(e),Tr(r,t))}function ir(e){const t=e._controlledReadableStream._state;return"errored"===t?null:"closed"===t?0:e._strategyHWM-e._queueTotalSize}function sr(e){const t=e._controlledReadableStream._state;return!e._closeRequested&&"readable"===t}function ar(e,t,r,n,o,i,s){t._controlledReadableStream=e,t._queue=void 0,t._queueTotalSize=void 0,me(t),t._started=!1,t._closeRequested=!1,t._pullAgain=!1,t._pulling=!1,t._strategySizeAlgorithm=s,t._strategyHWM=i,t._pullAlgorithm=n,t._cancelAlgorithm=o,e._readableStreamController=t,h(p(r()),(()=>{t._started=!0,Kt(t)}),(e=>{or(t,e)}))}function cr(e){return new TypeError(`ReadableStreamDefaultController.prototype.${e} can only be used on a ReadableStreamDefaultController`)}function lr(e,t){return ye(e._readableStreamController)?function(e){let t,r,n,o,i,s=W(e),a=!1,c=!1,l=!1,u=!1,m=!1;const h=d((e=>{i=e}));function f(e){y(e._closedPromise,(t=>{e===s&&(ke(n._readableStreamController,t),ke(o._readableStreamController,t),u&&m||i(void 0))}))}function g(){We(s)&&(x(s),s=W(e),f(s)),K(s,{_chunkSteps:t=>{v((()=>{c=!1,l=!1;const r=t;let s=t;if(!u&&!m)try{s=de(t)}catch(t){return ke(n._readableStreamController,t),ke(o._readableStreamController,t),void i(wr(e,t))}u||Ee(n._readableStreamController,r),m||Ee(o._readableStreamController,s),a=!1,c?b():l&&_()}))},_closeSteps:()=>{a=!1,u||Ie(n._readableStreamController),m||Ie(o._readableStreamController),n._readableStreamController._pendingPullIntos.length>0&&Le(n._readableStreamController,0),o._readableStreamController._pendingPullIntos.length>0&&Le(o._readableStreamController,0),u&&m||i(void 0)},_errorSteps:()=>{a=!1}})}function S(t,r){X(s)&&(x(s),s=Ne(e),f(s));const d=r?o:n,p=r?n:o;Ye(s,t,{_chunkSteps:t=>{v((()=>{c=!1,l=!1;const n=r?m:u;if(r?u:m)n||Be(d._readableStreamController,t);else{let r;try{r=de(t)}catch(t){return ke(d._readableStreamController,t),ke(p._readableStreamController,t),void i(wr(e,t))}n||Be(d._readableStreamController,t),Ee(p._readableStreamController,r)}a=!1,c?b():l&&_()}))},_closeSteps:e=>{a=!1;const t=r?m:u,n=r?u:m;t||Ie(d._readableStreamController),n||Ie(p._readableStreamController),void 0!==e&&(t||Be(d._readableStreamController,e),!n&&p._readableStreamController._pendingPullIntos.length>0&&Le(p._readableStreamController,0)),t&&n||i(void 0)},_errorSteps:()=>{a=!1}})}function b(){if(a)return c=!0,p(void 0);a=!0;const e=Ae(n._readableStreamController);return null===e?g():S(e._view,!1),p(void 0)}function _(){if(a)return l=!0,p(void 0);a=!0;const e=Ae(o._readableStreamController);return null===e?g():S(e._view,!0),p(void 0)}function w(n){if(u=!0,t=n,m){const n=ae([t,r]),o=wr(e,n);i(o)}return h}function P(n){if(m=!0,r=n,u){const n=ae([t,r]),o=wr(e,n);i(o)}return h}function T(){}return n=Sr(T,b,w),o=Sr(T,_,P),f(s),[n,o]}(e):function(e,t){const r=W(e);let n,o,i,s,a,c=!1,l=!1,u=!1,m=!1;const h=d((e=>{a=e}));function f(){return c?(l=!0,p(void 0)):(c=!0,K(r,{_chunkSteps:e=>{v((()=>{l=!1;const t=e,r=e;u||nr(i._readableStreamController,t),m||nr(s._readableStreamController,r),c=!1,l&&f()}))},_closeSteps:()=>{c=!1,u||rr(i._readableStreamController),m||rr(s._readableStreamController),u&&m||a(void 0)},_errorSteps:()=>{c=!1}}),p(void 0))}function g(t){if(u=!0,n=t,m){const t=ae([n,o]),r=wr(e,t);a(r)}return h}function S(t){if(m=!0,o=t,u){const t=ae([n,o]),r=wr(e,t);a(r)}return h}function b(){}return i=gr(b,f,g),s=gr(b,f,S),y(r._closedPromise,(e=>{or(i._readableStreamController,e),or(s._readableStreamController,e),u&&m||a(void 0)})),[i,s]}(e)}function dr(e,t,r){return H(e,r),r=>_(e,t,[r])}function pr(e,t,r){return H(e,r),r=>_(e,t,[r])}function ur(e,t,r){return H(e,r),r=>b(e,t,[r])}function mr(e,t){if("bytes"!=(e=`${e}`))throw new TypeError(`${t} '${e}' is not a valid enumeration value for ReadableStreamType`);return e}function hr(e,t){if("byob"!=(e=`${e}`))throw new TypeError(`${t} '${e}' is not a valid enumeration value for ReadableStreamReaderMode`);return e}function fr(e,t){B(e,t);const r=null==e?void 0:e.preventAbort,n=null==e?void 0:e.preventCancel,o=null==e?void 0:e.preventClose,i=null==e?void 0:e.signal;return void 0!==i&&function(e,t){if(!function(e){if("object"!=typeof e||null===e)return!1;try{return"boolean"==typeof e.aborted}catch(e){return!1}}(e))throw new TypeError(`${t} is not an AbortSignal.`)}(i,`${t} has member 'signal' that`),{preventAbort:Boolean(r),preventCancel:Boolean(n),preventClose:Boolean(o),signal:i}}Object.defineProperties(Zt.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(Zt.prototype,t.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});class yr{constructor(e={},t={}){void 0===e?e=null:q(e,"First parameter");const r=Ze(t,"Second parameter"),n=function(e,t){B(e,t);const r=e,n=null==r?void 0:r.autoAllocateChunkSize,o=null==r?void 0:r.cancel,i=null==r?void 0:r.pull,s=null==r?void 0:r.start,a=null==r?void 0:r.type;return{autoAllocateChunkSize:void 0===n?void 0:z(n,`${t} has member 'autoAllocateChunkSize' that`),cancel:void 0===o?void 0:dr(o,r,`${t} has member 'cancel' that`),pull:void 0===i?void 0:pr(i,r,`${t} has member 'pull' that`),start:void 0===s?void 0:ur(s,r,`${t} has member 'start' that`),type:void 0===a?void 0:mr(a,`${t} has member 'type' that`)}}(e,"First parameter");if(vr(this),"bytes"===n.type){if(void 0!==r.size)throw new RangeError("The strategy for a byte stream cannot have a size function");!function(e,t,r){const n=Object.create(fe.prototype);let o=()=>{},i=()=>p(void 0),s=()=>p(void 0);void 0!==t.start&&(o=()=>t.start(n)),void 0!==t.pull&&(i=()=>t.pull(n)),void 0!==t.cancel&&(s=e=>t.cancel(e));const a=t.autoAllocateChunkSize;if(0===a)throw new TypeError("autoAllocateChunkSize must be greater than 0");He(e,n,o,i,s,r,a)}(this,n,Je(r,0))}else{const e=Qe(r);!function(e,t,r,n){const o=Object.create(Zt.prototype);let i=()=>{},s=()=>p(void 0),a=()=>p(void 0);void 0!==t.start&&(i=()=>t.start(o)),void 0!==t.pull&&(s=()=>t.pull(o)),void 0!==t.cancel&&(a=e=>t.cancel(e)),ar(e,o,i,s,a,r,n)}(this,n,Je(r,1),e)}}get locked(){if(!br(this))throw xr("locked");return _r(this)}cancel(e){return br(this)?_r(this)?u(new TypeError("Cannot cancel a stream that already has a reader")):wr(this,e):u(xr("cancel"))}getReader(e){if(!br(this))throw xr("getReader");return void 0===function(e,t){B(e,t);const r=null==e?void 0:e.mode;return{mode:void 0===r?void 0:hr(r,`${t} has member 'mode' that`)}}(e,"First parameter").mode?W(this):Ne(this)}pipeThrough(e,t={}){if(!br(this))throw xr("pipeThrough");F(e,1,"pipeThrough");const r=function(e,t){B(e,t);const r=null==e?void 0:e.readable;N(r,"readable","ReadableWritablePair"),$(r,`${t} has member 'readable' that`);const n=null==e?void 0:e.writable;return N(n,"writable","ReadableWritablePair"),nt(n,`${t} has member 'writable' that`),{readable:r,writable:n}}(e,"First parameter"),n=fr(t,"Second parameter");if(_r(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(lt(r.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");return S(Qt(this,r.writable,n.preventClose,n.preventAbort,n.preventCancel,n.signal)),r.readable}pipeTo(e,t={}){if(!br(this))return u(xr("pipeTo"));if(void 0===e)return u("Parameter 1 is required in 'pipeTo'.");if(!ct(e))return u(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let r;try{r=fr(t,"Second parameter")}catch(e){return u(e)}return _r(this)?u(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):lt(e)?u(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):Qt(this,e,r.preventClose,r.preventAbort,r.preventCancel,r.signal)}tee(){if(!br(this))throw xr("tee");return ae(lr(this))}values(e){if(!br(this))throw xr("values");return function(e,t){const r=W(e),n=new re(r,t),o=Object.create(ne);return o._asyncIteratorImpl=n,o}(this,function(e,t){B(e,t);const r=null==e?void 0:e.preventCancel;return{preventCancel:Boolean(r)}}(e,"First parameter").preventCancel)}}function gr(e,t,r,n=1,o=(()=>1)){const i=Object.create(yr.prototype);return vr(i),ar(i,Object.create(Zt.prototype),e,t,r,n,o),i}function Sr(e,t,r){const n=Object.create(yr.prototype);return vr(n),He(n,Object.create(fe.prototype),e,t,r,0,void 0),n}function vr(e){e._state="readable",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function br(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")&&e instanceof yr}function _r(e){return void 0!==e._reader}function wr(e,t){if(e._disturbed=!0,"closed"===e._state)return p(void 0);if("errored"===e._state)return u(e._storedError);Pr(e);const n=e._reader;return void 0!==n&&We(n)&&(n._readIntoRequests.forEach((e=>{e._closeSteps(void 0)})),n._readIntoRequests=new w),g(e._readableStreamController[k](t),r)}function Pr(e){e._state="closed";const t=e._reader;void 0!==t&&(M(t),X(t)&&(t._readRequests.forEach((e=>{e._closeSteps()})),t._readRequests=new w))}function Tr(e,t){e._state="errored",e._storedError=t;const r=e._reader;void 0!==r&&(C(r,t),X(r)?(r._readRequests.forEach((e=>{e._errorSteps(t)})),r._readRequests=new w):(r._readIntoRequests.forEach((e=>{e._errorSteps(t)})),r._readIntoRequests=new w))}function xr(e){return new TypeError(`ReadableStream.prototype.${e} can only be used on a ReadableStream`)}function Dr(e,t){B(e,t);const r=null==e?void 0:e.highWaterMark;return N(r,"highWaterMark","QueuingStrategyInit"),{highWaterMark:U(r)}}Object.defineProperties(yr.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(yr.prototype,t.toStringTag,{value:"ReadableStream",configurable:!0}),"symbol"==typeof t.asyncIterator&&Object.defineProperty(yr.prototype,t.asyncIterator,{value:yr.prototype.values,writable:!0,configurable:!0});const Rr=e=>e.byteLength;Object.defineProperty(Rr,"name",{value:"size",configurable:!0});class Or{constructor(e){F(e,1,"ByteLengthQueuingStrategy"),e=Dr(e,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=e.highWaterMark}get highWaterMark(){if(!Mr(this))throw Cr("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!Mr(this))throw Cr("size");return Rr}}function Cr(e){return new TypeError(`ByteLengthQueuingStrategy.prototype.${e} can only be used on a ByteLengthQueuingStrategy`)}function Mr(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")&&e instanceof Or}Object.defineProperties(Or.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(Or.prototype,t.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});const Ir=()=>1;Object.defineProperty(Ir,"name",{value:"size",configurable:!0});class Er{constructor(e){F(e,1,"CountQueuingStrategy"),e=Dr(e,"First parameter"),this._countQueuingStrategyHighWaterMark=e.highWaterMark}get highWaterMark(){if(!Ar(this))throw kr("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!Ar(this))throw kr("size");return Ir}}function kr(e){return new TypeError(`CountQueuingStrategy.prototype.${e} can only be used on a CountQueuingStrategy`)}function Ar(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")&&e instanceof Er}function jr(e,t,r){return H(e,r),r=>_(e,t,[r])}function Lr(e,t,r){return H(e,r),r=>b(e,t,[r])}function Br(e,t,r){return H(e,r),(r,n)=>_(e,t,[r,n])}Object.defineProperties(Er.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(Er.prototype,t.toStringTag,{value:"CountQueuingStrategy",configurable:!0});class Hr{constructor(e={},t={},r={}){void 0===e&&(e=null);const n=Ze(t,"Second parameter"),o=Ze(r,"Third parameter"),i=function(e,t){B(e,t);const r=null==e?void 0:e.flush,n=null==e?void 0:e.readableType,o=null==e?void 0:e.start,i=null==e?void 0:e.transform,s=null==e?void 0:e.writableType;return{flush:void 0===r?void 0:jr(r,e,`${t} has member 'flush' that`),readableType:n,start:void 0===o?void 0:Lr(o,e,`${t} has member 'start' that`),transform:void 0===i?void 0:Br(i,e,`${t} has member 'transform' that`),writableType:s}}(e,"First parameter");if(void 0!==i.readableType)throw new RangeError("Invalid readableType specified");if(void 0!==i.writableType)throw new RangeError("Invalid writableType specified");const s=Je(o,0),a=Qe(o),c=Je(n,1),l=Qe(n);let m;!function(e,t,r,n,o,i){function s(){return t}function a(t){return function(e,t){const r=e._transformStreamController;return e._backpressure?g(e._backpressureChangePromise,(()=>{const n=e._writable;if("erroring"===n._state)throw n._storedError;return Yr(r,t)})):Yr(r,t)}(e,t)}function c(t){return function(e,t){return Fr(e,t),p(void 0)}(e,t)}function l(){return function(e){const t=e._readable,r=e._transformStreamController,n=r._flushAlgorithm();return $r(r),g(n,(()=>{if("errored"===t._state)throw t._storedError;rr(t._readableStreamController)}),(r=>{throw Fr(e,r),t._storedError}))}(e)}function d(){return function(e){return Ur(e,!1),e._backpressureChangePromise}(e)}function u(t){return Nr(e,t),p(void 0)}e._writable=function(e,t,r,n,o=1,i=(()=>1)){const s=Object.create(it.prototype);return at(s),Ot(s,Object.create(Dt.prototype),e,t,r,n,o,i),s}(s,a,l,c,r,n),e._readable=gr(s,d,u,o,i),e._backpressure=void 0,e._backpressureChangePromise=void 0,e._backpressureChangePromise_resolve=void 0,Ur(e,!0),e._transformStreamController=void 0}(this,d((e=>{m=e})),c,l,s,a),function(e,t){const r=Object.create(Vr.prototype);let n=e=>{try{return Wr(r,e),p(void 0)}catch(e){return u(e)}},o=()=>p(void 0);void 0!==t.transform&&(n=e=>t.transform(e,r)),void 0!==t.flush&&(o=()=>t.flush(r)),function(e,t,r,n){t._controlledTransformStream=e,e._transformStreamController=t,t._transformAlgorithm=r,t._flushAlgorithm=n}(e,r,n,o)}(this,i),void 0!==i.start?m(i.start(this._transformStreamController)):m(void 0)}get readable(){if(!qr(this))throw Jr("readable");return this._readable}get writable(){if(!qr(this))throw Jr("writable");return this._writable}}function qr(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")&&e instanceof Hr}function Fr(e,t){or(e._readable._readableStreamController,t),Nr(e,t)}function Nr(e,t){$r(e._transformStreamController),Et(e._writable._writableStreamController,t),e._backpressure&&Ur(e,!1)}function Ur(e,t){void 0!==e._backpressureChangePromise&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=d((t=>{e._backpressureChangePromise_resolve=t})),e._backpressure=t}Object.defineProperties(Hr.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(Hr.prototype,t.toStringTag,{value:"TransformStream",configurable:!0});class Vr{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!zr(this))throw Gr("desiredSize");return ir(this._controlledTransformStream._readable._readableStreamController)}enqueue(e){if(!zr(this))throw Gr("enqueue");Wr(this,e)}error(e){if(!zr(this))throw Gr("error");var t;t=e,Fr(this._controlledTransformStream,t)}terminate(){if(!zr(this))throw Gr("terminate");!function(e){const t=e._controlledTransformStream;rr(t._readable._readableStreamController);const r=new TypeError("TransformStream terminated");Nr(t,r)}(this)}}function zr(e){return!!o(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")&&e instanceof Vr}function $r(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0}function Wr(e,t){const r=e._controlledTransformStream,n=r._readable._readableStreamController;if(!sr(n))throw new TypeError("Readable side is not in a state that permits enqueue");try{nr(n,t)}catch(e){throw Nr(r,e),r._readable._storedError}const o=function(e){return!er(e)}(n);o!==r._backpressure&&Ur(r,!0)}function Yr(e,t){return g(e._transformAlgorithm(t),void 0,(t=>{throw Fr(e._controlledTransformStream,t),t}))}function Gr(e){return new TypeError(`TransformStreamDefaultController.prototype.${e} can only be used on a TransformStreamDefaultController`)}function Jr(e){return new TypeError(`TransformStream.prototype.${e} can only be used on a TransformStream`)}Object.defineProperties(Vr.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(Vr.prototype,t.toStringTag,{value:"TransformStreamDefaultController",configurable:!0}),e.ByteLengthQueuingStrategy=Or,e.CountQueuingStrategy=Er,e.ReadableByteStreamController=fe,e.ReadableStream=yr,e.ReadableStreamBYOBReader=$e,e.ReadableStreamBYOBRequest=he,e.ReadableStreamDefaultController=Zt,e.ReadableStreamDefaultReader=Z,e.TransformStream=Hr,e.TransformStreamDefaultController=Vr,e.WritableStream=it,e.WritableStreamDefaultController=Dt,e.WritableStreamDefaultWriter=St,Object.defineProperty(e,"__esModule",{value:!0})},r(t)},8507:(e,t,r)=>{"use strict";function n(e){var t=[];return o(e,t),t}function o(e,t){for(var r=0;r<e.length;r++){var n=e[r];Array.isArray(n)?o(n,t):t.push(n)}}r.d(t,{x:()=>n})},8873:(e,t,r)=>{"use strict";var n=r(3685);e.exports=n.METHODS&&n.METHODS.map((function(e){return e.toLowerCase()}))||["get","post","put","head","delete","options","trace","copy","lock","mkcol","move","purge","propfind","proppatch","unlock","report","mkactivity","checkout","merge","m-search","notify","subscribe","unsubscribe","patch","search","connect"]},9146:e=>{"use strict";function t(){this._types=Object.create(null),this._extensions=Object.create(null);for(let e=0;e<arguments.length;e++)this.define(arguments[e]);this.define=this.define.bind(this),this.getType=this.getType.bind(this),this.getExtension=this.getExtension.bind(this)}t.prototype.define=function(e,t){for(let r in e){let n=e[r].map((function(e){return e.toLowerCase()}));r=r.toLowerCase();for(let e=0;e<n.length;e++){const o=n[e];if("*"!==o[0]){if(!t&&o in this._types)throw new Error('Attempt to change mapping for "'+o+'" extension from "'+this._types[o]+'" to "'+r+'". Pass `force=true` to allow this, otherwise remove "'+o+'" from the list of extensions for "'+r+'".');this._types[o]=r}}if(t||!this._extensions[r]){const e=n[0];this._extensions[r]="*"!==e[0]?e:e.substr(1)}}},t.prototype.getType=function(e){let t=(e=String(e)).replace(/^.*[/\\]/,"").toLowerCase(),r=t.replace(/^.*\./,"").toLowerCase(),n=t.length<e.length;return(r.length<t.length-1||!n)&&this._types[r]||null},t.prototype.getExtension=function(e){return(e=/^\s*([^;\s]*)/.test(e)&&RegExp.$1)&&this._extensions[e.toLowerCase()]||null},e.exports=t},2109:(e,t,r)=>{"use strict";let n=r(9146);e.exports=new n(r(4415))},4415:e=>{e.exports={"application/andrew-inset":["ez"],"application/applixware":["aw"],"application/atom+xml":["atom"],"application/atomcat+xml":["atomcat"],"application/atomdeleted+xml":["atomdeleted"],"application/atomsvc+xml":["atomsvc"],"application/atsc-dwd+xml":["dwd"],"application/atsc-held+xml":["held"],"application/atsc-rsat+xml":["rsat"],"application/bdoc":["bdoc"],"application/calendar+xml":["xcs"],"application/ccxml+xml":["ccxml"],"application/cdfx+xml":["cdfx"],"application/cdmi-capability":["cdmia"],"application/cdmi-container":["cdmic"],"application/cdmi-domain":["cdmid"],"application/cdmi-object":["cdmio"],"application/cdmi-queue":["cdmiq"],"application/cu-seeme":["cu"],"application/dash+xml":["mpd"],"application/davmount+xml":["davmount"],"application/docbook+xml":["dbk"],"application/dssc+der":["dssc"],"application/dssc+xml":["xdssc"],"application/ecmascript":["es","ecma"],"application/emma+xml":["emma"],"application/emotionml+xml":["emotionml"],"application/epub+zip":["epub"],"application/exi":["exi"],"application/express":["exp"],"application/fdt+xml":["fdt"],"application/font-tdpfr":["pfr"],"application/geo+json":["geojson"],"application/gml+xml":["gml"],"application/gpx+xml":["gpx"],"application/gxf":["gxf"],"application/gzip":["gz"],"application/hjson":["hjson"],"application/hyperstudio":["stk"],"application/inkml+xml":["ink","inkml"],"application/ipfix":["ipfix"],"application/its+xml":["its"],"application/java-archive":["jar","war","ear"],"application/java-serialized-object":["ser"],"application/java-vm":["class"],"application/javascript":["js","mjs"],"application/json":["json","map"],"application/json5":["json5"],"application/jsonml+json":["jsonml"],"application/ld+json":["jsonld"],"application/lgr+xml":["lgr"],"application/lost+xml":["lostxml"],"application/mac-binhex40":["hqx"],"application/mac-compactpro":["cpt"],"application/mads+xml":["mads"],"application/manifest+json":["webmanifest"],"application/marc":["mrc"],"application/marcxml+xml":["mrcx"],"application/mathematica":["ma","nb","mb"],"application/mathml+xml":["mathml"],"application/mbox":["mbox"],"application/mediaservercontrol+xml":["mscml"],"application/metalink+xml":["metalink"],"application/metalink4+xml":["meta4"],"application/mets+xml":["mets"],"application/mmt-aei+xml":["maei"],"application/mmt-usd+xml":["musd"],"application/mods+xml":["mods"],"application/mp21":["m21","mp21"],"application/mp4":["mp4s","m4p"],"application/msword":["doc","dot"],"application/mxf":["mxf"],"application/n-quads":["nq"],"application/n-triples":["nt"],"application/node":["cjs"],"application/octet-stream":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"],"application/oda":["oda"],"application/oebps-package+xml":["opf"],"application/ogg":["ogx"],"application/omdoc+xml":["omdoc"],"application/onenote":["onetoc","onetoc2","onetmp","onepkg"],"application/oxps":["oxps"],"application/p2p-overlay+xml":["relo"],"application/patch-ops-error+xml":["xer"],"application/pdf":["pdf"],"application/pgp-encrypted":["pgp"],"application/pgp-signature":["asc","sig"],"application/pics-rules":["prf"],"application/pkcs10":["p10"],"application/pkcs7-mime":["p7m","p7c"],"application/pkcs7-signature":["p7s"],"application/pkcs8":["p8"],"application/pkix-attr-cert":["ac"],"application/pkix-cert":["cer"],"application/pkix-crl":["crl"],"application/pkix-pkipath":["pkipath"],"application/pkixcmp":["pki"],"application/pls+xml":["pls"],"application/postscript":["ai","eps","ps"],"application/provenance+xml":["provx"],"application/pskc+xml":["pskcxml"],"application/raml+yaml":["raml"],"application/rdf+xml":["rdf","owl"],"application/reginfo+xml":["rif"],"application/relax-ng-compact-syntax":["rnc"],"application/resource-lists+xml":["rl"],"application/resource-lists-diff+xml":["rld"],"application/rls-services+xml":["rs"],"application/route-apd+xml":["rapd"],"application/route-s-tsid+xml":["sls"],"application/route-usd+xml":["rusd"],"application/rpki-ghostbusters":["gbr"],"application/rpki-manifest":["mft"],"application/rpki-roa":["roa"],"application/rsd+xml":["rsd"],"application/rss+xml":["rss"],"application/rtf":["rtf"],"application/sbml+xml":["sbml"],"application/scvp-cv-request":["scq"],"application/scvp-cv-response":["scs"],"application/scvp-vp-request":["spq"],"application/scvp-vp-response":["spp"],"application/sdp":["sdp"],"application/senml+xml":["senmlx"],"application/sensml+xml":["sensmlx"],"application/set-payment-initiation":["setpay"],"application/set-registration-initiation":["setreg"],"application/shf+xml":["shf"],"application/sieve":["siv","sieve"],"application/smil+xml":["smi","smil"],"application/sparql-query":["rq"],"application/sparql-results+xml":["srx"],"application/srgs":["gram"],"application/srgs+xml":["grxml"],"application/sru+xml":["sru"],"application/ssdl+xml":["ssdl"],"application/ssml+xml":["ssml"],"application/swid+xml":["swidtag"],"application/tei+xml":["tei","teicorpus"],"application/thraud+xml":["tfi"],"application/timestamped-data":["tsd"],"application/toml":["toml"],"application/trig":["trig"],"application/ttml+xml":["ttml"],"application/ubjson":["ubj"],"application/urc-ressheet+xml":["rsheet"],"application/urc-targetdesc+xml":["td"],"application/voicexml+xml":["vxml"],"application/wasm":["wasm"],"application/widget":["wgt"],"application/winhlp":["hlp"],"application/wsdl+xml":["wsdl"],"application/wspolicy+xml":["wspolicy"],"application/xaml+xml":["xaml"],"application/xcap-att+xml":["xav"],"application/xcap-caps+xml":["xca"],"application/xcap-diff+xml":["xdf"],"application/xcap-el+xml":["xel"],"application/xcap-ns+xml":["xns"],"application/xenc+xml":["xenc"],"application/xhtml+xml":["xhtml","xht"],"application/xliff+xml":["xlf"],"application/xml":["xml","xsl","xsd","rng"],"application/xml-dtd":["dtd"],"application/xop+xml":["xop"],"application/xproc+xml":["xpl"],"application/xslt+xml":["*xsl","xslt"],"application/xspf+xml":["xspf"],"application/xv+xml":["mxml","xhvml","xvml","xvm"],"application/yang":["yang"],"application/yin+xml":["yin"],"application/zip":["zip"],"audio/3gpp":["*3gpp"],"audio/adpcm":["adp"],"audio/amr":["amr"],"audio/basic":["au","snd"],"audio/midi":["mid","midi","kar","rmi"],"audio/mobile-xmf":["mxmf"],"audio/mp3":["*mp3"],"audio/mp4":["m4a","mp4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx","opus"],"audio/s3m":["s3m"],"audio/silk":["sil"],"audio/wav":["wav"],"audio/wave":["*wav"],"audio/webm":["weba"],"audio/xm":["xm"],"font/collection":["ttc"],"font/otf":["otf"],"font/ttf":["ttf"],"font/woff":["woff"],"font/woff2":["woff2"],"image/aces":["exr"],"image/apng":["apng"],"image/avif":["avif"],"image/bmp":["bmp"],"image/cgm":["cgm"],"image/dicom-rle":["drle"],"image/emf":["emf"],"image/fits":["fits"],"image/g3fax":["g3"],"image/gif":["gif"],"image/heic":["heic"],"image/heic-sequence":["heics"],"image/heif":["heif"],"image/heif-sequence":["heifs"],"image/hej2k":["hej2"],"image/hsj2":["hsj2"],"image/ief":["ief"],"image/jls":["jls"],"image/jp2":["jp2","jpg2"],"image/jpeg":["jpeg","jpg","jpe"],"image/jph":["jph"],"image/jphc":["jhc"],"image/jpm":["jpm"],"image/jpx":["jpx","jpf"],"image/jxr":["jxr"],"image/jxra":["jxra"],"image/jxrs":["jxrs"],"image/jxs":["jxs"],"image/jxsc":["jxsc"],"image/jxsi":["jxsi"],"image/jxss":["jxss"],"image/ktx":["ktx"],"image/ktx2":["ktx2"],"image/png":["png"],"image/sgi":["sgi"],"image/svg+xml":["svg","svgz"],"image/t38":["t38"],"image/tiff":["tif","tiff"],"image/tiff-fx":["tfx"],"image/webp":["webp"],"image/wmf":["wmf"],"message/disposition-notification":["disposition-notification"],"message/global":["u8msg"],"message/global-delivery-status":["u8dsn"],"message/global-disposition-notification":["u8mdn"],"message/global-headers":["u8hdr"],"message/rfc822":["eml","mime"],"model/3mf":["3mf"],"model/gltf+json":["gltf"],"model/gltf-binary":["glb"],"model/iges":["igs","iges"],"model/mesh":["msh","mesh","silo"],"model/mtl":["mtl"],"model/obj":["obj"],"model/step+xml":["stpx"],"model/step+zip":["stpz"],"model/step-xml+zip":["stpxz"],"model/stl":["stl"],"model/vrml":["wrl","vrml"],"model/x3d+binary":["*x3db","x3dbz"],"model/x3d+fastinfoset":["x3db"],"model/x3d+vrml":["*x3dv","x3dvz"],"model/x3d+xml":["x3d","x3dz"],"model/x3d-vrml":["x3dv"],"text/cache-manifest":["appcache","manifest"],"text/calendar":["ics","ifb"],"text/coffeescript":["coffee","litcoffee"],"text/css":["css"],"text/csv":["csv"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/jsx":["jsx"],"text/less":["less"],"text/markdown":["markdown","md"],"text/mathml":["mml"],"text/mdx":["mdx"],"text/n3":["n3"],"text/plain":["txt","text","conf","def","list","log","in","ini"],"text/richtext":["rtx"],"text/rtf":["*rtf"],"text/sgml":["sgml","sgm"],"text/shex":["shex"],"text/slim":["slim","slm"],"text/spdx":["spdx"],"text/stylus":["stylus","styl"],"text/tab-separated-values":["tsv"],"text/troff":["t","tr","roff","man","me","ms"],"text/turtle":["ttl"],"text/uri-list":["uri","uris","urls"],"text/vcard":["vcard"],"text/vtt":["vtt"],"text/xml":["*xml"],"text/yaml":["yaml","yml"],"video/3gpp":["3gp","3gpp"],"video/3gpp2":["3g2"],"video/h261":["h261"],"video/h263":["h263"],"video/h264":["h264"],"video/iso.segment":["m4s"],"video/jpeg":["jpgv"],"video/jpm":["*jpm","jpgm"],"video/mj2":["mj2","mjp2"],"video/mp2t":["ts"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/webm":["webm"]}},8317:(e,t,r)=>{"use strict";var n=r(7310),o=n.parse,i=n.Url;function s(e){var t=e.url;if(void 0!==t){var r=e._parsedUrl;return c(t,r)?r:((r=a(t))._raw=t,e._parsedUrl=r)}}function a(e){if("string"!=typeof e||47!==e.charCodeAt(0))return o(e);for(var t=e,r=null,n=null,s=1;s<e.length;s++)switch(e.charCodeAt(s)){case 63:null===n&&(t=e.substring(0,s),r=e.substring(s+1),n=e.substring(s));break;case 9:case 10:case 12:case 13:case 32:case 35:case 160:case 65279:return o(e)}var a=void 0!==i?new i:{};return a.path=e,a.href=e,a.pathname=t,null!==n&&(a.query=r,a.search=n),a}function c(e,t){return"object"==typeof t&&null!==t&&(void 0===i||t instanceof i)&&t._raw===e}e.exports=s,e.exports.original=function(e){var t=e.originalUrl;if("string"!=typeof t)return s(e);var r=e._parsedOriginalUrl;if(c(t,r))return r;return(r=a(t))._raw=t,e._parsedOriginalUrl=r}},4779:e=>{e.exports=function e(r,n,o){n=n||[];var i,s=(o=o||{}).strict,a=!1!==o.end,c=o.sensitive?"":"i",l=0,d=n.length,p=0,u=0;if(r instanceof RegExp){for(;i=t.exec(r.source);)n.push({name:u++,optional:!1,offset:i.index});return r}if(Array.isArray(r))return r=r.map((function(t){return e(t,n,o).source})),new RegExp("(?:"+r.join("|")+")",c);r=("^"+r+(s?"":"/"===r[r.length-1]?"?":"/?")).replace(/\/\(/g,"/(?:").replace(/([\/\.])/g,"\\$1").replace(/(\\\/)?(\\\.)?:(\w+)(\(.*?\))?(\*)?(\?)?/g,(function(e,t,r,o,i,s,a,c){t=t||"",r=r||"",i=i||"([^\\/"+r+"]+?)",a=a||"",n.push({name:o,optional:!!a,offset:c+l});var d=(a?"":t)+"(?:"+r+(a?t:"")+i+(s?"((?:[\\/"+r+"].+?)?)":"")+")"+a;return l+=d.length-e.length,d})).replace(/\*/g,(function(e,t){for(var r=n.length;r-- >d&&n[r].offset>t;)n[r].offset+=3;return"(.*)"}));for(;i=t.exec(r);){for(var m=0,h=i.index;"\\"===r.charAt(--h);)m++;m%2!=1&&((d+p===n.length||n[d+p].offset>i.index)&&n.splice(d+p,0,{name:u++,optional:!1,offset:i.index}),p++)}return r+=a?"$":"/"===r[r.length-1]?"":"(?=\\/|$)",new RegExp(r,c)};var t=/\((?!\?)/g},1265:(e,t,r)=>{"use strict";var n=r(1542)("router"),o=r(8507).x,i=r(5484),s=r(8873),a=r(1322),c=r(8317),l=r(9693),d=r(6644),p=Array.prototype.slice,u="function"==typeof setImmediate?setImmediate:function(e){process.nextTick(e.bind.apply(e,arguments))};function m(e){if(!(this instanceof m))return new m(e);var t=e||{};function r(e,t,n){r.handle(e,t,n)}return d(r,this),r.caseSensitive=t.caseSensitive,r.mergeParams=t.mergeParams,r.params={},r.strict=t.strict,r.stack=[],r}function h(e,t){try{return e.match(t)}catch(e){return e}}e.exports=m,e.exports.Route=l,m.prototype=function(){},m.prototype.param=function(e,t){if(!e)throw new TypeError("argument name is required");if("string"!=typeof e)throw new TypeError("argument name must be a string");if(!t)throw new TypeError("argument fn is required");if("function"!=typeof t)throw new TypeError("argument fn must be a function");var r=this.params[e];return r||(r=this.params[e]=[]),r.push(t),this},m.prototype.handle=function(e,t,r){if(!r)throw new TypeError("argument callback is required");n("dispatching %s %s",e.method,e.url);var o,i,s,l=0,d=function(e){if("string"!=typeof e||0===e.length||"/"===e[0])return;var t=e.indexOf("?"),r=-1!==t?t:e.length,n=e.substr(0,r).indexOf("://");return-1!==n?e.substr(0,e.indexOf("/",3+n)):void 0}(e.url)||"",p="",m=this,f=!1,y=0,g={},S=this.stack,v=e.params,b=e.baseUrl||"",_=function(e,t){for(var r=new Array(arguments.length-2),n=new Array(arguments.length-2),o=0;o<r.length;o++)r[o]=arguments[o+2],n[o]=t[r[o]];return function(){for(var o=0;o<r.length;o++)t[r[o]]=n[o];return e.apply(this,arguments)}}(r,e,"baseUrl","next","params");function w(r){var i="route"===r?null:r;if(f&&(e.url=e.url.substr(1),f=!1),0!==p.length&&(e.baseUrl=b,e.url=d+p+e.url.substr(d.length),p=""),"router"!==i)if(l>=S.length)u(_,i);else{if(++y>100)return u(w,r);var s,P,T,x=function(e){try{return c(e).pathname}catch(e){return}}(e);if(null==x)return _(i);for(;!0!==P&&l<S.length;)if(P=h(s=S[l++],x),T=s.route,"boolean"!=typeof P&&(i=i||P),!0===P&&T)if(i)P=!1;else{var D=e.method,R=T._handles_method(D);!R&&"OPTIONS"===D&&o&&o.push.apply(o,T._methods()),R||"HEAD"===D||(P=!1)}if(!0!==P)return _(i);T&&(e.route=T),e.params=m.mergeParams?function(e,t){if("object"!=typeof t||!t)return e;var r=a({},t);if(!(0 in e)||!(0 in t))return a(r,e);var n=0,o=0;for(;n in e;)n++;for(;o in t;)o++;for(n--;n>=0;n--)e[n+o]=e[n],n<o&&delete e[n];return a(r,e)}(s.params,v):s.params;var O=s.path;m.process_params(s,g,e,t,(function(r){return r?w(i||r):T?s.handle_request(e,t,w):void function(r,o,i,s){if(0!==i.length){if(i!==s.substr(0,i.length))return void w(o);var a=s[i.length];if(a&&"/"!==a)return void w(o);n("trim prefix (%s) from url %s",i,e.url),p=i,e.url=d+e.url.substr(d.length+p.length),d||"/"===e.url[0]||(e.url="/"+e.url,f=!0),e.baseUrl=b+("/"===p[p.length-1]?p.substring(0,p.length-1):p)}n("%s %s : %s",r.name,i,e.originalUrl),o?r.handle_error(o,e,t,w):r.handle_request(e,t,w);y=0}(s,i,O,x)}))}else u(_,null)}e.next=w,"OPTIONS"===e.method&&(i=_,s=function(e,t){return function(r,n){if(n||0===t.length)return r(n);!function(e,t,r){try{!function(e,t){for(var r=Object.create(null),n=0;n<t.length;n++)r[t[n]]=!0;var o=Object.keys(r).sort().join(", ");e.setHeader("Allow",o),e.setHeader("Content-Length",Buffer.byteLength(o)),e.setHeader("Content-Type","text/plain"),e.setHeader("X-Content-Type-Options","nosniff"),e.end(o)}(e,t)}catch(e){r(e)}}(e,t,r)}}(t,o=[]),_=function(){var e=new Array(arguments.length+1);e[0]=i;for(var t=0,r=arguments.length;t<r;t++)e[t+1]=arguments[t];s.apply(this,e)}),e.baseUrl=b,e.originalUrl=e.originalUrl||e.url,w()},m.prototype.process_params=function(e,t,r,n,o){var i=this.params,s=e.keys;if(!s||0===s.length)return o();var a,c,l,d,p,u=0,m=0;function h(e){return e?o(e):u>=s.length?o():(m=0,c=s[u++],a=c.name,l=r.params[a],d=i[a],p=t[a],void 0!==l&&d?p&&(p.match===l||p.error&&"route"!==p.error)?(r.params[a]=p.value,h(p.error)):(t[a]=p={error:null,match:l,value:l},void f()):h())}function f(e){var t=d[m++];if(p.value=r.params[c.name],e)return p.error=e,void h(e);if(!t)return h();try{t(r,n,f,l,c.name)}catch(e){f(e)}}h()},m.prototype.use=function(e){var t=0,r="/";if("function"!=typeof e){for(var s=e;Array.isArray(s)&&0!==s.length;)s=s[0];"function"!=typeof s&&(t=1,r=e)}var a=o(p.call(arguments,t));if(0===a.length)throw new TypeError("argument handler is required");for(var c=0;c<a.length;c++){var l=a[c];if("function"!=typeof l)throw new TypeError("argument handler must be a function");n("use %o %s",r,l.name||"<anonymous>");var d=new i(r,{sensitive:this.caseSensitive,strict:!1,end:!1},l);d.route=void 0,this.stack.push(d)}return this},m.prototype.route=function(e){var t=new l(e),r=new i(e,{sensitive:this.caseSensitive,strict:this.strict,end:!0},(function(e,r,n){t.dispatch(e,r,n)}));return r.route=t,this.stack.push(r),t},s.concat("all").forEach((function(e){m.prototype[e]=function(t){var r=this.route(t);return r[e].apply(r,p.call(arguments,1)),this}}))},5484:(e,t,r)=>{"use strict";var n=r(4779),o=r(1542)("router:layer"),i=Object.prototype.hasOwnProperty;function s(e,t,r){if(!(this instanceof s))return new s(e,t,r);o("new %o",e);var i=t||{};this.handle=r,this.name=r.name||"<anonymous>",this.params=void 0,this.path=void 0,this.regexp=n(e,this.keys=[],i),this.regexp.fast_star="*"===e,this.regexp.fast_slash="/"===e&&!1===i.end}function a(e){if("string"!=typeof e||0===e.length)return e;try{return decodeURIComponent(e)}catch(t){throw t instanceof URIError&&(t.message="Failed to decode param '"+e+"'",t.status=400),t}}e.exports=s,s.prototype.handle_error=function(e,t,r,n){var o=this.handle;if(4!==o.length)return n(e);try{o(e,t,r,n)}catch(e){n(e)}},s.prototype.handle_request=function(e,t,r){var n=this.handle;if(n.length>3)return r();try{n(e,t,r)}catch(e){r(e)}},s.prototype.match=function(e){var t;if(null!=e){if(this.regexp.fast_slash)return this.params={},this.path="",!0;if(this.regexp.fast_star)return this.params={0:a(e)},this.path=e,!0;t=this.regexp.exec(e)}if(!t)return this.params=void 0,this.path=void 0,!1;this.params={},this.path=t[0];for(var r=this.keys,n=this.params,o=1;o<t.length;o++){var s=r[o-1].name,c=a(t[o]);void 0===c&&i.call(n,s)||(n[s]=c)}return!0}},9693:(e,t,r)=>{"use strict";var n=r(1542)("router:route"),o=r(8507).x,i=r(5484),s=r(8873),a=Array.prototype.slice,c="function"==typeof setImmediate?setImmediate:function(e){process.nextTick(e.bind.apply(e,arguments))};function l(e){n("new %o",e),this.path=e,this.stack=[],this.methods=Object.create(null)}e.exports=l,l.prototype._handles_method=function(e){if(this.methods._all)return!0;var t=e.toLowerCase();return"head"!==t||this.methods.head||(t="get"),Boolean(this.methods[t])},l.prototype._methods=function(){var e=Object.keys(this.methods);this.methods.get&&!this.methods.head&&e.push("head");for(var t=0;t<e.length;t++)e[t]=e[t].toUpperCase();return e},l.prototype.dispatch=function(e,t,r){var n=0,o=this.stack,i=0;if(0===o.length)return r();var s=e.method.toLowerCase();"head"!==s||this.methods.head||(s="get"),e.route=this,function a(l){if(l&&"route"===l)return r();if(l&&"router"===l)return r(l);if(n>=o.length)return r(l);if(++i>100)return c(a,l);var d,p;for(;!0!==p&&n<o.length;)d=o[n++],p=!d.method||d.method===s;if(!0!==p)return r(l);l?d.handle_error(l,e,t,a):d.handle_request(e,t,a);i=0}()},l.prototype.all=function(e){var t=o(a.call(arguments));if(0===t.length)throw new TypeError("argument handler is required");for(var r=0;r<t.length;r++){var n=t[r];if("function"!=typeof n)throw new TypeError("argument handler must be a function");var s=i("/",{},n);s.method=void 0,this.methods._all=!0,this.stack.push(s)}return this},s.forEach((function(e){l.prototype[e]=function(t){var r=o(a.call(arguments));if(0===r.length)throw new TypeError("argument handler is required");for(var s=0;s<r.length;s++){var c=r[s];if("function"!=typeof c)throw new TypeError("argument handler must be a function");n("%s %s",e,this.path);var l=i("/",{},c);l.method=e,this.methods[e]=!0,this.stack.push(l)}return this}}))},120:(e,t,r)=>{function n(){var e;try{e=t.storage.debug}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e}(t=e.exports=r(7239)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var r=this.useColors;if(e[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+e[0]+(r?"%c ":" ")+"+"+t.humanize(this.diff),!r)return;var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var o=0,i=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(o++,"%c"===e&&(i=o))})),e.splice(i,0,n)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=n,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(n())},7239:(e,t,r)=>{var n;function o(e){function r(){if(r.enabled){var e=r,o=+new Date,i=o-(n||o);e.diff=i,e.prev=n,e.curr=o,n=o;for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=t.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");var c=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,(function(r,n){if("%%"===r)return r;c++;var o=t.formatters[n];if("function"==typeof o){var i=s[c];r=o.call(e,i),s.splice(c,1),c--}return r})),t.formatArgs.call(e,s);var l=r.log||t.log||console.log.bind(console);l.apply(e,s)}}return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=function(e){var r,n=0;for(r in e)n=(n<<5)-n+e.charCodeAt(r),n|=0;return t.colors[Math.abs(n)%t.colors.length]}(e),"function"==typeof t.init&&t.init(r),r}(t=e.exports=o.debug=o.default=o).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e),t.names=[],t.skips=[];for(var r=("string"==typeof e?e:"").split(/[\s,]+/),n=r.length,o=0;o<n;o++)r[o]&&("-"===(e=r[o].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){var r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(8228),t.names=[],t.skips=[],t.formatters={}},1542:(e,t,r)=>{"undefined"!=typeof process&&"renderer"===process.type?e.exports=r(120):e.exports=r(962)},962:(e,t,r)=>{var n=r(6224),o=r(3837);(t=e.exports=r(7239)).init=function(e){e.inspectOpts={};for(var r=Object.keys(t.inspectOpts),n=0;n<r.length;n++)e.inspectOpts[r[n]]=t.inspectOpts[r[n]]},t.log=function(){return s.write(o.format.apply(o,arguments)+"\n")},t.formatArgs=function(e){var r=this.namespace;if(this.useColors){var n=this.color,o="  [3"+n+";1m"+r+" [0m";e[0]=o+e[0].split("\n").join("\n"+o),e.push("[3"+n+"m+"+t.humanize(this.diff)+"[0m")}else e[0]=(new Date).toUTCString()+" "+r+" "+e[0]},t.save=function(e){null==e?delete process.env.DEBUG:process.env.DEBUG=e},t.load=a,t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):n.isatty(i)},t.colors=[6,2,3,4,5,1],t.inspectOpts=Object.keys(process.env).filter((function(e){return/^debug_/i.test(e)})).reduce((function(e,t){var r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(function(e,t){return t.toUpperCase()})),n=process.env[t];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&("null"===n?null:Number(n)),e[r]=n,e}),{});var i=parseInt(process.env.DEBUG_FD,10)||2;1!==i&&2!==i&&o.deprecate((function(){}),"except for stderr(2) and stdout(1), any other usage of DEBUG_FD is deprecated. Override debug.log if you want to use a different log function (https://git.io/debug_fd)")();var s=1===i?process.stdout:2===i?process.stderr:function(e){var t;switch(process.binding("tty_wrap").guessHandleType(e)){case"TTY":(t=new n.WriteStream(e))._type="tty",t._handle&&t._handle.unref&&t._handle.unref();break;case"FILE":var o=r(7147);(t=new o.SyncWriteStream(e,{autoClose:!1}))._type="fs";break;case"PIPE":case"TCP":var i=r(1808);(t=new i.Socket({fd:e,readable:!1,writable:!0})).readable=!1,t.read=null,t._type="pipe",t._handle&&t._handle.unref&&t._handle.unref();break;default:throw new Error("Implement me. Unknown stream file type!")}return t.fd=e,t._isStdio=!0,t}(i);function a(){return process.env.DEBUG}t.formatters.o=function(e){return this.inspectOpts.colors=this.useColors,o.inspect(e,this.inspectOpts).split("\n").map((function(e){return e.trim()})).join(" ")},t.formatters.O=function(e){return this.inspectOpts.colors=this.useColors,o.inspect(e,this.inspectOpts)},t.enable(a())},8228:e=>{var t=1e3,r=60*t,n=60*r,o=24*n,i=365.25*o;function s(e,t,r){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}e.exports=function(e,a){a=a||{};var c,l=typeof e;if("string"===l&&e.length>0)return function(e){if((e=String(e)).length>100)return;var s=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!s)return;var a=parseFloat(s[1]);switch((s[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return a*i;case"days":case"day":case"d":return a*o;case"hours":case"hour":case"hrs":case"hr":case"h":return a*n;case"minutes":case"minute":case"mins":case"min":case"m":return a*r;case"seconds":case"second":case"secs":case"sec":case"s":return a*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}(e);if("number"===l&&!1===isNaN(e))return a.long?s(c=e,o,"day")||s(c,n,"hour")||s(c,r,"minute")||s(c,t,"second")||c+" ms":function(e){if(e>=o)return Math.round(e/o)+"d";if(e>=n)return Math.round(e/n)+"h";if(e>=r)return Math.round(e/r)+"m";if(e>=t)return Math.round(e/t)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},6644:e=>{"use strict";e.exports=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){return e.__proto__=t,e}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(e,r)||(e[r]=t[r]);return e})},1322:(e,t)=>{e.exports=function(e,t){if(e&&t)for(var r in t)e[r]=t[r];return e}},6996:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeDeviceAccessControls=t.addAccessControlsForInterface=void 0;const n=r(7954);t.addAccessControlsForInterface=function(e,...t){return{id:e,methods:t.map((e=>n.ScryptedInterfaceDescriptors[e].methods)).flat(),properties:t.map((e=>n.ScryptedInterfaceDescriptors[e].properties)).flat(),interfaces:t}},t.mergeDeviceAccessControls=function(e,t){return e&&null!==e.devicesAccessControls?(e.devicesAccessControls||(e.devicesAccessControls=[]),e.devicesAccessControls.push(...t),e):e}},7954:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.MixinDeviceBase=t.ScryptedDeviceBase=void 0,o(r(5492),t);const i=r(5492);class s extends i.DeviceBase{constructor(e){super(),this.nativeId=e}get storage(){return this._storage||(this._storage=deviceManager.getDeviceStorage(this.nativeId)),this._storage}get log(){return this._log||(this._log=deviceManager.getDeviceLogger(this.nativeId)),this._log}get console(){return this._console||(this._console=deviceManager.getDeviceConsole(this.nativeId)),this._console}async createMediaObject(e,t){return mediaManager.createMediaObject(e,t,{sourceId:this.id})}getMediaObjectConsole(e){return"string"!=typeof e.sourceId?this.console:deviceManager.getMixinConsole(e.sourceId,this.nativeId)}_lazyLoadDeviceState(){this._deviceState||(this.nativeId?this._deviceState=deviceManager.getDeviceState(this.nativeId):this._deviceState=deviceManager.getDeviceState())}onDeviceEvent(e,t){return deviceManager.onDeviceEvent(this.nativeId,e,t)}}t.ScryptedDeviceBase=s;class a extends i.DeviceBase{constructor(e){super(),this._listeners=new Set,this.nativeId=systemManager.getDeviceById(this.id)?.nativeId,this.mixinDevice=e.mixinDevice,this.mixinDeviceInterfaces=e.mixinDeviceInterfaces,this.mixinStorageSuffix=e.mixinStorageSuffix,this._deviceState=e.mixinDeviceState,this._deviceState.__rpcproxy_traps_all_properties&&deviceManager.createDeviceState&&"string"==typeof this._deviceState.id&&(this._deviceState=deviceManager.createDeviceState(this._deviceState.id,this._deviceState.setState)),this.mixinProviderNativeId=e.mixinProviderNativeId}get storage(){if(!this._storage){const e=this.mixinStorageSuffix,t=this.id+(e?":"+e:"");this._storage=deviceManager.getMixinStorage(t,this.mixinProviderNativeId)}return this._storage}get console(){return this._console||(deviceManager.getMixinConsole?this._console=deviceManager.getMixinConsole(this.id,this.mixinProviderNativeId):this._console=deviceManager.getDeviceConsole(this.mixinProviderNativeId)),this._console}async createMediaObject(e,t){return mediaManager.createMediaObject(e,t,{sourceId:this.id})}getMediaObjectConsole(e){return"string"!=typeof e.sourceId?this.console:deviceManager.getMixinConsole(e.sourceId,this.mixinProviderNativeId)}onDeviceEvent(e,t){return deviceManager.onMixinEvent(this.id,this,e,t)}_lazyLoadDeviceState(){}manageListener(e){this._listeners.add(e)}release(){for(const e of this._listeners)e.removeListener()}}t.MixinDeviceBase=a,function(){function e(e){return function(){return this._lazyLoadDeviceState(),this._deviceState?.[e]}}function t(e){return function(t){this._lazyLoadDeviceState(),this._deviceState?this._deviceState[e]=t:console.warn("device state is unavailable. the device must be discovered with deviceManager.onDeviceDiscovered or deviceManager.onDevicesChanged before the state can be set.")}}for(const r of Object.values(i.ScryptedInterfaceProperty))r!==i.ScryptedInterfaceProperty.nativeId&&(Object.defineProperty(s.prototype,r,{set:t(r),get:e(r)}),Object.defineProperty(a.prototype,r,{set:t(r),get:e(r)}))}();let c={};try{let e;try{e=pluginRuntimeAPI}catch(e){}c=Object.assign(c,{log:deviceManager.getDeviceLogger(void 0),deviceManager,endpointManager,mediaManager,systemManager,pluginHostAPI,...e});try{systemManager.setScryptedInterfaceDescriptors?.(i.TYPES_VERSION,i.ScryptedInterfaceDescriptors)?.catch((()=>{}))}catch(e){}}catch(e){console.error("sdk initialization error, import @scrypted/types or use @scrypted/client instead",e)}t.default=c},8202:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.StorageSettings=void 0;const s=i(r(7954)),{systemManager:a}=s.default;t.StorageSettings=class{constructor(e,t){this.device=e,this.settings=t,this.values={},this.hasValue={};for(const e of Object.keys(t)){const r=t[e],n=()=>this.getItem(e);let o;o="clippath"!==r.type?n:()=>{try{return JSON.parse(n())}catch(e){}},Object.defineProperty(this.values,e,{get:o,set:t=>this.putSetting(e,t),enumerable:!0}),Object.defineProperty(this.hasValue,e,{get:()=>null!=this.device.storage.getItem(e),enumerable:!0})}}get keys(){const e={};for(const t of Object.keys(this.settings))e[t]=t;return e}async getSettings(){const e=await(this.options?.onGet?.()),t=[];for(const[r,n]of Object.entries(this.settings)){let o=Object.assign({},n);e?.[r]&&(o=Object.assign(o,e[r])),o.onGet&&(o=Object.assign(o,await o.onGet())),o.hide||await(this.options?.hide?.[r]?.())||(o.key=r,o.value=this.getItemInternal(r,o,!0),t.push(o),delete o.onPut,delete o.onGet,delete o.mapPut,delete o.mapGet)}return t}async putSetting(e,t){const r=this.settings[e];let n;return r&&(n=this.getItemInternal(e,r)),this.putSettingInternal(r,n,e,t)}putSettingInternal(e,t,r,n){e?.noStore||(e?.mapPut&&(n=e.mapPut(t,n)),"object"==typeof n?this.device.storage.setItem(r,JSON.stringify(n)):null==n?this.device.storage.removeItem(r):this.device.storage.setItem(r,n?.toString())),e?.onPut?.(t,n),this.device.onDeviceEvent(s.ScryptedInterface.Settings,void 0)}getItemInternal(e,t,r){if(!t)return this.device.storage.getItem(e);const n=function(e,t,r,n){const o=t.multiple?"array":t.type;if("boolean"===o)return"true"===e||"false"!==e&&(r()||!1);if("number"===o)return parseFloat(e)||r()||0;if("integer"===o)return parseInt(e)||r()||0;if("array"===o)try{return JSON.parse(e)}catch(e){return r()||[]}if("device"===o)return n?e:a.getDeviceById(e)||a.getDeviceById(r());if(e&&t.json)try{return JSON.parse(e)}catch(e){return r()}return e||r()}(this.device.storage.getItem(e),t,(()=>t.persistedDefaultValue?(this.putSettingInternal(t,void 0,e,t.persistedDefaultValue),t.persistedDefaultValue):t.defaultValue),r);return t.mapGet?t.mapGet(n):n}getItem(e){return this.getItemInternal(e,this.settings[e])}}},5492:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScryptedMimeTypes=t.ScryptedInterface=t.MediaPlayerState=t.SecuritySystemObstruction=t.SecuritySystemMode=t.AirQuality=t.ChargeState=t.LockState=t.PanTiltZoomMovement=t.ThermostatMode=t.TemperatureUnit=t.FanMode=t.HumidityMode=t.ScryptedDeviceType=t.ScryptedInterfaceDescriptors=t.ScryptedInterfaceMethod=t.ScryptedInterfaceProperty=t.DeviceBase=t.TYPES_VERSION=void 0,t.TYPES_VERSION="0.2.79";t.DeviceBase=class{},function(e){e.id="id",e.info="info",e.interfaces="interfaces",e.mixins="mixins",e.name="name",e.nativeId="nativeId",e.pluginId="pluginId",e.providedInterfaces="providedInterfaces",e.providedName="providedName",e.providedRoom="providedRoom",e.providedType="providedType",e.providerId="providerId",e.room="room",e.type="type",e.on="on",e.brightness="brightness",e.colorTemperature="colorTemperature",e.rgb="rgb",e.hsv="hsv",e.running="running",e.paused="paused",e.docked="docked",e.temperatureSetting="temperatureSetting",e.thermostatActiveMode="thermostatActiveMode",e.thermostatAvailableModes="thermostatAvailableModes",e.thermostatMode="thermostatMode",e.thermostatSetpoint="thermostatSetpoint",e.thermostatSetpointHigh="thermostatSetpointHigh",e.thermostatSetpointLow="thermostatSetpointLow",e.temperature="temperature",e.temperatureUnit="temperatureUnit",e.humidity="humidity",e.ptzCapabilities="ptzCapabilities",e.lockState="lockState",e.entryOpen="entryOpen",e.batteryLevel="batteryLevel",e.chargeState="chargeState",e.online="online",e.fromMimeType="fromMimeType",e.toMimeType="toMimeType",e.binaryState="binaryState",e.tampered="tampered",e.powerDetected="powerDetected",e.audioDetected="audioDetected",e.motionDetected="motionDetected",e.ambientLight="ambientLight",e.occupied="occupied",e.flooded="flooded",e.ultraviolet="ultraviolet",e.luminance="luminance",e.position="position",e.securitySystemState="securitySystemState",e.pm10Density="pm10Density",e.pm25Density="pm25Density",e.vocDensity="vocDensity",e.noxDensity="noxDensity",e.co2ppm="co2ppm",e.airQuality="airQuality",e.humiditySetting="humiditySetting",e.fan="fan",e.applicationInfo="applicationInfo"}(t.ScryptedInterfaceProperty||(t.ScryptedInterfaceProperty={})),function(e){e.listen="listen",e.probe="probe",e.setMixins="setMixins",e.setName="setName",e.setRoom="setRoom",e.setType="setType",e.getPluginJson="getPluginJson",e.turnOff="turnOff",e.turnOn="turnOn",e.setBrightness="setBrightness",e.getTemperatureMaxK="getTemperatureMaxK",e.getTemperatureMinK="getTemperatureMinK",e.setColorTemperature="setColorTemperature",e.setRgb="setRgb",e.setHsv="setHsv",e.sendNotification="sendNotification",e.start="start",e.stop="stop",e.pause="pause",e.resume="resume",e.dock="dock",e.setTemperature="setTemperature",e.setThermostatMode="setThermostatMode",e.setThermostatSetpoint="setThermostatSetpoint",e.setThermostatSetpointHigh="setThermostatSetpointHigh",e.setThermostatSetpointLow="setThermostatSetpointLow",e.setTemperatureUnit="setTemperatureUnit",e.getPictureOptions="getPictureOptions",e.takePicture="takePicture",e.getAudioStream="getAudioStream",e.startDisplay="startDisplay",e.stopDisplay="stopDisplay",e.getVideoStream="getVideoStream",e.getVideoStreamOptions="getVideoStreamOptions",e.getRecordingStream="getRecordingStream",e.getRecordingStreamCurrentTime="getRecordingStreamCurrentTime",e.getRecordingStreamOptions="getRecordingStreamOptions",e.getRecordingStreamThumbnail="getRecordingStreamThumbnail",e.ptzCommand="ptzCommand",e.getRecordedEvents="getRecordedEvents",e.getVideoClip="getVideoClip",e.getVideoClipThumbnail="getVideoClipThumbnail",e.getVideoClips="getVideoClips",e.removeVideoClips="removeVideoClips",e.setVideoStreamOptions="setVideoStreamOptions",e.startIntercom="startIntercom",e.stopIntercom="stopIntercom",e.lock="lock",e.unlock="unlock",e.addPassword="addPassword",e.getPasswords="getPasswords",e.removePassword="removePassword",e.activate="activate",e.deactivate="deactivate",e.isReversible="isReversible",e.closeEntry="closeEntry",e.openEntry="openEntry",e.getDevice="getDevice",e.releaseDevice="releaseDevice",e.adoptDevice="adoptDevice",e.discoverDevices="discoverDevices",e.createDevice="createDevice",e.getCreateDeviceSettings="getCreateDeviceSettings",e.getRefreshFrequency="getRefreshFrequency",e.refresh="refresh",e.getMediaStatus="getMediaStatus",e.load="load",e.seek="seek",e.skipNext="skipNext",e.skipPrevious="skipPrevious",e.convert="convert",e.getSettings="getSettings",e.putSetting="putSetting",e.armSecuritySystem="armSecuritySystem",e.disarmSecuritySystem="disarmSecuritySystem",e.getReadmeMarkdown="getReadmeMarkdown",e.getOauthUrl="getOauthUrl",e.onOauthCallback="onOauthCallback",e.canMixin="canMixin",e.getMixin="getMixin",e.releaseMixin="releaseMixin",e.onRequest="onRequest",e.onConnection="onConnection",e.onPush="onPush",e.run="run",e.eval="eval",e.loadScripts="loadScripts",e.saveScript="saveScript",e.trackObjects="trackObjects",e.getDetectionInput="getDetectionInput",e.getObjectTypes="getObjectTypes",e.detectObjects="detectObjects",e.generateObjectDetections="generateObjectDetections",e.getDetectionModel="getDetectionModel",e.setHumidity="setHumidity",e.setFan="setFan",e.startRTCSignalingSession="startRTCSignalingSession",e.createRTCSignalingSession="createRTCSignalingSession",e.getScryptedUserAccessControl="getScryptedUserAccessControl",e.generateVideoFrames="generateVideoFrames"}(t.ScryptedInterfaceMethod||(t.ScryptedInterfaceMethod={})),t.ScryptedInterfaceDescriptors={ScryptedDevice:{name:"ScryptedDevice",methods:["listen","probe","setMixins","setName","setRoom","setType"],properties:["id","info","interfaces","mixins","name","nativeId","pluginId","providedInterfaces","providedName","providedRoom","providedType","providerId","room","type"]},ScryptedPlugin:{name:"ScryptedPlugin",methods:["getPluginJson"],properties:[]},OnOff:{name:"OnOff",methods:["turnOff","turnOn"],properties:["on"]},Brightness:{name:"Brightness",methods:["setBrightness"],properties:["brightness"]},ColorSettingTemperature:{name:"ColorSettingTemperature",methods:["getTemperatureMaxK","getTemperatureMinK","setColorTemperature"],properties:["colorTemperature"]},ColorSettingRgb:{name:"ColorSettingRgb",methods:["setRgb"],properties:["rgb"]},ColorSettingHsv:{name:"ColorSettingHsv",methods:["setHsv"],properties:["hsv"]},Notifier:{name:"Notifier",methods:["sendNotification"],properties:[]},StartStop:{name:"StartStop",methods:["start","stop"],properties:["running"]},Pause:{name:"Pause",methods:["pause","resume"],properties:["paused"]},Dock:{name:"Dock",methods:["dock"],properties:["docked"]},TemperatureSetting:{name:"TemperatureSetting",methods:["setTemperature","setThermostatMode","setThermostatSetpoint","setThermostatSetpointHigh","setThermostatSetpointLow"],properties:["temperatureSetting","thermostatActiveMode","thermostatAvailableModes","thermostatMode","thermostatSetpoint","thermostatSetpointHigh","thermostatSetpointLow"]},Thermometer:{name:"Thermometer",methods:["setTemperatureUnit"],properties:["temperature","temperatureUnit"]},HumiditySensor:{name:"HumiditySensor",methods:[],properties:["humidity"]},Camera:{name:"Camera",methods:["getPictureOptions","takePicture"],properties:[]},Microphone:{name:"Microphone",methods:["getAudioStream"],properties:[]},Display:{name:"Display",methods:["startDisplay","stopDisplay"],properties:[]},VideoCamera:{name:"VideoCamera",methods:["getVideoStream","getVideoStreamOptions"],properties:[]},VideoRecorder:{name:"VideoRecorder",methods:["getRecordingStream","getRecordingStreamCurrentTime","getRecordingStreamOptions","getRecordingStreamThumbnail"],properties:[]},PanTiltZoom:{name:"PanTiltZoom",methods:["ptzCommand"],properties:["ptzCapabilities"]},EventRecorder:{name:"EventRecorder",methods:["getRecordedEvents"],properties:[]},VideoClips:{name:"VideoClips",methods:["getVideoClip","getVideoClipThumbnail","getVideoClips","removeVideoClips"],properties:[]},VideoCameraConfiguration:{name:"VideoCameraConfiguration",methods:["setVideoStreamOptions"],properties:[]},Intercom:{name:"Intercom",methods:["startIntercom","stopIntercom"],properties:[]},Lock:{name:"Lock",methods:["lock","unlock"],properties:["lockState"]},PasswordStore:{name:"PasswordStore",methods:["addPassword","getPasswords","removePassword"],properties:[]},Scene:{name:"Scene",methods:["activate","deactivate","isReversible"],properties:[]},Entry:{name:"Entry",methods:["closeEntry","openEntry"],properties:[]},EntrySensor:{name:"EntrySensor",methods:[],properties:["entryOpen"]},DeviceProvider:{name:"DeviceProvider",methods:["getDevice","releaseDevice"],properties:[]},DeviceDiscovery:{name:"DeviceDiscovery",methods:["adoptDevice","discoverDevices"],properties:[]},DeviceCreator:{name:"DeviceCreator",methods:["createDevice","getCreateDeviceSettings"],properties:[]},Battery:{name:"Battery",methods:[],properties:["batteryLevel"]},Charger:{name:"Charger",methods:[],properties:["chargeState"]},Refresh:{name:"Refresh",methods:["getRefreshFrequency","refresh"],properties:[]},MediaPlayer:{name:"MediaPlayer",methods:["getMediaStatus","load","seek","skipNext","skipPrevious"],properties:[]},Online:{name:"Online",methods:[],properties:["online"]},BufferConverter:{name:"BufferConverter",methods:["convert"],properties:["fromMimeType","toMimeType"]},Settings:{name:"Settings",methods:["getSettings","putSetting"],properties:[]},BinarySensor:{name:"BinarySensor",methods:[],properties:["binaryState"]},TamperSensor:{name:"TamperSensor",methods:[],properties:["tampered"]},PowerSensor:{name:"PowerSensor",methods:[],properties:["powerDetected"]},AudioSensor:{name:"AudioSensor",methods:[],properties:["audioDetected"]},MotionSensor:{name:"MotionSensor",methods:[],properties:["motionDetected"]},AmbientLightSensor:{name:"AmbientLightSensor",methods:[],properties:["ambientLight"]},OccupancySensor:{name:"OccupancySensor",methods:[],properties:["occupied"]},FloodSensor:{name:"FloodSensor",methods:[],properties:["flooded"]},UltravioletSensor:{name:"UltravioletSensor",methods:[],properties:["ultraviolet"]},LuminanceSensor:{name:"LuminanceSensor",methods:[],properties:["luminance"]},PositionSensor:{name:"PositionSensor",methods:[],properties:["position"]},SecuritySystem:{name:"SecuritySystem",methods:["armSecuritySystem","disarmSecuritySystem"],properties:["securitySystemState"]},PM10Sensor:{name:"PM10Sensor",methods:[],properties:["pm10Density"]},PM25Sensor:{name:"PM25Sensor",methods:[],properties:["pm25Density"]},VOCSensor:{name:"VOCSensor",methods:[],properties:["vocDensity"]},NOXSensor:{name:"NOXSensor",methods:[],properties:["noxDensity"]},CO2Sensor:{name:"CO2Sensor",methods:[],properties:["co2ppm"]},AirQualitySensor:{name:"AirQualitySensor",methods:[],properties:["airQuality"]},Readme:{name:"Readme",methods:["getReadmeMarkdown"],properties:[]},OauthClient:{name:"OauthClient",methods:["getOauthUrl","onOauthCallback"],properties:[]},MixinProvider:{name:"MixinProvider",methods:["canMixin","getMixin","releaseMixin"],properties:[]},HttpRequestHandler:{name:"HttpRequestHandler",methods:["onRequest"],properties:[]},EngineIOHandler:{name:"EngineIOHandler",methods:["onConnection"],properties:[]},PushHandler:{name:"PushHandler",methods:["onPush"],properties:[]},Program:{name:"Program",methods:["run"],properties:[]},Scriptable:{name:"Scriptable",methods:["eval","loadScripts","saveScript"],properties:[]},ObjectTracker:{name:"ObjectTracker",methods:["trackObjects"],properties:[]},ObjectDetector:{name:"ObjectDetector",methods:["getDetectionInput","getObjectTypes"],properties:[]},ObjectDetection:{name:"ObjectDetection",methods:["detectObjects","generateObjectDetections","getDetectionModel"],properties:[]},HumiditySetting:{name:"HumiditySetting",methods:["setHumidity"],properties:["humiditySetting"]},Fan:{name:"Fan",methods:["setFan"],properties:["fan"]},RTCSignalingChannel:{name:"RTCSignalingChannel",methods:["startRTCSignalingSession"],properties:[]},RTCSignalingClient:{name:"RTCSignalingClient",methods:["createRTCSignalingSession"],properties:[]},LauncherApplication:{name:"LauncherApplication",methods:[],properties:["applicationInfo"]},ScryptedUser:{name:"ScryptedUser",methods:["getScryptedUserAccessControl"],properties:[]},VideoFrameGenerator:{name:"VideoFrameGenerator",methods:["generateVideoFrames"],properties:[]}},function(e){e.Builtin="Builtin",e.Camera="Camera",e.Fan="Fan",e.Light="Light",e.Switch="Switch",e.Outlet="Outlet",e.Sensor="Sensor",e.Scene="Scene",e.Program="Program",e.Automation="Automation",e.Vacuum="Vacuum",e.Notifier="Notifier",e.Thermostat="Thermostat",e.Lock="Lock",e.PasswordControl="PasswordControl",e.Display="Display",e.SmartDisplay="SmartDisplay",e.Speaker="Speaker",e.SmartSpeaker="SmartSpeaker",e.Event="Event",e.Entry="Entry",e.Garage="Garage",e.DeviceProvider="DeviceProvider",e.DataSource="DataSource",e.API="API",e.Doorbell="Doorbell",e.Irrigation="Irrigation",e.Valve="Valve",e.Person="Person",e.SecuritySystem="SecuritySystem",e.WindowCovering="WindowCovering",e.Siren="Siren",e.Unknown="Unknown"}(t.ScryptedDeviceType||(t.ScryptedDeviceType={})),function(e){e.Humidify="Humidify",e.Dehumidify="Dehumidify",e.Auto="Auto",e.Off="Off"}(t.HumidityMode||(t.HumidityMode={})),function(e){e.Auto="Auto",e.Manual="Manual"}(t.FanMode||(t.FanMode={})),function(e){e.C="C",e.F="F"}(t.TemperatureUnit||(t.TemperatureUnit={})),function(e){e.Off="Off",e.Cool="Cool",e.Heat="Heat",e.HeatCool="HeatCool",e.Auto="Auto",e.FanOnly="FanOnly",e.Purifier="Purifier",e.Eco="Eco",e.Dry="Dry",e.On="On"}(t.ThermostatMode||(t.ThermostatMode={})),function(e){e.Absolute="Absolute",e.Relative="Relative"}(t.PanTiltZoomMovement||(t.PanTiltZoomMovement={})),function(e){e.Locked="Locked",e.Unlocked="Unlocked",e.Jammed="Jammed"}(t.LockState||(t.LockState={})),function(e){e.Trickle="trickle",e.Charging="charging",e.NotCharging="not-charging"}(t.ChargeState||(t.ChargeState={})),function(e){e.Unknown="Unknown",e.Excellent="Excellent",e.Good="Good",e.Fair="Fair",e.Inferior="Inferior",e.Poor="Poor"}(t.AirQuality||(t.AirQuality={})),function(e){e.Disarmed="Disarmed",e.HomeArmed="HomeArmed",e.AwayArmed="AwayArmed",e.NightArmed="NightArmed"}(t.SecuritySystemMode||(t.SecuritySystemMode={})),function(e){e.Sensor="Sensor",e.Occupied="Occupied",e.Time="Time",e.Error="Error"}(t.SecuritySystemObstruction||(t.SecuritySystemObstruction={})),function(e){e.Idle="Idle",e.Playing="Playing",e.Paused="Paused",e.Buffering="Buffering"}(t.MediaPlayerState||(t.MediaPlayerState={})),function(e){e.ScryptedDevice="ScryptedDevice",e.ScryptedPlugin="ScryptedPlugin",e.OnOff="OnOff",e.Brightness="Brightness",e.ColorSettingTemperature="ColorSettingTemperature",e.ColorSettingRgb="ColorSettingRgb",e.ColorSettingHsv="ColorSettingHsv",e.Notifier="Notifier",e.StartStop="StartStop",e.Pause="Pause",e.Dock="Dock",e.TemperatureSetting="TemperatureSetting",e.Thermometer="Thermometer",e.HumiditySensor="HumiditySensor",e.Camera="Camera",e.Microphone="Microphone",e.Display="Display",e.VideoCamera="VideoCamera",e.VideoRecorder="VideoRecorder",e.PanTiltZoom="PanTiltZoom",e.EventRecorder="EventRecorder",e.VideoClips="VideoClips",e.VideoCameraConfiguration="VideoCameraConfiguration",e.Intercom="Intercom",e.Lock="Lock",e.PasswordStore="PasswordStore",e.Scene="Scene",e.Entry="Entry",e.EntrySensor="EntrySensor",e.DeviceProvider="DeviceProvider",e.DeviceDiscovery="DeviceDiscovery",e.DeviceCreator="DeviceCreator",e.Battery="Battery",e.Charger="Charger",e.Refresh="Refresh",e.MediaPlayer="MediaPlayer",e.Online="Online",e.BufferConverter="BufferConverter",e.Settings="Settings",e.BinarySensor="BinarySensor",e.TamperSensor="TamperSensor",e.PowerSensor="PowerSensor",e.AudioSensor="AudioSensor",e.MotionSensor="MotionSensor",e.AmbientLightSensor="AmbientLightSensor",e.OccupancySensor="OccupancySensor",e.FloodSensor="FloodSensor",e.UltravioletSensor="UltravioletSensor",e.LuminanceSensor="LuminanceSensor",e.PositionSensor="PositionSensor",e.SecuritySystem="SecuritySystem",e.PM10Sensor="PM10Sensor",e.PM25Sensor="PM25Sensor",e.VOCSensor="VOCSensor",e.NOXSensor="NOXSensor",e.CO2Sensor="CO2Sensor",e.AirQualitySensor="AirQualitySensor",e.Readme="Readme",e.OauthClient="OauthClient",e.MixinProvider="MixinProvider",e.HttpRequestHandler="HttpRequestHandler",e.EngineIOHandler="EngineIOHandler",e.PushHandler="PushHandler",e.Program="Program",e.Scriptable="Scriptable",e.ObjectTracker="ObjectTracker",e.ObjectDetector="ObjectDetector",e.ObjectDetection="ObjectDetection",e.HumiditySetting="HumiditySetting",e.Fan="Fan",e.RTCSignalingChannel="RTCSignalingChannel",e.RTCSignalingClient="RTCSignalingClient",e.LauncherApplication="LauncherApplication",e.ScryptedUser="ScryptedUser",e.VideoFrameGenerator="VideoFrameGenerator"}(t.ScryptedInterface||(t.ScryptedInterface={})),function(e){e.Url="text/x-uri",e.InsecureLocalUrl="text/x-insecure-local-uri",e.LocalUrl="text/x-local-uri",e.PushEndpoint="text/x-push-endpoint",e.SchemePrefix="x-scrypted/x-scrypted-scheme-",e.MediaStreamUrl="text/x-media-url",e.MediaObject="x-scrypted/x-scrypted-media-object",e.RequestMediaObject="x-scrypted/x-scrypted-request-media-object",e.RequestMediaStream="x-scrypted/x-scrypted-request-stream",e.MediaStreamFeedback="x-scrypted/x-media-stream-feedback",e.FFmpegInput="x-scrypted/x-ffmpeg-input",e.FFmpegTranscodeStream="x-scrypted/x-ffmpeg-transcode-stream",e.RTCSignalingChannel="x-scrypted/x-scrypted-rtc-signaling-channel",e.RTCSignalingSession="x-scrypted/x-scrypted-rtc-signaling-session",e.RTCConnectionManagement="x-scrypted/x-scrypted-rtc-connection-management",e.Image="x-scrypted/x-scrypted-image"}(t.ScryptedMimeTypes||(t.ScryptedMimeTypes={}))},2688:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n="export interface ScriptDevice {\n    /**\n     * @deprecated Use the default export to specify the device handler.\n     * @param handler \n     */\n    handle<T>(handler?: T & object): void;\n    handleTypes(...interfaces: string[]): void;\n}\n"},2937:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n='import type { ScriptDevice } from "@scrypted/common/src/eval/monaco/script-device";\nimport type { ScryptedDeviceBase } from "@scrypted/sdk";\n\ndeclare const device: ScryptedDeviceBase & ScriptDevice;\n'},4060:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createScriptDevice=t.createMonacoEvalDefaults=t.scryptedEval=t.tsCompile=void 0;const a=i(r(7954)),c=s(r(6144)),l=s(r(7147)),d=r(7954),p=s(r(3699)),u=r(8955),m=r(8819),{systemManager:h,deviceManager:f,mediaManager:y,endpointManager:g}=a.default;function S(){const e=l.default.readFileSync("@types/sdk/types.d.ts").toString();return{scryptedIndexDefs:l.default.readFileSync("@types/sdk/index.d.ts").toString(),scryptedTypesDefs:e}}t.tsCompile=async function(e,t=null){const n=r(1605),{ScriptTarget:o}=n;return null===t&&(t={compilerOptions:{target:o.ESNext,module:n.ModuleKind.CommonJS}}),n.transpileModule(e,t).outputText},t.scryptedEval=async function(e,t,n,o){const i=Object.assign({types:S().scryptedTypesDefs},n),s=Object.values(i).join("\n").toString()+t;let l;const d=a.default.fork();d.worker.on("error",(()=>{}));try{const e=await d.result;l=await e.tsCompile(s)}catch(t){throw e.log.e("Error compiling typescript."),e.console.error(t),t}finally{d.worker.terminate()}const v=new m.SystemManagerImpl;v.state=h.getSystemState();const b=new u.PluginAPIProxy(a.default.pluginHostAPI);v.api=b;const _=Object.assign({},o,{sdk:a.default,fs:r(1158),fetch:p.default,ScryptedDeviceBase:a.ScryptedDeviceBase,MixinDeviceBase:a.MixinDeviceBase,systemManager:v,deviceManager:f,endpointManager:g,mediaManager:y,log:e.log,console:e.console,localStorage:e.storage,device:e,exports:{},ScryptedInterface:a.ScryptedInterface,ScryptedDeviceType:a.ScryptedDeviceType,require}),w=`return (async function() {\n${l}\n})`;let P;try{P=c.default.compileFunction(w,Object.keys(_),{filename:"script.js"})(...Object.values(_))}catch(t){throw e.log.e("Error evaluating javascript."),e.console.error(t),t}try{const e=await P();return{value:e,defaultExport:_.exports.default,apiProxy:b}}catch(t){throw e.log.e("Error running script."),e.console.error(t),t}},t.createMonacoEvalDefaults=function(e){const t={bufferTypeDefs:l.default.readFileSync("@types/node/buffer.d.ts").toString()},r=Object.assign(S(),e);return`(function() {\n    const safeLibs = ${JSON.stringify(t)};\n    const libs = ${JSON.stringify(r)};\n\n    return (monaco) => {\n        (${function(e,t,r){e.languages.typescript.typescriptDefaults.setDiagnosticsOptions(Object.assign({},e.languages.typescript.typescriptDefaults.getDiagnosticsOptions(),{diagnosticCodesToIgnore:[1108,1375,1378]})),e.languages.typescript.typescriptDefaults.setCompilerOptions(Object.assign({},e.languages.typescript.typescriptDefaults.getCompilerOptions(),{moduleResolution:e.languages.typescript.ModuleResolutionKind.NodeJs}));const n=Object.values(r).join("\n"),o=Object.keys(r).filter((e=>"sdk"!==e)).map((e=>r[e])).map((e=>e.toString().replace(/export /g,"").replace(/import.*?/g,""))).join("\n");e.languages.typescript.typescriptDefaults.addExtraLib(`\n        ${n}\n\n        declare global {\n            ${o}\n\n            const log: Logger;\n\n            const deviceManager: DeviceManager;\n            const endpointManager: EndpointManager;\n            const mediaManager: MediaManager;\n            const systemManager: SystemManager;\n            const mqtt: MqttClient;\n            const device: ScryptedDeviceBase & { pathname : string };\n        }\n        `,"node_modules/@types/scrypted__sdk/types/index.d.ts"),e.languages.typescript.typescriptDefaults.addExtraLib(r.sdk,"node_modules/@types/scrypted__sdk/index.d.ts"),e.languages.typescript.typescriptDefaults.addExtraLib(t.bufferTypeDefs,"node_modules/@types/node/buffer.d.ts")}})(monaco, safeLibs, libs);\n    }\n    })();\n    `};const v=new Map;for(const e of Object.values(d.ScryptedInterfaceDescriptors))for(const t of e.methods)v.set(t,e.name);t.createScriptDevice=function(e){let t;const r=e.slice();return{handle:e=>{t=e},handleTypes:(...e)=>{r.push(...e)},mergeHandler:e=>{const n=t||{};let o;o=n.constructor===Object?Object.keys(n):Object.getOwnPropertyNames(n.__proto__);for(const t of o){const o=v.get(t);o&&(r.push(o),e[t]=n[t].bind(n))}return r}}}},7055:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.AggregateCore=t.AggregateCoreNativeId=void 0;const s=i(r(7954)),a=r(5615),{deviceManager:c}=s.default;t.AggregateCoreNativeId="aggregatecore";class l extends s.ScryptedDeviceBase{constructor(){super(t.AggregateCoreNativeId),this.aggregate=new Map;for(const e of c.getNativeIds())if(e?.startsWith("aggregate:")){const t=(0,a.createAggregateDevice)(e);this.aggregate.set(e,t),this.reportAggregate(e,t.computeInterfaces(),t.providedName)}s.default.systemManager.listen(((e,t,r)=>{if("Storage"===t.eventInterface){if([...this.aggregate.values()].map((e=>e.id)).includes(e.id)){const t=[...this.aggregate.values()].find((t=>t.id===e.id));this.reportAggregate(t.nativeId,t.computeInterfaces(),t.providedName)}}}))}async getReadmeMarkdown(){return"Combine multiple devices into a single virtual device. Commands sent to the device group will be sent to all the devices in that group."}async getCreateDeviceSettings(){return[{key:"name",title:"Name",description:"The name or description of the new device group."}]}async createDevice(e){const{name:t}=e,r=`aggregate:${Math.random()}`;await this.reportAggregate(r,[],t?.toString());const n=(0,a.createAggregateDevice)(r);return this.aggregate.set(r,n),r}async reportAggregate(e,r,n){const o={providerNativeId:t.AggregateCoreNativeId,name:n,nativeId:e,type:s.ScryptedDeviceType.Unknown,interfaces:[s.ScryptedInterface.Settings,...r]};await c.onDeviceDiscovered(o)}async getDevice(e){return this.aggregate.get(e)}async releaseDevice(e,t){}}t.AggregateCore=l},5615:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.createAggregateDevice=void 0;const s=i(r(7954)),a=r(8202),{systemManager:c,mediaManager:l,deviceManager:d}=s.default,p=new Map,u=e=>e.reduce(((e,t)=>e+(t||0)),0)/(e.length||0),m=e=>e.reduce(((e,t)=>e||t),!1),h=e=>e.reduce(((e,t)=>e&&t),!0);function f(e,t){const r=async()=>1===e.length?e[0].getVideoStreamOptions():[{id:"default",name:"Default",container:"ffmpeg",video:{},audio:null}];return{getVideoStreamOptions:async()=>r(),async getVideoStream(t){if(1===e.length)return e[0].getVideoStream(t);const n=await async function(t){const n=e.length>4?"low-resolution":"medium-resolution",o=(await Promise.allSettled(e.map((async e=>{const t=await e.getVideoStream({destination:n}),r=await l.convertMediaObjectToBuffer(t,s.ScryptedMimeTypes.FFmpegInput);return JSON.parse(r.toString())})))).map((e=>e.value)).filter((e=>!!e));if(!o.length)throw new Error("no inputs");let i=1;for(;i*i<o.length;)i++;const a=1920/i,c=1080/i,d=["nullsrc=size=1920x1080 [base];"],p={url:void 0,container:"rawvideo",mediaStreamOptions:(await r())?.[0],inputArguments:[],h264FilterArguments:[]};for(let e=0;e<o.length;e++)p.inputArguments.push(...o[e].inputArguments),d.push(`[${e}:v] scale=-1:${c},pad=${a}:ih:(ow-iw)/2 [pos${e}];`);for(let e=o.length;e<i*i;e++)p.inputArguments.push("-f","lavfi","-i",`color=black:s=${a}x${c}`),d.push(`[${e}:v] scale=${a}x${c} [pos${e}];`);let u="base",m=0,h=0;for(let e=0;e<i*i-1;e++){let t=`tmp${e}`;h=Math.floor(e/i)*c,d.push(`[${u}][pos${e}] overlay=shortest=1:x=${m%1920}:y=${h%1080} [${t}];`),u=t,m+=a}let f=i*i-1;return d.push(`[${u}][pos${f}] overlay=shortest=1:x=${m%1920}:y=${h%1080}`),p.h264FilterArguments.push("-filter_complex",d.join(" ")),p}();return l.createFFmpegMediaObject(n)}}}p.set(s.ScryptedInterface.Online,h),p.set(s.ScryptedInterface.StartStop,h),p.set(s.ScryptedInterface.Pause,m),p.set(s.ScryptedInterface.OnOff,m),p.set(s.ScryptedInterface.Brightness,u),p.set(s.ScryptedInterface.Battery,u),p.set(s.ScryptedInterface.MotionSensor,u),p.set(s.ScryptedInterface.HumiditySensor,u),p.set(s.ScryptedInterface.Thermometer,u),p.set(s.ScryptedInterface.BinarySensor,m),p.set(s.ScryptedInterface.TamperSensor,m),p.set(s.ScryptedInterface.PowerSensor,m),p.set(s.ScryptedInterface.MotionSensor,m),p.set(s.ScryptedInterface.AudioSensor,m),p.set(s.ScryptedInterface.LuminanceSensor,u),p.set(s.ScryptedInterface.UltravioletSensor,u),p.set(s.ScryptedInterface.CO2Sensor,u),p.set(s.ScryptedInterface.PM25Sensor,u),p.set(s.ScryptedInterface.PM10Sensor,u),p.set(s.ScryptedInterface.NOXSensor,u),p.set(s.ScryptedInterface.FloodSensor,m),p.set(s.ScryptedInterface.Lock,(e=>e.reduce(((e,t)=>t===s.LockState.Unlocked?t:e),s.LockState.Locked))),t.createAggregateDevice=function(e){class t extends s.ScryptedDeviceBase{constructor(){super(e),this.listeners=[],this.storageSettings=new a.StorageSettings(this,{deviceInterfaces:{title:"Selected Device Interfaces",description:"The components of other devices to combine into this device group.",type:"interface",multiple:!0,deviceFilter:`id !== ${this.id} && interface !== ${s.ScryptedInterface.Settings}`}});try{const e=this.storage.getItem("data");if(e){const{deviceInterfaces:t}=JSON.parse(e);this.storageSettings.values.deviceInterfaces=t}}catch(e){}this.storage.removeItem("data")}getSettings(){return this.storageSettings.getSettings()}putSetting(e,t){return this.storageSettings.putSetting(e,t)}makeListener(e,t){const r=p.get(e);if(!r){const r=d.getDeviceState(this.nativeId);for(const n of t){const t=n.listen({event:e,watch:!0},((e,t,n)=>{t.property&&(r[t.property]=n)}));this.listeners.push(t)}return}const n=s.ScryptedInterfaceDescriptors[e]?.properties?.[0];if(!n)return void this.console.warn("aggregating interface with no property?",e);const o=()=>{const e=t.map((e=>e[n]));this[n]=r(e)},i=()=>o();for(const r of t){const t=r.listen({event:e,watch:!0},i);this.listeners.push(t)}return o}computeInterfaces(){this.listeners.forEach((e=>e.removeListener())),this.listeners=[];try{const e=new Map;for(const t of this.storageSettings.values.deviceInterfaces){const r=t.split("#"),n=r[0],o=r[1];e.has(o)||e.set(o,[]),e.get(o).push(n)}for(const[t,r]of e.entries()){const e=r.map((e=>c.getDeviceById(e)));this.makeListener(t,e)?.()}for(const[r,n]of e.entries()){const e=n.map((e=>c.getDeviceById(e))),o=s.ScryptedInterfaceDescriptors[r];if(o)if(r!==s.ScryptedInterface.VideoCamera)for(const r of o.methods)t.prototype[r]=async function(...t){const n=[];for(const o of e)n.push(o[r](...t));return(await Promise.all(n))[0]};else{const r=f(e,this.console);for(const e of o.methods)t.prototype[e]=(...t)=>r[e](...t)}else this.console.warn(`descriptor not found for ${r}, skipping method generation`)}return[...e.keys()]}catch(e){return[]}}}return(new t).computeInterfaces(),new t}},2886:function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Automation=void 0;const sdk_1=__webpack_require__(7954),sdk_2=__importDefault(__webpack_require__(7954)),javascript_1=__webpack_require__(6130),scheduler_1=__webpack_require__(2473),scrypted_eval_1=__webpack_require__(3780),shellscript_1=__webpack_require__(7550),{systemManager}=sdk_2.default;class Automation extends sdk_1.ScryptedDeviceBase{constructor(e){super(e),this.registers=[],this.pendings=new Map,this.bind(),this.on="false"!==this.storage.getItem("enabled")}async getSettings(){return[{key:"denoiseEvents",value:"true"===this.storage.getItem("denoiseEvents"),title:"Denoise Events",description:"Denoising events will suppress events where the same event data is sent multiple times in a row. For example, if a sensor sent multiple door open events, only the first event will trigger this automation. The automation will fire again once the door sends a close event.",type:"boolean"},{key:"runToCompletion",value:"true"===this.storage.getItem("runToCompletion"),title:"Run Automations to Completion",description:"By default, automations that are executing will reset if triggered by a new event. Check this box to require an automation to run to completion before it can be triggered again. This setting can be used in conjunction with a timer to prevent an automation from running too often.",type:"boolean"},{key:"staticEvents",value:"true"===this.storage.getItem("staticEvents"),title:"Reset Automation on All Events",description:"By default, running Automation timers will be reset if the same device fires the event again. Check this box to reset Automation timers on all of the configured events.",type:"boolean"}]}async putSetting(e,t){this.storage.setItem(e,t.toString()),this.bind()}async eval(e,t){return(await(0,scrypted_eval_1.scryptedEval)(this,e,t)).value}async turnOff(){this.storage.setItem("enabled","false"),this.on=!1,this.bind()}async turnOn(){this.storage.removeItem("enabled"),this.on=!0,this.bind()}abort(e){if(e){const t=this.pendings.get(e);t&&(this.pendings.delete(e),t.aborted=!0)}else{for(const e of this.pendings.values())e.aborted=!0;this.pendings.clear()}}bind(){this.abort();for(const e of this.registers)e.removeListener();if(this.registers=[],this.on){this.log.i("automation is waiting for event trigger.");try{const data=JSON.parse(this.storage.getItem("data")),{denoiseEvents,runToCompletion,staticEvents}=this.storage,runActions=async(e,t,r)=>{const n="true"===staticEvents?void 0:e.id+":"+t.eventInterface,o=this.pendings.get(n);if(this.console.log("automation trigger key",n),"true"===runToCompletion&&o)return void this.console.info("automation already in progress, trigger ignored",n);o&&(o.aborted=!0);const i={aborted:!1};this.pendings.set(n,i);try{for(const o of data.actions){if(i.aborted)return void this.console.log("automation aborted",n);const s=o.id.split("#")[0];if("scriptable"===s){const n=new javascript_1.AutomationJavascript(this,e,t,r);await n.run(o.model["script.ts"])}else if("shell-scriptable"===s){const n=new shellscript_1.AutomationShellScript(this,e,t,r);await n.run(o.model["script.sh"])}else if("timer"===s)await new Promise((e=>setTimeout(e,1e3*o.model.seconds)));else if("update-plugins"===s){const e=await systemManager.getComponent("plugins");await e.updatePlugins()}else{const e=systemManager.getDeviceById(s);if(!e)throw new Error(`unknown action ${o.id}`);const{rpc:t}=o.model;e[t.method](...t.parameters||[])}}}finally{i.aborted||this.pendings.delete(n)}};for(const trigger of data.triggers){const parts=trigger.id.split("#"),id=parts[0],event=parts[1],{condition}=trigger;let register,listen;if(event){const e=systemManager.getDeviceById(id);listen=e}else{let e;if("scheduler"!==id)throw new Error(`unknown action ${trigger.id}`);e=new scheduler_1.Scheduler;const{rpc:t}=trigger.model;listen=e[t.method](...t.parameters||[])}register=listen.listen({denoise:"true"===denoiseEvents,event},((eventSource,eventDetails,eventData)=>{if(this.log.i(`automation triggered by ${eventSource.name}`),condition){const f=eval(`(function(eventSource, eventDetails, eventData) {\n                            return ${condition};\n                        })`);if(!f(eventSource,eventDetails,eventData))return void this.log.i("condition check false, not starting automation")}console.log("starting automation"),runActions(eventSource,eventDetails,eventData)}),this),this.registers.push(register)}}catch(e){}}else this.log.i("automation is turned off, and will not be scheduled.")}}exports.Automation=Automation},2050:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.AutomationCore=t.AutomationCoreNativeId=void 0;const s=i(r(7954)),a=r(6113),c=r(2886),l=r(3336),{deviceManager:d}=s.default;t.AutomationCoreNativeId="automationcore";class p extends s.ScryptedDeviceBase{constructor(){super(t.AutomationCoreNativeId),this.automations=new Map;for(const e of d.getNativeIds())if(e?.startsWith("automation:")){const t=new c.Automation(e);this.automations.set(e,t),this.reportAutomation(e,t.providedName)}(async()=>{const e="automation:update-plugins";let t=this.automations.get(e);t||(await this.reportAutomation(e,"Autoupdate Plugins"),t=new c.Automation(e),t.storage.setItem("data",JSON.stringify(l.updatePluginsData)),this.automations.set(e,t))})(),s.default.systemManager.listen(((e,t,r)=>{if("Storage"===t.eventInterface){if([...this.automations.values()].map((e=>e.id)).includes(e.id)){[...this.automations.values()].find((t=>t.id===e.id)).bind()}}}))}async getReadmeMarkdown(){return"Create custom smart home actions that trigger on specific events."}async getCreateDeviceSettings(){return[{key:"name",title:"Name",description:"The name or description of the new automation."}]}async createDevice(e){const{name:t}=e,r="automation:"+(0,a.randomBytes)(8).toString("hex");await this.reportAutomation(r,t?.toString());const n=new c.Automation(r);return this.automations.set(r,n),r}async reportAutomation(e,r){const n={providerNativeId:t.AutomationCoreNativeId,name:r,nativeId:e,type:s.ScryptedDeviceType.Automation,interfaces:[s.ScryptedInterface.OnOff,s.ScryptedInterface.Settings]};await d.onDeviceDiscovered(n)}async getDevice(e){return this.automations.get(e)}async releaseDevice(e,t){}}t.AutomationCore=p},6130:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AutomationJavascript=void 0;const n=r(3780);t.AutomationJavascript=class{constructor(e,t,r,n){this.automation=e,this.eventSource=t,this.eventDetails=r,this.eventData=n}async run(e){return(await(0,n.scryptedEval)(this.automation,e,{eventDetails:this.eventDetails,eventData:this.eventData,eventSource:this.eventSource})).value}}},2473:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Scheduler=void 0;t.Scheduler=class{schedule(e){const t=[e.sunday,e.monday,e.tuesday,e.wednesday,e.thursday,e.friday,e.saturday],r=new Date;r.setHours(e.hour),r.setMinutes(e.minute);const n={async setName(){},async setType(){},async setRoom(){},async setMixins(){},probe:async()=>!0,listen(e,o,i){function s(){const e=Date.now();for(let n=0;n<8;n++){const o=new Date(r.getTime()+24*n*60*60*1e3);if(o.getTime()<=e+1e4)continue;const s=o.getDay();if(t[s])return i.log.i(`event will fire at ${o.toLocaleString()}`),o}i.log.w("event will never fire")}const a=s();if(!a)return{removeListener(){}};const c=a.getTime()-Date.now();i.log.i(`event will fire in ${Math.round(c/60/1e3)} minutes.`);let l=setTimeout((()=>{s(),o(n,{eventId:void 0,eventInterface:"Scheduler",eventTime:Date.now()},a)}),c);return{removeListener(){clearTimeout(l)}}},name:"Scheduler"};return n}}},7550:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AutomationShellScript=void 0;const o=n(r(2081));t.AutomationShellScript=class{constructor(e,t,r,n){this.automation=e,this.eventSource=t,this.eventDetails=r,this.eventData=n}async run(e){const t=o.default.spawn("sh",{env:{EVENT_DATA:this.eventData?.toString()}});t.stdin.write(e),t.stdin.end(),t.stdout.on("data",(e=>this.automation.console.log(e.toString()))),t.stderr.on("data",(e=>this.automation.console.log(e.toString()))),t.on("exit",(()=>this.automation.console.log("shell exited")))}}},3823:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.FileHost=t.RequestMediaObjectHost=t.BufferHost=void 0;const a=i(r(7954)),c=s(r(6113)),l=s(r(2109)),d=s(r(1017)),{endpointManager:p}=a.default;function u(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))}class m extends a.ScryptedDeviceBase{constructor(e){super(e?"https":"http"),this.secure=e,this.hosted=new Map,this.fromMimeType="*/*",this.secure=e,this.toMimeType=e?a.ScryptedMimeTypes.LocalUrl:a.ScryptedMimeTypes.InsecureLocalUrl}async onRequest(e,t){const r=Object.assign({},e);r.url=r.url.replace(r.rootPath,"");const n=r.url.split("?")[0],o=this.hosted.get(n);if(!o)return void t.send("Not Found",{code:404});let i={headers:{"Content-Type":o.fromMimeType}};new URLSearchParams(e.url.split("?")[1]).has("attachment")&&(i.headers["Content-Disposition"]="attachment"),t.send(o.data)}async convert(e,t,r){const n=u(),o=await(this.secure?p.getPublicLocalEndpoint(this.nativeId):p.getInsecurePublicLocalEndpoint(this.nativeId)),i=l.default.getExtension(t),s=n+(i?`.${i}`:"");return this.hosted.set(`/${s}`,{data:e,fromMimeType:t,toMimeType:r}),Buffer.from(`${o}${s}`)}}t.BufferHost=m;class h extends a.ScryptedDeviceBase{constructor(){super("rmo-host"),this.secureHosted=new Map,this.insecureHosted=new Map,this.fromMimeType=a.ScryptedMimeTypes.RequestMediaObject,this.toMimeType=a.ScryptedMimeTypes.MediaObject}async onRequest(e,t){const r=Object.assign({},e);r.url=r.url.replace(r.rootPath,"");const n=r.url.split("?")[0],o=this.secureHosted.get(n)||this.insecureHosted.get(n);if(!o)return void t.send("Not Found",{code:404});let i={headers:{"Content-Type":o.fromMimeType}};new URLSearchParams(e.url.split("?")[1]).has("attachment")&&(i.headers["Content-Disposition"]="attachment");try{const e=await o.request(),r=await a.default.mediaManager.convertMediaObjectToBuffer(e,e.mimeType);t.send(r)}catch(e){throw this.secureHosted.delete(n),this.insecureHosted.delete(n),e}}async convert(e,t,r){let n;if(r===a.ScryptedMimeTypes.Url||r===a.ScryptedMimeTypes.LocalUrl)n=this.secureHosted,r=a.ScryptedMimeTypes.LocalUrl;else{if(r!==a.ScryptedMimeTypes.InsecureLocalUrl)return e();n=this.insecureHosted}const o=u(),i=await(r===a.ScryptedMimeTypes.LocalUrl?p.getPublicLocalEndpoint(this.nativeId):p.getInsecurePublicLocalEndpoint(this.nativeId));t=(await e()).mimeType;const s=l.default.getExtension(t),c=o+(s?`.${s}`:""),d=`/${c}`;n.set(d,{request:e,fromMimeType:t,toMimeType:r}),setTimeout((()=>n.delete(d)),36e5);const m=Buffer.from(`${i}${c}`);return a.default.mediaManager.createMediaObject(m,r)}}t.RequestMediaObjectHost=h;class f extends a.ScryptedDeviceBase{constructor(e){super(e?"files":"file"),this.secure=e,this.hosted=new Map,this.fromMimeType=a.ScryptedMimeTypes.SchemePrefix+"file",this.secure=e,this.toMimeType=e?a.ScryptedMimeTypes.LocalUrl:a.ScryptedMimeTypes.InsecureLocalUrl}async onRequest(e,t){const r=Object.assign({},e);r.url=r.url.replace(r.rootPath,"");const n=r.url.split("?")[0],o=this.hosted.get(n);let i;new URLSearchParams(e.url.split("?")[1]).has("attachment")&&(i={headers:{"Content-Disposition":"attachment"}}),t.sendFile(o.data,i)}async convert(e,t,r){const{pathname:n}=new URL(e),o=c.default.createHash("sha256").update(n).digest("hex"),i=await(this.secure?p.getPublicLocalEndpoint(this.nativeId):p.getInsecurePublicLocalEndpoint(this.nativeId)),s=d.default.extname(n).substring(1),a=o+(s?`.${s}`:"");return this.hosted.set(`/${a}`,{data:n}),Buffer.from(`${i}${a}`)}}t.FileHost=f},9875:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LauncherMixin=void 0;const n=r(7954),o=r(8461);class i extends n.ScryptedDeviceBase{async getReadmeMarkdown(){return"Add Scrypted Plugins or Devices to the Scrypted launch screen for quick access."}async canMixin(e,t){if(!t.includes("@scrypted/launcher-ignore")&&e!==n.ScryptedDeviceType.Builtin&&e!==n.ScryptedDeviceType.API)return[n.ScryptedInterface.LauncherApplication]}async getMixin(e,t,r){return r.applicationInfo={icon:"fa "+(0,o.typeToIcon)(r.type),href:"/endpoint/@scrypted/core/public/#/device/"+r.id},e}async releaseMixin(e,t){}}t.LauncherMixin=i},6360:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.fork=t.getAddresses=void 0;const a=r(4060),c=i(r(7954)),l=r(8202),d=s(r(7147)),p=s(r(1808)),u=s(r(2037)),m=s(r(1265)),h=r(7055),f=r(2050),y=r(9875),g=r(4093),S=r(5188),v=r(5746),{systemManager:b,deviceManager:_,endpointManager:w}=c.default,P=d.default.readFileSync("dist/index.html").toString();function T(){return Object.entries(u.default.networkInterfaces()).filter((([e])=>e.startsWith("en")||e.startsWith("eth")||e.startsWith("wlan"))).map((([e,t])=>t)).flat().map((e=>e.address)).filter((e=>e))}t.getAddresses=T;class x extends c.ScryptedDeviceBase{constructor(){super(),this.router=(0,m.default)(),this.publicRouter=(0,m.default)(),this.storageSettings=new l.StorageSettings(this,{localAddresses:{title:"Scrypted Server Address",description:"The IP address used by the Scrypted server. Set this to the wired IP address to prevent usage of a wireless address.",combobox:!0,onGet:async()=>({choices:T()}),mapGet:()=>this.localAddresses?.[0],onPut:async(e,t)=>{this.localAddresses=t?[t]:void 0;(await c.default.systemManager.getComponent("addresses")).setLocalAddresses(this.localAddresses)}}}),(async()=>{await _.onDeviceDiscovered({name:"Media Core",nativeId:"mediacore",interfaces:[c.ScryptedInterface.DeviceProvider,c.ScryptedInterface.BufferConverter,c.ScryptedInterface.HttpRequestHandler],type:c.ScryptedDeviceType.Builtin}),this.mediaCore=new g.MediaCore("mediacore")})(),(async()=>{await _.onDeviceDiscovered({name:"Scripts",nativeId:S.ScriptCoreNativeId,interfaces:[c.ScryptedInterface.DeviceProvider,c.ScryptedInterface.DeviceCreator,c.ScryptedInterface.Readme],type:c.ScryptedDeviceType.Builtin}),this.scriptCore=new S.ScriptCore})(),(async()=>{await _.onDeviceDiscovered({name:"Automations",nativeId:f.AutomationCoreNativeId,interfaces:[c.ScryptedInterface.DeviceProvider,c.ScryptedInterface.DeviceCreator,c.ScryptedInterface.Readme],type:c.ScryptedDeviceType.Builtin}),this.automationCore=new f.AutomationCore})(),_.onDeviceDiscovered({name:"Add to Launcher",nativeId:"launcher",interfaces:["@scrypted/launcher-ignore",c.ScryptedInterface.MixinProvider,c.ScryptedInterface.Readme],type:c.ScryptedDeviceType.Builtin}),(async()=>{await _.onDeviceDiscovered({name:"Device Groups",nativeId:h.AggregateCoreNativeId,interfaces:[c.ScryptedInterface.DeviceProvider,c.ScryptedInterface.DeviceCreator,c.ScryptedInterface.Readme],type:c.ScryptedDeviceType.Builtin}),this.aggregateCore=new h.AggregateCore})(),(async()=>{await _.onDeviceDiscovered({name:"Scrypted Users",nativeId:v.UsersNativeId,interfaces:[c.ScryptedInterface.DeviceProvider,c.ScryptedInterface.DeviceCreator,c.ScryptedInterface.Readme],type:c.ScryptedDeviceType.Builtin}),this.users=new v.UsersCore})()}async getSettings(){try{const e=await c.default.systemManager.getComponent("addresses");this.localAddresses=await e.getLocalAddresses()}catch(e){}return this.storageSettings.getSettings()}async putSetting(e,t){await this.storageSettings.putSetting(e,t)}async getDevice(e){return"launcher"===e?new y.LauncherMixin("launcher"):"mediacore"===e?this.mediaCore:e===S.ScriptCoreNativeId?this.scriptCore:e===f.AutomationCoreNativeId?this.automationCore:e===h.AggregateCoreNativeId?this.aggregateCore:e===v.UsersNativeId?this.users:void 0}async releaseDevice(e,t){}checkEngineIoEndpoint(e,t){const r=`/endpoint/@scrypted/core/engine.io/${t}/`;return e.url.startsWith(r)?r:null}async checkService(e,t,r){if(e.aclId)return!1;const n=this.checkEngineIoEndpoint(e,r);if(!n)return!1;const o=e.url.substr(n.length).split("/")[0],i=await b.getComponent("plugins"),{nativeId:s,pluginId:a}=await i.getDeviceInfo(o),c=await i.getRemoteServicePort(a,r),l=p.default.connect(c);return l.on("close",(()=>t.close())),l.on("data",(e=>t.send(e))),l.resume(),l.write(s?.toString()||"undefined"),t.onclose=()=>l.destroy(),t.onmessage=e=>l.write(e.data),!0}async onConnection(e,t){await this.checkService(e,t,"console")||await this.checkService(e,t,"repl")||t.close()}handlePublicFinal(e,t){const r=e.url.split("?")[0];"/index.html"===e.url?w.getPublicCloudEndpoint().then((e=>{const r=new URL(e),n=P.replace('href="/endpoint/@scrypted/core/public/manifest.json"',`href="/endpoint/@scrypted/core/public/manifest.json${r.search}"`).replace('href="/endpoint/@scrypted/core/public/img/icons/apple-touch-icon-152x152.png"',`href="/endpoint/@scrypted/core/public/img/icons/apple-touch-icon-152x152.png${r.search}"`).replace('href="/endpoint/@scrypted/core/public/img/icons/safari-pinned-tab.svg"',`href="/endpoint/@scrypted/core/public/img/icons/safari-pinned-tab.svg${r.search}"`);t.send(n,{headers:{"Content-Type":"text/html"}})})).catch((()=>{t.sendFile("dist"+r)})):t.sendFile("dist"+r)}async onRequest(e,t){const r=Object.assign({params:{}},e);r.url=r.url.replace(r.rootPath,""),"/"!=r.url&&"/?"!=r.url||(r.url="/index.html"),e.isPublicEndpoint?this.publicRouter(r,t,(()=>this.handlePublicFinal(r,t))):this.router(r,t,(()=>{t.send("Not Found",{code:404})}))}}t.default=x,t.fork=async function(){return{tsCompile:a.tsCompile}}},4093:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MediaCore=void 0;const o=n(r(1017)),i=r(7954),s=n(r(7954)),{systemManager:a,deviceManager:c,mediaManager:l,endpointManager:d}=s.default,p=r(3823),u=n(r(7310));class m extends i.ScryptedDeviceBase{constructor(e){super(e),this.fromMimeType=i.ScryptedMimeTypes.SchemePrefix+"scrypted-media",this.toMimeType=i.ScryptedMimeTypes.MediaObject,(async()=>{await c.onDevicesChanged({providerNativeId:this.nativeId,devices:[{name:"HTTP Buffer Host",nativeId:"http",interfaces:[i.ScryptedInterface.BufferConverter,i.ScryptedInterface.HttpRequestHandler],type:i.ScryptedDeviceType.API},{providerNativeId:this.nativeId,name:"HTTPS Buffer Host",nativeId:"https",interfaces:[i.ScryptedInterface.BufferConverter,i.ScryptedInterface.HttpRequestHandler],type:i.ScryptedDeviceType.API},{name:"RequestMediaObject Host",nativeId:"rmo-host",interfaces:[i.ScryptedInterface.BufferConverter,i.ScryptedInterface.HttpRequestHandler],type:i.ScryptedDeviceType.API},{name:"HTTP File Host",nativeId:"file",interfaces:[i.ScryptedInterface.BufferConverter,i.ScryptedInterface.HttpRequestHandler],type:i.ScryptedDeviceType.API},{providerNativeId:this.nativeId,name:"HTTPS File Host",nativeId:"files",interfaces:[i.ScryptedInterface.BufferConverter,i.ScryptedInterface.HttpRequestHandler],type:i.ScryptedDeviceType.API}]}),this.httpHost=new p.BufferHost(!1),this.httpsHost=new p.BufferHost(!0),this.rmoHost=new p.RequestMediaObjectHost,this.fileHost=new p.FileHost(!1),this.filesHost=new p.FileHost(!0)})()}async onRequest(e,t){if(e.isPublicEndpoint)return void t.send("",{code:404});const r=e.url.substring(e.rootPath.length),[n,o,s]=r.split("/");try{if(s!==i.ScryptedInterface.Camera)throw new Error;const e=new URLSearchParams(r.split("?")[1]),n=await a.getDeviceById(o).takePicture({picture:{width:parseInt(e.get("width"))||void 0,height:parseInt(e.get("height"))||void 0}}),c=await l.convertMediaObjectToBuffer(n,"image/jpeg");t.send(c,{headers:{"Content-Type":"image/jpeg","Cache-Control":"max-age=10"}})}catch(e){t.send("",{code:500})}}async getLocalSnapshot(e,t,r){const n=await d.getAuthenticatedPath(this.nativeId),s=u.default.resolve(o.default.join(n,e,t,`${Date.now()}.jpg`)+`${r}`,"");return l.createMediaObject(Buffer.from(s),i.ScryptedMimeTypes.LocalUrl)}async convert(e,t,r){const n=new URL(e.toString()),o=n.hostname,s=n.pathname.split("/")[1];if(s===i.ScryptedInterface.Camera){if(r===i.ScryptedMimeTypes.LocalUrl)return this.getLocalSnapshot(o,s,n.search);const e=async()=>a.getDeviceById(o).takePicture();return l.createMediaObject(e,i.ScryptedMimeTypes.RequestMediaObject)}if(s===i.ScryptedInterface.VideoCamera){const e=async()=>a.getDeviceById(o).getVideoStream();return l.createMediaObject(e,i.ScryptedMimeTypes.RequestMediaObject)}throw new Error("Unrecognized Scrypted Media interface.")}async getDevice(e){return"http"===e?this.httpHost:"https"===e?this.httpsHost:"rmo-host"===e?this.rmoHost:"file"===e?this.fileHost:"files"===e?this.filesHost:void 0}async releaseDevice(e,t){}}t.MediaCore=m},423:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.monacoEvalDefaults=void 0;const n=r(4060),o={script:r(2688).Z,util:r(2937).Z};t.monacoEvalDefaults=(0,n.createMonacoEvalDefaults)(o)},5188:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ScriptCore=t.ScriptCoreNativeId=void 0;const o=r(7954),i=r(8098),s=n(r(7954)),a=r(6113),c=n(r(7147)),l=n(r(8034)),{deviceManager:d}=s.default;t.ScriptCoreNativeId="scriptcore";class p extends o.ScryptedDeviceBase{constructor(){super(t.ScriptCoreNativeId),this.scripts=new Map;for(const e of d.getNativeIds())if(e?.startsWith("script:")){const t=new i.Script(e);this.scripts.set(e,(async()=>(t.providedInterfaces.length>2?await t.run():this.reportScript(e),t))())}}async getCreateDeviceSettings(){return[{key:"name",title:"Name",description:"The name or description of the new script."},{key:"template",title:"Template",description:"The script template to use as a starting point.",choices:c.default.readdirSync("examples").filter((e=>c.default.statSync("examples/"+e).isFile())).map((e=>l.default.basename(e)))}]}async createDevice(e){const{name:t,template:r}=e,n="script:"+(0,a.randomBytes)(8).toString("hex");await this.reportScript(n,t?.toString());const o=new i.Script(n);if(r)try{await o.saveScript({script:c.default.readFileSync("examples/"+r).toString().split("\n").filter((e=>!e.includes("SCRYPTED_FILTER_EXAMPLE_LINE"))).join("\n").trim()}),await o.run()}catch(e){}return this.scripts.set(n,Promise.resolve(o)),n}async getReadmeMarkdown(){return"Create powerful reusable scripts that can run complex actions or create custom devices."}async reportScript(e,t){const r={providerNativeId:this.nativeId,name:t,nativeId:e,type:o.ScryptedDeviceType.Program,interfaces:[o.ScryptedInterface.Scriptable,o.ScryptedInterface.Program]};return await d.onDeviceDiscovered(r)}getDevice(e){return this.scripts.get(e)}async releaseDevice(e,t){}}t.ScriptCore=p},8098:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Script=void 0;const s=i(r(7954)),a=r(3780),c=r(423),l=r(4060),d=r(5188),{log:p,deviceManager:u,systemManager:m}=s.default;class h extends s.ScryptedDeviceBase{constructor(e){super(e)}async saveScript(e){this.storage.setItem("data",JSON.stringify({"script.ts":e.script}))}async loadScripts(){try{return{"script.ts":{name:"Script",script:JSON.parse(this.storage.getItem("data"))["script.ts"],language:"typescript",monacoEvalDefaults:c.monacoEvalDefaults}}}catch(e){return{"script.ts":{name:"Script",script:"",language:"typescript",monacoEvalDefaults:c.monacoEvalDefaults}}}}async postRunScript(e){if(e){let t=e;t.toString().startsWith("class ")&&(t=new t(this.nativeId)),"function"==typeof t&&(t=await t()),this.handle(t)}const t=this.mergeHandler(this);2!==t.length&&await u.onDeviceDiscovered({providerNativeId:d.ScriptCoreNativeId,nativeId:this.nativeId,interfaces:t,type:s.ScryptedDeviceType.Unknown,name:this.providedName})}prepareScript(){this.apiProxy?.removeListeners(),Object.assign(this,(0,l.createScriptDevice)([s.ScryptedInterface.Scriptable,s.ScryptedInterface.Program]))}async run(e){this.prepareScript();try{const t=JSON.parse(this.storage.getItem("data")),{value:r,defaultExport:n,apiProxy:o}=await(0,a.scryptedEval)(this,t["script.ts"],Object.assign({device:this},e));return this.apiProxy=o,await this.postRunScript(n),r}catch(e){throw this.console.error("error loading script",e),e}}async eval(e,t){this.prepareScript();const{value:r,defaultExport:n,apiProxy:o}=await(0,a.scryptedEval)(this,e.script,Object.assign({device:this},t));return this.apiProxy=o,await this.postRunScript(n),r}mergeHandler(e){throw new Error("Method not implemented.")}handle(e){throw new Error("Method not implemented.")}handleTypes(...e){throw new Error("Method not implemented.")}}t.Script=h},3780:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scryptedEval=void 0;const n=r(4060);t.scryptedEval=async function(e,t,r){return(0,n.scryptedEval)(e,t,{},r)}},3336:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updatePluginsData=void 0,t.updatePluginsData={triggers:[{condition:null,id:"scheduler",model:{hour:"03",minute:"15",rpc:{method:"schedule",parameters:[{hour:3,minute:15,clockType:"AM",sunday:!0,monday:!0,tuesday:!0,wednesday:!0,thursday:!0,friday:!0,saturday:!0}]},clockType:"AM",sunday:!0,monday:!0,tuesday:!0,saturday:!0,wednesday:!0,thursday:!0,friday:!0}}],actions:[{id:"update-plugins",model:{}}],staticEvents:!1,denoiseEvents:!1,runToCompletion:!1,automationType:"Automation"}},5746:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.UsersCore=t.User=t.UsersNativeId=void 0;const s=i(r(7954)),a=r(6996),c=r(8202);t.UsersNativeId="users";class l extends s.ScryptedDeviceBase{constructor(){super(...arguments),this.storageSettings=new c.StorageSettings(this,{defaultAccess:{title:"Default Access",description:"Grant access to @scrypted/core and @scrypted/webrtc",defaultValue:!0,type:"boolean"},interfaces:{title:"Interfaces",description:"The interfaces this user can access. Admin users can access all interfaces on all devices. Scrypted NVR users should use NVR Permissions to grant access to the NVR and associated cameras.",type:"interface",multiple:!0,defaultValue:[]}})}async getScryptedUserAccessControl(){const e=await s.default.systemManager.getComponent("users"),t=(await e.getAllUsers()).find((e=>e.username===this.username));if(!t)throw new Error("user not found");if(t.admin)return;const r=s.default.deviceManager.getDeviceState(this.nativeId);return{devicesAccessControls:[...this.storageSettings.values.defaultAccess?[(0,a.addAccessControlsForInterface)(r.id,s.ScryptedInterface.ScryptedDevice),(0,a.addAccessControlsForInterface)(s.default.systemManager.getDeviceByName("@scrypted/webrtc").id,s.ScryptedInterface.ScryptedDevice,s.ScryptedInterface.EngineIOHandler),(0,a.addAccessControlsForInterface)(s.default.systemManager.getDeviceByName("@scrypted/core").id,s.ScryptedInterface.ScryptedDevice,s.ScryptedInterface.EngineIOHandler)]:[],...this.storageSettings.values.interfaces.map((e=>{const[t,r]=e.split("#");return(0,a.addAccessControlsForInterface)(t,s.ScryptedInterface.ScryptedDevice,r)}))]}}get username(){return this.nativeId.substring("user:".length)}async getSettings(){return[{key:"username",title:"User Name",readonly:!0,value:this.username},{key:"password",title:"Password",description:"Change the password.",type:"password"},...await this.storageSettings.getSettings()]}async putSetting(e,t){if("password"!==e)return this.storageSettings.putSetting(e,t);const r=await s.default.systemManager.getComponent("users"),n=(await r.getAllUsers()).find((e=>e.username===this.username));if(!n)return;const{username:o,admin:i}=n,a=`user:${o}`,c=await s.default.deviceManager.onDeviceDiscovered({providerNativeId:this.nativeId,name:o.toString(),nativeId:a,interfaces:[s.ScryptedInterface.ScryptedUser,s.ScryptedInterface.Settings],type:s.ScryptedDeviceType.Person});await r.addUser(n.username,t.toString(),i?void 0:c)}}t.User=l;class d extends s.ScryptedDeviceBase{constructor(){super(t.UsersNativeId),this.syncUsers()}async getDevice(e){return new l(e)}async releaseDevice(e,t){const r=t.substring("user:".length),n=await s.default.systemManager.getComponent("users");await n.removeUser(r)}async getCreateDeviceSettings(){return[{key:"username",title:"User name"},{key:"password",type:"password",title:"Password"},{key:"admin",type:"boolean",title:"Admin",description:"Grant this user administrator privileges."}]}async createDevice(e){const{username:t,password:r,admin:n}=e,o=await s.default.systemManager.getComponent("users"),i=`user:${t}`,a=await s.default.deviceManager.onDeviceDiscovered({providerNativeId:this.nativeId,name:t.toString(),nativeId:i,interfaces:[s.ScryptedInterface.ScryptedUser,s.ScryptedInterface.Settings],type:s.ScryptedDeviceType.Person});return await o.addUser(t,r,n?void 0:a),await this.syncUsers(),i}async getReadmeMarkdown(){return"Create and Manage the users that can log into Scrypted."}async syncUsers(){const e=await s.default.systemManager.getComponent("users"),t=await e.getAllUsers();await s.default.deviceManager.onDevicesChanged({providerNativeId:this.nativeId,devices:t.map((e=>({name:e.username,nativeId:`user:${e.username}`,interfaces:[s.ScryptedInterface.ScryptedUser,s.ScryptedInterface.Settings],type:s.ScryptedDeviceType.Person})))})}}t.UsersCore=d},8461:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getInterfaceFriendlyName=t.isSyncable=t.inferTypesFromInterfaces=t.hasFixedPhysicalLocation=t.getAlertIcon=t.removeAlert=t.getComponentViewPath=t.getDeviceViewPath=t.getComponentWebPath=t.getComponentName=t.typeToIcon=t.deviceIsEditable=t.findPluginDevice=void 0;const n=r(189);function o(e){switch(e){case n.ScryptedDeviceType.Camera:return"fa-video";case n.ScryptedDeviceType.Doorbell:return"fa-bell";case n.ScryptedDeviceType.Fan:return"fa-fan";case n.ScryptedDeviceType.Light:return"fa-lightbulb";case n.ScryptedDeviceType.Switch:return"fa-toggle-on";case n.ScryptedDeviceType.Outlet:return"fa-plug";case n.ScryptedDeviceType.Sensor:return"fa-exclamation-triangle";case n.ScryptedDeviceType.Scene:return"fa-sun";case n.ScryptedDeviceType.Program:return"fa-code";case n.ScryptedDeviceType.Automation:return"fa-bolt";case n.ScryptedDeviceType.Event:return"fa-exclamation";case n.ScryptedDeviceType.Vacuum:return"fa-trash";case n.ScryptedDeviceType.Notifier:return"fa-bell";case n.ScryptedDeviceType.Lock:return"fa-unlock-alt";case n.ScryptedDeviceType.Thermostat:return"fa-thermometer-three-quarters";case n.ScryptedDeviceType.PasswordControl:return"fa-key";case n.ScryptedDeviceType.Display:return"fa-tv";case n.ScryptedDeviceType.Speaker:return"fa-volume-up";case n.ScryptedDeviceType.Entry:case n.ScryptedDeviceType.Garage:return"fa-warehouse";case n.ScryptedDeviceType.API:return"fa-cloud";case n.ScryptedDeviceType.DataSource:return"fa-chart-area";case n.ScryptedDeviceType.DeviceProvider:return"fa-server";case n.ScryptedDeviceType.Unknown:return"fa-question-circle";case n.ScryptedDeviceType.Valve:case n.ScryptedDeviceType.Irrigation:return"fa-faucet";case n.ScryptedDeviceType.Person:return"fa-user";case n.ScryptedDeviceType.SecuritySystem:return"fa-shield-alt";case n.ScryptedDeviceType.Builtin:return"fa-server";case n.ScryptedDeviceType.Siren:return"fa-siren"}return"fa-toggle-on"}function i(e,t){switch(e){case n.ScryptedDeviceType.Builtin:case n.ScryptedDeviceType.Program:case n.ScryptedDeviceType.Automation:case n.ScryptedDeviceType.API:case n.ScryptedDeviceType.Scene:case n.ScryptedDeviceType.Event:case n.ScryptedDeviceType.DeviceProvider:case n.ScryptedDeviceType.DataSource:case n.ScryptedDeviceType.Person:return!1}return!0}t.findPluginDevice=function(e,t,r){for(const n of Object.keys(e.getSystemState())){const o=e.getDeviceById(n);if(o.nativeId===r&&o.pluginId===t)return o}},t.deviceIsEditable=function(e){if(e&&!e.interfaces.includes(n.ScryptedInterface.ScryptedPlugin)&&e.type!==n.ScryptedDeviceType.Builtin&&e.type!==n.ScryptedDeviceType.API)return!0},t.typeToIcon=o,t.getComponentName=function(e){switch(e){case"script":return"Plugins";case"aggregate":return"Device Groups";case"mail":return"Incoming Mail";case"webpush":return"Web Push Notifier";case"automation":return"Automations"}return"Unknown Component"},t.getComponentWebPath=function(e){return`/web/component/${e}`},t.getDeviceViewPath=function(e){return`/device/${e}`},t.getComponentViewPath=function(e){return`/component/${e}`},t.removeAlert=async function(e){const t=await this.$scrypted.systemManager.getComponent("alerts");await t.removeAlert(e),this.$store.commit("removeAlert",e._id)},t.getAlertIcon=function(e){const t="/device/";if(e.path.startsWith(t)){const r=e.path.replace(t,""),n=this.$scrypted.systemManager.getDeviceById(r);return n?o(n.type):"fa-question"}return"fa-bell"},t.hasFixedPhysicalLocation=i;const s=[];function a(e,...t){s.push({type:e,interfaces:t})}a(n.ScryptedDeviceType.Display,n.ScryptedInterface.MediaPlayer),a(n.ScryptedDeviceType.Speaker,n.ScryptedInterface.MediaPlayer),a(n.ScryptedDeviceType.Lock,n.ScryptedInterface.Lock),a(n.ScryptedDeviceType.PasswordControl,n.ScryptedInterface.PasswordStore),a(n.ScryptedDeviceType.Camera,n.ScryptedInterface.Camera),a(n.ScryptedDeviceType.Camera,n.ScryptedInterface.VideoCamera),a(n.ScryptedDeviceType.Camera,n.ScryptedInterface.RTCSignalingChannel),a(n.ScryptedDeviceType.Doorbell,n.ScryptedInterface.VideoCamera),a(n.ScryptedDeviceType.Doorbell,n.ScryptedInterface.RTCSignalingChannel),a(n.ScryptedDeviceType.Thermostat,n.ScryptedInterface.TemperatureSetting),a(n.ScryptedDeviceType.Garage,n.ScryptedInterface.Entry),a(n.ScryptedDeviceType.Entry,n.ScryptedInterface.Entry),a(n.ScryptedDeviceType.Light,n.ScryptedInterface.Brightness),a(n.ScryptedDeviceType.Outlet,n.ScryptedInterface.OnOff),a(n.ScryptedDeviceType.Switch,n.ScryptedInterface.OnOff),a(n.ScryptedDeviceType.Light,n.ScryptedInterface.OnOff),a(n.ScryptedDeviceType.Fan,n.ScryptedInterface.OnOff),a(n.ScryptedDeviceType.Sensor,n.ScryptedInterface.Thermometer),a(n.ScryptedDeviceType.DeviceProvider,n.ScryptedInterface.DeviceProvider),t.inferTypesFromInterfaces=function(e,t,r){if(t===n.ScryptedDeviceType.Unknown)return Object.values(n.ScryptedDeviceType).filter((e=>e!==n.ScryptedDeviceType.Builtin));const o=new Set;e&&o.add(e),t&&o.add(t),s.filter((e=>function(e,t){for(const r of t)if(!e.includes(r))return!1;return!0}(r,e.interfaces))).forEach((e=>o.add(e.type)));for(const e of r)-1!==e.indexOf("Sensor")&&o.add(n.ScryptedDeviceType.Sensor);return[...o]},t.isSyncable=function(e){return!!i(e)||e===n.ScryptedDeviceType.Scene};const c=new Map;c.set(n.ScryptedInterface.MixinProvider,"Compatible Things"),c.set(n.ScryptedInterface.DeviceProvider,"Providing Things"),c.set(n.ScryptedInterface.VideoClips,"Video Clips"),c.set(n.ScryptedInterface.Notifier,"Send Notification"),c.set(n.ScryptedInterface.PasswordStore,"Passwords"),c.set(n.ScryptedInterface.Brightness,"Adjust Brightness"),t.getInterfaceFriendlyName=function(e){return c.get(e)||e.toString()}},1337:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventRegistry=t.getMixinEventName=t.EventListenerRegisterImpl=void 0;const n=r(4554);class o{constructor(e){this.removeListener=e}}function i(e){let{event:t,mixinId:r}=e||{};return t||"string"!=typeof e||(t=e),t||(t=void 0),r?`${t}-mixin-${r}`:t}t.EventListenerRegisterImpl=o,t.getMixinEventName=i;const s=new Set([n.ScryptedInterface.ScryptedDevice,"Logger","Storage"]);t.EventRegistry=class{constructor(){this.systemListeners=new Set,this.listeners={}}listen(e){const t=this.systemListeners;return t.add(e),new o((()=>{t.delete(e),e=void 0}))}listenDevice(e,t,r){const n=`${e}#${i(t)}`;let s=this.listeners[n];return s||(s=new Set,this.listeners[n]=s),s.add(r),new o((()=>{s.delete(r),r=void 0}))}notify(e,t,r,n,o,i){const{changed:s,mixinId:a}=i||{};if(n&&!s)return!1;const c={eventId:void 0,eventInterface:r,eventTime:t,property:n,mixinId:a};return this.notifyEventDetails(e,c,o)}notifyEventDetails(e,t,r,n){if(t.eventId||=Math.random().toString(36).substring(2),n||=t.eventInterface,t.property&&!t.mixinId||s.has(n))for(const n of this.systemListeners)n(e,t,r);const o=this.listeners[`${e}#${n}`];if(o)for(const e of o)e(t,r);const i=this.listeners[`${e}#undefined`];if(i)for(const e of i)e(t,r);return!0}}},1098:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isValidInterfaceProperty=t.isValidInterfaceMethod=t.getInterfaceProperties=t.getInterfaceMethods=t.propertyInterfaces=t.getPropertyInterfaces=t.allInterfaceProperties=void 0;const n=r(4554);function o(e){const t={};for(const r of Object.values(e))for(const e of r.properties)t[e]=r.name;return t}function i(e,t){return Object.values(e).filter((e=>t.has(e.name))).map((e=>e.methods)).flat()}function s(e,t){return Object.values(e).filter((e=>t.has(e.name))).map((e=>e.properties)).flat()}t.allInterfaceProperties=[].concat(...Object.values(n.ScryptedInterfaceDescriptors).map((e=>e.properties))),t.getPropertyInterfaces=o,t.propertyInterfaces=o(n.ScryptedInterfaceDescriptors),t.getInterfaceMethods=i,t.getInterfaceProperties=s,t.isValidInterfaceMethod=function(e,t,r){return i(e,t).includes(r)||e[n.ScryptedInterface.ScryptedDevice].methods.includes(r)},t.isValidInterfaceProperty=function(e,t,r){return s(e,new Set(t)).includes(r)}},8955:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PluginAPIProxy=t.PluginAPIManagedListeners=void 0;class r{removeListener(){this.listeners.delete(this),this.listener.removeListener()}constructor(e,t){this.listener=e,this.listeners=t,this.__proxy_oneway_methods=["removeListener"],this.listeners.add(this)}}class n{constructor(){this.listeners=new Set}manageListener(e){return new r(e,this.listeners)}removeListeners(){for(const e of[...this.listeners])e.removeListener();this.listeners.clear()}}t.PluginAPIManagedListeners=n;t.PluginAPIProxy=class extends n{constructor(e,t){super(),this.api=e,this.mediaManager=t}setScryptedInterfaceDescriptors(e,t){return this.acl?.deny(),this.api.setScryptedInterfaceDescriptors(e,t)}setState(e,t,r){return this.acl?.deny(),this.api.setState(e,t,r)}onDevicesChanged(e){return this.acl?.deny(),this.api.onDevicesChanged(e)}onDeviceDiscovered(e){return this.acl?.deny(),this.api.onDeviceDiscovered(e)}onDeviceEvent(e,t,r){return this.acl?.deny(),this.api.onDeviceEvent(e,t,r)}onMixinEvent(e,t,r,n){return this.acl?.deny(),this.api.onMixinEvent(e,t,r,n)}onDeviceRemoved(e){return this.acl?.deny(),this.api.onDeviceRemoved(e)}setStorage(e,t){return this.acl?.deny(),this.api.setStorage(e,t)}getDeviceById(e){if(!this.acl?.shouldRejectDevice(e))return this.api.getDeviceById(e)}setDeviceProperty(e,t,r){return this.acl?.deny(),this.api.setDeviceProperty(e,t,r)}removeDevice(e){return this.acl?.deny(),this.api.removeDevice(e)}async listen(e){return this.acl?this.manageListener(await this.api.listen(((t,r,n)=>{this.acl.shouldRejectEvent(t,r)||e(t,r,n)}))):this.manageListener(await this.api.listen(e))}async listenDevice(e,t,r){return this.acl?this.manageListener(await this.api.listenDevice(e,t,((t,n)=>{this.acl.shouldRejectEvent(e,t)||r(t,n)}))):this.manageListener(await this.api.listenDevice(e,t,r))}getLogger(e){return this.acl?.deny(),this.api.getLogger(e)}getComponent(e){return this.acl?.deny(),this.api.getComponent(e)}async getMediaManager(){return this.mediaManager}async requestRestart(){return this.acl?.deny(),this.api.requestRestart()}}},8819:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SystemManagerImpl=void 0;const n=r(4554),o=r(1337),i=r(7169),s=r(1098);class a{constructor(e,t){this.id=e,this.systemManager=t}toPrimitive(){return`ScryptedDevice-${this.id}`}ownKeys(e){const t=new Set(this.systemManager.state[this.id].interfaces.value);return[...(0,s.getInterfaceMethods)(this.systemManager.descriptors||n.ScryptedInterfaceDescriptors,t),...(0,s.getInterfaceProperties)(this.systemManager.descriptors||n.ScryptedInterfaceDescriptors,t)]}getOwnPropertyDescriptor(e,t){const r=new Set(this.systemManager.state[this.id].interfaces.value),o=(0,s.getInterfaceMethods)(this.systemManager.descriptors||n.ScryptedInterfaceDescriptors,r),i=t.toString();if(o.includes(i))return{configurable:!0};return(0,s.getInterfaceProperties)(this.systemManager.descriptors||n.ScryptedInterfaceDescriptors,r).includes(i)?{configurable:!0,value:this.systemManager.state[this.id][i]?.value}:void 0}deleteProperty(e,t){const r=t.toString();return!Object.keys(n.ScryptedInterfaceProperty).includes(r)&&(this.customProperties||=new Map,this.customProperties.set(t,void 0),!0)}set(e,t,r,o){const i=t.toString();return!Object.keys(n.ScryptedInterfaceProperty).includes(i)&&(this.customProperties||=new Map,this.customProperties.set(t,r),!0)}get(e,t,r){if("id"===t)return this.id;if(this.customProperties?.has(t))return this.customProperties.get(t);const o=i.RpcPeer.handleFunctionInvocations(this,e,t,r);if(o)return o;const a=new Set(this.systemManager.state[this.id].interfaces?.value||[]),c=t.toString();return this.systemManager.propertyInterfaces?.[c]||s.propertyInterfaces[c]?this.systemManager.state[this.id]?.[t]?.value:(0,s.isValidInterfaceMethod)(this.systemManager.descriptors||n.ScryptedInterfaceDescriptors,a,c)?n.ScryptedInterfaceDescriptors[n.ScryptedInterface.ScryptedDevice].methods.includes(c)?this[t].bind(this):new Proxy((()=>t),this):void 0}ensureDevice(){return this.device||(this.device=this.systemManager.api.getDeviceById(this.id)),this.device}async apply(e,t,r){const n=e();return(await this.ensureDevice())[n](...r)}listen(e,t){return this.systemManager.listenDevice(this.id,e,t)}async setName(e){return this.systemManager.api.setDeviceProperty(this.id,n.ScryptedInterfaceProperty.name,e)}async setRoom(e){return this.systemManager.api.setDeviceProperty(this.id,n.ScryptedInterfaceProperty.room,e)}async setType(e){return this.systemManager.api.setDeviceProperty(this.id,n.ScryptedInterfaceProperty.type,e)}async setMixins(e){const t=await this.systemManager.getComponent("plugins");await t.setMixins(this.id,e)}async probe(){return this.apply((()=>"probe"),void 0,[])}}class c{constructor(e){this.promise=e}async removeListener(){try{const e=await this.promise;this.promise=void 0,e?.removeListener()}catch(e){console.error("removeListener",e)}}}function l(e){const t=e,r=t[i.RpcPeer.PROPERTY_PROXY_ONEWAY_METHODS]||[];return r.includes(null)||r.push(null),t[i.RpcPeer.PROPERTY_PROXY_ONEWAY_METHODS]=r,e}t.SystemManagerImpl=class{constructor(){this.deviceProxies={},this.events=new o.EventRegistry}getDeviceState(e){return this.state[e]}getSystemState(){return this.state}getDeviceById(e){if(!this.state[e])return;let t=this.deviceProxies[e];return t||(t=this.deviceProxies[e]=function(e,t){const r=new a(e,t);return new Proxy(r,r)}(e,this)),t}getDeviceByName(e){for(const t of Object.keys(this.state)){const r=this.state[t];if(r.interfaces?.value?.includes(n.ScryptedInterface.ScryptedPlugin)&&r.pluginId?.value===e)return this.getDeviceById(t);if(r.name.value===e)return this.getDeviceById(t)}}listen(e){return this.events.listen(l(((t,r,n)=>e(this.getDeviceById(t),r,n))))}listenDevice(e,t,r){let{watch:n}=t||{};return n?this.events.listenDevice(e,t,((t,n)=>r(this.getDeviceById(e),t,n))):new c(this.api.listenDevice(e,t,l(((t,n)=>r(this.getDeviceById(e),t,n)))))}async removeDevice(e){return this.api.removeDevice(e)}getComponent(e){return this.api.getComponent(e)}setScryptedInterfaceDescriptors(e,t){return this.typesVersion=e,this.descriptors=t,this.propertyInterfaces=(0,s.getPropertyInterfaces)(t),this.api.setScryptedInterfaceDescriptors(e,t)}}},7169:(module,exports,__webpack_require__)=>{"use strict";function startPeriodicGarbageCollection(){let e;global.gc||console.warn("rpc peer garbage collection not available: global.gc is not exposed.");try{e=global}catch(e){}let t=0;return setInterval((()=>{const r=Date.now(),n=r-t,o=RpcPeer.remotesCreated;RpcPeer.remotesCreated=0;const i=RpcPeer.remotesCollected;RpcPeer.remotesCollected=0,(o||i||n>3e5)&&(t=r,e?.gc?.())}),1e4)}module=__webpack_require__.nmd(module),Object.defineProperty(exports,"__esModule",{value:!0}),exports.getEvalSource=exports.RpcPeer=exports.RPCResultError=exports.startPeriodicGarbageCollection=void 0,exports.startPeriodicGarbageCollection=startPeriodicGarbageCollection;class RpcProxy{constructor(e,t,r,n,o){this.peer=e,this.entry=t,this.constructorName=r,this.proxyProps=n,this.proxyOneWayMethods=o}toPrimitive(){const e=this.peer;return`RpcProxy-${e.selfName}:${e.peerName}: ${this.constructorName}`}get(e,t,r){if(t===Symbol.asyncIterator){if(!this.proxyProps?.[Symbol.asyncIterator.toString()])return;return()=>new Proxy((()=>{}),this)}if(RpcProxy.iteratorMethods.has(t?.toString())){const e=this.proxyProps?.[Symbol.asyncIterator.toString()]?.[t];if(e)return new Proxy((()=>e),this)}if(t===RpcPeer.PROPERTY_PROXY_ID)return this.entry.id;if("__proxy_constructor"===t)return this.constructorName;if("__proxy_peer"===t)return this.peer;if(t===RpcPeer.PROPERTY_PROXY_PROPERTIES)return this.proxyProps;if(t===RpcPeer.PROPERTY_PROXY_ONEWAY_METHODS)return this.proxyOneWayMethods;if(t===RpcPeer.PROPERTY_JSON_DISABLE_SERIALIZATION||t===RpcPeer.PROPERTY_JSON_COPY_SERIALIZE_CHILDREN)return;if("then"===t)return;if("constructor"===t)return;if(void 0!==this.proxyProps?.[t])return this.proxyProps?.[t];const n=RpcPeer.handleFunctionInvocations(this,e,t,r);return n||new Proxy((()=>t),this)}set(e,t,r,n){return t===RpcPeer.finalizerIdSymbol?this.entry.finalizerId=r:(this.proxyProps||={},this.proxyProps[t]=r),!0}apply(e,t,r){const n=e()||null,o=this.proxyOneWayMethods?.includes?.(n);if(Object.isFrozen(this.peer.pendingResults))return o?Promise.resolve():Promise.reject(new RPCResultError(this.peer,"RpcPeer has been killed (apply) "+e()));const i=[],s={};for(const e of r||[])i.push(this.peer.serialize(e,s));const a={type:"apply",id:void 0,proxyId:this.entry.id,args:i,method:n};if(o)return a.oneway=!0,null===n&&delete a.method,this.peer.send(a,void 0,s),Promise.resolve();const c=this.peer.createPendingResult(((e,t)=>{a.id=e,this.peer.send(a,t,s)})),l=this.proxyProps?.[Symbol.asyncIterator.toString()];return!l||n!==l.next&&n!==l.return?c:c.then((e=>n===l.return?{done:!0,value:void 0}:{value:e,done:!1})).catch((e=>{if("StopAsyncIteration"===e.name)return{done:!0,value:void 0};throw e}))}}RpcProxy.iteratorMethods=new Set(["next","throw","return"]);class RPCResultError extends Error{constructor(e,t,r,n){super(`${t}\n${e.selfName}:${e.peerName}`),this.cause=r,n?.name&&(this.name=n?.name),n?.stack&&(this.stack=`${r?.stack||n.stack}\n${e.peerName}:${e.selfName}`)}}function compileFunction(code,params,options){params=params||[];const f=`(function(${params.join(",")}) {;${code};})`;return eval(f)}exports.RPCResultError=RPCResultError;try{const e=FinalizationRegistry}catch(e){window.WeakRef=class{constructor(e){this.target=e}deref(){return this.target}},window.FinalizationRegistry=class{register(){}}}class RpcPeer{static isRpcProxy(e){return!!e?.[RpcPeer.PROPERTY_PROXY_ID]}static getDefaultTransportSafeArgumentTypes(){const e=new Set;return e.add(Number.name),e.add(String.name),e.add(Object.name),e.add(Boolean.name),e.add(Array.name),e}static handleFunctionInvocations(e,t,r,n){return"apply"===r?(r,n)=>e.apply(t,e,n):"call"===r?(r,...n)=>e.apply(t,e,n):"toString"===r||r===Symbol.toPrimitive?(t,...r)=>e.toPrimitive():void 0}static getIteratorNext(e){if(!e[Symbol.asyncIterator])return;const t=e[this.PROPERTY_PROXY_PROPERTIES]?.[Symbol.asyncIterator.toString()];return t?.next||"next"}static prepareProxyProperties(e){let t=e?.[RpcPeer.PROPERTY_PROXY_PROPERTIES];return e[Symbol.asyncIterator]?(t||={},t[Symbol.asyncIterator.toString()]||(t[Symbol.asyncIterator.toString()]={next:"next",throw:"throw",return:"return"}),t):t}constructor(e,t,r){this.selfName=e,this.peerName=t,this.send=r,this.idCounter=1,this.params={},this.pendingResults={},this.proxyCounter=1,this.localProxied=new Map,this.localProxyMap=new Map,this.remoteWeakProxies={},this.finalizers=new FinalizationRegistry((e=>this.finalize(e))),this.nameDeserializerMap=new Map,this.onProxyTypeSerialization=new Map,this.constructorSerializerMap=new Map,this.transportSafeArgumentTypes=RpcPeer.getDefaultTransportSafeArgumentTypes(),this.tags={},this.killed=new Promise(((e,t)=>{this.killedDeferred={resolve:e,reject:t}})).catch((e=>e.message||"Unknown Error"))}static isTransportSafe(e){return!e||!e[RpcPeer.PROPERTY_JSON_DISABLE_SERIALIZATION]&&this.getDefaultTransportSafeArgumentTypes().has(e.constructor?.name)}isTransportSafe(e){return!e||!e[RpcPeer.PROPERTY_JSON_DISABLE_SERIALIZATION]&&this.transportSafeArgumentTypes.has(e.constructor?.name)}createPendingResult(e){if(Object.isFrozen(this.pendingResults))return Promise.reject(new RPCResultError(this,"RpcPeer has been killed (createPendingResult)"));const t=new Promise(((t,r)=>{const n=(this.idCounter++).toString();this.pendingResults[n]={resolve:t,reject:r},e(n,(e=>r(new RPCResultError(this,e.message,e))))}));return t.catch((()=>{})),t}kill(e){if(Object.isFrozen(this.pendingResults))return;const t=new RPCResultError(this,e||"peer was killed");this.killedDeferred.reject(t);for(const e of Object.values(this.pendingResults))e.reject(t);this.pendingResults=Object.freeze({}),this.params=Object.freeze({}),this.remoteWeakProxies=Object.freeze({}),this.localProxyMap.clear(),this.localProxied.clear()}addSerializer(e,t,r){this.nameDeserializerMap.set(t,r),this.constructorSerializerMap.set(e,t)}finalize(e){RpcPeer.remotesCollected++,delete this.remoteWeakProxies[e.id];const t={__local_proxy_id:e.id,__local_proxy_finalizer_id:e.finalizerId,type:"finalize"};this.send(t)}async getParam(e){return this.createPendingResult(((t,r)=>{const n={id:t,type:"param",param:e};this.send(n,r)}))}evalLocal(e,t,r){const n=Object.assign({},this.params,r);let o;try{o=module.require("vm").compileFunction}catch(e){o=compileFunction}return o(e,Object.keys(n),{filename:t})(...Object.values(n))}createErrorResult(e,t){e.result=this.serializeError(t),e.throw=!0,e.message=t.message||"no message",e.stack=t.stack||"no stack"}deserialize(e,t){if(!e)return e;if(e[RpcPeer.PROPERTY_JSON_COPY_SERIALIZE_CHILDREN]){const r={};for(const[n,o]of Object.entries(e))r[n]=this.deserialize(o,t);return r}const{__remote_proxy_id:r,__remote_proxy_finalizer_id:n,__local_proxy_id:o,__remote_constructor_name:i,__serialized_value:s,__remote_proxy_props:a,__remote_proxy_oneway_methods:c}=e;if(i===RpcPeer.RPC_RESULT_ERROR_NAME)return this.deserializeError(s);if(r){let e=this.remoteWeakProxies[r]?.deref();e||(e=this.newProxy(r,i,a,c)),e[RpcPeer.finalizerIdSymbol]=n;const o=this.nameDeserializerMap.get(i);return o?o.deserialize(e,t):e}if(o){const e=this.localProxyMap.get(o);if(!e)throw new RPCResultError(this,`invalid local proxy id ${o}`);return e}const l=this.nameDeserializerMap.get(i);return l?l.deserialize(s,t):e}deserializeError(e){const{name:t,stack:r,message:n}=e;return new RPCResultError(this,n,void 0,{name:t,stack:r})}serializeError(e){const t={stack:e.stack||"[no stack]",name:e.name||"[no name]",message:e.message||"[no message]"};return{__remote_constructor_name:RpcPeer.RPC_RESULT_ERROR_NAME,__remote_proxy_id:void 0,__remote_proxy_finalizer_id:void 0,__remote_proxy_oneway_methods:void 0,__remote_proxy_props:void 0,__serialized_value:t}}serialize(e,t){if(!0===e?.[RpcPeer.PROPERTY_JSON_COPY_SERIALIZE_CHILDREN]){const r={};for(const[n,o]of Object.entries(e))r[n]=this.serialize(o,t);return r}if(this.isTransportSafe(e))return e;let r=e.__proxy_constructor||e.constructor?.name?.toString();if(e instanceof Error)return this.serializeError(e);const n=this.constructorSerializerMap.get(e.constructor);if(n){r=n;const o=this.nameDeserializerMap.get(n);if(!o)throw new Error("serializer not found for "+n);const i=o.serialize(e,t);return{__remote_proxy_id:void 0,__remote_proxy_finalizer_id:void 0,__remote_constructor_name:r,__remote_proxy_props:RpcPeer.prepareProxyProperties(e),__remote_proxy_oneway_methods:e?.[RpcPeer.PROPERTY_PROXY_ONEWAY_METHODS],__serialized_value:i}}let o=this.localProxied.get(e);if(o){const t=(this.proxyCounter++).toString();o.finalizerId=t;return{__remote_proxy_id:o.id,__remote_proxy_finalizer_id:t,__remote_constructor_name:r,__remote_proxy_props:RpcPeer.prepareProxyProperties(e),__remote_proxy_oneway_methods:e?.[RpcPeer.PROPERTY_PROXY_ONEWAY_METHODS]}}const{__proxy_id:i,__proxy_peer:s}=e;if(i&&s===this){return{__local_proxy_id:i}}this.onProxyTypeSerialization.get(r)?.(e);const a=(this.proxyCounter++).toString();o={id:a,finalizerId:a},this.localProxied.set(e,o),this.localProxyMap.set(a,e);return{__remote_proxy_id:a,__remote_proxy_finalizer_id:a,__remote_constructor_name:r,__remote_proxy_props:this.onProxySerialization?this.onProxySerialization(e,a):RpcPeer.prepareProxyProperties(e),__remote_proxy_oneway_methods:e?.[RpcPeer.PROPERTY_PROXY_ONEWAY_METHODS]}}newProxy(e,t,r,n){RpcPeer.remotesCreated++;const o={id:e,finalizerId:void 0},i=new RpcProxy(this,o,t,r,n),s=new Proxy("Function"===t||"AsyncFunction"===t?function(){}:i,i),a=new WeakRef(s);return this.remoteWeakProxies[e]=a,this.finalizers.register(i,o),s}handleMessage(e,t){try{RpcPeer.activeRpcPeer=this,this.handleMessageInternal(e,t)}finally{RpcPeer.activeRpcPeer=void 0}}async handleMessageInternal(e,t){if(!Object.isFrozen(this.pendingResults))try{switch(e.type){case"param":{const t=e,r={};let n;try{n={type:"result",id:t.id,result:this.serialize(this.params[t.param],r)}}catch(e){this.createErrorResult(n,e)}this.send(n,void 0,r);break}case"apply":{const r=e,n={type:"result",id:r.id||""},o={};try{const e=this.localProxyMap.get(r.proxyId);if(!e)throw new Error(`proxy id ${r.proxyId} not found`);const i=[];for(const e of r.args||[])i.push(this.deserialize(e,t));let s;if(r.method){if(!e[r.method])throw new Error(`target ${e?.constructor?.name} does not have method ${r.method}`);if(s=await e[r.method](...i),RpcPeer.getIteratorNext(e)===r.method){if(s.done){throw{name:"StopAsyncIteration",message:void 0}}s=s.value}}else s=await e(...i);n.result=this.serialize(s,o)}catch(e){this.createErrorResult(n,e)}r.oneway||this.send(n,void 0,o);break}case"result":{const r=e,n=this.pendingResults[r.id];if(delete this.pendingResults[r.id],!n)throw new Error(`unknown result ${r.id}`);if((r.message||r.stack)&&!r.throw){const e=new RPCResultError(this,r.message||"no message",void 0,{name:r.result,stack:r.stack});return void n.reject(e)}const o=this.deserialize(r.result,t);r.throw?n.reject(o):n.resolve(o);break}case"finalize":{const t=e,r=this.localProxyMap.get(t.__local_proxy_id);if(r){const e=this.localProxied.get(r);if(t.__local_proxy_finalizer_id&&t.__local_proxy_finalizer_id!==e?.finalizerId)break;this.localProxyMap.delete(t.__local_proxy_id),this.localProxied.delete(r)}break}default:throw new Error(`unknown rpc message type ${e.type}`)}}catch(e){return void console.error("unhandled rpc error",this.peerName,e)}}}function getEvalSource(){return`\n    (() => {\n        ${RpcProxy}\n\n        ${RpcPeer}\n\n        ${startPeriodicGarbageCollection}\n    \n        return {\n            startPeriodicGarbageCollection,\n            RpcPeer,\n            RpcProxy,\n        };\n    })();\n    `}exports.RpcPeer=RpcPeer,RpcPeer.finalizerIdSymbol=Symbol("rpcFinalizerId"),RpcPeer.remotesCollected=0,RpcPeer.remotesCreated=0,RpcPeer.RPC_RESULT_ERROR_NAME="RPCResultError",RpcPeer.PROPERTY_PROXY_ID="__proxy_id",RpcPeer.PROPERTY_PROXY_ONEWAY_METHODS="__proxy_oneway_methods",RpcPeer.PROPERTY_JSON_DISABLE_SERIALIZATION="__json_disable_serialization",RpcPeer.PROPERTY_PROXY_PROPERTIES="__proxy_props",RpcPeer.PROPERTY_JSON_COPY_SERIALIZE_CHILDREN="__json_copy_serialize_children",RpcPeer.PROBED_PROPERTIES=new Set(["then","constructor","__proxy_id","__proxy_constructor","__proxy_peer",RpcPeer.PROPERTY_PROXY_ONEWAY_METHODS,RpcPeer.PROPERTY_JSON_DISABLE_SERIALIZATION,RpcPeer.PROPERTY_PROXY_PROPERTIES,RpcPeer.PROPERTY_JSON_COPY_SERIALIZE_CHILDREN]),exports.getEvalSource=getEvalSource},1158:e=>{const t=require("realfs");e.exports=t},1605:e=>{const t=require("typescript");e.exports=t},189:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScryptedMimeTypes=t.ScryptedInterface=t.MediaPlayerState=t.SecuritySystemObstruction=t.SecuritySystemMode=t.AirQuality=t.ChargeState=t.LockState=t.PanTiltZoomMovement=t.ThermostatMode=t.TemperatureUnit=t.FanMode=t.HumidityMode=t.ScryptedDeviceType=t.ScryptedInterfaceDescriptors=t.ScryptedInterfaceMethod=t.ScryptedInterfaceProperty=t.DeviceBase=t.TYPES_VERSION=void 0,t.TYPES_VERSION="0.2.79";t.DeviceBase=class{},function(e){e.id="id",e.info="info",e.interfaces="interfaces",e.mixins="mixins",e.name="name",e.nativeId="nativeId",e.pluginId="pluginId",e.providedInterfaces="providedInterfaces",e.providedName="providedName",e.providedRoom="providedRoom",e.providedType="providedType",e.providerId="providerId",e.room="room",e.type="type",e.on="on",e.brightness="brightness",e.colorTemperature="colorTemperature",e.rgb="rgb",e.hsv="hsv",e.running="running",e.paused="paused",e.docked="docked",e.temperatureSetting="temperatureSetting",e.thermostatActiveMode="thermostatActiveMode",e.thermostatAvailableModes="thermostatAvailableModes",e.thermostatMode="thermostatMode",e.thermostatSetpoint="thermostatSetpoint",e.thermostatSetpointHigh="thermostatSetpointHigh",e.thermostatSetpointLow="thermostatSetpointLow",e.temperature="temperature",e.temperatureUnit="temperatureUnit",e.humidity="humidity",e.ptzCapabilities="ptzCapabilities",e.lockState="lockState",e.entryOpen="entryOpen",e.batteryLevel="batteryLevel",e.chargeState="chargeState",e.online="online",e.fromMimeType="fromMimeType",e.toMimeType="toMimeType",e.binaryState="binaryState",e.tampered="tampered",e.powerDetected="powerDetected",e.audioDetected="audioDetected",e.motionDetected="motionDetected",e.ambientLight="ambientLight",e.occupied="occupied",e.flooded="flooded",e.ultraviolet="ultraviolet",e.luminance="luminance",e.position="position",e.securitySystemState="securitySystemState",e.pm10Density="pm10Density",e.pm25Density="pm25Density",e.vocDensity="vocDensity",e.noxDensity="noxDensity",e.co2ppm="co2ppm",e.airQuality="airQuality",e.humiditySetting="humiditySetting",e.fan="fan",e.applicationInfo="applicationInfo"}(t.ScryptedInterfaceProperty||(t.ScryptedInterfaceProperty={})),function(e){e.listen="listen",e.probe="probe",e.setMixins="setMixins",e.setName="setName",e.setRoom="setRoom",e.setType="setType",e.getPluginJson="getPluginJson",e.turnOff="turnOff",e.turnOn="turnOn",e.setBrightness="setBrightness",e.getTemperatureMaxK="getTemperatureMaxK",e.getTemperatureMinK="getTemperatureMinK",e.setColorTemperature="setColorTemperature",e.setRgb="setRgb",e.setHsv="setHsv",e.sendNotification="sendNotification",e.start="start",e.stop="stop",e.pause="pause",e.resume="resume",e.dock="dock",e.setTemperature="setTemperature",e.setThermostatMode="setThermostatMode",e.setThermostatSetpoint="setThermostatSetpoint",e.setThermostatSetpointHigh="setThermostatSetpointHigh",e.setThermostatSetpointLow="setThermostatSetpointLow",e.setTemperatureUnit="setTemperatureUnit",e.getPictureOptions="getPictureOptions",e.takePicture="takePicture",e.getAudioStream="getAudioStream",e.startDisplay="startDisplay",e.stopDisplay="stopDisplay",e.getVideoStream="getVideoStream",e.getVideoStreamOptions="getVideoStreamOptions",e.getRecordingStream="getRecordingStream",e.getRecordingStreamCurrentTime="getRecordingStreamCurrentTime",e.getRecordingStreamOptions="getRecordingStreamOptions",e.getRecordingStreamThumbnail="getRecordingStreamThumbnail",e.ptzCommand="ptzCommand",e.getRecordedEvents="getRecordedEvents",e.getVideoClip="getVideoClip",e.getVideoClipThumbnail="getVideoClipThumbnail",e.getVideoClips="getVideoClips",e.removeVideoClips="removeVideoClips",e.setVideoStreamOptions="setVideoStreamOptions",e.startIntercom="startIntercom",e.stopIntercom="stopIntercom",e.lock="lock",e.unlock="unlock",e.addPassword="addPassword",e.getPasswords="getPasswords",e.removePassword="removePassword",e.activate="activate",e.deactivate="deactivate",e.isReversible="isReversible",e.closeEntry="closeEntry",e.openEntry="openEntry",e.getDevice="getDevice",e.releaseDevice="releaseDevice",e.adoptDevice="adoptDevice",e.discoverDevices="discoverDevices",e.createDevice="createDevice",e.getCreateDeviceSettings="getCreateDeviceSettings",e.getRefreshFrequency="getRefreshFrequency",e.refresh="refresh",e.getMediaStatus="getMediaStatus",e.load="load",e.seek="seek",e.skipNext="skipNext",e.skipPrevious="skipPrevious",e.convert="convert",e.getSettings="getSettings",e.putSetting="putSetting",e.armSecuritySystem="armSecuritySystem",e.disarmSecuritySystem="disarmSecuritySystem",e.getReadmeMarkdown="getReadmeMarkdown",e.getOauthUrl="getOauthUrl",e.onOauthCallback="onOauthCallback",e.canMixin="canMixin",e.getMixin="getMixin",e.releaseMixin="releaseMixin",e.onRequest="onRequest",e.onConnection="onConnection",e.onPush="onPush",e.run="run",e.eval="eval",e.loadScripts="loadScripts",e.saveScript="saveScript",e.trackObjects="trackObjects",e.getDetectionInput="getDetectionInput",e.getObjectTypes="getObjectTypes",e.detectObjects="detectObjects",e.generateObjectDetections="generateObjectDetections",e.getDetectionModel="getDetectionModel",e.setHumidity="setHumidity",e.setFan="setFan",e.startRTCSignalingSession="startRTCSignalingSession",e.createRTCSignalingSession="createRTCSignalingSession",e.getScryptedUserAccessControl="getScryptedUserAccessControl",e.generateVideoFrames="generateVideoFrames"}(t.ScryptedInterfaceMethod||(t.ScryptedInterfaceMethod={})),t.ScryptedInterfaceDescriptors={ScryptedDevice:{name:"ScryptedDevice",methods:["listen","probe","setMixins","setName","setRoom","setType"],properties:["id","info","interfaces","mixins","name","nativeId","pluginId","providedInterfaces","providedName","providedRoom","providedType","providerId","room","type"]},ScryptedPlugin:{name:"ScryptedPlugin",methods:["getPluginJson"],properties:[]},OnOff:{name:"OnOff",methods:["turnOff","turnOn"],properties:["on"]},Brightness:{name:"Brightness",methods:["setBrightness"],properties:["brightness"]},ColorSettingTemperature:{name:"ColorSettingTemperature",methods:["getTemperatureMaxK","getTemperatureMinK","setColorTemperature"],properties:["colorTemperature"]},ColorSettingRgb:{name:"ColorSettingRgb",methods:["setRgb"],properties:["rgb"]},ColorSettingHsv:{name:"ColorSettingHsv",methods:["setHsv"],properties:["hsv"]},Notifier:{name:"Notifier",methods:["sendNotification"],properties:[]},StartStop:{name:"StartStop",methods:["start","stop"],properties:["running"]},Pause:{name:"Pause",methods:["pause","resume"],properties:["paused"]},Dock:{name:"Dock",methods:["dock"],properties:["docked"]},TemperatureSetting:{name:"TemperatureSetting",methods:["setTemperature","setThermostatMode","setThermostatSetpoint","setThermostatSetpointHigh","setThermostatSetpointLow"],properties:["temperatureSetting","thermostatActiveMode","thermostatAvailableModes","thermostatMode","thermostatSetpoint","thermostatSetpointHigh","thermostatSetpointLow"]},Thermometer:{name:"Thermometer",methods:["setTemperatureUnit"],properties:["temperature","temperatureUnit"]},HumiditySensor:{name:"HumiditySensor",methods:[],properties:["humidity"]},Camera:{name:"Camera",methods:["getPictureOptions","takePicture"],properties:[]},Microphone:{name:"Microphone",methods:["getAudioStream"],properties:[]},Display:{name:"Display",methods:["startDisplay","stopDisplay"],properties:[]},VideoCamera:{name:"VideoCamera",methods:["getVideoStream","getVideoStreamOptions"],properties:[]},VideoRecorder:{name:"VideoRecorder",methods:["getRecordingStream","getRecordingStreamCurrentTime","getRecordingStreamOptions","getRecordingStreamThumbnail"],properties:[]},PanTiltZoom:{name:"PanTiltZoom",methods:["ptzCommand"],properties:["ptzCapabilities"]},EventRecorder:{name:"EventRecorder",methods:["getRecordedEvents"],properties:[]},VideoClips:{name:"VideoClips",methods:["getVideoClip","getVideoClipThumbnail","getVideoClips","removeVideoClips"],properties:[]},VideoCameraConfiguration:{name:"VideoCameraConfiguration",methods:["setVideoStreamOptions"],properties:[]},Intercom:{name:"Intercom",methods:["startIntercom","stopIntercom"],properties:[]},Lock:{name:"Lock",methods:["lock","unlock"],properties:["lockState"]},PasswordStore:{name:"PasswordStore",methods:["addPassword","getPasswords","removePassword"],properties:[]},Scene:{name:"Scene",methods:["activate","deactivate","isReversible"],properties:[]},Entry:{name:"Entry",methods:["closeEntry","openEntry"],properties:[]},EntrySensor:{name:"EntrySensor",methods:[],properties:["entryOpen"]},DeviceProvider:{name:"DeviceProvider",methods:["getDevice","releaseDevice"],properties:[]},DeviceDiscovery:{name:"DeviceDiscovery",methods:["adoptDevice","discoverDevices"],properties:[]},DeviceCreator:{name:"DeviceCreator",methods:["createDevice","getCreateDeviceSettings"],properties:[]},Battery:{name:"Battery",methods:[],properties:["batteryLevel"]},Charger:{name:"Charger",methods:[],properties:["chargeState"]},Refresh:{name:"Refresh",methods:["getRefreshFrequency","refresh"],properties:[]},MediaPlayer:{name:"MediaPlayer",methods:["getMediaStatus","load","seek","skipNext","skipPrevious"],properties:[]},Online:{name:"Online",methods:[],properties:["online"]},BufferConverter:{name:"BufferConverter",methods:["convert"],properties:["fromMimeType","toMimeType"]},Settings:{name:"Settings",methods:["getSettings","putSetting"],properties:[]},BinarySensor:{name:"BinarySensor",methods:[],properties:["binaryState"]},TamperSensor:{name:"TamperSensor",methods:[],properties:["tampered"]},PowerSensor:{name:"PowerSensor",methods:[],properties:["powerDetected"]},AudioSensor:{name:"AudioSensor",methods:[],properties:["audioDetected"]},MotionSensor:{name:"MotionSensor",methods:[],properties:["motionDetected"]},AmbientLightSensor:{name:"AmbientLightSensor",methods:[],properties:["ambientLight"]},OccupancySensor:{name:"OccupancySensor",methods:[],properties:["occupied"]},FloodSensor:{name:"FloodSensor",methods:[],properties:["flooded"]},UltravioletSensor:{name:"UltravioletSensor",methods:[],properties:["ultraviolet"]},LuminanceSensor:{name:"LuminanceSensor",methods:[],properties:["luminance"]},PositionSensor:{name:"PositionSensor",methods:[],properties:["position"]},SecuritySystem:{name:"SecuritySystem",methods:["armSecuritySystem","disarmSecuritySystem"],properties:["securitySystemState"]},PM10Sensor:{name:"PM10Sensor",methods:[],properties:["pm10Density"]},PM25Sensor:{name:"PM25Sensor",methods:[],properties:["pm25Density"]},VOCSensor:{name:"VOCSensor",methods:[],properties:["vocDensity"]},NOXSensor:{name:"NOXSensor",methods:[],properties:["noxDensity"]},CO2Sensor:{name:"CO2Sensor",methods:[],properties:["co2ppm"]},AirQualitySensor:{name:"AirQualitySensor",methods:[],properties:["airQuality"]},Readme:{name:"Readme",methods:["getReadmeMarkdown"],properties:[]},OauthClient:{name:"OauthClient",methods:["getOauthUrl","onOauthCallback"],properties:[]},MixinProvider:{name:"MixinProvider",methods:["canMixin","getMixin","releaseMixin"],properties:[]},HttpRequestHandler:{name:"HttpRequestHandler",methods:["onRequest"],properties:[]},EngineIOHandler:{name:"EngineIOHandler",methods:["onConnection"],properties:[]},PushHandler:{name:"PushHandler",methods:["onPush"],properties:[]},Program:{name:"Program",methods:["run"],properties:[]},Scriptable:{name:"Scriptable",methods:["eval","loadScripts","saveScript"],properties:[]},ObjectTracker:{name:"ObjectTracker",methods:["trackObjects"],properties:[]},ObjectDetector:{name:"ObjectDetector",methods:["getDetectionInput","getObjectTypes"],properties:[]},ObjectDetection:{name:"ObjectDetection",methods:["detectObjects","generateObjectDetections","getDetectionModel"],properties:[]},HumiditySetting:{name:"HumiditySetting",methods:["setHumidity"],properties:["humiditySetting"]},Fan:{name:"Fan",methods:["setFan"],properties:["fan"]},RTCSignalingChannel:{name:"RTCSignalingChannel",methods:["startRTCSignalingSession"],properties:[]},RTCSignalingClient:{name:"RTCSignalingClient",methods:["createRTCSignalingSession"],properties:[]},LauncherApplication:{name:"LauncherApplication",methods:[],properties:["applicationInfo"]},ScryptedUser:{name:"ScryptedUser",methods:["getScryptedUserAccessControl"],properties:[]},VideoFrameGenerator:{name:"VideoFrameGenerator",methods:["generateVideoFrames"],properties:[]}},function(e){e.Builtin="Builtin",e.Camera="Camera",e.Fan="Fan",e.Light="Light",e.Switch="Switch",e.Outlet="Outlet",e.Sensor="Sensor",e.Scene="Scene",e.Program="Program",e.Automation="Automation",e.Vacuum="Vacuum",e.Notifier="Notifier",e.Thermostat="Thermostat",e.Lock="Lock",e.PasswordControl="PasswordControl",e.Display="Display",e.SmartDisplay="SmartDisplay",e.Speaker="Speaker",e.SmartSpeaker="SmartSpeaker",e.Event="Event",e.Entry="Entry",e.Garage="Garage",e.DeviceProvider="DeviceProvider",e.DataSource="DataSource",e.API="API",e.Doorbell="Doorbell",e.Irrigation="Irrigation",e.Valve="Valve",e.Person="Person",e.SecuritySystem="SecuritySystem",e.WindowCovering="WindowCovering",e.Siren="Siren",e.Unknown="Unknown"}(t.ScryptedDeviceType||(t.ScryptedDeviceType={})),function(e){e.Humidify="Humidify",e.Dehumidify="Dehumidify",e.Auto="Auto",e.Off="Off"}(t.HumidityMode||(t.HumidityMode={})),function(e){e.Auto="Auto",e.Manual="Manual"}(t.FanMode||(t.FanMode={})),function(e){e.C="C",e.F="F"}(t.TemperatureUnit||(t.TemperatureUnit={})),function(e){e.Off="Off",e.Cool="Cool",e.Heat="Heat",e.HeatCool="HeatCool",e.Auto="Auto",e.FanOnly="FanOnly",e.Purifier="Purifier",e.Eco="Eco",e.Dry="Dry",e.On="On"}(t.ThermostatMode||(t.ThermostatMode={})),function(e){e.Absolute="Absolute",e.Relative="Relative"}(t.PanTiltZoomMovement||(t.PanTiltZoomMovement={})),function(e){e.Locked="Locked",e.Unlocked="Unlocked",e.Jammed="Jammed"}(t.LockState||(t.LockState={})),function(e){e.Trickle="trickle",e.Charging="charging",e.NotCharging="not-charging"}(t.ChargeState||(t.ChargeState={})),function(e){e.Unknown="Unknown",e.Excellent="Excellent",e.Good="Good",e.Fair="Fair",e.Inferior="Inferior",e.Poor="Poor"}(t.AirQuality||(t.AirQuality={})),function(e){e.Disarmed="Disarmed",e.HomeArmed="HomeArmed",e.AwayArmed="AwayArmed",e.NightArmed="NightArmed"}(t.SecuritySystemMode||(t.SecuritySystemMode={})),function(e){e.Sensor="Sensor",e.Occupied="Occupied",e.Time="Time",e.Error="Error"}(t.SecuritySystemObstruction||(t.SecuritySystemObstruction={})),function(e){e.Idle="Idle",e.Playing="Playing",e.Paused="Paused",e.Buffering="Buffering"}(t.MediaPlayerState||(t.MediaPlayerState={})),function(e){e.ScryptedDevice="ScryptedDevice",e.ScryptedPlugin="ScryptedPlugin",e.OnOff="OnOff",e.Brightness="Brightness",e.ColorSettingTemperature="ColorSettingTemperature",e.ColorSettingRgb="ColorSettingRgb",e.ColorSettingHsv="ColorSettingHsv",e.Notifier="Notifier",e.StartStop="StartStop",e.Pause="Pause",e.Dock="Dock",e.TemperatureSetting="TemperatureSetting",e.Thermometer="Thermometer",e.HumiditySensor="HumiditySensor",e.Camera="Camera",e.Microphone="Microphone",e.Display="Display",e.VideoCamera="VideoCamera",e.VideoRecorder="VideoRecorder",e.PanTiltZoom="PanTiltZoom",e.EventRecorder="EventRecorder",e.VideoClips="VideoClips",e.VideoCameraConfiguration="VideoCameraConfiguration",e.Intercom="Intercom",e.Lock="Lock",e.PasswordStore="PasswordStore",e.Scene="Scene",e.Entry="Entry",e.EntrySensor="EntrySensor",e.DeviceProvider="DeviceProvider",e.DeviceDiscovery="DeviceDiscovery",e.DeviceCreator="DeviceCreator",e.Battery="Battery",e.Charger="Charger",e.Refresh="Refresh",e.MediaPlayer="MediaPlayer",e.Online="Online",e.BufferConverter="BufferConverter",e.Settings="Settings",e.BinarySensor="BinarySensor",e.TamperSensor="TamperSensor",e.PowerSensor="PowerSensor",e.AudioSensor="AudioSensor",e.MotionSensor="MotionSensor",e.AmbientLightSensor="AmbientLightSensor",e.OccupancySensor="OccupancySensor",e.FloodSensor="FloodSensor",e.UltravioletSensor="UltravioletSensor",e.LuminanceSensor="LuminanceSensor",e.PositionSensor="PositionSensor",e.SecuritySystem="SecuritySystem",e.PM10Sensor="PM10Sensor",e.PM25Sensor="PM25Sensor",e.VOCSensor="VOCSensor",e.NOXSensor="NOXSensor",e.CO2Sensor="CO2Sensor",e.AirQualitySensor="AirQualitySensor",e.Readme="Readme",e.OauthClient="OauthClient",e.MixinProvider="MixinProvider",e.HttpRequestHandler="HttpRequestHandler",e.EngineIOHandler="EngineIOHandler",e.PushHandler="PushHandler",e.Program="Program",e.Scriptable="Scriptable",e.ObjectTracker="ObjectTracker",e.ObjectDetector="ObjectDetector",e.ObjectDetection="ObjectDetection",e.HumiditySetting="HumiditySetting",e.Fan="Fan",e.RTCSignalingChannel="RTCSignalingChannel",e.RTCSignalingClient="RTCSignalingClient",e.LauncherApplication="LauncherApplication",e.ScryptedUser="ScryptedUser",e.VideoFrameGenerator="VideoFrameGenerator"}(t.ScryptedInterface||(t.ScryptedInterface={})),function(e){e.Url="text/x-uri",e.InsecureLocalUrl="text/x-insecure-local-uri",e.LocalUrl="text/x-local-uri",e.PushEndpoint="text/x-push-endpoint",e.SchemePrefix="x-scrypted/x-scrypted-scheme-",e.MediaStreamUrl="text/x-media-url",e.MediaObject="x-scrypted/x-scrypted-media-object",e.RequestMediaObject="x-scrypted/x-scrypted-request-media-object",e.RequestMediaStream="x-scrypted/x-scrypted-request-stream",e.MediaStreamFeedback="x-scrypted/x-media-stream-feedback",e.FFmpegInput="x-scrypted/x-ffmpeg-input",e.FFmpegTranscodeStream="x-scrypted/x-ffmpeg-transcode-stream",e.RTCSignalingChannel="x-scrypted/x-scrypted-rtc-signaling-channel",e.RTCSignalingSession="x-scrypted/x-scrypted-rtc-signaling-session",e.RTCConnectionManagement="x-scrypted/x-scrypted-rtc-connection-management",e.Image="x-scrypted/x-scrypted-image"}(t.ScryptedMimeTypes||(t.ScryptedMimeTypes={}))},4554:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScryptedMimeTypes=t.ScryptedInterface=t.MediaPlayerState=t.SecuritySystemObstruction=t.SecuritySystemMode=t.AirQuality=t.ChargeState=t.LockState=t.PanTiltZoomMovement=t.ThermostatMode=t.TemperatureUnit=t.FanMode=t.HumidityMode=t.ScryptedDeviceType=t.ScryptedInterfaceDescriptors=t.ScryptedInterfaceMethod=t.ScryptedInterfaceProperty=t.DeviceBase=t.TYPES_VERSION=void 0,t.TYPES_VERSION="0.2.79";t.DeviceBase=class{},function(e){e.id="id",e.info="info",e.interfaces="interfaces",e.mixins="mixins",e.name="name",e.nativeId="nativeId",e.pluginId="pluginId",e.providedInterfaces="providedInterfaces",e.providedName="providedName",e.providedRoom="providedRoom",e.providedType="providedType",e.providerId="providerId",e.room="room",e.type="type",e.on="on",e.brightness="brightness",e.colorTemperature="colorTemperature",e.rgb="rgb",e.hsv="hsv",e.running="running",e.paused="paused",e.docked="docked",e.temperatureSetting="temperatureSetting",e.thermostatActiveMode="thermostatActiveMode",e.thermostatAvailableModes="thermostatAvailableModes",e.thermostatMode="thermostatMode",e.thermostatSetpoint="thermostatSetpoint",e.thermostatSetpointHigh="thermostatSetpointHigh",e.thermostatSetpointLow="thermostatSetpointLow",e.temperature="temperature",e.temperatureUnit="temperatureUnit",e.humidity="humidity",e.ptzCapabilities="ptzCapabilities",e.lockState="lockState",e.entryOpen="entryOpen",e.batteryLevel="batteryLevel",e.chargeState="chargeState",e.online="online",e.fromMimeType="fromMimeType",e.toMimeType="toMimeType",e.binaryState="binaryState",e.tampered="tampered",e.powerDetected="powerDetected",e.audioDetected="audioDetected",e.motionDetected="motionDetected",e.ambientLight="ambientLight",e.occupied="occupied",e.flooded="flooded",e.ultraviolet="ultraviolet",e.luminance="luminance",e.position="position",e.securitySystemState="securitySystemState",e.pm10Density="pm10Density",e.pm25Density="pm25Density",e.vocDensity="vocDensity",e.noxDensity="noxDensity",e.co2ppm="co2ppm",e.airQuality="airQuality",e.humiditySetting="humiditySetting",e.fan="fan",e.applicationInfo="applicationInfo"}(t.ScryptedInterfaceProperty||(t.ScryptedInterfaceProperty={})),function(e){e.listen="listen",e.probe="probe",e.setMixins="setMixins",e.setName="setName",e.setRoom="setRoom",e.setType="setType",e.getPluginJson="getPluginJson",e.turnOff="turnOff",e.turnOn="turnOn",e.setBrightness="setBrightness",e.getTemperatureMaxK="getTemperatureMaxK",e.getTemperatureMinK="getTemperatureMinK",e.setColorTemperature="setColorTemperature",e.setRgb="setRgb",e.setHsv="setHsv",e.sendNotification="sendNotification",e.start="start",e.stop="stop",e.pause="pause",e.resume="resume",e.dock="dock",e.setTemperature="setTemperature",e.setThermostatMode="setThermostatMode",e.setThermostatSetpoint="setThermostatSetpoint",e.setThermostatSetpointHigh="setThermostatSetpointHigh",e.setThermostatSetpointLow="setThermostatSetpointLow",e.setTemperatureUnit="setTemperatureUnit",e.getPictureOptions="getPictureOptions",e.takePicture="takePicture",e.getAudioStream="getAudioStream",e.startDisplay="startDisplay",e.stopDisplay="stopDisplay",e.getVideoStream="getVideoStream",e.getVideoStreamOptions="getVideoStreamOptions",e.getRecordingStream="getRecordingStream",e.getRecordingStreamCurrentTime="getRecordingStreamCurrentTime",e.getRecordingStreamOptions="getRecordingStreamOptions",e.getRecordingStreamThumbnail="getRecordingStreamThumbnail",e.ptzCommand="ptzCommand",e.getRecordedEvents="getRecordedEvents",e.getVideoClip="getVideoClip",e.getVideoClipThumbnail="getVideoClipThumbnail",e.getVideoClips="getVideoClips",e.removeVideoClips="removeVideoClips",e.setVideoStreamOptions="setVideoStreamOptions",e.startIntercom="startIntercom",e.stopIntercom="stopIntercom",e.lock="lock",e.unlock="unlock",e.addPassword="addPassword",e.getPasswords="getPasswords",e.removePassword="removePassword",e.activate="activate",e.deactivate="deactivate",e.isReversible="isReversible",e.closeEntry="closeEntry",e.openEntry="openEntry",e.getDevice="getDevice",e.releaseDevice="releaseDevice",e.adoptDevice="adoptDevice",e.discoverDevices="discoverDevices",e.createDevice="createDevice",e.getCreateDeviceSettings="getCreateDeviceSettings",e.getRefreshFrequency="getRefreshFrequency",e.refresh="refresh",e.getMediaStatus="getMediaStatus",e.load="load",e.seek="seek",e.skipNext="skipNext",e.skipPrevious="skipPrevious",e.convert="convert",e.getSettings="getSettings",e.putSetting="putSetting",e.armSecuritySystem="armSecuritySystem",e.disarmSecuritySystem="disarmSecuritySystem",e.getReadmeMarkdown="getReadmeMarkdown",e.getOauthUrl="getOauthUrl",e.onOauthCallback="onOauthCallback",e.canMixin="canMixin",e.getMixin="getMixin",e.releaseMixin="releaseMixin",e.onRequest="onRequest",e.onConnection="onConnection",e.onPush="onPush",e.run="run",e.eval="eval",e.loadScripts="loadScripts",e.saveScript="saveScript",e.trackObjects="trackObjects",e.getDetectionInput="getDetectionInput",e.getObjectTypes="getObjectTypes",e.detectObjects="detectObjects",e.generateObjectDetections="generateObjectDetections",e.getDetectionModel="getDetectionModel",e.setHumidity="setHumidity",e.setFan="setFan",e.startRTCSignalingSession="startRTCSignalingSession",e.createRTCSignalingSession="createRTCSignalingSession",e.getScryptedUserAccessControl="getScryptedUserAccessControl",e.generateVideoFrames="generateVideoFrames"}(t.ScryptedInterfaceMethod||(t.ScryptedInterfaceMethod={})),t.ScryptedInterfaceDescriptors={ScryptedDevice:{name:"ScryptedDevice",methods:["listen","probe","setMixins","setName","setRoom","setType"],properties:["id","info","interfaces","mixins","name","nativeId","pluginId","providedInterfaces","providedName","providedRoom","providedType","providerId","room","type"]},ScryptedPlugin:{name:"ScryptedPlugin",methods:["getPluginJson"],properties:[]},OnOff:{name:"OnOff",methods:["turnOff","turnOn"],properties:["on"]},Brightness:{name:"Brightness",methods:["setBrightness"],properties:["brightness"]},ColorSettingTemperature:{name:"ColorSettingTemperature",methods:["getTemperatureMaxK","getTemperatureMinK","setColorTemperature"],properties:["colorTemperature"]},ColorSettingRgb:{name:"ColorSettingRgb",methods:["setRgb"],properties:["rgb"]},ColorSettingHsv:{name:"ColorSettingHsv",methods:["setHsv"],properties:["hsv"]},Notifier:{name:"Notifier",methods:["sendNotification"],properties:[]},StartStop:{name:"StartStop",methods:["start","stop"],properties:["running"]},Pause:{name:"Pause",methods:["pause","resume"],properties:["paused"]},Dock:{name:"Dock",methods:["dock"],properties:["docked"]},TemperatureSetting:{name:"TemperatureSetting",methods:["setTemperature","setThermostatMode","setThermostatSetpoint","setThermostatSetpointHigh","setThermostatSetpointLow"],properties:["temperatureSetting","thermostatActiveMode","thermostatAvailableModes","thermostatMode","thermostatSetpoint","thermostatSetpointHigh","thermostatSetpointLow"]},Thermometer:{name:"Thermometer",methods:["setTemperatureUnit"],properties:["temperature","temperatureUnit"]},HumiditySensor:{name:"HumiditySensor",methods:[],properties:["humidity"]},Camera:{name:"Camera",methods:["getPictureOptions","takePicture"],properties:[]},Microphone:{name:"Microphone",methods:["getAudioStream"],properties:[]},Display:{name:"Display",methods:["startDisplay","stopDisplay"],properties:[]},VideoCamera:{name:"VideoCamera",methods:["getVideoStream","getVideoStreamOptions"],properties:[]},VideoRecorder:{name:"VideoRecorder",methods:["getRecordingStream","getRecordingStreamCurrentTime","getRecordingStreamOptions","getRecordingStreamThumbnail"],properties:[]},PanTiltZoom:{name:"PanTiltZoom",methods:["ptzCommand"],properties:["ptzCapabilities"]},EventRecorder:{name:"EventRecorder",methods:["getRecordedEvents"],properties:[]},VideoClips:{name:"VideoClips",methods:["getVideoClip","getVideoClipThumbnail","getVideoClips","removeVideoClips"],properties:[]},VideoCameraConfiguration:{name:"VideoCameraConfiguration",methods:["setVideoStreamOptions"],properties:[]},Intercom:{name:"Intercom",methods:["startIntercom","stopIntercom"],properties:[]},Lock:{name:"Lock",methods:["lock","unlock"],properties:["lockState"]},PasswordStore:{name:"PasswordStore",methods:["addPassword","getPasswords","removePassword"],properties:[]},Scene:{name:"Scene",methods:["activate","deactivate","isReversible"],properties:[]},Entry:{name:"Entry",methods:["closeEntry","openEntry"],properties:[]},EntrySensor:{name:"EntrySensor",methods:[],properties:["entryOpen"]},DeviceProvider:{name:"DeviceProvider",methods:["getDevice","releaseDevice"],properties:[]},DeviceDiscovery:{name:"DeviceDiscovery",methods:["adoptDevice","discoverDevices"],properties:[]},DeviceCreator:{name:"DeviceCreator",methods:["createDevice","getCreateDeviceSettings"],properties:[]},Battery:{name:"Battery",methods:[],properties:["batteryLevel"]},Charger:{name:"Charger",methods:[],properties:["chargeState"]},Refresh:{name:"Refresh",methods:["getRefreshFrequency","refresh"],properties:[]},MediaPlayer:{name:"MediaPlayer",methods:["getMediaStatus","load","seek","skipNext","skipPrevious"],properties:[]},Online:{name:"Online",methods:[],properties:["online"]},BufferConverter:{name:"BufferConverter",methods:["convert"],properties:["fromMimeType","toMimeType"]},Settings:{name:"Settings",methods:["getSettings","putSetting"],properties:[]},BinarySensor:{name:"BinarySensor",methods:[],properties:["binaryState"]},TamperSensor:{name:"TamperSensor",methods:[],properties:["tampered"]},PowerSensor:{name:"PowerSensor",methods:[],properties:["powerDetected"]},AudioSensor:{name:"AudioSensor",methods:[],properties:["audioDetected"]},MotionSensor:{name:"MotionSensor",methods:[],properties:["motionDetected"]},AmbientLightSensor:{name:"AmbientLightSensor",methods:[],properties:["ambientLight"]},OccupancySensor:{name:"OccupancySensor",methods:[],properties:["occupied"]},FloodSensor:{name:"FloodSensor",methods:[],properties:["flooded"]},UltravioletSensor:{name:"UltravioletSensor",methods:[],properties:["ultraviolet"]},LuminanceSensor:{name:"LuminanceSensor",methods:[],properties:["luminance"]},PositionSensor:{name:"PositionSensor",methods:[],properties:["position"]},SecuritySystem:{name:"SecuritySystem",methods:["armSecuritySystem","disarmSecuritySystem"],properties:["securitySystemState"]},PM10Sensor:{name:"PM10Sensor",methods:[],properties:["pm10Density"]},PM25Sensor:{name:"PM25Sensor",methods:[],properties:["pm25Density"]},VOCSensor:{name:"VOCSensor",methods:[],properties:["vocDensity"]},NOXSensor:{name:"NOXSensor",methods:[],properties:["noxDensity"]},CO2Sensor:{name:"CO2Sensor",methods:[],properties:["co2ppm"]},AirQualitySensor:{name:"AirQualitySensor",methods:[],properties:["airQuality"]},Readme:{name:"Readme",methods:["getReadmeMarkdown"],properties:[]},OauthClient:{name:"OauthClient",methods:["getOauthUrl","onOauthCallback"],properties:[]},MixinProvider:{name:"MixinProvider",methods:["canMixin","getMixin","releaseMixin"],properties:[]},HttpRequestHandler:{name:"HttpRequestHandler",methods:["onRequest"],properties:[]},EngineIOHandler:{name:"EngineIOHandler",methods:["onConnection"],properties:[]},PushHandler:{name:"PushHandler",methods:["onPush"],properties:[]},Program:{name:"Program",methods:["run"],properties:[]},Scriptable:{name:"Scriptable",methods:["eval","loadScripts","saveScript"],properties:[]},ObjectTracker:{name:"ObjectTracker",methods:["trackObjects"],properties:[]},ObjectDetector:{name:"ObjectDetector",methods:["getDetectionInput","getObjectTypes"],properties:[]},ObjectDetection:{name:"ObjectDetection",methods:["detectObjects","generateObjectDetections","getDetectionModel"],properties:[]},HumiditySetting:{name:"HumiditySetting",methods:["setHumidity"],properties:["humiditySetting"]},Fan:{name:"Fan",methods:["setFan"],properties:["fan"]},RTCSignalingChannel:{name:"RTCSignalingChannel",methods:["startRTCSignalingSession"],properties:[]},RTCSignalingClient:{name:"RTCSignalingClient",methods:["createRTCSignalingSession"],properties:[]},LauncherApplication:{name:"LauncherApplication",methods:[],properties:["applicationInfo"]},ScryptedUser:{name:"ScryptedUser",methods:["getScryptedUserAccessControl"],properties:[]},VideoFrameGenerator:{name:"VideoFrameGenerator",methods:["generateVideoFrames"],properties:[]}},function(e){e.Builtin="Builtin",e.Camera="Camera",e.Fan="Fan",e.Light="Light",e.Switch="Switch",e.Outlet="Outlet",e.Sensor="Sensor",e.Scene="Scene",e.Program="Program",e.Automation="Automation",e.Vacuum="Vacuum",e.Notifier="Notifier",e.Thermostat="Thermostat",e.Lock="Lock",e.PasswordControl="PasswordControl",e.Display="Display",e.SmartDisplay="SmartDisplay",e.Speaker="Speaker",e.SmartSpeaker="SmartSpeaker",e.Event="Event",e.Entry="Entry",e.Garage="Garage",e.DeviceProvider="DeviceProvider",e.DataSource="DataSource",e.API="API",e.Doorbell="Doorbell",e.Irrigation="Irrigation",e.Valve="Valve",e.Person="Person",e.SecuritySystem="SecuritySystem",e.WindowCovering="WindowCovering",e.Siren="Siren",e.Unknown="Unknown"}(t.ScryptedDeviceType||(t.ScryptedDeviceType={})),function(e){e.Humidify="Humidify",e.Dehumidify="Dehumidify",e.Auto="Auto",e.Off="Off"}(t.HumidityMode||(t.HumidityMode={})),function(e){e.Auto="Auto",e.Manual="Manual"}(t.FanMode||(t.FanMode={})),function(e){e.C="C",e.F="F"}(t.TemperatureUnit||(t.TemperatureUnit={})),function(e){e.Off="Off",e.Cool="Cool",e.Heat="Heat",e.HeatCool="HeatCool",e.Auto="Auto",e.FanOnly="FanOnly",e.Purifier="Purifier",e.Eco="Eco",e.Dry="Dry",e.On="On"}(t.ThermostatMode||(t.ThermostatMode={})),function(e){e.Absolute="Absolute",e.Relative="Relative"}(t.PanTiltZoomMovement||(t.PanTiltZoomMovement={})),function(e){e.Locked="Locked",e.Unlocked="Unlocked",e.Jammed="Jammed"}(t.LockState||(t.LockState={})),function(e){e.Trickle="trickle",e.Charging="charging",e.NotCharging="not-charging"}(t.ChargeState||(t.ChargeState={})),function(e){e.Unknown="Unknown",e.Excellent="Excellent",e.Good="Good",e.Fair="Fair",e.Inferior="Inferior",e.Poor="Poor"}(t.AirQuality||(t.AirQuality={})),function(e){e.Disarmed="Disarmed",e.HomeArmed="HomeArmed",e.AwayArmed="AwayArmed",e.NightArmed="NightArmed"}(t.SecuritySystemMode||(t.SecuritySystemMode={})),function(e){e.Sensor="Sensor",e.Occupied="Occupied",e.Time="Time",e.Error="Error"}(t.SecuritySystemObstruction||(t.SecuritySystemObstruction={})),function(e){e.Idle="Idle",e.Playing="Playing",e.Paused="Paused",e.Buffering="Buffering"}(t.MediaPlayerState||(t.MediaPlayerState={})),function(e){e.ScryptedDevice="ScryptedDevice",e.ScryptedPlugin="ScryptedPlugin",e.OnOff="OnOff",e.Brightness="Brightness",e.ColorSettingTemperature="ColorSettingTemperature",e.ColorSettingRgb="ColorSettingRgb",e.ColorSettingHsv="ColorSettingHsv",e.Notifier="Notifier",e.StartStop="StartStop",e.Pause="Pause",e.Dock="Dock",e.TemperatureSetting="TemperatureSetting",e.Thermometer="Thermometer",e.HumiditySensor="HumiditySensor",e.Camera="Camera",e.Microphone="Microphone",e.Display="Display",e.VideoCamera="VideoCamera",e.VideoRecorder="VideoRecorder",e.PanTiltZoom="PanTiltZoom",e.EventRecorder="EventRecorder",e.VideoClips="VideoClips",e.VideoCameraConfiguration="VideoCameraConfiguration",e.Intercom="Intercom",e.Lock="Lock",e.PasswordStore="PasswordStore",e.Scene="Scene",e.Entry="Entry",e.EntrySensor="EntrySensor",e.DeviceProvider="DeviceProvider",e.DeviceDiscovery="DeviceDiscovery",e.DeviceCreator="DeviceCreator",e.Battery="Battery",e.Charger="Charger",e.Refresh="Refresh",e.MediaPlayer="MediaPlayer",e.Online="Online",e.BufferConverter="BufferConverter",e.Settings="Settings",e.BinarySensor="BinarySensor",e.TamperSensor="TamperSensor",e.PowerSensor="PowerSensor",e.AudioSensor="AudioSensor",e.MotionSensor="MotionSensor",e.AmbientLightSensor="AmbientLightSensor",e.OccupancySensor="OccupancySensor",e.FloodSensor="FloodSensor",e.UltravioletSensor="UltravioletSensor",e.LuminanceSensor="LuminanceSensor",e.PositionSensor="PositionSensor",e.SecuritySystem="SecuritySystem",e.PM10Sensor="PM10Sensor",e.PM25Sensor="PM25Sensor",e.VOCSensor="VOCSensor",e.NOXSensor="NOXSensor",e.CO2Sensor="CO2Sensor",e.AirQualitySensor="AirQualitySensor",e.Readme="Readme",e.OauthClient="OauthClient",e.MixinProvider="MixinProvider",e.HttpRequestHandler="HttpRequestHandler",e.EngineIOHandler="EngineIOHandler",e.PushHandler="PushHandler",e.Program="Program",e.Scriptable="Scriptable",e.ObjectTracker="ObjectTracker",e.ObjectDetector="ObjectDetector",e.ObjectDetection="ObjectDetection",e.HumiditySetting="HumiditySetting",e.Fan="Fan",e.RTCSignalingChannel="RTCSignalingChannel",e.RTCSignalingClient="RTCSignalingClient",e.LauncherApplication="LauncherApplication",e.ScryptedUser="ScryptedUser",e.VideoFrameGenerator="VideoFrameGenerator"}(t.ScryptedInterface||(t.ScryptedInterface={})),function(e){e.Url="text/x-uri",e.InsecureLocalUrl="text/x-insecure-local-uri",e.LocalUrl="text/x-local-uri",e.PushEndpoint="text/x-push-endpoint",e.SchemePrefix="x-scrypted/x-scrypted-scheme-",e.MediaStreamUrl="text/x-media-url",e.MediaObject="x-scrypted/x-scrypted-media-object",e.RequestMediaObject="x-scrypted/x-scrypted-request-media-object",e.RequestMediaStream="x-scrypted/x-scrypted-request-stream",e.MediaStreamFeedback="x-scrypted/x-media-stream-feedback",e.FFmpegInput="x-scrypted/x-ffmpeg-input",e.FFmpegTranscodeStream="x-scrypted/x-ffmpeg-transcode-stream",e.RTCSignalingChannel="x-scrypted/x-scrypted-rtc-signaling-channel",e.RTCSignalingSession="x-scrypted/x-scrypted-rtc-signaling-session",e.RTCConnectionManagement="x-scrypted/x-scrypted-rtc-connection-management",e.Image="x-scrypted/x-scrypted-image"}(t.ScryptedMimeTypes||(t.ScryptedMimeTypes={}))},4300:e=>{"use strict";e.exports=require("buffer")},2081:e=>{"use strict";e.exports=require("child_process")},6113:e=>{"use strict";e.exports=require("crypto")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},8034:e=>{"use strict";e.exports=require("path/posix")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},6144:e=>{"use strict";e.exports=require("vm")},1267:e=>{"use strict";e.exports=require("worker_threads")},9796:e=>{"use strict";e.exports=require("zlib")}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(r.exports,r,r.exports,__webpack_require__),r.loaded=!0,r.exports}__webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var __webpack_exports__=__webpack_require__(6360),__webpack_export_target__=exports="undefined"==typeof exports?{}:exports;for(var i in __webpack_exports__)__webpack_export_target__[i]=__webpack_exports__[i];__webpack_exports__.__esModule&&Object.defineProperty(__webpack_export_target__,"__esModule",{value:!0})})();
//# sourceMappingURL=main.nodejs.js.map