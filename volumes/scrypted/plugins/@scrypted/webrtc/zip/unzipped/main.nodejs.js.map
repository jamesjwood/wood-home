{"version":3,"file":"main.nodejs.js","mappings":"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M,GAAM,IAAM,GAAM,GAAM,IAAM,GAAM,IAAM,IAAM,GAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,KAGtLC,EAAI,CAAC,GAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,GAAM,EAAM,IAAM,GAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,GAAM,GAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,GAAM,GAAM,GAAM,IAAM,IAAM,GAAM,IAAM,IAAM,IAAM,IAAM,IAAM,GAAM,GAAM,EAAM,IAAM,GAAM,IAAM,GAAM,IAAM,EAAM,IAAM,EAAM,GAAM,IAAM,IAAM,IAAM,GAAM,IAAM,IAAM,EAAM,IAAM,GAAM,GAAM,GAAM,IAAM,GAAM,IAAM,GAAM,GAAM,IAAM,IAAM,GAAM,IAAM,GAAM,IAAM,GAAM,IAAM,EAAM,IAAM,GAAM,IAAM,IAAM,GAAM,IAAM,IAAM,IAAM,GAAM,GAAM,GAAM,GAAM,IAAM,IAAM,IAAM,IAAM,IAAM,GAAM,GAAM,GAAM,IAAM,GAAM,IAAM,EAAM,IAAM,GAAM,GAAM,IAAM,IAAM,GAAM,IAAM,GAAM,IAAM,IAAM,IAAM,GAAM,IAAM,IAAM,IAAM,IAAM,GAAM,GAAM,IAAM,IAAM,IAAM,IAAM,GAAM,GAAM,IAAM,GAAM,IAAM,GAAM,GAAM,IAAM,IAAM,IAAM,GAAM,IAAM,GAAM,GAAM,IAAM,GAAM,IAAM,GAAM,IAAM,GAAM,GAAM,IAAM,IAAM,GAAM,IAAM,IAAM,GAAM,IAAM,GAAM,GAAM,IAAM,IAAM,GAAM,GAAM,GAAM,GAAM,EAAM,GAAM,GAAM,IAAM,IAAM,IAAM,GAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,GAAM,IAAM,IAAM,IAAM,GAAM,IAAM,IAAM,GAAM,IAAM,IAAM,IAAM,IAAM,IAAM,EAAM,IAAM,IAAM,GAAM,GAAM,GAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,GAAM,GAAM,IAAM,IAAM,IAAM,IAAM,GAAM,IAAM,IAAM,GAAM,EAAM,IAAM,GAAM,GAAM,GAAM,GAAM,IAAM,IAAM,IAAM,GAAM,IAAM,IAAM,IAAM,IAAM,GAAM,IAAM,IAAM,IAAM,IAAM,IAAM,GAAM,IAAM,IAAM,IAAM,GAAM,GAAM,IAAM,IAAM,IAAM,IAAM,GAAM,IAAM,IAAM,GAAM,IAAM,GAAM,IAAM,GAAM,GAAM,IAAM,GAAM,IAAM,IAC//CC,EAAI,CAAC,GAAM,EAAM,IAAM,IAAM,GAAM,GAAM,IAAM,GAAM,IAAM,GAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,GAAM,IAAM,IAAM,GAAM,IAAM,IAAM,GAAM,IAAM,GAAM,GAAM,IAAM,IAAM,IAAM,IAAM,GAAM,IAAM,IAAM,GAAM,IAAM,IAAM,GAAM,GAAM,IAAM,GAAM,IAAM,GAAM,GAAM,IAAM,IAAM,GAAM,EAAM,GAAM,IAAM,IAAM,GAAM,IAAM,GAAM,IAAM,IAAM,GAAM,IAAM,GAAM,IAAM,IAAM,IAAM,GAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,GAAM,IAAM,IAAM,GAAM,IAAM,GAAM,IAAM,IAAM,IAAM,IAAM,IAAM,GAAM,GAAM,IAAM,IAAM,IAAM,IAAM,GAAM,GAAM,GAAM,GAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,EAAM,IAAM,IAAM,IAAM,GAAM,IAAM,IAAM,GAAM,EAAM,IAAM,IAAM,GAAM,EAAM,IAAM,GAAM,GAAM,IAAM,IAAM,GAAM,GAAM,EAAM,IAAM,IAAM,IAAM,EAAM,EAAM,GAAM,IAAM,IAAM,GAAM,IAAM,GAAM,GAAM,GAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,GAAM,IAAM,IAAM,GAAM,IAAM,IAAM,IAAM,GAAM,IAAM,GAAM,IAAM,IAAM,IAAM,GAAM,IAAM,GAAM,IAAM,GAAM,GAAM,IAAM,IAAM,IAAM,IAAM,GAAM,GAAM,IAAM,GAAM,IAAM,GAAM,IAAM,GAAM,GAAM,GAAM,IAAM,IAAM,IAAM,GAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,GAAM,IAAM,GAAM,IAAM,IAAM,GAAM,IAAM,EAAM,IAAM,GAAM,IAAM,GAAM,GAAM,GAAM,GAAM,IAAM,IAAM,GAAM,GAAM,GAAM,IAAM,IAAM,GAAM,IAAM,GAAM,GAAM,GAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,IAAM,GAAM,GAAM,IAAM,GAAM,IAAM,IAAM,IAAM,IAAM,IAAM,GAAM,IAAM,GAAM,IAAM,GAAM,GAAM,GAAM,EAAM,IAAM,IAAM,IAAM,IAAM,GAAM,IAAM,IAAM,GAAM,GAAM,GAAM,GAAM,GAAM,KAG//CC,EAAK,CAAC,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,SAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,UAAY,UAAY,UAAY,UAAY,UAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,EAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,SAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,SAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,WAAY,WAAY,UAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,SAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,UAAY,UAAY,WAAY,WAAY,UAAY,UAAY,WAAY,WAAY,UAAY,UAAY,UAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,SAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAC1/FC,EAAK,CAAC,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,SAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,SAAY,WAAY,WAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,UAAY,WAAY,UAAY,WAAY,UAAY,UAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,EAAY,UAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,SAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,UAAY,WAAY,WAAY,UAAY,UAAY,UAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,SAAY,SAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,UAAY,UAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAC1/FC,EAAK,CAAC,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,SAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,SAAY,WAAY,UAAY,WAAY,UAAY,WAAY,SAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,UAAY,WAAY,UAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,UAAY,WAAY,UAAY,WAAY,WAAY,WAAY,EAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,SAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,UAAY,WAAY,WAAY,UAAY,UAAY,UAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,UAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,SAAY,WAAY,UAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAC1/FC,EAAK,CAAC,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,SAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,SAAY,WAAY,UAAY,WAAY,UAAY,WAAY,SAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,UAAY,WAAY,UAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,UAAY,WAAY,UAAY,WAAY,WAAY,WAAY,EAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,SAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,UAAY,WAAY,WAAY,UAAY,UAAY,UAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,UAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,SAAY,WAAY,UAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAG1/FC,EAAK,CAAC,WAAY,WAAY,UAAY,UAAY,WAAY,UAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,SAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,UAAY,UAAY,SAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,UAAY,WAAY,SAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,SAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,EAAY,UAAY,UAAY,UAAY,WAAY,WAAY,UAAY,WAAY,UAAY,UAAY,WAAY,WAAY,UAAY,UAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,UAAY,UAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,UAAY,WAAY,UAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,UAAY,WAAY,UAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,SAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,UAAY,WAAY,UAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,YAC1/FC,EAAK,CAAC,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,SAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,UAAY,WAAY,WAAY,UAAY,WAAY,WAAY,UAAY,UAAY,SAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,UAAY,WAAY,UAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,SAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,EAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,WAAY,UAAY,WAAY,UAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,WAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,UAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,UAAY,UAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,SAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,WAAY,UAAY,WAAY,WAAY,UAAY,WAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,SAAY,WAAY,WAAY,UAAY,WAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,YAC1/FC,EAAK,CAAC,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,SAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,SAAY,WAAY,WAAY,UAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,UAAY,SAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,UAAY,EAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,UAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,UAAY,WAAY,UAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,UAAY,UAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,UAAY,WAAY,UAAY,WAAY,UAAY,UAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,SAAY,WAAY,WAAY,UAAY,WAAY,WAAY,UAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,UAAY,WAAY,WAAY,SAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,YAC1/FC,EAAK,CAAC,WAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,SAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,SAAY,WAAY,SAAY,UAAY,WAAY,WAAY,UAAY,WAAY,WAAY,SAAY,UAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,EAAY,WAAY,UAAY,UAAY,WAAY,UAAY,WAAY,WAAY,UAAY,UAAY,WAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,UAAY,UAAY,UAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,SAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,UAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,SAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,UAAY,WAAY,WAAY,UAAY,WAAY,UAAY,WAAY,WAAY,WAAY,UAAY,WAAY,YAG1/FC,EAAK,CAAC,EAAY,UAAY,UAAY,UAAY,UAAY,UAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,UAAY,SAAY,UAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,UAAY,SAAY,UAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,UAAY,UAAY,WAAY,UAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,UAAY,UAAY,UAAY,UAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,SAAY,UAAY,UAAY,UAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,SAAY,UAAY,UAAY,UAAY,UAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,UAAY,UAAY,UAAY,SAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,YAC1/FC,EAAK,CAAC,EAAY,UAAY,UAAY,UAAY,UAAY,UAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,UAAY,WAAY,UAAY,SAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,UAAY,SAAY,UAAY,UAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,UAAY,UAAY,UAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,UAAY,SAAY,UAAY,UAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,UAAY,UAAY,UAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,SAAY,UAAY,UAAY,UAAY,UAAY,UAAY,WAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,UAAY,WAAY,UAAY,SAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,YAC1/FC,EAAK,CAAC,EAAY,UAAY,UAAY,UAAY,UAAY,UAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,SAAY,UAAY,UAAY,UAAY,UAAY,UAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,SAAY,UAAY,UAAY,UAAY,UAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,UAAY,UAAY,UAAY,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,UAAY,UAAY,UAAY,UAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,SAAY,UAAY,UAAY,WAAY,UAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,SAAY,UAAY,UAAY,WAAY,UAAY,UAAY,UAAY,UAAY,SAAY,UAAY,UAAY,UAAY,UAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,YAC1/FC,EAAK,CAAC,EAAY,UAAY,UAAY,UAAY,UAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,UAAY,UAAY,UAAY,UAAY,SAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,UAAY,UAAY,UAAY,UAAY,SAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,SAAY,UAAY,UAAY,UAAY,UAAY,SAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,UAAY,UAAY,UAAY,UAAY,SAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UAAY,UAAY,UAAY,UAAY,UAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,SAAY,UAAY,UAAY,UAAY,UAAY,WAAY,UAAY,WAAY,WAAY,WA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CACE,mEACA,kEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,kEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,mEAEF,CACE,mEACA,oEAEF,CACE,kEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,sEAINN,IAAK,CACH1I,IAAK,EACLgJ,OAAQ,CACN,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,mEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,mEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,mEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,mEAEF,CACE,mEACA,oEAEF,CACE,kEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,mEAEF,CACE,mEACA,mEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,mEAEF,CACE,mEACA,oEAEF,CACE,mEACA,mEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,kEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,mEAEF,CACE,mEACA,mEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,kEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,mEAEF,CACE,mEACA,oEAEF,CACE,mEACA,mEAEF,CACE,mEACA,oEAEF,CACE,kEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,iEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,kEACA,oEAEF,CACE,mEACA,mEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,mEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,mEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CACE,mEACA,mEAEF,CACE,mEACA,oEAEF,CACE,mEACA,oEAEF,CA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","sources":["../../../common/node_modules/http-auth-utils/dist/index.js","../../../common/node_modules/http-auth-utils/dist/mechanisms/basic.js","../../../common/node_modules/http-auth-utils/dist/mechanisms/bearer.js","../../../common/node_modules/http-auth-utils/dist/mechanisms/digest.js","../../../common/node_modules/http-auth-utils/dist/utils.js","../../../external/werift/node_modules/@fidm/asn1/build/asn1.js","../../../external/werift/node_modules/@fidm/asn1/build/common.js","../../../external/werift/node_modules/@fidm/asn1/build/index.js","../../../external/werift/node_modules/@fidm/asn1/build/pem.js","../../../external/werift/node_modules/@fidm/x509/build/common.js","../../../external/werift/node_modules/@fidm/x509/build/index.js","../../../external/werift/node_modules/@fidm/x509/build/pki.js","../../../external/werift/node_modules/@fidm/x509/build/x509.js","../../../external/werift/node_modules/@minhducsun2002/leb128/dist/index.js","../../../external/werift/node_modules/@peculiar/asn1-schema/build/es2015/enums.js","../../../external/werift/node_modules/@peculiar/asn1-schema/build/es2015/types/bit_string.js","../../../external/werift/node_modules/@peculiar/asn1-schema/build/es2015/types/octet_string.js","../../../external/werift/node_modules/@peculiar/asn1-schema/build/es2015/converters.js","../../../external/werift/node_modules/@peculiar/asn1-schema/build/es2015/helper.js","../../../external/werift/node_modules/@peculiar/asn1-schema/build/es2015/storage.js","../../../external/werift/node_modules/@peculiar/asn1-schema/build/es2015/schema.js","../../../external/werift/node_modules/@peculiar/asn1-schema/build/es2015/decorators.js","../../../external/werift/node_modules/@peculiar/asn1-schema/build/es2015/errors/schema_validation.js","../../../external/werift/node_modules/@peculiar/asn1-schema/build/es2015/parser.js","../../../external/werift/node_modules/@peculiar/asn1-schema/build/es2015/serializer.js","../../../external/werift/node_modules/@peculiar/asn1-schema/build/es2015/objects.js","../../../external/werift/node_modules/@peculiar/asn1-schema/build/es2015/convert.js","../../../external/werift/node_modules/@peculiar/json-schema/build/index.es.js","../../../external/werift/node_modules/webcrypto-core/build/webcrypto-core.es.js","../../../external/werift/node_modules/@peculiar/webcrypto/build/webcrypto.es.js","../../../external/werift/node_modules/@peculiar/asn1-x509/build/es2015/name.js","../../../external/werift/node_modules/@peculiar/asn1-x509/build/es2015/ip_converter.js","../../../external/werift/node_modules/@peculiar/asn1-x509/build/es2015/general_name.js","../../../external/werift/node_modules/@peculiar/asn1-x509/build/es2015/object_identifiers.js","../../../external/werift/node_modules/@peculiar/asn1-x509/build/es2015/extensions/authority_information_access.js","../../../external/werift/node_modules/@peculiar/asn1-x509/build/es2015/extensions/authority_key_identifier.js","../../../external/werift/node_modules/@peculiar/asn1-x509/build/es2015/extensions/basic_constraints.js","../../../external/werift/node_modules/@peculiar/asn1-x509/build/es2015/general_names.js","../../../external/werift/node_modules/@peculiar/asn1-x509/build/es2015/extensions/certificate_issuer.js","../../../external/werift/node_modules/@peculiar/asn1-x509/build/es2015/extensions/certificate_policies.js","../../../external/werift/node_modules/@peculiar/asn1-x509/build/es2015/extensions/crl_number.js","../../../external/werift/node_modules/@peculiar/asn1-x509/build/es2015/extensions/crl_delta_indicator.js","../../../external/werift/node_modules/@peculiar/asn1-x509/build/es2015/extensions/crl_distribution_points.js","../../../external/werift/node_modules/@peculiar/asn1-x509/build/es2015/extensions/crl_freshest.js","../../../external/werift/node_modules/@peculiar/asn1-x509/build/es2015/extensions/crl_issuing_distribution_point.js","../../../external/werift/node_modules/@peculiar/asn1-x509/build/es2015/extensions/crl_reason.js","../../../external/werift/node_modules/@peculiar/asn1-x509/build/es2015/extensions/extended_key_usage.js","../../../external/werift/node_modules/@peculiar/asn1-x509/build/es2015/extensions/inhibit_any_policy.js","../../../external/werift/node_modules/@peculiar/asn1-x509/build/es2015/extensions/invalidity_date.js","../../../external/werift/node_modules/@peculiar/asn1-x509/build/es2015/extensions/issuer_alternative_name.js","../../../external/werift/node_modules/@peculiar/asn1-x509/build/es2015/extensions/key_usage.js","../../../external/werift/node_modules/@peculiar/asn1-x509/build/es2015/extensions/name_constraints.js","../../../external/werift/node_modules/@peculiar/asn1-x509/build/es2015/extensions/policy_constraints.js","../../../external/werift/node_modules/@peculiar/asn1-x509/build/es2015/extensions/policy_mappings.js","../../../external/werift/node_modules/@peculiar/asn1-x509/build/es2015/extensions/subject_alternative_name.js","../../../external/werift/node_modules/@peculiar/asn1-x509/build/es2015/attribute.js","../../../external/werift/node_modules/@peculiar/asn1-x509/build/es2015/extensions/subject_directory_attributes.js","../../../external/werift/node_modules/@peculiar/asn1-x509/build/es2015/extensions/subject_key_identifier.js","../../../external/werift/node_modules/@peculiar/asn1-x509/build/es2015/extensions/private_key_usage_period.js","../../../external/werift/node_modules/@peculiar/asn1-x509/build/es2015/extensions/entrust_version_info.js","../../../external/werift/node_modules/@peculiar/asn1-x509/build/es2015/extensions/subject_info_access.js","../../../external/werift/node_modules/@peculiar/asn1-x509/build/es2015/algorithm_identifier.js","../../../external/werift/node_modules/@peculiar/asn1-x509/build/es2015/subject_public_key_info.js","../../../external/werift/node_modules/@peculiar/asn1-x509/build/es2015/time.js","../../../external/werift/node_modules/@peculiar/asn1-x509/build/es2015/validity.js","../../../external/werift/node_modules/@peculiar/asn1-x509/build/es2015/extension.js","../../../external/werift/node_modules/@peculiar/asn1-x509/build/es2015/types.js","../../../external/werift/node_modules/@peculiar/asn1-x509-attr/build/es2015/attr_spec.js","../../../external/werift/node_modules/@peculiar/asn1-x509/build/es2015/tbs_certificate.js","../../../external/werift/node_modules/@peculiar/asn1-x509/build/es2015/certificate.js","../../../external/werift/node_modules/@peculiar/asn1-x509/build/es2015/tbs_cert_list.js","../../../external/werift/node_modules/@peculiar/asn1-x509/build/es2015/certificate_list.js","../../../external/werift/node_modules/@peculiar/asn1-cms/build/es2015/attribute.js","../../../external/werift/node_modules/@peculiar/asn1-x509-attr/build/es2015/aa_clear_attrs.js","../../../external/werift/node_modules/@peculiar/asn1-x509-attr/build/es2015/aa_controls.js","../../../external/werift/node_modules/@peculiar/asn1-x509-attr/build/es2015/issuer_serial.js","../../../external/werift/node_modules/@peculiar/asn1-x509-attr/build/es2015/object_digest_info.js","../../../external/werift/node_modules/@peculiar/asn1-x509-attr/build/es2015/v2_form.js","../../../external/werift/node_modules/@peculiar/asn1-x509-attr/build/es2015/attr_cert_issuer.js","../../../external/werift/node_modules/@peculiar/asn1-x509-attr/build/es2015/attr_cert_validity_period.js","../../../external/werift/node_modules/@peculiar/asn1-x509-attr/build/es2015/holder.js","../../../external/werift/node_modules/@peculiar/asn1-x509-attr/build/es2015/attribute_certificate_info.js","../../../external/werift/node_modules/@peculiar/asn1-x509-attr/build/es2015/class_list.js","../../../external/werift/node_modules/@peculiar/asn1-x509-attr/build/es2015/attribute_certificate.js","../../../external/werift/node_modules/@peculiar/asn1-x509-attr/build/es2015/security_category.js","../../../external/werift/node_modules/@peculiar/asn1-x509-attr/build/es2015/clearance.js","../../../external/werift/node_modules/@peculiar/asn1-x509-attr/build/es2015/ietf_attr_syntax.js","../../../external/werift/node_modules/@peculiar/asn1-x509-attr/build/es2015/target.js","../../../external/werift/node_modules/@peculiar/asn1-x509-attr/build/es2015/proxy_info.js","../../../external/werift/node_modules/@peculiar/asn1-x509-attr/build/es2015/role_syntax.js","../../../external/werift/node_modules/@peculiar/asn1-x509-attr/build/es2015/svce_auth_info.js","../../../external/werift/node_modules/@peculiar/asn1-cms/build/es2015/certificate_choices.js","../../../external/werift/node_modules/@peculiar/asn1-cms/build/es2015/content_info.js","../../../external/werift/node_modules/@peculiar/asn1-cms/build/es2015/encapsulated_content_info.js","../../../external/werift/node_modules/@peculiar/asn1-cms/build/es2015/types.js","../../../external/werift/node_modules/@peculiar/asn1-cms/build/es2015/encrypted_content_info.js","../../../external/werift/node_modules/@peculiar/asn1-cms/build/es2015/issuer_and_serial_number.js","../../../external/werift/node_modules/@peculiar/asn1-cms/build/es2015/other_key_attribute.js","../../../external/werift/node_modules/@peculiar/asn1-cms/build/es2015/key_agree_recipient_info.js","../../../external/werift/node_modules/@peculiar/asn1-cms/build/es2015/key_trans_recipient_info.js","../../../external/werift/node_modules/@peculiar/asn1-cms/build/es2015/kek_recipient_info.js","../../../external/werift/node_modules/@peculiar/asn1-cms/build/es2015/password_recipient_info.js","../../../external/werift/node_modules/@peculiar/asn1-cms/build/es2015/recipient_info.js","../../../external/werift/node_modules/@peculiar/asn1-cms/build/es2015/recipient_infos.js","../../../external/werift/node_modules/@peculiar/asn1-cms/build/es2015/revocation_info_choice.js","../../../external/werift/node_modules/@peculiar/asn1-cms/build/es2015/originator_info.js","../../../external/werift/node_modules/@peculiar/asn1-cms/build/es2015/enveloped_data.js","../../../external/werift/node_modules/@peculiar/asn1-cms/build/es2015/object_identifiers.js","../../../external/werift/node_modules/@peculiar/asn1-cms/build/es2015/signer_identifier.js","../../../external/werift/node_modules/@peculiar/asn1-cms/build/es2015/signer_info.js","../../../external/werift/node_modules/@peculiar/asn1-cms/build/es2015/signed_data.js","../../../external/werift/node_modules/@peculiar/asn1-ecc/build/es2015/object_identifiers.js","../../../external/werift/node_modules/@peculiar/asn1-ecc/build/es2015/algorithms.js","../../../external/werift/node_modules/@peculiar/asn1-ecc/build/es2015/ec_parameters.js","../../../external/werift/node_modules/@peculiar/asn1-ecc/build/es2015/ec_private_key.js","../../../external/werift/node_modules/@peculiar/asn1-ecc/build/es2015/ec_signature_value.js","../../../external/werift/node_modules/@peculiar/asn1-rsa/build/es2015/object_identifiers.js","../../../external/werift/node_modules/@peculiar/asn1-rsa/build/es2015/algorithms.js","../../../external/werift/node_modules/@peculiar/asn1-rsa/build/es2015/parameters/rsaes_oaep.js","../../../external/werift/node_modules/@peculiar/asn1-rsa/build/es2015/parameters/rsassa_pss.js","../../../external/werift/node_modules/@peculiar/asn1-rsa/build/es2015/parameters/rsassa_pkcs1_v1_5.js","../../../external/werift/node_modules/@peculiar/asn1-rsa/build/es2015/other_prime_info.js","../../../external/werift/node_modules/@peculiar/asn1-rsa/build/es2015/rsa_private_key.js","../../../external/werift/node_modules/@peculiar/asn1-rsa/build/es2015/rsa_public_key.js","../../../external/werift/node_modules/tsyringe/dist/esm5/types/lifecycle.js","../../../external/werift/node_modules/tsyringe/node_modules/tslib/tslib.es6.js","../../../external/werift/node_modules/tsyringe/dist/esm5/providers/class-provider.js","../../../external/werift/node_modules/tsyringe/dist/esm5/providers/factory-provider.js","../../../external/werift/node_modules/tsyringe/dist/esm5/lazy-helpers.js","../../../external/werift/node_modules/tsyringe/dist/esm5/providers/injection-token.js","../../../external/werift/node_modules/tsyringe/dist/esm5/providers/token-provider.js","../../../external/werift/node_modules/tsyringe/dist/esm5/providers/value-provider.js","../../../external/werift/node_modules/tsyringe/dist/esm5/registry-base.js","../../../external/werift/node_modules/tsyringe/dist/esm5/registry.js","../../../external/werift/node_modules/tsyringe/dist/esm5/resolution-context.js","../../../external/werift/node_modules/tsyringe/dist/esm5/error-helpers.js","../../../external/werift/node_modules/tsyringe/dist/esm5/interceptors.js","../../../external/werift/node_modules/tsyringe/dist/esm5/dependency-container.js","../../../external/werift/node_modules/tsyringe/dist/esm5/providers/provider.js","../../../external/werift/node_modules/tsyringe/dist/esm5/types/disposable.js","../../../external/werift/node_modules/tsyringe/dist/esm5/reflection-helpers.js","../../../external/werift/node_modules/tsyringe/dist/esm5/decorators/injectable.js","../../../external/werift/node_modules/tsyringe/dist/esm5/index.js","../../../external/werift/node_modules/@peculiar/asn1-pfx/build/es2015/attribute.js","../../../external/werift/node_modules/@peculiar/asn1-pfx/build/es2015/authenticated_safe.js","../../../external/werift/node_modules/@peculiar/asn1-pfx/build/es2015/bags/cert_bag.js","../../../external/werift/node_modules/@peculiar/asn1-pfx/build/es2015/bags/crl_bag.js","../../../external/werift/node_modules/@peculiar/asn1-pkcs8/build/es2015/encrypted_private_key_info.js","../../../external/werift/node_modules/@peculiar/asn1-pkcs8/build/es2015/private_key_info.js","../../../external/werift/node_modules/@peculiar/asn1-pfx/build/es2015/bags/key_bag.js","../../../external/werift/node_modules/@peculiar/asn1-pfx/build/es2015/bags/pkcs8_shrouded_key_bag.js","../../../external/werift/node_modules/@peculiar/asn1-pfx/build/es2015/bags/secret_bag.js","../../../external/werift/node_modules/@peculiar/asn1-pfx/build/es2015/mac_data.js","../../../external/werift/node_modules/@peculiar/asn1-pfx/build/es2015/pfx.js","../../../external/werift/node_modules/@peculiar/asn1-pfx/build/es2015/safe_bag.js","../../../external/werift/node_modules/@peculiar/asn1-pkcs9/build/es2015/index.js","../../../external/werift/node_modules/@peculiar/asn1-csr/build/es2015/attributes.js","../../../external/werift/node_modules/@peculiar/asn1-csr/build/es2015/certification_request_info.js","../../../external/werift/node_modules/@peculiar/asn1-csr/build/es2015/certification_request.js","../../../external/werift/node_modules/@peculiar/x509/build/x509.es.js","../../../external/werift/node_modules/aes-js/index.js","../../../external/werift/node_modules/pvutils/build/utils.es.js","../../../external/werift/node_modules/asn1js/build/index.es.js","../../../external/werift/node_modules/big-integer/BigInteger.js","../../../external/werift/node_modules/binary-data/src/index.js","../../../external/werift/node_modules/binary-data/src/node_modules/internal/buffer-list.js","../../../external/werift/node_modules/binary-data/src/node_modules/internal/linked-list.js","../../../external/werift/node_modules/binary-data/src/node_modules/internal/meta.js","../../../external/werift/node_modules/binary-data/src/node_modules/internal/symbols.js","../../../external/werift/node_modules/binary-data/src/node_modules/lib/binary-stream.js","../../../external/werift/node_modules/binary-data/src/node_modules/lib/decode.js","../../../external/werift/node_modules/binary-data/src/node_modules/lib/encode.js","../../../external/werift/node_modules/binary-data/src/node_modules/lib/encoding-length.js","../../../external/werift/node_modules/binary-data/src/node_modules/lib/not-enough-data-error.js","../../../external/werift/node_modules/binary-data/src/node_modules/lib/transaction.js","../../../external/werift/node_modules/binary-data/src/node_modules/lib/util.js","../../../external/werift/node_modules/binary-data/src/node_modules/types/array.js","../../../external/werift/node_modules/binary-data/src/node_modules/types/bool.js","../../../external/werift/node_modules/binary-data/src/node_modules/types/buffer.js","../../../external/werift/node_modules/binary-data/src/node_modules/types/numbers.js","../../../external/werift/node_modules/binary-data/src/node_modules/types/reserved.js","../../../external/werift/node_modules/binary-data/src/node_modules/types/select.js","../../../external/werift/node_modules/binary-data/src/node_modules/types/string.js","../../../external/werift/node_modules/binary-data/src/node_modules/types/when.js","../../../external/werift/node_modules/bn.js/lib/bn.js","../../../external/werift/node_modules/brorand/index.js","../../../external/werift/node_modules/buffer-crc32/index.js","../../../external/werift/node_modules/date-fns/esm/_lib/toInteger/index.js","../../../external/werift/node_modules/date-fns/esm/_lib/requiredArgs/index.js","../../../external/werift/node_modules/date-fns/esm/toDate/index.js","../../../external/werift/node_modules/date-fns/esm/addMonths/index.js","../../../external/werift/node_modules/date-fns/esm/addYears/index.js","../../../external/werift/node_modules/debug/src/browser.js","../../../external/werift/node_modules/debug/src/common.js","../../../external/werift/node_modules/debug/src/index.js","../../../external/werift/node_modules/debug/src/node.js","../../../external/werift/node_modules/elliptic/lib/elliptic.js","../../../external/werift/node_modules/elliptic/lib/elliptic/curve/base.js","../../../external/werift/node_modules/elliptic/lib/elliptic/curve/edwards.js","../../../external/werift/node_modules/elliptic/lib/elliptic/curve/index.js","../../../external/werift/node_modules/elliptic/lib/elliptic/curve/mont.js","../../../external/werift/node_modules/elliptic/lib/elliptic/curve/short.js","../../../external/werift/node_modules/elliptic/lib/elliptic/curves.js","../../../external/werift/node_modules/elliptic/lib/elliptic/ec/index.js","../../../external/werift/node_modules/elliptic/lib/elliptic/ec/key.js","../../../external/werift/node_modules/elliptic/lib/elliptic/ec/signature.js","../../../external/werift/node_modules/elliptic/lib/elliptic/eddsa/index.js","../../../external/werift/node_modules/elliptic/lib/elliptic/eddsa/key.js","../../../external/werift/node_modules/elliptic/lib/elliptic/eddsa/signature.js","../../../external/werift/node_modules/elliptic/lib/elliptic/precomputed/secp256k1.js","../../../external/werift/node_modules/elliptic/lib/elliptic/utils.js","../../../external/werift/node_modules/generate-function/index.js","../../../external/werift/node_modules/has-flag/index.js","../../../external/werift/node_modules/hash.js/lib/hash.js","../../../external/werift/node_modules/hash.js/lib/hash/common.js","../../../external/werift/node_modules/hash.js/lib/hash/hmac.js","../../../external/werift/node_modules/hash.js/lib/hash/ripemd.js","../../../external/werift/node_modules/hash.js/lib/hash/sha.js","../../../external/werift/node_modules/hash.js/lib/hash/sha/1.js","../../../external/werift/node_modules/hash.js/lib/hash/sha/224.js","../../../external/werift/node_modules/hash.js/lib/hash/sha/256.js","../../../external/werift/node_modules/hash.js/lib/hash/sha/384.js","../../../external/werift/node_modules/hash.js/lib/hash/sha/512.js","../../../external/werift/node_modules/hash.js/lib/hash/sha/common.js","../../../external/werift/node_modules/hash.js/lib/hash/utils.js","../../../external/werift/node_modules/hmac-drbg/lib/hmac-drbg.js","../../../external/werift/node_modules/inherits/inherits.js","../../../external/werift/node_modules/inherits/inherits_browser.js","../../../external/werift/node_modules/int64-buffer/int64-buffer.js","../../../external/werift/node_modules/ipaddr.js/lib/ipaddr.js","../../../external/werift/node_modules/is-plain-object/index.js","../../../external/werift/node_modules/is-property/is-property.js","../../../external/werift/node_modules/isobject/index.js","../../../external/werift/node_modules/jspack/jspack.js","../../../external/werift/node_modules/lodash/_DataView.js","../../../external/werift/node_modules/lodash/_Hash.js","../../../external/werift/node_modules/lodash/_ListCache.js","../../../external/werift/node_modules/lodash/_Map.js","../../../external/werift/node_modules/lodash/_MapCache.js","../../../external/werift/node_modules/lodash/_Promise.js","../../../external/werift/node_modules/lodash/_Set.js","../../../external/werift/node_modules/lodash/_SetCache.js","../../../external/werift/node_modules/lodash/_Stack.js","../../../external/werift/node_modules/lodash/_Symbol.js","../../../external/werift/node_modules/lodash/_Uint8Array.js","../../../external/werift/node_modules/lodash/_WeakMap.js","../../../external/werift/node_modules/lodash/_apply.js","../../../external/werift/node_modules/lodash/_arrayEach.js","../../../external/werift/node_modules/lodash/_arrayFilter.js","../../../external/werift/node_modules/lodash/_arrayLikeKeys.js","../../../external/werift/node_modules/lodash/_arrayPush.js","../../../external/werift/node_modules/lodash/_arraySome.js","../../../external/werift/node_modules/lodash/_assignMergeValue.js","../../../external/werift/node_modules/lodash/_assignValue.js","../../../external/werift/node_modules/lodash/_assocIndexOf.js","../../../external/werift/node_modules/lodash/_baseAssign.js","../../../external/werift/node_modules/lodash/_baseAssignIn.js","../../../external/werift/node_modules/lodash/_baseAssignValue.js","../../../external/werift/node_modules/lodash/_baseClone.js","../../../external/werift/node_modules/lodash/_baseCreate.js","../../../external/werift/node_modules/lodash/_baseFor.js","../../../external/werift/node_modules/lodash/_baseGetAllKeys.js","../../../external/werift/node_modules/lodash/_baseGetTag.js","../../../external/werift/node_modules/lodash/_baseIsArguments.js","../../../external/werift/node_modules/lodash/_baseIsEqual.js","../../../external/werift/node_modules/lodash/_baseIsEqualDeep.js","../../../external/werift/node_modules/lodash/_baseIsMap.js","../../../external/werift/node_modules/lodash/_baseIsNative.js","../../../external/werift/node_modules/lodash/_baseIsSet.js","../../../external/werift/node_modules/lodash/_baseIsTypedArray.js","../../../external/werift/node_modules/lodash/_baseKeys.js","../../../external/werift/node_modules/lodash/_baseKeysIn.js","../../../external/werift/node_modules/lodash/_baseMerge.js","../../../external/werift/node_modules/lodash/_baseMergeDeep.js","../../../external/werift/node_modules/lodash/_baseRange.js","../../../external/werift/node_modules/lodash/_baseRest.js","../../../external/werift/node_modules/lodash/_baseSetToString.js","../../../external/werift/node_modules/lodash/_baseTimes.js","../../../external/werift/node_modules/lodash/_baseTrim.js","../../../external/werift/node_modules/lodash/_baseUnary.js","../../../external/werift/node_modules/lodash/_cacheHas.js","../../../external/werift/node_modules/lodash/_castFunction.js","../../../external/werift/node_modules/lodash/_cloneArrayBuffer.js","../../../external/werift/node_modules/lodash/_cloneBuffer.js","../../../external/werift/node_modules/lodash/_cloneDataView.js","../../../external/werift/node_modules/lodash/_cloneRegExp.js","../../../external/werift/node_modules/lodash/_cloneSymbol.js","../../../external/werift/node_modules/lodash/_cloneTypedArray.js","../../../external/werift/node_modules/lodash/_copyArray.js","../../../external/werift/node_modules/lodash/_copyObject.js","../../../external/werift/node_modules/lodash/_copySymbols.js","../../../external/werift/node_modules/lodash/_copySymbolsIn.js","../../../external/werift/node_modules/lodash/_coreJsData.js","../../../external/werift/node_modules/lodash/_createAssigner.js","../../../external/werift/node_modules/lodash/_createBaseFor.js","../../../external/werift/node_modules/lodash/_createRange.js","../../../external/werift/node_modules/lodash/_defineProperty.js","../../../external/werift/node_modules/lodash/_equalArrays.js","../../../external/werift/node_modules/lodash/_equalByTag.js","../../../external/werift/node_modules/lodash/_equalObjects.js","../../../external/werift/node_modules/lodash/_freeGlobal.js","../../../external/werift/node_modules/lodash/_getAllKeys.js","../../../external/werift/node_modules/lodash/_getAllKeysIn.js","../../../external/werift/node_modules/lodash/_getMapData.js","../../../external/werift/node_modules/lodash/_getNative.js","../../../external/werift/node_modules/lodash/_getPrototype.js","../../../external/werift/node_modules/lodash/_getRawTag.js","../../../external/werift/node_modules/lodash/_getSymbols.js","../../../external/werift/node_modules/lodash/_getSymbolsIn.js","../../../external/werift/node_modules/lodash/_getTag.js","../../../external/werift/node_modules/lodash/_getValue.js","../../../external/werift/node_modules/lodash/_hashClear.js","../../../external/werift/node_modules/lodash/_hashDelete.js","../../../external/werift/node_modules/lodash/_hashGet.js","../../../external/werift/node_modules/lodash/_hashHas.js","../../../external/werift/node_modules/lodash/_hashSet.js","../../../external/werift/node_modules/lodash/_initCloneArray.js","../../../external/werift/node_modules/lodash/_initCloneByTag.js","../../../external/werift/node_modules/lodash/_initCloneObject.js","../../../external/werift/node_modules/lodash/_isIndex.js","../../../external/werift/node_modules/lodash/_isIterateeCall.js","../../../external/werift/node_modules/lodash/_isKeyable.js","../../../external/werift/node_modules/lodash/_isMasked.js","../../../external/werift/node_modules/lodash/_isPrototype.js","../../../external/werift/node_modules/lodash/_listCacheClear.js","../../../external/werift/node_modules/lodash/_listCacheDelete.js","../../../external/werift/node_modules/lodash/_listCacheGet.js","../../../external/werift/node_modules/lodash/_listCacheHas.js","../../../external/werift/node_modules/lodash/_listCacheSet.js","../../../external/werift/node_modules/lodash/_mapCacheClear.js","../../../external/werift/node_modules/lodash/_mapCacheDelete.js","../../../external/werift/node_modules/lodash/_mapCacheGet.js","../../../external/werift/node_modules/lodash/_mapCacheHas.js","../../../external/werift/node_modules/lodash/_mapCacheSet.js","../../../external/werift/node_modules/lodash/_mapToArray.js","../../../external/werift/node_modules/lodash/_nativeCreate.js","../../../external/werift/node_modules/lodash/_nativeKeys.js","../../../external/werift/node_modules/lodash/_nativeKeysIn.js","../../../external/werift/node_modules/lodash/_nodeUtil.js","../../../external/werift/node_modules/lodash/_objectToString.js","../../../external/werift/node_modules/lodash/_overArg.js","../../../external/werift/node_modules/lodash/_overRest.js","../../../external/werift/node_modules/lodash/_root.js","../../../external/werift/node_modules/lodash/_safeGet.js","../../../external/werift/node_modules/lodash/_setCacheAdd.js","../../../external/werift/node_modules/lodash/_setCacheHas.js","../../../external/werift/node_modules/lodash/_setToArray.js","../../../external/werift/node_modules/lodash/_setToString.js","../../../external/werift/node_modules/lodash/_shortOut.js","../../../external/werift/node_modules/lodash/_stackClear.js","../../../external/werift/node_modules/lodash/_stackDelete.js","../../../external/werift/node_modules/lodash/_stackGet.js","../../../external/werift/node_modules/lodash/_stackHas.js","../../../external/werift/node_modules/lodash/_stackSet.js","../../../external/werift/node_modules/lodash/_toSource.js","../../../external/werift/node_modules/lodash/_trimmedEndIndex.js","../../../external/werift/node_modules/lodash/cloneDeep.js","../../../external/werift/node_modules/lodash/constant.js","../../../external/werift/node_modules/lodash/eq.js","../../../external/werift/node_modules/lodash/identity.js","../../../external/werift/node_modules/lodash/isArguments.js","../../../external/werift/node_modules/lodash/isArray.js","../../../external/werift/node_modules/lodash/isArrayLike.js","../../../external/werift/node_modules/lodash/isArrayLikeObject.js","../../../external/werift/node_modules/lodash/isBuffer.js","../../../external/werift/node_modules/lodash/isEqual.js","../../../external/werift/node_modules/lodash/isFunction.js","../../../external/werift/node_modules/lodash/isLength.js","../../../external/werift/node_modules/lodash/isMap.js","../../../external/werift/node_modules/lodash/isObject.js","../../../external/werift/node_modules/lodash/isObjectLike.js","../../../external/werift/node_modules/lodash/isPlainObject.js","../../../external/werift/node_modules/lodash/isSet.js","../../../external/werift/node_modules/lodash/isSymbol.js","../../../external/werift/node_modules/lodash/isTypedArray.js","../../../external/werift/node_modules/lodash/keys.js","../../../external/werift/node_modules/lodash/keysIn.js","../../../external/werift/node_modules/lodash/memoize.js","../../../external/werift/node_modules/lodash/mergeWith.js","../../../external/werift/node_modules/lodash/range.js","../../../external/werift/node_modules/lodash/stubArray.js","../../../external/werift/node_modules/lodash/stubFalse.js","../../../external/werift/node_modules/lodash/times.js","../../../external/werift/node_modules/lodash/toFinite.js","../../../external/werift/node_modules/lodash/toInteger.js","../../../external/werift/node_modules/lodash/toNumber.js","../../../external/werift/node_modules/lodash/toPlainObject.js","../../../external/werift/node_modules/minimalistic-assert/index.js","../../../external/werift/node_modules/minimalistic-crypto-utils/lib/utils.js","../../../external/werift/node_modules/ms/index.js","../../../external/werift/node_modules/nano-time/index.js","../../../external/werift/node_modules/pvtsutils/build/index.es.js","../../../external/werift/node_modules/reflect-metadata/Reflect.js","../../../external/werift/node_modules/rx.mini/lib/core/index.js","../../../external/werift/node_modules/rx.mini/lib/extensions/buffer/index.js","../../../external/werift/node_modules/rx.mini/lib/extensions/pack/index.js","../../../external/werift/node_modules/rx.mini/lib/extensions/wait/index.js","../../../external/werift/node_modules/rx.mini/lib/index.js","../../../external/werift/node_modules/supports-color/index.js","../../../external/werift/node_modules/tslib/tslib.es6.js","../../../external/werift/node_modules/turbo-crc32/crc32c.js","../../../external/werift/node_modules/turbo-crc32/src/crc32-by-1.js","../../../external/werift/node_modules/turbo-crc32/src/crc32-by-4.js","../../../external/werift/node_modules/turbo-crc32/src/crc32-by-8.js","../../../external/werift/node_modules/turbo-crc32/src/create-table.js","../../../external/werift/node_modules/tweetnacl/nacl-fast.js","../../../external/werift/node_modules/uuid/dist/esm-node/rng.js","../../../external/werift/node_modules/uuid/dist/esm-node/regex.js","../../../external/werift/node_modules/uuid/dist/esm-node/validate.js","../../../external/werift/node_modules/uuid/dist/esm-node/stringify.js","../../../external/werift/node_modules/uuid/dist/esm-node/v1.js","../../../external/werift/node_modules/uuid/dist/esm-node/parse.js","../../../external/werift/node_modules/uuid/dist/esm-node/v35.js","../../../external/werift/node_modules/uuid/dist/esm-node/md5.js","../../../external/werift/node_modules/uuid/dist/esm-node/v3.js","../../../external/werift/node_modules/uuid/dist/esm-node/native.js","../../../external/werift/node_modules/uuid/dist/esm-node/v4.js","../../../external/werift/node_modules/uuid/dist/esm-node/sha1.js","../../../external/werift/node_modules/uuid/dist/esm-node/v5.js","../../../external/werift/node_modules/uuid/dist/esm-node/nil.js","../../../external/werift/node_modules/uuid/dist/esm-node/version.js","../../../external/werift/packages/ice/node_modules/ip/lib/ip.js","../../../external/werift/packages/ice/node_modules/p-cancelable/index.js","../node_modules/ip/lib/ip.js","../../../sdk/dist/src/index.js","../../../sdk/dist/src/storage-settings.js","../../../sdk/dist/types/gen/index.js","../../../common/src/autoenable-mixin-provider.ts","../../../common/src/deferred.ts","../../../common/src/ffmpeg-helpers.ts","../../../common/src/listen-cluster.ts","../../../common/src/media-helpers.ts","../../../common/src/promise-utils.ts","../../../common/src/read-stream.ts","../../../common/src/rtc-connect.ts","../../../common/src/rtc-signaling.ts","../../../common/src/rtsp-server.ts","../../../common/src/sdp-utils.ts","../../../common/src/settings-mixin.ts","../../../common/src/sleep.ts","../../../external/werift/packages/common/src/array.ts","../../../external/werift/packages/common/src/binary.ts","../../../external/werift/packages/common/src/index.ts","../../../external/werift/packages/common/src/log.ts","../../../external/werift/packages/common/src/network.ts","../../../external/werift/packages/common/src/number.ts","../../../external/werift/packages/common/src/promise.ts","../../../external/werift/packages/dtls/src/cipher/const.ts","../../../external/werift/packages/dtls/src/cipher/create.ts","../../../external/werift/packages/dtls/src/cipher/key-exchange.ts","../../../external/werift/packages/dtls/src/cipher/namedCurve.ts","../../../external/werift/packages/dtls/src/cipher/prf.ts","../../../external/werift/packages/dtls/src/cipher/suites/abstract.ts","../../../external/werift/packages/dtls/src/cipher/suites/aead.ts","../../../external/werift/packages/dtls/src/client.ts","../../../external/werift/packages/dtls/src/context/cipher.ts","../../../external/werift/packages/dtls/src/context/dtls.ts","../../../external/werift/packages/dtls/src/context/srtp.ts","../../../external/werift/packages/dtls/src/context/transport.ts","../../../external/werift/packages/dtls/src/flight/client/flight1.ts","../../../external/werift/packages/dtls/src/flight/client/flight3.ts","../../../external/werift/packages/dtls/src/flight/client/flight5.ts","../../../external/werift/packages/dtls/src/flight/flight.ts","../../../external/werift/packages/dtls/src/flight/server/flight2.ts","../../../external/werift/packages/dtls/src/flight/server/flight4.ts","../../../external/werift/packages/dtls/src/flight/server/flight6.ts","../../../external/werift/packages/dtls/src/handshake/binary.ts","../../../external/werift/packages/dtls/src/handshake/const.ts","../../../external/werift/packages/dtls/src/handshake/extensions/ellipticCurves.ts","../../../external/werift/packages/dtls/src/handshake/extensions/extendedMasterSecret.ts","../../../external/werift/packages/dtls/src/handshake/extensions/renegotiationIndication.ts","../../../external/werift/packages/dtls/src/handshake/extensions/signature.ts","../../../external/werift/packages/dtls/src/handshake/extensions/useSrtp.ts","../../../external/werift/packages/dtls/src/handshake/message/alert.ts","../../../external/werift/packages/dtls/src/handshake/message/certificate.ts","../../../external/werift/packages/dtls/src/handshake/message/changeCipherSpec.ts","../../../external/werift/packages/dtls/src/handshake/message/client/certificateVerify.ts","../../../external/werift/packages/dtls/src/handshake/message/client/hello.ts","../../../external/werift/packages/dtls/src/handshake/message/client/keyExchange.ts","../../../external/werift/packages/dtls/src/handshake/message/finished.ts","../../../external/werift/packages/dtls/src/handshake/message/server/certificateRequest.ts","../../../external/werift/packages/dtls/src/handshake/message/server/hello.ts","../../../external/werift/packages/dtls/src/handshake/message/server/helloDone.ts","../../../external/werift/packages/dtls/src/handshake/message/server/helloVerifyRequest.ts","../../../external/werift/packages/dtls/src/handshake/message/server/keyExchange.ts","../../../external/werift/packages/dtls/src/handshake/random.ts","../../../external/werift/packages/dtls/src/helper.ts","../../../external/werift/packages/dtls/src/index.ts","../../../external/werift/packages/dtls/src/record/builder.ts","../../../external/werift/packages/dtls/src/record/const.ts","../../../external/werift/packages/dtls/src/record/message/fragment.ts","../../../external/werift/packages/dtls/src/record/message/header.ts","../../../external/werift/packages/dtls/src/record/message/plaintext.ts","../../../external/werift/packages/dtls/src/record/receive.ts","../../../external/werift/packages/dtls/src/server.ts","../../../external/werift/packages/dtls/src/socket.ts","../../../external/werift/packages/dtls/src/transport.ts","../../../external/werift/packages/dtls/src/util/binary.ts","../../../external/werift/packages/ice/src/candidate.ts","../../../external/werift/packages/ice/src/dns/lookup.ts","../../../external/werift/packages/ice/src/exceptions.ts","../../../external/werift/packages/ice/src/helper.ts","../../../external/werift/packages/ice/src/ice.ts","../../../external/werift/packages/ice/src/index.ts","../../../external/werift/packages/ice/src/stun/attributes.ts","../../../external/werift/packages/ice/src/stun/const.ts","../../../external/werift/packages/ice/src/stun/message.ts","../../../external/werift/packages/ice/src/stun/protocol.ts","../../../external/werift/packages/ice/src/stun/transaction.ts","../../../external/werift/packages/ice/src/transport.ts","../../../external/werift/packages/ice/src/turn/protocol.ts","../../../external/werift/packages/ice/src/utils.ts","../../../external/werift/packages/rtp/src/codec/av1.ts","../../../external/werift/packages/rtp/src/codec/base.ts","../../../external/werift/packages/rtp/src/codec/h264.ts","../../../external/werift/packages/rtp/src/codec/index.ts","../../../external/werift/packages/rtp/src/codec/opus.ts","../../../external/werift/packages/rtp/src/codec/vp8.ts","../../../external/werift/packages/rtp/src/codec/vp9.ts","../../../external/werift/packages/rtp/src/container/ebml/ebml.ts","../../../external/werift/packages/rtp/src/container/ebml/id.ts","../../../external/werift/packages/rtp/src/container/ebml/index.ts","../../../external/werift/packages/rtp/src/container/ebml/typedArrayUtils.ts","../../../external/werift/packages/rtp/src/container/webm.ts","../../../external/werift/packages/rtp/src/helper.ts","../../../external/werift/packages/rtp/src/index.ts","../../../external/werift/packages/rtp/src/processor/depacketizer.ts","../../../external/werift/packages/rtp/src/processor/depacketizerCallback.ts","../../../external/werift/packages/rtp/src/processor/depacketizerTransformer.ts","../../../external/werift/packages/rtp/src/processor/index.ts","../../../external/werift/packages/rtp/src/processor/jitterBuffer.ts","../../../external/werift/packages/rtp/src/processor/jitterBufferCallback.ts","../../../external/werift/packages/rtp/src/processor/jitterBufferTransformer.ts","../../../external/werift/packages/rtp/src/processor/lipsync.ts","../../../external/werift/packages/rtp/src/processor/lipsyncCallback.ts","../../../external/werift/packages/rtp/src/processor/ntpTime.ts","../../../external/werift/packages/rtp/src/processor/ntpTimeCallback.ts","../../../external/werift/packages/rtp/src/processor/rtpTime.ts","../../../external/werift/packages/rtp/src/processor/rtpTimeCallback.ts","../../../external/werift/packages/rtp/src/processor/source/index.ts","../../../external/werift/packages/rtp/src/processor/source/rtcpCallback.ts","../../../external/werift/packages/rtp/src/processor/source/rtpCallback.ts","../../../external/werift/packages/rtp/src/processor/source/rtpStream.ts","../../../external/werift/packages/rtp/src/processor/webm.ts","../../../external/werift/packages/rtp/src/processor/webmCallback.ts","../../../external/werift/packages/rtp/src/processor/webmStream.ts","../../../external/werift/packages/rtp/src/processor_old/base.ts","../../../external/werift/packages/rtp/src/processor_old/lipsync.ts","../../../external/werift/packages/rtp/src/rtcp/header.ts","../../../external/werift/packages/rtp/src/rtcp/psfb/fullIntraRequest.ts","../../../external/werift/packages/rtp/src/rtcp/psfb/index.ts","../../../external/werift/packages/rtp/src/rtcp/psfb/pictureLossIndication.ts","../../../external/werift/packages/rtp/src/rtcp/psfb/remb.ts","../../../external/werift/packages/rtp/src/rtcp/rr.ts","../../../external/werift/packages/rtp/src/rtcp/rtcp.ts","../../../external/werift/packages/rtp/src/rtcp/rtpfb/index.ts","../../../external/werift/packages/rtp/src/rtcp/rtpfb/nack.ts","../../../external/werift/packages/rtp/src/rtcp/rtpfb/twcc.ts","../../../external/werift/packages/rtp/src/rtcp/sdes.ts","../../../external/werift/packages/rtp/src/rtcp/sr.ts","../../../external/werift/packages/rtp/src/rtp/red/encoder.ts","../../../external/werift/packages/rtp/src/rtp/red/handler.ts","../../../external/werift/packages/rtp/src/rtp/red/packet.ts","../../../external/werift/packages/rtp/src/rtp/rtp.ts","../../../external/werift/packages/rtp/src/srtp/cipher/ctr.ts","../../../external/werift/packages/rtp/src/srtp/cipher/gcm.ts","../../../external/werift/packages/rtp/src/srtp/cipher/index.ts","../../../external/werift/packages/rtp/src/srtp/const.ts","../../../external/werift/packages/rtp/src/srtp/context/context.ts","../../../external/werift/packages/rtp/src/srtp/context/srtcp.ts","../../../external/werift/packages/rtp/src/srtp/context/srtp.ts","../../../external/werift/packages/rtp/src/srtp/session.ts","../../../external/werift/packages/rtp/src/srtp/srtcp.ts","../../../external/werift/packages/rtp/src/srtp/srtp.ts","../../../external/werift/packages/sctp/src/chunk.ts","../../../external/werift/packages/sctp/src/const.ts","../../../external/werift/packages/sctp/src/helper.ts","../../../external/werift/packages/sctp/src/index.ts","../../../external/werift/packages/sctp/src/param.ts","../../../external/werift/packages/sctp/src/sctp.ts","../../../external/werift/packages/webrtc/src/const.ts","../../../external/werift/packages/webrtc/src/dataChannel.ts","../../../external/werift/packages/webrtc/src/helper.ts","../../../external/werift/packages/webrtc/src/index.ts","../../../external/werift/packages/webrtc/src/media/extension/rtcpFeedback.ts","../../../external/werift/packages/webrtc/src/media/extension/rtpExtension.ts","../../../external/werift/packages/webrtc/src/media/parameters.ts","../../../external/werift/packages/webrtc/src/media/receiver/nack.ts","../../../external/werift/packages/webrtc/src/media/receiver/receiverTwcc.ts","../../../external/werift/packages/webrtc/src/media/receiver/statistics.ts","../../../external/werift/packages/webrtc/src/media/router.ts","../../../external/werift/packages/webrtc/src/media/rtpReceiver.ts","../../../external/werift/packages/webrtc/src/media/rtpSender.ts","../../../external/werift/packages/webrtc/src/media/rtpTransceiver.ts","../../../external/werift/packages/webrtc/src/media/sender/cumulativeResult.ts","../../../external/werift/packages/webrtc/src/media/sender/senderBWE.ts","../../../external/werift/packages/webrtc/src/media/track.ts","../../../external/werift/packages/webrtc/src/nonstandard/recorder/index.ts","../../../external/werift/packages/webrtc/src/nonstandard/recorder/writer/index.ts","../../../external/werift/packages/webrtc/src/nonstandard/recorder/writer/webm.ts","../../../external/werift/packages/webrtc/src/nonstandard/userMedia.ts","../../../external/werift/packages/webrtc/src/peerConnection.ts","../../../external/werift/packages/webrtc/src/sdp.ts","../../../external/werift/packages/webrtc/src/transport/dtls.ts","../../../external/werift/packages/webrtc/src/transport/ice.ts","../../../external/werift/packages/webrtc/src/transport/sctp.ts","../../../external/werift/packages/webrtc/src/types/domain.ts","../../../external/werift/packages/webrtc/src/utils.ts","../../homekit/src/types/camera/h264-packetizer.ts","../../homekit/src/types/camera/jitter-buffer.ts","../src/datachannel-debouncer.ts","../src/ffmpeg-to-wrtc.ts","../src/ice-servers.ts","../src/main.ts","../src/peerconnection-util.ts","../src/rtp-forwarders.ts","../src/session-control.ts","../src/webrtc-camera.ts","../src/webrtc-required-codecs.ts","../src/werift-signaling-session.ts","../src/werift-util.ts","../src/werift.ts","../src/wrtc-to-rtsp.ts","../src/zygote.ts","../../../server/src/listen-zero.ts","../../../server/src/media-helpers.ts","../../../server/src/rpc-buffer-serializer.ts","../../../server/src/rpc-serializer.ts","../../../server/src/rpc.ts","../../../server/src/sleep.ts","../external node-commonjs \"buffer\"","../external node-commonjs \"child_process\"","../external node-commonjs \"crypto\"","../external node-commonjs \"dgram\"","../external node-commonjs \"events\"","../external node-commonjs \"fs/promises\"","../external node-commonjs \"net\"","../external node-commonjs \"os\"","../external node-commonjs \"perf_hooks\"","../external node-commonjs \"process\"","../external node-commonjs \"stream\"","../external node-commonjs \"stream/web\"","../external node-commonjs \"timers/promises\"","../external node-commonjs \"tls\"","../external node-commonjs \"tty\"","../external node-commonjs \"url\"","../external node-commonjs \"util\"","../external node-commonjs \"worker_threads\"","../../../common/node_modules/yerror/dist/index.mjs","../webpack/bootstrap","../webpack/runtime/compat get default export","../webpack/runtime/define property getters","../webpack/runtime/hasOwnProperty shorthand","../webpack/runtime/make namespace object","../webpack/runtime/node module decorator","../webpack/startup"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.parseWWWAuthenticateHeader = parseWWWAuthenticateHeader;\nexports.parseAuthorizationHeader = parseAuthorizationHeader;\nexports.buildWWWAuthenticateHeader = buildWWWAuthenticateHeader;\nexports.buildAuthorizationHeader = buildAuthorizationHeader;\nObject.defineProperty(exports, \"BASIC\", {\n  enumerable: true,\n  get: function () {\n    return _basic.default;\n  }\n});\nObject.defineProperty(exports, \"DIGEST\", {\n  enumerable: true,\n  get: function () {\n    return _digest.default;\n  }\n});\nObject.defineProperty(exports, \"BEARER\", {\n  enumerable: true,\n  get: function () {\n    return _bearer.default;\n  }\n});\nexports.mechanisms = void 0;\n\nvar _yerror = _interopRequireDefault(require(\"yerror\"));\n\nvar _basic = _interopRequireDefault(require(\"./mechanisms/basic\"));\n\nvar _digest = _interopRequireDefault(require(\"./mechanisms/digest\"));\n\nvar _bearer = _interopRequireDefault(require(\"./mechanisms/bearer\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * @module http-auth-utils\n */\n\n/**\n * Natively supported authentication mechanisms.\n * @type {Array}\n */\nconst mechanisms = [_basic.default, _digest.default, _bearer.default];\n/**\n * Basic authentication mechanism.\n * @type {Object}\n * @see  {@link module:http-auth-utils/mechanisms/basic}\n */\n\nexports.mechanisms = mechanisms;\n_basic.default;\n/**\n * Digest authentication mechanism.\n * @type {Object}\n * @see  {@link module:http-auth-utils/mechanisms/digest}\n */\n\n_digest.default;\n/**\n * Bearer authentication mechanism.\n * @type {Object}\n * @see  {@link module:http-auth-utils/mechanisms/digest}\n */\n\n_bearer.default;\n\n/**\n * Parse HTTP WWW-Authenticate header contents.\n * @type {Function}\n * @param {string} header\n * The WWW-Authenticate header contents\n * @param {Array} [authMechanisms=[BASIC, DIGEST, BEARER]]\n * Allow providing custom authentication mechanisms.\n * @param {Object} [options]\n * Parsing options\n * @param {boolean} [options.strict=true]\n * Strictly detect the mechanism type (case sensitive)\n * @return {Object} Result of the contents parse.\n * @api public\n * @example\n * assert.deepEqual(\n *   parseWWWAuthenticateHeader('Basic realm=\"test\"'), {\n *     type: 'Basic',\n *     data: {\n *       realm: 'test'\n *     }\n *   }\n * );\n */\nfunction parseWWWAuthenticateHeader(header, authMechanisms = mechanisms, {\n  strict = true\n} = {\n  strict: true\n}) {\n  let result = null;\n  authMechanisms.some(authMechanism => {\n    if (0 === header.indexOf(authMechanism.type + ' ') || !strict && 0 === header.indexOf(authMechanism.type.toLowerCase() + ' ')) {\n      result = {\n        type: authMechanism.type,\n        data: authMechanism.parseWWWAuthenticateRest(header.substr(authMechanism.type.length + 1))\n      };\n      return true;\n    }\n\n    return false;\n  });\n\n  if (!result) {\n    throw new _yerror.default('E_UNKNOWN_AUTH_MECHANISM', header);\n  }\n\n  return result;\n}\n/**\n * Parse HTTP Authorization header contents.\n * @type {Function}\n * @param {string} header The Authorization header contents\n * @param {Array} [authMechanisms=[BASIC, DIGEST, BEARER]]\n * Allow custom authentication mechanisms.\n * @param {Object} [options]\n * Parsing options\n * @param {boolean} [options.strict=true]\n * Strictly detect the mechanism type (case sensitive)\n * @return {Object} Result of the contents parse.\n * @api public\n * @example\n * assert.deepEqual(\n *   parseAuthorizationHeader('Basic QWxhZGRpbjpvcGVuIHNlc2FtZQ=='), {\n *     type: 'Basic',\n *     data: {\n *       hash: 'QWxhZGRpbjpvcGVuIHNlc2FtZQ=='\n *     }\n *   }\n * );\n */\n\n\nfunction parseAuthorizationHeader(header, authMechanisms = mechanisms, {\n  strict = true\n} = {\n  strict: true\n}) {\n  let result = null;\n  authMechanisms.some(function (authMechanism) {\n    if (0 === header.indexOf(authMechanism.type + ' ') || !strict && 0 === header.indexOf(authMechanism.type.toLowerCase() + ' ')) {\n      result = {\n        type: authMechanism.type,\n        data: authMechanism.parseAuthorizationRest(header.substr(authMechanism.type.length + 1))\n      };\n      return true;\n    }\n\n    return false;\n  });\n\n  if (result) {\n    return result;\n  }\n\n  throw new _yerror.default('E_UNKNOWN_AUTH_MECHANISM', header);\n}\n/**\n * Build HTTP WWW-Authenticate header value.\n * @type {Function}\n * @param {Object} authMechanism The mechanism to use\n * @param {Object}\n * The WWW-Authenticate header contents to base the value on.\n * @return {string} The header value.\n * @api public\n * @example\n * assert.deepEqual(\n *   buildWWWAuthenticateHeader(BASIC, {\n *     realm: 'test'\n *   }),\n *   'Basic realm=\"test\"'\n * );\n */\n\n\nfunction buildWWWAuthenticateHeader(authMechanism, data) {\n  return `${authMechanism.type} ${authMechanism.buildWWWAuthenticateRest(data)}`;\n}\n/**\n * Build HTTP Authorization header value.\n * @type {Function}\n * @param {Object} authMechanism The mechanism to use\n * @param {Object}\n * The Authorization header contents to base the value on.\n * @return {string} The header value.\n * @api public\n * @example\n * assert.deepEqual(\n *   buildAuthorizationHeader(BASIC, {\n *     realm: 'test'\n *   }),\n *   'Basic realm=\"test\"'\n * );\n */\n\n\nfunction buildAuthorizationHeader(authMechanism, data) {\n  return `${authMechanism.type} ${authMechanism.buildAuthorizationRest(data)}`;\n}\n//# sourceMappingURL=index.js.map","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _yerror = _interopRequireDefault(require(\"yerror\"));\n\nvar _utils = require(\"../utils\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * @module http-auth-utils/mechanisms/basic\n */\nconst REQUIRED_WWW_AUTHENTICATE_KEYS = ['realm'];\nconst AUTHORIZED_WWW_AUTHENTICATE_KEYS = REQUIRED_WWW_AUTHENTICATE_KEYS;\n\n/* Architecture Note #1.2: Basic mechanism\n\nSee the following [RFC](https://tools.ietf.org/html/rfc7617).\n\n*/\n\n/**\n * Basic authentication mechanism.\n * @type {Object}\n * @see http://tools.ietf.org/html/rfc2617#section-2\n */\nconst BASIC = {\n  /**\n   * The Basic auth mechanism prefix.\n   * @type {String}\n   */\n  type: 'Basic',\n\n  /**\n   * Parse the WWW Authenticate header rest.\n   * @param  {String} rest The header rest (string after the authentication mechanism prefix).\n   * @return {Object}      Object representing the result of the parse operation.\n   * @example\n   * assert.deepEqual(\n   *   BASIC.parseWWWAuthenticateRest('realm=\"perlinpinpin\"'), {\n   *     realm: 'perlinpinpin'\n   *   }\n   * );\n   * @api public\n   */\n  parseWWWAuthenticateRest: function parseWWWAuthenticateRest(rest) {\n    return (0, _utils.parseHTTPHeadersQuotedKeyValueSet)(rest, AUTHORIZED_WWW_AUTHENTICATE_KEYS, REQUIRED_WWW_AUTHENTICATE_KEYS);\n  },\n\n  /**\n   * Build the WWW Authenticate header rest.\n   * @param  {Object} data The content from wich to build the rest.\n   * @return {String}         The built rest.\n   * @example\n   * assert.equal(\n   *   BASIC.buildWWWAuthenticateRest({\n   *     realm: 'perlinpinpin'\n   *   }),\n   *   'realm=\"perlinpinpin\"'\n   * );\n   * @api public\n   */\n  buildWWWAuthenticateRest: function buildWWWAuthenticateRest(data) {\n    return (0, _utils.buildHTTPHeadersQuotedKeyValueSet)(data, AUTHORIZED_WWW_AUTHENTICATE_KEYS, REQUIRED_WWW_AUTHENTICATE_KEYS);\n  },\n\n  /**\n   * Parse the Authorization header rest.\n   * @param  {String} rest The header rest (string after the authentication mechanism prefix).)\n   * @return {Object}      Object representing the result of the parse operation {hash}.\n   * @example\n   * assert.deepEqual(\n   *   BASIC.parseAuthorizationRest('QWxpIEJhYmE6b3BlbiBzZXNhbWU='), {\n   *     hash: 'QWxpIEJhYmE6b3BlbiBzZXNhbWU=',\n   *     username: 'Ali Baba',\n   *     password: 'open sesame'\n   *   }\n   * );\n   * @api public\n   */\n  parseAuthorizationRest: function parseAuthorizationRest(rest) {\n    if (!rest) {\n      throw new _yerror.default('E_EMPTY_AUTH');\n    }\n\n    const {\n      username,\n      password\n    } = BASIC.decodeHash(rest);\n    return {\n      hash: rest,\n      username,\n      password\n    };\n  },\n\n  /**\n   * Build the Authorization header rest.\n   * @param  {Object} content The content from wich to build the rest.\n   * @return {String}         The rest built.\n   * @example\n   * assert.equal(\n   *   BASIC.buildAuthorizationRest({\n   *     hash: 'QWxpIEJhYmE6b3BlbiBzZXNhbWU='\n   *   }),\n   *   'QWxpIEJhYmE6b3BlbiBzZXNhbWU='\n   * );\n   * @api public\n   */\n  buildAuthorizationRest: function buildAuthorizationRest({\n    hash,\n    username,\n    password\n  }) {\n    if (username && password) {\n      return BASIC.computeHash({\n        username,\n        password\n      });\n    }\n\n    if (!hash) {\n      throw new _yerror.default('E_NO_HASH');\n    }\n\n    return hash;\n  },\n\n  /**\n   * Compute the Basic authentication hash from the given credentials.\n   * @param  {Object} credentials The credentials to encode {username, password}.\n   * @return {String}             The hash representing the credentials.\n   * @example\n   * assert.equal(\n   *   BASIC.computeHash({\n   *     username: 'Ali Baba',\n   *     password: 'open sesame'\n   *   }),\n   *   'QWxpIEJhYmE6b3BlbiBzZXNhbWU='\n   * );\n   * @api public\n   */\n  computeHash: function computeHash({\n    username,\n    password\n  }) {\n    return Buffer.from(username + ':' + password).toString('base64');\n  },\n\n  /**\n   * Decode the Basic hash and return the corresponding credentials.\n   * @param  {String} hash The hash.\n   * @return {Object}      Object representing the credentials {username, password}.\n   * @example\n   * assert.deepEqual(\n   *   BASIC.decodeHash('QWxpIEJhYmE6b3BlbiBzZXNhbWU='), {\n   *     username: 'Ali Baba',\n   *     password: 'open sesame'\n   *   }\n   * );\n   * @api public\n   */\n  decodeHash: function decodeHash(hash) {\n    const [username, ...passwordParts] = Buffer.from(hash, 'base64').toString().split(':');\n    return {\n      username,\n      password: passwordParts.join(':')\n    };\n  }\n};\nvar _default = BASIC;\nexports.default = _default;\n//# sourceMappingURL=basic.js.map","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _yerror = _interopRequireDefault(require(\"yerror\"));\n\nvar _utils = require(\"../utils\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * @module http-auth-utils/mechanisms/bearer\n */\nconst AUTHORIZED_ERROR_CODES = ['invalid_request', 'invalid_token', 'insufficient_scope'];\nconst REQUIRED_WWW_AUTHENTICATE_KEYS = ['realm'];\nconst AUTHORIZED_WWW_AUTHENTICATE_KEYS = [...REQUIRED_WWW_AUTHENTICATE_KEYS, 'scope', 'error', 'error_description'];\n\n/* Architecture Note #1.1: Bearer mechanism\n\nSee the following [RFC](https://tools.ietf.org/html/rfc6750).\n\n*/\n\n/**\n * Bearer authentication mechanism.\n * @type {Object}\n * @see https://tools.ietf.org/html/rfc6750#section-3\n */\nconst BEARER = {\n  /**\n   * The Bearer auth mechanism prefix.\n   * @type {String}\n   */\n  type: 'Bearer',\n\n  /**\n   * Parse the WWW Authenticate header rest.\n   * @param  {String} rest The header rest (string after the authentication mechanism prefix).\n   * @return {Object}      Object representing the result of the parse operation.\n   * @example\n   * assert.deepEqual(\n   *   BEARER.parseWWWAuthenticateRest(\n   *     'realm=\"testrealm@host.com\", ' +\n   *     'scope=\"openid profile email\"'\n   *   ), {\n   *     realm: 'testrealm@host.com',\n   *     scope: 'openid profile email',\n   *   }\n   * );\n   * @api public\n   */\n  parseWWWAuthenticateRest: function parseWWWAuthenticateRest(rest) {\n    return (0, _utils.parseHTTPHeadersQuotedKeyValueSet)(rest, AUTHORIZED_WWW_AUTHENTICATE_KEYS, []);\n  },\n\n  /**\n   * Build the WWW Authenticate header rest.\n   * @param  {Object} data The content from wich to build the rest.\n   * @return {String}         The built rest.\n   * @example\n   * assert.equal(\n   *   BEARER.buildWWWAuthenticateRest({\n   *     realm: 'testrealm@host.com',\n   *     error: 'invalid_request',\n   *     error_description: 'The access token expired',\n   *   }),\n   *   'realm=\"testrealm@host.com\", ' +\n   *   'error=\"invalid_request\", ' +\n   *   'error_description=\"The access token expired\"'\n   * );\n   * @api public\n   */\n  buildWWWAuthenticateRest: function buildWWWAuthenticateRest(data) {\n    if (data.error && -1 === AUTHORIZED_ERROR_CODES.indexOf(data.error)) {\n      throw new _yerror.default('E_INVALID_ERROR', data.error, AUTHORIZED_ERROR_CODES);\n    }\n\n    return (0, _utils.buildHTTPHeadersQuotedKeyValueSet)(data, AUTHORIZED_WWW_AUTHENTICATE_KEYS, []);\n  },\n\n  /**\n   * Parse the Authorization header rest.\n   * @param  {String} rest The header rest (string after the authentication mechanism prefix).)\n   * @return {Object}      Object representing the result of the parse operation {hash}.\n   * @example\n   * assert.deepEqual(\n   *   BEARER.parseAuthorizationRest('mF_9.B5f-4.1JqM'), {\n   *     hash: 'mF_9.B5f-4.1JqM',\n   *   }\n   * );\n   * @api public\n   */\n  parseAuthorizationRest: function parseAuthorizationRest(rest) {\n    if (!rest) {\n      throw new _yerror.default('E_EMPTY_AUTH');\n    }\n\n    return {\n      hash: rest\n    };\n  },\n\n  /**\n   * Build the Authorization header rest.\n   * @param  {Object} content The content from wich to build the rest.\n   * @return {String}         The rest built.\n   * @example\n   * assert.equal(\n   *   BEARER.buildAuthorizationRest({\n   *     hash: 'mF_9.B5f-4.1JqM'\n   *   }),\n   *   'mF_9.B5f-4.1JqM=='\n   * );\n   * @api public\n   */\n  buildAuthorizationRest: function buildAuthorizationRest({\n    hash\n  }) {\n    if (!hash) {\n      throw new _yerror.default('E_NO_HASH');\n    }\n\n    return hash;\n  }\n};\nvar _default = BEARER;\nexports.default = _default;\n//# sourceMappingURL=bearer.js.map","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _utils = require(\"../utils\");\n\nvar _crypto = _interopRequireDefault(require(\"crypto\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * @module http-auth-utils/mechanisms/digest\n */\nconst REQUIRED_WWW_AUTHENTICATE_KEYS = ['realm', 'nonce'];\nconst AUTHORIZED_WWW_AUTHENTICATE_KEYS = [...REQUIRED_WWW_AUTHENTICATE_KEYS, 'domain', 'opaque', 'stale', 'algorithm', 'qop'];\nconst REQUIRED_AUTHORIZATION_KEYS = ['username', 'realm', 'nonce', 'uri', 'response'];\nconst AUTHORIZED_AUTHORIZATION_KEYS = [...REQUIRED_AUTHORIZATION_KEYS, 'algorithm', 'cnonce', 'opaque', 'qop', 'nc'];\n\n/* Architecture Note #1.3: Digest mechanism\n\nSee the following [RFC](https://tools.ietf.org/html/rfc2617).\n\n*/\n\n/**\n * Digest authentication mechanism.\n * @type {Object}\n * @see http://tools.ietf.org/html/rfc2617#section-3\n * @see http://tools.ietf.org/html/rfc2069#section-2\n */\nconst DIGEST = {\n  /**\n   * The Digest auth mechanism prefix.\n   * @type {String}\n   */\n  type: 'Digest',\n\n  /**\n   * Parse the WWW Authenticate header rest.\n   * @param  {String} rest The header rest (string after the authentication mechanism prefix).\n   * @return {Object}      Object representing the result of the parse operation.\n   * @example\n   * assert.deepEqual(\n   *   DIGEST.parseWWWAuthenticateRest(\n   *     'realm=\"testrealm@host.com\", ' +\n   *     'qop=\"auth, auth-int\", ' +\n   *     'nonce=\"dcd98b7102dd2f0e8b11d0f600bfb0c093\", ' +\n   *     'opaque=\"5ccc069c403ebaf9f0171e9517f40e41\"'\n   *   ), {\n   *     realm: 'testrealm@host.com',\n   *     qop: 'auth, auth-int',\n   *     nonce: 'dcd98b7102dd2f0e8b11d0f600bfb0c093',\n   *     opaque: '5ccc069c403ebaf9f0171e9517f40e41'\n   *   }\n   * );\n   * @api public\n   */\n  parseWWWAuthenticateRest: function parseWWWAuthenticateRest(rest) {\n    return (0, _utils.parseHTTPHeadersQuotedKeyValueSet)(rest, AUTHORIZED_WWW_AUTHENTICATE_KEYS, REQUIRED_WWW_AUTHENTICATE_KEYS);\n  },\n\n  /**\n   * Build the WWW Authenticate header rest.\n   * @param  {Object} data The content from wich to build the rest.\n   * @return {String}         The built rest.\n   * @example\n   * assert.equal(\n   *   DIGEST.buildWWWAuthenticateRest({\n   *     realm: 'testrealm@host.com',\n   *     qop: 'auth, auth-int',\n   *     nonce: 'dcd98b7102dd2f0e8b11d0f600bfb0c093',\n   *     opaque: '5ccc069c403ebaf9f0171e9517f40e41'\n   *   }),\n   *   'realm=\"testrealm@host.com\", ' +\n   *   'qop=\"auth, auth-int\", ' +\n   *   'nonce=\"dcd98b7102dd2f0e8b11d0f600bfb0c093\", ' +\n   *   'opaque=\"5ccc069c403ebaf9f0171e9517f40e41\"'\n   * );\n   * @api public\n   */\n  buildWWWAuthenticateRest: function buildWWWAuthenticateRest(data) {\n    return (0, _utils.buildHTTPHeadersQuotedKeyValueSet)(data, AUTHORIZED_WWW_AUTHENTICATE_KEYS, REQUIRED_WWW_AUTHENTICATE_KEYS);\n  },\n\n  /**\n   * Parse the Authorization header rest.\n   * @param  {String} rest The header rest (string after the authentication mechanism prefix).)\n   * @return {Object}      Object representing the result of the parse operation {hash}.\n   * @example\n   * assert.deepEqual(\n   *   DIGEST.parseAuthorizationRest(\n   *     'username=\"Mufasa\",' +\n   *     'realm=\"testrealm@host.com\",' +\n   *     'nonce=\"dcd98b7102dd2f0e8b11d0f600bfb0c093\",' +\n   *     'uri=\"/dir/index.html\",' +\n   *     'qop=\"auth\",' +\n   *     'nc=\"00000001\",' +\n   *     'cnonce=\"0a4f113b\",' +\n   *     'response=\"6629fae49393a05397450978507c4ef1\",' +\n   *     'opaque=\"5ccc069c403ebaf9f0171e9517f40e41\"'\n   *   ), {\n   *     username: \"Mufasa\",\n   *     realm: 'testrealm@host.com',\n   *     nonce: \"dcd98b7102dd2f0e8b11d0f600bfb0c093\",\n   *     uri: \"/dir/index.html\",\n   *     qop: 'auth',\n   *     nc: '00000001',\n   *     cnonce: \"0a4f113b\",\n   *     response: \"6629fae49393a05397450978507c4ef1\",\n   *     opaque: \"5ccc069c403ebaf9f0171e9517f40e41\"\n   *   }\n   * );\n   * @api public\n   */\n  parseAuthorizationRest: function parseAuthorizationRest(rest) {\n    return (0, _utils.parseHTTPHeadersQuotedKeyValueSet)(rest, AUTHORIZED_AUTHORIZATION_KEYS, REQUIRED_AUTHORIZATION_KEYS);\n  },\n\n  /**\n   * Build the Authorization header rest.\n   * @param  {Object} data The content from wich to build the rest.\n   * @return {String}         The rest built.\n   * @example\n   * assert.equal(\n   *   DIGEST.buildAuthorizationRest({\n   *     username: \"Mufasa\",\n   *     realm: 'testrealm@host.com',\n   *     nonce: \"dcd98b7102dd2f0e8b11d0f600bfb0c093\",\n   *     uri: \"/dir/index.html\",\n   *     qop: 'auth',\n   *     nc: '00000001',\n   *     cnonce: \"0a4f113b\",\n   *     response: \"6629fae49393a05397450978507c4ef1\",\n   *     opaque: \"5ccc069c403ebaf9f0171e9517f40e41\"\n   *   }),\n   *   'username=\"Mufasa\", ' +\n   *   'realm=\"testrealm@host.com\", ' +\n   *   'nonce=\"dcd98b7102dd2f0e8b11d0f600bfb0c093\", ' +\n   *   'uri=\"/dir/index.html\", ' +\n   *   'response=\"6629fae49393a05397450978507c4ef1\", ' +\n   *   'cnonce=\"0a4f113b\", ' +\n   *   'opaque=\"5ccc069c403ebaf9f0171e9517f40e41\", ' +\n   *   'qop=\"auth\", ' +\n   *   'nc=\"00000001\"'\n   * );\n   * @api public\n   */\n  buildAuthorizationRest: function buildAuthorizationRest(data) {\n    return (0, _utils.buildHTTPHeadersQuotedKeyValueSet)(data, AUTHORIZED_AUTHORIZATION_KEYS, REQUIRED_AUTHORIZATION_KEYS);\n  },\n\n  /**\n   * Compute the Digest authentication hash from the given credentials.\n   * @param  {Object} data The credentials to encode and other encoding details.\n   * @return {String}             The hash representing the credentials.\n   * @example\n   * assert.equal(\n   *   DIGEST.computeHash({\n   *     username: 'Mufasa',\n   *     realm: 'testrealm@host.com',\n   *     password: 'Circle Of Life',\n   *     method: 'GET',\n   *     uri: '/dir/index.html',\n   *     nonce: 'dcd98b7102dd2f0e8b11d0f600bfb0c093',\n   *     nc: '00000001',\n   *     cnonce: '0a4f113b',\n   *     qop: 'auth',\n   *     algorithm: 'md5'\n   *   }),\n   *   '6629fae49393a05397450978507c4ef1'\n   * );\n   * @api public\n   */\n  computeHash: function computeHash(data) {\n    const ha1 = data.ha1 || _computeHash(data.algorithm, [data.username, data.realm, data.password].join(':'));\n\n    const ha2 = _computeHash(data.algorithm, [data.method, data.uri].join(':'));\n\n    return _computeHash(data.algorithm, [ha1, data.nonce, data.nc, data.cnonce, data.qop, ha2].join(':'));\n  }\n};\n\nfunction _computeHash(algorithm, str) {\n  const hashsum = _crypto.default.createHash(algorithm);\n\n  hashsum.update(str);\n  return hashsum.digest('hex');\n}\n\nvar _default = DIGEST;\nexports.default = _default;\n//# sourceMappingURL=digest.js.map","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.parseHTTPHeadersQuotedKeyValueSet = parseHTTPHeadersQuotedKeyValueSet;\nexports.buildHTTPHeadersQuotedKeyValueSet = buildHTTPHeadersQuotedKeyValueSet;\n\nvar _yerror = _interopRequireDefault(require(\"yerror\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst QUOTE = '\"';\nconst EQUAL = '=';\nconst SEPARATOR = ', ';\n/*\n * Regular expression for matching the key-value pairs\n * \\w+     = The key\n * =       = The equal sign\n * \".*?\"   = Value option 1: A double-quoted value (using the non-greedy *? to stop at the first doublequote)\n * [^\",]+  = Value option 2: A string without commas or double-quotes\n * (?=,|$) = Zero-width (as in not captured) positive lookahead assertion.\n *           The previous match will only be valid if it's followed by a \" literal\n *           or the end of the string\n */\n\nconst KEYVALUE_REGEXP = /\\w+=(\".*?\"|[^\",]+)(?=,|$)/g; // FIXME: Create a real parser\n\nfunction parseHTTPHeadersQuotedKeyValueSet(contents, authorizedKeys, requiredKeys = []) {\n  const matches = contents.trim().match(KEYVALUE_REGEXP);\n  if (!matches) throw new _yerror.default('E_MALFORMED_QUOTEDKEYVALUE', contents);\n  const data = matches.map((part, partPosition) => {\n    const pair = part.split(EQUAL);\n\n    if (2 !== pair.length) {\n      throw new _yerror.default('E_MALFORMED_QUOTEDKEYVALUE', partPosition, part, pair.length);\n    }\n\n    return pair;\n  }).reduce(function (parsedValues, [name, value], valuePosition) {\n    if (-1 === authorizedKeys.indexOf(name)) {\n      throw new _yerror.default('E_UNAUTHORIZED_KEY', valuePosition, name);\n    }\n    /*\n     * Regular expression for stripping paired starting and ending double quotes off the value:\n     * ^      = The beginning of the string\n     * \"      = The first double quote\n     * .+     = One or more characters of any kind\n     * (?=\"$) = Zero-width (as in not captured) positive lookahead assertion.\n     *          The previous match will only be valid if it's followed by a \" literal\n     *          or the end of the string\n     * \"      = The ending double quote\n     * $      = The end of the string\n     */\n\n\n    parsedValues[name] = value.replace(/^\"(.+(?=\"$))\"$/, '$1');\n    return parsedValues;\n  }, {});\n\n  _checkRequiredKeys(requiredKeys, data);\n\n  return data;\n}\n\nfunction buildHTTPHeadersQuotedKeyValueSet(data, authorizedKeys, requiredKeys = []) {\n  _checkRequiredKeys(requiredKeys, data);\n\n  return authorizedKeys.reduce(function (contents, key) {\n    if (data[key]) {\n      return contents + (contents ? SEPARATOR : '') + key + EQUAL + QUOTE + data[key] + QUOTE;\n    }\n\n    return contents;\n  }, '');\n}\n\nfunction _checkRequiredKeys(requiredKeys, data) {\n  requiredKeys.forEach(name => {\n    if ('undefined' === typeof data[name]) {\n      throw new _yerror.default('E_REQUIRED_KEY', name);\n    }\n  });\n}\n//# sourceMappingURL=utils.js.map","'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// **Github:** https://github.com/fidm/asn1\n//\n// **License:** MIT\nconst util_1 = require(\"util\");\nconst common_1 = require(\"./common\");\n/**\n * ASN.1 classes.\n */\nvar Class;\n(function (Class) {\n    Class[Class[\"UNIVERSAL\"] = 0] = \"UNIVERSAL\";\n    Class[Class[\"APPLICATION\"] = 64] = \"APPLICATION\";\n    Class[Class[\"CONTEXT_SPECIFIC\"] = 128] = \"CONTEXT_SPECIFIC\";\n    Class[Class[\"PRIVATE\"] = 192] = \"PRIVATE\";\n})(Class = exports.Class || (exports.Class = {}));\n/**\n * ASN.1 types. Not all types are supported by this implementation.\n */\nvar Tag;\n(function (Tag) {\n    Tag[Tag[\"NONE\"] = 0] = \"NONE\";\n    Tag[Tag[\"BOOLEAN\"] = 1] = \"BOOLEAN\";\n    Tag[Tag[\"INTEGER\"] = 2] = \"INTEGER\";\n    Tag[Tag[\"BITSTRING\"] = 3] = \"BITSTRING\";\n    Tag[Tag[\"OCTETSTRING\"] = 4] = \"OCTETSTRING\";\n    Tag[Tag[\"NULL\"] = 5] = \"NULL\";\n    Tag[Tag[\"OID\"] = 6] = \"OID\";\n    // ODESC = 7,\n    // EXTERNAL = 8,\n    // REAL = 9,\n    Tag[Tag[\"ENUMERATED\"] = 10] = \"ENUMERATED\";\n    // EMBEDDED = 11,\n    Tag[Tag[\"UTF8\"] = 12] = \"UTF8\";\n    // ROID = 13,\n    Tag[Tag[\"SEQUENCE\"] = 16] = \"SEQUENCE\";\n    Tag[Tag[\"SET\"] = 17] = \"SET\";\n    Tag[Tag[\"NUMERICSTRING\"] = 18] = \"NUMERICSTRING\";\n    Tag[Tag[\"PRINTABLESTRING\"] = 19] = \"PRINTABLESTRING\";\n    Tag[Tag[\"T61STRING\"] = 20] = \"T61STRING\";\n    Tag[Tag[\"IA5STRING\"] = 22] = \"IA5STRING\";\n    Tag[Tag[\"UTCTIME\"] = 23] = \"UTCTIME\";\n    Tag[Tag[\"GENERALIZEDTIME\"] = 24] = \"GENERALIZEDTIME\";\n    Tag[Tag[\"GENERALSTRING\"] = 27] = \"GENERALSTRING\";\n})(Tag = exports.Tag || (exports.Tag = {}));\n/**\n * BitString is the structure to use when you want an ASN.1 BIT STRING type. A\n * bit string is padded up to the nearest byte in memory and the number of\n * valid bits is recorded. Padding bits will be zero.\n */\nclass BitString {\n    constructor(buf, bitLen) {\n        this.buf = buf;\n        this.bitLen = bitLen;\n    }\n    /**\n     * Returns the value for the given bits offset.\n     * @param i bits offet\n     */\n    at(i) {\n        if (i < 0 || i >= this.bitLen || !Number.isInteger(i)) {\n            return 0;\n        }\n        const x = Math.floor(i / 8);\n        const y = 7 - i % 8;\n        return (this.buf[x] >> y) & 1;\n    }\n    /**\n     * Align buffer\n     */\n    rightAlign() {\n        const shift = 8 - (this.bitLen % 8);\n        if (shift === 8 || this.buf.length === 0) {\n            return this.buf;\n        }\n        const buf = Buffer.alloc(this.buf.length);\n        buf[0] = this.buf[0] >> shift;\n        for (let i = 1; i < this.buf.length; i++) {\n            buf[i] = this.buf[i - 1] << (8 - shift);\n            buf[i] |= this.buf[i] >> shift;\n        }\n        return buf;\n    }\n}\nexports.BitString = BitString;\n/**\n * Implements parsing of DER-encoded ASN.1 data structures,\n * as defined in ITU-T Rec X.690.\n *\n * See also ``A Layman's Guide to a Subset of ASN.1, BER, and DER,''\n * http://luca.ntop.org/Teaching/Appunti/asn1.html.\n *\n * ASN.1 is a syntax for specifying abstract objects and BER, DER, PER, XER etc\n * are different encoding formats for those objects. Here, we'll be dealing\n * with DER, the Distinguished Encoding Rules. DER is used in X.509 because\n * it's fast to parse and, unlike BER, has a unique encoding for every object.\n * When calculating hashes over objects, it's important that the resulting\n * bytes be the same at both ends and DER removes this margin of error.\n * ASN.1 is very complex and this package doesn't attempt to implement\n * everything by any means.\n *\n * DER Encoding of ASN.1 Types:\n * https://msdn.microsoft.com/en-us/library/windows/desktop/bb540792(v=vs.85).aspx\n */\nclass ASN1 {\n    /**\n     * Creates a Tag.BOOLEAN ASN.1 object.\n     * @param val boolean value.\n     */\n    static Bool(val) {\n        const asn1 = new ASN1(Class.UNIVERSAL, Tag.BOOLEAN, Buffer.from([val ? 0xff : 0x0]));\n        asn1._value = val;\n        return asn1;\n    }\n    /**\n     * Parse a Tag.BOOLEAN value from ASN.1 object' value.\n     * @param buf the buffer to parse.\n     */\n    static parseBool(buf) {\n        if (!(buf instanceof Buffer) || buf.length !== 1) {\n            throw new Error('ASN1 syntax error: invalid boolean');\n        }\n        switch (buf[0]) {\n            case 0:\n                return false;\n            case 0xff:\n                return true;\n            default:\n                throw new Error('ASN1 syntax error: invalid boolean');\n        }\n    }\n    /**\n     * Creates a Tag.INTEGER ASN.1 object.\n     * @param val integer value or buffer.\n     */\n    static Integer(val) {\n        if (val instanceof Buffer) {\n            const asn = new ASN1(Class.UNIVERSAL, Tag.INTEGER, val);\n            asn._value = val.toString('hex');\n            return asn;\n        }\n        if (!Number.isSafeInteger(val)) {\n            throw new Error('ASN1 syntax error: invalid integer');\n        }\n        let buf;\n        if (val >= -0x80 && val < 0x80) {\n            buf = Buffer.alloc(1);\n            buf.writeInt8(val, 0);\n        }\n        else if (val >= -0x8000 && val < 0x8000) {\n            buf = Buffer.alloc(2);\n            buf.writeIntBE(val, 0, 2);\n        }\n        else if (val >= -0x800000 && val < 0x800000) {\n            buf = Buffer.alloc(3);\n            buf.writeIntBE(val, 0, 3);\n        }\n        else if (val >= -0x80000000 && val < 0x80000000) {\n            buf = Buffer.alloc(4);\n            buf.writeIntBE(val, 0, 4);\n        }\n        else if (val >= -0x8000000000 && val < 0x8000000000) {\n            buf = Buffer.alloc(5);\n            buf.writeIntBE(val, 0, 5);\n        }\n        else if (val >= -0x800000000000 && val < 0x800000000000) {\n            buf = Buffer.alloc(6);\n            buf.writeIntBE(val, 0, 6);\n        }\n        else {\n            throw new Error('ASN1 syntax error: invalid Integer');\n        }\n        const asn1 = new ASN1(Class.UNIVERSAL, Tag.INTEGER, buf);\n        asn1._value = val;\n        return asn1;\n    }\n    /**\n     * Parse a Tag.INTEGER value from ASN.1 object' value.\n     * @param buf the buffer to parse.\n     */\n    static parseInteger(buf) {\n        if (!(buf instanceof Buffer) || buf.length === 0) {\n            throw new Error('ASN1 syntax error: invalid Integer');\n        }\n        // some INTEGER (BigInt) will be 16 bytes, 32 bytes or others.\n        // CertificateSerialNumber ::= INTEGER (>= 16 bytes)\n        if (buf.length > 6) {\n            return buf.toString('hex');\n        }\n        return buf.readIntBE(0, buf.length);\n    }\n    /**\n     * Parse a Tag.INTEGER value as a number from ASN.1 object' value.\n     * @param buf the buffer to parse.\n     */\n    static parseIntegerNum(buf) {\n        const value = ASN1.parseInteger(buf);\n        if (typeof value !== 'number') {\n            throw new Error('ASN1 syntax error: invalid Integer number');\n        }\n        return value;\n    }\n    /**\n     * Parse a Tag.INTEGER value as a hex string(for BigInt) from ASN.1 object' value.\n     * @param buf the buffer to parse.\n     */\n    static parseIntegerStr(buf) {\n        const value = ASN1.parseInteger(buf);\n        if (typeof value === 'number') {\n            return value.toString(16);\n        }\n        return value;\n    }\n    /**\n     * Creates a Tag.BITSTRING ASN.1 object.\n     * @param val BitString object or buffer.\n     */\n    static BitString(val) {\n        if (val instanceof Buffer) {\n            val = new BitString(val, val.length * 8);\n        }\n        const paddingBits = val.buf.length * 8 - val.bitLen;\n        const buf = Buffer.alloc(val.buf.length + 1);\n        buf.writeInt8(paddingBits, 0);\n        val.buf.copy(buf, 1);\n        return new ASN1(Class.UNIVERSAL, Tag.BITSTRING, buf);\n    }\n    /**\n     * Parse a Tag.BITSTRING value from ASN.1 object' value.\n     * @param buf the buffer to parse.\n     */\n    static parseBitString(buf) {\n        if (!(buf instanceof Buffer) || buf.length === 0) {\n            throw new Error('ASN1 syntax error: invalid BitString');\n        }\n        const paddingBits = buf[0];\n        if (paddingBits > 7 ||\n            buf.length === 1 && paddingBits > 0 ||\n            (buf[buf.length - 1] & ((1 << buf[0]) - 1)) !== 0) {\n            throw new Error('ASN1 syntax error: invalid padding bits in BIT STRING');\n        }\n        return new BitString(buf.slice(1), (buf.length - 1) * 8 - paddingBits);\n    }\n    /**\n     * Creates a Tag.NULL ASN.1 object.\n     */\n    static Null() {\n        const asn1 = new ASN1(Class.UNIVERSAL, Tag.NULL, Buffer.alloc(0));\n        asn1._value = null;\n        return asn1;\n    }\n    /**\n     * Parse a Tag.NULL value from ASN.1 object' value.\n     * @param buf the buffer to parse.\n     */\n    static parseNull(buf) {\n        if (!(buf instanceof Buffer) || buf.length !== 0) {\n            throw new Error('ASN1 syntax error: invalid null');\n        }\n        return null;\n    }\n    /**\n     * Creates an Tag.OID (dot-separated numeric string) ASN.1 object.\n     * @param val dot-separated numeric string.\n     */\n    static OID(val) {\n        const values = val.split('.');\n        if (values.length === 0) {\n            throw new Error('ASN1 syntax error: invalid Object Identifier');\n        }\n        const bytes = [];\n        // first byte is 40 * value1 + value2\n        bytes.push(40 * mustParseInt(values[0]) + mustParseInt(values[1]));\n        // other bytes are each value in base 128 with 8th bit set except for\n        // the last byte for each value\n        const valueBytes = [];\n        for (let i = 2; i < values.length; ++i) {\n            let value = mustParseInt(values[i]);\n            valueBytes.length = 0;\n            valueBytes.push(value & 0x7f);\n            while (value > 0x7f) {\n                value = value >>> 7;\n                valueBytes.unshift((value & 0x7f) | 0x80); // add value bytes in reverse for big endian\n            }\n            bytes.push(...valueBytes);\n        }\n        const asn1 = new ASN1(Class.UNIVERSAL, Tag.OID, Buffer.from(bytes));\n        asn1._value = val;\n        return asn1;\n    }\n    /**\n     * Parse a Tag.OID value from ASN.1 object' value.\n     * @param buf the buffer to parse.\n     */\n    static parseOID(buf) {\n        if (!(buf instanceof Buffer) || buf.length === 0) {\n            throw new Error('ASN1 syntax error: invalid OID');\n        }\n        // first byte is 40 * value1 + value2\n        let oid = Math.floor(buf[0] / 40) + '.' + (buf[0] % 40);\n        // other bytes are each value in base 128 with 8th bit set except for\n        // the last byte for each value\n        let high = 0;\n        for (let i = 1; i < buf.length; i++) {\n            // not the last byte for the value\n            if (buf[i] >= 0x80) {\n                high += buf[i] & 0x7F;\n                high = high << 7;\n            }\n            else {\n                oid += '.' + (high + buf[i]);\n                high = 0;\n            }\n        }\n        return oid;\n    }\n    /**\n     * Creates an Tag.UTF8 ASN.1 object.\n     * @param val utf8 string.\n     */\n    static UTF8(val) {\n        const asn1 = new ASN1(Class.UNIVERSAL, Tag.UTF8, Buffer.from(val, 'utf8'));\n        asn1._value = val;\n        return asn1;\n    }\n    /**\n     * Parse a Tag.UTF8 string from ASN.1 object' value.\n     * @param buf the buffer to parse.\n     */\n    static parseUTF8(buf) {\n        if (!(buf instanceof Buffer)) {\n            throw new Error('parse ASN1 error: invalid Buffer');\n        }\n        return buf.toString('utf8');\n    }\n    /**\n     * Creates an Tag.NUMERICSTRING ASN.1 object.\n     * @param val numeric string.\n     */\n    static NumericString(val) {\n        if (!isNumericString(val)) {\n            throw new Error('ASN1 syntax error: invalid NumericString');\n        }\n        const asn1 = new ASN1(Class.UNIVERSAL, Tag.NUMERICSTRING, Buffer.from(val, 'utf8'));\n        asn1._value = val;\n        return asn1;\n    }\n    /**\n     * Parse a Tag.UTF8 string from ASN.1 object' value.\n     * @param buf the buffer to parse.\n     */\n    static parseNumericString(buf) {\n        if (!(buf instanceof Buffer)) {\n            throw new Error('parse ASN1 error: invalid Buffer');\n        }\n        const str = buf.toString('utf8');\n        if (!isNumericString(str)) {\n            throw new Error('ASN1 syntax error: invalid NumericString');\n        }\n        return str;\n    }\n    /**\n     * Creates an Tag.NUMERICSTRING ASN.1 object.\n     * @param val printable string.\n     */\n    static PrintableString(val) {\n        // TODO, validate\n        const asn1 = new ASN1(Class.UNIVERSAL, Tag.PRINTABLESTRING, Buffer.from(val, 'utf8'));\n        asn1._value = val;\n        return asn1;\n    }\n    /**\n     * Parse a Tag.PRINTABLESTRING string from ASN.1 object' value.\n     * @param buf the buffer to parse.\n     */\n    static parsePrintableString(buf) {\n        if (!(buf instanceof Buffer)) {\n            throw new Error('parse ASN1 error: invalid Buffer');\n        }\n        // TODO, validate\n        return buf.toString('utf8');\n    }\n    /**\n     * Creates an Tag.IA5STRING (ASCII string) ASN.1 object.\n     * @param val ASCII string.\n     */\n    static IA5String(val) {\n        if (!isIA5String(val)) {\n            throw new Error('ASN1 syntax error: invalid IA5String');\n        }\n        const asn1 = new ASN1(Class.UNIVERSAL, Tag.IA5STRING, Buffer.from(val, 'utf8'));\n        asn1._value = val;\n        return asn1;\n    }\n    /**\n     * Parse a Tag.IA5STRING string from ASN.1 object' value.\n     * @param buf the buffer to parse.\n     */\n    static parseIA5String(buf) {\n        if (!(buf instanceof Buffer)) {\n            throw new Error('parse ASN1 error: invalid Buffer');\n        }\n        const str = buf.toString('utf8');\n        if (!isIA5String(str)) {\n            throw new Error('ASN1 syntax error: invalid IA5String');\n        }\n        return str;\n    }\n    /**\n     * Creates an Tag.T61STRING (8-bit clean string) ASN.1 object.\n     * @param val 8-bit clean string.\n     */\n    static T61String(val) {\n        // TODO, validate\n        const asn1 = new ASN1(Class.UNIVERSAL, Tag.T61STRING, Buffer.from(val, 'utf8'));\n        asn1._value = val;\n        return asn1;\n    }\n    /**\n     * Parse a Tag.T61STRING string from ASN.1 object' value.\n     * @param buf the buffer to parse.\n     */\n    static parseT61String(buf) {\n        if (!(buf instanceof Buffer)) {\n            throw new Error('parse ASN1 error: invalid Buffer');\n        }\n        // TODO, validate\n        return buf.toString('utf8');\n    }\n    /**\n     * Creates an Tag.GENERALSTRING (specified in ISO-2022/ECMA-35) ASN.1 object.\n     * @param val general string.\n     */\n    static GeneralString(val) {\n        // TODO, validate\n        const asn1 = new ASN1(Class.UNIVERSAL, Tag.GENERALSTRING, Buffer.from(val, 'utf8'));\n        asn1._value = val;\n        return asn1;\n    }\n    /**\n     * Parse a Tag.GENERALSTRING string from ASN.1 object' value.\n     * @param buf the buffer to parse.\n     */\n    static parseGeneralString(buf) {\n        if (!(buf instanceof Buffer)) {\n            throw new Error('parse ASN1 error: invalid Buffer');\n        }\n        // TODO, validate\n        return buf.toString('utf8');\n    }\n    /**\n     * Creates an Tag.UTCTIME ASN.1 object.\n     *\n     * Note: GeneralizedTime has 4 digits for the year and is used for X.509.\n     * dates past 2049. Converting to a GeneralizedTime hasn't been implemented yet.\n     * @param date date value.\n     */\n    static UTCTime(date) {\n        let rval = '';\n        // create format YYMMDDhhmmssZ\n        const format = [];\n        format.push(('' + date.getUTCFullYear()).substr(2));\n        format.push('' + (date.getUTCMonth() + 1));\n        format.push('' + date.getUTCDate());\n        format.push('' + date.getUTCHours());\n        format.push('' + date.getUTCMinutes());\n        format.push('' + date.getUTCSeconds());\n        // ensure 2 digits are used for each format entry\n        for (const s of format) {\n            if (s.length < 2) {\n                rval += '0';\n            }\n            rval += s;\n        }\n        rval += 'Z';\n        const asn1 = new ASN1(Class.UNIVERSAL, Tag.UTCTIME, Buffer.from(rval, 'utf8'));\n        asn1._value = date;\n        return asn1;\n    }\n    /**\n     * Parse a Tag.UTCTIME date from ASN.1 object' value.\n     * @param buf the buffer to parse.\n     */\n    static parseUTCTime(buf) {\n        if (!(buf instanceof Buffer) || buf.length === 0) {\n            throw new Error('ASN1 syntax error: invalid UTC Time');\n        }\n        const utc = buf.toString('utf8');\n        /* The following formats can be used:\n    \n          YYMMDDhhmmZ\n          YYMMDDhhmm+hh'mm'\n          YYMMDDhhmm-hh'mm'\n          YYMMDDhhmmssZ\n          YYMMDDhhmmss+hh'mm'\n          YYMMDDhhmmss-hh'mm'\n    \n          Where:\n    \n          YY is the least significant two digits of the year\n          MM is the month (01 to 12)\n          DD is the day (01 to 31)\n          hh is the hour (00 to 23)\n          mm are the minutes (00 to 59)\n          ss are the seconds (00 to 59)\n          Z indicates that local time is GMT, + indicates that local time is\n          later than GMT, and - indicates that local time is earlier than GMT\n          hh' is the absolute value of the offset from GMT in hours\n          mm' is the absolute value of the offset from GMT in minutes */\n        const date = new Date();\n        // if YY >= 50 use 19xx, if YY < 50 use 20xx\n        let year = mustParseInt(utc.substr(0, 2));\n        year = (year >= 50) ? 1900 + year : 2000 + year;\n        const MM = mustParseInt(utc.substr(2, 2)) - 1; // use 0-11 for month\n        const DD = mustParseInt(utc.substr(4, 2));\n        const hh = mustParseInt(utc.substr(6, 2));\n        const mm = mustParseInt(utc.substr(8, 2));\n        let ss = 0;\n        let end = 0;\n        // get character after minutes\n        let c = '';\n        // not just YYMMDDhhmmZ\n        if (utc.length > 11) {\n            end = 10;\n            // get character after minutes\n            c = utc.charAt(end);\n            // see if seconds are present\n            if (c !== '+' && c !== '-') {\n                // get seconds\n                ss = mustParseInt(utc.substr(10, 2));\n                end += 2;\n            }\n        }\n        // update date\n        date.setUTCFullYear(year, MM, DD);\n        date.setUTCHours(hh, mm, ss, 0);\n        if (end > 0) {\n            // get +/- after end of time\n            c = utc.charAt(end);\n            if (c === '+' || c === '-') {\n                // get hours+minutes offset\n                const hhoffset = mustParseInt(utc.substr(end + 1, 2));\n                const mmoffset = mustParseInt(utc.substr(end + 4, 2));\n                // calculate offset in milliseconds\n                let offset = hhoffset * 60 + mmoffset;\n                offset *= 60000;\n                // apply offset\n                if (c === '+') {\n                    date.setTime(+date - offset);\n                }\n                else {\n                    date.setTime(+date + offset);\n                }\n            }\n        }\n        return date;\n    }\n    /**\n     * Creates an Tag.GENERALIZEDTIME ASN.1 object.\n     * @param date date value.\n     */\n    static GeneralizedTime(date) {\n        let rval = '';\n        // create format YYYYMMDDHHMMSSZ\n        const format = [];\n        format.push('' + date.getUTCFullYear());\n        format.push('' + (date.getUTCMonth() + 1));\n        format.push('' + date.getUTCDate());\n        format.push('' + date.getUTCHours());\n        format.push('' + date.getUTCMinutes());\n        format.push('' + date.getUTCSeconds());\n        // ensure 2 digits are used for each format entry\n        for (const s of format) {\n            if (s.length < 2) {\n                rval += '0';\n            }\n            rval += s;\n        }\n        rval += 'Z';\n        const asn1 = new ASN1(Class.UNIVERSAL, Tag.GENERALIZEDTIME, Buffer.from(rval, 'utf8'));\n        asn1._value = date;\n        return asn1;\n    }\n    /**\n     * Parse a Tag.GENERALIZEDTIME date from ASN.1 object' value.\n     * @param buf the buffer to parse.\n     */\n    static parseGeneralizedTime(buf) {\n        if (!(buf instanceof Buffer) || buf.length === 0) {\n            throw new Error('ASN1 syntax error: invalid Generalized Time');\n        }\n        const gentime = buf.toString('utf8');\n        /* The following formats can be used:\n    \n          YYYYMMDDHHMMSS\n          YYYYMMDDHHMMSS.fff\n          YYYYMMDDHHMMSSZ\n          YYYYMMDDHHMMSS.fffZ\n          YYYYMMDDHHMMSS+hh'mm'\n          YYYYMMDDHHMMSS.fff+hh'mm'\n          YYYYMMDDHHMMSS-hh'mm'\n          YYYYMMDDHHMMSS.fff-hh'mm'\n    \n          Where:\n    \n          YYYY is the year\n          MM is the month (01 to 12)\n          DD is the day (01 to 31)\n          hh is the hour (00 to 23)\n          mm are the minutes (00 to 59)\n          ss are the seconds (00 to 59)\n          .fff is the second fraction, accurate to three decimal places\n          Z indicates that local time is GMT, + indicates that local time is\n          later than GMT, and - indicates that local time is earlier than GMT\n          hh' is the absolute value of the offset from GMT in hours\n          mm' is the absolute value of the offset from GMT in minutes */\n        const date = new Date();\n        const YYYY = mustParseInt(gentime.substr(0, 4));\n        const MM = mustParseInt(gentime.substr(4, 2)) - 1; // use 0-11 for month\n        const DD = mustParseInt(gentime.substr(6, 2));\n        const hh = mustParseInt(gentime.substr(8, 2));\n        const mm = mustParseInt(gentime.substr(10, 2));\n        const ss = mustParseInt(gentime.substr(12, 2));\n        let fff = 0;\n        let offset = 0;\n        let isUTC = false;\n        if (gentime.charAt(gentime.length - 1) === 'Z') {\n            isUTC = true;\n        }\n        const end = gentime.length - 5;\n        const c = gentime.charAt(end);\n        if (c === '+' || c === '-') {\n            // get hours+minutes offset\n            const hhoffset = mustParseInt(gentime.substr(end + 1, 2));\n            const mmoffset = mustParseInt(gentime.substr(end + 4, 2));\n            // calculate offset in milliseconds\n            offset = hhoffset * 60 + mmoffset;\n            offset *= 60000;\n            // apply offset\n            if (c === '+') {\n                offset *= -1;\n            }\n            isUTC = true;\n        }\n        // check for second fraction\n        if (gentime.charAt(14) === '.') {\n            fff = parseFloat(gentime.substr(14)) * 1000;\n        }\n        if (isUTC) {\n            date.setUTCFullYear(YYYY, MM, DD);\n            date.setUTCHours(hh, mm, ss, fff);\n            // apply offset\n            date.setTime(+date + offset);\n        }\n        else {\n            date.setFullYear(YYYY, MM, DD);\n            date.setHours(hh, mm, ss, fff);\n        }\n        return date;\n    }\n    /**\n     * Parse a Tag.UTCTIME date of Tag.GENERALIZEDTIME date from ASN.1 object' value.\n     * @param tag the type.\n     * @param buf the buffer to parse.\n     */\n    static parseTime(tag, buf) {\n        switch (tag) {\n            case Tag.UTCTIME:\n                return ASN1.parseUTCTime(buf);\n            case Tag.GENERALIZEDTIME:\n                return ASN1.parseGeneralizedTime(buf);\n            default:\n                throw new Error('Invalid ASN1 time tag');\n        }\n    }\n    /**\n     * Creates an Tag.SET ASN.1 object.\n     * @param objs an array of ASN.1 objects.\n     */\n    static Set(objs) {\n        const asn1 = new ASN1(Class.UNIVERSAL, Tag.SET, Buffer.concat(objs.map((obj) => obj.toDER())));\n        asn1._value = objs;\n        return asn1;\n    }\n    /**\n     * Creates an Tag.SEQUENCE ASN.1 object.\n     * @param objs an array of ASN.1 objects.\n     */\n    static Seq(objs) {\n        const asn1 = new ASN1(Class.UNIVERSAL, Tag.SEQUENCE, Buffer.concat(objs.map((obj) => obj.toDER())));\n        asn1._value = objs;\n        return asn1;\n    }\n    /**\n     * Creates an Class.CONTEXT_SPECIFIC ASN.1 object.\n     *\n     * Note: the tag means nothing with Class.CONTEXT_SPECIFIC\n     * @param tag number.\n     * @param objs an array of ASN.1 objects or a ASN.1 object.\n     * @param isCompound when objs is a array, the isCompound will be set to true.\n     */\n    static Spec(tag, objs, isCompound = true) {\n        const bytes = Array.isArray(objs) ? Buffer.concat(objs.map((obj) => obj.toDER())) : objs.toDER();\n        if (Array.isArray(objs)) {\n            isCompound = true;\n        }\n        const asn1 = new ASN1(Class.CONTEXT_SPECIFIC, tag, bytes, isCompound);\n        asn1._value = objs;\n        return asn1;\n    }\n    /**\n     * Parse a ASN.1 object from a buffer in DER format.\n     *\n     * @param buf the buffer to parse.\n     * @param deepParse deeply parse or not.\n     */\n    static fromDER(buf, deepParse = false) {\n        return ASN1._fromDER(new common_1.BufferVisitor(buf), deepParse);\n    }\n    /**\n     * Parse a ASN.1 object from a buffer in DER format with given class and tag.\n     * If class or tag is not match, it will throw a error.\n     *\n     * @param tagClass expect class to parse.\n     * @param tag expect type to parse.\n     * @param buf the buffer to parse.\n     */\n    static parseDER(buf, tagClass, tag) {\n        const obj = ASN1._fromDER(new common_1.BufferVisitor(buf), false);\n        if (obj.class !== tagClass && obj.tag !== tag) {\n            throw new Error(`invalid ASN.1 DER for class ${tagClass} and tag ${tag}`);\n        }\n        return obj;\n    }\n    /**\n     * Parse a ASN.1 object from a buffer in DER format with given Template object.\n     * If template is not match, it will throw a error.\n     *\n     * @param buf the buffer to parse.\n     * @param tpl expect template to parse.\n     *\n     * @return a Captures object with captured ASN.1 objects\n     */\n    static parseDERWithTemplate(buf, tpl) {\n        const obj = ASN1._fromDER(new common_1.BufferVisitor(buf), true);\n        const captures = {};\n        const err = obj.validate(tpl, captures);\n        if (err != null) {\n            err.data = obj;\n            throw err;\n        }\n        return captures;\n    }\n    static _parseCompound(buf, deepParse) {\n        const values = [];\n        const len = buf.length;\n        const bufv = new common_1.BufferVisitor(buf);\n        let readByteLen = 0;\n        while (readByteLen < len) {\n            const start = bufv.end;\n            values.push(ASN1._fromDER(bufv, deepParse));\n            readByteLen += bufv.end - start;\n        }\n        return values;\n    }\n    // Internal function to parse an asn1 object from a byte buffer in DER format.\n    static _fromDER(bufv, deepParse) {\n        if (!(bufv.buf instanceof Buffer) || bufv.length === 0) {\n            throw new Error('ASN1 syntax error: invalid Generalized Time');\n        }\n        bufv.mustWalk(1, 'Too few bytes to read ASN.1 tag.');\n        const start = bufv.start;\n        const b1 = bufv.buf[start];\n        const tagClass = b1 & 0xc0;\n        const tag = b1 & 0x1f;\n        // value storage\n        const valueLen = getValueLength(bufv);\n        bufv.mustHas(valueLen);\n        if (valueLen !== 0 && tag === Tag.NULL) {\n            throw new Error('invalid value length or NULL tag.');\n        }\n        bufv.mustWalk(valueLen);\n        const isCompound = ((b1 & 0x20) === 0x20);\n        const asn1 = new ASN1(tagClass, tag, bufv.buf.slice(bufv.start, bufv.end), isCompound);\n        if (isCompound && deepParse) {\n            asn1._value = ASN1._parseCompound(asn1.bytes, deepParse);\n        }\n        asn1._der = bufv.buf.slice(start, bufv.end);\n        return asn1;\n    }\n    constructor(tagClass, tag, data, isCompound = false) {\n        this.class = tagClass;\n        this.tag = tag;\n        this.bytes = data;\n        // CONTEXT_SPECIFIC, SEQUENCE, SET, others...\n        this.isCompound = isCompound || tag === Tag.SEQUENCE || tag === Tag.SET;\n        this._value = undefined;\n        this._der = null;\n    }\n    /**\n     * the well parsed value of this ASN.1 object.\n     * It will be boolean, number, string, BitString, Date, array of ASN.1 objects and so on.\n     */\n    get value() {\n        if (this._value === undefined) {\n            this._value = this.valueOf();\n        }\n        return this._value;\n    }\n    /**\n     * the DER format Buffer of this ASN.1 object.\n     */\n    get DER() {\n        if (this._der == null) {\n            this._der = this.toDER();\n        }\n        return this._der;\n    }\n    /**\n     * Expecting it is compound ASN.1 object and returns an array of sub ASN.1 objects.\n     * @param msg error message to throw when it is not compound ASN.1 object.\n     */\n    mustCompound(msg = 'asn1 object value is not compound') {\n        if (!this.isCompound || !Array.isArray(this.value)) {\n            const err = new Error(msg);\n            err.data = this.toJSON();\n            throw err;\n        }\n        return this.value;\n    }\n    /**\n     * Returns true if two ASN.1 objects equally.\n     * @param obj another ASN.1 object.\n     */\n    equals(obj) {\n        if (!(obj instanceof ASN1)) {\n            return false;\n        }\n        if (this.class !== obj.class || this.tag !== obj.tag || this.isCompound !== obj.isCompound) {\n            return false;\n        }\n        if (!this.bytes.equals(obj.bytes)) {\n            return false;\n        }\n        return true;\n    }\n    /**\n     * Converts this ASN.1 object to a buffer of bytes in DER format.\n     */\n    toDER() {\n        // build the first byte\n        let b1 = this.class | this.tag;\n        if (this.isCompound) {\n            b1 |= 0x20;\n        }\n        const valueLenBytes = getValueLengthByte(this.bytes.length);\n        const buf = Buffer.allocUnsafe(2 + valueLenBytes + this.bytes.length);\n        buf.writeInt8(b1, 0);\n        if (valueLenBytes === 0) {\n            buf.writeUInt8(this.bytes.length, 1);\n            this.bytes.copy(buf, 2);\n        }\n        else {\n            buf.writeUInt8(valueLenBytes | 0x80, 1);\n            buf.writeUIntBE(this.bytes.length, 2, valueLenBytes);\n            this.bytes.copy(buf, 2 + valueLenBytes);\n        }\n        return buf;\n    }\n    /**\n     * Parse the value of this ASN.1 object when it is Class.UNIVERSAL.\n     * The value will be boolean, number, string, BitString, Date, array of ASN.1 objects and so on.\n     */\n    valueOf() {\n        if (this.isCompound) {\n            return ASN1._parseCompound(this.bytes, false);\n        }\n        if (this.class !== Class.UNIVERSAL) {\n            return this.bytes;\n        }\n        switch (this.tag) {\n            case Tag.BOOLEAN:\n                return ASN1.parseBool(this.bytes);\n            case Tag.INTEGER:\n                return ASN1.parseInteger(this.bytes);\n            case Tag.BITSTRING:\n                return ASN1.parseBitString(this.bytes);\n            case Tag.NULL:\n                return ASN1.parseNull(this.bytes);\n            case Tag.OID:\n                return ASN1.parseOID(this.bytes);\n            case Tag.UTF8:\n                return ASN1.parseUTF8(this.bytes);\n            case Tag.NUMERICSTRING:\n                return ASN1.parseNumericString(this.bytes);\n            case Tag.PRINTABLESTRING:\n                return ASN1.parsePrintableString(this.bytes);\n            case Tag.T61STRING:\n                return ASN1.parseT61String(this.bytes);\n            case Tag.IA5STRING:\n                return ASN1.parseIA5String(this.bytes);\n            case Tag.GENERALSTRING:\n                return ASN1.parseGeneralString(this.bytes);\n            case Tag.UTCTIME:\n                return ASN1.parseUTCTime(this.bytes);\n            case Tag.GENERALIZEDTIME:\n                return ASN1.parseGeneralizedTime(this.bytes);\n            default:\n                return this.bytes;\n        }\n    }\n    /**\n     * Validates that the given ASN.1 object is at least a super set of the\n     * given ASN.1 structure. Only tag classes and types are checked. An\n     * optional map may also be provided to capture ASN.1 values while the\n     * structure is checked.\n     *\n     * To capture an ASN.1 object, set an object in the validator's 'capture'\n     * parameter to the key to use in the capture map.\n     *\n     * Objects in the validator may set a field 'optional' to true to indicate\n     * that it isn't necessary to pass validation.\n     *\n     * @param tpl Template object to validate.\n     * @param captures Captures object to capture ASN.1 object.\n     */\n    validate(tpl, captures = {}) {\n        if (this.class !== tpl.class) {\n            return new Error(`ASN.1 object validate failure for ${tpl.name} : error class ${Class[this.class]}`);\n        }\n        const tplTags = Array.isArray(tpl.tag) ? tpl.tag : [tpl.tag];\n        if (!tplTags.includes(this.tag)) {\n            return new Error(`ASN.1 object validate failure for ${tpl.name}: error tag ${Tag[this.tag]}`);\n        }\n        if (tpl.capture != null) {\n            captures[tpl.capture] = this;\n        }\n        if (Array.isArray(tpl.value)) {\n            const values = this.mustCompound(`${tpl.name} need compound ASN1 value`);\n            for (let i = 0, j = 0; i < tpl.value.length; i++) {\n                if (values[j] != null) {\n                    const err = values[j].validate(tpl.value[i], captures);\n                    if (err == null) {\n                        j++;\n                    }\n                    else if (tpl.value[i].optional !== true) {\n                        return err;\n                    }\n                }\n                else if (tpl.value[i].optional !== true) {\n                    return new Error(`ASN.1 object validate failure for ${tpl.value[i].name}: not exists`);\n                }\n            }\n        }\n        else if (tpl.value != null) {\n            const buf = this.tag === Tag.BITSTRING ? this.bytes.slice(1) : this.bytes;\n            return ASN1.fromDER(buf).validate(tpl.value, captures);\n        }\n        return null;\n    }\n    /**\n     * Return a friendly JSON object for debuging.\n     */\n    toJSON() {\n        let value = this.value;\n        if (Array.isArray(value)) {\n            value = value.map((val) => val.toJSON());\n        }\n        return {\n            class: Class[this.class],\n            tag: this.class === Class.UNIVERSAL ? Tag[this.tag] : this.tag,\n            value,\n        };\n    }\n    [util_1.inspect.custom](_depth, options) {\n        if (options.depth <= 2) {\n            options.depth = 10;\n        }\n        return `<${this.constructor.name} ${util_1.inspect(this.toJSON(), options)}>`;\n    }\n}\nexports.ASN1 = ASN1;\n// Gets the length of a BER-encoded ASN.1 value.\nfunction getValueLength(bufv) {\n    bufv.mustWalk(1, 'Too few bytes to read ASN.1 value length.');\n    const byte = bufv.buf[bufv.start];\n    // see if the length is \"short form\" or \"long form\" (bit 8 set)\n    if ((byte & 0x80) === 0) {\n        // if byte is 0, means asn1 object of indefinite length\n        return byte;\n    }\n    const byteLen = byte & 0x7f;\n    bufv.mustWalk(byteLen, 'Too few bytes to read ASN.1 value length.');\n    return bufv.buf.readUIntBE(bufv.start, byteLen);\n}\n// Gets the length of a BER-encoded ASN.1 value length's bytes\nfunction getValueLengthByte(valueLen) {\n    if (valueLen <= 127) {\n        return 0;\n    }\n    else if (valueLen <= 0xff) {\n        return 1;\n    }\n    else if (valueLen <= 0xffff) {\n        return 2;\n    }\n    else if (valueLen <= 0xffffff) {\n        return 3;\n    }\n    else if (valueLen <= 0xffffffff) {\n        return 4;\n    }\n    else if (valueLen <= 0xffffffffff) {\n        return 5;\n    }\n    else if (valueLen <= 0xffffffffffff) {\n        return 6;\n    }\n    else {\n        throw new Error('invalid value length');\n    }\n}\nfunction isNumericString(str) {\n    for (const s of str) {\n        const n = s.charCodeAt(0);\n        if (n !== 32 && (n < 48 || n > 57)) { // '0' to '9', and ' '\n            return false;\n        }\n    }\n    return true;\n}\nfunction isIA5String(str) {\n    for (const s of str) {\n        if (s.charCodeAt(0) >= 0x80) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction mustParseInt(str, radix = 10) {\n    const val = parseInt(str, radix);\n    if (Number.isNaN(val)) {\n        throw new Error(`Invalid numeric string \"${str}\" in radix ${radix}.`);\n    }\n    return val;\n}\n//# sourceMappingURL=asn1.js.map","'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// **Github:** https://github.com/fidm/x509\n//\n// **License:** MIT\n/**\n * BufferVisitor is a visit tool to manipulate buffer.\n */\nclass BufferVisitor {\n    constructor(buf, start = 0, end = 0) {\n        this.start = start;\n        this.end = end > start ? end : start;\n        this.buf = buf;\n    }\n    /**\n     * return the underlying buffer length\n     */\n    get length() {\n        return this.buf.length;\n    }\n    /**\n     * Reset visitor' start and end value.\n     * @param start\n     * @param end\n     */\n    reset(start = 0, end = 0) {\n        this.start = start;\n        if (end >= this.start) {\n            this.end = end;\n        }\n        else if (this.end < this.start) {\n            this.end = this.start;\n        }\n        return this;\n    }\n    /**\n     * consume some bytes.\n     * @param steps steps to walk\n     */\n    walk(steps) {\n        this.start = this.end;\n        this.end += steps;\n        return this;\n    }\n    /**\n     * The buffer should have remaining the \"steps\" of bytes to consume,\n     * otherwise it will throw an error with given message.\n     * @param steps steps to consume.\n     * @param message message to throw.\n     */\n    mustHas(steps, message = 'Too few bytes to parse.') {\n        const requested = this.end + steps;\n        if (requested > this.buf.length) {\n            const error = new Error(message);\n            error.available = this.buf.length;\n            error.requested = requested;\n            throw error;\n        }\n        this.walk(0);\n        return this;\n    }\n    /**\n     * Check the remaining bytes with bufferVisitor.mustHas method and then walk.\n     * @param steps steps to consume.\n     * @param message message to throw.\n     */\n    mustWalk(steps, message) {\n        this.mustHas(steps, message);\n        this.walk(steps);\n        return this;\n    }\n}\nexports.BufferVisitor = BufferVisitor;\n//# sourceMappingURL=common.js.map","'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// **Github:** https://github.com/fidm/asn1\n//\n// **License:** MIT\nvar common_1 = require(\"./common\");\nexports.BufferVisitor = common_1.BufferVisitor;\nvar pem_1 = require(\"./pem\");\nexports.PEM = pem_1.PEM;\nvar asn1_1 = require(\"./asn1\");\nexports.ASN1 = asn1_1.ASN1;\nexports.Class = asn1_1.Class;\nexports.Tag = asn1_1.Tag;\nexports.BitString = asn1_1.BitString;\n//# sourceMappingURL=index.js.map","'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// **Github:** https://github.com/fidm/asn1\n//\n// **License:** MIT\nconst util_1 = require(\"util\");\nconst pemLineLength = 64;\nconst pemStart = '-----BEGIN ';\nconst pemEnd = '-----END ';\nconst pemEndOfLine = '-----';\nconst procType = 'Proc-Type';\n/**\n * Implements the PEM data encoding, which originated in Privacy\n * Enhanced Mail. The most common use of PEM encoding today is in TLS keys and\n * certificates. See RFC 1421.\n *\n * A PEM represents a PEM encoded structure.\n *\n * The encoded form is:\n * ```\n * -----BEGIN Type-----\n * Headers\n * base64-encoded Bytes\n * -----END Type-----\n * ```\n *\n * Headers like:\n * ```\n * Proc-Type: 4,ENCRYPTED\n * DEK-Info: DES-EDE3-CBC,29DE8F99F382D122\n * ```\n */\nclass PEM {\n    /**\n     * Parse PEM formatted buffer, returns one or more PEM object.\n     * If there is no PEM object, it will throw error.\n     * @param data buffer to parse.\n     */\n    static parse(data) {\n        const res = [];\n        const lines = data.toString('utf8').split('\\n')\n            .map((s) => s.trim())\n            .filter((s) => s !== '' && !s.startsWith('#'));\n        while (lines.length > 0) {\n            res.push(parse(lines));\n        }\n        if (res.length === 0) {\n            throw new Error('PEM: no block');\n        }\n        return res;\n    }\n    constructor(type, body) {\n        this.type = type;\n        this.body = body;\n        this.headers = Object.create(null);\n    }\n    /**\n     * Return exists Proc-Type header or empty string\n     */\n    get procType() {\n        return this.getHeader(procType);\n    }\n    /**\n     * Return a header or empty string with given key.\n     */\n    getHeader(key) {\n        const val = this.headers[key];\n        return val == null ? '' : val;\n    }\n    /**\n     * Set a header with given key/value.\n     */\n    setHeader(key, val) {\n        if (key.includes(':')) {\n            throw new Error('pem: cannot encode a header key that contains a colon');\n        }\n        if (key === '' || val === '') {\n            throw new Error('pem: invalid header key or value');\n        }\n        this.headers[key] = val;\n    }\n    /**\n     * Encode to PEM formatted string.\n     */\n    toString() {\n        let rVal = pemStart + this.type + pemEndOfLine + '\\n';\n        const headers = Object.keys(this.headers);\n        if (headers.length > 0) {\n            // The Proc-Type header must be written first. See RFC 1421, section 4.6.1.1\n            const type = this.procType;\n            if (type !== '') {\n                rVal += `${procType}: ${type}\\n`;\n            }\n            // For consistency of output, write other headers sorted by key.\n            headers.sort();\n            for (const key of headers) {\n                if (key !== procType) {\n                    rVal += `${key}: ${this.headers[key]}\\n`;\n                }\n            }\n            rVal += '\\n';\n        }\n        const body = this.body.toString('base64');\n        let offset = 0;\n        while (offset < body.length) {\n            rVal += body.slice(offset, offset + pemLineLength) + '\\n';\n            offset += pemLineLength;\n        }\n        rVal += pemEnd + this.type + pemEndOfLine + '\\n';\n        return rVal;\n    }\n    /**\n     * Encode to PEM formatted buffer.\n     */\n    toBuffer() {\n        return Buffer.from(this.toString(), 'utf8');\n    }\n    /**\n     * Returns the body.\n     */\n    valueOf() {\n        return this.body;\n    }\n    /**\n     * Return a friendly JSON object for debuging.\n     */\n    toJSON() {\n        return {\n            type: this.type,\n            body: this.body,\n            headers: this.headers,\n        };\n    }\n    [util_1.inspect.custom](_depth, options) {\n        return `<${this.constructor.name} ${util_1.inspect(this.toJSON(), options)}>`;\n    }\n}\nexports.PEM = PEM;\nfunction parse(lines) {\n    let line = lines.shift();\n    if (line == null || !line.startsWith(pemStart) || !line.endsWith(pemEndOfLine)) {\n        throw new Error('pem: invalid BEGIN line');\n    }\n    const type = line.slice(pemStart.length, line.length - pemEndOfLine.length);\n    if (type === '') {\n        throw new Error('pem: invalid type');\n    }\n    const headers = [];\n    line = lines.shift();\n    while (line != null && line.includes(': ')) {\n        const header = line.split(': ');\n        if (header.length !== 2 || header[0] === '' || header[1] === '') {\n            throw new Error('pem: invalid Header line');\n        }\n        headers.push(header);\n        line = lines.shift();\n    }\n    let body = '';\n    while (line != null && !line.startsWith(pemEnd)) {\n        body += line;\n        line = lines.shift();\n    }\n    if (line == null || line !== `${pemEnd}${type}${pemEndOfLine}`) {\n        throw new Error('pem: invalid END line');\n    }\n    const pem = new PEM(type, Buffer.from(body, 'base64'));\n    if (body === '' || pem.body.toString('base64') !== body) {\n        throw new Error('pem: invalid base64 body');\n    }\n    for (const header of headers) {\n        pem.setHeader(header[0], header[1]);\n    }\n    return pem;\n}\n//# sourceMappingURL=pem.js.map","'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// **Github:** https://github.com/fidm/x509\n//\n// **License:** MIT\nconst net_1 = require(\"net\");\n/**\n * Converts IP string into buffer, 4 bytes for IPv4, and 16 bytes for IPv6.\n * It will return null when IP string invalid.\n *\n * ```js\n * console.log(bytesFromIP('::1')) // <Buffer 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01>\n * ```\n * @param ip IP string to convert\n */\nfunction bytesFromIP(ip) {\n    switch (net_1.isIP(ip)) {\n        case 4:\n            return Buffer.from(ip.split('.').map((val) => parseInt(val, 10)));\n        case 6:\n            const vals = ip.split(':');\n            const buf = Buffer.alloc(16);\n            let offset = 0;\n            if (vals[vals.length - 1] === '') {\n                vals[vals.length - 1] = '0';\n            }\n            for (let i = 0; i < vals.length; i++) {\n                if (vals[i] === '') {\n                    if (i + 1 < vals.length && vals[i + 1] !== '') {\n                        // reset offset for non-zero values\n                        offset = 16 - (vals.length - i - 1) * 2;\n                    }\n                    // skip zero bytes\n                    continue;\n                }\n                buf.writeUInt16BE(parseInt(vals[i], 16), offset);\n                offset += 2;\n            }\n            return buf;\n        default:\n            return null;\n    }\n}\nexports.bytesFromIP = bytesFromIP;\n/**\n * Converts 4-bytes into an IPv4 string representation or 16-bytes into\n * an IPv6 string representation. The bytes must be in network order.\n *\n * ```js\n * console.log(bytesToIP(Buffer.from([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1]))) // '::1'\n * ```\n * @param bytes buffer to convert\n */\nfunction bytesToIP(bytes) {\n    switch (bytes.length) {\n        case 4:\n            return [bytes[0], bytes[1], bytes[2], bytes[3]].join('.');\n        case 16:\n            const ip = [];\n            let zeroAt = -1;\n            let zeroLen = 0;\n            let maxAt = -1;\n            let maxLen = 0;\n            for (let i = 0; i < bytes.length; i += 2) {\n                const hex = (bytes[i] << 8) | bytes[i + 1];\n                if (hex === 0) {\n                    zeroLen++;\n                    if (zeroAt === -1) {\n                        zeroAt = ip.length;\n                    }\n                    if (zeroLen > maxLen) {\n                        maxLen = zeroLen;\n                        maxAt = zeroAt;\n                    }\n                }\n                else {\n                    zeroAt = -1;\n                    zeroLen = 0;\n                }\n                ip.push(hex.toString(16));\n            }\n            if (maxLen > 0) {\n                let padding = '';\n                const rest = ip.slice(maxAt + maxLen);\n                ip.length = maxAt;\n                if (ip.length === 0) {\n                    padding += ':';\n                }\n                if (rest.length === 0) {\n                    padding += ':';\n                }\n                ip.push(padding, ...rest);\n            }\n            return ip.join(':');\n        default:\n            return '';\n    }\n}\nexports.bytesToIP = bytesToIP;\nconst oids = Object.create(null);\nconst oidReg = /^[0-9.]+$/;\n/**\n * Returns Object Identifier (dot-separated numeric string) that registered by initOID function.\n * It will return empty string if not exists.\n * @param nameOrId OID name or OID\n */\nfunction getOID(nameOrId) {\n    if (oidReg.test(nameOrId) && oids[nameOrId] !== '') {\n        return nameOrId;\n    }\n    return oids[nameOrId] == null ? '' : oids[nameOrId];\n}\nexports.getOID = getOID;\n/**\n * Returns Object Identifier name that registered by initOID function.\n * It will return the argument nameOrId if not exists.\n * @param nameOrId OID name or OID\n */\nfunction getOIDName(nameOrId) {\n    if (!oidReg.test(nameOrId) && oids[nameOrId] !== '') {\n        return nameOrId;\n    }\n    return oids[nameOrId] == null ? nameOrId : oids[nameOrId];\n}\nexports.getOIDName = getOIDName;\n/**\n * Register OID and name\n * @param oid Object Identifier\n * @param name Object Identifier name\n */\nfunction initOID(oid, name) {\n    oids[oid] = name;\n    oids[name] = oid;\n}\n// algorithm OIDs\ninitOID('1.2.840.113549.1.1.1', 'rsaEncryption');\ninitOID('1.2.840.113549.1.1.4', 'md5WithRsaEncryption');\ninitOID('1.2.840.113549.1.1.5', 'sha1WithRsaEncryption');\ninitOID('1.2.840.113549.1.1.8', 'mgf1');\ninitOID('1.2.840.113549.1.1.10', 'RSASSA-PSS');\ninitOID('1.2.840.113549.1.1.11', 'sha256WithRsaEncryption');\ninitOID('1.2.840.113549.1.1.12', 'sha384WithRsaEncryption');\ninitOID('1.2.840.113549.1.1.13', 'sha512WithRsaEncryption');\ninitOID('1.2.840.10045.2.1', 'ecEncryption'); // ECDSA and ECDH Public Key\ninitOID('1.2.840.10045.4.1', 'ecdsaWithSha1');\ninitOID('1.2.840.10045.4.3.2', 'ecdsaWithSha256');\ninitOID('1.2.840.10045.4.3.3', 'ecdsaWithSha384');\ninitOID('1.2.840.10045.4.3.4', 'ecdsaWithSha512');\ninitOID('1.2.840.10040.4.3', 'dsaWithSha1');\ninitOID('2.16.840.1.101.3.4.3.2', 'dsaWithSha256');\ninitOID('1.3.14.3.2.7', 'desCBC');\ninitOID('1.3.14.3.2.26', 'sha1');\ninitOID('2.16.840.1.101.3.4.2.1', 'sha256');\ninitOID('2.16.840.1.101.3.4.2.2', 'sha384');\ninitOID('2.16.840.1.101.3.4.2.3', 'sha512');\ninitOID('1.2.840.113549.2.5', 'md5');\n// Algorithm Identifiers for Ed25519, Ed448, X25519 and X448 for use in the Internet X.509 Public Key Infrastructure\n// https://tools.ietf.org/html/draft-ietf-curdle-pkix-10\ninitOID('1.3.101.110', 'X25519');\ninitOID('1.3.101.111', 'X448');\ninitOID('1.3.101.112', 'Ed25519');\ninitOID('1.3.101.113', 'Ed448');\n// pkcs#7 content types\ninitOID('1.2.840.113549.1.7.1', 'data');\ninitOID('1.2.840.113549.1.7.2', 'signedData');\ninitOID('1.2.840.113549.1.7.3', 'envelopedData');\ninitOID('1.2.840.113549.1.7.4', 'signedAndEnvelopedData');\ninitOID('1.2.840.113549.1.7.5', 'digestedData');\ninitOID('1.2.840.113549.1.7.6', 'encryptedData');\n// pkcs#9 oids\ninitOID('1.2.840.113549.1.9.1', 'emailAddress');\ninitOID('1.2.840.113549.1.9.2', 'unstructuredName');\ninitOID('1.2.840.113549.1.9.3', 'contentType');\ninitOID('1.2.840.113549.1.9.4', 'messageDigest');\ninitOID('1.2.840.113549.1.9.5', 'signingTime');\ninitOID('1.2.840.113549.1.9.6', 'counterSignature');\ninitOID('1.2.840.113549.1.9.7', 'challengePassword');\ninitOID('1.2.840.113549.1.9.8', 'unstructuredAddress');\ninitOID('1.2.840.113549.1.9.14', 'extensionRequest');\ninitOID('1.2.840.113549.1.9.20', 'friendlyName');\ninitOID('1.2.840.113549.1.9.21', 'localKeyId');\ninitOID('1.2.840.113549.1.9.22.1', 'x509Certificate');\n// pkcs#12 safe bags\ninitOID('1.2.840.113549.1.12.10.1.1', 'keyBag');\ninitOID('1.2.840.113549.1.12.10.1.2', 'pkcs8ShroudedKeyBag');\ninitOID('1.2.840.113549.1.12.10.1.3', 'certBag');\ninitOID('1.2.840.113549.1.12.10.1.4', 'crlBag');\ninitOID('1.2.840.113549.1.12.10.1.5', 'secretBag');\ninitOID('1.2.840.113549.1.12.10.1.6', 'safeContentsBag');\n// password-based-encryption for pkcs#12\ninitOID('1.2.840.113549.1.5.13', 'pkcs5PBES2');\ninitOID('1.2.840.113549.1.5.12', 'pkcs5PBKDF2');\n// hmac OIDs\ninitOID('1.2.840.113549.2.7', 'hmacWithSha1');\ninitOID('1.2.840.113549.2.9', 'hmacWithSha256');\ninitOID('1.2.840.113549.2.10', 'hmacWithSha384');\ninitOID('1.2.840.113549.2.11', 'hmacWithSha512');\n// symmetric key algorithm oids\ninitOID('1.2.840.113549.3.7', '3desCBC');\ninitOID('2.16.840.1.101.3.4.1.2', 'aesCBC128');\ninitOID('2.16.840.1.101.3.4.1.42', 'aesCBC256');\n// certificate issuer/subject OIDs\ninitOID('2.5.4.3', 'commonName');\ninitOID('2.5.4.5', 'serialName');\ninitOID('2.5.4.6', 'countryName');\ninitOID('2.5.4.7', 'localityName');\ninitOID('2.5.4.8', 'stateOrProvinceName');\ninitOID('2.5.4.10', 'organizationName');\ninitOID('2.5.4.11', 'organizationalUnitName');\ninitOID('2.5.4.15', 'businessCategory');\n// X.509 extension OIDs\ninitOID('2.16.840.1.113730.1.1', 'nsCertType');\ninitOID('2.5.29.2', 'keyAttributes'); // obsolete, use .37 or .15\ninitOID('2.5.29.4', 'keyUsageRestriction'); // obsolete, use .37 or .15\ninitOID('2.5.29.6', 'subtreesConstraint'); // obsolete, use .30\ninitOID('2.5.29.9', 'subjectDirectoryAttributes');\ninitOID('2.5.29.14', 'subjectKeyIdentifier');\ninitOID('2.5.29.15', 'keyUsage');\ninitOID('2.5.29.16', 'privateKeyUsagePeriod');\ninitOID('2.5.29.17', 'subjectAltName');\ninitOID('2.5.29.18', 'issuerAltName');\ninitOID('2.5.29.19', 'basicConstraints');\ninitOID('2.5.29.20', 'cRLNumber');\ninitOID('2.5.29.21', 'cRLReason');\ninitOID('2.5.29.22', 'expirationDate');\ninitOID('2.5.29.23', 'instructionCode');\ninitOID('2.5.29.24', 'invalidityDate');\ninitOID('2.5.29.27', 'deltaCRLIndicator');\ninitOID('2.5.29.28', 'issuingDistributionPoint');\ninitOID('2.5.29.29', 'certificateIssuer');\ninitOID('2.5.29.30', 'nameConstraints');\ninitOID('2.5.29.31', 'cRLDistributionPoints');\ninitOID('2.5.29.32', 'certificatePolicies');\ninitOID('2.5.29.33', 'policyMappings');\ninitOID('2.5.29.35', 'authorityKeyIdentifier');\ninitOID('2.5.29.36', 'policyConstraints');\ninitOID('2.5.29.37', 'extKeyUsage');\ninitOID('2.5.29.46', 'freshestCRL');\ninitOID('2.5.29.54', 'inhibitAnyPolicy');\n// extKeyUsage purposes\ninitOID('1.3.6.1.4.1.311.60.2.1.2', 'jurisdictionST');\ninitOID('1.3.6.1.4.1.311.60.2.1.3', 'jurisdictionC');\ninitOID('1.3.6.1.4.1.11129.2.4.2', 'timestampList');\ninitOID('1.3.6.1.5.5.7.1.1', 'authorityInfoAccess');\ninitOID('1.3.6.1.5.5.7.3.1', 'serverAuth');\ninitOID('1.3.6.1.5.5.7.3.2', 'clientAuth');\ninitOID('1.3.6.1.5.5.7.3.3', 'codeSigning');\ninitOID('1.3.6.1.5.5.7.3.4', 'emailProtection');\ninitOID('1.3.6.1.5.5.7.3.8', 'timeStamping');\ninitOID('1.3.6.1.5.5.7.48.1', 'authorityInfoAccessOcsp');\ninitOID('1.3.6.1.5.5.7.48.2', 'authorityInfoAccessIssuers');\n//# sourceMappingURL=common.js.map","'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// **Github:** https://github.com/fidm/x509\n//\n// **License:** MIT\nvar common_1 = require(\"./common\");\nexports.bytesFromIP = common_1.bytesFromIP;\nexports.bytesToIP = common_1.bytesToIP;\nexports.getOID = common_1.getOID;\nexports.getOIDName = common_1.getOIDName;\nvar pki_1 = require(\"./pki\");\nexports.PublicKey = pki_1.PublicKey;\nexports.PrivateKey = pki_1.PrivateKey;\nexports.RSAPublicKey = pki_1.RSAPublicKey;\nexports.RSAPrivateKey = pki_1.RSAPrivateKey;\nvar x509_1 = require(\"./x509\");\nexports.Certificate = x509_1.Certificate;\nexports.DistinguishedName = x509_1.DistinguishedName;\n//# sourceMappingURL=index.js.map","'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// **Github:** https://github.com/fidm/x509\n//\n// **License:** MIT\nconst util_1 = require(\"util\");\nconst crypto_1 = require(\"crypto\");\nconst tweetnacl_1 = require(\"tweetnacl\");\nconst asn1_1 = require(\"@fidm/asn1\");\nconst common_1 = require(\"./common\");\n/**\n * ASN.1 Template for PKCS#8 Public Key.\n */\nexports.publicKeyValidator = {\n    name: 'PublicKeyInfo',\n    class: asn1_1.Class.UNIVERSAL,\n    tag: asn1_1.Tag.SEQUENCE,\n    capture: 'publicKeyInfo',\n    value: [{\n            name: 'PublicKeyInfo.AlgorithmIdentifier',\n            class: asn1_1.Class.UNIVERSAL,\n            tag: asn1_1.Tag.SEQUENCE,\n            value: [{\n                    name: 'PublicKeyAlgorithmIdentifier.algorithm',\n                    class: asn1_1.Class.UNIVERSAL,\n                    tag: asn1_1.Tag.OID,\n                    capture: 'publicKeyOID',\n                }],\n        }, {\n            name: 'PublicKeyInfo.PublicKey',\n            class: asn1_1.Class.UNIVERSAL,\n            tag: asn1_1.Tag.BITSTRING,\n            capture: 'publicKey',\n        }],\n};\n/**\n * ASN.1 Template for PKCS#8 Private Key. https://tools.ietf.org/html/rfc5208\n */\nexports.privateKeyValidator = {\n    name: 'PrivateKeyInfo',\n    class: asn1_1.Class.UNIVERSAL,\n    tag: asn1_1.Tag.SEQUENCE,\n    capture: 'privateKeyInfo',\n    value: [{\n            name: 'PrivateKeyInfo.Version',\n            class: asn1_1.Class.UNIVERSAL,\n            tag: asn1_1.Tag.INTEGER,\n            capture: 'privateKeyVersion',\n        }, {\n            name: 'PrivateKeyInfo.AlgorithmIdentifier',\n            class: asn1_1.Class.UNIVERSAL,\n            tag: asn1_1.Tag.SEQUENCE,\n            value: [{\n                    name: 'PrivateKeyAlgorithmIdentifier.algorithm',\n                    class: asn1_1.Class.UNIVERSAL,\n                    tag: asn1_1.Tag.OID,\n                    capture: 'privateKeyOID',\n                }],\n        }, {\n            name: 'PrivateKeyInfo.PrivateKey',\n            class: asn1_1.Class.UNIVERSAL,\n            tag: asn1_1.Tag.OCTETSTRING,\n            capture: 'privateKey',\n        }],\n};\n// validator for an RSA public key\nconst rsaPublicKeyValidator = {\n    // RSAPublicKey\n    name: 'RSAPublicKey',\n    class: asn1_1.Class.UNIVERSAL,\n    tag: asn1_1.Tag.SEQUENCE,\n    value: [{\n            // modulus (n)\n            name: 'RSAPublicKey.modulus',\n            class: asn1_1.Class.UNIVERSAL,\n            tag: asn1_1.Tag.INTEGER,\n            capture: 'publicKeyModulus',\n        }, {\n            // publicExponent (e)\n            name: 'RSAPublicKey.exponent',\n            class: asn1_1.Class.UNIVERSAL,\n            tag: asn1_1.Tag.INTEGER,\n            capture: 'publicKeyExponent',\n        }],\n};\nconst rsaPrivateKeyValidator = {\n    // RSAPrivateKey\n    name: 'RSAPrivateKey',\n    class: asn1_1.Class.UNIVERSAL,\n    tag: asn1_1.Tag.SEQUENCE,\n    value: [{\n            // Version (INTEGER)\n            name: 'RSAPrivateKey.version',\n            class: asn1_1.Class.UNIVERSAL,\n            tag: asn1_1.Tag.INTEGER,\n            capture: 'privateKeyVersion',\n        }, {\n            // modulus (n)\n            name: 'RSAPrivateKey.modulus',\n            class: asn1_1.Class.UNIVERSAL,\n            tag: asn1_1.Tag.INTEGER,\n            capture: 'privateKeyModulus',\n        }, {\n            // publicExponent (e)\n            name: 'RSAPrivateKey.publicExponent',\n            class: asn1_1.Class.UNIVERSAL,\n            tag: asn1_1.Tag.INTEGER,\n            capture: 'privateKeyPublicExponent',\n        }, {\n            // privateExponent (d)\n            name: 'RSAPrivateKey.privateExponent',\n            class: asn1_1.Class.UNIVERSAL,\n            tag: asn1_1.Tag.INTEGER,\n            capture: 'privateKeyPrivateExponent',\n        }, {\n            // prime1 (p)\n            name: 'RSAPrivateKey.prime1',\n            class: asn1_1.Class.UNIVERSAL,\n            tag: asn1_1.Tag.INTEGER,\n            capture: 'privateKeyPrime1',\n        }, {\n            // prime2 (q)\n            name: 'RSAPrivateKey.prime2',\n            class: asn1_1.Class.UNIVERSAL,\n            tag: asn1_1.Tag.INTEGER,\n            capture: 'privateKeyPrime2',\n        }, {\n            // exponent1 (d mod (p-1))\n            name: 'RSAPrivateKey.exponent1',\n            class: asn1_1.Class.UNIVERSAL,\n            tag: asn1_1.Tag.INTEGER,\n            capture: 'privateKeyExponent1',\n        }, {\n            // exponent2 (d mod (q-1))\n            name: 'RSAPrivateKey.exponent2',\n            class: asn1_1.Class.UNIVERSAL,\n            tag: asn1_1.Tag.INTEGER,\n            capture: 'privateKeyExponent2',\n        }, {\n            // coefficient ((inverse of q) mod p)\n            name: 'RSAPrivateKey.coefficient',\n            class: asn1_1.Class.UNIVERSAL,\n            tag: asn1_1.Tag.INTEGER,\n            capture: 'privateKeyCoefficient',\n        }],\n};\nconst EdDSAPrivateKeyOIDs = [\n    // https://tools.ietf.org/html/draft-ietf-curdle-pkix-10\n    common_1.getOID('X25519'),\n    common_1.getOID('X448'),\n    common_1.getOID('Ed25519'),\n    common_1.getOID('Ed448'),\n];\n/**\n * PKCS#8 Public Key\n */\nclass PublicKey {\n    constructor(obj) {\n        const captures = {};\n        const err = obj.validate(exports.publicKeyValidator, captures);\n        if (err != null) {\n            throw new Error('Cannot read X.509 public key: ' + err.message);\n        }\n        this.oid = asn1_1.ASN1.parseOID(captures.publicKeyOID.bytes);\n        this.algo = common_1.getOIDName(this.oid);\n        this._pkcs8 = obj;\n        this._keyRaw = asn1_1.ASN1.parseBitString(captures.publicKey.bytes).buf;\n        this._finalKey = this._keyRaw;\n        this._finalPEM = '';\n    }\n    /**\n     * Parse an PublicKey for X.509 certificate from PKCS#8 PEM formatted buffer or PKCS#1 RSA PEM formatted buffer.\n     * @param pem PEM formatted buffer\n     */\n    static fromPEM(pem) {\n        const msg = asn1_1.PEM.parse(pem)[0];\n        if (msg.procType.includes('ENCRYPTED')) {\n            throw new Error('Could not convert public key from PEM, PEM is encrypted.');\n        }\n        const obj = asn1_1.ASN1.fromDER(msg.body, true);\n        switch (msg.type) {\n            case 'PUBLIC KEY': // PKCS#8\n                return new PublicKey(obj);\n            case 'RSA PUBLIC KEY': // PKCS#1\n                const _pkcs8 = asn1_1.ASN1.Seq([\n                    // AlgorithmIdentifier\n                    asn1_1.ASN1.Seq([\n                        // algorithm\n                        asn1_1.ASN1.OID(common_1.getOID('rsaEncryption')),\n                        // optional parameters\n                        asn1_1.ASN1.Null(),\n                    ]),\n                    // PublicKey\n                    asn1_1.ASN1.BitString(obj.DER),\n                ]);\n                return new PublicKey(_pkcs8);\n            default:\n                throw new Error('Could not convert public key from PEM, recommend PKCS#8 PEM');\n        }\n    }\n    /**\n     * Registers an external Verifier with object identifier.\n     * Built-in verifiers: Ed25519, RSA, others see https://nodejs.org/api/crypto.html#crypto_class_verify\n     * ```js\n     * PublicKey.addVerifier(getOID('Ed25519'), function (this: PublicKey, data: Buffer, signature: Buffer): boolean {\n     *   return ed25519.detached.verify(data, signature, this.keyRaw)\n     * })\n     * ```\n     * @param oid algorithm object identifier\n     * @param fn Verifier function\n     */\n    static addVerifier(oid, fn) {\n        oid = common_1.getOID(oid);\n        if (oid === '') {\n            throw new Error(`Invalid object identifier: ${oid}`);\n        }\n        if (PublicKey._verifiers[oid] != null) {\n            throw new Error(`Verifier ${oid} exists`);\n        }\n        PublicKey._verifiers[oid] = fn;\n    }\n    /**\n     * underlying key buffer\n     */\n    get keyRaw() {\n        return this._finalKey;\n    }\n    /**\n     * Returns true if the provided data and the given signature matched.\n     * ```js\n     * certificate.publicKey.verify(data, signature, 'sha256') // => true or false\n     * ```\n     * @param data data to verify\n     * @param signature signature that signed by private key\n     * @param hashAlgorithm hash algorithm, such as 'sha256', 'sha1'\n     */\n    verify(data, signature, hashAlgorithm) {\n        const verifier = PublicKey._verifiers[this.oid];\n        if (verifier != null) {\n            const sum = crypto_1.createHash(hashAlgorithm).update(data).digest();\n            return verifier.call(this, sum, signature);\n        }\n        const verify = crypto_1.createVerify(hashAlgorithm);\n        verify.update(data);\n        return verify.verify(this.toPEM(), signature);\n    }\n    /**\n     * Returns the digest of the PublicKey with given hash algorithm.\n     * ```js\n     * certificate.publicKey.getFingerprint('sha1', 'PublicKey') // => Buffer\n     * ```\n     * @param hashAlgorithm hash algorithm, such as 'sha256', 'sha1'\n     * @param type 'PublicKey' or 'PublicKeyInfo'\n     */\n    getFingerprint(hashAlgorithm, type = 'PublicKey') {\n        let bytes;\n        switch (type) {\n            case 'PublicKeyInfo':\n                bytes = this._pkcs8.DER;\n                break;\n            case 'PublicKey':\n                bytes = this._keyRaw;\n                break;\n            default:\n                throw new Error(`Unknown fingerprint type \"${type}\".`);\n        }\n        const hasher = crypto_1.createHash(hashAlgorithm);\n        hasher.update(bytes);\n        return hasher.digest();\n    }\n    /**\n     * Returns an ASN.1 object of this PublicKey\n     */\n    toASN1() {\n        return this._pkcs8;\n    }\n    /**\n     * Returns an DER formatted buffer of this PublicKey\n     */\n    toDER() {\n        return this._pkcs8.DER;\n    }\n    /**\n     * Returns an PEM formatted string of this PublicKey\n     */\n    toPEM() {\n        if (this._finalPEM === '') {\n            this._finalPEM = new asn1_1.PEM('PUBLIC KEY', this._pkcs8.DER).toString();\n        }\n        return this._finalPEM;\n    }\n    /**\n     * Return a friendly JSON object for debuging.\n     */\n    toJSON() {\n        return {\n            oid: this.oid,\n            algo: this.algo,\n            publicKey: this._keyRaw,\n        };\n    }\n    [util_1.inspect.custom](_depth, options) {\n        return `<${this.constructor.name} ${util_1.inspect(this.toJSON(), options)}>`;\n    }\n}\nPublicKey._verifiers = Object.create(null);\nexports.PublicKey = PublicKey;\n/**\n * PKCS#8 Private Key\n */\nclass PrivateKey {\n    constructor(obj) {\n        // get RSA params\n        const captures = Object.create(null);\n        const err = obj.validate(exports.privateKeyValidator, captures);\n        if (err != null) {\n            throw new Error('Cannot read X.509 private key: ' + err.message);\n        }\n        this.version = asn1_1.ASN1.parseIntegerNum(captures.privateKeyVersion.bytes) + 1;\n        this.oid = asn1_1.ASN1.parseOID(captures.privateKeyOID.bytes);\n        this.algo = common_1.getOIDName(this.oid);\n        this._pkcs8 = obj;\n        this._keyRaw = captures.privateKey.bytes;\n        this._publicKeyRaw = null;\n        this._finalKey = this._keyRaw;\n        this._finalPEM = '';\n        if (EdDSAPrivateKeyOIDs.includes(this.oid)) {\n            this._finalKey = this._keyRaw = asn1_1.ASN1.parseDER(this._keyRaw, asn1_1.Class.UNIVERSAL, asn1_1.Tag.OCTETSTRING).bytes;\n            if (this.oid === '1.3.101.112') {\n                const keypair = tweetnacl_1.sign.keyPair.fromSeed(this._keyRaw);\n                this._publicKeyRaw = Buffer.from(keypair.publicKey);\n                this._finalKey = Buffer.from(keypair.secretKey);\n            }\n            else if (this.version === 2) {\n                for (const val of obj.mustCompound()) {\n                    if (val.class === asn1_1.Class.CONTEXT_SPECIFIC && val.tag === 1) {\n                        this._publicKeyRaw = asn1_1.ASN1.parseBitString(val.bytes).buf;\n                        this._finalKey = Buffer.concat([this._keyRaw, this._publicKeyRaw]);\n                    }\n                }\n            }\n        }\n    }\n    /**\n     * Parse an PrivateKey for X.509 certificate from PKCS#8 PEM formatted buffer or PKCS#1 RSA PEM formatted buffer.\n     * @param pem PEM formatted buffer\n     */\n    static fromPEM(pem) {\n        const msg = asn1_1.PEM.parse(pem)[0];\n        if (msg.procType.includes('ENCRYPTED')) {\n            throw new Error('Could not convert private key from PEM, PEM is encrypted.');\n        }\n        let obj = asn1_1.ASN1.fromDER(msg.body, true);\n        switch (msg.type) {\n            case 'PRIVATE KEY': // PKCS#8\n                return new PrivateKey(obj);\n            case 'RSA PRIVATE KEY': // PKCS#1\n                obj = asn1_1.ASN1.Seq([\n                    // Version (INTEGER)\n                    obj.value[0],\n                    // AlgorithmIdentifier\n                    asn1_1.ASN1.Seq([\n                        // algorithm\n                        asn1_1.ASN1.OID(common_1.getOID('rsaEncryption')),\n                        // optional parameters\n                        asn1_1.ASN1.Null(),\n                    ]),\n                    // PrivateKey\n                    new asn1_1.ASN1(asn1_1.Class.UNIVERSAL, asn1_1.Tag.OCTETSTRING, obj.DER),\n                ]);\n                return new PrivateKey(obj);\n            default:\n                throw new Error('Could not convert private key from PEM, recommend PKCS#8 PEM');\n        }\n    }\n    /**\n     * Registers an external Signer with object identifier.\n     * Built-in verifiers: Ed25519, RSA, others see https://nodejs.org/api/crypto.html#crypto_class_sign\n     * ```js\n     * PrivateKey.addSigner(getOID('Ed25519'), function (this: PrivateKey, data: Buffer): Buffer {\n     *   const key = this.keyRaw\n     *   if (key.length !== 64) {\n     *     throw new Error('Invalid signing key.')\n     *   }\n     *   return Buffer.from(ed25519.detached(data, key))\n     * })\n     * ```\n     * @param oid algorithm object identifier\n     * @param fn Verifier function\n     */\n    static addSigner(oid, fn) {\n        oid = common_1.getOID(oid);\n        if (oid === '') {\n            throw new Error(`Invalid object identifier: ${oid}`);\n        }\n        if (PrivateKey._signers[oid] != null) {\n            throw new Error(`Signer ${oid} exists`);\n        }\n        PrivateKey._signers[oid] = fn;\n    }\n    /**\n     * underlying key buffer\n     */\n    get keyRaw() {\n        return this._finalKey;\n    }\n    /**\n     * Returns publicKey buffer, it is used for Ed25519/Ed448.\n     */\n    get publicKeyRaw() {\n        return this._publicKeyRaw;\n    }\n    /**\n     * Returns signature for the given data and hash algorithm.\n     * @param data\n     * @param hashAlgorithm\n     */\n    sign(data, hashAlgorithm) {\n        const signer = PrivateKey._signers[this.oid];\n        if (signer != null) {\n            const sum = crypto_1.createHash(hashAlgorithm).update(data).digest();\n            return signer.call(this, sum);\n        }\n        const sign = crypto_1.createSign(hashAlgorithm);\n        sign.update(data);\n        return sign.sign(this.toPEM());\n    }\n    /**\n     * Returns an ASN.1 object of this PrivateKey\n     */\n    toASN1() {\n        return this._pkcs8;\n    }\n    /**\n     * Returns an DER formatted buffer of this PrivateKey\n     */\n    toDER() {\n        return this._pkcs8.DER;\n    }\n    /**\n     * Returns an PEM formatted string of this PrivateKey\n     */\n    toPEM() {\n        if (this._finalPEM === '') {\n            this._finalPEM = new asn1_1.PEM('PRIVATE KEY', this._pkcs8.DER).toString();\n        }\n        return this._finalPEM;\n    }\n    /**\n     * Return a friendly JSON object for debuging.\n     */\n    toJSON() {\n        return {\n            version: this.version,\n            oid: this.oid,\n            algo: this.algo,\n            privateKey: this._keyRaw,\n            publicKey: this._publicKeyRaw,\n        };\n    }\n    [util_1.inspect.custom](_depth, options) {\n        return `<${this.constructor.name} ${util_1.inspect(this.toJSON(), options)}>`;\n    }\n}\nPrivateKey._signers = Object.create(null);\nexports.PrivateKey = PrivateKey;\n/**\n * PKCS#1 RSA Public Key\n */\nclass RSAPublicKey extends PublicKey {\n    static fromPublicKey(publicKey) {\n        return new RSAPublicKey(publicKey.toASN1());\n    }\n    constructor(obj) {\n        super(obj);\n        if (common_1.getOID(this.oid) !== common_1.getOID('rsaEncryption')) {\n            throw new Error(`Invalid RSA public key, unknown OID: ${this.oid}`);\n        }\n        // get RSA params\n        const captures = Object.create(null);\n        this._pkcs1 = asn1_1.ASN1.fromDER(this._keyRaw, true);\n        const err = this._pkcs1.validate(rsaPublicKeyValidator, captures);\n        if (err != null) {\n            throw new Error('Cannot read RSA public key: ' + err.message);\n        }\n        this.modulus = asn1_1.ASN1.parseIntegerStr(captures.publicKeyModulus.bytes);\n        this.exponent = asn1_1.ASN1.parseIntegerNum(captures.publicKeyExponent.bytes);\n    }\n    /**\n     * Returns an PKCS#1 ASN.1 object of this RSAPublicKey\n     */\n    toASN1() {\n        return this._pkcs1;\n    }\n    /**\n     * Returns an PKCS#1 DER formatted buffer of this RSAPublicKey\n     */\n    toDER() {\n        return this._keyRaw;\n    }\n    /**\n     * Returns an PKCS#1 PEM formatted string of this RSAPublicKey\n     */\n    toPEM() {\n        if (this._finalPEM === '') {\n            this._finalPEM = new asn1_1.PEM('RSA PUBLIC KEY', this._keyRaw).toString();\n        }\n        return this._finalPEM;\n    }\n    /**\n     * Returns an PKCS#8 PEM formatted string of this RSAPublicKey\n     */\n    toPublicKeyPEM() {\n        return new asn1_1.PEM('PUBLIC KEY', this._pkcs8.DER).toString();\n    }\n    /**\n     * Return a friendly JSON object for debuging.\n     */\n    toJSON() {\n        return {\n            oid: this.oid,\n            algo: this.algo,\n            modulus: trimLeadingZeroByte(this.modulus),\n            exponent: this.exponent,\n        };\n    }\n    [util_1.inspect.custom](_depth, options) {\n        return `<${this.constructor.name} ${util_1.inspect(this.toJSON(), options)}>`;\n    }\n}\nexports.RSAPublicKey = RSAPublicKey;\n/**\n * PKCS#1 RSA Private Key\n */\nclass RSAPrivateKey extends PrivateKey {\n    static fromPrivateKey(privateKey) {\n        return new RSAPrivateKey(privateKey.toASN1());\n    }\n    constructor(obj) {\n        super(obj);\n        if (common_1.getOID(this.oid) !== common_1.getOID('rsaEncryption')) {\n            throw new Error(`Invalid RSA private key, unknown OID: ${this.oid}`);\n        }\n        // get RSA params\n        const captures = Object.create(null);\n        this._pkcs1 = asn1_1.ASN1.fromDER(this._keyRaw, true);\n        const err = this._pkcs1.validate(rsaPrivateKeyValidator, captures);\n        if (err != null) {\n            throw new Error('Cannot read RSA private key: ' + err.message);\n        }\n        this.publicExponent = asn1_1.ASN1.parseIntegerNum(captures.privateKeyPublicExponent.bytes);\n        this.privateExponent = asn1_1.ASN1.parseIntegerStr(captures.privateKeyPrivateExponent.bytes);\n        this.modulus = asn1_1.ASN1.parseIntegerStr(captures.privateKeyModulus.bytes);\n        this.prime1 = asn1_1.ASN1.parseIntegerStr(captures.privateKeyPrime1.bytes);\n        this.prime2 = asn1_1.ASN1.parseIntegerStr(captures.privateKeyPrime2.bytes);\n        this.exponent1 = asn1_1.ASN1.parseIntegerStr(captures.privateKeyExponent1.bytes);\n        this.exponent2 = asn1_1.ASN1.parseIntegerStr(captures.privateKeyExponent2.bytes);\n        this.coefficient = asn1_1.ASN1.parseIntegerStr(captures.privateKeyCoefficient.bytes);\n    }\n    /**\n     * Returns an PKCS#1 ASN.1 object of this RSAPrivateKey\n     */\n    toASN1() {\n        return this._pkcs1;\n    }\n    /**\n     * Returns an PKCS#1 DER formatted buffer of this RSAPrivateKey\n     */\n    toDER() {\n        return this._keyRaw;\n    }\n    /**\n     * Returns an PKCS#1 PEM formatted string of this RSAPrivateKey\n     */\n    toPEM() {\n        if (this._finalPEM === '') {\n            this._finalPEM = new asn1_1.PEM('RSA PRIVATE KEY', this._keyRaw).toString();\n        }\n        return this._finalPEM;\n    }\n    /**\n     * Returns an PKCS#8 PEM formatted string of this RSAPrivateKey\n     */\n    toPrivateKeyPEM() {\n        return new asn1_1.PEM('PRIVATE KEY', this._pkcs8.DER).toString();\n    }\n    /**\n     * Return a friendly JSON object for debuging.\n     */\n    toJSON() {\n        return {\n            version: this.version,\n            oid: this.oid,\n            algo: this.algo,\n            publicExponent: this.publicExponent,\n            privateExponent: trimLeadingZeroByte(this.privateExponent),\n            modulus: trimLeadingZeroByte(this.modulus),\n            prime1: trimLeadingZeroByte(this.prime1),\n            prime2: trimLeadingZeroByte(this.prime2),\n            exponent1: trimLeadingZeroByte(this.exponent1),\n            exponent2: trimLeadingZeroByte(this.exponent2),\n            coefficient: trimLeadingZeroByte(this.coefficient),\n        };\n    }\n    [util_1.inspect.custom](_depth, options) {\n        return `<${this.constructor.name} ${util_1.inspect(this.toJSON(), options)}>`;\n    }\n}\nexports.RSAPrivateKey = RSAPrivateKey;\n// leading 00 byte is signed representation for BigInteger\n// https://stackoverflow.com/questions/8515691/getting-1-byte-extra-in-the-modulus-rsa-key-and-sometimes-for-exponents-also\nfunction trimLeadingZeroByte(hex) {\n    return (hex.length % 8 !== 0) && hex.startsWith('00') ? hex.slice(2) : hex;\n}\nPublicKey.addVerifier(common_1.getOID('Ed25519'), function (data, signature) {\n    return tweetnacl_1.sign.detached.verify(data, signature, this.keyRaw);\n});\nPrivateKey.addSigner(common_1.getOID('Ed25519'), function (data) {\n    const key = this.keyRaw;\n    if (key.length !== 64) {\n        throw new Error('Invalid signing key.');\n    }\n    return Buffer.from(tweetnacl_1.sign.detached(data, key));\n});\n//# sourceMappingURL=pki.js.map","'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// **Github:** https://github.com/fidm/x509\n//\n// **License:** MIT\nconst util_1 = require(\"util\");\nconst crypto_1 = require(\"crypto\");\nconst asn1_1 = require(\"@fidm/asn1\");\nconst common_1 = require(\"./common\");\nconst pki_1 = require(\"./pki\");\n// short name OID mappings\nconst shortNames = Object.create(null);\nshortNames.CN = common_1.getOID('commonName');\nshortNames.commonName = 'CN';\nshortNames.C = common_1.getOID('countryName');\nshortNames.countryName = 'C';\nshortNames.L = common_1.getOID('localityName');\nshortNames.localityName = 'L';\nshortNames.ST = common_1.getOID('stateOrProvinceName');\nshortNames.stateOrProvinceName = 'ST';\nshortNames.O = common_1.getOID('organizationName');\nshortNames.organizationName = 'O';\nshortNames.OU = common_1.getOID('organizationalUnitName');\nshortNames.organizationalUnitName = 'OU';\nshortNames.E = common_1.getOID('emailAddress');\nshortNames.emailAddress = 'E';\nfunction getShortName(name) {\n    return shortNames[name] == null ? '' : shortNames[name];\n}\n// validator for an X.509v3 certificate\nconst x509CertificateValidator = {\n    name: 'Certificate',\n    class: asn1_1.Class.UNIVERSAL,\n    tag: asn1_1.Tag.SEQUENCE,\n    value: [{\n            name: 'Certificate.TBSCertificate',\n            class: asn1_1.Class.UNIVERSAL,\n            tag: asn1_1.Tag.SEQUENCE,\n            capture: 'tbsCertificate',\n            value: [{\n                    name: 'Certificate.TBSCertificate.version',\n                    class: asn1_1.Class.CONTEXT_SPECIFIC,\n                    tag: asn1_1.Tag.NONE,\n                    optional: true,\n                    value: [{\n                            name: 'Certificate.TBSCertificate.version.integer',\n                            class: asn1_1.Class.UNIVERSAL,\n                            tag: asn1_1.Tag.INTEGER,\n                            capture: 'certVersion',\n                        }],\n                }, {\n                    name: 'Certificate.TBSCertificate.serialNumber',\n                    class: asn1_1.Class.UNIVERSAL,\n                    tag: asn1_1.Tag.INTEGER,\n                    capture: 'certSerialNumber',\n                }, {\n                    name: 'Certificate.TBSCertificate.signature',\n                    class: asn1_1.Class.UNIVERSAL,\n                    tag: asn1_1.Tag.SEQUENCE,\n                    value: [{\n                            name: 'Certificate.TBSCertificate.signature.algorithm',\n                            class: asn1_1.Class.UNIVERSAL,\n                            tag: asn1_1.Tag.OID,\n                            capture: 'certinfoSignatureOID',\n                        }, {\n                            name: 'Certificate.TBSCertificate.signature.parameters',\n                            class: asn1_1.Class.UNIVERSAL,\n                            tag: asn1_1.Tag.OCTETSTRING,\n                            optional: true,\n                            capture: 'certinfoSignatureParams',\n                        }],\n                }, {\n                    name: 'Certificate.TBSCertificate.issuer',\n                    class: asn1_1.Class.UNIVERSAL,\n                    tag: asn1_1.Tag.SEQUENCE,\n                    capture: 'certIssuer',\n                }, {\n                    name: 'Certificate.TBSCertificate.validity',\n                    class: asn1_1.Class.UNIVERSAL,\n                    tag: asn1_1.Tag.SEQUENCE,\n                    value: [{\n                            name: 'Certificate.TBSCertificate.validity.notBefore',\n                            class: asn1_1.Class.UNIVERSAL,\n                            tag: [asn1_1.Tag.UTCTIME, asn1_1.Tag.GENERALIZEDTIME],\n                            capture: 'certValidityNotBefore',\n                        }, {\n                            name: 'Certificate.TBSCertificate.validity.notAfter',\n                            class: asn1_1.Class.UNIVERSAL,\n                            tag: [asn1_1.Tag.UTCTIME, asn1_1.Tag.GENERALIZEDTIME],\n                            capture: 'certValidityNotAfter',\n                        }],\n                }, {\n                    // Name (subject) (RDNSequence)\n                    name: 'Certificate.TBSCertificate.subject',\n                    class: asn1_1.Class.UNIVERSAL,\n                    tag: asn1_1.Tag.SEQUENCE,\n                    capture: 'certSubject',\n                },\n                // SubjectPublicKeyInfo\n                pki_1.publicKeyValidator,\n                {\n                    // issuerUniqueID (optional)\n                    name: 'Certificate.TBSCertificate.issuerUniqueID',\n                    class: asn1_1.Class.CONTEXT_SPECIFIC,\n                    tag: asn1_1.Tag.BOOLEAN,\n                    optional: true,\n                    value: [{\n                            name: 'Certificate.TBSCertificate.issuerUniqueID.id',\n                            class: asn1_1.Class.UNIVERSAL,\n                            tag: asn1_1.Tag.BITSTRING,\n                            capture: 'certIssuerUniqueId',\n                        }],\n                }, {\n                    // subjectUniqueID (optional)\n                    name: 'Certificate.TBSCertificate.subjectUniqueID',\n                    class: asn1_1.Class.CONTEXT_SPECIFIC,\n                    tag: asn1_1.Tag.INTEGER,\n                    optional: true,\n                    value: [{\n                            name: 'Certificate.TBSCertificate.subjectUniqueID.id',\n                            class: asn1_1.Class.UNIVERSAL,\n                            tag: asn1_1.Tag.BITSTRING,\n                            capture: 'certSubjectUniqueId',\n                        }],\n                }, {\n                    // Extensions (optional)\n                    name: 'Certificate.TBSCertificate.extensions',\n                    class: asn1_1.Class.CONTEXT_SPECIFIC,\n                    tag: asn1_1.Tag.BITSTRING,\n                    capture: 'certExtensions',\n                    optional: true,\n                }],\n        }, {\n            // AlgorithmIdentifier (signature algorithm)\n            name: 'Certificate.signatureAlgorithm',\n            class: asn1_1.Class.UNIVERSAL,\n            tag: asn1_1.Tag.SEQUENCE,\n            value: [{\n                    // algorithm\n                    name: 'Certificate.signatureAlgorithm.algorithm',\n                    class: asn1_1.Class.UNIVERSAL,\n                    tag: asn1_1.Tag.OID,\n                    capture: 'certSignatureOID',\n                }, {\n                    name: 'Certificate.TBSCertificate.signature.parameters',\n                    class: asn1_1.Class.UNIVERSAL,\n                    tag: asn1_1.Tag.OCTETSTRING,\n                    optional: true,\n                    capture: 'certSignatureParams',\n                }],\n        }, {\n            name: 'Certificate.signatureValue',\n            class: asn1_1.Class.UNIVERSAL,\n            tag: asn1_1.Tag.BITSTRING,\n            capture: 'certSignature',\n        }],\n};\n/**\n * DistinguishedName for X.509v3 certificate.\n */\nclass DistinguishedName {\n    constructor() {\n        this.attributes = [];\n        this.uniqueId = null;\n    }\n    get commonName() {\n        return this.getFieldValue('commonName');\n    }\n    get organizationName() {\n        return this.getFieldValue('organizationName');\n    }\n    get organizationalUnitName() {\n        return this.getFieldValue('organizationalUnitName');\n    }\n    get countryName() {\n        return this.getFieldValue('countryName');\n    }\n    get localityName() {\n        return this.getFieldValue('localityName');\n    }\n    get serialName() {\n        return this.getFieldValue('serialName');\n    }\n    getHash() {\n        const hasher = crypto_1.createHash('sha1');\n        for (const attr of this.attributes) {\n            hasher.update(attr.oid);\n            hasher.update(attr.value);\n        }\n        return hasher.digest();\n    }\n    getField(key) {\n        for (const attr of this.attributes) {\n            if (key === attr.oid || key === attr.name || key === attr.shortName) {\n                return attr;\n            }\n        }\n        return null;\n    }\n    addField(attr) {\n        fillMissingFields([attr]);\n        this.attributes.push(attr);\n    }\n    setAttrs(attrs) {\n        // set new attributes, clear hash\n        fillMissingFields(attrs);\n        this.attributes = attrs;\n    }\n    toJSON() {\n        const obj = {};\n        for (const attr of this.attributes) {\n            const key = attr.shortName;\n            if (typeof key === 'string' && key !== '') {\n                obj[key] = attr.value;\n            }\n        }\n        obj.uniqueId = this.uniqueId;\n        obj.attributes = this.attributes;\n        return obj;\n    }\n    getFieldValue(key) {\n        const val = this.getField(key);\n        if (val != null) {\n            return val.value;\n        }\n        return '';\n    }\n}\nexports.DistinguishedName = DistinguishedName;\n/**\n * X.509v3 Certificate.\n */\nclass Certificate {\n    /**\n     * Parse one or more X.509 certificates from PEM formatted buffer.\n     * If there is no certificate, it will throw error.\n     * @param data PEM formatted buffer\n     */\n    static fromPEMs(data) {\n        const certs = [];\n        const pems = asn1_1.PEM.parse(data);\n        for (const pem of pems) {\n            if (pem.type !== 'CERTIFICATE' &&\n                pem.type !== 'X509 CERTIFICATE' &&\n                pem.type !== 'TRUSTED CERTIFICATE') {\n                throw new Error('Could not convert certificate from PEM: invalid type');\n            }\n            if (pem.procType.includes('ENCRYPTED')) {\n                throw new Error('Could not convert certificate from PEM: PEM is encrypted.');\n            }\n            const obj = asn1_1.ASN1.fromDER(pem.body);\n            certs.push(new Certificate(obj));\n        }\n        if (certs.length === 0) {\n            throw new Error('No Certificate');\n        }\n        return certs;\n    }\n    /**\n     * Parse an X.509 certificate from PEM formatted buffer.\n     * @param data PEM formatted buffer\n     */\n    static fromPEM(data) {\n        return Certificate.fromPEMs(data)[0];\n    }\n    /**\n     * Creates an X.509 certificate from an ASN.1 object\n     * @param obj an ASN.1 object\n     */\n    constructor(obj) {\n        // validate certificate and capture data\n        const captures = Object.create(null);\n        const err = obj.validate(x509CertificateValidator, captures);\n        if (err != null) {\n            throw new Error('Cannot read X.509 certificate: ' + err.message);\n        }\n        this.raw = obj.DER;\n        this.version = captures.certVersion == null ? 0 : (asn1_1.ASN1.parseIntegerNum(captures.certVersion.bytes) + 1);\n        this.serialNumber = asn1_1.ASN1.parseIntegerStr(captures.certSerialNumber.bytes);\n        this.signatureOID = asn1_1.ASN1.parseOID(captures.certSignatureOID.bytes);\n        this.signatureAlgorithm = common_1.getOIDName(this.signatureOID);\n        this.infoSignatureOID = asn1_1.ASN1.parseOID(captures.certinfoSignatureOID.bytes);\n        this.signature = asn1_1.ASN1.parseBitString(captures.certSignature.bytes).buf;\n        this.validFrom = asn1_1.ASN1.parseTime(captures.certValidityNotBefore.tag, captures.certValidityNotBefore.bytes);\n        this.validTo = asn1_1.ASN1.parseTime(captures.certValidityNotAfter.tag, captures.certValidityNotAfter.bytes);\n        this.issuer = new DistinguishedName();\n        this.issuer.setAttrs(RDNAttributesAsArray(captures.certIssuer));\n        if (captures.certIssuerUniqueId != null) {\n            this.issuer.uniqueId = asn1_1.ASN1.parseBitString(captures.certIssuerUniqueId.bytes);\n        }\n        this.subject = new DistinguishedName();\n        this.subject.setAttrs(RDNAttributesAsArray(captures.certSubject));\n        if (captures.certSubjectUniqueId != null) {\n            this.subject.uniqueId = asn1_1.ASN1.parseBitString(captures.certSubjectUniqueId.bytes);\n        }\n        this.extensions = [];\n        this.subjectKeyIdentifier = '';\n        this.authorityKeyIdentifier = '';\n        this.ocspServer = '';\n        this.issuingCertificateURL = '';\n        this.isCA = false;\n        this.maxPathLen = -1;\n        this.basicConstraintsValid = false;\n        this.keyUsage = 0;\n        this.dnsNames = [];\n        this.emailAddresses = [];\n        this.ipAddresses = [];\n        this.uris = [];\n        if (captures.certExtensions != null) {\n            this.extensions = certificateExtensionsFromAsn1(captures.certExtensions);\n            for (const ext of this.extensions) {\n                if (typeof ext.subjectKeyIdentifier === 'string') {\n                    this.subjectKeyIdentifier = ext.subjectKeyIdentifier;\n                }\n                if (typeof ext.authorityKeyIdentifier === 'string') {\n                    this.authorityKeyIdentifier = ext.authorityKeyIdentifier;\n                }\n                if (typeof ext.authorityInfoAccessOcsp === 'string') {\n                    this.ocspServer = ext.authorityInfoAccessOcsp;\n                }\n                if (typeof ext.authorityInfoAccessIssuers === 'string') {\n                    this.issuingCertificateURL = ext.authorityInfoAccessIssuers;\n                }\n                if (typeof ext.basicConstraintsValid === 'boolean') {\n                    this.isCA = ext.isCA;\n                    this.maxPathLen = ext.maxPathLen;\n                    this.basicConstraintsValid = ext.basicConstraintsValid;\n                }\n                if (typeof ext.keyUsage === 'number') {\n                    this.keyUsage = ext.keyUsage;\n                }\n                if (Array.isArray(ext.altNames)) {\n                    for (const item of ext.altNames) {\n                        if (item.dnsName != null) {\n                            this.dnsNames.push(item.dnsName);\n                        }\n                        if (item.email != null) {\n                            this.emailAddresses.push(item.email);\n                        }\n                        if (item.ip != null) {\n                            this.ipAddresses.push(item.ip);\n                        }\n                        if (item.uri != null) {\n                            this.uris.push(item.uri);\n                        }\n                    }\n                }\n            }\n        }\n        this.publicKey = new pki_1.PublicKey(captures.publicKeyInfo);\n        this.publicKeyRaw = this.publicKey.toDER();\n        this.tbsCertificate = captures.tbsCertificate;\n    }\n    /**\n     * Gets an extension by its name or oid.\n     * If extension exists and a key provided, it will return extension[key].\n     * ```js\n     * certificate.getExtension('keyUsage')\n     * certificate.getExtension('2.5.29.15')\n     * // => { oid: '2.5.29.15',\n     * //      critical: true,\n     * //      value: <Buffer 03 02 05 a0>,\n     * //      name: 'keyUsage',\n     * //      digitalSignature: true,\n     * //      nonRepudiation: false,\n     * //      keyEncipherment: true,\n     * //      dataEncipherment: false,\n     * //      keyAgreement: false,\n     * //      keyCertSign: false,\n     * //      cRLSign: false,\n     * //      encipherOnly: false,\n     * //      decipherOnly: false }\n     * certificate.getExtension('keyUsage', 'keyCertSign') // => false\n     * ```\n     * @param name extension name or OID\n     * @param key key in extension\n     */\n    getExtension(name, key = '') {\n        for (const ext of this.extensions) {\n            if (name === ext.oid || name === ext.name) {\n                return key === '' ? ext : ext[key];\n            }\n        }\n        return null;\n    }\n    /**\n     * Returns null if a subject certificate is valid, or error if invalid.\n     * Note that it does not check validity time, DNS name, ip or others.\n     * @param child subject's Certificate\n     */\n    checkSignature(child) {\n        // RFC 5280, 4.2.1.9:\n        // \"If the basic constraints extension is not present in a version 3\n        // certificate, or the extension is present but the cA boolean is not\n        // asserted, then the certified public key MUST NOT be used to verify\n        // certificate signatures.\"\n        // (not handler entrust broken SPKI, See http://www.entrust.net/knowledge-base/technote.cfm?tn=7869)\n        if (this.version === 3 && !this.basicConstraintsValid || (this.basicConstraintsValid && !this.isCA)) {\n            return new Error('The parent constraint violation error');\n        }\n        if (this.getExtension('keyUsage', 'keyCertSign') !== true) {\n            return new Error('The parent constraint violation error');\n        }\n        if (!child.isIssuer(this)) {\n            return new Error('The parent certificate did not issue the given child certificate');\n        }\n        const agl = getHashAgl(child.signatureOID);\n        if (agl === '') {\n            return new Error('Unknown child signature OID.');\n        }\n        const res = this.publicKey.verify(child.tbsCertificate.DER, child.signature, agl);\n        if (res === false) {\n            return new Error('Child signature not matched');\n        }\n        return null;\n    }\n    /**\n     * Returns true if this certificate's issuer matches the passed\n     * certificate's subject. Note that no signature check is performed.\n     * @param parent issuer's Certificate\n     */\n    isIssuer(parent) {\n        return this.issuer.getHash().equals(parent.subject.getHash());\n    }\n    /**\n     * Verifies the subjectKeyIdentifier extension value for this certificate\n     * against its public key.\n     */\n    verifySubjectKeyIdentifier() {\n        const ski = this.publicKey.getFingerprint('sha1', 'PublicKey');\n        return ski.toString('hex') === this.subjectKeyIdentifier;\n    }\n    /**\n     * Return a friendly JSON object for debuging.\n     */\n    toJSON() {\n        const obj = {};\n        for (const key of Object.keys(this)) {\n            obj[key] = toJSONify(this[key]);\n        }\n        delete obj.tbsCertificate;\n        return obj;\n    }\n    [util_1.inspect.custom](_depth, options) {\n        if (options.depth <= 2) {\n            options.depth = 10;\n        }\n        return `<${this.constructor.name} ${util_1.inspect(this.toJSON(), options)}>`;\n    }\n}\nexports.Certificate = Certificate;\nfunction certificateExtensionsFromAsn1(exts) {\n    const res = [];\n    for (const val of exts.mustCompound()) {\n        for (const ext of val.mustCompound()) {\n            res.push(certificateExtensionFromAsn1(ext));\n        }\n    }\n    return res;\n}\nfunction certificateExtensionFromAsn1(ext) {\n    // an extension has:\n    // [0] extnID      OBJECT IDENTIFIER\n    // [1] critical    BOOLEAN DEFAULT FALSE\n    // [2] extnValue   OCTET STRING\n    const e = {};\n    e.oid = asn1_1.ASN1.parseOID(ext.value[0].bytes);\n    e.critical = false;\n    if (ext.value[1].tag === asn1_1.Tag.BOOLEAN) {\n        e.critical = asn1_1.ASN1.parseBool(ext.value[1].bytes);\n        e.value = ext.value[2].bytes;\n    }\n    else {\n        e.value = ext.value[1].bytes;\n    }\n    // if the oid is known, get its name\n    e.name = common_1.getOIDName(e.oid);\n    switch (e.name) {\n        // handle key usage\n        case 'keyUsage':\n            decodeExtKeyUsage(e);\n            break;\n        case 'basicConstraints':\n            decodeExtBasicConstraints(e);\n            break;\n        case 'extKeyUsage':\n            decodeExtExtKeyUsage(e);\n            break;\n        case 'nsCertType':\n            decodeExtNsCertType(e);\n            break;\n        case 'subjectAltName':\n            decodeExtAltName(e);\n            break;\n        case 'issuerAltName':\n            decodeExtAltName(e);\n            break;\n        case 'subjectKeyIdentifier':\n            decodeExtSubjectKeyIdentifier(e);\n            break;\n        case 'authorityKeyIdentifier':\n            decodeExtAuthorityKeyIdentifier(e);\n            break;\n        case 'authorityInfoAccess':\n            decodeExtAuthorityInfoAccess(e);\n            break;\n    }\n    return e;\n}\nfunction decodeExtKeyUsage(e) {\n    // ev is a BITSTRING\n    const ev = asn1_1.ASN1.parseBitString(asn1_1.ASN1.fromDER(e.value).bytes);\n    let b2 = 0x00;\n    let b3 = 0x00;\n    e.keyUsage = 0;\n    for (let i = 0; i < 9; i++) {\n        if (ev.at(i) !== 0) {\n            e.keyUsage |= 1 << i;\n        }\n    }\n    if (ev.buf.length > 0) {\n        b2 = ev.buf[0];\n        b3 = ev.buf.length > 1 ? ev.buf[1] : 0;\n    }\n    // set flags\n    e.digitalSignature = (b2 & 0x80) === 0x80;\n    e.nonRepudiation = (b2 & 0x40) === 0x40;\n    e.keyEncipherment = (b2 & 0x20) === 0x20;\n    e.dataEncipherment = (b2 & 0x10) === 0x10;\n    e.keyAgreement = (b2 & 0x08) === 0x08;\n    e.keyCertSign = (b2 & 0x04) === 0x04;\n    e.cRLSign = (b2 & 0x02) === 0x02;\n    e.encipherOnly = (b2 & 0x01) === 0x01;\n    e.decipherOnly = (b3 & 0x80) === 0x80;\n}\nfunction decodeExtBasicConstraints(e) {\n    // handle basic constraints\n    // get value as SEQUENCE\n    const ev = asn1_1.ASN1.fromDER(e.value);\n    const vals = ev.mustCompound();\n    // get cA BOOLEAN flag (defaults to false)\n    if (vals.length > 0 && vals[0].tag === asn1_1.Tag.BOOLEAN) {\n        e.isCA = asn1_1.ASN1.parseBool(vals[0].bytes);\n    }\n    else {\n        e.isCA = false;\n    }\n    // get path length constraint\n    let value = null;\n    if (vals.length > 0 && vals[0].tag === asn1_1.Tag.INTEGER) {\n        value = vals[0].bytes;\n    }\n    else if (vals.length > 1) {\n        value = vals[1].bytes;\n    }\n    if (value !== null) {\n        e.maxPathLen = asn1_1.ASN1.parseInteger(value);\n    }\n    else {\n        e.maxPathLen = -1;\n    }\n    e.basicConstraintsValid = true;\n}\nfunction decodeExtExtKeyUsage(e) {\n    // handle extKeyUsage\n    // value is a SEQUENCE of OIDs\n    const ev = asn1_1.ASN1.fromDER(e.value);\n    const vals = ev.mustCompound();\n    for (const val of vals) {\n        e[common_1.getOIDName(asn1_1.ASN1.parseOID(val.bytes))] = true;\n    }\n}\nfunction decodeExtNsCertType(e) {\n    // ev is a BITSTRING\n    const ev = asn1_1.ASN1.parseBitString(asn1_1.ASN1.fromDER(e.value).bytes);\n    let b2 = 0x00;\n    if (ev.buf.length > 0) {\n        b2 = ev.buf[0];\n    }\n    // set flags\n    e.client = (b2 & 0x80) === 0x80;\n    e.server = (b2 & 0x40) === 0x40;\n    e.email = (b2 & 0x20) === 0x20;\n    e.objsign = (b2 & 0x10) === 0x10;\n    e.reserved = (b2 & 0x08) === 0x08;\n    e.sslCA = (b2 & 0x04) === 0x04;\n    e.emailCA = (b2 & 0x02) === 0x02;\n    e.objCA = (b2 & 0x01) === 0x01;\n}\nfunction decodeExtAltName(e) {\n    // handle subjectAltName/issuerAltName\n    e.altNames = [];\n    // ev is a SYNTAX SEQUENCE\n    const ev = asn1_1.ASN1.fromDER(e.value);\n    const vals = ev.mustCompound();\n    for (const gn of vals) {\n        // get GeneralName\n        const item = {\n            tag: gn.tag,\n            value: gn.bytes,\n        };\n        e.altNames.push(item);\n        switch (gn.tag) {\n            // rfc822Name, emailAddresses\n            case 1:\n                item.email = gn.bytes.toString();\n                break;\n            // dNSName\n            case 2:\n                item.dnsName = gn.bytes.toString();\n                break;\n            // uniformResourceIdentifier (URI)\n            case 6:\n                item.uri = gn.bytes.toString();\n                break;\n            // IPAddress\n            case 7:\n                // convert to IPv4/IPv6 string representation\n                item.ip = common_1.bytesToIP(gn.bytes);\n                break;\n            // registeredID\n            case 8:\n                item.oid = asn1_1.ASN1.parseOID(gn.bytes);\n                break;\n            default:\n            // unsupported\n        }\n    }\n}\nconst subjectKeyIdentifierValidator = {\n    name: 'subjectKeyIdentifier',\n    class: asn1_1.Class.UNIVERSAL,\n    tag: asn1_1.Tag.OCTETSTRING,\n    capture: 'subjectKeyIdentifier',\n};\nfunction decodeExtSubjectKeyIdentifier(e) {\n    const captures = asn1_1.ASN1.parseDERWithTemplate(e.value, subjectKeyIdentifierValidator);\n    e.subjectKeyIdentifier = captures.subjectKeyIdentifier.bytes.toString('hex');\n}\nconst authorityKeyIdentifierValidator = {\n    name: 'authorityKeyIdentifier',\n    class: asn1_1.Class.UNIVERSAL,\n    tag: asn1_1.Tag.SEQUENCE,\n    value: [{\n            name: 'authorityKeyIdentifier.value',\n            class: asn1_1.Class.CONTEXT_SPECIFIC,\n            tag: asn1_1.Tag.NONE,\n            capture: 'authorityKeyIdentifier',\n        }],\n};\nfunction decodeExtAuthorityKeyIdentifier(e) {\n    const captures = asn1_1.ASN1.parseDERWithTemplate(e.value, authorityKeyIdentifierValidator);\n    e.authorityKeyIdentifier = captures.authorityKeyIdentifier.bytes.toString('hex');\n}\nconst authorityInfoAccessValidator = {\n    name: 'authorityInfoAccess',\n    class: asn1_1.Class.UNIVERSAL,\n    tag: asn1_1.Tag.SEQUENCE,\n    value: [{\n            name: 'authorityInfoAccess.authorityInfoAccessOcsp',\n            class: asn1_1.Class.UNIVERSAL,\n            tag: asn1_1.Tag.SEQUENCE,\n            optional: true,\n            value: [{\n                    name: 'authorityInfoAccess.authorityInfoAccessOcsp.oid',\n                    class: asn1_1.Class.UNIVERSAL,\n                    tag: asn1_1.Tag.OID,\n                }, {\n                    name: 'authorityInfoAccess.authorityInfoAccessOcsp.value',\n                    class: asn1_1.Class.CONTEXT_SPECIFIC,\n                    tag: asn1_1.Tag.OID,\n                    capture: 'authorityInfoAccessOcsp',\n                }],\n        }, {\n            name: 'authorityInfoAccess.authorityInfoAccessIssuers',\n            class: asn1_1.Class.UNIVERSAL,\n            tag: asn1_1.Tag.SEQUENCE,\n            optional: true,\n            value: [{\n                    name: 'authorityInfoAccess.authorityInfoAccessIssuers.oid',\n                    class: asn1_1.Class.UNIVERSAL,\n                    tag: asn1_1.Tag.OID,\n                }, {\n                    name: 'authorityInfoAccess.authorityInfoAccessIssuers.value',\n                    class: asn1_1.Class.CONTEXT_SPECIFIC,\n                    tag: asn1_1.Tag.OID,\n                    capture: 'authorityInfoAccessIssuers',\n                }],\n        }],\n};\nfunction decodeExtAuthorityInfoAccess(e) {\n    const captures = asn1_1.ASN1.parseDERWithTemplate(e.value, authorityInfoAccessValidator);\n    if (captures.authorityInfoAccessOcsp != null) {\n        e.authorityInfoAccessOcsp = captures.authorityInfoAccessOcsp.bytes.toString();\n    }\n    if (captures.authorityInfoAccessIssuers != null) {\n        e.authorityInfoAccessIssuers = captures.authorityInfoAccessIssuers.bytes.toString();\n    }\n}\n// Fills in missing fields in attributes.\nfunction fillMissingFields(attrs) {\n    for (const attr of attrs) {\n        // populate missing name\n        if (attr.name == null || attr.name === '') {\n            if (attr.oid != null) {\n                attr.name = common_1.getOIDName(attr.oid);\n            }\n            if (attr.name === '' && attr.shortName != null) {\n                attr.name = common_1.getOIDName(shortNames[attr.shortName]);\n            }\n        }\n        // populate missing type (OID)\n        if (attr.oid == null || attr.oid === '') {\n            if (attr.name !== '') {\n                attr.oid = common_1.getOID(attr.name);\n            }\n            else {\n                throw new Error('Attribute oid not specified.');\n            }\n        }\n        // populate missing shortname\n        if (attr.shortName == null || attr.shortName === '') {\n            attr.shortName = shortNames[attr.name] == null ? '' : shortNames[attr.name];\n        }\n        if (attr.value == null) {\n            throw new Error('Attribute value not specified.');\n        }\n    }\n}\n// Only support RSA and ECDSA\nfunction getHashAgl(oid) {\n    switch (common_1.getOIDName(oid)) {\n        case 'sha1WithRsaEncryption':\n            return 'sha1';\n        case 'md5WithRsaEncryption':\n            return 'md5';\n        case 'sha256WithRsaEncryption':\n            return 'sha256';\n        case 'sha384WithRsaEncryption':\n            return 'sha384';\n        case 'sha512WithRsaEncryption':\n            return 'sha512';\n        case 'RSASSA-PSS':\n            return 'sha256';\n        case 'ecdsaWithSha1':\n            return 'sha1';\n        case 'ecdsaWithSha256':\n            return 'sha256';\n        case 'ecdsaWithSha384':\n            return 'sha384';\n        case 'ecdsaWithSha512':\n            return 'sha512';\n        case 'dsaWithSha1':\n            return 'sha1';\n        case 'dsaWithSha256':\n            return 'sha256';\n        default:\n            return '';\n    }\n}\n// Converts an RDNSequence of ASN.1 DER-encoded RelativeDistinguishedName\n// sets into an array with objects that have type and value properties.\nfunction RDNAttributesAsArray(rdn) {\n    const rval = [];\n    // each value in 'rdn' in is a SET of RelativeDistinguishedName\n    // var set, attr, obj\n    for (const set of rdn.mustCompound()) {\n        // each value in the SET is an AttributeTypeAndValue sequence\n        // containing first a type (an OID) and second a value (defined by the OID)\n        for (const attr of set.mustCompound()) {\n            const values = attr.mustCompound();\n            const obj = {};\n            obj.oid = asn1_1.ASN1.parseOID(values[0].bytes);\n            obj.value = values[1].value;\n            obj.valueTag = values[1].tag;\n            obj.name = common_1.getOIDName(obj.oid);\n            obj.shortName = getShortName(obj.name);\n            rval.push(obj);\n        }\n    }\n    return rval;\n}\nfunction toJSONify(val) {\n    if (val != null && !(val instanceof Buffer) && typeof val.toJSON === 'function') {\n        return val.toJSON();\n    }\n    return val;\n}\n//# sourceMappingURL=x509.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LEB128 = exports.SignedLEB128 = exports.UnsignedLEB128 = void 0;\nvar Mask;\n(function (Mask) {\n    Mask[Mask[\"LOWER_7\"] = 127] = \"LOWER_7\";\n    Mask[Mask[\"UPPER_1\"] = 128] = \"UPPER_1\";\n})(Mask || (Mask = {}));\n/**\n * Check if a given value is a safe integer\n * @param a Value to check\n */\nconst int = (a) => Number.isSafeInteger(a);\n/**\n * Class to work with unsigned LEB128 integers.\n * See [this Wikipedia article](https://en.wikipedia.org/wiki/LEB128#Encoding_format).\n */\nclass UnsignedLEB128 {\n    /**\n     * Decode a Uint8Array into a number.\n     * @param buf Uint8Array containing the representation in LEB128\n     * @param offset Offset to read from\n     */\n    static decode(buf, offset = 0) {\n        const mp = this.$scanForNullBytes(buf, offset);\n        let result = 0, shift = 0;\n        for (let d = 0; d <= mp - offset; d++) {\n            const a = buf[offset + d] & Mask.LOWER_7; /* masking, we only care about lower 7 bits */\n            result |= a << shift; /* shift this value left and add it */\n            shift += (8 - 1);\n        }\n        return result;\n    }\n    /**\n     * Create a LEB128 Uint8Array from a number\n     * @param number Number to convert from\n     */\n    static encode(number) {\n        this.check(number);\n        if (number < 0)\n            throw new Error(`An unsigned number must NOT be negative, ${number} is!`);\n        let out = [], a = number;\n        do {\n            let byte = a & Mask.LOWER_7;\n            // we only care about lower 7 bits\n            a >>= (8 - 1);\n            // shift\n            if (a)\n                byte = byte | Mask.UPPER_1; /* if remaining is truthy (!= 0), set highest bit */\n            out.push(byte);\n        } while (a);\n        return Uint8Array.from(out);\n    }\n    static check(n) {\n        if (!int(n))\n            throw new Error(`${n} is not a safe integer!`);\n    }\n    /**\n     * Return the offset that the byte at which ends the stream\n     * @param buf Uint8Array to scan\n     * @param offset Offset to start scanning\n     * @throws If no byte starting with 0 as the highest bit set\n     */\n    static $scanForNullBytes(buf, offset = 0) {\n        let count = offset, tmp = 0;\n        do {\n            if (count >= buf.byteLength)\n                throw new Error('This is not a LEB128-encoded Uint8Array, no ending found!');\n            tmp = buf.slice(count, count + 1)[0];\n            count++;\n        } while (tmp & Mask.UPPER_1);\n        return count - 1;\n    }\n    /**\n     * Return the relative index that the byte at which ends the stream.\n     *\n     * @example\n     * ```js\n     * getLength(Uint8Array.from([0b1000000, 0b00000000]), 1) // 0\n     * getLength(Uint8Array.from([0b1000000, 0b00000000]), 0) // 1\n     * ```\n     * @param buf Uint8Array to scan\n     * @param offset Offset to start scanning\n     */\n    static getLength(buf, offset = 0) {\n        return this.$scanForNullBytes(buf, offset) - offset;\n    }\n}\nexports.UnsignedLEB128 = UnsignedLEB128;\nclass SignedLEB128 {\n    static $ceil7mul(n) {\n        let a = n;\n        while (a % 7)\n            a++;\n        return a;\n    }\n    static check(n) {\n        if (!int(n))\n            throw new Error(`${n} is not a safe integer!`);\n    }\n    /**\n     * Create a LEB128 Uint8Array from a number\n     * @param number Number to convert from. Must be less than 0.\n     */\n    static encode(number) {\n        this.check(number);\n        if (number >= 0)\n            throw new Error(`A signed number must be negative, ${number} isn't!`);\n        const bitCount = Math.ceil(Math.log2(-number));\n        return UnsignedLEB128.encode((1 << this.$ceil7mul(bitCount)) + number);\n    }\n    /**\n     * Decode a Uint8Array into a (signed) number.\n     * @param buf Uint8Array containing the representation in LEB128\n     * @param offset Offset to read from\n     */\n    static decode(buf, offset = 0) {\n        const r = UnsignedLEB128.decode(buf, offset);\n        const bitCount = Math.ceil(Math.log2(r));\n        const mask = (1 << bitCount);\n        return -(mask - r);\n    }\n}\nexports.SignedLEB128 = SignedLEB128;\nclass LEB128 {\n}\nexports.LEB128 = LEB128;\n/**\n * Create a LEB128 Uint8Array from a number\n * @param number Number to convert from.\n */\nLEB128.encode = (n) => (n >= 0 ? UnsignedLEB128 : SignedLEB128).encode(n);\n/**\n * Decode a Uint8Array into a (signed) number.\n * @param buf Uint8Array containing the representation in LEB128\n * @param offset Offset to read from\n * @param s Whether the output number is negative\n */\nLEB128.decode = (buf, offset = 0, s = false) => (s ? SignedLEB128 : UnsignedLEB128).decode(buf, offset);\n","export var AsnTypeTypes;\n(function (AsnTypeTypes) {\n    AsnTypeTypes[AsnTypeTypes[\"Sequence\"] = 0] = \"Sequence\";\n    AsnTypeTypes[AsnTypeTypes[\"Set\"] = 1] = \"Set\";\n    AsnTypeTypes[AsnTypeTypes[\"Choice\"] = 2] = \"Choice\";\n})(AsnTypeTypes || (AsnTypeTypes = {}));\nexport var AsnPropTypes;\n(function (AsnPropTypes) {\n    AsnPropTypes[AsnPropTypes[\"Any\"] = 1] = \"Any\";\n    AsnPropTypes[AsnPropTypes[\"Boolean\"] = 2] = \"Boolean\";\n    AsnPropTypes[AsnPropTypes[\"OctetString\"] = 3] = \"OctetString\";\n    AsnPropTypes[AsnPropTypes[\"BitString\"] = 4] = \"BitString\";\n    AsnPropTypes[AsnPropTypes[\"Integer\"] = 5] = \"Integer\";\n    AsnPropTypes[AsnPropTypes[\"Enumerated\"] = 6] = \"Enumerated\";\n    AsnPropTypes[AsnPropTypes[\"ObjectIdentifier\"] = 7] = \"ObjectIdentifier\";\n    AsnPropTypes[AsnPropTypes[\"Utf8String\"] = 8] = \"Utf8String\";\n    AsnPropTypes[AsnPropTypes[\"BmpString\"] = 9] = \"BmpString\";\n    AsnPropTypes[AsnPropTypes[\"UniversalString\"] = 10] = \"UniversalString\";\n    AsnPropTypes[AsnPropTypes[\"NumericString\"] = 11] = \"NumericString\";\n    AsnPropTypes[AsnPropTypes[\"PrintableString\"] = 12] = \"PrintableString\";\n    AsnPropTypes[AsnPropTypes[\"TeletexString\"] = 13] = \"TeletexString\";\n    AsnPropTypes[AsnPropTypes[\"VideotexString\"] = 14] = \"VideotexString\";\n    AsnPropTypes[AsnPropTypes[\"IA5String\"] = 15] = \"IA5String\";\n    AsnPropTypes[AsnPropTypes[\"GraphicString\"] = 16] = \"GraphicString\";\n    AsnPropTypes[AsnPropTypes[\"VisibleString\"] = 17] = \"VisibleString\";\n    AsnPropTypes[AsnPropTypes[\"GeneralString\"] = 18] = \"GeneralString\";\n    AsnPropTypes[AsnPropTypes[\"CharacterString\"] = 19] = \"CharacterString\";\n    AsnPropTypes[AsnPropTypes[\"UTCTime\"] = 20] = \"UTCTime\";\n    AsnPropTypes[AsnPropTypes[\"GeneralizedTime\"] = 21] = \"GeneralizedTime\";\n    AsnPropTypes[AsnPropTypes[\"DATE\"] = 22] = \"DATE\";\n    AsnPropTypes[AsnPropTypes[\"TimeOfDay\"] = 23] = \"TimeOfDay\";\n    AsnPropTypes[AsnPropTypes[\"DateTime\"] = 24] = \"DateTime\";\n    AsnPropTypes[AsnPropTypes[\"Duration\"] = 25] = \"Duration\";\n    AsnPropTypes[AsnPropTypes[\"TIME\"] = 26] = \"TIME\";\n    AsnPropTypes[AsnPropTypes[\"Null\"] = 27] = \"Null\";\n})(AsnPropTypes || (AsnPropTypes = {}));\n","import * as asn1js from \"asn1js\";\nimport { BufferSourceConverter } from \"pvtsutils\";\nexport class BitString {\n    constructor(params, unusedBits = 0) {\n        this.unusedBits = 0;\n        this.value = new ArrayBuffer(0);\n        if (params) {\n            if (typeof params === \"number\") {\n                this.fromNumber(params);\n            }\n            else if (BufferSourceConverter.isBufferSource(params)) {\n                this.unusedBits = unusedBits;\n                this.value = BufferSourceConverter.toArrayBuffer(params);\n            }\n            else {\n                throw TypeError(\"Unsupported type of 'params' argument for BitString\");\n            }\n        }\n    }\n    fromASN(asn) {\n        if (!(asn instanceof asn1js.BitString)) {\n            throw new TypeError(\"Argument 'asn' is not instance of ASN.1 BitString\");\n        }\n        this.unusedBits = asn.valueBlock.unusedBits;\n        this.value = asn.valueBlock.valueHex;\n        return this;\n    }\n    toASN() {\n        return new asn1js.BitString({ unusedBits: this.unusedBits, valueHex: this.value });\n    }\n    toSchema(name) {\n        return new asn1js.BitString({ name });\n    }\n    toNumber() {\n        let res = \"\";\n        const uintArray = new Uint8Array(this.value);\n        for (const octet of uintArray) {\n            res += octet.toString(2).padStart(8, \"0\");\n        }\n        res = res.split(\"\").reverse().join(\"\");\n        if (this.unusedBits) {\n            res = res.slice(this.unusedBits).padStart(this.unusedBits, \"0\");\n        }\n        return parseInt(res, 2);\n    }\n    fromNumber(value) {\n        let bits = value.toString(2);\n        const octetSize = (bits.length + 7) >> 3;\n        this.unusedBits = (octetSize << 3) - bits.length;\n        const octets = new Uint8Array(octetSize);\n        bits = bits.padStart(octetSize << 3, \"0\").split(\"\").reverse().join(\"\");\n        let index = 0;\n        while (index < octetSize) {\n            octets[index] = parseInt(bits.slice(index << 3, (index << 3) + 8), 2);\n            index++;\n        }\n        this.value = octets.buffer;\n    }\n}\n","import * as asn1js from \"asn1js\";\nimport { BufferSourceConverter } from \"pvtsutils\";\nexport class OctetString {\n    constructor(param) {\n        if (typeof param === \"number\") {\n            this.buffer = new ArrayBuffer(param);\n        }\n        else {\n            if (BufferSourceConverter.isBufferSource(param)) {\n                this.buffer = BufferSourceConverter.toArrayBuffer(param);\n            }\n            else if (Array.isArray(param)) {\n                this.buffer = new Uint8Array(param);\n            }\n            else {\n                this.buffer = new ArrayBuffer(0);\n            }\n        }\n    }\n    get byteLength() {\n        return this.buffer.byteLength;\n    }\n    get byteOffset() {\n        return 0;\n    }\n    fromASN(asn) {\n        if (!(asn instanceof asn1js.OctetString)) {\n            throw new TypeError(\"Argument 'asn' is not instance of ASN.1 OctetString\");\n        }\n        this.buffer = asn.valueBlock.valueHex;\n        return this;\n    }\n    toASN() {\n        return new asn1js.OctetString({ valueHex: this.buffer });\n    }\n    toSchema(name) {\n        return new asn1js.OctetString({ name });\n    }\n}\n","import * as asn1js from \"asn1js\";\nimport { AsnPropTypes } from \"./enums\";\nimport { OctetString } from \"./types/index\";\nexport const AsnAnyConverter = {\n    fromASN: (value) => value instanceof asn1js.Null ? null : value.valueBeforeDecodeView,\n    toASN: (value) => {\n        if (value === null) {\n            return new asn1js.Null();\n        }\n        const schema = asn1js.fromBER(value);\n        if (schema.result.error) {\n            throw new Error(schema.result.error);\n        }\n        return schema.result;\n    },\n};\nexport const AsnIntegerConverter = {\n    fromASN: (value) => value.valueBlock.valueHexView.byteLength >= 4\n        ? value.valueBlock.toString()\n        : value.valueBlock.valueDec,\n    toASN: (value) => new asn1js.Integer({ value: +value }),\n};\nexport const AsnEnumeratedConverter = {\n    fromASN: (value) => value.valueBlock.valueDec,\n    toASN: (value) => new asn1js.Enumerated({ value }),\n};\nexport const AsnIntegerArrayBufferConverter = {\n    fromASN: (value) => value.valueBlock.valueHexView,\n    toASN: (value) => new asn1js.Integer({ valueHex: value }),\n};\nexport const AsnIntegerBigIntConverter = {\n    fromASN: (value) => value.toBigInt(),\n    toASN: (value) => asn1js.Integer.fromBigInt(value),\n};\nexport const AsnBitStringConverter = {\n    fromASN: (value) => value.valueBlock.valueHexView,\n    toASN: (value) => new asn1js.BitString({ valueHex: value }),\n};\nexport const AsnObjectIdentifierConverter = {\n    fromASN: (value) => value.valueBlock.toString(),\n    toASN: (value) => new asn1js.ObjectIdentifier({ value }),\n};\nexport const AsnBooleanConverter = {\n    fromASN: (value) => value.valueBlock.value,\n    toASN: (value) => new asn1js.Boolean({ value }),\n};\nexport const AsnOctetStringConverter = {\n    fromASN: (value) => value.valueBlock.valueHexView,\n    toASN: (value) => new asn1js.OctetString({ valueHex: value }),\n};\nexport const AsnConstructedOctetStringConverter = {\n    fromASN: (value) => new OctetString(value.getValue()),\n    toASN: (value) => value.toASN(),\n};\nfunction createStringConverter(Asn1Type) {\n    return {\n        fromASN: (value) => value.valueBlock.value,\n        toASN: (value) => new Asn1Type({ value }),\n    };\n}\nexport const AsnUtf8StringConverter = createStringConverter(asn1js.Utf8String);\nexport const AsnBmpStringConverter = createStringConverter(asn1js.BmpString);\nexport const AsnUniversalStringConverter = createStringConverter(asn1js.UniversalString);\nexport const AsnNumericStringConverter = createStringConverter(asn1js.NumericString);\nexport const AsnPrintableStringConverter = createStringConverter(asn1js.PrintableString);\nexport const AsnTeletexStringConverter = createStringConverter(asn1js.TeletexString);\nexport const AsnVideotexStringConverter = createStringConverter(asn1js.VideotexString);\nexport const AsnIA5StringConverter = createStringConverter(asn1js.IA5String);\nexport const AsnGraphicStringConverter = createStringConverter(asn1js.GraphicString);\nexport const AsnVisibleStringConverter = createStringConverter(asn1js.VisibleString);\nexport const AsnGeneralStringConverter = createStringConverter(asn1js.GeneralString);\nexport const AsnCharacterStringConverter = createStringConverter(asn1js.CharacterString);\nexport const AsnUTCTimeConverter = {\n    fromASN: (value) => value.toDate(),\n    toASN: (value) => new asn1js.UTCTime({ valueDate: value }),\n};\nexport const AsnGeneralizedTimeConverter = {\n    fromASN: (value) => value.toDate(),\n    toASN: (value) => new asn1js.GeneralizedTime({ valueDate: value }),\n};\nexport const AsnNullConverter = {\n    fromASN: () => null,\n    toASN: () => {\n        return new asn1js.Null();\n    },\n};\nexport function defaultConverter(type) {\n    switch (type) {\n        case AsnPropTypes.Any:\n            return AsnAnyConverter;\n        case AsnPropTypes.BitString:\n            return AsnBitStringConverter;\n        case AsnPropTypes.BmpString:\n            return AsnBmpStringConverter;\n        case AsnPropTypes.Boolean:\n            return AsnBooleanConverter;\n        case AsnPropTypes.CharacterString:\n            return AsnCharacterStringConverter;\n        case AsnPropTypes.Enumerated:\n            return AsnEnumeratedConverter;\n        case AsnPropTypes.GeneralString:\n            return AsnGeneralStringConverter;\n        case AsnPropTypes.GeneralizedTime:\n            return AsnGeneralizedTimeConverter;\n        case AsnPropTypes.GraphicString:\n            return AsnGraphicStringConverter;\n        case AsnPropTypes.IA5String:\n            return AsnIA5StringConverter;\n        case AsnPropTypes.Integer:\n            return AsnIntegerConverter;\n        case AsnPropTypes.Null:\n            return AsnNullConverter;\n        case AsnPropTypes.NumericString:\n            return AsnNumericStringConverter;\n        case AsnPropTypes.ObjectIdentifier:\n            return AsnObjectIdentifierConverter;\n        case AsnPropTypes.OctetString:\n            return AsnOctetStringConverter;\n        case AsnPropTypes.PrintableString:\n            return AsnPrintableStringConverter;\n        case AsnPropTypes.TeletexString:\n            return AsnTeletexStringConverter;\n        case AsnPropTypes.UTCTime:\n            return AsnUTCTimeConverter;\n        case AsnPropTypes.UniversalString:\n            return AsnUniversalStringConverter;\n        case AsnPropTypes.Utf8String:\n            return AsnUtf8StringConverter;\n        case AsnPropTypes.VideotexString:\n            return AsnVideotexStringConverter;\n        case AsnPropTypes.VisibleString:\n            return AsnVisibleStringConverter;\n        default:\n            return null;\n    }\n}\n","export function isConvertible(target) {\n    if (typeof target === \"function\" && target.prototype) {\n        if (target.prototype.toASN && target.prototype.fromASN) {\n            return true;\n        }\n        else {\n            return isConvertible(target.prototype);\n        }\n    }\n    else {\n        return !!(target && typeof target === \"object\" && \"toASN\" in target && \"fromASN\" in target);\n    }\n}\nexport function isTypeOfArray(target) {\n    var _a;\n    if (target) {\n        const proto = Object.getPrototypeOf(target);\n        if (((_a = proto === null || proto === void 0 ? void 0 : proto.prototype) === null || _a === void 0 ? void 0 : _a.constructor) === Array) {\n            return true;\n        }\n        return isTypeOfArray(proto);\n    }\n    return false;\n}\nexport function isArrayEqual(bytes1, bytes2) {\n    if (!(bytes1 && bytes2)) {\n        return false;\n    }\n    if (bytes1.byteLength !== bytes2.byteLength) {\n        return false;\n    }\n    const b1 = new Uint8Array(bytes1);\n    const b2 = new Uint8Array(bytes2);\n    for (let i = 0; i < bytes1.byteLength; i++) {\n        if (b1[i] !== b2[i]) {\n            return false;\n        }\n    }\n    return true;\n}\n","import { AsnSchemaStorage } from \"./schema\";\nexport const schemaStorage = new AsnSchemaStorage();\n","import * as asn1js from \"asn1js\";\nimport { AsnPropTypes, AsnTypeTypes } from \"./enums\";\nimport { isConvertible } from \"./helper\";\nexport class AsnSchemaStorage {\n    constructor() {\n        this.items = new WeakMap();\n    }\n    has(target) {\n        return this.items.has(target);\n    }\n    get(target, checkSchema = false) {\n        const schema = this.items.get(target);\n        if (!schema) {\n            throw new Error(`Cannot get schema for '${target.prototype.constructor.name}' target`);\n        }\n        if (checkSchema && !schema.schema) {\n            throw new Error(`Schema '${target.prototype.constructor.name}' doesn't contain ASN.1 schema. Call 'AsnSchemaStorage.cache'.`);\n        }\n        return schema;\n    }\n    cache(target) {\n        const schema = this.get(target);\n        if (!schema.schema) {\n            schema.schema = this.create(target, true);\n        }\n    }\n    createDefault(target) {\n        const schema = {\n            type: AsnTypeTypes.Sequence,\n            items: {},\n        };\n        const parentSchema = this.findParentSchema(target);\n        if (parentSchema) {\n            Object.assign(schema, parentSchema);\n            schema.items = Object.assign({}, schema.items, parentSchema.items);\n        }\n        return schema;\n    }\n    create(target, useNames) {\n        const schema = this.items.get(target) || this.createDefault(target);\n        const asn1Value = [];\n        for (const key in schema.items) {\n            const item = schema.items[key];\n            const name = useNames ? key : \"\";\n            let asn1Item;\n            if (typeof (item.type) === \"number\") {\n                const Asn1TypeName = AsnPropTypes[item.type];\n                const Asn1Type = asn1js[Asn1TypeName];\n                if (!Asn1Type) {\n                    throw new Error(`Cannot get ASN1 class by name '${Asn1TypeName}'`);\n                }\n                asn1Item = new Asn1Type({ name });\n            }\n            else if (isConvertible(item.type)) {\n                const instance = new item.type();\n                asn1Item = instance.toSchema(name);\n            }\n            else if (item.optional) {\n                const itemSchema = this.get(item.type);\n                if (itemSchema.type === AsnTypeTypes.Choice) {\n                    asn1Item = new asn1js.Any({ name });\n                }\n                else {\n                    asn1Item = this.create(item.type, false);\n                    asn1Item.name = name;\n                }\n            }\n            else {\n                asn1Item = new asn1js.Any({ name });\n            }\n            const optional = !!item.optional || item.defaultValue !== undefined;\n            if (item.repeated) {\n                asn1Item.name = \"\";\n                const Container = item.repeated === \"set\"\n                    ? asn1js.Set\n                    : asn1js.Sequence;\n                asn1Item = new Container({\n                    name: \"\",\n                    value: [\n                        new asn1js.Repeated({\n                            name,\n                            value: asn1Item,\n                        }),\n                    ],\n                });\n            }\n            if (item.context !== null && item.context !== undefined) {\n                if (item.implicit) {\n                    if (typeof item.type === \"number\" || isConvertible(item.type)) {\n                        const Container = item.repeated\n                            ? asn1js.Constructed\n                            : asn1js.Primitive;\n                        asn1Value.push(new Container({\n                            name,\n                            optional,\n                            idBlock: {\n                                tagClass: 3,\n                                tagNumber: item.context,\n                            },\n                        }));\n                    }\n                    else {\n                        this.cache(item.type);\n                        const isRepeated = !!item.repeated;\n                        let value = !isRepeated\n                            ? this.get(item.type, true).schema\n                            : asn1Item;\n                        value = \"valueBlock\" in value ? value.valueBlock.value : value.value;\n                        asn1Value.push(new asn1js.Constructed({\n                            name: !isRepeated ? name : \"\",\n                            optional,\n                            idBlock: {\n                                tagClass: 3,\n                                tagNumber: item.context,\n                            },\n                            value: value,\n                        }));\n                    }\n                }\n                else {\n                    asn1Value.push(new asn1js.Constructed({\n                        optional,\n                        idBlock: {\n                            tagClass: 3,\n                            tagNumber: item.context,\n                        },\n                        value: [asn1Item],\n                    }));\n                }\n            }\n            else {\n                asn1Item.optional = optional;\n                asn1Value.push(asn1Item);\n            }\n        }\n        switch (schema.type) {\n            case AsnTypeTypes.Sequence:\n                return new asn1js.Sequence({ value: asn1Value, name: \"\" });\n            case AsnTypeTypes.Set:\n                return new asn1js.Set({ value: asn1Value, name: \"\" });\n            case AsnTypeTypes.Choice:\n                return new asn1js.Choice({ value: asn1Value, name: \"\" });\n            default:\n                throw new Error(`Unsupported ASN1 type in use`);\n        }\n    }\n    set(target, schema) {\n        this.items.set(target, schema);\n        return this;\n    }\n    findParentSchema(target) {\n        const parent = Object.getPrototypeOf(target);\n        if (parent) {\n            const schema = this.items.get(parent);\n            return schema || this.findParentSchema(parent);\n        }\n        return null;\n    }\n}\n","import * as converters from \"./converters\";\nimport { AsnTypeTypes } from \"./enums\";\nimport { schemaStorage } from \"./storage\";\nexport const AsnType = (options) => (target) => {\n    let schema;\n    if (!schemaStorage.has(target)) {\n        schema = schemaStorage.createDefault(target);\n        schemaStorage.set(target, schema);\n    }\n    else {\n        schema = schemaStorage.get(target);\n    }\n    Object.assign(schema, options);\n};\nexport const AsnChoiceType = () => AsnType({ type: AsnTypeTypes.Choice });\nexport const AsnSetType = (options) => AsnType({ type: AsnTypeTypes.Set, ...options });\nexport const AsnSequenceType = (options) => AsnType({ type: AsnTypeTypes.Sequence, ...options });\nexport const AsnProp = (options) => (target, propertyKey) => {\n    let schema;\n    if (!schemaStorage.has(target.constructor)) {\n        schema = schemaStorage.createDefault(target.constructor);\n        schemaStorage.set(target.constructor, schema);\n    }\n    else {\n        schema = schemaStorage.get(target.constructor);\n    }\n    const copyOptions = Object.assign({}, options);\n    if (typeof copyOptions.type === \"number\" && !copyOptions.converter) {\n        const defaultConverter = converters.defaultConverter(options.type);\n        if (!defaultConverter) {\n            throw new Error(`Cannot get default converter for property '${propertyKey}' of ${target.constructor.name}`);\n        }\n        copyOptions.converter = defaultConverter;\n    }\n    schema.items[propertyKey] = copyOptions;\n};\n","export class AsnSchemaValidationError extends Error {\n    constructor() {\n        super(...arguments);\n        this.schemas = [];\n    }\n}\n","import * as asn1js from \"asn1js\";\nimport { AsnPropTypes, AsnTypeTypes } from \"./enums\";\nimport * as converters from \"./converters\";\nimport { AsnSchemaValidationError } from \"./errors\";\nimport { isConvertible, isTypeOfArray } from \"./helper\";\nimport { schemaStorage } from \"./storage\";\nexport class AsnParser {\n    static parse(data, target) {\n        const asn1Parsed = asn1js.fromBER(data);\n        if (asn1Parsed.result.error) {\n            throw new Error(asn1Parsed.result.error);\n        }\n        const res = this.fromASN(asn1Parsed.result, target);\n        return res;\n    }\n    static fromASN(asn1Schema, target) {\n        var _a;\n        try {\n            if (isConvertible(target)) {\n                const value = new target();\n                return value.fromASN(asn1Schema);\n            }\n            const schema = schemaStorage.get(target);\n            schemaStorage.cache(target);\n            let targetSchema = schema.schema;\n            if (asn1Schema.constructor === asn1js.Constructed && schema.type !== AsnTypeTypes.Choice) {\n                targetSchema = new asn1js.Constructed({\n                    idBlock: {\n                        tagClass: 3,\n                        tagNumber: asn1Schema.idBlock.tagNumber,\n                    },\n                    value: schema.schema.valueBlock.value,\n                });\n                for (const key in schema.items) {\n                    delete asn1Schema[key];\n                }\n            }\n            const asn1ComparedSchema = asn1js.compareSchema({}, asn1Schema, targetSchema);\n            if (!asn1ComparedSchema.verified) {\n                throw new AsnSchemaValidationError(`Data does not match to ${target.name} ASN1 schema. ${asn1ComparedSchema.result.error}`);\n            }\n            const res = new target();\n            if (isTypeOfArray(target)) {\n                if (!(\"value\" in asn1Schema.valueBlock && Array.isArray(asn1Schema.valueBlock.value))) {\n                    throw new Error(`Cannot get items from the ASN.1 parsed value. ASN.1 object is not constructed.`);\n                }\n                const itemType = schema.itemType;\n                if (typeof itemType === \"number\") {\n                    const converter = converters.defaultConverter(itemType);\n                    if (!converter) {\n                        throw new Error(`Cannot get default converter for array item of ${target.name} ASN1 schema`);\n                    }\n                    return target.from(asn1Schema.valueBlock.value, (element) => converter.fromASN(element));\n                }\n                else {\n                    return target.from(asn1Schema.valueBlock.value, (element) => this.fromASN(element, itemType));\n                }\n            }\n            for (const key in schema.items) {\n                const asn1SchemaValue = asn1ComparedSchema.result[key];\n                if (!asn1SchemaValue) {\n                    continue;\n                }\n                const schemaItem = schema.items[key];\n                const schemaItemType = schemaItem.type;\n                if (typeof schemaItemType === \"number\" || isConvertible(schemaItemType)) {\n                    const converter = (_a = schemaItem.converter) !== null && _a !== void 0 ? _a : (isConvertible(schemaItemType)\n                        ? new schemaItemType()\n                        : null);\n                    if (!converter) {\n                        throw new Error(\"Converter is empty\");\n                    }\n                    if (schemaItem.repeated) {\n                        if (schemaItem.implicit) {\n                            const Container = schemaItem.repeated === \"sequence\"\n                                ? asn1js.Sequence\n                                : asn1js.Set;\n                            const newItem = new Container();\n                            newItem.valueBlock = asn1SchemaValue.valueBlock;\n                            const newItemAsn = asn1js.fromBER(newItem.toBER(false));\n                            if (newItemAsn.offset === -1) {\n                                throw new Error(`Cannot parse the child item. ${newItemAsn.result.error}`);\n                            }\n                            if (!(\"value\" in newItemAsn.result.valueBlock && Array.isArray(newItemAsn.result.valueBlock.value))) {\n                                throw new Error(\"Cannot get items from the ASN.1 parsed value. ASN.1 object is not constructed.\");\n                            }\n                            const value = newItemAsn.result.valueBlock.value;\n                            res[key] = Array.from(value, (element) => converter.fromASN(element));\n                        }\n                        else {\n                            res[key] = Array.from(asn1SchemaValue, (element) => converter.fromASN(element));\n                        }\n                    }\n                    else {\n                        let value = asn1SchemaValue;\n                        if (schemaItem.implicit) {\n                            let newItem;\n                            if (isConvertible(schemaItemType)) {\n                                newItem = new schemaItemType().toSchema(\"\");\n                            }\n                            else {\n                                const Asn1TypeName = AsnPropTypes[schemaItemType];\n                                const Asn1Type = asn1js[Asn1TypeName];\n                                if (!Asn1Type) {\n                                    throw new Error(`Cannot get '${Asn1TypeName}' class from asn1js module`);\n                                }\n                                newItem = new Asn1Type();\n                            }\n                            newItem.valueBlock = value.valueBlock;\n                            value = asn1js.fromBER(newItem.toBER(false)).result;\n                        }\n                        res[key] = converter.fromASN(value);\n                    }\n                }\n                else {\n                    if (schemaItem.repeated) {\n                        if (!Array.isArray(asn1SchemaValue)) {\n                            throw new Error(\"Cannot get list of items from the ASN.1 parsed value. ASN.1 value should be iterable.\");\n                        }\n                        res[key] = Array.from(asn1SchemaValue, (element) => this.fromASN(element, schemaItemType));\n                    }\n                    else {\n                        res[key] = this.fromASN(asn1SchemaValue, schemaItemType);\n                    }\n                }\n            }\n            return res;\n        }\n        catch (error) {\n            if (error instanceof AsnSchemaValidationError) {\n                error.schemas.push(target.name);\n            }\n            throw error;\n        }\n    }\n}\n","import * as asn1js from \"asn1js\";\nimport * as converters from \"./converters\";\nimport { AsnPropTypes, AsnTypeTypes } from \"./enums\";\nimport { isConvertible, isArrayEqual } from \"./helper\";\nimport { schemaStorage } from \"./storage\";\nexport class AsnSerializer {\n    static serialize(obj) {\n        if (obj instanceof asn1js.BaseBlock) {\n            return obj.toBER(false);\n        }\n        return this.toASN(obj).toBER(false);\n    }\n    static toASN(obj) {\n        if (obj && typeof obj === \"object\" && isConvertible(obj)) {\n            return obj.toASN();\n        }\n        if (!(obj && typeof obj === \"object\")) {\n            throw new TypeError(\"Parameter 1 should be type of Object.\");\n        }\n        const target = obj.constructor;\n        const schema = schemaStorage.get(target);\n        schemaStorage.cache(target);\n        let asn1Value = [];\n        if (schema.itemType) {\n            if (!Array.isArray(obj)) {\n                throw new TypeError(\"Parameter 1 should be type of Array.\");\n            }\n            if (typeof schema.itemType === \"number\") {\n                const converter = converters.defaultConverter(schema.itemType);\n                if (!converter) {\n                    throw new Error(`Cannot get default converter for array item of ${target.name} ASN1 schema`);\n                }\n                asn1Value = obj.map((o) => converter.toASN(o));\n            }\n            else {\n                asn1Value = obj.map((o) => this.toAsnItem({ type: schema.itemType }, \"[]\", target, o));\n            }\n        }\n        else {\n            for (const key in schema.items) {\n                const schemaItem = schema.items[key];\n                const objProp = obj[key];\n                if (objProp === undefined\n                    || schemaItem.defaultValue === objProp\n                    || (typeof schemaItem.defaultValue === \"object\" && typeof objProp === \"object\"\n                        && isArrayEqual(this.serialize(schemaItem.defaultValue), this.serialize(objProp)))) {\n                    continue;\n                }\n                const asn1Item = AsnSerializer.toAsnItem(schemaItem, key, target, objProp);\n                if (typeof schemaItem.context === \"number\") {\n                    if (schemaItem.implicit) {\n                        if (!schemaItem.repeated\n                            && (typeof schemaItem.type === \"number\" || isConvertible(schemaItem.type))) {\n                            const value = {};\n                            value.valueHex = asn1Item instanceof asn1js.Null ? asn1Item.valueBeforeDecodeView : asn1Item.valueBlock.toBER();\n                            asn1Value.push(new asn1js.Primitive({\n                                optional: schemaItem.optional,\n                                idBlock: {\n                                    tagClass: 3,\n                                    tagNumber: schemaItem.context,\n                                },\n                                ...value,\n                            }));\n                        }\n                        else {\n                            asn1Value.push(new asn1js.Constructed({\n                                optional: schemaItem.optional,\n                                idBlock: {\n                                    tagClass: 3,\n                                    tagNumber: schemaItem.context,\n                                },\n                                value: asn1Item.valueBlock.value,\n                            }));\n                        }\n                    }\n                    else {\n                        asn1Value.push(new asn1js.Constructed({\n                            optional: schemaItem.optional,\n                            idBlock: {\n                                tagClass: 3,\n                                tagNumber: schemaItem.context,\n                            },\n                            value: [asn1Item],\n                        }));\n                    }\n                }\n                else if (schemaItem.repeated) {\n                    asn1Value = asn1Value.concat(asn1Item);\n                }\n                else {\n                    asn1Value.push(asn1Item);\n                }\n            }\n        }\n        let asnSchema;\n        switch (schema.type) {\n            case AsnTypeTypes.Sequence:\n                asnSchema = new asn1js.Sequence({ value: asn1Value });\n                break;\n            case AsnTypeTypes.Set:\n                asnSchema = new asn1js.Set({ value: asn1Value });\n                break;\n            case AsnTypeTypes.Choice:\n                if (!asn1Value[0]) {\n                    throw new Error(`Schema '${target.name}' has wrong data. Choice cannot be empty.`);\n                }\n                asnSchema = asn1Value[0];\n                break;\n        }\n        return asnSchema;\n    }\n    static toAsnItem(schemaItem, key, target, objProp) {\n        let asn1Item;\n        if (typeof (schemaItem.type) === \"number\") {\n            const converter = schemaItem.converter;\n            if (!converter) {\n                throw new Error(`Property '${key}' doesn't have converter for type ${AsnPropTypes[schemaItem.type]} in schema '${target.name}'`);\n            }\n            if (schemaItem.repeated) {\n                if (!Array.isArray(objProp)) {\n                    throw new TypeError(\"Parameter 'objProp' should be type of Array.\");\n                }\n                const items = Array.from(objProp, (element) => converter.toASN(element));\n                const Container = schemaItem.repeated === \"sequence\"\n                    ? asn1js.Sequence\n                    : asn1js.Set;\n                asn1Item = new Container({\n                    value: items,\n                });\n            }\n            else {\n                asn1Item = converter.toASN(objProp);\n            }\n        }\n        else {\n            if (schemaItem.repeated) {\n                if (!Array.isArray(objProp)) {\n                    throw new TypeError(\"Parameter 'objProp' should be type of Array.\");\n                }\n                const items = Array.from(objProp, (element) => this.toASN(element));\n                const Container = schemaItem.repeated === \"sequence\"\n                    ? asn1js.Sequence\n                    : asn1js.Set;\n                asn1Item = new Container({\n                    value: items,\n                });\n            }\n            else {\n                asn1Item = this.toASN(objProp);\n            }\n        }\n        return asn1Item;\n    }\n}\n","export class AsnArray extends Array {\n    constructor(items = []) {\n        if (typeof items === \"number\") {\n            super(items);\n        }\n        else {\n            super();\n            for (const item of items) {\n                this.push(item);\n            }\n        }\n    }\n}\n","import * as asn1js from \"asn1js\";\nimport { BufferSourceConverter } from \"pvtsutils\";\nimport { AsnParser } from \"./parser\";\nimport { AsnSerializer } from \"./serializer\";\nexport class AsnConvert {\n    static serialize(obj) {\n        return AsnSerializer.serialize(obj);\n    }\n    static parse(data, target) {\n        return AsnParser.parse(data, target);\n    }\n    static toString(data) {\n        const buf = BufferSourceConverter.isBufferSource(data)\n            ? BufferSourceConverter.toArrayBuffer(data)\n            : AsnConvert.serialize(data);\n        const asn = asn1js.fromBER(buf);\n        if (asn.offset === -1) {\n            throw new Error(`Cannot decode ASN.1 data. ${asn.result.error}`);\n        }\n        return asn.result.toString();\n    }\n}\n","/**\n * Copyright (c) 2020, Peculiar Ventures, All rights reserved.\n */\n\nclass JsonError extends Error {\r\n    constructor(message, innerError) {\r\n        super(innerError\r\n            ? `${message}. See the inner exception for more details.`\r\n            : message);\r\n        this.message = message;\r\n        this.innerError = innerError;\r\n    }\r\n}\n\nclass TransformError extends JsonError {\r\n    constructor(schema, message, innerError) {\r\n        super(message, innerError);\r\n        this.schema = schema;\r\n    }\r\n}\n\nclass ParserError extends TransformError {\r\n    constructor(schema, message, innerError) {\r\n        super(schema, `JSON doesn't match to '${schema.target.name}' schema. ${message}`, innerError);\r\n    }\r\n}\n\nclass ValidationError extends JsonError {\r\n}\n\nclass SerializerError extends JsonError {\r\n    constructor(schemaName, message, innerError) {\r\n        super(`Cannot serialize by '${schemaName}' schema. ${message}`, innerError);\r\n        this.schemaName = schemaName;\r\n    }\r\n}\n\nclass KeyError extends ParserError {\r\n    constructor(schema, keys, errors = {}) {\r\n        super(schema, \"Some keys doesn't match to schema\");\r\n        this.keys = keys;\r\n        this.errors = errors;\r\n    }\r\n}\n\nvar JsonPropTypes;\r\n(function (JsonPropTypes) {\r\n    JsonPropTypes[JsonPropTypes[\"Any\"] = 0] = \"Any\";\r\n    JsonPropTypes[JsonPropTypes[\"Boolean\"] = 1] = \"Boolean\";\r\n    JsonPropTypes[JsonPropTypes[\"Number\"] = 2] = \"Number\";\r\n    JsonPropTypes[JsonPropTypes[\"String\"] = 3] = \"String\";\r\n})(JsonPropTypes || (JsonPropTypes = {}));\n\nfunction checkType(value, type) {\r\n    switch (type) {\r\n        case JsonPropTypes.Boolean:\r\n            return typeof value === \"boolean\";\r\n        case JsonPropTypes.Number:\r\n            return typeof value === \"number\";\r\n        case JsonPropTypes.String:\r\n            return typeof value === \"string\";\r\n    }\r\n    return true;\r\n}\r\nfunction throwIfTypeIsWrong(value, type) {\r\n    if (!checkType(value, type)) {\r\n        throw new TypeError(`Value must be ${JsonPropTypes[type]}`);\r\n    }\r\n}\r\nfunction isConvertible(target) {\r\n    if (target && target.prototype) {\r\n        if (target.prototype.toJSON && target.prototype.fromJSON) {\r\n            return true;\r\n        }\r\n        else {\r\n            return isConvertible(target.prototype);\r\n        }\r\n    }\r\n    else {\r\n        return !!(target && target.toJSON && target.fromJSON);\r\n    }\r\n}\n\nclass JsonSchemaStorage {\r\n    constructor() {\r\n        this.items = new Map();\r\n    }\r\n    has(target) {\r\n        return this.items.has(target) || !!this.findParentSchema(target);\r\n    }\r\n    get(target) {\r\n        const schema = this.items.get(target) || this.findParentSchema(target);\r\n        if (!schema) {\r\n            throw new Error(\"Cannot get schema for current target\");\r\n        }\r\n        return schema;\r\n    }\r\n    create(target) {\r\n        const schema = { names: {} };\r\n        const parentSchema = this.findParentSchema(target);\r\n        if (parentSchema) {\r\n            Object.assign(schema, parentSchema);\r\n            schema.names = {};\r\n            for (const name in parentSchema.names) {\r\n                schema.names[name] = Object.assign({}, parentSchema.names[name]);\r\n            }\r\n        }\r\n        schema.target = target;\r\n        return schema;\r\n    }\r\n    set(target, schema) {\r\n        this.items.set(target, schema);\r\n        return this;\r\n    }\r\n    findParentSchema(target) {\r\n        const parent = target.__proto__;\r\n        if (parent) {\r\n            const schema = this.items.get(parent);\r\n            return schema || this.findParentSchema(parent);\r\n        }\r\n        return null;\r\n    }\r\n}\n\nconst DEFAULT_SCHEMA = \"default\";\r\nconst schemaStorage = new JsonSchemaStorage();\n\nclass PatternValidation {\r\n    constructor(pattern) {\r\n        this.pattern = new RegExp(pattern);\r\n    }\r\n    validate(value) {\r\n        const pattern = new RegExp(this.pattern.source, this.pattern.flags);\r\n        if (typeof value !== \"string\") {\r\n            throw new ValidationError(\"Incoming value must be string\");\r\n        }\r\n        if (!pattern.exec(value)) {\r\n            throw new ValidationError(`Value doesn't match to pattern '${pattern.toString()}'`);\r\n        }\r\n    }\r\n}\n\nclass InclusiveValidation {\r\n    constructor(min = Number.MIN_VALUE, max = Number.MAX_VALUE) {\r\n        this.min = min;\r\n        this.max = max;\r\n    }\r\n    validate(value) {\r\n        throwIfTypeIsWrong(value, JsonPropTypes.Number);\r\n        if (!(this.min <= value && value <= this.max)) {\r\n            const min = this.min === Number.MIN_VALUE ? \"MIN\" : this.min;\r\n            const max = this.max === Number.MAX_VALUE ? \"MAX\" : this.max;\r\n            throw new ValidationError(`Value doesn't match to diapason [${min},${max}]`);\r\n        }\r\n    }\r\n}\n\nclass ExclusiveValidation {\r\n    constructor(min = Number.MIN_VALUE, max = Number.MAX_VALUE) {\r\n        this.min = min;\r\n        this.max = max;\r\n    }\r\n    validate(value) {\r\n        throwIfTypeIsWrong(value, JsonPropTypes.Number);\r\n        if (!(this.min < value && value < this.max)) {\r\n            const min = this.min === Number.MIN_VALUE ? \"MIN\" : this.min;\r\n            const max = this.max === Number.MAX_VALUE ? \"MAX\" : this.max;\r\n            throw new ValidationError(`Value doesn't match to diapason (${min},${max})`);\r\n        }\r\n    }\r\n}\n\nclass LengthValidation {\r\n    constructor(length, minLength, maxLength) {\r\n        this.length = length;\r\n        this.minLength = minLength;\r\n        this.maxLength = maxLength;\r\n    }\r\n    validate(value) {\r\n        if (this.length !== undefined) {\r\n            if (value.length !== this.length) {\r\n                throw new ValidationError(`Value length must be exactly ${this.length}.`);\r\n            }\r\n            return;\r\n        }\r\n        if (this.minLength !== undefined) {\r\n            if (value.length < this.minLength) {\r\n                throw new ValidationError(`Value length must be more than ${this.minLength}.`);\r\n            }\r\n        }\r\n        if (this.maxLength !== undefined) {\r\n            if (value.length > this.maxLength) {\r\n                throw new ValidationError(`Value length must be less than ${this.maxLength}.`);\r\n            }\r\n        }\r\n    }\r\n}\n\nclass EnumerationValidation {\r\n    constructor(enumeration) {\r\n        this.enumeration = enumeration;\r\n    }\r\n    validate(value) {\r\n        throwIfTypeIsWrong(value, JsonPropTypes.String);\r\n        if (!this.enumeration.includes(value)) {\r\n            throw new ValidationError(`Value must be one of ${this.enumeration.map((v) => `'${v}'`).join(\", \")}`);\r\n        }\r\n    }\r\n}\n\nclass JsonTransform {\r\n    static checkValues(data, schemaItem) {\r\n        const values = Array.isArray(data) ? data : [data];\r\n        for (const value of values) {\r\n            for (const validation of schemaItem.validations) {\r\n                if (validation instanceof LengthValidation && schemaItem.repeated) {\r\n                    validation.validate(data);\r\n                }\r\n                else {\r\n                    validation.validate(value);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    static checkTypes(value, schemaItem) {\r\n        if (schemaItem.repeated && !Array.isArray(value)) {\r\n            throw new TypeError(\"Value must be Array\");\r\n        }\r\n        if (typeof schemaItem.type === \"number\") {\r\n            const values = Array.isArray(value) ? value : [value];\r\n            for (const v of values) {\r\n                throwIfTypeIsWrong(v, schemaItem.type);\r\n            }\r\n        }\r\n    }\r\n    static getSchemaByName(schema, name = DEFAULT_SCHEMA) {\r\n        return { ...schema.names[DEFAULT_SCHEMA], ...schema.names[name] };\r\n    }\r\n}\n\nclass JsonSerializer extends JsonTransform {\r\n    static serialize(obj, options, replacer, space) {\r\n        const json = this.toJSON(obj, options);\r\n        return JSON.stringify(json, replacer, space);\r\n    }\r\n    static toJSON(obj, options = {}) {\r\n        let res;\r\n        let targetSchema = options.targetSchema;\r\n        const schemaName = options.schemaName || DEFAULT_SCHEMA;\r\n        if (isConvertible(obj)) {\r\n            return obj.toJSON();\r\n        }\r\n        if (Array.isArray(obj)) {\r\n            res = [];\r\n            for (const item of obj) {\r\n                res.push(this.toJSON(item, options));\r\n            }\r\n        }\r\n        else if (typeof obj === \"object\") {\r\n            if (targetSchema && !schemaStorage.has(targetSchema)) {\r\n                throw new JsonError(\"Cannot get schema for `targetSchema` param\");\r\n            }\r\n            targetSchema = (targetSchema || obj.constructor);\r\n            if (schemaStorage.has(targetSchema)) {\r\n                const schema = schemaStorage.get(targetSchema);\r\n                res = {};\r\n                const namedSchema = this.getSchemaByName(schema, schemaName);\r\n                for (const key in namedSchema) {\r\n                    try {\r\n                        const item = namedSchema[key];\r\n                        const objItem = obj[key];\r\n                        let value;\r\n                        if ((item.optional && objItem === undefined)\r\n                            || (item.defaultValue !== undefined && objItem === item.defaultValue)) {\r\n                            continue;\r\n                        }\r\n                        if (!item.optional && objItem === undefined) {\r\n                            throw new SerializerError(targetSchema.name, `Property '${key}' is required.`);\r\n                        }\r\n                        if (typeof item.type === \"number\") {\r\n                            if (item.converter) {\r\n                                if (item.repeated) {\r\n                                    value = objItem.map((el) => item.converter.toJSON(el, obj));\r\n                                }\r\n                                else {\r\n                                    value = item.converter.toJSON(objItem, obj);\r\n                                }\r\n                            }\r\n                            else {\r\n                                value = objItem;\r\n                            }\r\n                        }\r\n                        else {\r\n                            if (item.repeated) {\r\n                                value = objItem.map((el) => this.toJSON(el, { schemaName }));\r\n                            }\r\n                            else {\r\n                                value = this.toJSON(objItem, { schemaName });\r\n                            }\r\n                        }\r\n                        this.checkTypes(value, item);\r\n                        this.checkValues(value, item);\r\n                        res[item.name || key] = value;\r\n                    }\r\n                    catch (e) {\r\n                        if (e instanceof SerializerError) {\r\n                            throw e;\r\n                        }\r\n                        else {\r\n                            throw new SerializerError(schema.target.name, `Property '${key}' is wrong. ${e.message}`, e);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                res = {};\r\n                for (const key in obj) {\r\n                    res[key] = this.toJSON(obj[key], { schemaName });\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            res = obj;\r\n        }\r\n        return res;\r\n    }\r\n}\n\nclass JsonParser extends JsonTransform {\r\n    static parse(data, options) {\r\n        const obj = JSON.parse(data);\r\n        return this.fromJSON(obj, options);\r\n    }\r\n    static fromJSON(target, options) {\r\n        const targetSchema = options.targetSchema;\r\n        const schemaName = options.schemaName || DEFAULT_SCHEMA;\r\n        const obj = new targetSchema();\r\n        if (isConvertible(obj)) {\r\n            return obj.fromJSON(target);\r\n        }\r\n        const schema = schemaStorage.get(targetSchema);\r\n        const namedSchema = this.getSchemaByName(schema, schemaName);\r\n        const keyErrors = {};\r\n        if (options.strictProperty && !Array.isArray(target)) {\r\n            JsonParser.checkStrictProperty(target, namedSchema, schema);\r\n        }\r\n        for (const key in namedSchema) {\r\n            try {\r\n                const item = namedSchema[key];\r\n                const name = item.name || key;\r\n                const value = target[name];\r\n                if (value === undefined && (item.optional || item.defaultValue !== undefined)) {\r\n                    continue;\r\n                }\r\n                if (!item.optional && value === undefined) {\r\n                    throw new ParserError(schema, `Property '${name}' is required.`);\r\n                }\r\n                this.checkTypes(value, item);\r\n                this.checkValues(value, item);\r\n                if (typeof (item.type) === \"number\") {\r\n                    if (item.converter) {\r\n                        if (item.repeated) {\r\n                            obj[key] = value.map((el) => item.converter.fromJSON(el, obj));\r\n                        }\r\n                        else {\r\n                            obj[key] = item.converter.fromJSON(value, obj);\r\n                        }\r\n                    }\r\n                    else {\r\n                        obj[key] = value;\r\n                    }\r\n                }\r\n                else {\r\n                    const newOptions = {\r\n                        ...options,\r\n                        targetSchema: item.type,\r\n                        schemaName,\r\n                    };\r\n                    if (item.repeated) {\r\n                        obj[key] = value.map((el) => this.fromJSON(el, newOptions));\r\n                    }\r\n                    else {\r\n                        obj[key] = this.fromJSON(value, newOptions);\r\n                    }\r\n                }\r\n            }\r\n            catch (e) {\r\n                if (!(e instanceof ParserError)) {\r\n                    e = new ParserError(schema, `Property '${key}' is wrong. ${e.message}`, e);\r\n                }\r\n                if (options.strictAllKeys) {\r\n                    keyErrors[key] = e;\r\n                }\r\n                else {\r\n                    throw e;\r\n                }\r\n            }\r\n        }\r\n        const keys = Object.keys(keyErrors);\r\n        if (keys.length) {\r\n            throw new KeyError(schema, keys, keyErrors);\r\n        }\r\n        return obj;\r\n    }\r\n    static checkStrictProperty(target, namedSchema, schema) {\r\n        const jsonProps = Object.keys(target);\r\n        const schemaProps = Object.keys(namedSchema);\r\n        const keys = [];\r\n        for (const key of jsonProps) {\r\n            if (schemaProps.indexOf(key) === -1) {\r\n                keys.push(key);\r\n            }\r\n        }\r\n        if (keys.length) {\r\n            throw new KeyError(schema, keys);\r\n        }\r\n    }\r\n}\n\nfunction getValidations(item) {\r\n    const validations = [];\r\n    if (item.pattern) {\r\n        validations.push(new PatternValidation(item.pattern));\r\n    }\r\n    if (item.type === JsonPropTypes.Number || item.type === JsonPropTypes.Any) {\r\n        if (item.minInclusive !== undefined || item.maxInclusive !== undefined) {\r\n            validations.push(new InclusiveValidation(item.minInclusive, item.maxInclusive));\r\n        }\r\n        if (item.minExclusive !== undefined || item.maxExclusive !== undefined) {\r\n            validations.push(new ExclusiveValidation(item.minExclusive, item.maxExclusive));\r\n        }\r\n        if (item.enumeration !== undefined) {\r\n            validations.push(new EnumerationValidation(item.enumeration));\r\n        }\r\n    }\r\n    if (item.type === JsonPropTypes.String || item.repeated || item.type === JsonPropTypes.Any) {\r\n        if (item.length !== undefined || item.minLength !== undefined || item.maxLength !== undefined) {\r\n            validations.push(new LengthValidation(item.length, item.minLength, item.maxLength));\r\n        }\r\n    }\r\n    return validations;\r\n}\r\nconst JsonProp = (options = {}) => (target, propertyKey) => {\r\n    const errorMessage = `Cannot set type for ${propertyKey} property of ${target.constructor.name} schema`;\r\n    let schema;\r\n    if (!schemaStorage.has(target.constructor)) {\r\n        schema = schemaStorage.create(target.constructor);\r\n        schemaStorage.set(target.constructor, schema);\r\n    }\r\n    else {\r\n        schema = schemaStorage.get(target.constructor);\r\n        if (schema.target !== target.constructor) {\r\n            schema = schemaStorage.create(target.constructor);\r\n            schemaStorage.set(target.constructor, schema);\r\n        }\r\n    }\r\n    const defaultSchema = {\r\n        type: JsonPropTypes.Any,\r\n        validations: [],\r\n    };\r\n    const copyOptions = Object.assign(defaultSchema, options);\r\n    copyOptions.validations = getValidations(copyOptions);\r\n    if (typeof copyOptions.type !== \"number\") {\r\n        if (!schemaStorage.has(copyOptions.type) && !isConvertible(copyOptions.type)) {\r\n            throw new Error(`${errorMessage}. Assigning type doesn't have schema.`);\r\n        }\r\n    }\r\n    let schemaNames;\r\n    if (Array.isArray(options.schema)) {\r\n        schemaNames = options.schema;\r\n    }\r\n    else {\r\n        schemaNames = [options.schema || DEFAULT_SCHEMA];\r\n    }\r\n    for (const schemaName of schemaNames) {\r\n        if (!schema.names[schemaName]) {\r\n            schema.names[schemaName] = {};\r\n        }\r\n        const namedSchema = schema.names[schemaName];\r\n        namedSchema[propertyKey] = copyOptions;\r\n    }\r\n};\n\nexport { JsonError, JsonParser, JsonProp, JsonPropTypes, JsonSerializer, KeyError, ParserError, SerializerError, TransformError, ValidationError };\n","/*!\n Copyright (c) Peculiar Ventures, LLC\n*/\n\nimport { Convert, BufferSourceConverter, combine } from 'pvtsutils';\nexport { BufferSourceConverter } from 'pvtsutils';\nimport { AsnProp, AsnPropTypes, AsnType, AsnTypeTypes, AsnIntegerConverter, AsnSerializer, AsnConvert } from '@peculiar/asn1-schema';\nimport { __decorate } from 'tslib';\nimport { JsonProp, JsonPropTypes } from '@peculiar/json-schema';\nimport * as asn1 from 'asn1js';\n\nclass CryptoError extends Error {\r\n}\n\nclass AlgorithmError extends CryptoError {\r\n}\n\nclass UnsupportedOperationError extends CryptoError {\r\n    constructor(methodName) {\r\n        super(`Unsupported operation: ${methodName ? `${methodName}` : \"\"}`);\r\n    }\r\n}\n\nclass OperationError extends CryptoError {\r\n}\n\nclass RequiredPropertyError extends CryptoError {\r\n    constructor(propName) {\r\n        super(`${propName}: Missing required property`);\r\n    }\r\n}\n\nclass PemConverter {\r\n    static toArrayBuffer(pem) {\r\n        const base64 = pem\r\n            .replace(/-{5}(BEGIN|END) .*-{5}/g, \"\")\r\n            .replace(\"\\r\", \"\")\r\n            .replace(\"\\n\", \"\");\r\n        return Convert.FromBase64(base64);\r\n    }\r\n    static toUint8Array(pem) {\r\n        const bytes = this.toArrayBuffer(pem);\r\n        return new Uint8Array(bytes);\r\n    }\r\n    static fromBufferSource(buffer, tag) {\r\n        const base64 = Convert.ToBase64(buffer);\r\n        let sliced;\r\n        let offset = 0;\r\n        const rows = [];\r\n        while (true) {\r\n            sliced = base64.slice(offset, offset = offset + 64);\r\n            if (sliced.length) {\r\n                rows.push(sliced);\r\n                if (sliced.length < 64) {\r\n                    break;\r\n                }\r\n            }\r\n            else {\r\n                break;\r\n            }\r\n        }\r\n        const upperCaseTag = tag.toUpperCase();\r\n        return `-----BEGIN ${upperCaseTag}-----\\n${rows.join(\"\\n\")}\\n-----END ${upperCaseTag}-----`;\r\n    }\r\n    static isPEM(data) {\r\n        return /-----BEGIN .+-----[A-Za-z0-9+\\/\\+\\=\\s\\n]+-----END .+-----/i.test(data);\r\n    }\r\n    static getTagName(pem) {\r\n        if (!this.isPEM(pem)) {\r\n            throw new Error(\"Bad parameter. Incoming data is not right PEM\");\r\n        }\r\n        const res = /-----BEGIN (.+)-----/.exec(pem);\r\n        if (!res) {\r\n            throw new Error(\"Cannot get tag from PEM\");\r\n        }\r\n        return res[1];\r\n    }\r\n    static hasTagName(pem, tagName) {\r\n        const tag = this.getTagName(pem);\r\n        return tagName.toLowerCase() === tag.toLowerCase();\r\n    }\r\n    static isCertificate(pem) {\r\n        return this.hasTagName(pem, \"certificate\");\r\n    }\r\n    static isCertificateRequest(pem) {\r\n        return this.hasTagName(pem, \"certificate request\");\r\n    }\r\n    static isCRL(pem) {\r\n        return this.hasTagName(pem, \"x509 crl\");\r\n    }\r\n    static isPublicKey(pem) {\r\n        return this.hasTagName(pem, \"public key\");\r\n    }\r\n}\n\nfunction isJWK(data) {\r\n    return typeof data === \"object\" && \"kty\" in data;\r\n}\n\nclass ProviderCrypto {\r\n    async digest(...args) {\r\n        this.checkDigest.apply(this, args);\r\n        return this.onDigest.apply(this, args);\r\n    }\r\n    checkDigest(algorithm, data) {\r\n        this.checkAlgorithmName(algorithm);\r\n    }\r\n    async onDigest(algorithm, data) {\r\n        throw new UnsupportedOperationError(\"digest\");\r\n    }\r\n    async generateKey(...args) {\r\n        this.checkGenerateKey.apply(this, args);\r\n        return this.onGenerateKey.apply(this, args);\r\n    }\r\n    checkGenerateKey(algorithm, extractable, keyUsages, ...args) {\r\n        this.checkAlgorithmName(algorithm);\r\n        this.checkGenerateKeyParams(algorithm);\r\n        if (!(keyUsages && keyUsages.length)) {\r\n            throw new TypeError(`Usages cannot be empty when creating a key.`);\r\n        }\r\n        let allowedUsages;\r\n        if (Array.isArray(this.usages)) {\r\n            allowedUsages = this.usages;\r\n        }\r\n        else {\r\n            allowedUsages = this.usages.privateKey.concat(this.usages.publicKey);\r\n        }\r\n        this.checkKeyUsages(keyUsages, allowedUsages);\r\n    }\r\n    checkGenerateKeyParams(algorithm) {\r\n    }\r\n    async onGenerateKey(algorithm, extractable, keyUsages, ...args) {\r\n        throw new UnsupportedOperationError(\"generateKey\");\r\n    }\r\n    async sign(...args) {\r\n        this.checkSign.apply(this, args);\r\n        return this.onSign.apply(this, args);\r\n    }\r\n    checkSign(algorithm, key, data, ...args) {\r\n        this.checkAlgorithmName(algorithm);\r\n        this.checkAlgorithmParams(algorithm);\r\n        this.checkCryptoKey(key, \"sign\");\r\n    }\r\n    async onSign(algorithm, key, data, ...args) {\r\n        throw new UnsupportedOperationError(\"sign\");\r\n    }\r\n    async verify(...args) {\r\n        this.checkVerify.apply(this, args);\r\n        return this.onVerify.apply(this, args);\r\n    }\r\n    checkVerify(algorithm, key, signature, data, ...args) {\r\n        this.checkAlgorithmName(algorithm);\r\n        this.checkAlgorithmParams(algorithm);\r\n        this.checkCryptoKey(key, \"verify\");\r\n    }\r\n    async onVerify(algorithm, key, signature, data, ...args) {\r\n        throw new UnsupportedOperationError(\"verify\");\r\n    }\r\n    async encrypt(...args) {\r\n        this.checkEncrypt.apply(this, args);\r\n        return this.onEncrypt.apply(this, args);\r\n    }\r\n    checkEncrypt(algorithm, key, data, options = {}, ...args) {\r\n        this.checkAlgorithmName(algorithm);\r\n        this.checkAlgorithmParams(algorithm);\r\n        this.checkCryptoKey(key, options.keyUsage ? \"encrypt\" : void 0);\r\n    }\r\n    async onEncrypt(algorithm, key, data, ...args) {\r\n        throw new UnsupportedOperationError(\"encrypt\");\r\n    }\r\n    async decrypt(...args) {\r\n        this.checkDecrypt.apply(this, args);\r\n        return this.onDecrypt.apply(this, args);\r\n    }\r\n    checkDecrypt(algorithm, key, data, options = {}, ...args) {\r\n        this.checkAlgorithmName(algorithm);\r\n        this.checkAlgorithmParams(algorithm);\r\n        this.checkCryptoKey(key, options.keyUsage ? \"decrypt\" : void 0);\r\n    }\r\n    async onDecrypt(algorithm, key, data, ...args) {\r\n        throw new UnsupportedOperationError(\"decrypt\");\r\n    }\r\n    async deriveBits(...args) {\r\n        this.checkDeriveBits.apply(this, args);\r\n        return this.onDeriveBits.apply(this, args);\r\n    }\r\n    checkDeriveBits(algorithm, baseKey, length, options = {}, ...args) {\r\n        this.checkAlgorithmName(algorithm);\r\n        this.checkAlgorithmParams(algorithm);\r\n        this.checkCryptoKey(baseKey, options.keyUsage ? \"deriveBits\" : void 0);\r\n        if (length % 8 !== 0) {\r\n            throw new OperationError(\"length: Is not multiple of 8\");\r\n        }\r\n    }\r\n    async onDeriveBits(algorithm, baseKey, length, ...args) {\r\n        throw new UnsupportedOperationError(\"deriveBits\");\r\n    }\r\n    async exportKey(...args) {\r\n        this.checkExportKey.apply(this, args);\r\n        return this.onExportKey.apply(this, args);\r\n    }\r\n    checkExportKey(format, key, ...args) {\r\n        this.checkKeyFormat(format);\r\n        this.checkCryptoKey(key);\r\n        if (!key.extractable) {\r\n            throw new CryptoError(\"key: Is not extractable\");\r\n        }\r\n    }\r\n    async onExportKey(format, key, ...args) {\r\n        throw new UnsupportedOperationError(\"exportKey\");\r\n    }\r\n    async importKey(...args) {\r\n        this.checkImportKey.apply(this, args);\r\n        return this.onImportKey.apply(this, args);\r\n    }\r\n    checkImportKey(format, keyData, algorithm, extractable, keyUsages, ...args) {\r\n        this.checkKeyFormat(format);\r\n        this.checkKeyData(format, keyData);\r\n        this.checkAlgorithmName(algorithm);\r\n        this.checkImportParams(algorithm);\r\n        if (Array.isArray(this.usages)) {\r\n            this.checkKeyUsages(keyUsages, this.usages);\r\n        }\r\n    }\r\n    async onImportKey(format, keyData, algorithm, extractable, keyUsages, ...args) {\r\n        throw new UnsupportedOperationError(\"importKey\");\r\n    }\r\n    checkAlgorithmName(algorithm) {\r\n        if (algorithm.name.toLowerCase() !== this.name.toLowerCase()) {\r\n            throw new AlgorithmError(\"Unrecognized name\");\r\n        }\r\n    }\r\n    checkAlgorithmParams(algorithm) {\r\n    }\r\n    checkDerivedKeyParams(algorithm) {\r\n    }\r\n    checkKeyUsages(usages, allowed) {\r\n        for (const usage of usages) {\r\n            if (allowed.indexOf(usage) === -1) {\r\n                throw new TypeError(\"Cannot create a key using the specified key usages\");\r\n            }\r\n        }\r\n    }\r\n    checkCryptoKey(key, keyUsage) {\r\n        this.checkAlgorithmName(key.algorithm);\r\n        if (keyUsage && key.usages.indexOf(keyUsage) === -1) {\r\n            throw new CryptoError(`key does not match that of operation`);\r\n        }\r\n    }\r\n    checkRequiredProperty(data, propName) {\r\n        if (!(propName in data)) {\r\n            throw new RequiredPropertyError(propName);\r\n        }\r\n    }\r\n    checkHashAlgorithm(algorithm, hashAlgorithms) {\r\n        for (const item of hashAlgorithms) {\r\n            if (item.toLowerCase() === algorithm.name.toLowerCase()) {\r\n                return;\r\n            }\r\n        }\r\n        throw new OperationError(`hash: Must be one of ${hashAlgorithms.join(\", \")}`);\r\n    }\r\n    checkImportParams(algorithm) {\r\n    }\r\n    checkKeyFormat(format) {\r\n        switch (format) {\r\n            case \"raw\":\r\n            case \"pkcs8\":\r\n            case \"spki\":\r\n            case \"jwk\":\r\n                break;\r\n            default:\r\n                throw new TypeError(\"format: Is invalid value. Must be 'jwk', 'raw', 'spki', or 'pkcs8'\");\r\n        }\r\n    }\r\n    checkKeyData(format, keyData) {\r\n        if (!keyData) {\r\n            throw new TypeError(\"keyData: Cannot be empty on empty on key importing\");\r\n        }\r\n        if (format === \"jwk\") {\r\n            if (!isJWK(keyData)) {\r\n                throw new TypeError(\"keyData: Is not JsonWebToken\");\r\n            }\r\n        }\r\n        else if (!BufferSourceConverter.isBufferSource(keyData)) {\r\n            throw new TypeError(\"keyData: Is not ArrayBufferView or ArrayBuffer\");\r\n        }\r\n    }\r\n    prepareData(data) {\r\n        return BufferSourceConverter.toArrayBuffer(data);\r\n    }\r\n}\n\nclass AesProvider extends ProviderCrypto {\r\n    checkGenerateKeyParams(algorithm) {\r\n        this.checkRequiredProperty(algorithm, \"length\");\r\n        if (typeof algorithm.length !== \"number\") {\r\n            throw new TypeError(\"length: Is not of type Number\");\r\n        }\r\n        switch (algorithm.length) {\r\n            case 128:\r\n            case 192:\r\n            case 256:\r\n                break;\r\n            default:\r\n                throw new TypeError(\"length: Must be 128, 192, or 256\");\r\n        }\r\n    }\r\n    checkDerivedKeyParams(algorithm) {\r\n        this.checkGenerateKeyParams(algorithm);\r\n    }\r\n}\n\nclass AesCbcProvider extends AesProvider {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.name = \"AES-CBC\";\r\n        this.usages = [\"encrypt\", \"decrypt\", \"wrapKey\", \"unwrapKey\"];\r\n    }\r\n    checkAlgorithmParams(algorithm) {\r\n        this.checkRequiredProperty(algorithm, \"iv\");\r\n        if (!(algorithm.iv instanceof ArrayBuffer || ArrayBuffer.isView(algorithm.iv))) {\r\n            throw new TypeError(\"iv: Is not of type '(ArrayBuffer or ArrayBufferView)'\");\r\n        }\r\n        if (algorithm.iv.byteLength !== 16) {\r\n            throw new TypeError(\"iv: Must have length 16 bytes\");\r\n        }\r\n    }\r\n}\n\nclass AesCmacProvider extends AesProvider {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.name = \"AES-CMAC\";\r\n        this.usages = [\"sign\", \"verify\"];\r\n    }\r\n    checkAlgorithmParams(algorithm) {\r\n        this.checkRequiredProperty(algorithm, \"length\");\r\n        if (typeof algorithm.length !== \"number\") {\r\n            throw new TypeError(\"length: Is not a Number\");\r\n        }\r\n        if (algorithm.length < 1) {\r\n            throw new OperationError(\"length: Must be more than 0\");\r\n        }\r\n    }\r\n}\n\nclass AesCtrProvider extends AesProvider {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.name = \"AES-CTR\";\r\n        this.usages = [\"encrypt\", \"decrypt\", \"wrapKey\", \"unwrapKey\"];\r\n    }\r\n    checkAlgorithmParams(algorithm) {\r\n        this.checkRequiredProperty(algorithm, \"counter\");\r\n        if (!(algorithm.counter instanceof ArrayBuffer || ArrayBuffer.isView(algorithm.counter))) {\r\n            throw new TypeError(\"counter: Is not of type '(ArrayBuffer or ArrayBufferView)'\");\r\n        }\r\n        if (algorithm.counter.byteLength !== 16) {\r\n            throw new TypeError(\"iv: Must have length 16 bytes\");\r\n        }\r\n        this.checkRequiredProperty(algorithm, \"length\");\r\n        if (typeof algorithm.length !== \"number\") {\r\n            throw new TypeError(\"length: Is not a Number\");\r\n        }\r\n        if (algorithm.length < 1) {\r\n            throw new OperationError(\"length: Must be more than 0\");\r\n        }\r\n    }\r\n}\n\nclass AesEcbProvider extends AesProvider {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.name = \"AES-ECB\";\r\n        this.usages = [\"encrypt\", \"decrypt\", \"wrapKey\", \"unwrapKey\"];\r\n    }\r\n}\n\nclass AesGcmProvider extends AesProvider {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.name = \"AES-GCM\";\r\n        this.usages = [\"encrypt\", \"decrypt\", \"wrapKey\", \"unwrapKey\"];\r\n    }\r\n    checkAlgorithmParams(algorithm) {\r\n        this.checkRequiredProperty(algorithm, \"iv\");\r\n        if (!(algorithm.iv instanceof ArrayBuffer || ArrayBuffer.isView(algorithm.iv))) {\r\n            throw new TypeError(\"iv: Is not of type '(ArrayBuffer or ArrayBufferView)'\");\r\n        }\r\n        if (algorithm.iv.byteLength < 1) {\r\n            throw new OperationError(\"iv: Must have length more than 0 and less than 2^64 - 1\");\r\n        }\r\n        if (!(\"tagLength\" in algorithm)) {\r\n            algorithm.tagLength = 128;\r\n        }\r\n        switch (algorithm.tagLength) {\r\n            case 32:\r\n            case 64:\r\n            case 96:\r\n            case 104:\r\n            case 112:\r\n            case 120:\r\n            case 128:\r\n                break;\r\n            default:\r\n                throw new OperationError(\"tagLength: Must be one of 32, 64, 96, 104, 112, 120 or 128\");\r\n        }\r\n    }\r\n}\n\nclass AesKwProvider extends AesProvider {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.name = \"AES-KW\";\r\n        this.usages = [\"wrapKey\", \"unwrapKey\"];\r\n    }\r\n}\n\nclass DesProvider extends ProviderCrypto {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.usages = [\"encrypt\", \"decrypt\", \"wrapKey\", \"unwrapKey\"];\r\n    }\r\n    checkAlgorithmParams(algorithm) {\r\n        if (this.ivSize) {\r\n            this.checkRequiredProperty(algorithm, \"iv\");\r\n            if (!(algorithm.iv instanceof ArrayBuffer || ArrayBuffer.isView(algorithm.iv))) {\r\n                throw new TypeError(\"iv: Is not of type '(ArrayBuffer or ArrayBufferView)'\");\r\n            }\r\n            if (algorithm.iv.byteLength !== this.ivSize) {\r\n                throw new TypeError(`iv: Must have length ${this.ivSize} bytes`);\r\n            }\r\n        }\r\n    }\r\n    checkGenerateKeyParams(algorithm) {\r\n        this.checkRequiredProperty(algorithm, \"length\");\r\n        if (typeof algorithm.length !== \"number\") {\r\n            throw new TypeError(\"length: Is not of type Number\");\r\n        }\r\n        if (algorithm.length !== this.keySizeBits) {\r\n            throw new OperationError(`algorithm.length: Must be ${this.keySizeBits}`);\r\n        }\r\n    }\r\n    checkDerivedKeyParams(algorithm) {\r\n        this.checkGenerateKeyParams(algorithm);\r\n    }\r\n}\n\nclass RsaProvider extends ProviderCrypto {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.hashAlgorithms = [\"SHA-1\", \"SHA-256\", \"SHA-384\", \"SHA-512\"];\r\n    }\r\n    checkGenerateKeyParams(algorithm) {\r\n        this.checkRequiredProperty(algorithm, \"hash\");\r\n        this.checkHashAlgorithm(algorithm.hash, this.hashAlgorithms);\r\n        this.checkRequiredProperty(algorithm, \"publicExponent\");\r\n        if (!(algorithm.publicExponent && algorithm.publicExponent instanceof Uint8Array)) {\r\n            throw new TypeError(\"publicExponent: Missing or not a Uint8Array\");\r\n        }\r\n        const publicExponent = Convert.ToBase64(algorithm.publicExponent);\r\n        if (!(publicExponent === \"Aw==\" || publicExponent === \"AQAB\")) {\r\n            throw new TypeError(\"publicExponent: Must be [3] or [1,0,1]\");\r\n        }\r\n        this.checkRequiredProperty(algorithm, \"modulusLength\");\r\n        if (algorithm.modulusLength % 8\r\n            || algorithm.modulusLength < 256\r\n            || algorithm.modulusLength > 16384) {\r\n            throw new TypeError(\"The modulus length must be a multiple of 8 bits and >= 256 and <= 16384\");\r\n        }\r\n    }\r\n    checkImportParams(algorithm) {\r\n        this.checkRequiredProperty(algorithm, \"hash\");\r\n        this.checkHashAlgorithm(algorithm.hash, this.hashAlgorithms);\r\n    }\r\n}\n\nclass RsaSsaProvider extends RsaProvider {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.name = \"RSASSA-PKCS1-v1_5\";\r\n        this.usages = {\r\n            privateKey: [\"sign\"],\r\n            publicKey: [\"verify\"],\r\n        };\r\n    }\r\n}\n\nclass RsaPssProvider extends RsaProvider {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.name = \"RSA-PSS\";\r\n        this.usages = {\r\n            privateKey: [\"sign\"],\r\n            publicKey: [\"verify\"],\r\n        };\r\n    }\r\n    checkAlgorithmParams(algorithm) {\r\n        this.checkRequiredProperty(algorithm, \"saltLength\");\r\n        if (typeof algorithm.saltLength !== \"number\") {\r\n            throw new TypeError(\"saltLength: Is not a Number\");\r\n        }\r\n        if (algorithm.saltLength < 0) {\r\n            throw new RangeError(\"saltLength: Must be positive number\");\r\n        }\r\n    }\r\n}\n\nclass RsaOaepProvider extends RsaProvider {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.name = \"RSA-OAEP\";\r\n        this.usages = {\r\n            privateKey: [\"decrypt\", \"unwrapKey\"],\r\n            publicKey: [\"encrypt\", \"wrapKey\"],\r\n        };\r\n    }\r\n    checkAlgorithmParams(algorithm) {\r\n        if (algorithm.label\r\n            && !(algorithm.label instanceof ArrayBuffer || ArrayBuffer.isView(algorithm.label))) {\r\n            throw new TypeError(\"label: Is not of type '(ArrayBuffer or ArrayBufferView)'\");\r\n        }\r\n    }\r\n}\n\nclass EllipticProvider extends ProviderCrypto {\r\n    checkGenerateKeyParams(algorithm) {\r\n        this.checkRequiredProperty(algorithm, \"namedCurve\");\r\n        this.checkNamedCurve(algorithm.namedCurve);\r\n    }\r\n    checkNamedCurve(namedCurve) {\r\n        for (const item of this.namedCurves) {\r\n            if (item.toLowerCase() === namedCurve.toLowerCase()) {\r\n                return;\r\n            }\r\n        }\r\n        throw new OperationError(`namedCurve: Must be one of ${this.namedCurves.join(\", \")}`);\r\n    }\r\n}\n\nclass EcdsaProvider extends EllipticProvider {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.name = \"ECDSA\";\r\n        this.hashAlgorithms = [\"SHA-1\", \"SHA-256\", \"SHA-384\", \"SHA-512\"];\r\n        this.usages = {\r\n            privateKey: [\"sign\"],\r\n            publicKey: [\"verify\"],\r\n        };\r\n        this.namedCurves = [\"P-256\", \"P-384\", \"P-521\", \"K-256\"];\r\n    }\r\n    checkAlgorithmParams(algorithm) {\r\n        this.checkRequiredProperty(algorithm, \"hash\");\r\n        this.checkHashAlgorithm(algorithm.hash, this.hashAlgorithms);\r\n    }\r\n}\n\nconst KEY_TYPES = [\"secret\", \"private\", \"public\"];\r\nclass CryptoKey {\r\n    static create(algorithm, type, extractable, usages) {\r\n        const key = new this();\r\n        key.algorithm = algorithm;\r\n        key.type = type;\r\n        key.extractable = extractable;\r\n        key.usages = usages;\r\n        return key;\r\n    }\r\n    static isKeyType(data) {\r\n        return KEY_TYPES.indexOf(data) !== -1;\r\n    }\r\n    get [Symbol.toStringTag]() {\r\n        return \"CryptoKey\";\r\n    }\r\n}\n\nclass EcdhProvider extends EllipticProvider {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.name = \"ECDH\";\r\n        this.usages = {\r\n            privateKey: [\"deriveBits\", \"deriveKey\"],\r\n            publicKey: [],\r\n        };\r\n        this.namedCurves = [\"P-256\", \"P-384\", \"P-521\", \"K-256\"];\r\n    }\r\n    checkAlgorithmParams(algorithm) {\r\n        this.checkRequiredProperty(algorithm, \"public\");\r\n        if (!(algorithm.public instanceof CryptoKey)) {\r\n            throw new TypeError(\"public: Is not a CryptoKey\");\r\n        }\r\n        if (algorithm.public.type !== \"public\") {\r\n            throw new OperationError(\"public: Is not a public key\");\r\n        }\r\n        if (algorithm.public.algorithm.name !== this.name) {\r\n            throw new OperationError(`public: Is not ${this.name} key`);\r\n        }\r\n    }\r\n}\n\nclass EcdhEsProvider extends EcdhProvider {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.name = \"ECDH-ES\";\r\n        this.namedCurves = [\"X25519\", \"X448\"];\r\n    }\r\n}\n\nclass EdDsaProvider extends EllipticProvider {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.name = \"EdDSA\";\r\n        this.usages = {\r\n            privateKey: [\"sign\"],\r\n            publicKey: [\"verify\"],\r\n        };\r\n        this.namedCurves = [\"Ed25519\", \"Ed448\"];\r\n    }\r\n}\n\nlet ObjectIdentifier = class ObjectIdentifier {\r\n    constructor(value) {\r\n        if (value) {\r\n            this.value = value;\r\n        }\r\n    }\r\n};\r\n__decorate([\r\n    AsnProp({ type: AsnPropTypes.ObjectIdentifier })\r\n], ObjectIdentifier.prototype, \"value\", void 0);\r\nObjectIdentifier = __decorate([\r\n    AsnType({ type: AsnTypeTypes.Choice })\r\n], ObjectIdentifier);\n\nclass AlgorithmIdentifier {\r\n    constructor(params) {\r\n        Object.assign(this, params);\r\n    }\r\n}\r\n__decorate([\r\n    AsnProp({\r\n        type: AsnPropTypes.ObjectIdentifier,\r\n    })\r\n], AlgorithmIdentifier.prototype, \"algorithm\", void 0);\r\n__decorate([\r\n    AsnProp({\r\n        type: AsnPropTypes.Any,\r\n        optional: true,\r\n    })\r\n], AlgorithmIdentifier.prototype, \"parameters\", void 0);\n\nclass PrivateKeyInfo {\r\n    constructor() {\r\n        this.version = 0;\r\n        this.privateKeyAlgorithm = new AlgorithmIdentifier();\r\n        this.privateKey = new ArrayBuffer(0);\r\n    }\r\n}\r\n__decorate([\r\n    AsnProp({ type: AsnPropTypes.Integer })\r\n], PrivateKeyInfo.prototype, \"version\", void 0);\r\n__decorate([\r\n    AsnProp({ type: AlgorithmIdentifier })\r\n], PrivateKeyInfo.prototype, \"privateKeyAlgorithm\", void 0);\r\n__decorate([\r\n    AsnProp({ type: AsnPropTypes.OctetString })\r\n], PrivateKeyInfo.prototype, \"privateKey\", void 0);\r\n__decorate([\r\n    AsnProp({ type: AsnPropTypes.Any, optional: true })\r\n], PrivateKeyInfo.prototype, \"attributes\", void 0);\n\nclass PublicKeyInfo {\r\n    constructor() {\r\n        this.publicKeyAlgorithm = new AlgorithmIdentifier();\r\n        this.publicKey = new ArrayBuffer(0);\r\n    }\r\n}\r\n__decorate([\r\n    AsnProp({ type: AlgorithmIdentifier })\r\n], PublicKeyInfo.prototype, \"publicKeyAlgorithm\", void 0);\r\n__decorate([\r\n    AsnProp({ type: AsnPropTypes.BitString })\r\n], PublicKeyInfo.prototype, \"publicKey\", void 0);\n\nconst JsonBase64UrlArrayBufferConverter = {\r\n    fromJSON: (value) => Convert.FromBase64Url(value),\r\n    toJSON: (value) => Convert.ToBase64Url(new Uint8Array(value)),\r\n};\n\nconst AsnIntegerArrayBufferConverter = {\r\n    fromASN: (value) => {\r\n        const valueHex = value.valueBlock.valueHex;\r\n        return !(new Uint8Array(valueHex)[0])\r\n            ? value.valueBlock.valueHex.slice(1)\r\n            : value.valueBlock.valueHex;\r\n    },\r\n    toASN: (value) => {\r\n        const valueHex = new Uint8Array(value)[0] > 127\r\n            ? combine(new Uint8Array([0]).buffer, value)\r\n            : value;\r\n        return new asn1.Integer({ valueHex });\r\n    },\r\n};\n\nvar index$3 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  JsonBase64UrlArrayBufferConverter: JsonBase64UrlArrayBufferConverter,\n  AsnIntegerArrayBufferConverter: AsnIntegerArrayBufferConverter\n});\n\nclass RsaPrivateKey {\r\n    constructor() {\r\n        this.version = 0;\r\n        this.modulus = new ArrayBuffer(0);\r\n        this.publicExponent = new ArrayBuffer(0);\r\n        this.privateExponent = new ArrayBuffer(0);\r\n        this.prime1 = new ArrayBuffer(0);\r\n        this.prime2 = new ArrayBuffer(0);\r\n        this.exponent1 = new ArrayBuffer(0);\r\n        this.exponent2 = new ArrayBuffer(0);\r\n        this.coefficient = new ArrayBuffer(0);\r\n    }\r\n}\r\n__decorate([\r\n    AsnProp({ type: AsnPropTypes.Integer, converter: AsnIntegerConverter })\r\n], RsaPrivateKey.prototype, \"version\", void 0);\r\n__decorate([\r\n    AsnProp({ type: AsnPropTypes.Integer, converter: AsnIntegerArrayBufferConverter }),\r\n    JsonProp({ name: \"n\", converter: JsonBase64UrlArrayBufferConverter })\r\n], RsaPrivateKey.prototype, \"modulus\", void 0);\r\n__decorate([\r\n    AsnProp({ type: AsnPropTypes.Integer, converter: AsnIntegerArrayBufferConverter }),\r\n    JsonProp({ name: \"e\", converter: JsonBase64UrlArrayBufferConverter })\r\n], RsaPrivateKey.prototype, \"publicExponent\", void 0);\r\n__decorate([\r\n    AsnProp({ type: AsnPropTypes.Integer, converter: AsnIntegerArrayBufferConverter }),\r\n    JsonProp({ name: \"d\", converter: JsonBase64UrlArrayBufferConverter })\r\n], RsaPrivateKey.prototype, \"privateExponent\", void 0);\r\n__decorate([\r\n    AsnProp({ type: AsnPropTypes.Integer, converter: AsnIntegerArrayBufferConverter }),\r\n    JsonProp({ name: \"p\", converter: JsonBase64UrlArrayBufferConverter })\r\n], RsaPrivateKey.prototype, \"prime1\", void 0);\r\n__decorate([\r\n    AsnProp({ type: AsnPropTypes.Integer, converter: AsnIntegerArrayBufferConverter }),\r\n    JsonProp({ name: \"q\", converter: JsonBase64UrlArrayBufferConverter })\r\n], RsaPrivateKey.prototype, \"prime2\", void 0);\r\n__decorate([\r\n    AsnProp({ type: AsnPropTypes.Integer, converter: AsnIntegerArrayBufferConverter }),\r\n    JsonProp({ name: \"dp\", converter: JsonBase64UrlArrayBufferConverter })\r\n], RsaPrivateKey.prototype, \"exponent1\", void 0);\r\n__decorate([\r\n    AsnProp({ type: AsnPropTypes.Integer, converter: AsnIntegerArrayBufferConverter }),\r\n    JsonProp({ name: \"dq\", converter: JsonBase64UrlArrayBufferConverter })\r\n], RsaPrivateKey.prototype, \"exponent2\", void 0);\r\n__decorate([\r\n    AsnProp({ type: AsnPropTypes.Integer, converter: AsnIntegerArrayBufferConverter }),\r\n    JsonProp({ name: \"qi\", converter: JsonBase64UrlArrayBufferConverter })\r\n], RsaPrivateKey.prototype, \"coefficient\", void 0);\r\n__decorate([\r\n    AsnProp({ type: AsnPropTypes.Any, optional: true })\r\n], RsaPrivateKey.prototype, \"otherPrimeInfos\", void 0);\n\nclass RsaPublicKey {\r\n    constructor() {\r\n        this.modulus = new ArrayBuffer(0);\r\n        this.publicExponent = new ArrayBuffer(0);\r\n    }\r\n}\r\n__decorate([\r\n    AsnProp({ type: AsnPropTypes.Integer, converter: AsnIntegerArrayBufferConverter }),\r\n    JsonProp({ name: \"n\", converter: JsonBase64UrlArrayBufferConverter })\r\n], RsaPublicKey.prototype, \"modulus\", void 0);\r\n__decorate([\r\n    AsnProp({ type: AsnPropTypes.Integer, converter: AsnIntegerArrayBufferConverter }),\r\n    JsonProp({ name: \"e\", converter: JsonBase64UrlArrayBufferConverter })\r\n], RsaPublicKey.prototype, \"publicExponent\", void 0);\n\nlet EcPublicKey = class EcPublicKey {\r\n    constructor(value) {\r\n        this.value = new ArrayBuffer(0);\r\n        if (value) {\r\n            this.value = value;\r\n        }\r\n    }\r\n    toJSON() {\r\n        let bytes = new Uint8Array(this.value);\r\n        if (bytes[0] !== 0x04) {\r\n            throw new CryptoError(\"Wrong ECPoint. Current version supports only Uncompressed (0x04) point\");\r\n        }\r\n        bytes = new Uint8Array(this.value.slice(1));\r\n        const size = bytes.length / 2;\r\n        const offset = 0;\r\n        const json = {\r\n            x: Convert.ToBase64Url(bytes.buffer.slice(offset, offset + size)),\r\n            y: Convert.ToBase64Url(bytes.buffer.slice(offset + size, offset + size + size)),\r\n        };\r\n        return json;\r\n    }\r\n    fromJSON(json) {\r\n        if (!(\"x\" in json)) {\r\n            throw new Error(\"x: Missing required property\");\r\n        }\r\n        if (!(\"y\" in json)) {\r\n            throw new Error(\"y: Missing required property\");\r\n        }\r\n        const x = Convert.FromBase64Url(json.x);\r\n        const y = Convert.FromBase64Url(json.y);\r\n        const value = combine(new Uint8Array([0x04]).buffer, x, y);\r\n        this.value = new Uint8Array(value).buffer;\r\n        return this;\r\n    }\r\n};\r\n__decorate([\r\n    AsnProp({ type: AsnPropTypes.OctetString })\r\n], EcPublicKey.prototype, \"value\", void 0);\r\nEcPublicKey = __decorate([\r\n    AsnType({ type: AsnTypeTypes.Choice })\r\n], EcPublicKey);\n\nclass EcPrivateKey {\r\n    constructor() {\r\n        this.version = 1;\r\n        this.privateKey = new ArrayBuffer(0);\r\n    }\r\n    fromJSON(json) {\r\n        if (!(\"d\" in json)) {\r\n            throw new Error(\"d: Missing required property\");\r\n        }\r\n        this.privateKey = Convert.FromBase64Url(json.d);\r\n        if (\"x\" in json) {\r\n            const publicKey = new EcPublicKey();\r\n            publicKey.fromJSON(json);\r\n            this.publicKey = AsnSerializer.toASN(publicKey).valueBlock.valueHex;\r\n        }\r\n        return this;\r\n    }\r\n    toJSON() {\r\n        const jwk = {};\r\n        jwk.d = Convert.ToBase64Url(this.privateKey);\r\n        if (this.publicKey) {\r\n            Object.assign(jwk, new EcPublicKey(this.publicKey).toJSON());\r\n        }\r\n        return jwk;\r\n    }\r\n}\r\n__decorate([\r\n    AsnProp({ type: AsnPropTypes.Integer, converter: AsnIntegerConverter })\r\n], EcPrivateKey.prototype, \"version\", void 0);\r\n__decorate([\r\n    AsnProp({ type: AsnPropTypes.OctetString })\r\n], EcPrivateKey.prototype, \"privateKey\", void 0);\r\n__decorate([\r\n    AsnProp({ context: 0, type: AsnPropTypes.Any, optional: true })\r\n], EcPrivateKey.prototype, \"parameters\", void 0);\r\n__decorate([\r\n    AsnProp({ context: 1, type: AsnPropTypes.BitString, optional: true })\r\n], EcPrivateKey.prototype, \"publicKey\", void 0);\n\nconst AsnIntegerWithoutPaddingConverter = {\r\n    fromASN: (value) => {\r\n        const bytes = new Uint8Array(value.valueBlock.valueHex);\r\n        return (bytes[0] === 0)\r\n            ? bytes.buffer.slice(1)\r\n            : bytes.buffer;\r\n    },\r\n    toASN: (value) => {\r\n        const bytes = new Uint8Array(value);\r\n        if (bytes[0] > 127) {\r\n            const newValue = new Uint8Array(bytes.length + 1);\r\n            newValue.set(bytes, 1);\r\n            return new asn1.Integer({ valueHex: newValue.buffer });\r\n        }\r\n        return new asn1.Integer({ valueHex: value });\r\n    },\r\n};\n\nvar index$2 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  AsnIntegerWithoutPaddingConverter: AsnIntegerWithoutPaddingConverter\n});\n\nclass EcUtils {\r\n    static decodePoint(data, pointSize) {\r\n        const view = BufferSourceConverter.toUint8Array(data);\r\n        if ((view.length === 0) || (view[0] !== 4)) {\r\n            throw new Error(\"Only uncompressed point format supported\");\r\n        }\r\n        const n = (view.length - 1) / 2;\r\n        if (n !== (Math.ceil(pointSize / 8))) {\r\n            throw new Error(\"Point does not match field size\");\r\n        }\r\n        const xb = view.slice(1, n + 1);\r\n        const yb = view.slice(n + 1, n + 1 + n);\r\n        return { x: xb, y: yb };\r\n    }\r\n    static encodePoint(point, pointSize) {\r\n        const size = Math.ceil(pointSize / 8);\r\n        if (point.x.byteLength !== size || point.y.byteLength !== size) {\r\n            throw new Error(\"X,Y coordinates don't match point size criteria\");\r\n        }\r\n        const x = BufferSourceConverter.toUint8Array(point.x);\r\n        const y = BufferSourceConverter.toUint8Array(point.y);\r\n        const res = new Uint8Array(size * 2 + 1);\r\n        res[0] = 4;\r\n        res.set(x, 1);\r\n        res.set(y, size + 1);\r\n        return res;\r\n    }\r\n    static getSize(pointSize) {\r\n        return Math.ceil(pointSize / 8);\r\n    }\r\n    static encodeSignature(signature, pointSize) {\r\n        const size = this.getSize(pointSize);\r\n        const r = BufferSourceConverter.toUint8Array(signature.r);\r\n        const s = BufferSourceConverter.toUint8Array(signature.s);\r\n        const res = new Uint8Array(size * 2);\r\n        res.set(this.padStart(r, size));\r\n        res.set(this.padStart(s, size), size);\r\n        return res;\r\n    }\r\n    static decodeSignature(data, pointSize) {\r\n        const size = this.getSize(pointSize);\r\n        const view = BufferSourceConverter.toUint8Array(data);\r\n        if (view.length !== (size * 2)) {\r\n            throw new Error(\"Incorrect size of the signature\");\r\n        }\r\n        const r = view.slice(0, size);\r\n        const s = view.slice(size);\r\n        return {\r\n            r: this.trimStart(r),\r\n            s: this.trimStart(s),\r\n        };\r\n    }\r\n    static trimStart(data) {\r\n        let i = 0;\r\n        while ((i < data.length - 1) && (data[i] === 0)) {\r\n            i++;\r\n        }\r\n        if (i === 0) {\r\n            return data;\r\n        }\r\n        return data.slice(i, data.length);\r\n    }\r\n    static padStart(data, size) {\r\n        if (size === data.length) {\r\n            return data;\r\n        }\r\n        const res = new Uint8Array(size);\r\n        res.set(data, size - data.length);\r\n        return res;\r\n    }\r\n}\n\nclass EcDsaSignature {\r\n    constructor() {\r\n        this.r = new ArrayBuffer(0);\r\n        this.s = new ArrayBuffer(0);\r\n    }\r\n    static fromWebCryptoSignature(value) {\r\n        const pointSize = value.byteLength / 2;\r\n        const point = EcUtils.decodeSignature(value, pointSize * 8);\r\n        const ecSignature = new EcDsaSignature();\r\n        ecSignature.r = BufferSourceConverter.toArrayBuffer(point.r);\r\n        ecSignature.s = BufferSourceConverter.toArrayBuffer(point.s);\r\n        return ecSignature;\r\n    }\r\n    toWebCryptoSignature(pointSize) {\r\n        pointSize !== null && pointSize !== void 0 ? pointSize : (pointSize = Math.max(this.r.byteLength, this.s.byteLength) * 8);\r\n        const signature = EcUtils.encodeSignature(this, pointSize);\r\n        return signature.buffer;\r\n    }\r\n}\r\n__decorate([\r\n    AsnProp({ type: AsnPropTypes.Integer, converter: AsnIntegerWithoutPaddingConverter })\r\n], EcDsaSignature.prototype, \"r\", void 0);\r\n__decorate([\r\n    AsnProp({ type: AsnPropTypes.Integer, converter: AsnIntegerWithoutPaddingConverter })\r\n], EcDsaSignature.prototype, \"s\", void 0);\n\nclass OneAsymmetricKey extends PrivateKeyInfo {\r\n}\r\n__decorate([\r\n    AsnProp({ context: 1, implicit: true, type: AsnPropTypes.BitString, optional: true })\r\n], OneAsymmetricKey.prototype, \"publicKey\", void 0);\n\nlet EdPrivateKey = class EdPrivateKey {\r\n    constructor() {\r\n        this.value = new ArrayBuffer(0);\r\n    }\r\n    fromJSON(json) {\r\n        if (!json.d) {\r\n            throw new Error(\"d: Missing required property\");\r\n        }\r\n        this.value = Convert.FromBase64Url(json.d);\r\n        return this;\r\n    }\r\n    toJSON() {\r\n        const jwk = {\r\n            d: Convert.ToBase64Url(this.value),\r\n        };\r\n        return jwk;\r\n    }\r\n};\r\n__decorate([\r\n    AsnProp({ type: AsnPropTypes.OctetString })\r\n], EdPrivateKey.prototype, \"value\", void 0);\r\nEdPrivateKey = __decorate([\r\n    AsnType({ type: AsnTypeTypes.Choice })\r\n], EdPrivateKey);\n\nlet EdPublicKey = class EdPublicKey {\r\n    constructor(value) {\r\n        this.value = new ArrayBuffer(0);\r\n        if (value) {\r\n            this.value = value;\r\n        }\r\n    }\r\n    toJSON() {\r\n        const json = {\r\n            x: Convert.ToBase64Url(this.value),\r\n        };\r\n        return json;\r\n    }\r\n    fromJSON(json) {\r\n        if (!(\"x\" in json)) {\r\n            throw new Error(\"x: Missing required property\");\r\n        }\r\n        this.value = Convert.FromBase64Url(json.x);\r\n        return this;\r\n    }\r\n};\r\n__decorate([\r\n    AsnProp({ type: AsnPropTypes.BitString })\r\n], EdPublicKey.prototype, \"value\", void 0);\r\nEdPublicKey = __decorate([\r\n    AsnType({ type: AsnTypeTypes.Choice })\r\n], EdPublicKey);\n\nlet CurvePrivateKey = class CurvePrivateKey {\r\n};\r\n__decorate([\r\n    AsnProp({ type: AsnPropTypes.OctetString }),\r\n    JsonProp({ type: JsonPropTypes.String, converter: JsonBase64UrlArrayBufferConverter })\r\n], CurvePrivateKey.prototype, \"d\", void 0);\r\nCurvePrivateKey = __decorate([\r\n    AsnType({ type: AsnTypeTypes.Choice })\r\n], CurvePrivateKey);\n\nconst idSecp256r1 = \"1.2.840.10045.3.1.7\";\r\nconst idEllipticCurve = \"1.3.132.0\";\r\nconst idSecp384r1 = `${idEllipticCurve}.34`;\r\nconst idSecp521r1 = `${idEllipticCurve}.35`;\r\nconst idSecp256k1 = `${idEllipticCurve}.10`;\r\nconst idVersionOne = \"1.3.36.3.3.2.8.1.1\";\r\nconst idBrainpoolP160r1 = `${idVersionOne}.1`;\r\nconst idBrainpoolP160t1 = `${idVersionOne}.2`;\r\nconst idBrainpoolP192r1 = `${idVersionOne}.3`;\r\nconst idBrainpoolP192t1 = `${idVersionOne}.4`;\r\nconst idBrainpoolP224r1 = `${idVersionOne}.5`;\r\nconst idBrainpoolP224t1 = `${idVersionOne}.6`;\r\nconst idBrainpoolP256r1 = `${idVersionOne}.7`;\r\nconst idBrainpoolP256t1 = `${idVersionOne}.8`;\r\nconst idBrainpoolP320r1 = `${idVersionOne}.9`;\r\nconst idBrainpoolP320t1 = `${idVersionOne}.10`;\r\nconst idBrainpoolP384r1 = `${idVersionOne}.11`;\r\nconst idBrainpoolP384t1 = `${idVersionOne}.12`;\r\nconst idBrainpoolP512r1 = `${idVersionOne}.13`;\r\nconst idBrainpoolP512t1 = `${idVersionOne}.14`;\r\nconst idX25519 = \"1.3.101.110\";\r\nconst idX448 = \"1.3.101.111\";\r\nconst idEd25519 = \"1.3.101.112\";\r\nconst idEd448 = \"1.3.101.113\";\n\nvar index$1 = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  converters: index$2,\n  get ObjectIdentifier () { return ObjectIdentifier; },\n  AlgorithmIdentifier: AlgorithmIdentifier,\n  PrivateKeyInfo: PrivateKeyInfo,\n  PublicKeyInfo: PublicKeyInfo,\n  RsaPrivateKey: RsaPrivateKey,\n  RsaPublicKey: RsaPublicKey,\n  EcPrivateKey: EcPrivateKey,\n  get EcPublicKey () { return EcPublicKey; },\n  EcDsaSignature: EcDsaSignature,\n  OneAsymmetricKey: OneAsymmetricKey,\n  get EdPrivateKey () { return EdPrivateKey; },\n  get EdPublicKey () { return EdPublicKey; },\n  get CurvePrivateKey () { return CurvePrivateKey; },\n  idSecp256r1: idSecp256r1,\n  idEllipticCurve: idEllipticCurve,\n  idSecp384r1: idSecp384r1,\n  idSecp521r1: idSecp521r1,\n  idSecp256k1: idSecp256k1,\n  idVersionOne: idVersionOne,\n  idBrainpoolP160r1: idBrainpoolP160r1,\n  idBrainpoolP160t1: idBrainpoolP160t1,\n  idBrainpoolP192r1: idBrainpoolP192r1,\n  idBrainpoolP192t1: idBrainpoolP192t1,\n  idBrainpoolP224r1: idBrainpoolP224r1,\n  idBrainpoolP224t1: idBrainpoolP224t1,\n  idBrainpoolP256r1: idBrainpoolP256r1,\n  idBrainpoolP256t1: idBrainpoolP256t1,\n  idBrainpoolP320r1: idBrainpoolP320r1,\n  idBrainpoolP320t1: idBrainpoolP320t1,\n  idBrainpoolP384r1: idBrainpoolP384r1,\n  idBrainpoolP384t1: idBrainpoolP384t1,\n  idBrainpoolP512r1: idBrainpoolP512r1,\n  idBrainpoolP512t1: idBrainpoolP512t1,\n  idX25519: idX25519,\n  idX448: idX448,\n  idEd25519: idEd25519,\n  idEd448: idEd448\n});\n\nclass EcCurves {\r\n    constructor() { }\r\n    static register(item) {\r\n        const oid = new ObjectIdentifier();\r\n        oid.value = item.id;\r\n        const raw = AsnConvert.serialize(oid);\r\n        this.items.push({\r\n            ...item,\r\n            raw,\r\n        });\r\n        this.names.push(item.name);\r\n    }\r\n    static find(nameOrId) {\r\n        nameOrId = nameOrId.toUpperCase();\r\n        for (const item of this.items) {\r\n            if (item.name.toUpperCase() === nameOrId || item.id.toUpperCase() === nameOrId) {\r\n                return item;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    static get(nameOrId) {\r\n        const res = this.find(nameOrId);\r\n        if (!res) {\r\n            throw new Error(`Unsupported EC named curve '${nameOrId}'`);\r\n        }\r\n        return res;\r\n    }\r\n}\r\nEcCurves.items = [];\r\nEcCurves.names = [];\r\nEcCurves.register({ name: \"P-256\", id: idSecp256r1, size: 256 });\r\nEcCurves.register({ name: \"P-384\", id: idSecp384r1, size: 384 });\r\nEcCurves.register({ name: \"P-521\", id: idSecp521r1, size: 521 });\r\nEcCurves.register({ name: \"K-256\", id: idSecp256k1, size: 256 });\r\nEcCurves.register({ name: \"brainpoolP160r1\", id: idBrainpoolP160r1, size: 160 });\r\nEcCurves.register({ name: \"brainpoolP160t1\", id: idBrainpoolP160t1, size: 160 });\r\nEcCurves.register({ name: \"brainpoolP192r1\", id: idBrainpoolP192r1, size: 192 });\r\nEcCurves.register({ name: \"brainpoolP192t1\", id: idBrainpoolP192t1, size: 192 });\r\nEcCurves.register({ name: \"brainpoolP224r1\", id: idBrainpoolP224r1, size: 224 });\r\nEcCurves.register({ name: \"brainpoolP224t1\", id: idBrainpoolP224t1, size: 224 });\r\nEcCurves.register({ name: \"brainpoolP256r1\", id: idBrainpoolP256r1, size: 256 });\r\nEcCurves.register({ name: \"brainpoolP256t1\", id: idBrainpoolP256t1, size: 256 });\r\nEcCurves.register({ name: \"brainpoolP320r1\", id: idBrainpoolP320r1, size: 320 });\r\nEcCurves.register({ name: \"brainpoolP320t1\", id: idBrainpoolP320t1, size: 320 });\r\nEcCurves.register({ name: \"brainpoolP384r1\", id: idBrainpoolP384r1, size: 384 });\r\nEcCurves.register({ name: \"brainpoolP384t1\", id: idBrainpoolP384t1, size: 384 });\r\nEcCurves.register({ name: \"brainpoolP512r1\", id: idBrainpoolP512r1, size: 512 });\r\nEcCurves.register({ name: \"brainpoolP512t1\", id: idBrainpoolP512t1, size: 512 });\n\nclass HmacProvider extends ProviderCrypto {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.name = \"HMAC\";\r\n        this.hashAlgorithms = [\"SHA-1\", \"SHA-256\", \"SHA-384\", \"SHA-512\"];\r\n        this.usages = [\"sign\", \"verify\"];\r\n    }\r\n    getDefaultLength(algName) {\r\n        switch (algName.toUpperCase()) {\r\n            case \"SHA-1\":\r\n            case \"SHA-256\":\r\n            case \"SHA-384\":\r\n            case \"SHA-512\":\r\n                return 512;\r\n            default:\r\n                throw new Error(`Unknown algorithm name '${algName}'`);\r\n        }\r\n    }\r\n    checkGenerateKeyParams(algorithm) {\r\n        this.checkRequiredProperty(algorithm, \"hash\");\r\n        this.checkHashAlgorithm(algorithm.hash, this.hashAlgorithms);\r\n        if (\"length\" in algorithm) {\r\n            if (typeof algorithm.length !== \"number\") {\r\n                throw new TypeError(\"length: Is not a Number\");\r\n            }\r\n            if (algorithm.length < 1) {\r\n                throw new RangeError(\"length: Number is out of range\");\r\n            }\r\n        }\r\n    }\r\n    checkImportParams(algorithm) {\r\n        this.checkRequiredProperty(algorithm, \"hash\");\r\n        this.checkHashAlgorithm(algorithm.hash, this.hashAlgorithms);\r\n    }\r\n}\n\nclass Pbkdf2Provider extends ProviderCrypto {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.name = \"PBKDF2\";\r\n        this.hashAlgorithms = [\"SHA-1\", \"SHA-256\", \"SHA-384\", \"SHA-512\"];\r\n        this.usages = [\"deriveBits\", \"deriveKey\"];\r\n    }\r\n    checkAlgorithmParams(algorithm) {\r\n        this.checkRequiredProperty(algorithm, \"hash\");\r\n        this.checkHashAlgorithm(algorithm.hash, this.hashAlgorithms);\r\n        this.checkRequiredProperty(algorithm, \"salt\");\r\n        if (!(algorithm.salt instanceof ArrayBuffer || ArrayBuffer.isView(algorithm.salt))) {\r\n            throw new TypeError(\"salt: Is not of type '(ArrayBuffer or ArrayBufferView)'\");\r\n        }\r\n        this.checkRequiredProperty(algorithm, \"iterations\");\r\n        if (typeof algorithm.iterations !== \"number\") {\r\n            throw new TypeError(\"iterations: Is not a Number\");\r\n        }\r\n        if (algorithm.iterations < 1) {\r\n            throw new TypeError(\"iterations: Is less than 1\");\r\n        }\r\n    }\r\n    checkImportKey(format, keyData, algorithm, extractable, keyUsages, ...args) {\r\n        super.checkImportKey(format, keyData, algorithm, extractable, keyUsages);\r\n        if (extractable) {\r\n            throw new SyntaxError(\"extractable: Must be 'false'\");\r\n        }\r\n    }\r\n}\n\nclass HkdfProvider extends ProviderCrypto {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.name = \"HKDF\";\r\n        this.hashAlgorithms = [\"SHA-1\", \"SHA-256\", \"SHA-384\", \"SHA-512\"];\r\n        this.usages = [\"deriveKey\", \"deriveBits\"];\r\n    }\r\n    checkAlgorithmParams(algorithm) {\r\n        this.checkRequiredProperty(algorithm, \"hash\");\r\n        this.checkHashAlgorithm(algorithm.hash, this.hashAlgorithms);\r\n        this.checkRequiredProperty(algorithm, \"salt\");\r\n        if (!BufferSourceConverter.isBufferSource(algorithm.salt)) {\r\n            throw new TypeError(\"salt: Is not of type '(ArrayBuffer or ArrayBufferView)'\");\r\n        }\r\n        this.checkRequiredProperty(algorithm, \"info\");\r\n        if (!BufferSourceConverter.isBufferSource(algorithm.info)) {\r\n            throw new TypeError(\"salt: Is not of type '(ArrayBuffer or ArrayBufferView)'\");\r\n        }\r\n    }\r\n    checkImportKey(format, keyData, algorithm, extractable, keyUsages, ...args) {\r\n        super.checkImportKey(format, keyData, algorithm, extractable, keyUsages);\r\n        if (extractable) {\r\n            throw new SyntaxError(\"extractable: Must be 'false'\");\r\n        }\r\n    }\r\n}\n\nclass ShakeProvider extends ProviderCrypto {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.usages = [];\r\n        this.defaultLength = 0;\r\n    }\r\n    digest(...args) {\r\n        args[0] = { length: this.defaultLength, ...args[0] };\r\n        return super.digest.apply(this, args);\r\n    }\r\n    checkDigest(algorithm, data) {\r\n        super.checkDigest(algorithm, data);\r\n        const length = algorithm.length || 0;\r\n        if (typeof length !== \"number\") {\r\n            throw new TypeError(\"length: Is not a Number\");\r\n        }\r\n        if (length < 0) {\r\n            throw new TypeError(\"length: Is negative\");\r\n        }\r\n    }\r\n}\n\nclass Shake128Provider extends ShakeProvider {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.name = \"shake128\";\r\n        this.defaultLength = 16;\r\n    }\r\n}\n\nclass Shake256Provider extends ShakeProvider {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.name = \"shake256\";\r\n        this.defaultLength = 32;\r\n    }\r\n}\n\nclass Crypto {\r\n    get [Symbol.toStringTag]() {\r\n        return \"Crypto\";\r\n    }\r\n    randomUUID() {\r\n        const b = this.getRandomValues(new Uint8Array(16));\r\n        b[6] = (b[6] & 0x0f) | 0x40;\r\n        b[8] = (b[8] & 0x3f) | 0x80;\r\n        const uuid = Convert.ToHex(b).toLowerCase();\r\n        return `${uuid.substring(0, 8)}-${uuid.substring(8, 12)}-${uuid.substring(12, 16)}-${uuid.substring(16)}`;\r\n    }\r\n}\n\nclass ProviderStorage {\r\n    constructor() {\r\n        this.items = {};\r\n    }\r\n    get(algorithmName) {\r\n        return this.items[algorithmName.toLowerCase()] || null;\r\n    }\r\n    set(provider) {\r\n        this.items[provider.name.toLowerCase()] = provider;\r\n    }\r\n    removeAt(algorithmName) {\r\n        const provider = this.get(algorithmName.toLowerCase());\r\n        if (provider) {\r\n            delete this.items[algorithmName];\r\n        }\r\n        return provider;\r\n    }\r\n    has(name) {\r\n        return !!this.get(name);\r\n    }\r\n    get length() {\r\n        return Object.keys(this.items).length;\r\n    }\r\n    get algorithms() {\r\n        const algorithms = [];\r\n        for (const key in this.items) {\r\n            const provider = this.items[key];\r\n            algorithms.push(provider.name);\r\n        }\r\n        return algorithms.sort();\r\n    }\r\n}\n\nclass SubtleCrypto {\r\n    constructor() {\r\n        this.providers = new ProviderStorage();\r\n    }\r\n    static isHashedAlgorithm(data) {\r\n        return data\r\n            && typeof data === \"object\"\r\n            && \"name\" in data\r\n            && \"hash\" in data\r\n            ? true\r\n            : false;\r\n    }\r\n    get [Symbol.toStringTag]() {\r\n        return \"SubtleCrypto\";\r\n    }\r\n    async digest(...args) {\r\n        this.checkRequiredArguments(args, 2, \"digest\");\r\n        const [algorithm, data, ...params] = args;\r\n        const preparedAlgorithm = this.prepareAlgorithm(algorithm);\r\n        const preparedData = BufferSourceConverter.toArrayBuffer(data);\r\n        const provider = this.getProvider(preparedAlgorithm.name);\r\n        const result = await provider.digest(preparedAlgorithm, preparedData, ...params);\r\n        return result;\r\n    }\r\n    async generateKey(...args) {\r\n        this.checkRequiredArguments(args, 3, \"generateKey\");\r\n        const [algorithm, extractable, keyUsages, ...params] = args;\r\n        const preparedAlgorithm = this.prepareAlgorithm(algorithm);\r\n        const provider = this.getProvider(preparedAlgorithm.name);\r\n        const result = await provider.generateKey({ ...preparedAlgorithm, name: provider.name }, extractable, keyUsages, ...params);\r\n        return result;\r\n    }\r\n    async sign(...args) {\r\n        this.checkRequiredArguments(args, 3, \"sign\");\r\n        const [algorithm, key, data, ...params] = args;\r\n        this.checkCryptoKey(key);\r\n        const preparedAlgorithm = this.prepareAlgorithm(algorithm);\r\n        const preparedData = BufferSourceConverter.toArrayBuffer(data);\r\n        const provider = this.getProvider(preparedAlgorithm.name);\r\n        const result = await provider.sign({ ...preparedAlgorithm, name: provider.name }, key, preparedData, ...params);\r\n        return result;\r\n    }\r\n    async verify(...args) {\r\n        this.checkRequiredArguments(args, 4, \"verify\");\r\n        const [algorithm, key, signature, data, ...params] = args;\r\n        this.checkCryptoKey(key);\r\n        const preparedAlgorithm = this.prepareAlgorithm(algorithm);\r\n        const preparedData = BufferSourceConverter.toArrayBuffer(data);\r\n        const preparedSignature = BufferSourceConverter.toArrayBuffer(signature);\r\n        const provider = this.getProvider(preparedAlgorithm.name);\r\n        const result = await provider.verify({ ...preparedAlgorithm, name: provider.name }, key, preparedSignature, preparedData, ...params);\r\n        return result;\r\n    }\r\n    async encrypt(...args) {\r\n        this.checkRequiredArguments(args, 3, \"encrypt\");\r\n        const [algorithm, key, data, ...params] = args;\r\n        this.checkCryptoKey(key);\r\n        const preparedAlgorithm = this.prepareAlgorithm(algorithm);\r\n        const preparedData = BufferSourceConverter.toArrayBuffer(data);\r\n        const provider = this.getProvider(preparedAlgorithm.name);\r\n        const result = await provider.encrypt({ ...preparedAlgorithm, name: provider.name }, key, preparedData, { keyUsage: true }, ...params);\r\n        return result;\r\n    }\r\n    async decrypt(...args) {\r\n        this.checkRequiredArguments(args, 3, \"decrypt\");\r\n        const [algorithm, key, data, ...params] = args;\r\n        this.checkCryptoKey(key);\r\n        const preparedAlgorithm = this.prepareAlgorithm(algorithm);\r\n        const preparedData = BufferSourceConverter.toArrayBuffer(data);\r\n        const provider = this.getProvider(preparedAlgorithm.name);\r\n        const result = await provider.decrypt({ ...preparedAlgorithm, name: provider.name }, key, preparedData, { keyUsage: true }, ...params);\r\n        return result;\r\n    }\r\n    async deriveBits(...args) {\r\n        this.checkRequiredArguments(args, 3, \"deriveBits\");\r\n        const [algorithm, baseKey, length, ...params] = args;\r\n        this.checkCryptoKey(baseKey);\r\n        const preparedAlgorithm = this.prepareAlgorithm(algorithm);\r\n        const provider = this.getProvider(preparedAlgorithm.name);\r\n        const result = await provider.deriveBits({ ...preparedAlgorithm, name: provider.name }, baseKey, length, { keyUsage: true }, ...params);\r\n        return result;\r\n    }\r\n    async deriveKey(...args) {\r\n        this.checkRequiredArguments(args, 5, \"deriveKey\");\r\n        const [algorithm, baseKey, derivedKeyType, extractable, keyUsages, ...params] = args;\r\n        const preparedDerivedKeyType = this.prepareAlgorithm(derivedKeyType);\r\n        const importProvider = this.getProvider(preparedDerivedKeyType.name);\r\n        importProvider.checkDerivedKeyParams(preparedDerivedKeyType);\r\n        const preparedAlgorithm = this.prepareAlgorithm(algorithm);\r\n        const provider = this.getProvider(preparedAlgorithm.name);\r\n        provider.checkCryptoKey(baseKey, \"deriveKey\");\r\n        const derivedBits = await provider.deriveBits({ ...preparedAlgorithm, name: provider.name }, baseKey, derivedKeyType.length || 512, { keyUsage: false }, ...params);\r\n        return this.importKey(\"raw\", derivedBits, derivedKeyType, extractable, keyUsages, ...params);\r\n    }\r\n    async exportKey(...args) {\r\n        this.checkRequiredArguments(args, 2, \"exportKey\");\r\n        const [format, key, ...params] = args;\r\n        this.checkCryptoKey(key);\r\n        const provider = this.getProvider(key.algorithm.name);\r\n        const result = await provider.exportKey(format, key, ...params);\r\n        return result;\r\n    }\r\n    async importKey(...args) {\r\n        this.checkRequiredArguments(args, 5, \"importKey\");\r\n        const [format, keyData, algorithm, extractable, keyUsages, ...params] = args;\r\n        const preparedAlgorithm = this.prepareAlgorithm(algorithm);\r\n        const provider = this.getProvider(preparedAlgorithm.name);\r\n        if ([\"pkcs8\", \"spki\", \"raw\"].indexOf(format) !== -1) {\r\n            const preparedData = BufferSourceConverter.toArrayBuffer(keyData);\r\n            return provider.importKey(format, preparedData, { ...preparedAlgorithm, name: provider.name }, extractable, keyUsages, ...params);\r\n        }\r\n        else {\r\n            if (!keyData.kty) {\r\n                throw new TypeError(\"keyData: Is not JSON\");\r\n            }\r\n        }\r\n        return provider.importKey(format, keyData, { ...preparedAlgorithm, name: provider.name }, extractable, keyUsages, ...params);\r\n    }\r\n    async wrapKey(format, key, wrappingKey, wrapAlgorithm, ...args) {\r\n        let keyData = await this.exportKey(format, key, ...args);\r\n        if (format === \"jwk\") {\r\n            const json = JSON.stringify(keyData);\r\n            keyData = Convert.FromUtf8String(json);\r\n        }\r\n        const preparedAlgorithm = this.prepareAlgorithm(wrapAlgorithm);\r\n        const preparedData = BufferSourceConverter.toArrayBuffer(keyData);\r\n        const provider = this.getProvider(preparedAlgorithm.name);\r\n        return provider.encrypt({ ...preparedAlgorithm, name: provider.name }, wrappingKey, preparedData, { keyUsage: false }, ...args);\r\n    }\r\n    async unwrapKey(format, wrappedKey, unwrappingKey, unwrapAlgorithm, unwrappedKeyAlgorithm, extractable, keyUsages, ...args) {\r\n        const preparedAlgorithm = this.prepareAlgorithm(unwrapAlgorithm);\r\n        const preparedData = BufferSourceConverter.toArrayBuffer(wrappedKey);\r\n        const provider = this.getProvider(preparedAlgorithm.name);\r\n        let keyData = await provider.decrypt({ ...preparedAlgorithm, name: provider.name }, unwrappingKey, preparedData, { keyUsage: false }, ...args);\r\n        if (format === \"jwk\") {\r\n            try {\r\n                keyData = JSON.parse(Convert.ToUtf8String(keyData));\r\n            }\r\n            catch (e) {\r\n                const error = new TypeError(\"wrappedKey: Is not a JSON\");\r\n                error.internal = e;\r\n                throw error;\r\n            }\r\n        }\r\n        return this.importKey(format, keyData, unwrappedKeyAlgorithm, extractable, keyUsages, ...args);\r\n    }\r\n    checkRequiredArguments(args, size, methodName) {\r\n        if (args.length < size) {\r\n            throw new TypeError(`Failed to execute '${methodName}' on 'SubtleCrypto': ${size} arguments required, but only ${args.length} present`);\r\n        }\r\n    }\r\n    prepareAlgorithm(algorithm) {\r\n        if (typeof algorithm === \"string\") {\r\n            return {\r\n                name: algorithm,\r\n            };\r\n        }\r\n        if (SubtleCrypto.isHashedAlgorithm(algorithm)) {\r\n            const preparedAlgorithm = { ...algorithm };\r\n            preparedAlgorithm.hash = this.prepareAlgorithm(algorithm.hash);\r\n            return preparedAlgorithm;\r\n        }\r\n        return { ...algorithm };\r\n    }\r\n    getProvider(name) {\r\n        const provider = this.providers.get(name);\r\n        if (!provider) {\r\n            throw new AlgorithmError(\"Unrecognized name\");\r\n        }\r\n        return provider;\r\n    }\r\n    checkCryptoKey(key) {\r\n        if (!(key instanceof CryptoKey)) {\r\n            throw new TypeError(`Key is not of type 'CryptoKey'`);\r\n        }\r\n    }\r\n}\n\nvar index = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  converters: index$3\n});\n\nconst REQUIRED_FIELDS = [\"crv\", \"e\", \"k\", \"kty\", \"n\", \"x\", \"y\"];\r\nclass JwkUtils {\r\n    static async thumbprint(hash, jwk, crypto) {\r\n        const data = this.format(jwk, true);\r\n        return crypto.subtle.digest(hash, Convert.FromBinary(JSON.stringify(data)));\r\n    }\r\n    static format(jwk, remove = false) {\r\n        let res = Object.entries(jwk);\r\n        if (remove) {\r\n            res = res.filter(o => REQUIRED_FIELDS.includes(o[0]));\r\n        }\r\n        res = res.sort(([keyA], [keyB]) => keyA > keyB ? 1 : keyA < keyB ? -1 : 0);\r\n        return Object.fromEntries(res);\r\n    }\r\n}\n\nexport { AesCbcProvider, AesCmacProvider, AesCtrProvider, AesEcbProvider, AesGcmProvider, AesKwProvider, AesProvider, AlgorithmError, Crypto, CryptoError, CryptoKey, DesProvider, EcCurves, EcUtils, EcdhEsProvider, EcdhProvider, EcdsaProvider, EdDsaProvider, EllipticProvider, HkdfProvider, HmacProvider, JwkUtils, OperationError, Pbkdf2Provider, PemConverter, ProviderCrypto, ProviderStorage, RequiredPropertyError, RsaOaepProvider, RsaProvider, RsaPssProvider, RsaSsaProvider, Shake128Provider, Shake256Provider, ShakeProvider, SubtleCrypto, UnsupportedOperationError, index$1 as asn1, isJWK, index as json };\n","/*!\n Copyright (c) Peculiar Ventures, LLC\n*/\n\nimport * as core from 'webcrypto-core';\nimport { BufferSourceConverter as BufferSourceConverter$1 } from 'webcrypto-core';\nexport { CryptoKey } from 'webcrypto-core';\nimport * as crypto from 'crypto';\nimport crypto__default from 'crypto';\nimport * as process from 'process';\nimport { __decorate } from 'tslib';\nimport { JsonProp, JsonPropTypes, JsonSerializer, JsonParser } from '@peculiar/json-schema';\nimport { Convert, BufferSourceConverter } from 'pvtsutils';\nimport { AsnParser, AsnSerializer } from '@peculiar/asn1-schema';\n\nconst JsonBase64UrlConverter = {\r\n    fromJSON: (value) => Buffer.from(Convert.FromBase64Url(value)),\r\n    toJSON: (value) => Convert.ToBase64Url(value),\r\n};\n\nclass CryptoKey extends core.CryptoKey {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.data = Buffer.alloc(0);\r\n        this.algorithm = { name: \"\" };\r\n        this.extractable = false;\r\n        this.type = \"secret\";\r\n        this.usages = [];\r\n        this.kty = \"oct\";\r\n        this.alg = \"\";\r\n    }\r\n}\r\n__decorate([\r\n    JsonProp({ name: \"ext\", type: JsonPropTypes.Boolean, optional: true })\r\n], CryptoKey.prototype, \"extractable\", void 0);\r\n__decorate([\r\n    JsonProp({ name: \"key_ops\", type: JsonPropTypes.String, repeated: true, optional: true })\r\n], CryptoKey.prototype, \"usages\", void 0);\r\n__decorate([\r\n    JsonProp({ type: JsonPropTypes.String })\r\n], CryptoKey.prototype, \"kty\", void 0);\r\n__decorate([\r\n    JsonProp({ type: JsonPropTypes.String, optional: true })\r\n], CryptoKey.prototype, \"alg\", void 0);\n\nclass SymmetricKey extends CryptoKey {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.kty = \"oct\";\r\n        this.type = \"secret\";\r\n    }\r\n}\n\nclass AsymmetricKey extends CryptoKey {\r\n}\n\nclass AesCryptoKey extends SymmetricKey {\r\n    get alg() {\r\n        switch (this.algorithm.name.toUpperCase()) {\r\n            case \"AES-CBC\":\r\n                return `A${this.algorithm.length}CBC`;\r\n            case \"AES-CTR\":\r\n                return `A${this.algorithm.length}CTR`;\r\n            case \"AES-GCM\":\r\n                return `A${this.algorithm.length}GCM`;\r\n            case \"AES-KW\":\r\n                return `A${this.algorithm.length}KW`;\r\n            case \"AES-CMAC\":\r\n                return `A${this.algorithm.length}CMAC`;\r\n            case \"AES-ECB\":\r\n                return `A${this.algorithm.length}ECB`;\r\n            default:\r\n                throw new core.AlgorithmError(\"Unsupported algorithm name\");\r\n        }\r\n    }\r\n    set alg(value) {\r\n    }\r\n}\r\n__decorate([\r\n    JsonProp({ name: \"k\", converter: JsonBase64UrlConverter })\r\n], AesCryptoKey.prototype, \"data\", void 0);\n\nconst keyStorage = new WeakMap();\r\nfunction getCryptoKey(key) {\r\n    const res = keyStorage.get(key);\r\n    if (!res) {\r\n        throw new core.OperationError(\"Cannot get CryptoKey from secure storage\");\r\n    }\r\n    return res;\r\n}\r\nfunction setCryptoKey(value) {\r\n    const key = core.CryptoKey.create(value.algorithm, value.type, value.extractable, value.usages);\r\n    Object.freeze(key);\r\n    keyStorage.set(key, value);\r\n    return key;\r\n}\n\nclass AesCrypto {\r\n    static async generateKey(algorithm, extractable, keyUsages) {\r\n        const key = new AesCryptoKey();\r\n        key.algorithm = algorithm;\r\n        key.extractable = extractable;\r\n        key.usages = keyUsages;\r\n        key.data = crypto__default.randomBytes(algorithm.length >> 3);\r\n        return key;\r\n    }\r\n    static async exportKey(format, key) {\r\n        if (!(key instanceof AesCryptoKey)) {\r\n            throw new Error(\"key: Is not AesCryptoKey\");\r\n        }\r\n        switch (format.toLowerCase()) {\r\n            case \"jwk\":\r\n                return JsonSerializer.toJSON(key);\r\n            case \"raw\":\r\n                return new Uint8Array(key.data).buffer;\r\n            default:\r\n                throw new core.OperationError(\"format: Must be 'jwk' or 'raw'\");\r\n        }\r\n    }\r\n    static async importKey(format, keyData, algorithm, extractable, keyUsages) {\r\n        let key;\r\n        switch (format.toLowerCase()) {\r\n            case \"jwk\":\r\n                key = JsonParser.fromJSON(keyData, { targetSchema: AesCryptoKey });\r\n                break;\r\n            case \"raw\":\r\n                key = new AesCryptoKey();\r\n                key.data = Buffer.from(keyData);\r\n                break;\r\n            default:\r\n                throw new core.OperationError(\"format: Must be 'jwk' or 'raw'\");\r\n        }\r\n        key.algorithm = algorithm;\r\n        key.algorithm.length = key.data.length << 3;\r\n        key.extractable = extractable;\r\n        key.usages = keyUsages;\r\n        switch (key.algorithm.length) {\r\n            case 128:\r\n            case 192:\r\n            case 256:\r\n                break;\r\n            default:\r\n                throw new core.OperationError(\"keyData: Is wrong key length\");\r\n        }\r\n        return key;\r\n    }\r\n    static async encrypt(algorithm, key, data) {\r\n        switch (algorithm.name.toUpperCase()) {\r\n            case \"AES-CBC\":\r\n                return this.encryptAesCBC(algorithm, key, Buffer.from(data));\r\n            case \"AES-CTR\":\r\n                return this.encryptAesCTR(algorithm, key, Buffer.from(data));\r\n            case \"AES-GCM\":\r\n                return this.encryptAesGCM(algorithm, key, Buffer.from(data));\r\n            case \"AES-KW\":\r\n                return this.encryptAesKW(algorithm, key, Buffer.from(data));\r\n            case \"AES-ECB\":\r\n                return this.encryptAesECB(algorithm, key, Buffer.from(data));\r\n            default:\r\n                throw new core.OperationError(\"algorithm: Is not recognized\");\r\n        }\r\n    }\r\n    static async decrypt(algorithm, key, data) {\r\n        if (!(key instanceof AesCryptoKey)) {\r\n            throw new Error(\"key: Is not AesCryptoKey\");\r\n        }\r\n        switch (algorithm.name.toUpperCase()) {\r\n            case \"AES-CBC\":\r\n                return this.decryptAesCBC(algorithm, key, Buffer.from(data));\r\n            case \"AES-CTR\":\r\n                return this.decryptAesCTR(algorithm, key, Buffer.from(data));\r\n            case \"AES-GCM\":\r\n                return this.decryptAesGCM(algorithm, key, Buffer.from(data));\r\n            case \"AES-KW\":\r\n                return this.decryptAesKW(algorithm, key, Buffer.from(data));\r\n            case \"AES-ECB\":\r\n                return this.decryptAesECB(algorithm, key, Buffer.from(data));\r\n            default:\r\n                throw new core.OperationError(\"algorithm: Is not recognized\");\r\n        }\r\n    }\r\n    static async encryptAesCBC(algorithm, key, data) {\r\n        const cipher = crypto__default.createCipheriv(`aes-${key.algorithm.length}-cbc`, key.data, new Uint8Array(algorithm.iv));\r\n        let enc = cipher.update(data);\r\n        enc = Buffer.concat([enc, cipher.final()]);\r\n        const res = new Uint8Array(enc).buffer;\r\n        return res;\r\n    }\r\n    static async decryptAesCBC(algorithm, key, data) {\r\n        const decipher = crypto__default.createDecipheriv(`aes-${key.algorithm.length}-cbc`, key.data, new Uint8Array(algorithm.iv));\r\n        let dec = decipher.update(data);\r\n        dec = Buffer.concat([dec, decipher.final()]);\r\n        return new Uint8Array(dec).buffer;\r\n    }\r\n    static async encryptAesCTR(algorithm, key, data) {\r\n        const cipher = crypto__default.createCipheriv(`aes-${key.algorithm.length}-ctr`, key.data, Buffer.from(algorithm.counter));\r\n        let enc = cipher.update(data);\r\n        enc = Buffer.concat([enc, cipher.final()]);\r\n        const res = new Uint8Array(enc).buffer;\r\n        return res;\r\n    }\r\n    static async decryptAesCTR(algorithm, key, data) {\r\n        const decipher = crypto__default.createDecipheriv(`aes-${key.algorithm.length}-ctr`, key.data, new Uint8Array(algorithm.counter));\r\n        let dec = decipher.update(data);\r\n        dec = Buffer.concat([dec, decipher.final()]);\r\n        return new Uint8Array(dec).buffer;\r\n    }\r\n    static async encryptAesGCM(algorithm, key, data) {\r\n        const cipher = crypto__default.createCipheriv(`aes-${key.algorithm.length}-gcm`, key.data, Buffer.from(algorithm.iv), {\r\n            authTagLength: (algorithm.tagLength || 128) >> 3,\r\n        });\r\n        if (algorithm.additionalData) {\r\n            cipher.setAAD(Buffer.from(algorithm.additionalData));\r\n        }\r\n        let enc = cipher.update(data);\r\n        enc = Buffer.concat([enc, cipher.final(), cipher.getAuthTag()]);\r\n        const res = new Uint8Array(enc).buffer;\r\n        return res;\r\n    }\r\n    static async decryptAesGCM(algorithm, key, data) {\r\n        const decipher = crypto__default.createDecipheriv(`aes-${key.algorithm.length}-gcm`, key.data, new Uint8Array(algorithm.iv));\r\n        const tagLength = (algorithm.tagLength || 128) >> 3;\r\n        const enc = data.slice(0, data.length - tagLength);\r\n        const tag = data.slice(data.length - tagLength);\r\n        if (algorithm.additionalData) {\r\n            decipher.setAAD(Buffer.from(algorithm.additionalData));\r\n        }\r\n        decipher.setAuthTag(tag);\r\n        let dec = decipher.update(enc);\r\n        dec = Buffer.concat([dec, decipher.final()]);\r\n        return new Uint8Array(dec).buffer;\r\n    }\r\n    static async encryptAesKW(algorithm, key, data) {\r\n        const cipher = crypto__default.createCipheriv(`id-aes${key.algorithm.length}-wrap`, key.data, this.AES_KW_IV);\r\n        let enc = cipher.update(data);\r\n        enc = Buffer.concat([enc, cipher.final()]);\r\n        return new Uint8Array(enc).buffer;\r\n    }\r\n    static async decryptAesKW(algorithm, key, data) {\r\n        const decipher = crypto__default.createDecipheriv(`id-aes${key.algorithm.length}-wrap`, key.data, this.AES_KW_IV);\r\n        let dec = decipher.update(data);\r\n        dec = Buffer.concat([dec, decipher.final()]);\r\n        return new Uint8Array(dec).buffer;\r\n    }\r\n    static async encryptAesECB(algorithm, key, data) {\r\n        const cipher = crypto__default.createCipheriv(`aes-${key.algorithm.length}-ecb`, key.data, new Uint8Array(0));\r\n        let enc = cipher.update(data);\r\n        enc = Buffer.concat([enc, cipher.final()]);\r\n        const res = new Uint8Array(enc).buffer;\r\n        return res;\r\n    }\r\n    static async decryptAesECB(algorithm, key, data) {\r\n        const decipher = crypto__default.createDecipheriv(`aes-${key.algorithm.length}-ecb`, key.data, new Uint8Array(0));\r\n        let dec = decipher.update(data);\r\n        dec = Buffer.concat([dec, decipher.final()]);\r\n        return new Uint8Array(dec).buffer;\r\n    }\r\n}\r\nAesCrypto.AES_KW_IV = Buffer.from(\"A6A6A6A6A6A6A6A6\", \"hex\");\n\nclass AesCbcProvider extends core.AesCbcProvider {\r\n    async onGenerateKey(algorithm, extractable, keyUsages) {\r\n        const key = await AesCrypto.generateKey({\r\n            name: this.name,\r\n            length: algorithm.length,\r\n        }, extractable, keyUsages);\r\n        return setCryptoKey(key);\r\n    }\r\n    async onEncrypt(algorithm, key, data) {\r\n        return AesCrypto.encrypt(algorithm, getCryptoKey(key), new Uint8Array(data));\r\n    }\r\n    async onDecrypt(algorithm, key, data) {\r\n        return AesCrypto.decrypt(algorithm, getCryptoKey(key), new Uint8Array(data));\r\n    }\r\n    async onExportKey(format, key) {\r\n        return AesCrypto.exportKey(format, getCryptoKey(key));\r\n    }\r\n    async onImportKey(format, keyData, algorithm, extractable, keyUsages) {\r\n        const key = await AesCrypto.importKey(format, keyData, { name: algorithm.name }, extractable, keyUsages);\r\n        return setCryptoKey(key);\r\n    }\r\n    checkCryptoKey(key, keyUsage) {\r\n        super.checkCryptoKey(key, keyUsage);\r\n        if (!(getCryptoKey(key) instanceof AesCryptoKey)) {\r\n            throw new TypeError(\"key: Is not a AesCryptoKey\");\r\n        }\r\n    }\r\n}\n\nconst zero = Buffer.from([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]);\r\nconst rb = Buffer.from([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 135]);\r\nconst blockSize = 16;\r\nfunction bitShiftLeft(buffer) {\r\n    const shifted = Buffer.alloc(buffer.length);\r\n    const last = buffer.length - 1;\r\n    for (let index = 0; index < last; index++) {\r\n        shifted[index] = buffer[index] << 1;\r\n        if (buffer[index + 1] & 0x80) {\r\n            shifted[index] += 0x01;\r\n        }\r\n    }\r\n    shifted[last] = buffer[last] << 1;\r\n    return shifted;\r\n}\r\nfunction xor(a, b) {\r\n    const length = Math.min(a.length, b.length);\r\n    const output = Buffer.alloc(length);\r\n    for (let index = 0; index < length; index++) {\r\n        output[index] = a[index] ^ b[index];\r\n    }\r\n    return output;\r\n}\r\nfunction aes(key, message) {\r\n    const cipher = crypto.createCipheriv(`aes${key.length << 3}`, key, zero);\r\n    const result = cipher.update(message);\r\n    cipher.final();\r\n    return result;\r\n}\r\nfunction getMessageBlock(message, blockIndex) {\r\n    const block = Buffer.alloc(blockSize);\r\n    const start = blockIndex * blockSize;\r\n    const end = start + blockSize;\r\n    message.copy(block, 0, start, end);\r\n    return block;\r\n}\r\nfunction getPaddedMessageBlock(message, blockIndex) {\r\n    const block = Buffer.alloc(blockSize);\r\n    const start = blockIndex * blockSize;\r\n    const end = message.length;\r\n    block.fill(0);\r\n    message.copy(block, 0, start, end);\r\n    block[end - start] = 0x80;\r\n    return block;\r\n}\r\nfunction generateSubkeys(key) {\r\n    const l = aes(key, zero);\r\n    let subkey1 = bitShiftLeft(l);\r\n    if (l[0] & 0x80) {\r\n        subkey1 = xor(subkey1, rb);\r\n    }\r\n    let subkey2 = bitShiftLeft(subkey1);\r\n    if (subkey1[0] & 0x80) {\r\n        subkey2 = xor(subkey2, rb);\r\n    }\r\n    return { subkey1, subkey2 };\r\n}\r\nfunction aesCmac(key, message) {\r\n    const subkeys = generateSubkeys(key);\r\n    let blockCount = Math.ceil(message.length / blockSize);\r\n    let lastBlockCompleteFlag;\r\n    let lastBlock;\r\n    if (blockCount === 0) {\r\n        blockCount = 1;\r\n        lastBlockCompleteFlag = false;\r\n    }\r\n    else {\r\n        lastBlockCompleteFlag = (message.length % blockSize === 0);\r\n    }\r\n    const lastBlockIndex = blockCount - 1;\r\n    if (lastBlockCompleteFlag) {\r\n        lastBlock = xor(getMessageBlock(message, lastBlockIndex), subkeys.subkey1);\r\n    }\r\n    else {\r\n        lastBlock = xor(getPaddedMessageBlock(message, lastBlockIndex), subkeys.subkey2);\r\n    }\r\n    let x = zero;\r\n    let y;\r\n    for (let index = 0; index < lastBlockIndex; index++) {\r\n        y = xor(x, getMessageBlock(message, index));\r\n        x = aes(key, y);\r\n    }\r\n    y = xor(lastBlock, x);\r\n    return aes(key, y);\r\n}\r\nclass AesCmacProvider extends core.AesCmacProvider {\r\n    async onGenerateKey(algorithm, extractable, keyUsages) {\r\n        const key = await AesCrypto.generateKey({\r\n            name: this.name,\r\n            length: algorithm.length,\r\n        }, extractable, keyUsages);\r\n        return setCryptoKey(key);\r\n    }\r\n    async onSign(algorithm, key, data) {\r\n        const result = aesCmac(getCryptoKey(key).data, Buffer.from(data));\r\n        return new Uint8Array(result).buffer;\r\n    }\r\n    async onVerify(algorithm, key, signature, data) {\r\n        const signature2 = await this.sign(algorithm, key, data);\r\n        return Buffer.from(signature).compare(Buffer.from(signature2)) === 0;\r\n    }\r\n    async onExportKey(format, key) {\r\n        return AesCrypto.exportKey(format, getCryptoKey(key));\r\n    }\r\n    async onImportKey(format, keyData, algorithm, extractable, keyUsages) {\r\n        const res = await AesCrypto.importKey(format, keyData, { name: algorithm.name }, extractable, keyUsages);\r\n        return setCryptoKey(res);\r\n    }\r\n    checkCryptoKey(key, keyUsage) {\r\n        super.checkCryptoKey(key, keyUsage);\r\n        if (!(getCryptoKey(key) instanceof AesCryptoKey)) {\r\n            throw new TypeError(\"key: Is not a AesCryptoKey\");\r\n        }\r\n    }\r\n}\n\nclass AesCtrProvider extends core.AesCtrProvider {\r\n    async onGenerateKey(algorithm, extractable, keyUsages) {\r\n        const key = await AesCrypto.generateKey({\r\n            name: this.name,\r\n            length: algorithm.length,\r\n        }, extractable, keyUsages);\r\n        return setCryptoKey(key);\r\n    }\r\n    async onEncrypt(algorithm, key, data) {\r\n        return AesCrypto.encrypt(algorithm, getCryptoKey(key), new Uint8Array(data));\r\n    }\r\n    async onDecrypt(algorithm, key, data) {\r\n        return AesCrypto.decrypt(algorithm, getCryptoKey(key), new Uint8Array(data));\r\n    }\r\n    async onExportKey(format, key) {\r\n        return AesCrypto.exportKey(format, getCryptoKey(key));\r\n    }\r\n    async onImportKey(format, keyData, algorithm, extractable, keyUsages) {\r\n        const res = await AesCrypto.importKey(format, keyData, { name: algorithm.name }, extractable, keyUsages);\r\n        return setCryptoKey(res);\r\n    }\r\n    checkCryptoKey(key, keyUsage) {\r\n        super.checkCryptoKey(key, keyUsage);\r\n        if (!(getCryptoKey(key) instanceof AesCryptoKey)) {\r\n            throw new TypeError(\"key: Is not a AesCryptoKey\");\r\n        }\r\n    }\r\n}\n\nclass AesGcmProvider extends core.AesGcmProvider {\r\n    async onGenerateKey(algorithm, extractable, keyUsages) {\r\n        const key = await AesCrypto.generateKey({\r\n            name: this.name,\r\n            length: algorithm.length,\r\n        }, extractable, keyUsages);\r\n        return setCryptoKey(key);\r\n    }\r\n    async onEncrypt(algorithm, key, data) {\r\n        return AesCrypto.encrypt(algorithm, getCryptoKey(key), new Uint8Array(data));\r\n    }\r\n    async onDecrypt(algorithm, key, data) {\r\n        return AesCrypto.decrypt(algorithm, getCryptoKey(key), new Uint8Array(data));\r\n    }\r\n    async onExportKey(format, key) {\r\n        return AesCrypto.exportKey(format, getCryptoKey(key));\r\n    }\r\n    async onImportKey(format, keyData, algorithm, extractable, keyUsages) {\r\n        const res = await AesCrypto.importKey(format, keyData, { name: algorithm.name }, extractable, keyUsages);\r\n        return setCryptoKey(res);\r\n    }\r\n    checkCryptoKey(key, keyUsage) {\r\n        super.checkCryptoKey(key, keyUsage);\r\n        if (!(getCryptoKey(key) instanceof AesCryptoKey)) {\r\n            throw new TypeError(\"key: Is not a AesCryptoKey\");\r\n        }\r\n    }\r\n}\n\nclass AesKwProvider extends core.AesKwProvider {\r\n    async onGenerateKey(algorithm, extractable, keyUsages) {\r\n        const res = await AesCrypto.generateKey({\r\n            name: this.name,\r\n            length: algorithm.length,\r\n        }, extractable, keyUsages);\r\n        return setCryptoKey(res);\r\n    }\r\n    async onExportKey(format, key) {\r\n        return AesCrypto.exportKey(format, getCryptoKey(key));\r\n    }\r\n    async onImportKey(format, keyData, algorithm, extractable, keyUsages) {\r\n        const res = await AesCrypto.importKey(format, keyData, { name: algorithm.name }, extractable, keyUsages);\r\n        return setCryptoKey(res);\r\n    }\r\n    async onEncrypt(algorithm, key, data) {\r\n        return AesCrypto.encrypt(algorithm, getCryptoKey(key), new Uint8Array(data));\r\n    }\r\n    async onDecrypt(algorithm, key, data) {\r\n        return AesCrypto.decrypt(algorithm, getCryptoKey(key), new Uint8Array(data));\r\n    }\r\n    checkCryptoKey(key, keyUsage) {\r\n        super.checkCryptoKey(key, keyUsage);\r\n        if (!(getCryptoKey(key) instanceof AesCryptoKey)) {\r\n            throw new TypeError(\"key: Is not a AesCryptoKey\");\r\n        }\r\n    }\r\n}\n\nclass AesEcbProvider extends core.AesEcbProvider {\r\n    async onGenerateKey(algorithm, extractable, keyUsages) {\r\n        const key = await AesCrypto.generateKey({\r\n            name: this.name,\r\n            length: algorithm.length,\r\n        }, extractable, keyUsages);\r\n        return setCryptoKey(key);\r\n    }\r\n    async onEncrypt(algorithm, key, data) {\r\n        return AesCrypto.encrypt(algorithm, getCryptoKey(key), new Uint8Array(data));\r\n    }\r\n    async onDecrypt(algorithm, key, data) {\r\n        return AesCrypto.decrypt(algorithm, getCryptoKey(key), new Uint8Array(data));\r\n    }\r\n    async onExportKey(format, key) {\r\n        return AesCrypto.exportKey(format, getCryptoKey(key));\r\n    }\r\n    async onImportKey(format, keyData, algorithm, extractable, keyUsages) {\r\n        const res = await AesCrypto.importKey(format, keyData, { name: algorithm.name }, extractable, keyUsages);\r\n        return setCryptoKey(res);\r\n    }\r\n    checkCryptoKey(key, keyUsage) {\r\n        super.checkCryptoKey(key, keyUsage);\r\n        if (!(getCryptoKey(key) instanceof AesCryptoKey)) {\r\n            throw new TypeError(\"key: Is not a AesCryptoKey\");\r\n        }\r\n    }\r\n}\n\nclass DesCryptoKey extends SymmetricKey {\r\n    get alg() {\r\n        switch (this.algorithm.name.toUpperCase()) {\r\n            case \"DES-CBC\":\r\n                return `DES-CBC`;\r\n            case \"DES-EDE3-CBC\":\r\n                return `3DES-CBC`;\r\n            default:\r\n                throw new core.AlgorithmError(\"Unsupported algorithm name\");\r\n        }\r\n    }\r\n    set alg(value) {\r\n    }\r\n}\r\n__decorate([\r\n    JsonProp({ name: \"k\", converter: JsonBase64UrlConverter })\r\n], DesCryptoKey.prototype, \"data\", void 0);\n\nclass DesCrypto {\r\n    static async generateKey(algorithm, extractable, keyUsages) {\r\n        const key = new DesCryptoKey();\r\n        key.algorithm = algorithm;\r\n        key.extractable = extractable;\r\n        key.usages = keyUsages;\r\n        key.data = crypto__default.randomBytes(algorithm.length >> 3);\r\n        return key;\r\n    }\r\n    static async exportKey(format, key) {\r\n        switch (format.toLowerCase()) {\r\n            case \"jwk\":\r\n                return JsonSerializer.toJSON(key);\r\n            case \"raw\":\r\n                return new Uint8Array(key.data).buffer;\r\n            default:\r\n                throw new core.OperationError(\"format: Must be 'jwk' or 'raw'\");\r\n        }\r\n    }\r\n    static async importKey(format, keyData, algorithm, extractable, keyUsages) {\r\n        let key;\r\n        switch (format.toLowerCase()) {\r\n            case \"jwk\":\r\n                key = JsonParser.fromJSON(keyData, { targetSchema: DesCryptoKey });\r\n                break;\r\n            case \"raw\":\r\n                key = new DesCryptoKey();\r\n                key.data = Buffer.from(keyData);\r\n                break;\r\n            default:\r\n                throw new core.OperationError(\"format: Must be 'jwk' or 'raw'\");\r\n        }\r\n        key.algorithm = algorithm;\r\n        key.extractable = extractable;\r\n        key.usages = keyUsages;\r\n        return key;\r\n    }\r\n    static async encrypt(algorithm, key, data) {\r\n        switch (algorithm.name.toUpperCase()) {\r\n            case \"DES-CBC\":\r\n                return this.encryptDesCBC(algorithm, key, Buffer.from(data));\r\n            case \"DES-EDE3-CBC\":\r\n                return this.encryptDesEDE3CBC(algorithm, key, Buffer.from(data));\r\n            default:\r\n                throw new core.OperationError(\"algorithm: Is not recognized\");\r\n        }\r\n    }\r\n    static async decrypt(algorithm, key, data) {\r\n        if (!(key instanceof DesCryptoKey)) {\r\n            throw new Error(\"key: Is not DesCryptoKey\");\r\n        }\r\n        switch (algorithm.name.toUpperCase()) {\r\n            case \"DES-CBC\":\r\n                return this.decryptDesCBC(algorithm, key, Buffer.from(data));\r\n            case \"DES-EDE3-CBC\":\r\n                return this.decryptDesEDE3CBC(algorithm, key, Buffer.from(data));\r\n            default:\r\n                throw new core.OperationError(\"algorithm: Is not recognized\");\r\n        }\r\n    }\r\n    static async encryptDesCBC(algorithm, key, data) {\r\n        const cipher = crypto__default.createCipheriv(`des-cbc`, key.data, new Uint8Array(algorithm.iv));\r\n        let enc = cipher.update(data);\r\n        enc = Buffer.concat([enc, cipher.final()]);\r\n        const res = new Uint8Array(enc).buffer;\r\n        return res;\r\n    }\r\n    static async decryptDesCBC(algorithm, key, data) {\r\n        const decipher = crypto__default.createDecipheriv(`des-cbc`, key.data, new Uint8Array(algorithm.iv));\r\n        let dec = decipher.update(data);\r\n        dec = Buffer.concat([dec, decipher.final()]);\r\n        return new Uint8Array(dec).buffer;\r\n    }\r\n    static async encryptDesEDE3CBC(algorithm, key, data) {\r\n        const cipher = crypto__default.createCipheriv(`des-ede3-cbc`, key.data, Buffer.from(algorithm.iv));\r\n        let enc = cipher.update(data);\r\n        enc = Buffer.concat([enc, cipher.final()]);\r\n        const res = new Uint8Array(enc).buffer;\r\n        return res;\r\n    }\r\n    static async decryptDesEDE3CBC(algorithm, key, data) {\r\n        const decipher = crypto__default.createDecipheriv(`des-ede3-cbc`, key.data, new Uint8Array(algorithm.iv));\r\n        let dec = decipher.update(data);\r\n        dec = Buffer.concat([dec, decipher.final()]);\r\n        return new Uint8Array(dec).buffer;\r\n    }\r\n}\n\nclass DesCbcProvider extends core.DesProvider {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.keySizeBits = 64;\r\n        this.ivSize = 8;\r\n        this.name = \"DES-CBC\";\r\n    }\r\n    async onGenerateKey(algorithm, extractable, keyUsages) {\r\n        const key = await DesCrypto.generateKey({\r\n            name: this.name,\r\n            length: this.keySizeBits,\r\n        }, extractable, keyUsages);\r\n        return setCryptoKey(key);\r\n    }\r\n    async onEncrypt(algorithm, key, data) {\r\n        return DesCrypto.encrypt(algorithm, getCryptoKey(key), new Uint8Array(data));\r\n    }\r\n    async onDecrypt(algorithm, key, data) {\r\n        return DesCrypto.decrypt(algorithm, getCryptoKey(key), new Uint8Array(data));\r\n    }\r\n    async onExportKey(format, key) {\r\n        return DesCrypto.exportKey(format, getCryptoKey(key));\r\n    }\r\n    async onImportKey(format, keyData, algorithm, extractable, keyUsages) {\r\n        const key = await DesCrypto.importKey(format, keyData, { name: this.name, length: this.keySizeBits }, extractable, keyUsages);\r\n        if (key.data.length !== (this.keySizeBits >> 3)) {\r\n            throw new core.OperationError(\"keyData: Wrong key size\");\r\n        }\r\n        return setCryptoKey(key);\r\n    }\r\n    checkCryptoKey(key, keyUsage) {\r\n        super.checkCryptoKey(key, keyUsage);\r\n        if (!(getCryptoKey(key) instanceof DesCryptoKey)) {\r\n            throw new TypeError(\"key: Is not a DesCryptoKey\");\r\n        }\r\n    }\r\n}\n\nclass DesEde3CbcProvider extends core.DesProvider {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.keySizeBits = 192;\r\n        this.ivSize = 8;\r\n        this.name = \"DES-EDE3-CBC\";\r\n    }\r\n    async onGenerateKey(algorithm, extractable, keyUsages) {\r\n        const key = await DesCrypto.generateKey({\r\n            name: this.name,\r\n            length: this.keySizeBits,\r\n        }, extractable, keyUsages);\r\n        return setCryptoKey(key);\r\n    }\r\n    async onEncrypt(algorithm, key, data) {\r\n        return DesCrypto.encrypt(algorithm, getCryptoKey(key), new Uint8Array(data));\r\n    }\r\n    async onDecrypt(algorithm, key, data) {\r\n        return DesCrypto.decrypt(algorithm, getCryptoKey(key), new Uint8Array(data));\r\n    }\r\n    async onExportKey(format, key) {\r\n        return DesCrypto.exportKey(format, getCryptoKey(key));\r\n    }\r\n    async onImportKey(format, keyData, algorithm, extractable, keyUsages) {\r\n        const key = await DesCrypto.importKey(format, keyData, { name: this.name, length: this.keySizeBits }, extractable, keyUsages);\r\n        if (key.data.length !== (this.keySizeBits >> 3)) {\r\n            throw new core.OperationError(\"keyData: Wrong key size\");\r\n        }\r\n        return setCryptoKey(key);\r\n    }\r\n    checkCryptoKey(key, keyUsage) {\r\n        super.checkCryptoKey(key, keyUsage);\r\n        if (!(getCryptoKey(key) instanceof DesCryptoKey)) {\r\n            throw new TypeError(\"key: Is not a DesCryptoKey\");\r\n        }\r\n    }\r\n}\n\nfunction getJwkAlgorithm(algorithm) {\r\n    switch (algorithm.name.toUpperCase()) {\r\n        case \"RSA-OAEP\": {\r\n            const mdSize = /(\\d+)$/.exec(algorithm.hash.name)[1];\r\n            return `RSA-OAEP${mdSize !== \"1\" ? `-${mdSize}` : \"\"}`;\r\n        }\r\n        case \"RSASSA-PKCS1-V1_5\":\r\n            return `RS${/(\\d+)$/.exec(algorithm.hash.name)[1]}`;\r\n        case \"RSA-PSS\":\r\n            return `PS${/(\\d+)$/.exec(algorithm.hash.name)[1]}`;\r\n        case \"RSA-PKCS1\":\r\n            return `RS1`;\r\n        default:\r\n            throw new core.OperationError(\"algorithm: Is not recognized\");\r\n    }\r\n}\n\nclass RsaPrivateKey extends AsymmetricKey {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.type = \"private\";\r\n    }\r\n    getKey() {\r\n        const keyInfo = AsnParser.parse(this.data, core.asn1.PrivateKeyInfo);\r\n        return AsnParser.parse(keyInfo.privateKey, core.asn1.RsaPrivateKey);\r\n    }\r\n    toJSON() {\r\n        const key = this.getKey();\r\n        const json = {\r\n            kty: \"RSA\",\r\n            alg: getJwkAlgorithm(this.algorithm),\r\n            key_ops: this.usages,\r\n            ext: this.extractable,\r\n        };\r\n        return Object.assign(json, JsonSerializer.toJSON(key));\r\n    }\r\n    fromJSON(json) {\r\n        const key = JsonParser.fromJSON(json, { targetSchema: core.asn1.RsaPrivateKey });\r\n        const keyInfo = new core.asn1.PrivateKeyInfo();\r\n        keyInfo.privateKeyAlgorithm.algorithm = \"1.2.840.113549.1.1.1\";\r\n        keyInfo.privateKeyAlgorithm.parameters = null;\r\n        keyInfo.privateKey = AsnSerializer.serialize(key);\r\n        this.data = Buffer.from(AsnSerializer.serialize(keyInfo));\r\n    }\r\n}\n\nclass RsaPublicKey extends AsymmetricKey {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.type = \"public\";\r\n    }\r\n    getKey() {\r\n        const keyInfo = AsnParser.parse(this.data, core.asn1.PublicKeyInfo);\r\n        return AsnParser.parse(keyInfo.publicKey, core.asn1.RsaPublicKey);\r\n    }\r\n    toJSON() {\r\n        const key = this.getKey();\r\n        const json = {\r\n            kty: \"RSA\",\r\n            alg: getJwkAlgorithm(this.algorithm),\r\n            key_ops: this.usages,\r\n            ext: this.extractable,\r\n        };\r\n        return Object.assign(json, JsonSerializer.toJSON(key));\r\n    }\r\n    fromJSON(json) {\r\n        const key = JsonParser.fromJSON(json, { targetSchema: core.asn1.RsaPublicKey });\r\n        const keyInfo = new core.asn1.PublicKeyInfo();\r\n        keyInfo.publicKeyAlgorithm.algorithm = \"1.2.840.113549.1.1.1\";\r\n        keyInfo.publicKeyAlgorithm.parameters = null;\r\n        keyInfo.publicKey = AsnSerializer.serialize(key);\r\n        this.data = Buffer.from(AsnSerializer.serialize(keyInfo));\r\n    }\r\n}\n\nclass RsaCrypto {\r\n    static async generateKey(algorithm, extractable, keyUsages) {\r\n        const privateKey = new RsaPrivateKey();\r\n        privateKey.algorithm = algorithm;\r\n        privateKey.extractable = extractable;\r\n        privateKey.usages = keyUsages.filter((usage) => this.privateKeyUsages.indexOf(usage) !== -1);\r\n        const publicKey = new RsaPublicKey();\r\n        publicKey.algorithm = algorithm;\r\n        publicKey.extractable = true;\r\n        publicKey.usages = keyUsages.filter((usage) => this.publicKeyUsages.indexOf(usage) !== -1);\r\n        const publicExponent = Buffer.concat([\r\n            Buffer.alloc(4 - algorithm.publicExponent.byteLength, 0),\r\n            Buffer.from(algorithm.publicExponent),\r\n        ]).readInt32BE(0);\r\n        const keys = crypto__default.generateKeyPairSync(\"rsa\", {\r\n            modulusLength: algorithm.modulusLength,\r\n            publicExponent,\r\n            publicKeyEncoding: {\r\n                format: \"der\",\r\n                type: \"spki\",\r\n            },\r\n            privateKeyEncoding: {\r\n                format: \"der\",\r\n                type: \"pkcs8\",\r\n            },\r\n        });\r\n        privateKey.data = keys.privateKey;\r\n        publicKey.data = keys.publicKey;\r\n        const res = {\r\n            privateKey,\r\n            publicKey,\r\n        };\r\n        return res;\r\n    }\r\n    static async exportKey(format, key) {\r\n        switch (format.toLowerCase()) {\r\n            case \"jwk\":\r\n                return JsonSerializer.toJSON(key);\r\n            case \"pkcs8\":\r\n            case \"spki\":\r\n                return new Uint8Array(key.data).buffer;\r\n            default:\r\n                throw new core.OperationError(\"format: Must be 'jwk', 'pkcs8' or 'spki'\");\r\n        }\r\n    }\r\n    static async importKey(format, keyData, algorithm, extractable, keyUsages) {\r\n        switch (format.toLowerCase()) {\r\n            case \"jwk\": {\r\n                const jwk = keyData;\r\n                if (jwk.d) {\r\n                    const asnKey = JsonParser.fromJSON(keyData, { targetSchema: core.asn1.RsaPrivateKey });\r\n                    return this.importPrivateKey(asnKey, algorithm, extractable, keyUsages);\r\n                }\r\n                else {\r\n                    const asnKey = JsonParser.fromJSON(keyData, { targetSchema: core.asn1.RsaPublicKey });\r\n                    return this.importPublicKey(asnKey, algorithm, extractable, keyUsages);\r\n                }\r\n            }\r\n            case \"spki\": {\r\n                const keyInfo = AsnParser.parse(new Uint8Array(keyData), core.asn1.PublicKeyInfo);\r\n                const asnKey = AsnParser.parse(keyInfo.publicKey, core.asn1.RsaPublicKey);\r\n                return this.importPublicKey(asnKey, algorithm, extractable, keyUsages);\r\n            }\r\n            case \"pkcs8\": {\r\n                const keyInfo = AsnParser.parse(new Uint8Array(keyData), core.asn1.PrivateKeyInfo);\r\n                const asnKey = AsnParser.parse(keyInfo.privateKey, core.asn1.RsaPrivateKey);\r\n                return this.importPrivateKey(asnKey, algorithm, extractable, keyUsages);\r\n            }\r\n            default:\r\n                throw new core.OperationError(\"format: Must be 'jwk', 'pkcs8' or 'spki'\");\r\n        }\r\n    }\r\n    static async sign(algorithm, key, data) {\r\n        switch (algorithm.name.toUpperCase()) {\r\n            case \"RSA-PSS\":\r\n            case \"RSASSA-PKCS1-V1_5\":\r\n                return this.signRsa(algorithm, key, data);\r\n            default:\r\n                throw new core.OperationError(\"algorithm: Is not recognized\");\r\n        }\r\n    }\r\n    static async verify(algorithm, key, signature, data) {\r\n        switch (algorithm.name.toUpperCase()) {\r\n            case \"RSA-PSS\":\r\n            case \"RSASSA-PKCS1-V1_5\":\r\n                return this.verifySSA(algorithm, key, data, signature);\r\n            default:\r\n                throw new core.OperationError(\"algorithm: Is not recognized\");\r\n        }\r\n    }\r\n    static async encrypt(algorithm, key, data) {\r\n        switch (algorithm.name.toUpperCase()) {\r\n            case \"RSA-OAEP\":\r\n                return this.encryptOAEP(algorithm, key, data);\r\n            default:\r\n                throw new core.OperationError(\"algorithm: Is not recognized\");\r\n        }\r\n    }\r\n    static async decrypt(algorithm, key, data) {\r\n        switch (algorithm.name.toUpperCase()) {\r\n            case \"RSA-OAEP\":\r\n                return this.decryptOAEP(algorithm, key, data);\r\n            default:\r\n                throw new core.OperationError(\"algorithm: Is not recognized\");\r\n        }\r\n    }\r\n    static importPrivateKey(asnKey, algorithm, extractable, keyUsages) {\r\n        const keyInfo = new core.asn1.PrivateKeyInfo();\r\n        keyInfo.privateKeyAlgorithm.algorithm = \"1.2.840.113549.1.1.1\";\r\n        keyInfo.privateKeyAlgorithm.parameters = null;\r\n        keyInfo.privateKey = AsnSerializer.serialize(asnKey);\r\n        const key = new RsaPrivateKey();\r\n        key.data = Buffer.from(AsnSerializer.serialize(keyInfo));\r\n        key.algorithm = Object.assign({}, algorithm);\r\n        key.algorithm.publicExponent = new Uint8Array(asnKey.publicExponent);\r\n        key.algorithm.modulusLength = asnKey.modulus.byteLength << 3;\r\n        key.extractable = extractable;\r\n        key.usages = keyUsages;\r\n        return key;\r\n    }\r\n    static importPublicKey(asnKey, algorithm, extractable, keyUsages) {\r\n        const keyInfo = new core.asn1.PublicKeyInfo();\r\n        keyInfo.publicKeyAlgorithm.algorithm = \"1.2.840.113549.1.1.1\";\r\n        keyInfo.publicKeyAlgorithm.parameters = null;\r\n        keyInfo.publicKey = AsnSerializer.serialize(asnKey);\r\n        const key = new RsaPublicKey();\r\n        key.data = Buffer.from(AsnSerializer.serialize(keyInfo));\r\n        key.algorithm = Object.assign({}, algorithm);\r\n        key.algorithm.publicExponent = new Uint8Array(asnKey.publicExponent);\r\n        key.algorithm.modulusLength = asnKey.modulus.byteLength << 3;\r\n        key.extractable = extractable;\r\n        key.usages = keyUsages;\r\n        return key;\r\n    }\r\n    static getCryptoAlgorithm(alg) {\r\n        switch (alg.hash.name.toUpperCase()) {\r\n            case \"SHA-1\":\r\n                return \"RSA-SHA1\";\r\n            case \"SHA-256\":\r\n                return \"RSA-SHA256\";\r\n            case \"SHA-384\":\r\n                return \"RSA-SHA384\";\r\n            case \"SHA-512\":\r\n                return \"RSA-SHA512\";\r\n            case \"SHA3-256\":\r\n                return \"RSA-SHA3-256\";\r\n            case \"SHA3-384\":\r\n                return \"RSA-SHA3-384\";\r\n            case \"SHA3-512\":\r\n                return \"RSA-SHA3-512\";\r\n            default:\r\n                throw new core.OperationError(\"algorithm.hash: Is not recognized\");\r\n        }\r\n    }\r\n    static signRsa(algorithm, key, data) {\r\n        const cryptoAlg = this.getCryptoAlgorithm(key.algorithm);\r\n        const signer = crypto__default.createSign(cryptoAlg);\r\n        signer.update(Buffer.from(data));\r\n        if (!key.pem) {\r\n            key.pem = `-----BEGIN PRIVATE KEY-----\\n${key.data.toString(\"base64\")}\\n-----END PRIVATE KEY-----`;\r\n        }\r\n        const options = {\r\n            key: key.pem,\r\n        };\r\n        if (algorithm.name.toUpperCase() === \"RSA-PSS\") {\r\n            options.padding = crypto__default.constants.RSA_PKCS1_PSS_PADDING;\r\n            options.saltLength = algorithm.saltLength;\r\n        }\r\n        const signature = signer.sign(options);\r\n        return new Uint8Array(signature).buffer;\r\n    }\r\n    static verifySSA(algorithm, key, data, signature) {\r\n        const cryptoAlg = this.getCryptoAlgorithm(key.algorithm);\r\n        const signer = crypto__default.createVerify(cryptoAlg);\r\n        signer.update(Buffer.from(data));\r\n        if (!key.pem) {\r\n            key.pem = `-----BEGIN PUBLIC KEY-----\\n${key.data.toString(\"base64\")}\\n-----END PUBLIC KEY-----`;\r\n        }\r\n        const options = {\r\n            key: key.pem,\r\n        };\r\n        if (algorithm.name.toUpperCase() === \"RSA-PSS\") {\r\n            options.padding = crypto__default.constants.RSA_PKCS1_PSS_PADDING;\r\n            options.saltLength = algorithm.saltLength;\r\n        }\r\n        const ok = signer.verify(options, signature);\r\n        return ok;\r\n    }\r\n    static encryptOAEP(algorithm, key, data) {\r\n        const options = {\r\n            key: `-----BEGIN PUBLIC KEY-----\\n${key.data.toString(\"base64\")}\\n-----END PUBLIC KEY-----`,\r\n            padding: crypto__default.constants.RSA_PKCS1_OAEP_PADDING,\r\n        };\r\n        if (algorithm.label) ;\r\n        return new Uint8Array(crypto__default.publicEncrypt(options, data)).buffer;\r\n    }\r\n    static decryptOAEP(algorithm, key, data) {\r\n        const options = {\r\n            key: `-----BEGIN PRIVATE KEY-----\\n${key.data.toString(\"base64\")}\\n-----END PRIVATE KEY-----`,\r\n            padding: crypto__default.constants.RSA_PKCS1_OAEP_PADDING,\r\n        };\r\n        if (algorithm.label) ;\r\n        return new Uint8Array(crypto__default.privateDecrypt(options, data)).buffer;\r\n    }\r\n}\r\nRsaCrypto.publicKeyUsages = [\"verify\", \"encrypt\", \"wrapKey\"];\r\nRsaCrypto.privateKeyUsages = [\"sign\", \"decrypt\", \"unwrapKey\"];\n\nclass RsaSsaProvider extends core.RsaSsaProvider {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.hashAlgorithms = [\r\n            \"SHA-1\", \"SHA-256\", \"SHA-384\", \"SHA-512\",\r\n            \"shake128\", \"shake256\",\r\n            \"SHA3-256\", \"SHA3-384\", \"SHA3-512\"\r\n        ];\r\n    }\r\n    async onGenerateKey(algorithm, extractable, keyUsages) {\r\n        const keys = await RsaCrypto.generateKey({\r\n            ...algorithm,\r\n            name: this.name,\r\n        }, extractable, keyUsages);\r\n        return {\r\n            privateKey: setCryptoKey(keys.privateKey),\r\n            publicKey: setCryptoKey(keys.publicKey),\r\n        };\r\n    }\r\n    async onSign(algorithm, key, data) {\r\n        return RsaCrypto.sign(algorithm, getCryptoKey(key), new Uint8Array(data));\r\n    }\r\n    async onVerify(algorithm, key, signature, data) {\r\n        return RsaCrypto.verify(algorithm, getCryptoKey(key), new Uint8Array(signature), new Uint8Array(data));\r\n    }\r\n    async onExportKey(format, key) {\r\n        return RsaCrypto.exportKey(format, getCryptoKey(key));\r\n    }\r\n    async onImportKey(format, keyData, algorithm, extractable, keyUsages) {\r\n        const key = await RsaCrypto.importKey(format, keyData, { ...algorithm, name: this.name }, extractable, keyUsages);\r\n        return setCryptoKey(key);\r\n    }\r\n    checkCryptoKey(key, keyUsage) {\r\n        super.checkCryptoKey(key, keyUsage);\r\n        const internalKey = getCryptoKey(key);\r\n        if (!(internalKey instanceof RsaPrivateKey || internalKey instanceof RsaPublicKey)) {\r\n            throw new TypeError(\"key: Is not RSA CryptoKey\");\r\n        }\r\n    }\r\n}\n\nclass RsaPssProvider extends core.RsaPssProvider {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.hashAlgorithms = [\r\n            \"SHA-1\", \"SHA-256\", \"SHA-384\", \"SHA-512\",\r\n            \"shake128\", \"shake256\",\r\n            \"SHA3-256\", \"SHA3-384\", \"SHA3-512\"\r\n        ];\r\n    }\r\n    async onGenerateKey(algorithm, extractable, keyUsages) {\r\n        const keys = await RsaCrypto.generateKey({\r\n            ...algorithm,\r\n            name: this.name,\r\n        }, extractable, keyUsages);\r\n        return {\r\n            privateKey: setCryptoKey(keys.privateKey),\r\n            publicKey: setCryptoKey(keys.publicKey),\r\n        };\r\n    }\r\n    async onSign(algorithm, key, data) {\r\n        return RsaCrypto.sign(algorithm, getCryptoKey(key), new Uint8Array(data));\r\n    }\r\n    async onVerify(algorithm, key, signature, data) {\r\n        return RsaCrypto.verify(algorithm, getCryptoKey(key), new Uint8Array(signature), new Uint8Array(data));\r\n    }\r\n    async onExportKey(format, key) {\r\n        return RsaCrypto.exportKey(format, getCryptoKey(key));\r\n    }\r\n    async onImportKey(format, keyData, algorithm, extractable, keyUsages) {\r\n        const key = await RsaCrypto.importKey(format, keyData, { ...algorithm, name: this.name }, extractable, keyUsages);\r\n        return setCryptoKey(key);\r\n    }\r\n    checkCryptoKey(key, keyUsage) {\r\n        super.checkCryptoKey(key, keyUsage);\r\n        const internalKey = getCryptoKey(key);\r\n        if (!(internalKey instanceof RsaPrivateKey || internalKey instanceof RsaPublicKey)) {\r\n            throw new TypeError(\"key: Is not RSA CryptoKey\");\r\n        }\r\n    }\r\n}\n\nclass ShaCrypto {\r\n    static size(algorithm) {\r\n        switch (algorithm.name.toUpperCase()) {\r\n            case \"SHA-1\":\r\n                return 160;\r\n            case \"SHA-256\":\r\n            case \"SHA3-256\":\r\n                return 256;\r\n            case \"SHA-384\":\r\n            case \"SHA3-384\":\r\n                return 384;\r\n            case \"SHA-512\":\r\n            case \"SHA3-512\":\r\n                return 512;\r\n            default:\r\n                throw new Error(\"Unrecognized name\");\r\n        }\r\n    }\r\n    static getAlgorithmName(algorithm) {\r\n        switch (algorithm.name.toUpperCase()) {\r\n            case \"SHA-1\":\r\n                return \"sha1\";\r\n            case \"SHA-256\":\r\n                return \"sha256\";\r\n            case \"SHA-384\":\r\n                return \"sha384\";\r\n            case \"SHA-512\":\r\n                return \"sha512\";\r\n            case \"SHA3-256\":\r\n                return \"sha3-256\";\r\n            case \"SHA3-384\":\r\n                return \"sha3-384\";\r\n            case \"SHA3-512\":\r\n                return \"sha3-512\";\r\n            default:\r\n                throw new Error(\"Unrecognized name\");\r\n        }\r\n    }\r\n    static digest(algorithm, data) {\r\n        const hashAlg = this.getAlgorithmName(algorithm);\r\n        const hash = crypto__default.createHash(hashAlg)\r\n            .update(Buffer.from(data)).digest();\r\n        return new Uint8Array(hash).buffer;\r\n    }\r\n}\n\nclass RsaOaepProvider extends core.RsaOaepProvider {\r\n    async onGenerateKey(algorithm, extractable, keyUsages) {\r\n        const keys = await RsaCrypto.generateKey({\r\n            ...algorithm,\r\n            name: this.name,\r\n        }, extractable, keyUsages);\r\n        return {\r\n            privateKey: setCryptoKey(keys.privateKey),\r\n            publicKey: setCryptoKey(keys.publicKey),\r\n        };\r\n    }\r\n    async onEncrypt(algorithm, key, data) {\r\n        const internalKey = getCryptoKey(key);\r\n        const dataView = new Uint8Array(data);\r\n        const keySize = Math.ceil(internalKey.algorithm.modulusLength >> 3);\r\n        const hashSize = ShaCrypto.size(internalKey.algorithm.hash) >> 3;\r\n        const dataLength = dataView.byteLength;\r\n        const psLength = keySize - dataLength - 2 * hashSize - 2;\r\n        if (dataLength > keySize - 2 * hashSize - 2) {\r\n            throw new Error(\"Data too large\");\r\n        }\r\n        const message = new Uint8Array(keySize);\r\n        const seed = message.subarray(1, hashSize + 1);\r\n        const dataBlock = message.subarray(hashSize + 1);\r\n        dataBlock.set(dataView, hashSize + psLength + 1);\r\n        const labelHash = crypto__default.createHash(internalKey.algorithm.hash.name.replace(\"-\", \"\"))\r\n            .update(core.BufferSourceConverter.toUint8Array(algorithm.label || new Uint8Array(0)))\r\n            .digest();\r\n        dataBlock.set(labelHash, 0);\r\n        dataBlock[hashSize + psLength] = 1;\r\n        crypto__default.randomFillSync(seed);\r\n        const dataBlockMask = this.mgf1(internalKey.algorithm.hash, seed, dataBlock.length);\r\n        for (let i = 0; i < dataBlock.length; i++) {\r\n            dataBlock[i] ^= dataBlockMask[i];\r\n        }\r\n        const seedMask = this.mgf1(internalKey.algorithm.hash, dataBlock, seed.length);\r\n        for (let i = 0; i < seed.length; i++) {\r\n            seed[i] ^= seedMask[i];\r\n        }\r\n        if (!internalKey.pem) {\r\n            internalKey.pem = `-----BEGIN PUBLIC KEY-----\\n${internalKey.data.toString(\"base64\")}\\n-----END PUBLIC KEY-----`;\r\n        }\r\n        const pkcs0 = crypto__default.publicEncrypt({\r\n            key: internalKey.pem,\r\n            padding: crypto__default.constants.RSA_NO_PADDING,\r\n        }, Buffer.from(message));\r\n        return new Uint8Array(pkcs0).buffer;\r\n    }\r\n    async onDecrypt(algorithm, key, data) {\r\n        const internalKey = getCryptoKey(key);\r\n        const keySize = Math.ceil(internalKey.algorithm.modulusLength >> 3);\r\n        const hashSize = ShaCrypto.size(internalKey.algorithm.hash) >> 3;\r\n        const dataLength = data.byteLength;\r\n        if (dataLength !== keySize) {\r\n            throw new Error(\"Bad data\");\r\n        }\r\n        if (!internalKey.pem) {\r\n            internalKey.pem = `-----BEGIN PRIVATE KEY-----\\n${internalKey.data.toString(\"base64\")}\\n-----END PRIVATE KEY-----`;\r\n        }\r\n        let pkcs0 = crypto__default.privateDecrypt({\r\n            key: internalKey.pem,\r\n            padding: crypto__default.constants.RSA_NO_PADDING,\r\n        }, Buffer.from(data));\r\n        const z = pkcs0[0];\r\n        const seed = pkcs0.subarray(1, hashSize + 1);\r\n        const dataBlock = pkcs0.subarray(hashSize + 1);\r\n        if (z !== 0) {\r\n            throw new Error(\"Decryption failed\");\r\n        }\r\n        const seedMask = this.mgf1(internalKey.algorithm.hash, dataBlock, seed.length);\r\n        for (let i = 0; i < seed.length; i++) {\r\n            seed[i] ^= seedMask[i];\r\n        }\r\n        const dataBlockMask = this.mgf1(internalKey.algorithm.hash, seed, dataBlock.length);\r\n        for (let i = 0; i < dataBlock.length; i++) {\r\n            dataBlock[i] ^= dataBlockMask[i];\r\n        }\r\n        const labelHash = crypto__default.createHash(internalKey.algorithm.hash.name.replace(\"-\", \"\"))\r\n            .update(core.BufferSourceConverter.toUint8Array(algorithm.label || new Uint8Array(0)))\r\n            .digest();\r\n        for (let i = 0; i < hashSize; i++) {\r\n            if (labelHash[i] !== dataBlock[i]) {\r\n                throw new Error(\"Decryption failed\");\r\n            }\r\n        }\r\n        let psEnd = hashSize;\r\n        for (; psEnd < dataBlock.length; psEnd++) {\r\n            const psz = dataBlock[psEnd];\r\n            if (psz === 1) {\r\n                break;\r\n            }\r\n            if (psz !== 0) {\r\n                throw new Error(\"Decryption failed\");\r\n            }\r\n        }\r\n        if (psEnd === dataBlock.length) {\r\n            throw new Error(\"Decryption failed\");\r\n        }\r\n        pkcs0 = dataBlock.subarray(psEnd + 1);\r\n        return new Uint8Array(pkcs0).buffer;\r\n    }\r\n    async onExportKey(format, key) {\r\n        return RsaCrypto.exportKey(format, getCryptoKey(key));\r\n    }\r\n    async onImportKey(format, keyData, algorithm, extractable, keyUsages) {\r\n        const key = await RsaCrypto.importKey(format, keyData, { ...algorithm, name: this.name }, extractable, keyUsages);\r\n        return setCryptoKey(key);\r\n    }\r\n    checkCryptoKey(key, keyUsage) {\r\n        super.checkCryptoKey(key, keyUsage);\r\n        const internalKey = getCryptoKey(key);\r\n        if (!(internalKey instanceof RsaPrivateKey || internalKey instanceof RsaPublicKey)) {\r\n            throw new TypeError(\"key: Is not RSA CryptoKey\");\r\n        }\r\n    }\r\n    mgf1(algorithm, seed, length = 0) {\r\n        const hashSize = ShaCrypto.size(algorithm) >> 3;\r\n        const mask = new Uint8Array(length);\r\n        const counter = new Uint8Array(4);\r\n        const chunks = Math.ceil(length / hashSize);\r\n        for (let i = 0; i < chunks; i++) {\r\n            counter[0] = i >>> 24;\r\n            counter[1] = (i >>> 16) & 255;\r\n            counter[2] = (i >>> 8) & 255;\r\n            counter[3] = i & 255;\r\n            const submask = mask.subarray(i * hashSize);\r\n            let chunk = crypto__default.createHash(algorithm.name.replace(\"-\", \"\"))\r\n                .update(seed)\r\n                .update(counter)\r\n                .digest();\r\n            if (chunk.length > submask.length) {\r\n                chunk = chunk.subarray(0, submask.length);\r\n            }\r\n            submask.set(chunk);\r\n        }\r\n        return mask;\r\n    }\r\n}\n\nclass RsaEsProvider extends core.ProviderCrypto {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.name = \"RSAES-PKCS1-v1_5\";\r\n        this.usages = {\r\n            publicKey: [\"encrypt\", \"wrapKey\"],\r\n            privateKey: [\"decrypt\", \"unwrapKey\"],\r\n        };\r\n    }\r\n    async onGenerateKey(algorithm, extractable, keyUsages) {\r\n        const keys = await RsaCrypto.generateKey({\r\n            ...algorithm,\r\n            name: this.name,\r\n        }, extractable, keyUsages);\r\n        return {\r\n            privateKey: setCryptoKey(keys.privateKey),\r\n            publicKey: setCryptoKey(keys.publicKey),\r\n        };\r\n    }\r\n    checkGenerateKeyParams(algorithm) {\r\n        this.checkRequiredProperty(algorithm, \"publicExponent\");\r\n        if (!(algorithm.publicExponent && algorithm.publicExponent instanceof Uint8Array)) {\r\n            throw new TypeError(\"publicExponent: Missing or not a Uint8Array\");\r\n        }\r\n        const publicExponent = Convert.ToBase64(algorithm.publicExponent);\r\n        if (!(publicExponent === \"Aw==\" || publicExponent === \"AQAB\")) {\r\n            throw new TypeError(\"publicExponent: Must be [3] or [1,0,1]\");\r\n        }\r\n        this.checkRequiredProperty(algorithm, \"modulusLength\");\r\n        switch (algorithm.modulusLength) {\r\n            case 1024:\r\n            case 2048:\r\n            case 4096:\r\n                break;\r\n            default:\r\n                throw new TypeError(\"modulusLength: Must be 1024, 2048, or 4096\");\r\n        }\r\n    }\r\n    async onEncrypt(algorithm, key, data) {\r\n        const options = this.toCryptoOptions(key);\r\n        const enc = crypto.publicEncrypt(options, new Uint8Array(data));\r\n        return new Uint8Array(enc).buffer;\r\n    }\r\n    async onDecrypt(algorithm, key, data) {\r\n        const options = this.toCryptoOptions(key);\r\n        const dec = crypto.privateDecrypt(options, new Uint8Array(data));\r\n        return new Uint8Array(dec).buffer;\r\n    }\r\n    async onExportKey(format, key) {\r\n        return RsaCrypto.exportKey(format, getCryptoKey(key));\r\n    }\r\n    async onImportKey(format, keyData, algorithm, extractable, keyUsages) {\r\n        const key = await RsaCrypto.importKey(format, keyData, { ...algorithm, name: this.name }, extractable, keyUsages);\r\n        return setCryptoKey(key);\r\n    }\r\n    checkCryptoKey(key, keyUsage) {\r\n        super.checkCryptoKey(key, keyUsage);\r\n        const internalKey = getCryptoKey(key);\r\n        if (!(internalKey instanceof RsaPrivateKey || internalKey instanceof RsaPublicKey)) {\r\n            throw new TypeError(\"key: Is not RSA CryptoKey\");\r\n        }\r\n    }\r\n    toCryptoOptions(key) {\r\n        const type = key.type.toUpperCase();\r\n        return {\r\n            key: `-----BEGIN ${type} KEY-----\\n${getCryptoKey(key).data.toString(\"base64\")}\\n-----END ${type} KEY-----`,\r\n            padding: crypto.constants.RSA_PKCS1_PADDING,\r\n        };\r\n    }\r\n}\n\nconst namedOIDs = {\r\n    \"1.2.840.10045.3.1.7\": \"P-256\",\r\n    \"P-256\": \"1.2.840.10045.3.1.7\",\r\n    \"1.3.132.0.34\": \"P-384\",\r\n    \"P-384\": \"1.3.132.0.34\",\r\n    \"1.3.132.0.35\": \"P-521\",\r\n    \"P-521\": \"1.3.132.0.35\",\r\n    \"1.3.132.0.10\": \"K-256\",\r\n    \"K-256\": \"1.3.132.0.10\",\r\n    \"brainpoolP160r1\": \"1.3.36.3.3.2.8.1.1.1\",\r\n    \"1.3.36.3.3.2.8.1.1.1\": \"brainpoolP160r1\",\r\n    \"brainpoolP160t1\": \"1.3.36.3.3.2.8.1.1.2\",\r\n    \"1.3.36.3.3.2.8.1.1.2\": \"brainpoolP160t1\",\r\n    \"brainpoolP192r1\": \"1.3.36.3.3.2.8.1.1.3\",\r\n    \"1.3.36.3.3.2.8.1.1.3\": \"brainpoolP192r1\",\r\n    \"brainpoolP192t1\": \"1.3.36.3.3.2.8.1.1.4\",\r\n    \"1.3.36.3.3.2.8.1.1.4\": \"brainpoolP192t1\",\r\n    \"brainpoolP224r1\": \"1.3.36.3.3.2.8.1.1.5\",\r\n    \"1.3.36.3.3.2.8.1.1.5\": \"brainpoolP224r1\",\r\n    \"brainpoolP224t1\": \"1.3.36.3.3.2.8.1.1.6\",\r\n    \"1.3.36.3.3.2.8.1.1.6\": \"brainpoolP224t1\",\r\n    \"brainpoolP256r1\": \"1.3.36.3.3.2.8.1.1.7\",\r\n    \"1.3.36.3.3.2.8.1.1.7\": \"brainpoolP256r1\",\r\n    \"brainpoolP256t1\": \"1.3.36.3.3.2.8.1.1.8\",\r\n    \"1.3.36.3.3.2.8.1.1.8\": \"brainpoolP256t1\",\r\n    \"brainpoolP320r1\": \"1.3.36.3.3.2.8.1.1.9\",\r\n    \"1.3.36.3.3.2.8.1.1.9\": \"brainpoolP320r1\",\r\n    \"brainpoolP320t1\": \"1.3.36.3.3.2.8.1.1.10\",\r\n    \"1.3.36.3.3.2.8.1.1.10\": \"brainpoolP320t1\",\r\n    \"brainpoolP384r1\": \"1.3.36.3.3.2.8.1.1.11\",\r\n    \"1.3.36.3.3.2.8.1.1.11\": \"brainpoolP384r1\",\r\n    \"brainpoolP384t1\": \"1.3.36.3.3.2.8.1.1.12\",\r\n    \"1.3.36.3.3.2.8.1.1.12\": \"brainpoolP384t1\",\r\n    \"brainpoolP512r1\": \"1.3.36.3.3.2.8.1.1.13\",\r\n    \"1.3.36.3.3.2.8.1.1.13\": \"brainpoolP512r1\",\r\n    \"brainpoolP512t1\": \"1.3.36.3.3.2.8.1.1.14\",\r\n    \"1.3.36.3.3.2.8.1.1.14\": \"brainpoolP512t1\",\r\n};\r\nfunction getOidByNamedCurve$1(namedCurve) {\r\n    const oid = namedOIDs[namedCurve];\r\n    if (!oid) {\r\n        throw new core.OperationError(`Cannot convert WebCrypto named curve '${namedCurve}' to OID`);\r\n    }\r\n    return oid;\r\n}\n\nclass EcPrivateKey extends AsymmetricKey {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.type = \"private\";\r\n    }\r\n    getKey() {\r\n        const keyInfo = AsnParser.parse(this.data, core.asn1.PrivateKeyInfo);\r\n        return AsnParser.parse(keyInfo.privateKey, core.asn1.EcPrivateKey);\r\n    }\r\n    toJSON() {\r\n        const key = this.getKey();\r\n        const json = {\r\n            kty: \"EC\",\r\n            crv: this.algorithm.namedCurve,\r\n            key_ops: this.usages,\r\n            ext: this.extractable,\r\n        };\r\n        return Object.assign(json, JsonSerializer.toJSON(key));\r\n    }\r\n    fromJSON(json) {\r\n        if (!json.crv) {\r\n            throw new core.OperationError(`Cannot get named curve from JWK. Property 'crv' is required`);\r\n        }\r\n        const keyInfo = new core.asn1.PrivateKeyInfo();\r\n        keyInfo.privateKeyAlgorithm.algorithm = \"1.2.840.10045.2.1\";\r\n        keyInfo.privateKeyAlgorithm.parameters = AsnSerializer.serialize(new core.asn1.ObjectIdentifier(getOidByNamedCurve$1(json.crv)));\r\n        const key = JsonParser.fromJSON(json, { targetSchema: core.asn1.EcPrivateKey });\r\n        keyInfo.privateKey = AsnSerializer.serialize(key);\r\n        this.data = Buffer.from(AsnSerializer.serialize(keyInfo));\r\n        return this;\r\n    }\r\n}\n\nclass EcPublicKey extends AsymmetricKey {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.type = \"public\";\r\n    }\r\n    getKey() {\r\n        const keyInfo = AsnParser.parse(this.data, core.asn1.PublicKeyInfo);\r\n        return new core.asn1.EcPublicKey(keyInfo.publicKey);\r\n    }\r\n    toJSON() {\r\n        const key = this.getKey();\r\n        const json = {\r\n            kty: \"EC\",\r\n            crv: this.algorithm.namedCurve,\r\n            key_ops: this.usages,\r\n            ext: this.extractable,\r\n        };\r\n        return Object.assign(json, JsonSerializer.toJSON(key));\r\n    }\r\n    fromJSON(json) {\r\n        if (!json.crv) {\r\n            throw new core.OperationError(`Cannot get named curve from JWK. Property 'crv' is required`);\r\n        }\r\n        const key = JsonParser.fromJSON(json, { targetSchema: core.asn1.EcPublicKey });\r\n        const keyInfo = new core.asn1.PublicKeyInfo();\r\n        keyInfo.publicKeyAlgorithm.algorithm = \"1.2.840.10045.2.1\";\r\n        keyInfo.publicKeyAlgorithm.parameters = AsnSerializer.serialize(new core.asn1.ObjectIdentifier(getOidByNamedCurve$1(json.crv)));\r\n        keyInfo.publicKey = AsnSerializer.toASN(key).valueHex;\r\n        this.data = Buffer.from(AsnSerializer.serialize(keyInfo));\r\n        return this;\r\n    }\r\n}\n\nclass Sha1Provider extends core.ProviderCrypto {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.name = \"SHA-1\";\r\n        this.usages = [];\r\n    }\r\n    async onDigest(algorithm, data) {\r\n        return ShaCrypto.digest(algorithm, data);\r\n    }\r\n}\n\nclass Sha256Provider extends core.ProviderCrypto {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.name = \"SHA-256\";\r\n        this.usages = [];\r\n    }\r\n    async onDigest(algorithm, data) {\r\n        return ShaCrypto.digest(algorithm, data);\r\n    }\r\n}\n\nclass Sha384Provider extends core.ProviderCrypto {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.name = \"SHA-384\";\r\n        this.usages = [];\r\n    }\r\n    async onDigest(algorithm, data) {\r\n        return ShaCrypto.digest(algorithm, data);\r\n    }\r\n}\n\nclass Sha512Provider extends core.ProviderCrypto {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.name = \"SHA-512\";\r\n        this.usages = [];\r\n    }\r\n    async onDigest(algorithm, data) {\r\n        return ShaCrypto.digest(algorithm, data);\r\n    }\r\n}\n\nclass Sha3256Provider extends core.ProviderCrypto {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.name = \"SHA3-256\";\r\n        this.usages = [];\r\n    }\r\n    async onDigest(algorithm, data) {\r\n        return ShaCrypto.digest(algorithm, data);\r\n    }\r\n}\n\nclass Sha3384Provider extends core.ProviderCrypto {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.name = \"SHA3-384\";\r\n        this.usages = [];\r\n    }\r\n    async onDigest(algorithm, data) {\r\n        return ShaCrypto.digest(algorithm, data);\r\n    }\r\n}\n\nclass Sha3512Provider extends core.ProviderCrypto {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.name = \"SHA3-512\";\r\n        this.usages = [];\r\n    }\r\n    async onDigest(algorithm, data) {\r\n        return ShaCrypto.digest(algorithm, data);\r\n    }\r\n}\n\nclass EcCrypto {\r\n    static async generateKey(algorithm, extractable, keyUsages) {\r\n        const privateKey = new EcPrivateKey();\r\n        privateKey.algorithm = algorithm;\r\n        privateKey.extractable = extractable;\r\n        privateKey.usages = keyUsages.filter((usage) => this.privateKeyUsages.indexOf(usage) !== -1);\r\n        const publicKey = new EcPublicKey();\r\n        publicKey.algorithm = algorithm;\r\n        publicKey.extractable = true;\r\n        publicKey.usages = keyUsages.filter((usage) => this.publicKeyUsages.indexOf(usage) !== -1);\r\n        const keys = crypto__default.generateKeyPairSync(\"ec\", {\r\n            namedCurve: this.getOpenSSLNamedCurve(algorithm.namedCurve),\r\n            publicKeyEncoding: {\r\n                format: \"der\",\r\n                type: \"spki\",\r\n            },\r\n            privateKeyEncoding: {\r\n                format: \"der\",\r\n                type: \"pkcs8\",\r\n            },\r\n        });\r\n        privateKey.data = keys.privateKey;\r\n        publicKey.data = keys.publicKey;\r\n        const res = {\r\n            privateKey,\r\n            publicKey,\r\n        };\r\n        return res;\r\n    }\r\n    static async sign(algorithm, key, data) {\r\n        const cryptoAlg = ShaCrypto.getAlgorithmName(algorithm.hash);\r\n        const signer = crypto__default.createSign(cryptoAlg);\r\n        signer.update(Buffer.from(data));\r\n        if (!key.pem) {\r\n            key.pem = `-----BEGIN PRIVATE KEY-----\\n${key.data.toString(\"base64\")}\\n-----END PRIVATE KEY-----`;\r\n        }\r\n        const options = {\r\n            key: key.pem,\r\n        };\r\n        const signature = signer.sign(options);\r\n        const ecSignature = AsnParser.parse(signature, core.asn1.EcDsaSignature);\r\n        const signatureRaw = core.EcUtils.encodeSignature(ecSignature, core.EcCurves.get(key.algorithm.namedCurve).size);\r\n        return signatureRaw.buffer;\r\n    }\r\n    static async verify(algorithm, key, signature, data) {\r\n        const cryptoAlg = ShaCrypto.getAlgorithmName(algorithm.hash);\r\n        const signer = crypto__default.createVerify(cryptoAlg);\r\n        signer.update(Buffer.from(data));\r\n        if (!key.pem) {\r\n            key.pem = `-----BEGIN PUBLIC KEY-----\\n${key.data.toString(\"base64\")}\\n-----END PUBLIC KEY-----`;\r\n        }\r\n        const options = {\r\n            key: key.pem,\r\n        };\r\n        const ecSignature = new core.asn1.EcDsaSignature();\r\n        const namedCurve = core.EcCurves.get(key.algorithm.namedCurve);\r\n        const signaturePoint = core.EcUtils.decodeSignature(signature, namedCurve.size);\r\n        ecSignature.r = BufferSourceConverter.toArrayBuffer(signaturePoint.r);\r\n        ecSignature.s = BufferSourceConverter.toArrayBuffer(signaturePoint.s);\r\n        const ecSignatureRaw = Buffer.from(AsnSerializer.serialize(ecSignature));\r\n        const ok = signer.verify(options, ecSignatureRaw);\r\n        return ok;\r\n    }\r\n    static async deriveBits(algorithm, baseKey, length) {\r\n        const cryptoAlg = this.getOpenSSLNamedCurve(baseKey.algorithm.namedCurve);\r\n        const ecdh = crypto__default.createECDH(cryptoAlg);\r\n        const asnPrivateKey = AsnParser.parse(baseKey.data, core.asn1.PrivateKeyInfo);\r\n        const asnEcPrivateKey = AsnParser.parse(asnPrivateKey.privateKey, core.asn1.EcPrivateKey);\r\n        ecdh.setPrivateKey(Buffer.from(asnEcPrivateKey.privateKey));\r\n        const asnPublicKey = AsnParser.parse(algorithm.public.data, core.asn1.PublicKeyInfo);\r\n        const bits = ecdh.computeSecret(Buffer.from(asnPublicKey.publicKey));\r\n        if (length === null) {\r\n            return bits;\r\n        }\r\n        return new Uint8Array(bits).buffer.slice(0, length >> 3);\r\n    }\r\n    static async exportKey(format, key) {\r\n        switch (format.toLowerCase()) {\r\n            case \"jwk\":\r\n                return JsonSerializer.toJSON(key);\r\n            case \"pkcs8\":\r\n            case \"spki\":\r\n                return new Uint8Array(key.data).buffer;\r\n            case \"raw\": {\r\n                const publicKeyInfo = AsnParser.parse(key.data, core.asn1.PublicKeyInfo);\r\n                return publicKeyInfo.publicKey;\r\n            }\r\n            default:\r\n                throw new core.OperationError(\"format: Must be 'jwk', 'raw', pkcs8' or 'spki'\");\r\n        }\r\n    }\r\n    static async importKey(format, keyData, algorithm, extractable, keyUsages) {\r\n        switch (format.toLowerCase()) {\r\n            case \"jwk\": {\r\n                const jwk = keyData;\r\n                if (jwk.d) {\r\n                    const asnKey = JsonParser.fromJSON(keyData, { targetSchema: core.asn1.EcPrivateKey });\r\n                    return this.importPrivateKey(asnKey, algorithm, extractable, keyUsages);\r\n                }\r\n                else {\r\n                    const asnKey = JsonParser.fromJSON(keyData, { targetSchema: core.asn1.EcPublicKey });\r\n                    return this.importPublicKey(asnKey, algorithm, extractable, keyUsages);\r\n                }\r\n            }\r\n            case \"raw\": {\r\n                const asnKey = new core.asn1.EcPublicKey(keyData);\r\n                return this.importPublicKey(asnKey, algorithm, extractable, keyUsages);\r\n            }\r\n            case \"spki\": {\r\n                const keyInfo = AsnParser.parse(new Uint8Array(keyData), core.asn1.PublicKeyInfo);\r\n                const asnKey = new core.asn1.EcPublicKey(keyInfo.publicKey);\r\n                this.assertKeyParameters(keyInfo.publicKeyAlgorithm.parameters, algorithm.namedCurve);\r\n                return this.importPublicKey(asnKey, algorithm, extractable, keyUsages);\r\n            }\r\n            case \"pkcs8\": {\r\n                const keyInfo = AsnParser.parse(new Uint8Array(keyData), core.asn1.PrivateKeyInfo);\r\n                const asnKey = AsnParser.parse(keyInfo.privateKey, core.asn1.EcPrivateKey);\r\n                this.assertKeyParameters(keyInfo.privateKeyAlgorithm.parameters, algorithm.namedCurve);\r\n                return this.importPrivateKey(asnKey, algorithm, extractable, keyUsages);\r\n            }\r\n            default:\r\n                throw new core.OperationError(\"format: Must be 'jwk', 'raw', 'pkcs8' or 'spki'\");\r\n        }\r\n    }\r\n    static assertKeyParameters(parameters, namedCurve) {\r\n        if (!parameters) {\r\n            throw new core.CryptoError(\"Key info doesn't have required parameters\");\r\n        }\r\n        let namedCurveIdentifier = \"\";\r\n        try {\r\n            namedCurveIdentifier = AsnParser.parse(parameters, core.asn1.ObjectIdentifier).value;\r\n        }\r\n        catch (e) {\r\n            throw new core.CryptoError(\"Cannot read key info parameters\");\r\n        }\r\n        if (getOidByNamedCurve$1(namedCurve) !== namedCurveIdentifier) {\r\n            throw new core.CryptoError(\"Key info parameter doesn't match to named curve\");\r\n        }\r\n    }\r\n    static async importPrivateKey(asnKey, algorithm, extractable, keyUsages) {\r\n        const keyInfo = new core.asn1.PrivateKeyInfo();\r\n        keyInfo.privateKeyAlgorithm.algorithm = \"1.2.840.10045.2.1\";\r\n        keyInfo.privateKeyAlgorithm.parameters = AsnSerializer.serialize(new core.asn1.ObjectIdentifier(getOidByNamedCurve$1(algorithm.namedCurve)));\r\n        keyInfo.privateKey = AsnSerializer.serialize(asnKey);\r\n        const key = new EcPrivateKey();\r\n        key.data = Buffer.from(AsnSerializer.serialize(keyInfo));\r\n        key.algorithm = Object.assign({}, algorithm);\r\n        key.extractable = extractable;\r\n        key.usages = keyUsages;\r\n        return key;\r\n    }\r\n    static async importPublicKey(asnKey, algorithm, extractable, keyUsages) {\r\n        const keyInfo = new core.asn1.PublicKeyInfo();\r\n        keyInfo.publicKeyAlgorithm.algorithm = \"1.2.840.10045.2.1\";\r\n        const namedCurve = getOidByNamedCurve$1(algorithm.namedCurve);\r\n        keyInfo.publicKeyAlgorithm.parameters = AsnSerializer.serialize(new core.asn1.ObjectIdentifier(namedCurve));\r\n        keyInfo.publicKey = asnKey.value;\r\n        const key = new EcPublicKey();\r\n        key.data = Buffer.from(AsnSerializer.serialize(keyInfo));\r\n        key.algorithm = Object.assign({}, algorithm);\r\n        key.extractable = extractable;\r\n        key.usages = keyUsages;\r\n        return key;\r\n    }\r\n    static getOpenSSLNamedCurve(curve) {\r\n        switch (curve.toUpperCase()) {\r\n            case \"P-256\":\r\n                return \"prime256v1\";\r\n            case \"K-256\":\r\n                return \"secp256k1\";\r\n            case \"P-384\":\r\n                return \"secp384r1\";\r\n            case \"P-521\":\r\n                return \"secp521r1\";\r\n            default:\r\n                return curve;\r\n        }\r\n    }\r\n}\r\nEcCrypto.publicKeyUsages = [\"verify\"];\r\nEcCrypto.privateKeyUsages = [\"sign\", \"deriveKey\", \"deriveBits\"];\n\nclass EcdsaProvider extends core.EcdsaProvider {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.namedCurves = core.EcCurves.names;\r\n        this.hashAlgorithms = [\r\n            \"SHA-1\", \"SHA-256\", \"SHA-384\", \"SHA-512\",\r\n            \"shake128\", \"shake256\",\r\n            \"SHA3-256\", \"SHA3-384\", \"SHA3-512\"\r\n        ];\r\n    }\r\n    async onGenerateKey(algorithm, extractable, keyUsages) {\r\n        const keys = await EcCrypto.generateKey({\r\n            ...algorithm,\r\n            name: this.name,\r\n        }, extractable, keyUsages);\r\n        return {\r\n            privateKey: setCryptoKey(keys.privateKey),\r\n            publicKey: setCryptoKey(keys.publicKey),\r\n        };\r\n    }\r\n    async onSign(algorithm, key, data) {\r\n        return EcCrypto.sign(algorithm, getCryptoKey(key), new Uint8Array(data));\r\n    }\r\n    async onVerify(algorithm, key, signature, data) {\r\n        return EcCrypto.verify(algorithm, getCryptoKey(key), new Uint8Array(signature), new Uint8Array(data));\r\n    }\r\n    async onExportKey(format, key) {\r\n        return EcCrypto.exportKey(format, getCryptoKey(key));\r\n    }\r\n    async onImportKey(format, keyData, algorithm, extractable, keyUsages) {\r\n        const key = await EcCrypto.importKey(format, keyData, { ...algorithm, name: this.name }, extractable, keyUsages);\r\n        return setCryptoKey(key);\r\n    }\r\n    checkCryptoKey(key, keyUsage) {\r\n        super.checkCryptoKey(key, keyUsage);\r\n        const internalKey = getCryptoKey(key);\r\n        if (!(internalKey instanceof EcPrivateKey || internalKey instanceof EcPublicKey)) {\r\n            throw new TypeError(\"key: Is not EC CryptoKey\");\r\n        }\r\n    }\r\n}\n\nclass EcdhProvider extends core.EcdhProvider {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.namedCurves = core.EcCurves.names;\r\n    }\r\n    async onGenerateKey(algorithm, extractable, keyUsages) {\r\n        const keys = await EcCrypto.generateKey({\r\n            ...algorithm,\r\n            name: this.name,\r\n        }, extractable, keyUsages);\r\n        return {\r\n            privateKey: setCryptoKey(keys.privateKey),\r\n            publicKey: setCryptoKey(keys.publicKey),\r\n        };\r\n    }\r\n    async onExportKey(format, key) {\r\n        return EcCrypto.exportKey(format, getCryptoKey(key));\r\n    }\r\n    async onImportKey(format, keyData, algorithm, extractable, keyUsages) {\r\n        const key = await EcCrypto.importKey(format, keyData, { ...algorithm, name: this.name }, extractable, keyUsages);\r\n        return setCryptoKey(key);\r\n    }\r\n    checkCryptoKey(key, keyUsage) {\r\n        super.checkCryptoKey(key, keyUsage);\r\n        const internalKey = getCryptoKey(key);\r\n        if (!(internalKey instanceof EcPrivateKey || internalKey instanceof EcPublicKey)) {\r\n            throw new TypeError(\"key: Is not EC CryptoKey\");\r\n        }\r\n    }\r\n    async onDeriveBits(algorithm, baseKey, length) {\r\n        const bits = await EcCrypto.deriveBits({ ...algorithm, public: getCryptoKey(algorithm.public) }, getCryptoKey(baseKey), length);\r\n        return bits;\r\n    }\r\n}\n\nconst edOIDs = {\r\n    [core.asn1.idEd448]: \"Ed448\",\r\n    \"ed448\": core.asn1.idEd448,\r\n    [core.asn1.idX448]: \"X448\",\r\n    \"x448\": core.asn1.idX448,\r\n    [core.asn1.idEd25519]: \"Ed25519\",\r\n    \"ed25519\": core.asn1.idEd25519,\r\n    [core.asn1.idX25519]: \"X25519\",\r\n    \"x25519\": core.asn1.idX25519,\r\n};\r\nfunction getOidByNamedCurve(namedCurve) {\r\n    const oid = edOIDs[namedCurve.toLowerCase()];\r\n    if (!oid) {\r\n        throw new core.OperationError(`Cannot convert WebCrypto named curve '${namedCurve}' to OID`);\r\n    }\r\n    return oid;\r\n}\n\nclass EdPrivateKey extends AsymmetricKey {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.type = \"private\";\r\n    }\r\n    getKey() {\r\n        const keyInfo = AsnParser.parse(this.data, core.asn1.PrivateKeyInfo);\r\n        return AsnParser.parse(keyInfo.privateKey, core.asn1.CurvePrivateKey);\r\n    }\r\n    toJSON() {\r\n        const key = this.getKey();\r\n        const json = {\r\n            kty: \"OKP\",\r\n            crv: this.algorithm.namedCurve,\r\n            key_ops: this.usages,\r\n            ext: this.extractable,\r\n        };\r\n        return Object.assign(json, JsonSerializer.toJSON(key));\r\n    }\r\n    fromJSON(json) {\r\n        if (!json.crv) {\r\n            throw new core.OperationError(`Cannot get named curve from JWK. Property 'crv' is required`);\r\n        }\r\n        const keyInfo = new core.asn1.PrivateKeyInfo();\r\n        keyInfo.privateKeyAlgorithm.algorithm = getOidByNamedCurve(json.crv);\r\n        const key = JsonParser.fromJSON(json, { targetSchema: core.asn1.CurvePrivateKey });\r\n        keyInfo.privateKey = AsnSerializer.serialize(key);\r\n        this.data = Buffer.from(AsnSerializer.serialize(keyInfo));\r\n        return this;\r\n    }\r\n}\n\nclass EdPublicKey extends AsymmetricKey {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.type = \"public\";\r\n    }\r\n    getKey() {\r\n        const keyInfo = AsnParser.parse(this.data, core.asn1.PublicKeyInfo);\r\n        return keyInfo.publicKey;\r\n    }\r\n    toJSON() {\r\n        const key = this.getKey();\r\n        const json = {\r\n            kty: \"OKP\",\r\n            crv: this.algorithm.namedCurve,\r\n            key_ops: this.usages,\r\n            ext: this.extractable,\r\n        };\r\n        return Object.assign(json, {\r\n            x: Convert.ToBase64Url(key)\r\n        });\r\n    }\r\n    fromJSON(json) {\r\n        if (!json.crv) {\r\n            throw new core.OperationError(`Cannot get named curve from JWK. Property 'crv' is required`);\r\n        }\r\n        if (!json.x) {\r\n            throw new core.OperationError(`Cannot get property from JWK. Property 'x' is required`);\r\n        }\r\n        const keyInfo = new core.asn1.PublicKeyInfo();\r\n        keyInfo.publicKeyAlgorithm.algorithm = getOidByNamedCurve(json.crv);\r\n        keyInfo.publicKey = Convert.FromBase64Url(json.x);\r\n        this.data = Buffer.from(AsnSerializer.serialize(keyInfo));\r\n        return this;\r\n    }\r\n}\n\nclass EdCrypto {\r\n    static async generateKey(algorithm, extractable, keyUsages) {\r\n        const privateKey = new EdPrivateKey();\r\n        privateKey.algorithm = algorithm;\r\n        privateKey.extractable = extractable;\r\n        privateKey.usages = keyUsages.filter((usage) => this.privateKeyUsages.indexOf(usage) !== -1);\r\n        const publicKey = new EdPublicKey();\r\n        publicKey.algorithm = algorithm;\r\n        publicKey.extractable = true;\r\n        publicKey.usages = keyUsages.filter((usage) => this.publicKeyUsages.indexOf(usage) !== -1);\r\n        const type = algorithm.namedCurve.toLowerCase();\r\n        const keys = crypto__default.generateKeyPairSync(type, {\r\n            publicKeyEncoding: {\r\n                format: \"der\",\r\n                type: \"spki\",\r\n            },\r\n            privateKeyEncoding: {\r\n                format: \"der\",\r\n                type: \"pkcs8\",\r\n            },\r\n        });\r\n        privateKey.data = keys.privateKey;\r\n        publicKey.data = keys.publicKey;\r\n        const res = {\r\n            privateKey,\r\n            publicKey,\r\n        };\r\n        return res;\r\n    }\r\n    static async sign(algorithm, key, data) {\r\n        if (!key.pem) {\r\n            key.pem = `-----BEGIN PRIVATE KEY-----\\n${key.data.toString(\"base64\")}\\n-----END PRIVATE KEY-----`;\r\n        }\r\n        const options = {\r\n            key: key.pem,\r\n        };\r\n        const signature = crypto__default.sign(null, Buffer.from(data), options);\r\n        return core.BufferSourceConverter.toArrayBuffer(signature);\r\n    }\r\n    static async verify(algorithm, key, signature, data) {\r\n        if (!key.pem) {\r\n            key.pem = `-----BEGIN PUBLIC KEY-----\\n${key.data.toString(\"base64\")}\\n-----END PUBLIC KEY-----`;\r\n        }\r\n        const options = {\r\n            key: key.pem,\r\n        };\r\n        const ok = crypto__default.verify(null, Buffer.from(data), options, Buffer.from(signature));\r\n        return ok;\r\n    }\r\n    static async deriveBits(algorithm, baseKey, length) {\r\n        const publicKey = crypto__default.createPublicKey({\r\n            key: algorithm.public.data,\r\n            format: \"der\",\r\n            type: \"spki\",\r\n        });\r\n        const privateKey = crypto__default.createPrivateKey({\r\n            key: baseKey.data,\r\n            format: \"der\",\r\n            type: \"pkcs8\",\r\n        });\r\n        const bits = crypto__default.diffieHellman({\r\n            publicKey,\r\n            privateKey,\r\n        });\r\n        return new Uint8Array(bits).buffer.slice(0, length >> 3);\r\n    }\r\n    static async exportKey(format, key) {\r\n        switch (format.toLowerCase()) {\r\n            case \"jwk\":\r\n                return JsonSerializer.toJSON(key);\r\n            case \"pkcs8\":\r\n            case \"spki\":\r\n                return new Uint8Array(key.data).buffer;\r\n            case \"raw\": {\r\n                const publicKeyInfo = AsnParser.parse(key.data, core.asn1.PublicKeyInfo);\r\n                return publicKeyInfo.publicKey;\r\n            }\r\n            default:\r\n                throw new core.OperationError(\"format: Must be 'jwk', 'raw', pkcs8' or 'spki'\");\r\n        }\r\n    }\r\n    static async importKey(format, keyData, algorithm, extractable, keyUsages) {\r\n        switch (format.toLowerCase()) {\r\n            case \"jwk\": {\r\n                const jwk = keyData;\r\n                if (jwk.d) {\r\n                    const asnKey = JsonParser.fromJSON(keyData, { targetSchema: core.asn1.CurvePrivateKey });\r\n                    return this.importPrivateKey(asnKey, algorithm, extractable, keyUsages);\r\n                }\r\n                else {\r\n                    if (!jwk.x) {\r\n                        throw new TypeError(\"keyData: Cannot get required 'x' filed\");\r\n                    }\r\n                    return this.importPublicKey(Convert.FromBase64Url(jwk.x), algorithm, extractable, keyUsages);\r\n                }\r\n            }\r\n            case \"raw\": {\r\n                return this.importPublicKey(keyData, algorithm, extractable, keyUsages);\r\n            }\r\n            case \"spki\": {\r\n                const keyInfo = AsnParser.parse(new Uint8Array(keyData), core.asn1.PublicKeyInfo);\r\n                return this.importPublicKey(keyInfo.publicKey, algorithm, extractable, keyUsages);\r\n            }\r\n            case \"pkcs8\": {\r\n                const keyInfo = AsnParser.parse(new Uint8Array(keyData), core.asn1.PrivateKeyInfo);\r\n                const asnKey = AsnParser.parse(keyInfo.privateKey, core.asn1.CurvePrivateKey);\r\n                return this.importPrivateKey(asnKey, algorithm, extractable, keyUsages);\r\n            }\r\n            default:\r\n                throw new core.OperationError(\"format: Must be 'jwk', 'raw', 'pkcs8' or 'spki'\");\r\n        }\r\n    }\r\n    static importPrivateKey(asnKey, algorithm, extractable, keyUsages) {\r\n        const key = new EdPrivateKey();\r\n        key.fromJSON({\r\n            crv: algorithm.namedCurve,\r\n            d: Convert.ToBase64Url(asnKey.d),\r\n        });\r\n        key.algorithm = Object.assign({}, algorithm);\r\n        key.extractable = extractable;\r\n        key.usages = keyUsages;\r\n        return key;\r\n    }\r\n    static async importPublicKey(asnKey, algorithm, extractable, keyUsages) {\r\n        const key = new EdPublicKey();\r\n        key.fromJSON({\r\n            crv: algorithm.namedCurve,\r\n            x: Convert.ToBase64Url(asnKey),\r\n        });\r\n        key.algorithm = Object.assign({}, algorithm);\r\n        key.extractable = extractable;\r\n        key.usages = keyUsages;\r\n        return key;\r\n    }\r\n}\r\nEdCrypto.publicKeyUsages = [\"verify\"];\r\nEdCrypto.privateKeyUsages = [\"sign\", \"deriveKey\", \"deriveBits\"];\n\nclass EdDsaProvider extends core.EdDsaProvider {\r\n    async onGenerateKey(algorithm, extractable, keyUsages) {\r\n        const keys = await EdCrypto.generateKey({\r\n            name: this.name,\r\n            namedCurve: algorithm.namedCurve.replace(/^ed/i, \"Ed\"),\r\n        }, extractable, keyUsages);\r\n        return {\r\n            privateKey: setCryptoKey(keys.privateKey),\r\n            publicKey: setCryptoKey(keys.publicKey),\r\n        };\r\n    }\r\n    async onSign(algorithm, key, data) {\r\n        return EdCrypto.sign(algorithm, getCryptoKey(key), new Uint8Array(data));\r\n    }\r\n    async onVerify(algorithm, key, signature, data) {\r\n        return EdCrypto.verify(algorithm, getCryptoKey(key), new Uint8Array(signature), new Uint8Array(data));\r\n    }\r\n    async onExportKey(format, key) {\r\n        return EdCrypto.exportKey(format, getCryptoKey(key));\r\n    }\r\n    async onImportKey(format, keyData, algorithm, extractable, keyUsages) {\r\n        const key = await EdCrypto.importKey(format, keyData, { ...algorithm, name: this.name }, extractable, keyUsages);\r\n        return setCryptoKey(key);\r\n    }\r\n}\n\nclass EcdhEsProvider extends core.EcdhEsProvider {\r\n    async onGenerateKey(algorithm, extractable, keyUsages) {\r\n        const keys = await EdCrypto.generateKey({\r\n            name: this.name,\r\n            namedCurve: algorithm.namedCurve.toUpperCase(),\r\n        }, extractable, keyUsages);\r\n        return {\r\n            privateKey: setCryptoKey(keys.privateKey),\r\n            publicKey: setCryptoKey(keys.publicKey),\r\n        };\r\n    }\r\n    async onDeriveBits(algorithm, baseKey, length) {\r\n        const bits = await EdCrypto.deriveBits({ ...algorithm, public: getCryptoKey(algorithm.public) }, getCryptoKey(baseKey), length);\r\n        return bits;\r\n    }\r\n    async onExportKey(format, key) {\r\n        return EdCrypto.exportKey(format, getCryptoKey(key));\r\n    }\r\n    async onImportKey(format, keyData, algorithm, extractable, keyUsages) {\r\n        const key = await EdCrypto.importKey(format, keyData, { ...algorithm, name: this.name }, extractable, keyUsages);\r\n        return setCryptoKey(key);\r\n    }\r\n}\n\nclass PbkdfCryptoKey extends CryptoKey {\r\n}\n\nclass Pbkdf2Provider extends core.Pbkdf2Provider {\r\n    async onDeriveBits(algorithm, baseKey, length) {\r\n        return new Promise((resolve, reject) => {\r\n            const salt = core.BufferSourceConverter.toArrayBuffer(algorithm.salt);\r\n            const hash = algorithm.hash.name.replace(\"-\", \"\");\r\n            crypto__default.pbkdf2(getCryptoKey(baseKey).data, Buffer.from(salt), algorithm.iterations, length >> 3, hash, (err, derivedBits) => {\r\n                if (err) {\r\n                    reject(err);\r\n                }\r\n                else {\r\n                    resolve(new Uint8Array(derivedBits).buffer);\r\n                }\r\n            });\r\n        });\r\n    }\r\n    async onImportKey(format, keyData, algorithm, extractable, keyUsages) {\r\n        if (format === \"raw\") {\r\n            const key = new PbkdfCryptoKey();\r\n            key.data = Buffer.from(keyData);\r\n            key.algorithm = { name: this.name };\r\n            key.extractable = false;\r\n            key.usages = keyUsages;\r\n            return setCryptoKey(key);\r\n        }\r\n        throw new core.OperationError(\"format: Must be 'raw'\");\r\n    }\r\n    checkCryptoKey(key, keyUsage) {\r\n        super.checkCryptoKey(key, keyUsage);\r\n        if (!(getCryptoKey(key) instanceof PbkdfCryptoKey)) {\r\n            throw new TypeError(\"key: Is not PBKDF CryptoKey\");\r\n        }\r\n    }\r\n}\n\nclass HmacCryptoKey extends CryptoKey {\r\n    get alg() {\r\n        const hash = this.algorithm.hash.name.toUpperCase();\r\n        return `HS${hash.replace(\"SHA-\", \"\")}`;\r\n    }\r\n    set alg(value) {\r\n    }\r\n}\r\n__decorate([\r\n    JsonProp({ name: \"k\", converter: JsonBase64UrlConverter })\r\n], HmacCryptoKey.prototype, \"data\", void 0);\n\nclass HmacProvider extends core.HmacProvider {\r\n    async onGenerateKey(algorithm, extractable, keyUsages) {\r\n        const length = (algorithm.length || this.getDefaultLength(algorithm.hash.name)) >> 3 << 3;\r\n        const key = new HmacCryptoKey();\r\n        key.algorithm = {\r\n            ...algorithm,\r\n            length,\r\n            name: this.name,\r\n        };\r\n        key.extractable = extractable;\r\n        key.usages = keyUsages;\r\n        key.data = crypto__default.randomBytes(length >> 3);\r\n        return setCryptoKey(key);\r\n    }\r\n    async onSign(algorithm, key, data) {\r\n        const cryptoAlg = ShaCrypto.getAlgorithmName(key.algorithm.hash);\r\n        const hmac = crypto__default.createHmac(cryptoAlg, getCryptoKey(key).data)\r\n            .update(Buffer.from(data)).digest();\r\n        return new Uint8Array(hmac).buffer;\r\n    }\r\n    async onVerify(algorithm, key, signature, data) {\r\n        const cryptoAlg = ShaCrypto.getAlgorithmName(key.algorithm.hash);\r\n        const hmac = crypto__default.createHmac(cryptoAlg, getCryptoKey(key).data)\r\n            .update(Buffer.from(data)).digest();\r\n        return hmac.compare(Buffer.from(signature)) === 0;\r\n    }\r\n    async onImportKey(format, keyData, algorithm, extractable, keyUsages) {\r\n        let key;\r\n        switch (format.toLowerCase()) {\r\n            case \"jwk\":\r\n                key = JsonParser.fromJSON(keyData, { targetSchema: HmacCryptoKey });\r\n                break;\r\n            case \"raw\":\r\n                key = new HmacCryptoKey();\r\n                key.data = Buffer.from(keyData);\r\n                break;\r\n            default:\r\n                throw new core.OperationError(\"format: Must be 'jwk' or 'raw'\");\r\n        }\r\n        key.algorithm = {\r\n            hash: { name: algorithm.hash.name },\r\n            name: this.name,\r\n            length: key.data.length << 3,\r\n        };\r\n        key.extractable = extractable;\r\n        key.usages = keyUsages;\r\n        return setCryptoKey(key);\r\n    }\r\n    async onExportKey(format, key) {\r\n        switch (format.toLowerCase()) {\r\n            case \"jwk\":\r\n                return JsonSerializer.toJSON(getCryptoKey(key));\r\n            case \"raw\":\r\n                return new Uint8Array(getCryptoKey(key).data).buffer;\r\n            default:\r\n                throw new core.OperationError(\"format: Must be 'jwk' or 'raw'\");\r\n        }\r\n    }\r\n    checkCryptoKey(key, keyUsage) {\r\n        super.checkCryptoKey(key, keyUsage);\r\n        if (!(getCryptoKey(key) instanceof HmacCryptoKey)) {\r\n            throw new TypeError(\"key: Is not HMAC CryptoKey\");\r\n        }\r\n    }\r\n}\n\nclass HkdfCryptoKey extends CryptoKey {\r\n}\n\nclass HkdfProvider extends core.HkdfProvider {\r\n    async onImportKey(format, keyData, algorithm, extractable, keyUsages) {\r\n        if (format.toLowerCase() !== \"raw\") {\r\n            throw new core.OperationError(\"Operation not supported\");\r\n        }\r\n        const key = new HkdfCryptoKey();\r\n        key.data = Buffer.from(keyData);\r\n        key.algorithm = { name: this.name };\r\n        key.extractable = extractable;\r\n        key.usages = keyUsages;\r\n        return setCryptoKey(key);\r\n    }\r\n    async onDeriveBits(params, baseKey, length) {\r\n        const hash = params.hash.name.replace(\"-\", \"\");\r\n        const hashLength = crypto__default.createHash(hash).digest().length;\r\n        const byteLength = length / 8;\r\n        const info = BufferSourceConverter$1.toUint8Array(params.info);\r\n        const PRK = crypto__default.createHmac(hash, BufferSourceConverter$1.toUint8Array(params.salt))\r\n            .update(BufferSourceConverter$1.toUint8Array(getCryptoKey(baseKey).data))\r\n            .digest();\r\n        const blocks = [Buffer.alloc(0)];\r\n        const blockCount = Math.ceil(byteLength / hashLength) + 1;\r\n        for (let i = 1; i < blockCount; ++i) {\r\n            blocks.push(crypto__default.createHmac(hash, PRK)\r\n                .update(Buffer.concat([blocks[i - 1], info, Buffer.from([i])]))\r\n                .digest());\r\n        }\r\n        return Buffer.concat(blocks).slice(0, byteLength);\r\n    }\r\n    checkCryptoKey(key, keyUsage) {\r\n        super.checkCryptoKey(key, keyUsage);\r\n        if (!(getCryptoKey(key) instanceof HkdfCryptoKey)) {\r\n            throw new TypeError(\"key: Is not HKDF CryptoKey\");\r\n        }\r\n    }\r\n}\n\nclass ShakeCrypto {\r\n    static digest(algorithm, data) {\r\n        const hash = crypto__default.createHash(algorithm.name.toLowerCase(), { outputLength: algorithm.length })\r\n            .update(Buffer.from(data)).digest();\r\n        return new Uint8Array(hash).buffer;\r\n    }\r\n}\n\nclass Shake128Provider extends core.Shake128Provider {\r\n    async onDigest(algorithm, data) {\r\n        return ShakeCrypto.digest(algorithm, data);\r\n    }\r\n}\n\nclass Shake256Provider extends core.Shake256Provider {\r\n    async onDigest(algorithm, data) {\r\n        return ShakeCrypto.digest(algorithm, data);\r\n    }\r\n}\n\nclass SubtleCrypto extends core.SubtleCrypto {\r\n    constructor() {\r\n        var _a;\r\n        super();\r\n        this.providers.set(new AesCbcProvider());\r\n        this.providers.set(new AesCtrProvider());\r\n        this.providers.set(new AesGcmProvider());\r\n        this.providers.set(new AesCmacProvider());\r\n        this.providers.set(new AesKwProvider());\r\n        this.providers.set(new AesEcbProvider());\r\n        this.providers.set(new DesCbcProvider());\r\n        this.providers.set(new DesEde3CbcProvider());\r\n        this.providers.set(new RsaSsaProvider());\r\n        this.providers.set(new RsaPssProvider());\r\n        this.providers.set(new RsaOaepProvider());\r\n        this.providers.set(new RsaEsProvider());\r\n        this.providers.set(new EcdsaProvider());\r\n        this.providers.set(new EcdhProvider());\r\n        this.providers.set(new Sha1Provider());\r\n        this.providers.set(new Sha256Provider());\r\n        this.providers.set(new Sha384Provider());\r\n        this.providers.set(new Sha512Provider());\r\n        this.providers.set(new Pbkdf2Provider());\r\n        this.providers.set(new HmacProvider());\r\n        this.providers.set(new HkdfProvider());\r\n        const nodeMajorVersion = (_a = /^v(\\d+)/.exec(process.version)) === null || _a === void 0 ? void 0 : _a[1];\r\n        if (nodeMajorVersion && parseInt(nodeMajorVersion, 10) >= 12) {\r\n            this.providers.set(new Shake128Provider());\r\n            this.providers.set(new Shake256Provider());\r\n        }\r\n        const hashes = crypto.getHashes();\r\n        if (hashes.includes(\"sha3-256\")) {\r\n            this.providers.set(new Sha3256Provider());\r\n        }\r\n        if (hashes.includes(\"sha3-384\")) {\r\n            this.providers.set(new Sha3384Provider());\r\n        }\r\n        if (hashes.includes(\"sha3-512\")) {\r\n            this.providers.set(new Sha3512Provider());\r\n        }\r\n        if (nodeMajorVersion && parseInt(nodeMajorVersion, 10) >= 14) {\r\n            this.providers.set(new EdDsaProvider());\r\n            this.providers.set(new EcdhEsProvider());\r\n        }\r\n    }\r\n}\n\nclass Crypto extends core.Crypto {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.subtle = new SubtleCrypto();\r\n    }\r\n    getRandomValues(array) {\r\n        if (!ArrayBuffer.isView(array)) {\r\n            throw new TypeError(\"Failed to execute 'getRandomValues' on 'Crypto': parameter 1 is not of type 'ArrayBufferView'\");\r\n        }\r\n        const buffer = Buffer.from(array.buffer, array.byteOffset, array.byteLength);\r\n        crypto__default.randomFillSync(buffer);\r\n        return array;\r\n    }\r\n}\n\nexport { Crypto };\n","var RelativeDistinguishedName_1, RDNSequence_1, Name_1;\nimport { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes, AsnType, AsnTypeTypes, AsnArray } from \"@peculiar/asn1-schema\";\nimport { Convert } from \"pvtsutils\";\nlet DirectoryString = class DirectoryString {\n    constructor(params = {}) {\n        Object.assign(this, params);\n    }\n    toString() {\n        return this.bmpString || this.printableString || this.teletexString || this.universalString\n            || this.utf8String || \"\";\n    }\n};\n__decorate([\n    AsnProp({ type: AsnPropTypes.TeletexString })\n], DirectoryString.prototype, \"teletexString\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.PrintableString })\n], DirectoryString.prototype, \"printableString\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.UniversalString })\n], DirectoryString.prototype, \"universalString\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Utf8String })\n], DirectoryString.prototype, \"utf8String\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.BmpString })\n], DirectoryString.prototype, \"bmpString\", void 0);\nDirectoryString = __decorate([\n    AsnType({ type: AsnTypeTypes.Choice })\n], DirectoryString);\nexport { DirectoryString };\nlet AttributeValue = class AttributeValue extends DirectoryString {\n    constructor(params = {}) {\n        super(params);\n        Object.assign(this, params);\n    }\n    toString() {\n        return this.ia5String || (this.anyValue ? Convert.ToHex(this.anyValue) : super.toString());\n    }\n};\n__decorate([\n    AsnProp({ type: AsnPropTypes.IA5String })\n], AttributeValue.prototype, \"ia5String\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Any })\n], AttributeValue.prototype, \"anyValue\", void 0);\nAttributeValue = __decorate([\n    AsnType({ type: AsnTypeTypes.Choice })\n], AttributeValue);\nexport { AttributeValue };\nexport class AttributeTypeAndValue {\n    constructor(params = {}) {\n        this.type = \"\";\n        this.value = new AttributeValue();\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AsnPropTypes.ObjectIdentifier })\n], AttributeTypeAndValue.prototype, \"type\", void 0);\n__decorate([\n    AsnProp({ type: AttributeValue })\n], AttributeTypeAndValue.prototype, \"value\", void 0);\nlet RelativeDistinguishedName = RelativeDistinguishedName_1 = class RelativeDistinguishedName extends AsnArray {\n    constructor(items) {\n        super(items);\n        Object.setPrototypeOf(this, RelativeDistinguishedName_1.prototype);\n    }\n};\nRelativeDistinguishedName = RelativeDistinguishedName_1 = __decorate([\n    AsnType({ type: AsnTypeTypes.Set, itemType: AttributeTypeAndValue })\n], RelativeDistinguishedName);\nexport { RelativeDistinguishedName };\nlet RDNSequence = RDNSequence_1 = class RDNSequence extends AsnArray {\n    constructor(items) {\n        super(items);\n        Object.setPrototypeOf(this, RDNSequence_1.prototype);\n    }\n};\nRDNSequence = RDNSequence_1 = __decorate([\n    AsnType({ type: AsnTypeTypes.Sequence, itemType: RelativeDistinguishedName })\n], RDNSequence);\nexport { RDNSequence };\nlet Name = Name_1 = class Name extends RDNSequence {\n    constructor(items) {\n        super(items);\n        Object.setPrototypeOf(this, Name_1.prototype);\n    }\n};\nName = Name_1 = __decorate([\n    AsnType({ type: AsnTypeTypes.Sequence })\n], Name);\nexport { Name };\n","import * as ip from \"ipaddr.js\";\nimport { Convert } from \"pvtsutils\";\nexport class IpConverter {\n    static decodeIP(value) {\n        if (value.length === 64 && parseInt(value, 16) === 0) {\n            return \"::/0\";\n        }\n        if (value.length !== 16) {\n            return value;\n        }\n        const mask = parseInt(value.slice(8), 16)\n            .toString(2)\n            .split('')\n            .reduce((a, k) => a + (+k), 0);\n        let ip = value.slice(0, 8)\n            .replace(/(.{2})/g, match => `${parseInt(match, 16)}.`);\n        ip = ip.slice(0, -1);\n        return `${ip}/${mask}`;\n    }\n    static toString(buf) {\n        if (buf.byteLength === 4 || buf.byteLength === 16) {\n            const uint8 = new Uint8Array(buf);\n            const addr = ip.fromByteArray(Array.from(uint8));\n            return addr.toString();\n        }\n        return this.decodeIP(Convert.ToHex(buf));\n    }\n    static fromString(text) {\n        const addr = ip.parse(text);\n        return new Uint8Array(addr.toByteArray()).buffer;\n    }\n}\n","import { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes, AsnType, AsnTypeTypes, AsnOctetStringConverter } from \"@peculiar/asn1-schema\";\nimport { IpConverter } from \"./ip_converter\";\nimport { DirectoryString, Name } from \"./name\";\nexport const AsnIpConverter = {\n    fromASN: (value) => IpConverter.toString(AsnOctetStringConverter.fromASN(value)),\n    toASN: (value) => AsnOctetStringConverter.toASN(IpConverter.fromString(value)),\n};\nexport class OtherName {\n    constructor(params = {}) {\n        this.typeId = \"\";\n        this.value = new ArrayBuffer(0);\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AsnPropTypes.ObjectIdentifier })\n], OtherName.prototype, \"typeId\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Any, context: 0 })\n], OtherName.prototype, \"value\", void 0);\nexport class EDIPartyName {\n    constructor(params = {}) {\n        this.partyName = new ArrayBuffer(0);\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: DirectoryString, optional: true, context: 0, implicit: true })\n], EDIPartyName.prototype, \"nameAssigner\", void 0);\n__decorate([\n    AsnProp({ type: DirectoryString, context: 1, implicit: true })\n], EDIPartyName.prototype, \"partyName\", void 0);\nlet GeneralName = class GeneralName {\n    constructor(params = {}) {\n        Object.assign(this, params);\n    }\n};\n__decorate([\n    AsnProp({ type: OtherName, context: 0, implicit: true })\n], GeneralName.prototype, \"otherName\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.IA5String, context: 1, implicit: true })\n], GeneralName.prototype, \"rfc822Name\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.IA5String, context: 2, implicit: true })\n], GeneralName.prototype, \"dNSName\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Any, context: 3, implicit: true })\n], GeneralName.prototype, \"x400Address\", void 0);\n__decorate([\n    AsnProp({ type: Name, context: 4, implicit: false })\n], GeneralName.prototype, \"directoryName\", void 0);\n__decorate([\n    AsnProp({ type: EDIPartyName, context: 5 })\n], GeneralName.prototype, \"ediPartyName\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.IA5String, context: 6, implicit: true })\n], GeneralName.prototype, \"uniformResourceIdentifier\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.OctetString, context: 7, implicit: true, converter: AsnIpConverter })\n], GeneralName.prototype, \"iPAddress\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.ObjectIdentifier, context: 8, implicit: true })\n], GeneralName.prototype, \"registeredID\", void 0);\nGeneralName = __decorate([\n    AsnType({ type: AsnTypeTypes.Choice })\n], GeneralName);\nexport { GeneralName };\n","export const id_pkix = \"1.3.6.1.5.5.7\";\nexport const id_pe = `${id_pkix}.1`;\nexport const id_qt = `${id_pkix}.2`;\nexport const id_kp = `${id_pkix}.3`;\nexport const id_ad = `${id_pkix}.48`;\nexport const id_qt_csp = `${id_qt}.1`;\nexport const id_qt_unotice = `${id_qt}.2`;\nexport const id_ad_ocsp = `${id_ad}.1`;\nexport const id_ad_caIssuers = `${id_ad}.2`;\nexport const id_ad_timeStamping = `${id_ad}.3`;\nexport const id_ad_caRepository = `${id_ad}.5`;\nexport const id_ce = \"2.5.29\";\n","var AuthorityInfoAccessSyntax_1;\nimport { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes, AsnArray, AsnType, AsnTypeTypes } from \"@peculiar/asn1-schema\";\nimport { GeneralName } from \"../general_name\";\nimport { id_pe } from \"../object_identifiers\";\nexport const id_pe_authorityInfoAccess = `${id_pe}.1`;\nexport class AccessDescription {\n    constructor(params = {}) {\n        this.accessMethod = \"\";\n        this.accessLocation = new GeneralName();\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AsnPropTypes.ObjectIdentifier })\n], AccessDescription.prototype, \"accessMethod\", void 0);\n__decorate([\n    AsnProp({ type: GeneralName })\n], AccessDescription.prototype, \"accessLocation\", void 0);\nlet AuthorityInfoAccessSyntax = AuthorityInfoAccessSyntax_1 = class AuthorityInfoAccessSyntax extends AsnArray {\n    constructor(items) {\n        super(items);\n        Object.setPrototypeOf(this, AuthorityInfoAccessSyntax_1.prototype);\n    }\n};\nAuthorityInfoAccessSyntax = AuthorityInfoAccessSyntax_1 = __decorate([\n    AsnType({ type: AsnTypeTypes.Sequence, itemType: AccessDescription })\n], AuthorityInfoAccessSyntax);\nexport { AuthorityInfoAccessSyntax };\n","import { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes, AsnIntegerArrayBufferConverter, OctetString } from \"@peculiar/asn1-schema\";\nimport { GeneralName } from \"../general_name\";\nimport { id_ce } from \"../object_identifiers\";\nexport const id_ce_authorityKeyIdentifier = `${id_ce}.35`;\nexport class KeyIdentifier extends OctetString {\n}\nexport class AuthorityKeyIdentifier {\n    constructor(params = {}) {\n        if (params) {\n            Object.assign(this, params);\n        }\n    }\n}\n__decorate([\n    AsnProp({ type: KeyIdentifier, context: 0, optional: true, implicit: true })\n], AuthorityKeyIdentifier.prototype, \"keyIdentifier\", void 0);\n__decorate([\n    AsnProp({ type: GeneralName, context: 1, optional: true, implicit: true, repeated: \"sequence\" })\n], AuthorityKeyIdentifier.prototype, \"authorityCertIssuer\", void 0);\n__decorate([\n    AsnProp({\n        type: AsnPropTypes.Integer,\n        context: 2,\n        optional: true,\n        implicit: true,\n        converter: AsnIntegerArrayBufferConverter,\n    })\n], AuthorityKeyIdentifier.prototype, \"authorityCertSerialNumber\", void 0);\n","import { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes } from \"@peculiar/asn1-schema\";\nimport { id_ce } from \"../object_identifiers\";\nexport const id_ce_basicConstraints = `${id_ce}.19`;\nexport class BasicConstraints {\n    constructor(params = {}) {\n        this.cA = false;\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AsnPropTypes.Boolean, defaultValue: false })\n], BasicConstraints.prototype, \"cA\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer, optional: true })\n], BasicConstraints.prototype, \"pathLenConstraint\", void 0);\n","var GeneralNames_1;\nimport { __decorate } from \"tslib\";\nimport { AsnType, AsnTypeTypes } from \"@peculiar/asn1-schema\";\nimport { GeneralName } from \"./general_name\";\nimport { AsnArray } from \"@peculiar/asn1-schema\";\nlet GeneralNames = GeneralNames_1 = class GeneralNames extends AsnArray {\n    constructor(items) {\n        super(items);\n        Object.setPrototypeOf(this, GeneralNames_1.prototype);\n    }\n};\nGeneralNames = GeneralNames_1 = __decorate([\n    AsnType({ type: AsnTypeTypes.Sequence, itemType: GeneralName })\n], GeneralNames);\nexport { GeneralNames };\n","var CertificateIssuer_1;\nimport { __decorate } from \"tslib\";\nimport { AsnType, AsnTypeTypes } from \"@peculiar/asn1-schema\";\nimport { GeneralNames } from \"../general_names\";\nimport { id_ce } from \"../object_identifiers\";\nexport const id_ce_certificateIssuer = `${id_ce}.29`;\nlet CertificateIssuer = CertificateIssuer_1 = class CertificateIssuer extends GeneralNames {\n    constructor(items) {\n        super(items);\n        Object.setPrototypeOf(this, CertificateIssuer_1.prototype);\n    }\n};\nCertificateIssuer = CertificateIssuer_1 = __decorate([\n    AsnType({ type: AsnTypeTypes.Sequence })\n], CertificateIssuer);\nexport { CertificateIssuer };\n","var CertificatePolicies_1;\nimport { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes, AsnType, AsnTypeTypes, AsnArray } from \"@peculiar/asn1-schema\";\nimport { id_ce } from \"../object_identifiers\";\nexport const id_ce_certificatePolicies = `${id_ce}.32`;\nexport const id_ce_certificatePolicies_anyPolicy = `${id_ce_certificatePolicies}.0`;\nlet DisplayText = class DisplayText {\n    constructor(params = {}) {\n        Object.assign(this, params);\n    }\n    toString() {\n        return this.ia5String || this.visibleString || this.bmpString || this.utf8String || \"\";\n    }\n};\n__decorate([\n    AsnProp({ type: AsnPropTypes.IA5String })\n], DisplayText.prototype, \"ia5String\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.VisibleString })\n], DisplayText.prototype, \"visibleString\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.BmpString })\n], DisplayText.prototype, \"bmpString\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Utf8String })\n], DisplayText.prototype, \"utf8String\", void 0);\nDisplayText = __decorate([\n    AsnType({ type: AsnTypeTypes.Choice })\n], DisplayText);\nexport { DisplayText };\nexport class NoticeReference {\n    constructor(params = {}) {\n        this.organization = new DisplayText();\n        this.noticeNumbers = [];\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: DisplayText })\n], NoticeReference.prototype, \"organization\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer, repeated: \"sequence\" })\n], NoticeReference.prototype, \"noticeNumbers\", void 0);\nexport class UserNotice {\n    constructor(params = {}) {\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: NoticeReference, optional: true })\n], UserNotice.prototype, \"noticeRef\", void 0);\n__decorate([\n    AsnProp({ type: DisplayText, optional: true })\n], UserNotice.prototype, \"explicitText\", void 0);\nlet Qualifier = class Qualifier {\n    constructor(params = {}) {\n        Object.assign(this, params);\n    }\n};\n__decorate([\n    AsnProp({ type: AsnPropTypes.IA5String })\n], Qualifier.prototype, \"cPSuri\", void 0);\n__decorate([\n    AsnProp({ type: UserNotice })\n], Qualifier.prototype, \"userNotice\", void 0);\nQualifier = __decorate([\n    AsnType({ type: AsnTypeTypes.Choice })\n], Qualifier);\nexport { Qualifier };\nexport class PolicyQualifierInfo {\n    constructor(params = {}) {\n        this.policyQualifierId = \"\";\n        this.qualifier = new ArrayBuffer(0);\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AsnPropTypes.ObjectIdentifier })\n], PolicyQualifierInfo.prototype, \"policyQualifierId\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Any })\n], PolicyQualifierInfo.prototype, \"qualifier\", void 0);\nexport class PolicyInformation {\n    constructor(params = {}) {\n        this.policyIdentifier = \"\";\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AsnPropTypes.ObjectIdentifier })\n], PolicyInformation.prototype, \"policyIdentifier\", void 0);\n__decorate([\n    AsnProp({ type: PolicyQualifierInfo, repeated: \"sequence\", optional: true })\n], PolicyInformation.prototype, \"policyQualifiers\", void 0);\nlet CertificatePolicies = CertificatePolicies_1 = class CertificatePolicies extends AsnArray {\n    constructor(items) {\n        super(items);\n        Object.setPrototypeOf(this, CertificatePolicies_1.prototype);\n    }\n};\nCertificatePolicies = CertificatePolicies_1 = __decorate([\n    AsnType({ type: AsnTypeTypes.Sequence, itemType: PolicyInformation })\n], CertificatePolicies);\nexport { CertificatePolicies };\n","import { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes, AsnType, AsnTypeTypes } from \"@peculiar/asn1-schema\";\nimport { id_ce } from \"../object_identifiers\";\nexport const id_ce_cRLNumber = `${id_ce}.20`;\nlet CRLNumber = class CRLNumber {\n    constructor(value = 0) {\n        this.value = value;\n    }\n};\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer })\n], CRLNumber.prototype, \"value\", void 0);\nCRLNumber = __decorate([\n    AsnType({ type: AsnTypeTypes.Choice })\n], CRLNumber);\nexport { CRLNumber };\n","import { __decorate } from \"tslib\";\nimport { AsnType, AsnTypeTypes } from \"@peculiar/asn1-schema\";\nimport { id_ce } from \"../object_identifiers\";\nimport { CRLNumber } from \"./crl_number\";\nexport const id_ce_deltaCRLIndicator = `${id_ce}.27`;\nlet BaseCRLNumber = class BaseCRLNumber extends CRLNumber {\n};\nBaseCRLNumber = __decorate([\n    AsnType({ type: AsnTypeTypes.Choice })\n], BaseCRLNumber);\nexport { BaseCRLNumber };\n","var CRLDistributionPoints_1;\nimport { __decorate } from \"tslib\";\nimport { AsnProp, AsnType, AsnTypeTypes, AsnArray, BitString } from \"@peculiar/asn1-schema\";\nimport { RelativeDistinguishedName } from \"../name\";\nimport { GeneralName } from \"../general_name\";\nimport { id_ce } from \"../object_identifiers\";\nexport const id_ce_cRLDistributionPoints = `${id_ce}.31`;\nexport var ReasonFlags;\n(function (ReasonFlags) {\n    ReasonFlags[ReasonFlags[\"unused\"] = 1] = \"unused\";\n    ReasonFlags[ReasonFlags[\"keyCompromise\"] = 2] = \"keyCompromise\";\n    ReasonFlags[ReasonFlags[\"cACompromise\"] = 4] = \"cACompromise\";\n    ReasonFlags[ReasonFlags[\"affiliationChanged\"] = 8] = \"affiliationChanged\";\n    ReasonFlags[ReasonFlags[\"superseded\"] = 16] = \"superseded\";\n    ReasonFlags[ReasonFlags[\"cessationOfOperation\"] = 32] = \"cessationOfOperation\";\n    ReasonFlags[ReasonFlags[\"certificateHold\"] = 64] = \"certificateHold\";\n    ReasonFlags[ReasonFlags[\"privilegeWithdrawn\"] = 128] = \"privilegeWithdrawn\";\n    ReasonFlags[ReasonFlags[\"aACompromise\"] = 256] = \"aACompromise\";\n})(ReasonFlags || (ReasonFlags = {}));\nexport class Reason extends BitString {\n    toJSON() {\n        const res = [];\n        const flags = this.toNumber();\n        if (flags & ReasonFlags.aACompromise) {\n            res.push(\"aACompromise\");\n        }\n        if (flags & ReasonFlags.affiliationChanged) {\n            res.push(\"affiliationChanged\");\n        }\n        if (flags & ReasonFlags.cACompromise) {\n            res.push(\"cACompromise\");\n        }\n        if (flags & ReasonFlags.certificateHold) {\n            res.push(\"certificateHold\");\n        }\n        if (flags & ReasonFlags.cessationOfOperation) {\n            res.push(\"cessationOfOperation\");\n        }\n        if (flags & ReasonFlags.keyCompromise) {\n            res.push(\"keyCompromise\");\n        }\n        if (flags & ReasonFlags.privilegeWithdrawn) {\n            res.push(\"privilegeWithdrawn\");\n        }\n        if (flags & ReasonFlags.superseded) {\n            res.push(\"superseded\");\n        }\n        if (flags & ReasonFlags.unused) {\n            res.push(\"unused\");\n        }\n        return res;\n    }\n    toString() {\n        return `[${this.toJSON().join(\", \")}]`;\n    }\n}\nlet DistributionPointName = class DistributionPointName {\n    constructor(params = {}) {\n        Object.assign(this, params);\n    }\n};\n__decorate([\n    AsnProp({ type: GeneralName, context: 0, repeated: \"sequence\", implicit: true })\n], DistributionPointName.prototype, \"fullName\", void 0);\n__decorate([\n    AsnProp({ type: RelativeDistinguishedName, context: 1, implicit: true })\n], DistributionPointName.prototype, \"nameRelativeToCRLIssuer\", void 0);\nDistributionPointName = __decorate([\n    AsnType({ type: AsnTypeTypes.Choice })\n], DistributionPointName);\nexport { DistributionPointName };\nexport class DistributionPoint {\n    constructor(params = {}) {\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: DistributionPointName, context: 0, optional: true })\n], DistributionPoint.prototype, \"distributionPoint\", void 0);\n__decorate([\n    AsnProp({ type: Reason, context: 1, optional: true, implicit: true })\n], DistributionPoint.prototype, \"reasons\", void 0);\n__decorate([\n    AsnProp({ type: GeneralName, context: 2, optional: true, repeated: \"sequence\", implicit: true })\n], DistributionPoint.prototype, \"cRLIssuer\", void 0);\nlet CRLDistributionPoints = CRLDistributionPoints_1 = class CRLDistributionPoints extends AsnArray {\n    constructor(items) {\n        super(items);\n        Object.setPrototypeOf(this, CRLDistributionPoints_1.prototype);\n    }\n};\nCRLDistributionPoints = CRLDistributionPoints_1 = __decorate([\n    AsnType({ type: AsnTypeTypes.Sequence, itemType: DistributionPoint })\n], CRLDistributionPoints);\nexport { CRLDistributionPoints };\n","var FreshestCRL_1;\nimport { __decorate } from \"tslib\";\nimport { AsnType, AsnTypeTypes } from \"@peculiar/asn1-schema\";\nimport { id_ce } from \"../object_identifiers\";\nimport { CRLDistributionPoints, DistributionPoint } from \"./crl_distribution_points\";\nexport const id_ce_freshestCRL = `${id_ce}.46`;\nlet FreshestCRL = FreshestCRL_1 = class FreshestCRL extends CRLDistributionPoints {\n    constructor(items) {\n        super(items);\n        Object.setPrototypeOf(this, FreshestCRL_1.prototype);\n    }\n};\nFreshestCRL = FreshestCRL_1 = __decorate([\n    AsnType({ type: AsnTypeTypes.Sequence, itemType: DistributionPoint })\n], FreshestCRL);\nexport { FreshestCRL };\n","import { __decorate } from \"tslib\";\nimport { AsnProp } from \"@peculiar/asn1-schema\";\nimport { DistributionPointName, Reason } from \"./crl_distribution_points\";\nimport { id_ce } from \"../object_identifiers\";\nimport { AsnPropTypes } from \"@peculiar/asn1-schema\";\nexport const id_ce_issuingDistributionPoint = `${id_ce}.28`;\nexport class IssuingDistributionPoint {\n    constructor(params = {}) {\n        this.onlyContainsUserCerts = IssuingDistributionPoint.ONLY;\n        this.onlyContainsCACerts = IssuingDistributionPoint.ONLY;\n        this.indirectCRL = IssuingDistributionPoint.ONLY;\n        this.onlyContainsAttributeCerts = IssuingDistributionPoint.ONLY;\n        Object.assign(this, params);\n    }\n}\nIssuingDistributionPoint.ONLY = false;\n__decorate([\n    AsnProp({ type: DistributionPointName, context: 0, optional: true })\n], IssuingDistributionPoint.prototype, \"distributionPoint\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Boolean, context: 1, defaultValue: IssuingDistributionPoint.ONLY, implicit: true })\n], IssuingDistributionPoint.prototype, \"onlyContainsUserCerts\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Boolean, context: 2, defaultValue: IssuingDistributionPoint.ONLY, implicit: true })\n], IssuingDistributionPoint.prototype, \"onlyContainsCACerts\", void 0);\n__decorate([\n    AsnProp({ type: Reason, context: 3, optional: true, implicit: true })\n], IssuingDistributionPoint.prototype, \"onlySomeReasons\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Boolean, context: 4, defaultValue: IssuingDistributionPoint.ONLY, implicit: true })\n], IssuingDistributionPoint.prototype, \"indirectCRL\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Boolean, context: 5, defaultValue: IssuingDistributionPoint.ONLY, implicit: true })\n], IssuingDistributionPoint.prototype, \"onlyContainsAttributeCerts\", void 0);\n","import { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes, AsnType, AsnTypeTypes } from \"@peculiar/asn1-schema\";\nimport { id_ce } from \"../object_identifiers\";\nexport const id_ce_cRLReasons = `${id_ce}.21`;\nexport var CRLReasons;\n(function (CRLReasons) {\n    CRLReasons[CRLReasons[\"unspecified\"] = 0] = \"unspecified\";\n    CRLReasons[CRLReasons[\"keyCompromise\"] = 1] = \"keyCompromise\";\n    CRLReasons[CRLReasons[\"cACompromise\"] = 2] = \"cACompromise\";\n    CRLReasons[CRLReasons[\"affiliationChanged\"] = 3] = \"affiliationChanged\";\n    CRLReasons[CRLReasons[\"superseded\"] = 4] = \"superseded\";\n    CRLReasons[CRLReasons[\"cessationOfOperation\"] = 5] = \"cessationOfOperation\";\n    CRLReasons[CRLReasons[\"certificateHold\"] = 6] = \"certificateHold\";\n    CRLReasons[CRLReasons[\"removeFromCRL\"] = 8] = \"removeFromCRL\";\n    CRLReasons[CRLReasons[\"privilegeWithdrawn\"] = 9] = \"privilegeWithdrawn\";\n    CRLReasons[CRLReasons[\"aACompromise\"] = 10] = \"aACompromise\";\n})(CRLReasons || (CRLReasons = {}));\nlet CRLReason = class CRLReason {\n    constructor(reason = CRLReasons.unspecified) {\n        this.reason = CRLReasons.unspecified;\n        this.reason = reason;\n    }\n    toJSON() {\n        return CRLReasons[this.reason];\n    }\n    toString() {\n        return this.toJSON();\n    }\n};\n__decorate([\n    AsnProp({ type: AsnPropTypes.Enumerated })\n], CRLReason.prototype, \"reason\", void 0);\nCRLReason = __decorate([\n    AsnType({ type: AsnTypeTypes.Choice })\n], CRLReason);\nexport { CRLReason };\n","var ExtendedKeyUsage_1;\nimport { __decorate } from \"tslib\";\nimport { AsnPropTypes, AsnArray, AsnType, AsnTypeTypes } from \"@peculiar/asn1-schema\";\nimport { id_ce, id_kp } from \"../object_identifiers\";\nexport const id_ce_extKeyUsage = `${id_ce}.37`;\nlet ExtendedKeyUsage = ExtendedKeyUsage_1 = class ExtendedKeyUsage extends AsnArray {\n    constructor(items) {\n        super(items);\n        Object.setPrototypeOf(this, ExtendedKeyUsage_1.prototype);\n    }\n};\nExtendedKeyUsage = ExtendedKeyUsage_1 = __decorate([\n    AsnType({ type: AsnTypeTypes.Sequence, itemType: AsnPropTypes.ObjectIdentifier })\n], ExtendedKeyUsage);\nexport { ExtendedKeyUsage };\nexport const anyExtendedKeyUsage = `${id_ce_extKeyUsage}.0`;\nexport const id_kp_serverAuth = `${id_kp}.1`;\nexport const id_kp_clientAuth = `${id_kp}.2`;\nexport const id_kp_codeSigning = `${id_kp}.3`;\nexport const id_kp_emailProtection = `${id_kp}.4`;\nexport const id_kp_timeStamping = `${id_kp}.8`;\nexport const id_kp_OCSPSigning = `${id_kp}.9`;\n","import { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes, AsnType, AsnTypeTypes, AsnIntegerArrayBufferConverter } from \"@peculiar/asn1-schema\";\nimport { id_ce } from \"../object_identifiers\";\nexport const id_ce_inhibitAnyPolicy = `${id_ce}.54`;\nlet InhibitAnyPolicy = class InhibitAnyPolicy {\n    constructor(value = new ArrayBuffer(0)) {\n        this.value = value;\n    }\n};\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer, converter: AsnIntegerArrayBufferConverter })\n], InhibitAnyPolicy.prototype, \"value\", void 0);\nInhibitAnyPolicy = __decorate([\n    AsnType({ type: AsnTypeTypes.Choice })\n], InhibitAnyPolicy);\nexport { InhibitAnyPolicy };\n","import { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes, AsnType, AsnTypeTypes } from \"@peculiar/asn1-schema\";\nimport { id_ce } from \"../object_identifiers\";\nexport const id_ce_invalidityDate = `${id_ce}.24`;\nlet InvalidityDate = class InvalidityDate {\n    constructor(value) {\n        this.value = new Date();\n        if (value) {\n            this.value = value;\n        }\n    }\n};\n__decorate([\n    AsnProp({ type: AsnPropTypes.GeneralizedTime })\n], InvalidityDate.prototype, \"value\", void 0);\nInvalidityDate = __decorate([\n    AsnType({ type: AsnTypeTypes.Choice })\n], InvalidityDate);\nexport { InvalidityDate };\n","var IssueAlternativeName_1;\nimport { __decorate } from \"tslib\";\nimport { AsnType, AsnTypeTypes } from \"@peculiar/asn1-schema\";\nimport { GeneralNames } from \"../general_names\";\nimport { id_ce } from \"../object_identifiers\";\nexport const id_ce_issuerAltName = `${id_ce}.18`;\nlet IssueAlternativeName = IssueAlternativeName_1 = class IssueAlternativeName extends GeneralNames {\n    constructor(items) {\n        super(items);\n        Object.setPrototypeOf(this, IssueAlternativeName_1.prototype);\n    }\n};\nIssueAlternativeName = IssueAlternativeName_1 = __decorate([\n    AsnType({ type: AsnTypeTypes.Sequence })\n], IssueAlternativeName);\nexport { IssueAlternativeName };\n","import { BitString } from \"@peculiar/asn1-schema\";\nimport { id_ce } from \"../object_identifiers\";\nexport const id_ce_keyUsage = `${id_ce}.15`;\nexport var KeyUsageFlags;\n(function (KeyUsageFlags) {\n    KeyUsageFlags[KeyUsageFlags[\"digitalSignature\"] = 1] = \"digitalSignature\";\n    KeyUsageFlags[KeyUsageFlags[\"nonRepudiation\"] = 2] = \"nonRepudiation\";\n    KeyUsageFlags[KeyUsageFlags[\"keyEncipherment\"] = 4] = \"keyEncipherment\";\n    KeyUsageFlags[KeyUsageFlags[\"dataEncipherment\"] = 8] = \"dataEncipherment\";\n    KeyUsageFlags[KeyUsageFlags[\"keyAgreement\"] = 16] = \"keyAgreement\";\n    KeyUsageFlags[KeyUsageFlags[\"keyCertSign\"] = 32] = \"keyCertSign\";\n    KeyUsageFlags[KeyUsageFlags[\"cRLSign\"] = 64] = \"cRLSign\";\n    KeyUsageFlags[KeyUsageFlags[\"encipherOnly\"] = 128] = \"encipherOnly\";\n    KeyUsageFlags[KeyUsageFlags[\"decipherOnly\"] = 256] = \"decipherOnly\";\n})(KeyUsageFlags || (KeyUsageFlags = {}));\nexport class KeyUsage extends BitString {\n    toJSON() {\n        const flag = this.toNumber();\n        const res = [];\n        if (flag & KeyUsageFlags.cRLSign) {\n            res.push(\"crlSign\");\n        }\n        if (flag & KeyUsageFlags.dataEncipherment) {\n            res.push(\"dataEncipherment\");\n        }\n        if (flag & KeyUsageFlags.decipherOnly) {\n            res.push(\"decipherOnly\");\n        }\n        if (flag & KeyUsageFlags.digitalSignature) {\n            res.push(\"digitalSignature\");\n        }\n        if (flag & KeyUsageFlags.encipherOnly) {\n            res.push(\"encipherOnly\");\n        }\n        if (flag & KeyUsageFlags.keyAgreement) {\n            res.push(\"keyAgreement\");\n        }\n        if (flag & KeyUsageFlags.keyCertSign) {\n            res.push(\"keyCertSign\");\n        }\n        if (flag & KeyUsageFlags.keyEncipherment) {\n            res.push(\"keyEncipherment\");\n        }\n        if (flag & KeyUsageFlags.nonRepudiation) {\n            res.push(\"nonRepudiation\");\n        }\n        return res;\n    }\n    toString() {\n        return `[${this.toJSON().join(\", \")}]`;\n    }\n}\n","var GeneralSubtrees_1;\nimport { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes, AsnArray, AsnType, AsnTypeTypes } from \"@peculiar/asn1-schema\";\nimport { GeneralName } from \"../general_name\";\nimport { id_ce } from \"../object_identifiers\";\nexport const id_ce_nameConstraints = `${id_ce}.30`;\nexport class GeneralSubtree {\n    constructor(params = {}) {\n        this.base = new GeneralName();\n        this.minimum = 0;\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: GeneralName })\n], GeneralSubtree.prototype, \"base\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer, context: 0, defaultValue: 0, implicit: true })\n], GeneralSubtree.prototype, \"minimum\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer, context: 1, optional: true, implicit: true })\n], GeneralSubtree.prototype, \"maximum\", void 0);\nlet GeneralSubtrees = GeneralSubtrees_1 = class GeneralSubtrees extends AsnArray {\n    constructor(items) {\n        super(items);\n        Object.setPrototypeOf(this, GeneralSubtrees_1.prototype);\n    }\n};\nGeneralSubtrees = GeneralSubtrees_1 = __decorate([\n    AsnType({ type: AsnTypeTypes.Sequence, itemType: GeneralSubtree })\n], GeneralSubtrees);\nexport { GeneralSubtrees };\nexport class NameConstraints {\n    constructor(params = {}) {\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: GeneralSubtrees, context: 0, optional: true, implicit: true })\n], NameConstraints.prototype, \"permittedSubtrees\", void 0);\n__decorate([\n    AsnProp({ type: GeneralSubtrees, context: 1, optional: true, implicit: true })\n], NameConstraints.prototype, \"excludedSubtrees\", void 0);\n","import { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes, AsnIntegerArrayBufferConverter } from \"@peculiar/asn1-schema\";\nimport { id_ce } from \"../object_identifiers\";\nexport const id_ce_policyConstraints = `${id_ce}.36`;\nexport class PolicyConstraints {\n    constructor(params = {}) {\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({\n        type: AsnPropTypes.Integer, context: 0, implicit: true, optional: true,\n        converter: AsnIntegerArrayBufferConverter,\n    })\n], PolicyConstraints.prototype, \"requireExplicitPolicy\", void 0);\n__decorate([\n    AsnProp({\n        type: AsnPropTypes.Integer, context: 1, implicit: true, optional: true,\n        converter: AsnIntegerArrayBufferConverter,\n    })\n], PolicyConstraints.prototype, \"inhibitPolicyMapping\", void 0);\n","var PolicyMappings_1;\nimport { __decorate } from \"tslib\";\nimport { AsnArray, AsnProp, AsnPropTypes, AsnType, AsnTypeTypes } from \"@peculiar/asn1-schema\";\nimport { id_ce } from \"../object_identifiers\";\nexport const id_ce_policyMappings = `${id_ce}.33`;\nexport class PolicyMapping {\n    constructor(params = {}) {\n        this.issuerDomainPolicy = \"\";\n        this.subjectDomainPolicy = \"\";\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AsnPropTypes.ObjectIdentifier })\n], PolicyMapping.prototype, \"issuerDomainPolicy\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.ObjectIdentifier })\n], PolicyMapping.prototype, \"subjectDomainPolicy\", void 0);\nlet PolicyMappings = PolicyMappings_1 = class PolicyMappings extends AsnArray {\n    constructor(items) {\n        super(items);\n        Object.setPrototypeOf(this, PolicyMappings_1.prototype);\n    }\n};\nPolicyMappings = PolicyMappings_1 = __decorate([\n    AsnType({ type: AsnTypeTypes.Sequence, itemType: PolicyMapping })\n], PolicyMappings);\nexport { PolicyMappings };\n","var SubjectAlternativeName_1;\nimport { __decorate } from \"tslib\";\nimport { AsnType, AsnTypeTypes } from \"@peculiar/asn1-schema\";\nimport { GeneralNames } from \"../general_names\";\nimport { id_ce } from \"../object_identifiers\";\nexport const id_ce_subjectAltName = `${id_ce}.17`;\nlet SubjectAlternativeName = SubjectAlternativeName_1 = class SubjectAlternativeName extends GeneralNames {\n    constructor(items) {\n        super(items);\n        Object.setPrototypeOf(this, SubjectAlternativeName_1.prototype);\n    }\n};\nSubjectAlternativeName = SubjectAlternativeName_1 = __decorate([\n    AsnType({ type: AsnTypeTypes.Sequence })\n], SubjectAlternativeName);\nexport { SubjectAlternativeName };\n","import { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes } from \"@peculiar/asn1-schema\";\nexport class Attribute {\n    constructor(params = {}) {\n        this.type = \"\";\n        this.values = [];\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AsnPropTypes.ObjectIdentifier })\n], Attribute.prototype, \"type\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Any, repeated: \"set\" })\n], Attribute.prototype, \"values\", void 0);\n","var SubjectDirectoryAttributes_1;\nimport { __decorate } from \"tslib\";\nimport { AsnArray, AsnType, AsnTypeTypes } from \"@peculiar/asn1-schema\";\nimport { Attribute } from \"../attribute\";\nimport { id_ce } from \"../object_identifiers\";\nexport const id_ce_subjectDirectoryAttributes = `${id_ce}.9`;\nlet SubjectDirectoryAttributes = SubjectDirectoryAttributes_1 = class SubjectDirectoryAttributes extends AsnArray {\n    constructor(items) {\n        super(items);\n        Object.setPrototypeOf(this, SubjectDirectoryAttributes_1.prototype);\n    }\n};\nSubjectDirectoryAttributes = SubjectDirectoryAttributes_1 = __decorate([\n    AsnType({ type: AsnTypeTypes.Sequence, itemType: Attribute })\n], SubjectDirectoryAttributes);\nexport { SubjectDirectoryAttributes };\n","import { id_ce } from \"../object_identifiers\";\nimport { KeyIdentifier } from \"./authority_key_identifier\";\nexport const id_ce_subjectKeyIdentifier = `${id_ce}.14`;\nexport class SubjectKeyIdentifier extends KeyIdentifier {\n}\n","import { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes } from \"@peculiar/asn1-schema\";\nimport { id_ce } from \"../object_identifiers\";\nexport const id_ce_privateKeyUsagePeriod = `${id_ce}.16`;\nexport class PrivateKeyUsagePeriod {\n    constructor(params = {}) {\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AsnPropTypes.GeneralizedTime, context: 0, implicit: true, optional: true })\n], PrivateKeyUsagePeriod.prototype, \"notBefore\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.GeneralizedTime, context: 1, implicit: true, optional: true, })\n], PrivateKeyUsagePeriod.prototype, \"notAfter\", void 0);\n","import { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes, BitString } from \"@peculiar/asn1-schema\";\nexport const id_entrust_entrustVersInfo = \"1.2.840.113533.7.65.0\";\nexport var EntrustInfoFlags;\n(function (EntrustInfoFlags) {\n    EntrustInfoFlags[EntrustInfoFlags[\"keyUpdateAllowed\"] = 1] = \"keyUpdateAllowed\";\n    EntrustInfoFlags[EntrustInfoFlags[\"newExtensions\"] = 2] = \"newExtensions\";\n    EntrustInfoFlags[EntrustInfoFlags[\"pKIXCertificate\"] = 4] = \"pKIXCertificate\";\n})(EntrustInfoFlags || (EntrustInfoFlags = {}));\nexport class EntrustInfo extends BitString {\n    toJSON() {\n        const res = [];\n        const flags = this.toNumber();\n        if (flags & EntrustInfoFlags.pKIXCertificate) {\n            res.push(\"pKIXCertificate\");\n        }\n        if (flags & EntrustInfoFlags.newExtensions) {\n            res.push(\"newExtensions\");\n        }\n        if (flags & EntrustInfoFlags.keyUpdateAllowed) {\n            res.push(\"keyUpdateAllowed\");\n        }\n        return res;\n    }\n    toString() {\n        return `[${this.toJSON().join(\", \")}]`;\n    }\n}\nexport class EntrustVersionInfo {\n    constructor(params = {}) {\n        this.entrustVers = '';\n        this.entrustInfoFlags = new EntrustInfo();\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AsnPropTypes.GeneralString })\n], EntrustVersionInfo.prototype, \"entrustVers\", void 0);\n__decorate([\n    AsnProp({ type: EntrustInfo })\n], EntrustVersionInfo.prototype, \"entrustInfoFlags\", void 0);\n","var SubjectInfoAccessSyntax_1;\nimport { __decorate } from \"tslib\";\nimport { AsnArray, AsnType, AsnTypeTypes } from \"@peculiar/asn1-schema\";\nimport { id_pe } from \"../object_identifiers\";\nimport { AccessDescription } from \"./authority_information_access\";\nexport const id_pe_subjectInfoAccess = `${id_pe}.11`;\nlet SubjectInfoAccessSyntax = SubjectInfoAccessSyntax_1 = class SubjectInfoAccessSyntax extends AsnArray {\n    constructor(items) {\n        super(items);\n        Object.setPrototypeOf(this, SubjectInfoAccessSyntax_1.prototype);\n    }\n};\nSubjectInfoAccessSyntax = SubjectInfoAccessSyntax_1 = __decorate([\n    AsnType({ type: AsnTypeTypes.Sequence, itemType: AccessDescription })\n], SubjectInfoAccessSyntax);\nexport { SubjectInfoAccessSyntax };\n","import { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes } from \"@peculiar/asn1-schema\";\nimport * as pvtsutils from \"pvtsutils\";\nexport class AlgorithmIdentifier {\n    constructor(params = {}) {\n        this.algorithm = \"\";\n        Object.assign(this, params);\n    }\n    isEqual(data) {\n        return data instanceof AlgorithmIdentifier\n            && data.algorithm == this.algorithm\n            && ((data.parameters && this.parameters\n                && pvtsutils.isEqual(data.parameters, this.parameters))\n                ||\n                    (data.parameters === this.parameters));\n    }\n}\n__decorate([\n    AsnProp({\n        type: AsnPropTypes.ObjectIdentifier,\n    })\n], AlgorithmIdentifier.prototype, \"algorithm\", void 0);\n__decorate([\n    AsnProp({\n        type: AsnPropTypes.Any,\n        optional: true,\n    })\n], AlgorithmIdentifier.prototype, \"parameters\", void 0);\n","import { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes } from \"@peculiar/asn1-schema\";\nimport { AlgorithmIdentifier } from \"./algorithm_identifier\";\nexport class SubjectPublicKeyInfo {\n    constructor(params = {}) {\n        this.algorithm = new AlgorithmIdentifier();\n        this.subjectPublicKey = new ArrayBuffer(0);\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AlgorithmIdentifier })\n], SubjectPublicKeyInfo.prototype, \"algorithm\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.BitString })\n], SubjectPublicKeyInfo.prototype, \"subjectPublicKey\", void 0);\n","import { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes, AsnType, AsnTypeTypes } from \"@peculiar/asn1-schema\";\nlet Time = class Time {\n    constructor(time) {\n        if (time) {\n            if (typeof time === \"string\" || typeof time === \"number\" || time instanceof Date) {\n                const date = new Date(time);\n                if (date.getUTCFullYear() > 2049) {\n                    this.generalTime = date;\n                }\n                else {\n                    this.utcTime = date;\n                }\n            }\n            else {\n                Object.assign(this, time);\n            }\n        }\n    }\n    getTime() {\n        const time = this.utcTime || this.generalTime;\n        if (!time) {\n            throw new Error(\"Cannot get time from CHOICE object\");\n        }\n        return time;\n    }\n};\n__decorate([\n    AsnProp({\n        type: AsnPropTypes.UTCTime,\n    })\n], Time.prototype, \"utcTime\", void 0);\n__decorate([\n    AsnProp({\n        type: AsnPropTypes.GeneralizedTime,\n    })\n], Time.prototype, \"generalTime\", void 0);\nTime = __decorate([\n    AsnType({ type: AsnTypeTypes.Choice })\n], Time);\nexport { Time };\n","import { __decorate } from \"tslib\";\nimport { AsnProp } from \"@peculiar/asn1-schema\";\nimport { Time } from \"./time\";\nexport class Validity {\n    constructor(params) {\n        this.notBefore = new Time(new Date());\n        this.notAfter = new Time(new Date());\n        if (params) {\n            this.notBefore = new Time(params.notBefore);\n            this.notAfter = new Time(params.notAfter);\n        }\n    }\n}\n__decorate([\n    AsnProp({ type: Time })\n], Validity.prototype, \"notBefore\", void 0);\n__decorate([\n    AsnProp({ type: Time })\n], Validity.prototype, \"notAfter\", void 0);\n","var Extensions_1;\nimport { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes, AsnArray, AsnType, AsnTypeTypes, OctetString } from \"@peculiar/asn1-schema\";\nexport class Extension {\n    constructor(params = {}) {\n        this.extnID = \"\";\n        this.critical = Extension.CRITICAL;\n        this.extnValue = new OctetString();\n        Object.assign(this, params);\n    }\n}\nExtension.CRITICAL = false;\n__decorate([\n    AsnProp({ type: AsnPropTypes.ObjectIdentifier })\n], Extension.prototype, \"extnID\", void 0);\n__decorate([\n    AsnProp({\n        type: AsnPropTypes.Boolean,\n        defaultValue: Extension.CRITICAL,\n    })\n], Extension.prototype, \"critical\", void 0);\n__decorate([\n    AsnProp({ type: OctetString })\n], Extension.prototype, \"extnValue\", void 0);\nlet Extensions = Extensions_1 = class Extensions extends AsnArray {\n    constructor(items) {\n        super(items);\n        Object.setPrototypeOf(this, Extensions_1.prototype);\n    }\n};\nExtensions = Extensions_1 = __decorate([\n    AsnType({ type: AsnTypeTypes.Sequence, itemType: Extension })\n], Extensions);\nexport { Extensions };\n","export var Version;\n(function (Version) {\n    Version[Version[\"v1\"] = 0] = \"v1\";\n    Version[Version[\"v2\"] = 1] = \"v2\";\n    Version[Version[\"v3\"] = 2] = \"v3\";\n})(Version || (Version = {}));\n","var AttrSpec_1;\nimport { __decorate } from \"tslib\";\nimport { AsnType, AsnTypeTypes, AsnPropTypes, AsnArray } from \"@peculiar/asn1-schema\";\nlet AttrSpec = AttrSpec_1 = class AttrSpec extends AsnArray {\n    constructor(items) {\n        super(items);\n        Object.setPrototypeOf(this, AttrSpec_1.prototype);\n    }\n};\nAttrSpec = AttrSpec_1 = __decorate([\n    AsnType({ type: AsnTypeTypes.Sequence, itemType: AsnPropTypes.ObjectIdentifier })\n], AttrSpec);\nexport { AttrSpec };\n","import { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes, AsnIntegerArrayBufferConverter } from \"@peculiar/asn1-schema\";\nimport { AlgorithmIdentifier } from \"./algorithm_identifier\";\nimport { Name } from \"./name\";\nimport { SubjectPublicKeyInfo } from \"./subject_public_key_info\";\nimport { Validity } from \"./validity\";\nimport { Extensions } from \"./extension\";\nimport { Version } from \"./types\";\nexport class TBSCertificate {\n    constructor(params = {}) {\n        this.version = Version.v1;\n        this.serialNumber = new ArrayBuffer(0);\n        this.signature = new AlgorithmIdentifier();\n        this.issuer = new Name();\n        this.validity = new Validity();\n        this.subject = new Name();\n        this.subjectPublicKeyInfo = new SubjectPublicKeyInfo();\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({\n        type: AsnPropTypes.Integer,\n        context: 0,\n        defaultValue: Version.v1,\n    })\n], TBSCertificate.prototype, \"version\", void 0);\n__decorate([\n    AsnProp({\n        type: AsnPropTypes.Integer,\n        converter: AsnIntegerArrayBufferConverter,\n    })\n], TBSCertificate.prototype, \"serialNumber\", void 0);\n__decorate([\n    AsnProp({ type: AlgorithmIdentifier })\n], TBSCertificate.prototype, \"signature\", void 0);\n__decorate([\n    AsnProp({ type: Name })\n], TBSCertificate.prototype, \"issuer\", void 0);\n__decorate([\n    AsnProp({ type: Validity })\n], TBSCertificate.prototype, \"validity\", void 0);\n__decorate([\n    AsnProp({ type: Name })\n], TBSCertificate.prototype, \"subject\", void 0);\n__decorate([\n    AsnProp({ type: SubjectPublicKeyInfo })\n], TBSCertificate.prototype, \"subjectPublicKeyInfo\", void 0);\n__decorate([\n    AsnProp({\n        type: AsnPropTypes.BitString,\n        context: 1,\n        implicit: true,\n        optional: true,\n    })\n], TBSCertificate.prototype, \"issuerUniqueID\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.BitString, context: 2, implicit: true, optional: true })\n], TBSCertificate.prototype, \"subjectUniqueID\", void 0);\n__decorate([\n    AsnProp({ type: Extensions, context: 3, optional: true })\n], TBSCertificate.prototype, \"extensions\", void 0);\n","import { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes } from \"@peculiar/asn1-schema\";\nimport { AlgorithmIdentifier } from \"./algorithm_identifier\";\nimport { TBSCertificate } from \"./tbs_certificate\";\nexport class Certificate {\n    constructor(params = {}) {\n        this.tbsCertificate = new TBSCertificate();\n        this.signatureAlgorithm = new AlgorithmIdentifier();\n        this.signatureValue = new ArrayBuffer(0);\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: TBSCertificate })\n], Certificate.prototype, \"tbsCertificate\", void 0);\n__decorate([\n    AsnProp({ type: AlgorithmIdentifier })\n], Certificate.prototype, \"signatureAlgorithm\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.BitString })\n], Certificate.prototype, \"signatureValue\", void 0);\n","import { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes, AsnIntegerArrayBufferConverter } from \"@peculiar/asn1-schema\";\nimport { AlgorithmIdentifier } from \"./algorithm_identifier\";\nimport { Name } from \"./name\";\nimport { Time } from \"./time\";\nimport { Extension } from \"./extension\";\nexport class RevokedCertificate {\n    constructor(params = {}) {\n        this.userCertificate = new ArrayBuffer(0);\n        this.revocationDate = new Time();\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer, converter: AsnIntegerArrayBufferConverter })\n], RevokedCertificate.prototype, \"userCertificate\", void 0);\n__decorate([\n    AsnProp({ type: Time })\n], RevokedCertificate.prototype, \"revocationDate\", void 0);\n__decorate([\n    AsnProp({ type: Extension, optional: true, repeated: \"sequence\" })\n], RevokedCertificate.prototype, \"crlEntryExtensions\", void 0);\nexport class TBSCertList {\n    constructor(params = {}) {\n        this.signature = new AlgorithmIdentifier();\n        this.issuer = new Name();\n        this.thisUpdate = new Time();\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer, optional: true })\n], TBSCertList.prototype, \"version\", void 0);\n__decorate([\n    AsnProp({ type: AlgorithmIdentifier })\n], TBSCertList.prototype, \"signature\", void 0);\n__decorate([\n    AsnProp({ type: Name })\n], TBSCertList.prototype, \"issuer\", void 0);\n__decorate([\n    AsnProp({ type: Time })\n], TBSCertList.prototype, \"thisUpdate\", void 0);\n__decorate([\n    AsnProp({ type: Time, optional: true })\n], TBSCertList.prototype, \"nextUpdate\", void 0);\n__decorate([\n    AsnProp({ type: RevokedCertificate, repeated: \"sequence\", optional: true })\n], TBSCertList.prototype, \"revokedCertificates\", void 0);\n__decorate([\n    AsnProp({ type: Extension, optional: true, context: 0, repeated: \"sequence\" })\n], TBSCertList.prototype, \"crlExtensions\", void 0);\n","import { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes } from \"@peculiar/asn1-schema\";\nimport { AlgorithmIdentifier } from \"./algorithm_identifier\";\nimport { TBSCertList } from \"./tbs_cert_list\";\nexport class CertificateList {\n    constructor(params = {}) {\n        this.tbsCertList = new TBSCertList();\n        this.signatureAlgorithm = new AlgorithmIdentifier();\n        this.signature = new ArrayBuffer(0);\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: TBSCertList })\n], CertificateList.prototype, \"tbsCertList\", void 0);\n__decorate([\n    AsnProp({ type: AlgorithmIdentifier })\n], CertificateList.prototype, \"signatureAlgorithm\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.BitString })\n], CertificateList.prototype, \"signature\", void 0);\n","import { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes } from \"@peculiar/asn1-schema\";\nexport class Attribute {\n    constructor(params = {}) {\n        this.attrType = \"\";\n        this.attrValues = [];\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AsnPropTypes.ObjectIdentifier })\n], Attribute.prototype, \"attrType\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Any, repeated: \"set\" })\n], Attribute.prototype, \"attrValues\", void 0);\n","import { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes } from \"@peculiar/asn1-schema\";\nimport { GeneralName, Attribute } from \"@peculiar/asn1-x509\";\nexport class ACClearAttrs {\n    constructor(params = {}) {\n        this.acIssuer = new GeneralName();\n        this.acSerial = 0;\n        this.attrs = [];\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: GeneralName })\n], ACClearAttrs.prototype, \"acIssuer\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer })\n], ACClearAttrs.prototype, \"acSerial\", void 0);\n__decorate([\n    AsnProp({ type: Attribute, repeated: \"sequence\" })\n], ACClearAttrs.prototype, \"attrs\", void 0);\n","import { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes } from \"@peculiar/asn1-schema\";\nimport { AttrSpec } from \"./attr_spec\";\nexport class AAControls {\n    constructor(params = {}) {\n        this.permitUnSpecified = true;\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer, optional: true })\n], AAControls.prototype, \"pathLenConstraint\", void 0);\n__decorate([\n    AsnProp({ type: AttrSpec, implicit: true, context: 0, optional: true })\n], AAControls.prototype, \"permittedAttrs\", void 0);\n__decorate([\n    AsnProp({ type: AttrSpec, implicit: true, context: 1, optional: true })\n], AAControls.prototype, \"excludedAttrs\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Boolean, defaultValue: true })\n], AAControls.prototype, \"permitUnSpecified\", void 0);\n","import { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes, AsnIntegerArrayBufferConverter } from \"@peculiar/asn1-schema\";\nimport { GeneralNames } from \"@peculiar/asn1-x509\";\nexport class IssuerSerial {\n    constructor(params = {}) {\n        this.issuer = new GeneralNames();\n        this.serial = new ArrayBuffer(0);\n        this.issuerUID = new ArrayBuffer(0);\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: GeneralNames })\n], IssuerSerial.prototype, \"issuer\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer, converter: AsnIntegerArrayBufferConverter })\n], IssuerSerial.prototype, \"serial\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.BitString, optional: true })\n], IssuerSerial.prototype, \"issuerUID\", void 0);\n","import { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes } from \"@peculiar/asn1-schema\";\nimport { AlgorithmIdentifier } from \"@peculiar/asn1-x509\";\nexport var DigestedObjectType;\n(function (DigestedObjectType) {\n    DigestedObjectType[DigestedObjectType[\"publicKey\"] = 0] = \"publicKey\";\n    DigestedObjectType[DigestedObjectType[\"publicKeyCert\"] = 1] = \"publicKeyCert\";\n    DigestedObjectType[DigestedObjectType[\"otherObjectTypes\"] = 2] = \"otherObjectTypes\";\n})(DigestedObjectType || (DigestedObjectType = {}));\nexport class ObjectDigestInfo {\n    constructor(params = {}) {\n        this.digestedObjectType = DigestedObjectType.publicKey;\n        this.digestAlgorithm = new AlgorithmIdentifier();\n        this.objectDigest = new ArrayBuffer(0);\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AsnPropTypes.Enumerated })\n], ObjectDigestInfo.prototype, \"digestedObjectType\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.ObjectIdentifier, optional: true })\n], ObjectDigestInfo.prototype, \"otherObjectTypeID\", void 0);\n__decorate([\n    AsnProp({ type: AlgorithmIdentifier })\n], ObjectDigestInfo.prototype, \"digestAlgorithm\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.BitString })\n], ObjectDigestInfo.prototype, \"objectDigest\", void 0);\n","import { __decorate } from \"tslib\";\nimport { AsnProp } from \"@peculiar/asn1-schema\";\nimport { GeneralNames } from \"@peculiar/asn1-x509\";\nimport { IssuerSerial } from \"./issuer_serial\";\nimport { ObjectDigestInfo } from \"./object_digest_info\";\nexport class V2Form {\n    constructor(params = {}) {\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: GeneralNames, optional: true })\n], V2Form.prototype, \"issuerName\", void 0);\n__decorate([\n    AsnProp({ type: IssuerSerial, context: 0, implicit: true, optional: true })\n], V2Form.prototype, \"baseCertificateID\", void 0);\n__decorate([\n    AsnProp({ type: ObjectDigestInfo, context: 1, implicit: true, optional: true })\n], V2Form.prototype, \"objectDigestInfo\", void 0);\n","import { __decorate } from \"tslib\";\nimport { AsnType, AsnTypeTypes, AsnProp } from \"@peculiar/asn1-schema\";\nimport { GeneralName } from \"@peculiar/asn1-x509\";\nimport { V2Form } from \"./v2_form\";\nlet AttCertIssuer = class AttCertIssuer {\n    constructor(params = {}) {\n        Object.assign(this, params);\n    }\n};\n__decorate([\n    AsnProp({ type: GeneralName, repeated: \"sequence\" })\n], AttCertIssuer.prototype, \"v1Form\", void 0);\n__decorate([\n    AsnProp({ type: V2Form, context: 0, implicit: true })\n], AttCertIssuer.prototype, \"v2Form\", void 0);\nAttCertIssuer = __decorate([\n    AsnType({ type: AsnTypeTypes.Choice })\n], AttCertIssuer);\nexport { AttCertIssuer };\n","import { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes } from \"@peculiar/asn1-schema\";\nexport class AttCertValidityPeriod {\n    constructor(params = {}) {\n        this.notBeforeTime = new Date();\n        this.notAfterTime = new Date();\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AsnPropTypes.GeneralizedTime })\n], AttCertValidityPeriod.prototype, \"notBeforeTime\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.GeneralizedTime })\n], AttCertValidityPeriod.prototype, \"notAfterTime\", void 0);\n","import { __decorate } from \"tslib\";\nimport { AsnProp } from \"@peculiar/asn1-schema\";\nimport { IssuerSerial } from \"./issuer_serial\";\nimport { GeneralNames } from \"@peculiar/asn1-x509\";\nimport { ObjectDigestInfo } from \"./object_digest_info\";\nexport class Holder {\n    constructor(params = {}) {\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: IssuerSerial, implicit: true, context: 0, optional: true })\n], Holder.prototype, \"baseCertificateID\", void 0);\n__decorate([\n    AsnProp({ type: GeneralNames, implicit: true, context: 1, optional: true })\n], Holder.prototype, \"entityName\", void 0);\n__decorate([\n    AsnProp({ type: ObjectDigestInfo, implicit: true, context: 2, optional: true })\n], Holder.prototype, \"objectDigestInfo\", void 0);\n","import { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes, AsnIntegerArrayBufferConverter } from \"@peculiar/asn1-schema\";\nimport { AlgorithmIdentifier, Attribute, Extensions } from \"@peculiar/asn1-x509\";\nimport { Holder } from \"./holder\";\nimport { AttCertIssuer } from \"./attr_cert_issuer\";\nimport { AttCertValidityPeriod } from \"./attr_cert_validity_period\";\nexport var AttCertVersion;\n(function (AttCertVersion) {\n    AttCertVersion[AttCertVersion[\"v2\"] = 1] = \"v2\";\n})(AttCertVersion || (AttCertVersion = {}));\nexport class AttributeCertificateInfo {\n    constructor(params = {}) {\n        this.version = AttCertVersion.v2;\n        this.holder = new Holder();\n        this.issuer = new AttCertIssuer();\n        this.signature = new AlgorithmIdentifier();\n        this.serialNumber = new ArrayBuffer(0);\n        this.attrCertValidityPeriod = new AttCertValidityPeriod();\n        this.attributes = [];\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer })\n], AttributeCertificateInfo.prototype, \"version\", void 0);\n__decorate([\n    AsnProp({ type: Holder })\n], AttributeCertificateInfo.prototype, \"holder\", void 0);\n__decorate([\n    AsnProp({ type: AttCertIssuer })\n], AttributeCertificateInfo.prototype, \"issuer\", void 0);\n__decorate([\n    AsnProp({ type: AlgorithmIdentifier })\n], AttributeCertificateInfo.prototype, \"signature\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer, converter: AsnIntegerArrayBufferConverter })\n], AttributeCertificateInfo.prototype, \"serialNumber\", void 0);\n__decorate([\n    AsnProp({ type: AttCertValidityPeriod })\n], AttributeCertificateInfo.prototype, \"attrCertValidityPeriod\", void 0);\n__decorate([\n    AsnProp({ type: Attribute, repeated: \"sequence\" })\n], AttributeCertificateInfo.prototype, \"attributes\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.BitString, optional: true })\n], AttributeCertificateInfo.prototype, \"issuerUniqueID\", void 0);\n__decorate([\n    AsnProp({ type: Extensions, optional: true })\n], AttributeCertificateInfo.prototype, \"extensions\", void 0);\n","import { BitString } from \"@peculiar/asn1-schema\";\nexport var ClassListFlags;\n(function (ClassListFlags) {\n    ClassListFlags[ClassListFlags[\"unmarked\"] = 1] = \"unmarked\";\n    ClassListFlags[ClassListFlags[\"unclassified\"] = 2] = \"unclassified\";\n    ClassListFlags[ClassListFlags[\"restricted\"] = 4] = \"restricted\";\n    ClassListFlags[ClassListFlags[\"confidential\"] = 8] = \"confidential\";\n    ClassListFlags[ClassListFlags[\"secret\"] = 16] = \"secret\";\n    ClassListFlags[ClassListFlags[\"topSecret\"] = 32] = \"topSecret\";\n})(ClassListFlags || (ClassListFlags = {}));\nexport class ClassList extends BitString {\n}\n","import { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes } from \"@peculiar/asn1-schema\";\nimport { AlgorithmIdentifier } from \"@peculiar/asn1-x509\";\nimport { AttributeCertificateInfo } from \"./attribute_certificate_info\";\nexport class AttributeCertificate {\n    constructor(params = {}) {\n        this.acinfo = new AttributeCertificateInfo();\n        this.signatureAlgorithm = new AlgorithmIdentifier();\n        this.signatureValue = new ArrayBuffer(0);\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AttributeCertificateInfo })\n], AttributeCertificate.prototype, \"acinfo\", void 0);\n__decorate([\n    AsnProp({ type: AlgorithmIdentifier })\n], AttributeCertificate.prototype, \"signatureAlgorithm\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.BitString })\n], AttributeCertificate.prototype, \"signatureValue\", void 0);\n","import { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes } from \"@peculiar/asn1-schema\";\nexport class SecurityCategory {\n    constructor(params = {}) {\n        this.type = \"\";\n        this.value = new ArrayBuffer(0);\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AsnPropTypes.ObjectIdentifier, implicit: true, context: 0 })\n], SecurityCategory.prototype, \"type\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Any, implicit: true, context: 1 })\n], SecurityCategory.prototype, \"value\", void 0);\n","import { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes } from \"@peculiar/asn1-schema\";\nimport { ClassList, ClassListFlags } from \"./class_list\";\nimport { SecurityCategory } from \"./security_category\";\nexport class Clearance {\n    constructor(params = {}) {\n        this.policyId = \"\";\n        this.classList = new ClassList(ClassListFlags.unclassified);\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AsnPropTypes.ObjectIdentifier })\n], Clearance.prototype, \"policyId\", void 0);\n__decorate([\n    AsnProp({ type: ClassList, defaultValue: new ClassList(ClassListFlags.unclassified) })\n], Clearance.prototype, \"classList\", void 0);\n__decorate([\n    AsnProp({ type: SecurityCategory, repeated: \"set\" })\n], Clearance.prototype, \"securityCategories\", void 0);\n","import { __decorate } from \"tslib\";\nimport { AsnProp, OctetString, AsnPropTypes } from \"@peculiar/asn1-schema\";\nimport { GeneralNames } from \"@peculiar/asn1-x509\";\nexport class IetfAttrSyntaxValueChoices {\n    constructor(params = {}) {\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: OctetString })\n], IetfAttrSyntaxValueChoices.prototype, \"cotets\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.ObjectIdentifier })\n], IetfAttrSyntaxValueChoices.prototype, \"oid\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Utf8String })\n], IetfAttrSyntaxValueChoices.prototype, \"string\", void 0);\nexport class IetfAttrSyntax {\n    constructor(params = {}) {\n        this.values = [];\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: GeneralNames, implicit: true, context: 0, optional: true })\n], IetfAttrSyntax.prototype, \"policyAuthority\", void 0);\n__decorate([\n    AsnProp({ type: IetfAttrSyntaxValueChoices, repeated: \"sequence\" })\n], IetfAttrSyntax.prototype, \"values\", void 0);\n","var Targets_1;\nimport { __decorate } from \"tslib\";\nimport { AsnProp, AsnType, AsnTypeTypes, AsnArray } from \"@peculiar/asn1-schema\";\nimport { GeneralName } from \"@peculiar/asn1-x509\";\nimport { IssuerSerial } from \"./issuer_serial\";\nimport { ObjectDigestInfo } from \"./object_digest_info\";\nexport class TargetCert {\n    constructor(params = {}) {\n        this.targetCertificate = new IssuerSerial();\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: IssuerSerial })\n], TargetCert.prototype, \"targetCertificate\", void 0);\n__decorate([\n    AsnProp({ type: GeneralName, optional: true })\n], TargetCert.prototype, \"targetName\", void 0);\n__decorate([\n    AsnProp({ type: ObjectDigestInfo, optional: true })\n], TargetCert.prototype, \"certDigestInfo\", void 0);\nlet Target = class Target {\n    constructor(params = {}) {\n        Object.assign(this, params);\n    }\n};\n__decorate([\n    AsnProp({ type: GeneralName, context: 0, implicit: true })\n], Target.prototype, \"targetName\", void 0);\n__decorate([\n    AsnProp({ type: GeneralName, context: 1, implicit: true })\n], Target.prototype, \"targetGroup\", void 0);\n__decorate([\n    AsnProp({ type: TargetCert, context: 2, implicit: true })\n], Target.prototype, \"targetCert\", void 0);\nTarget = __decorate([\n    AsnType({ type: AsnTypeTypes.Choice })\n], Target);\nexport { Target };\nlet Targets = Targets_1 = class Targets extends AsnArray {\n    constructor(items) {\n        super(items);\n        Object.setPrototypeOf(this, Targets_1.prototype);\n    }\n};\nTargets = Targets_1 = __decorate([\n    AsnType({ type: AsnTypeTypes.Sequence, itemType: Target })\n], Targets);\nexport { Targets };\n","var ProxyInfo_1;\nimport { __decorate } from \"tslib\";\nimport { AsnType, AsnTypeTypes, AsnArray } from \"@peculiar/asn1-schema\";\nimport { Targets } from \"./target\";\nlet ProxyInfo = ProxyInfo_1 = class ProxyInfo extends AsnArray {\n    constructor(items) {\n        super(items);\n        Object.setPrototypeOf(this, ProxyInfo_1.prototype);\n    }\n};\nProxyInfo = ProxyInfo_1 = __decorate([\n    AsnType({ type: AsnTypeTypes.Sequence, itemType: Targets })\n], ProxyInfo);\nexport { ProxyInfo };\n","import { __decorate } from \"tslib\";\nimport { AsnProp } from \"@peculiar/asn1-schema\";\nimport { GeneralNames, GeneralName } from \"@peculiar/asn1-x509\";\nexport class RoleSyntax {\n    constructor(params = {}) {\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: GeneralNames, implicit: true, context: 0, optional: true })\n], RoleSyntax.prototype, \"roleAuthority\", void 0);\n__decorate([\n    AsnProp({ type: GeneralName, implicit: true, context: 1 })\n], RoleSyntax.prototype, \"roleName\", void 0);\n","import { __decorate } from \"tslib\";\nimport { AsnProp, OctetString } from \"@peculiar/asn1-schema\";\nimport { GeneralName } from \"@peculiar/asn1-x509\";\nexport class SvceAuthInfo {\n    constructor(params = {}) {\n        this.service = new GeneralName();\n        this.ident = new GeneralName();\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: GeneralName })\n], SvceAuthInfo.prototype, \"service\", void 0);\n__decorate([\n    AsnProp({ type: GeneralName })\n], SvceAuthInfo.prototype, \"ident\", void 0);\n__decorate([\n    AsnProp({ type: OctetString, optional: true })\n], SvceAuthInfo.prototype, \"authInfo\", void 0);\n","var CertificateSet_1;\nimport { __decorate } from \"tslib\";\nimport { AsnType, AsnTypeTypes, AsnProp, AsnPropTypes, AsnArray } from \"@peculiar/asn1-schema\";\nimport { Certificate } from \"@peculiar/asn1-x509\";\nimport { AttributeCertificate } from '@peculiar/asn1-x509-attr';\nexport class OtherCertificateFormat {\n    constructor(params = {}) {\n        this.otherCertFormat = \"\";\n        this.otherCert = new ArrayBuffer(0);\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AsnPropTypes.ObjectIdentifier })\n], OtherCertificateFormat.prototype, \"otherCertFormat\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Any })\n], OtherCertificateFormat.prototype, \"otherCert\", void 0);\nlet CertificateChoices = class CertificateChoices {\n    constructor(params = {}) {\n        Object.assign(this, params);\n    }\n};\n__decorate([\n    AsnProp({ type: Certificate })\n], CertificateChoices.prototype, \"certificate\", void 0);\n__decorate([\n    AsnProp({ type: AttributeCertificate, context: 2, implicit: true })\n], CertificateChoices.prototype, \"v2AttrCert\", void 0);\n__decorate([\n    AsnProp({ type: OtherCertificateFormat, context: 3, implicit: true })\n], CertificateChoices.prototype, \"other\", void 0);\nCertificateChoices = __decorate([\n    AsnType({ type: AsnTypeTypes.Choice })\n], CertificateChoices);\nexport { CertificateChoices };\nlet CertificateSet = CertificateSet_1 = class CertificateSet extends AsnArray {\n    constructor(items) {\n        super(items);\n        Object.setPrototypeOf(this, CertificateSet_1.prototype);\n    }\n};\nCertificateSet = CertificateSet_1 = __decorate([\n    AsnType({ type: AsnTypeTypes.Set, itemType: CertificateChoices })\n], CertificateSet);\nexport { CertificateSet };\n","import { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes } from \"@peculiar/asn1-schema\";\nexport class ContentInfo {\n    constructor(params = {}) {\n        this.contentType = \"\";\n        this.content = new ArrayBuffer(0);\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AsnPropTypes.ObjectIdentifier })\n], ContentInfo.prototype, \"contentType\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Any, context: 0 })\n], ContentInfo.prototype, \"content\", void 0);\n","import { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes, AsnType, AsnTypeTypes, OctetString } from \"@peculiar/asn1-schema\";\nlet EncapsulatedContent = class EncapsulatedContent {\n    constructor(params = {}) {\n        Object.assign(this, params);\n    }\n};\n__decorate([\n    AsnProp({ type: OctetString })\n], EncapsulatedContent.prototype, \"single\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Any })\n], EncapsulatedContent.prototype, \"any\", void 0);\nEncapsulatedContent = __decorate([\n    AsnType({ type: AsnTypeTypes.Choice })\n], EncapsulatedContent);\nexport { EncapsulatedContent };\nexport class EncapsulatedContentInfo {\n    constructor(params = {}) {\n        this.eContentType = \"\";\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AsnPropTypes.ObjectIdentifier })\n], EncapsulatedContentInfo.prototype, \"eContentType\", void 0);\n__decorate([\n    AsnProp({ type: EncapsulatedContent, context: 0, optional: true })\n], EncapsulatedContentInfo.prototype, \"eContent\", void 0);\n","import { __decorate } from \"tslib\";\nimport { AlgorithmIdentifier } from \"@peculiar/asn1-x509\";\nimport { AsnTypeTypes, AsnType } from \"@peculiar/asn1-schema\";\nexport var CMSVersion;\n(function (CMSVersion) {\n    CMSVersion[CMSVersion[\"v0\"] = 0] = \"v0\";\n    CMSVersion[CMSVersion[\"v1\"] = 1] = \"v1\";\n    CMSVersion[CMSVersion[\"v2\"] = 2] = \"v2\";\n    CMSVersion[CMSVersion[\"v3\"] = 3] = \"v3\";\n    CMSVersion[CMSVersion[\"v4\"] = 4] = \"v4\";\n    CMSVersion[CMSVersion[\"v5\"] = 5] = \"v5\";\n})(CMSVersion || (CMSVersion = {}));\nlet DigestAlgorithmIdentifier = class DigestAlgorithmIdentifier extends AlgorithmIdentifier {\n};\nDigestAlgorithmIdentifier = __decorate([\n    AsnType({ type: AsnTypeTypes.Sequence })\n], DigestAlgorithmIdentifier);\nexport { DigestAlgorithmIdentifier };\nlet SignatureAlgorithmIdentifier = class SignatureAlgorithmIdentifier extends AlgorithmIdentifier {\n};\nSignatureAlgorithmIdentifier = __decorate([\n    AsnType({ type: AsnTypeTypes.Sequence })\n], SignatureAlgorithmIdentifier);\nexport { SignatureAlgorithmIdentifier };\nlet KeyEncryptionAlgorithmIdentifier = class KeyEncryptionAlgorithmIdentifier extends AlgorithmIdentifier {\n};\nKeyEncryptionAlgorithmIdentifier = __decorate([\n    AsnType({ type: AsnTypeTypes.Sequence })\n], KeyEncryptionAlgorithmIdentifier);\nexport { KeyEncryptionAlgorithmIdentifier };\nlet ContentEncryptionAlgorithmIdentifier = class ContentEncryptionAlgorithmIdentifier extends AlgorithmIdentifier {\n};\nContentEncryptionAlgorithmIdentifier = __decorate([\n    AsnType({ type: AsnTypeTypes.Sequence })\n], ContentEncryptionAlgorithmIdentifier);\nexport { ContentEncryptionAlgorithmIdentifier };\nlet MessageAuthenticationCodeAlgorithm = class MessageAuthenticationCodeAlgorithm extends AlgorithmIdentifier {\n};\nMessageAuthenticationCodeAlgorithm = __decorate([\n    AsnType({ type: AsnTypeTypes.Sequence })\n], MessageAuthenticationCodeAlgorithm);\nexport { MessageAuthenticationCodeAlgorithm };\nlet KeyDerivationAlgorithmIdentifier = class KeyDerivationAlgorithmIdentifier extends AlgorithmIdentifier {\n};\nKeyDerivationAlgorithmIdentifier = __decorate([\n    AsnType({ type: AsnTypeTypes.Sequence })\n], KeyDerivationAlgorithmIdentifier);\nexport { KeyDerivationAlgorithmIdentifier };\n","import { __decorate } from \"tslib\";\nimport { AsnConstructedOctetStringConverter, AsnProp, AsnPropTypes, AsnType, AsnTypeTypes, OctetString } from \"@peculiar/asn1-schema\";\nimport { ContentEncryptionAlgorithmIdentifier } from \"./types\";\nlet EncryptedContent = class EncryptedContent {\n    constructor(params = {}) {\n        Object.assign(this, params);\n    }\n};\n__decorate([\n    AsnProp({ type: OctetString, context: 0, implicit: true, optional: true })\n], EncryptedContent.prototype, \"value\", void 0);\n__decorate([\n    AsnProp({ type: OctetString, converter: AsnConstructedOctetStringConverter, context: 0, implicit: true, optional: true, repeated: \"sequence\" })\n], EncryptedContent.prototype, \"constructedValue\", void 0);\nEncryptedContent = __decorate([\n    AsnType({ type: AsnTypeTypes.Choice })\n], EncryptedContent);\nexport { EncryptedContent };\nexport class EncryptedContentInfo {\n    constructor(params = {}) {\n        this.contentType = \"\";\n        this.contentEncryptionAlgorithm = new ContentEncryptionAlgorithmIdentifier();\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AsnPropTypes.ObjectIdentifier })\n], EncryptedContentInfo.prototype, \"contentType\", void 0);\n__decorate([\n    AsnProp({ type: ContentEncryptionAlgorithmIdentifier })\n], EncryptedContentInfo.prototype, \"contentEncryptionAlgorithm\", void 0);\n__decorate([\n    AsnProp({ type: EncryptedContent, optional: true })\n], EncryptedContentInfo.prototype, \"encryptedContent\", void 0);\n","import { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes, AsnIntegerArrayBufferConverter } from \"@peculiar/asn1-schema\";\nimport { Name } from \"@peculiar/asn1-x509\";\nexport class IssuerAndSerialNumber {\n    constructor(params = {}) {\n        this.issuer = new Name;\n        this.serialNumber = new ArrayBuffer(0);\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: Name })\n], IssuerAndSerialNumber.prototype, \"issuer\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer, converter: AsnIntegerArrayBufferConverter })\n], IssuerAndSerialNumber.prototype, \"serialNumber\", void 0);\n","import { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes } from \"@peculiar/asn1-schema\";\nexport class OtherKeyAttribute {\n    constructor(params = {}) {\n        this.keyAttrId = \"\";\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AsnPropTypes.ObjectIdentifier })\n], OtherKeyAttribute.prototype, \"keyAttrId\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Any, optional: true })\n], OtherKeyAttribute.prototype, \"keyAttr\", void 0);\n","var RecipientEncryptedKeys_1;\nimport { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes, AsnArray, AsnType, AsnTypeTypes, OctetString } from \"@peculiar/asn1-schema\";\nimport { CMSVersion, KeyEncryptionAlgorithmIdentifier } from \"./types\";\nimport { IssuerAndSerialNumber } from \"./issuer_and_serial_number\";\nimport { AlgorithmIdentifier, SubjectKeyIdentifier } from \"@peculiar/asn1-x509\";\nimport { OtherKeyAttribute } from \"./other_key_attribute\";\nexport class RecipientKeyIdentifier {\n    constructor(params = {}) {\n        this.subjectKeyIdentifier = new SubjectKeyIdentifier();\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: SubjectKeyIdentifier })\n], RecipientKeyIdentifier.prototype, \"subjectKeyIdentifier\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.GeneralizedTime, optional: true })\n], RecipientKeyIdentifier.prototype, \"date\", void 0);\n__decorate([\n    AsnProp({ type: OtherKeyAttribute, optional: true })\n], RecipientKeyIdentifier.prototype, \"other\", void 0);\nlet KeyAgreeRecipientIdentifier = class KeyAgreeRecipientIdentifier {\n    constructor(params = {}) {\n        Object.assign(this, params);\n    }\n};\n__decorate([\n    AsnProp({ type: RecipientKeyIdentifier, context: 0, implicit: true, optional: true })\n], KeyAgreeRecipientIdentifier.prototype, \"rKeyId\", void 0);\n__decorate([\n    AsnProp({ type: IssuerAndSerialNumber, optional: true })\n], KeyAgreeRecipientIdentifier.prototype, \"issuerAndSerialNumber\", void 0);\nKeyAgreeRecipientIdentifier = __decorate([\n    AsnType({ type: AsnTypeTypes.Choice })\n], KeyAgreeRecipientIdentifier);\nexport { KeyAgreeRecipientIdentifier };\nexport class RecipientEncryptedKey {\n    constructor(params = {}) {\n        this.rid = new KeyAgreeRecipientIdentifier();\n        this.encryptedKey = new OctetString();\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: KeyAgreeRecipientIdentifier })\n], RecipientEncryptedKey.prototype, \"rid\", void 0);\n__decorate([\n    AsnProp({ type: OctetString })\n], RecipientEncryptedKey.prototype, \"encryptedKey\", void 0);\nlet RecipientEncryptedKeys = RecipientEncryptedKeys_1 = class RecipientEncryptedKeys extends AsnArray {\n    constructor(items) {\n        super(items);\n        Object.setPrototypeOf(this, RecipientEncryptedKeys_1.prototype);\n    }\n};\nRecipientEncryptedKeys = RecipientEncryptedKeys_1 = __decorate([\n    AsnType({ type: AsnTypeTypes.Sequence, itemType: RecipientEncryptedKey })\n], RecipientEncryptedKeys);\nexport { RecipientEncryptedKeys };\nexport class OriginatorPublicKey {\n    constructor(params = {}) {\n        this.algorithm = new AlgorithmIdentifier();\n        this.publicKey = new ArrayBuffer(0);\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AlgorithmIdentifier })\n], OriginatorPublicKey.prototype, \"algorithm\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.BitString })\n], OriginatorPublicKey.prototype, \"publicKey\", void 0);\nlet OriginatorIdentifierOrKey = class OriginatorIdentifierOrKey {\n    constructor(params = {}) {\n        Object.assign(this, params);\n    }\n};\n__decorate([\n    AsnProp({ type: SubjectKeyIdentifier, context: 0, implicit: true, optional: true })\n], OriginatorIdentifierOrKey.prototype, \"subjectKeyIdentifier\", void 0);\n__decorate([\n    AsnProp({ type: OriginatorPublicKey, context: 1, implicit: true, optional: true })\n], OriginatorIdentifierOrKey.prototype, \"originatorKey\", void 0);\n__decorate([\n    AsnProp({ type: IssuerAndSerialNumber, optional: true })\n], OriginatorIdentifierOrKey.prototype, \"issuerAndSerialNumber\", void 0);\nOriginatorIdentifierOrKey = __decorate([\n    AsnType({ type: AsnTypeTypes.Choice })\n], OriginatorIdentifierOrKey);\nexport { OriginatorIdentifierOrKey };\nexport class KeyAgreeRecipientInfo {\n    constructor(params = {}) {\n        this.version = CMSVersion.v3;\n        this.originator = new OriginatorIdentifierOrKey();\n        this.keyEncryptionAlgorithm = new KeyEncryptionAlgorithmIdentifier();\n        this.recipientEncryptedKeys = new RecipientEncryptedKeys();\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer })\n], KeyAgreeRecipientInfo.prototype, \"version\", void 0);\n__decorate([\n    AsnProp({ type: OriginatorIdentifierOrKey, context: 0 })\n], KeyAgreeRecipientInfo.prototype, \"originator\", void 0);\n__decorate([\n    AsnProp({ type: OctetString, context: 1, optional: true })\n], KeyAgreeRecipientInfo.prototype, \"ukm\", void 0);\n__decorate([\n    AsnProp({ type: KeyEncryptionAlgorithmIdentifier })\n], KeyAgreeRecipientInfo.prototype, \"keyEncryptionAlgorithm\", void 0);\n__decorate([\n    AsnProp({ type: RecipientEncryptedKeys })\n], KeyAgreeRecipientInfo.prototype, \"recipientEncryptedKeys\", void 0);\n","import { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes, AsnType, AsnTypeTypes, OctetString } from \"@peculiar/asn1-schema\";\nimport { CMSVersion, KeyEncryptionAlgorithmIdentifier } from \"./types\";\nimport { IssuerAndSerialNumber } from \"./issuer_and_serial_number\";\nimport { SubjectKeyIdentifier } from \"@peculiar/asn1-x509\";\nlet RecipientIdentifier = class RecipientIdentifier {\n    constructor(params = {}) {\n        Object.assign(this, params);\n    }\n};\n__decorate([\n    AsnProp({ type: SubjectKeyIdentifier, context: 0, implicit: true })\n], RecipientIdentifier.prototype, \"subjectKeyIdentifier\", void 0);\n__decorate([\n    AsnProp({ type: IssuerAndSerialNumber })\n], RecipientIdentifier.prototype, \"issuerAndSerialNumber\", void 0);\nRecipientIdentifier = __decorate([\n    AsnType({ type: AsnTypeTypes.Choice })\n], RecipientIdentifier);\nexport { RecipientIdentifier };\nexport class KeyTransRecipientInfo {\n    constructor(params = {}) {\n        this.version = CMSVersion.v0;\n        this.rid = new RecipientIdentifier();\n        this.keyEncryptionAlgorithm = new KeyEncryptionAlgorithmIdentifier();\n        this.encryptedKey = new OctetString();\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer })\n], KeyTransRecipientInfo.prototype, \"version\", void 0);\n__decorate([\n    AsnProp({ type: RecipientIdentifier })\n], KeyTransRecipientInfo.prototype, \"rid\", void 0);\n__decorate([\n    AsnProp({ type: KeyEncryptionAlgorithmIdentifier })\n], KeyTransRecipientInfo.prototype, \"keyEncryptionAlgorithm\", void 0);\n__decorate([\n    AsnProp({ type: OctetString })\n], KeyTransRecipientInfo.prototype, \"encryptedKey\", void 0);\n","import { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes, OctetString } from \"@peculiar/asn1-schema\";\nimport { OtherKeyAttribute } from \"./other_key_attribute\";\nimport { CMSVersion, KeyEncryptionAlgorithmIdentifier } from \"./types\";\nexport class KEKIdentifier {\n    constructor(params = {}) {\n        this.keyIdentifier = new OctetString();\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: OctetString })\n], KEKIdentifier.prototype, \"keyIdentifier\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.GeneralizedTime, optional: true })\n], KEKIdentifier.prototype, \"date\", void 0);\n__decorate([\n    AsnProp({ type: OtherKeyAttribute, optional: true })\n], KEKIdentifier.prototype, \"other\", void 0);\nexport class KEKRecipientInfo {\n    constructor(params = {}) {\n        this.version = CMSVersion.v4;\n        this.kekid = new KEKIdentifier();\n        this.keyEncryptionAlgorithm = new KeyEncryptionAlgorithmIdentifier();\n        this.encryptedKey = new OctetString();\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer })\n], KEKRecipientInfo.prototype, \"version\", void 0);\n__decorate([\n    AsnProp({ type: KEKIdentifier })\n], KEKRecipientInfo.prototype, \"kekid\", void 0);\n__decorate([\n    AsnProp({ type: KeyEncryptionAlgorithmIdentifier })\n], KEKRecipientInfo.prototype, \"keyEncryptionAlgorithm\", void 0);\n__decorate([\n    AsnProp({ type: OctetString })\n], KEKRecipientInfo.prototype, \"encryptedKey\", void 0);\n","import { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes, OctetString } from \"@peculiar/asn1-schema\";\nimport { CMSVersion, KeyDerivationAlgorithmIdentifier, KeyEncryptionAlgorithmIdentifier } from \"./types\";\nexport class PasswordRecipientInfo {\n    constructor(params = {}) {\n        this.version = CMSVersion.v0;\n        this.keyEncryptionAlgorithm = new KeyEncryptionAlgorithmIdentifier();\n        this.encryptedKey = new OctetString();\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer })\n], PasswordRecipientInfo.prototype, \"version\", void 0);\n__decorate([\n    AsnProp({ type: KeyDerivationAlgorithmIdentifier, context: 0, optional: true })\n], PasswordRecipientInfo.prototype, \"keyDerivationAlgorithm\", void 0);\n__decorate([\n    AsnProp({ type: KeyEncryptionAlgorithmIdentifier })\n], PasswordRecipientInfo.prototype, \"keyEncryptionAlgorithm\", void 0);\n__decorate([\n    AsnProp({ type: OctetString })\n], PasswordRecipientInfo.prototype, \"encryptedKey\", void 0);\n","import { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes, AsnType, AsnTypeTypes } from \"@peculiar/asn1-schema\";\nimport { KeyAgreeRecipientInfo } from \"./key_agree_recipient_info\";\nimport { KeyTransRecipientInfo } from \"./key_trans_recipient_info\";\nimport { KEKRecipientInfo } from \"./kek_recipient_info\";\nimport { PasswordRecipientInfo } from \"./password_recipient_info\";\nexport class OtherRecipientInfo {\n    constructor(params = {}) {\n        this.oriType = \"\";\n        this.oriValue = new ArrayBuffer(0);\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AsnPropTypes.ObjectIdentifier })\n], OtherRecipientInfo.prototype, \"oriType\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Any })\n], OtherRecipientInfo.prototype, \"oriValue\", void 0);\nlet RecipientInfo = class RecipientInfo {\n    constructor(params = {}) {\n        Object.assign(this, params);\n    }\n};\n__decorate([\n    AsnProp({ type: KeyTransRecipientInfo, optional: true })\n], RecipientInfo.prototype, \"ktri\", void 0);\n__decorate([\n    AsnProp({ type: KeyAgreeRecipientInfo, context: 1, implicit: true, optional: true })\n], RecipientInfo.prototype, \"kari\", void 0);\n__decorate([\n    AsnProp({ type: KEKRecipientInfo, context: 2, implicit: true, optional: true })\n], RecipientInfo.prototype, \"kekri\", void 0);\n__decorate([\n    AsnProp({ type: PasswordRecipientInfo, context: 3, implicit: true, optional: true })\n], RecipientInfo.prototype, \"pwri\", void 0);\n__decorate([\n    AsnProp({ type: OtherRecipientInfo, context: 4, implicit: true, optional: true })\n], RecipientInfo.prototype, \"ori\", void 0);\nRecipientInfo = __decorate([\n    AsnType({ type: AsnTypeTypes.Choice })\n], RecipientInfo);\nexport { RecipientInfo };\n","var RecipientInfos_1;\nimport { __decorate } from \"tslib\";\nimport { AsnArray, AsnType, AsnTypeTypes } from \"@peculiar/asn1-schema\";\nimport { RecipientInfo } from \"./recipient_info\";\nlet RecipientInfos = RecipientInfos_1 = class RecipientInfos extends AsnArray {\n    constructor(items) {\n        super(items);\n        Object.setPrototypeOf(this, RecipientInfos_1.prototype);\n    }\n};\nRecipientInfos = RecipientInfos_1 = __decorate([\n    AsnType({ type: AsnTypeTypes.Set, itemType: RecipientInfo })\n], RecipientInfos);\nexport { RecipientInfos };\n","var RevocationInfoChoices_1;\nimport { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes, AsnType, AsnTypeTypes, AsnArray } from \"@peculiar/asn1-schema\";\nimport { id_pkix } from \"@peculiar/asn1-x509\";\nexport const id_ri = `${id_pkix}.16`;\nexport const id_ri_ocsp_response = `${id_ri}.2`;\nexport const id_ri_scvp = `${id_ri}.4`;\nexport class OtherRevocationInfoFormat {\n    constructor(params = {}) {\n        this.otherRevInfoFormat = \"\";\n        this.otherRevInfo = new ArrayBuffer(0);\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AsnPropTypes.ObjectIdentifier })\n], OtherRevocationInfoFormat.prototype, \"otherRevInfoFormat\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Any })\n], OtherRevocationInfoFormat.prototype, \"otherRevInfo\", void 0);\nlet RevocationInfoChoice = class RevocationInfoChoice {\n    constructor(params = {}) {\n        this.other = new OtherRevocationInfoFormat();\n        Object.assign(this, params);\n    }\n};\n__decorate([\n    AsnProp({ type: OtherRevocationInfoFormat, context: 1, implicit: true })\n], RevocationInfoChoice.prototype, \"other\", void 0);\nRevocationInfoChoice = __decorate([\n    AsnType({ type: AsnTypeTypes.Choice })\n], RevocationInfoChoice);\nexport { RevocationInfoChoice };\nlet RevocationInfoChoices = RevocationInfoChoices_1 = class RevocationInfoChoices extends AsnArray {\n    constructor(items) {\n        super(items);\n        Object.setPrototypeOf(this, RevocationInfoChoices_1.prototype);\n    }\n};\nRevocationInfoChoices = RevocationInfoChoices_1 = __decorate([\n    AsnType({ type: AsnTypeTypes.Set, itemType: RevocationInfoChoice })\n], RevocationInfoChoices);\nexport { RevocationInfoChoices };\n","import { __decorate } from \"tslib\";\nimport { AsnProp } from \"@peculiar/asn1-schema\";\nimport { CertificateSet } from \"./certificate_choices\";\nimport { RevocationInfoChoices } from \"./revocation_info_choice\";\nexport class OriginatorInfo {\n    constructor(params = {}) {\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: CertificateSet, context: 0, implicit: true, optional: true })\n], OriginatorInfo.prototype, \"certs\", void 0);\n__decorate([\n    AsnProp({ type: RevocationInfoChoices, context: 1, implicit: true, optional: true })\n], OriginatorInfo.prototype, \"crls\", void 0);\n","var UnprotectedAttributes_1;\nimport { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes, AsnArray, AsnType, AsnTypeTypes } from \"@peculiar/asn1-schema\";\nimport { CMSVersion } from \"./types\";\nimport { Attribute } from \"./attribute\";\nimport { RecipientInfos } from \"./recipient_infos\";\nimport { OriginatorInfo } from \"./originator_info\";\nimport { EncryptedContentInfo } from \"./encrypted_content_info\";\nlet UnprotectedAttributes = UnprotectedAttributes_1 = class UnprotectedAttributes extends AsnArray {\n    constructor(items) {\n        super(items);\n        Object.setPrototypeOf(this, UnprotectedAttributes_1.prototype);\n    }\n};\nUnprotectedAttributes = UnprotectedAttributes_1 = __decorate([\n    AsnType({ type: AsnTypeTypes.Set, itemType: Attribute })\n], UnprotectedAttributes);\nexport { UnprotectedAttributes };\nexport class EnvelopedData {\n    constructor(params = {}) {\n        this.version = CMSVersion.v0;\n        this.recipientInfos = new RecipientInfos();\n        this.encryptedContentInfo = new EncryptedContentInfo();\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer })\n], EnvelopedData.prototype, \"version\", void 0);\n__decorate([\n    AsnProp({ type: OriginatorInfo, context: 0, implicit: true, optional: true })\n], EnvelopedData.prototype, \"originatorInfo\", void 0);\n__decorate([\n    AsnProp({ type: RecipientInfos })\n], EnvelopedData.prototype, \"recipientInfos\", void 0);\n__decorate([\n    AsnProp({ type: EncryptedContentInfo })\n], EnvelopedData.prototype, \"encryptedContentInfo\", void 0);\n__decorate([\n    AsnProp({ type: UnprotectedAttributes, context: 1, implicit: true, optional: true })\n], EnvelopedData.prototype, \"unprotectedAttrs\", void 0);\n","export const id_ct_contentInfo = \"1.2.840.113549.1.9.16.1.6\";\nexport const id_data = \"1.2.840.113549.1.7.1\";\nexport const id_signedData = \"1.2.840.113549.1.7.2\";\nexport const id_envelopedData = \"1.2.840.113549.1.7.3\";\nexport const id_digestedData = \"1.2.840.113549.1.7.5\";\nexport const id_encryptedData = \"1.2.840.113549.1.7.6\";\nexport const id_authData = \"1.2.840.113549.1.9.16.1.2\";\n","import { __decorate } from \"tslib\";\nimport { AsnProp, AsnType, AsnTypeTypes } from \"@peculiar/asn1-schema\";\nimport { IssuerAndSerialNumber } from \"./issuer_and_serial_number\";\nimport { SubjectKeyIdentifier } from \"@peculiar/asn1-x509\";\nlet SignerIdentifier = class SignerIdentifier {\n    constructor(params = {}) {\n        Object.assign(this, params);\n    }\n};\n__decorate([\n    AsnProp({ type: SubjectKeyIdentifier, context: 0, implicit: true })\n], SignerIdentifier.prototype, \"subjectKeyIdentifier\", void 0);\n__decorate([\n    AsnProp({ type: IssuerAndSerialNumber })\n], SignerIdentifier.prototype, \"issuerAndSerialNumber\", void 0);\nSignerIdentifier = __decorate([\n    AsnType({ type: AsnTypeTypes.Choice })\n], SignerIdentifier);\nexport { SignerIdentifier };\n","var SignerInfos_1;\nimport { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes, AsnArray, AsnType, AsnTypeTypes, OctetString } from \"@peculiar/asn1-schema\";\nimport { SignerIdentifier } from \"./signer_identifier\";\nimport { CMSVersion, SignatureAlgorithmIdentifier, DigestAlgorithmIdentifier } from \"./types\";\nimport { Attribute } from \"./attribute\";\nexport class SignerInfo {\n    constructor(params = {}) {\n        this.version = CMSVersion.v0;\n        this.sid = new SignerIdentifier();\n        this.digestAlgorithm = new DigestAlgorithmIdentifier();\n        this.signatureAlgorithm = new SignatureAlgorithmIdentifier();\n        this.signature = new OctetString();\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer })\n], SignerInfo.prototype, \"version\", void 0);\n__decorate([\n    AsnProp({ type: SignerIdentifier })\n], SignerInfo.prototype, \"sid\", void 0);\n__decorate([\n    AsnProp({ type: DigestAlgorithmIdentifier })\n], SignerInfo.prototype, \"digestAlgorithm\", void 0);\n__decorate([\n    AsnProp({ type: Attribute, repeated: \"set\", context: 0, implicit: true, optional: true })\n], SignerInfo.prototype, \"signedAttrs\", void 0);\n__decorate([\n    AsnProp({ type: SignatureAlgorithmIdentifier })\n], SignerInfo.prototype, \"signatureAlgorithm\", void 0);\n__decorate([\n    AsnProp({ type: OctetString })\n], SignerInfo.prototype, \"signature\", void 0);\n__decorate([\n    AsnProp({ type: Attribute, repeated: \"set\", context: 1, implicit: true, optional: true })\n], SignerInfo.prototype, \"unsignedAttrs\", void 0);\nlet SignerInfos = SignerInfos_1 = class SignerInfos extends AsnArray {\n    constructor(items) {\n        super(items);\n        Object.setPrototypeOf(this, SignerInfos_1.prototype);\n    }\n};\nSignerInfos = SignerInfos_1 = __decorate([\n    AsnType({ type: AsnTypeTypes.Set, itemType: SignerInfo })\n], SignerInfos);\nexport { SignerInfos };\n","var DigestAlgorithmIdentifiers_1;\nimport { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes, AsnArray, AsnType, AsnTypeTypes } from \"@peculiar/asn1-schema\";\nimport { CertificateSet } from \"./certificate_choices\";\nimport { CMSVersion, DigestAlgorithmIdentifier } from \"./types\";\nimport { EncapsulatedContentInfo } from \"./encapsulated_content_info\";\nimport { RevocationInfoChoice } from \"./revocation_info_choice\";\nimport { SignerInfos } from \"./signer_info\";\nlet DigestAlgorithmIdentifiers = DigestAlgorithmIdentifiers_1 = class DigestAlgorithmIdentifiers extends AsnArray {\n    constructor(items) {\n        super(items);\n        Object.setPrototypeOf(this, DigestAlgorithmIdentifiers_1.prototype);\n    }\n};\nDigestAlgorithmIdentifiers = DigestAlgorithmIdentifiers_1 = __decorate([\n    AsnType({ type: AsnTypeTypes.Set, itemType: DigestAlgorithmIdentifier })\n], DigestAlgorithmIdentifiers);\nexport { DigestAlgorithmIdentifiers };\nexport class SignedData {\n    constructor(params = {}) {\n        this.version = CMSVersion.v0;\n        this.digestAlgorithms = new DigestAlgorithmIdentifiers();\n        this.encapContentInfo = new EncapsulatedContentInfo();\n        this.signerInfos = new SignerInfos();\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer })\n], SignedData.prototype, \"version\", void 0);\n__decorate([\n    AsnProp({ type: DigestAlgorithmIdentifiers })\n], SignedData.prototype, \"digestAlgorithms\", void 0);\n__decorate([\n    AsnProp({ type: EncapsulatedContentInfo })\n], SignedData.prototype, \"encapContentInfo\", void 0);\n__decorate([\n    AsnProp({ type: CertificateSet, context: 0, implicit: true, optional: true })\n], SignedData.prototype, \"certificates\", void 0);\n__decorate([\n    AsnProp({ type: RevocationInfoChoice, context: 1, implicit: true, optional: true })\n], SignedData.prototype, \"crls\", void 0);\n__decorate([\n    AsnProp({ type: SignerInfos })\n], SignedData.prototype, \"signerInfos\", void 0);\n","export const id_ecPublicKey = \"1.2.840.10045.2.1\";\nexport const id_ecDH = \"1.3.132.1.12\";\nexport const id_ecMQV = \"1.3.132.1.13\";\nexport const id_ecdsaWithSHA1 = \"1.2.840.10045.4.1\";\nexport const id_ecdsaWithSHA224 = \"1.2.840.10045.4.3.1\";\nexport const id_ecdsaWithSHA256 = \"1.2.840.10045.4.3.2\";\nexport const id_ecdsaWithSHA384 = \"1.2.840.10045.4.3.3\";\nexport const id_ecdsaWithSHA512 = \"1.2.840.10045.4.3.4\";\nexport const id_secp192r1 = \"1.2.840.10045.3.1.1\";\nexport const id_sect163k1 = \"1.3.132.0.1\";\nexport const id_sect163r2 = \"1.3.132.0.15\";\nexport const id_secp224r1 = \"1.3.132.0.33\";\nexport const id_sect233k1 = \"1.3.132.0.26\";\nexport const id_sect233r1 = \"1.3.132.0.27\";\nexport const id_secp256r1 = \"1.2.840.10045.3.1.7\";\nexport const id_sect283k1 = \"1.3.132.0.16\";\nexport const id_sect283r1 = \"1.3.132.0.17\";\nexport const id_secp384r1 = \"1.3.132.0.34\";\nexport const id_sect409k1 = \"1.3.132.0.36\";\nexport const id_sect409r1 = \"1.3.132.0.37\";\nexport const id_secp521r1 = \"1.3.132.0.35\";\nexport const id_sect571k1 = \"1.3.132.0.38\";\nexport const id_sect571r1 = \"1.3.132.0.39\";\n","import { AlgorithmIdentifier } from \"@peculiar/asn1-x509\";\nimport * as oid from \"./object_identifiers\";\nfunction create(algorithm) {\n    return new AlgorithmIdentifier({ algorithm });\n}\nexport const ecdsaWithSHA1 = create(oid.id_ecdsaWithSHA1);\nexport const ecdsaWithSHA224 = create(oid.id_ecdsaWithSHA224);\nexport const ecdsaWithSHA256 = create(oid.id_ecdsaWithSHA256);\nexport const ecdsaWithSHA384 = create(oid.id_ecdsaWithSHA384);\nexport const ecdsaWithSHA512 = create(oid.id_ecdsaWithSHA512);\n","import { __decorate } from \"tslib\";\nimport { AsnType, AsnTypeTypes, AsnProp, AsnPropTypes } from \"@peculiar/asn1-schema\";\nlet ECParameters = class ECParameters {\n    constructor(params = {}) {\n        Object.assign(this, params);\n    }\n};\n__decorate([\n    AsnProp({ type: AsnPropTypes.ObjectIdentifier })\n], ECParameters.prototype, \"namedCurve\", void 0);\nECParameters = __decorate([\n    AsnType({ type: AsnTypeTypes.Choice })\n], ECParameters);\nexport { ECParameters };\n","import { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes, OctetString } from \"@peculiar/asn1-schema\";\nimport { ECParameters } from \"./ec_parameters\";\nexport class ECPrivateKey {\n    constructor(params = {}) {\n        this.version = 1;\n        this.privateKey = new OctetString();\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer })\n], ECPrivateKey.prototype, \"version\", void 0);\n__decorate([\n    AsnProp({ type: OctetString })\n], ECPrivateKey.prototype, \"privateKey\", void 0);\n__decorate([\n    AsnProp({ type: ECParameters, context: 0, optional: true })\n], ECPrivateKey.prototype, \"parameters\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.BitString, context: 1, optional: true })\n], ECPrivateKey.prototype, \"publicKey\", void 0);\n","import { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes, AsnIntegerArrayBufferConverter } from \"@peculiar/asn1-schema\";\nexport class ECDSASigValue {\n    constructor(params = {}) {\n        this.r = new ArrayBuffer(0);\n        this.s = new ArrayBuffer(0);\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer, converter: AsnIntegerArrayBufferConverter })\n], ECDSASigValue.prototype, \"r\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer, converter: AsnIntegerArrayBufferConverter })\n], ECDSASigValue.prototype, \"s\", void 0);\n","export const id_pkcs_1 = \"1.2.840.113549.1.1\";\nexport const id_rsaEncryption = `${id_pkcs_1}.1`;\nexport const id_RSAES_OAEP = `${id_pkcs_1}.7`;\nexport const id_pSpecified = `${id_pkcs_1}.9`;\nexport const id_RSASSA_PSS = `${id_pkcs_1}.10`;\nexport const id_md2WithRSAEncryption = `${id_pkcs_1}.2`;\nexport const id_md5WithRSAEncryption = `${id_pkcs_1}.4`;\nexport const id_sha1WithRSAEncryption = `${id_pkcs_1}.5`;\nexport const id_sha224WithRSAEncryption = `${id_pkcs_1}.14`;\nexport const id_ssha224WithRSAEncryption = id_sha224WithRSAEncryption;\nexport const id_sha256WithRSAEncryption = `${id_pkcs_1}.11`;\nexport const id_sha384WithRSAEncryption = `${id_pkcs_1}.12`;\nexport const id_sha512WithRSAEncryption = `${id_pkcs_1}.13`;\nexport const id_sha512_224WithRSAEncryption = `${id_pkcs_1}.15`;\nexport const id_sha512_256WithRSAEncryption = `${id_pkcs_1}.16`;\nexport const id_sha1 = \"1.3.14.3.2.26\";\nexport const id_sha224 = \"2.16.840.1.101.3.4.2.4\";\nexport const id_sha256 = \"2.16.840.1.101.3.4.2.1\";\nexport const id_sha384 = \"2.16.840.1.101.3.4.2.2\";\nexport const id_sha512 = \"2.16.840.1.101.3.4.2.3\";\nexport const id_sha512_224 = \"2.16.840.1.101.3.4.2.5\";\nexport const id_sha512_256 = \"2.16.840.1.101.3.4.2.6\";\nexport const id_md2 = \"1.2.840.113549.2.2\";\nexport const id_md5 = \"1.2.840.113549.2.5\";\nexport const id_mgf1 = `${id_pkcs_1}.8`;\n","import { AsnConvert, AsnOctetStringConverter } from \"@peculiar/asn1-schema\";\nimport { AlgorithmIdentifier } from \"@peculiar/asn1-x509\";\nimport * as oid from \"./object_identifiers\";\nfunction create(algorithm) {\n    return new AlgorithmIdentifier({ algorithm, parameters: null });\n}\nexport const md2 = create(oid.id_md2);\nexport const md4 = create(oid.id_md5);\nexport const sha1 = create(oid.id_sha1);\nexport const sha224 = create(oid.id_sha224);\nexport const sha256 = create(oid.id_sha256);\nexport const sha384 = create(oid.id_sha384);\nexport const sha512 = create(oid.id_sha512);\nexport const sha512_224 = create(oid.id_sha512_224);\nexport const sha512_256 = create(oid.id_sha512_256);\nexport const mgf1SHA1 = new AlgorithmIdentifier({\n    algorithm: oid.id_mgf1,\n    parameters: AsnConvert.serialize(sha1),\n});\nexport const pSpecifiedEmpty = new AlgorithmIdentifier({\n    algorithm: oid.id_pSpecified,\n    parameters: AsnConvert.serialize(AsnOctetStringConverter.toASN(new Uint8Array([0xda, 0x39, 0xa3, 0xee, 0x5e, 0x6b, 0x4b, 0x0d, 0x32, 0x55, 0xbf, 0xef, 0x95, 0x60, 0x18, 0x90, 0xaf, 0xd8, 0x07, 0x09]).buffer)),\n});\nexport const rsaEncryption = create(oid.id_rsaEncryption);\nexport const md2WithRSAEncryption = create(oid.id_md2WithRSAEncryption);\nexport const md5WithRSAEncryption = create(oid.id_md5WithRSAEncryption);\nexport const sha1WithRSAEncryption = create(oid.id_sha1WithRSAEncryption);\nexport const sha224WithRSAEncryption = create(oid.id_sha512_224WithRSAEncryption);\nexport const sha256WithRSAEncryption = create(oid.id_sha512_256WithRSAEncryption);\nexport const sha384WithRSAEncryption = create(oid.id_sha384WithRSAEncryption);\nexport const sha512WithRSAEncryption = create(oid.id_sha512WithRSAEncryption);\nexport const sha512_224WithRSAEncryption = create(oid.id_sha512_224WithRSAEncryption);\nexport const sha512_256WithRSAEncryption = create(oid.id_sha512_256WithRSAEncryption);\n","import { __decorate } from \"tslib\";\nimport { AsnProp, AsnConvert } from \"@peculiar/asn1-schema\";\nimport { AlgorithmIdentifier } from \"@peculiar/asn1-x509\";\nimport { id_mgf1, id_RSAES_OAEP } from \"../object_identifiers\";\nimport { sha1, mgf1SHA1, pSpecifiedEmpty } from \"../algorithms\";\nexport class RsaEsOaepParams {\n    constructor(params = {}) {\n        this.hashAlgorithm = new AlgorithmIdentifier(sha1);\n        this.maskGenAlgorithm = new AlgorithmIdentifier({\n            algorithm: id_mgf1,\n            parameters: AsnConvert.serialize(sha1),\n        });\n        this.pSourceAlgorithm = new AlgorithmIdentifier(pSpecifiedEmpty);\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AlgorithmIdentifier, context: 0, defaultValue: sha1 })\n], RsaEsOaepParams.prototype, \"hashAlgorithm\", void 0);\n__decorate([\n    AsnProp({ type: AlgorithmIdentifier, context: 1, defaultValue: mgf1SHA1 })\n], RsaEsOaepParams.prototype, \"maskGenAlgorithm\", void 0);\n__decorate([\n    AsnProp({ type: AlgorithmIdentifier, context: 2, defaultValue: pSpecifiedEmpty })\n], RsaEsOaepParams.prototype, \"pSourceAlgorithm\", void 0);\nexport const RSAES_OAEP = new AlgorithmIdentifier({\n    algorithm: id_RSAES_OAEP,\n    parameters: AsnConvert.serialize(new RsaEsOaepParams()),\n});\n","import { __decorate } from \"tslib\";\nimport { AsnProp, AsnConvert, AsnPropTypes } from \"@peculiar/asn1-schema\";\nimport { AlgorithmIdentifier } from \"@peculiar/asn1-x509\";\nimport { id_mgf1, id_RSASSA_PSS } from \"../object_identifiers\";\nimport { sha1, mgf1SHA1 } from \"../algorithms\";\nexport class RsaSaPssParams {\n    constructor(params = {}) {\n        this.hashAlgorithm = new AlgorithmIdentifier(sha1);\n        this.maskGenAlgorithm = new AlgorithmIdentifier({\n            algorithm: id_mgf1,\n            parameters: AsnConvert.serialize(sha1),\n        });\n        this.saltLength = 20;\n        this.trailerField = 1;\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AlgorithmIdentifier, context: 0, defaultValue: sha1 })\n], RsaSaPssParams.prototype, \"hashAlgorithm\", void 0);\n__decorate([\n    AsnProp({ type: AlgorithmIdentifier, context: 1, defaultValue: mgf1SHA1 })\n], RsaSaPssParams.prototype, \"maskGenAlgorithm\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer, context: 2, defaultValue: 20 })\n], RsaSaPssParams.prototype, \"saltLength\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer, context: 3, defaultValue: 1 })\n], RsaSaPssParams.prototype, \"trailerField\", void 0);\nexport const RSASSA_PSS = new AlgorithmIdentifier({\n    algorithm: id_RSASSA_PSS,\n    parameters: AsnConvert.serialize(new RsaSaPssParams()),\n});\n","import { __decorate } from \"tslib\";\nimport { AlgorithmIdentifier } from \"@peculiar/asn1-x509\";\nimport { AsnProp, OctetString } from \"@peculiar/asn1-schema\";\nexport class DigestInfo {\n    constructor(params = {}) {\n        this.digestAlgorithm = new AlgorithmIdentifier();\n        this.digest = new OctetString();\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AlgorithmIdentifier })\n], DigestInfo.prototype, \"digestAlgorithm\", void 0);\n__decorate([\n    AsnProp({ type: OctetString })\n], DigestInfo.prototype, \"digest\", void 0);\n","var OtherPrimeInfos_1;\nimport { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes, AsnIntegerArrayBufferConverter, AsnArray, AsnType, AsnTypeTypes } from \"@peculiar/asn1-schema\";\nexport class OtherPrimeInfo {\n    constructor(params = {}) {\n        this.prime = new ArrayBuffer(0);\n        this.exponent = new ArrayBuffer(0);\n        this.coefficient = new ArrayBuffer(0);\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer, converter: AsnIntegerArrayBufferConverter })\n], OtherPrimeInfo.prototype, \"prime\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer, converter: AsnIntegerArrayBufferConverter })\n], OtherPrimeInfo.prototype, \"exponent\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer, converter: AsnIntegerArrayBufferConverter })\n], OtherPrimeInfo.prototype, \"coefficient\", void 0);\nlet OtherPrimeInfos = OtherPrimeInfos_1 = class OtherPrimeInfos extends AsnArray {\n    constructor(items) {\n        super(items);\n        Object.setPrototypeOf(this, OtherPrimeInfos_1.prototype);\n    }\n};\nOtherPrimeInfos = OtherPrimeInfos_1 = __decorate([\n    AsnType({ type: AsnTypeTypes.Sequence, itemType: OtherPrimeInfo })\n], OtherPrimeInfos);\nexport { OtherPrimeInfos };\n","import { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes, AsnIntegerArrayBufferConverter } from \"@peculiar/asn1-schema\";\nimport { OtherPrimeInfos } from \"./other_prime_info\";\nexport class RSAPrivateKey {\n    constructor(params = {}) {\n        this.version = 0;\n        this.modulus = new ArrayBuffer(0);\n        this.publicExponent = new ArrayBuffer(0);\n        this.privateExponent = new ArrayBuffer(0);\n        this.prime1 = new ArrayBuffer(0);\n        this.prime2 = new ArrayBuffer(0);\n        this.exponent1 = new ArrayBuffer(0);\n        this.exponent2 = new ArrayBuffer(0);\n        this.coefficient = new ArrayBuffer(0);\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer })\n], RSAPrivateKey.prototype, \"version\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer, converter: AsnIntegerArrayBufferConverter })\n], RSAPrivateKey.prototype, \"modulus\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer, converter: AsnIntegerArrayBufferConverter })\n], RSAPrivateKey.prototype, \"publicExponent\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer, converter: AsnIntegerArrayBufferConverter })\n], RSAPrivateKey.prototype, \"privateExponent\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer, converter: AsnIntegerArrayBufferConverter })\n], RSAPrivateKey.prototype, \"prime1\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer, converter: AsnIntegerArrayBufferConverter })\n], RSAPrivateKey.prototype, \"prime2\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer, converter: AsnIntegerArrayBufferConverter })\n], RSAPrivateKey.prototype, \"exponent1\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer, converter: AsnIntegerArrayBufferConverter })\n], RSAPrivateKey.prototype, \"exponent2\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer, converter: AsnIntegerArrayBufferConverter })\n], RSAPrivateKey.prototype, \"coefficient\", void 0);\n__decorate([\n    AsnProp({ type: OtherPrimeInfos, optional: true })\n], RSAPrivateKey.prototype, \"otherPrimeInfos\", void 0);\n","import { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes, AsnIntegerArrayBufferConverter } from \"@peculiar/asn1-schema\";\nexport class RSAPublicKey {\n    constructor(params = {}) {\n        this.modulus = new ArrayBuffer(0);\n        this.publicExponent = new ArrayBuffer(0);\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer, converter: AsnIntegerArrayBufferConverter })\n], RSAPublicKey.prototype, \"modulus\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer, converter: AsnIntegerArrayBufferConverter })\n], RSAPublicKey.prototype, \"publicExponent\", void 0);\n","var Lifecycle;\n(function (Lifecycle) {\n    Lifecycle[Lifecycle[\"Transient\"] = 0] = \"Transient\";\n    Lifecycle[Lifecycle[\"Singleton\"] = 1] = \"Singleton\";\n    Lifecycle[Lifecycle[\"ResolutionScoped\"] = 2] = \"ResolutionScoped\";\n    Lifecycle[Lifecycle[\"ContainerScoped\"] = 3] = \"ContainerScoped\";\n})(Lifecycle || (Lifecycle = {}));\nexport default Lifecycle;\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","export function isClassProvider(provider) {\n    return !!provider.useClass;\n}\n","export function isFactoryProvider(provider) {\n    return !!provider.useFactory;\n}\n","import { __read, __spread } from \"tslib\";\nvar DelayedConstructor = (function () {\n    function DelayedConstructor(wrap) {\n        this.wrap = wrap;\n        this.reflectMethods = [\n            \"get\",\n            \"getPrototypeOf\",\n            \"setPrototypeOf\",\n            \"getOwnPropertyDescriptor\",\n            \"defineProperty\",\n            \"has\",\n            \"set\",\n            \"deleteProperty\",\n            \"apply\",\n            \"construct\",\n            \"ownKeys\"\n        ];\n    }\n    DelayedConstructor.prototype.createProxy = function (createObject) {\n        var _this = this;\n        var target = {};\n        var init = false;\n        var value;\n        var delayedObject = function () {\n            if (!init) {\n                value = createObject(_this.wrap());\n                init = true;\n            }\n            return value;\n        };\n        return new Proxy(target, this.createHandler(delayedObject));\n    };\n    DelayedConstructor.prototype.createHandler = function (delayedObject) {\n        var handler = {};\n        var install = function (name) {\n            handler[name] = function () {\n                var args = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    args[_i] = arguments[_i];\n                }\n                args[0] = delayedObject();\n                var method = Reflect[name];\n                return method.apply(void 0, __spread(args));\n            };\n        };\n        this.reflectMethods.forEach(install);\n        return handler;\n    };\n    return DelayedConstructor;\n}());\nexport { DelayedConstructor };\nexport function delay(wrappedConstructor) {\n    if (typeof wrappedConstructor === \"undefined\") {\n        throw new Error(\"Attempt to `delay` undefined. Constructor must be wrapped in a callback\");\n    }\n    return new DelayedConstructor(wrappedConstructor);\n}\n","import { DelayedConstructor } from \"../lazy-helpers\";\nexport function isNormalToken(token) {\n    return typeof token === \"string\" || typeof token === \"symbol\";\n}\nexport function isTokenDescriptor(descriptor) {\n    return (typeof descriptor === \"object\" &&\n        \"token\" in descriptor &&\n        \"multiple\" in descriptor);\n}\nexport function isTransformDescriptor(descriptor) {\n    return (typeof descriptor === \"object\" &&\n        \"token\" in descriptor &&\n        \"transform\" in descriptor);\n}\nexport function isConstructorToken(token) {\n    return typeof token === \"function\" || token instanceof DelayedConstructor;\n}\n","export function isTokenProvider(provider) {\n    return !!provider.useToken;\n}\n","export function isValueProvider(provider) {\n    return provider.useValue != undefined;\n}\n","var RegistryBase = (function () {\n    function RegistryBase() {\n        this._registryMap = new Map();\n    }\n    RegistryBase.prototype.entries = function () {\n        return this._registryMap.entries();\n    };\n    RegistryBase.prototype.getAll = function (key) {\n        this.ensure(key);\n        return this._registryMap.get(key);\n    };\n    RegistryBase.prototype.get = function (key) {\n        this.ensure(key);\n        var value = this._registryMap.get(key);\n        return value[value.length - 1] || null;\n    };\n    RegistryBase.prototype.set = function (key, value) {\n        this.ensure(key);\n        this._registryMap.get(key).push(value);\n    };\n    RegistryBase.prototype.setAll = function (key, value) {\n        this._registryMap.set(key, value);\n    };\n    RegistryBase.prototype.has = function (key) {\n        this.ensure(key);\n        return this._registryMap.get(key).length > 0;\n    };\n    RegistryBase.prototype.clear = function () {\n        this._registryMap.clear();\n    };\n    RegistryBase.prototype.ensure = function (key) {\n        if (!this._registryMap.has(key)) {\n            this._registryMap.set(key, []);\n        }\n    };\n    return RegistryBase;\n}());\nexport default RegistryBase;\n","import { __extends } from \"tslib\";\nimport RegistryBase from \"./registry-base\";\nvar Registry = (function (_super) {\n    __extends(Registry, _super);\n    function Registry() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return Registry;\n}(RegistryBase));\nexport default Registry;\n","var ResolutionContext = (function () {\n    function ResolutionContext() {\n        this.scopedResolutions = new Map();\n    }\n    return ResolutionContext;\n}());\nexport default ResolutionContext;\n","import { __read, __spread } from \"tslib\";\nfunction formatDependency(params, idx) {\n    if (params === null) {\n        return \"at position #\" + idx;\n    }\n    var argName = params.split(\",\")[idx].trim();\n    return \"\\\"\" + argName + \"\\\" at position #\" + idx;\n}\nfunction composeErrorMessage(msg, e, indent) {\n    if (indent === void 0) { indent = \"    \"; }\n    return __spread([msg], e.message.split(\"\\n\").map(function (l) { return indent + l; })).join(\"\\n\");\n}\nexport function formatErrorCtor(ctor, paramIdx, error) {\n    var _a = __read(ctor.toString().match(/constructor\\(([\\w, ]+)\\)/) || [], 2), _b = _a[1], params = _b === void 0 ? null : _b;\n    var dep = formatDependency(params, paramIdx);\n    return composeErrorMessage(\"Cannot inject the dependency \" + dep + \" of \\\"\" + ctor.name + \"\\\" constructor. Reason:\", error);\n}\n","import { __extends } from \"tslib\";\nimport RegistryBase from \"./registry-base\";\nvar PreResolutionInterceptors = (function (_super) {\n    __extends(PreResolutionInterceptors, _super);\n    function PreResolutionInterceptors() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return PreResolutionInterceptors;\n}(RegistryBase));\nexport { PreResolutionInterceptors };\nvar PostResolutionInterceptors = (function (_super) {\n    __extends(PostResolutionInterceptors, _super);\n    function PostResolutionInterceptors() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return PostResolutionInterceptors;\n}(RegistryBase));\nexport { PostResolutionInterceptors };\nvar Interceptors = (function () {\n    function Interceptors() {\n        this.preResolution = new PreResolutionInterceptors();\n        this.postResolution = new PostResolutionInterceptors();\n    }\n    return Interceptors;\n}());\nexport default Interceptors;\n","import { __awaiter, __generator, __read, __spread, __values } from \"tslib\";\nimport { isClassProvider, isFactoryProvider, isNormalToken, isTokenProvider, isValueProvider } from \"./providers\";\nimport { isProvider } from \"./providers/provider\";\nimport { isConstructorToken, isTokenDescriptor, isTransformDescriptor } from \"./providers/injection-token\";\nimport Registry from \"./registry\";\nimport Lifecycle from \"./types/lifecycle\";\nimport ResolutionContext from \"./resolution-context\";\nimport { formatErrorCtor } from \"./error-helpers\";\nimport { DelayedConstructor } from \"./lazy-helpers\";\nimport { isDisposable } from \"./types/disposable\";\nimport Interceptors from \"./interceptors\";\nexport var typeInfo = new Map();\nvar InternalDependencyContainer = (function () {\n    function InternalDependencyContainer(parent) {\n        this.parent = parent;\n        this._registry = new Registry();\n        this.interceptors = new Interceptors();\n        this.disposed = false;\n        this.disposables = new Set();\n    }\n    InternalDependencyContainer.prototype.register = function (token, providerOrConstructor, options) {\n        if (options === void 0) { options = { lifecycle: Lifecycle.Transient }; }\n        this.ensureNotDisposed();\n        var provider;\n        if (!isProvider(providerOrConstructor)) {\n            provider = { useClass: providerOrConstructor };\n        }\n        else {\n            provider = providerOrConstructor;\n        }\n        if (isTokenProvider(provider)) {\n            var path = [token];\n            var tokenProvider = provider;\n            while (tokenProvider != null) {\n                var currentToken = tokenProvider.useToken;\n                if (path.includes(currentToken)) {\n                    throw new Error(\"Token registration cycle detected! \" + __spread(path, [currentToken]).join(\" -> \"));\n                }\n                path.push(currentToken);\n                var registration = this._registry.get(currentToken);\n                if (registration && isTokenProvider(registration.provider)) {\n                    tokenProvider = registration.provider;\n                }\n                else {\n                    tokenProvider = null;\n                }\n            }\n        }\n        if (options.lifecycle === Lifecycle.Singleton ||\n            options.lifecycle == Lifecycle.ContainerScoped ||\n            options.lifecycle == Lifecycle.ResolutionScoped) {\n            if (isValueProvider(provider) || isFactoryProvider(provider)) {\n                throw new Error(\"Cannot use lifecycle \\\"\" + Lifecycle[options.lifecycle] + \"\\\" with ValueProviders or FactoryProviders\");\n            }\n        }\n        this._registry.set(token, { provider: provider, options: options });\n        return this;\n    };\n    InternalDependencyContainer.prototype.registerType = function (from, to) {\n        this.ensureNotDisposed();\n        if (isNormalToken(to)) {\n            return this.register(from, {\n                useToken: to\n            });\n        }\n        return this.register(from, {\n            useClass: to\n        });\n    };\n    InternalDependencyContainer.prototype.registerInstance = function (token, instance) {\n        this.ensureNotDisposed();\n        return this.register(token, {\n            useValue: instance\n        });\n    };\n    InternalDependencyContainer.prototype.registerSingleton = function (from, to) {\n        this.ensureNotDisposed();\n        if (isNormalToken(from)) {\n            if (isNormalToken(to)) {\n                return this.register(from, {\n                    useToken: to\n                }, { lifecycle: Lifecycle.Singleton });\n            }\n            else if (to) {\n                return this.register(from, {\n                    useClass: to\n                }, { lifecycle: Lifecycle.Singleton });\n            }\n            throw new Error('Cannot register a type name as a singleton without a \"to\" token');\n        }\n        var useClass = from;\n        if (to && !isNormalToken(to)) {\n            useClass = to;\n        }\n        return this.register(from, {\n            useClass: useClass\n        }, { lifecycle: Lifecycle.Singleton });\n    };\n    InternalDependencyContainer.prototype.resolve = function (token, context) {\n        if (context === void 0) { context = new ResolutionContext(); }\n        this.ensureNotDisposed();\n        var registration = this.getRegistration(token);\n        if (!registration && isNormalToken(token)) {\n            throw new Error(\"Attempted to resolve unregistered dependency token: \\\"\" + token.toString() + \"\\\"\");\n        }\n        this.executePreResolutionInterceptor(token, \"Single\");\n        if (registration) {\n            var result = this.resolveRegistration(registration, context);\n            this.executePostResolutionInterceptor(token, result, \"Single\");\n            return result;\n        }\n        if (isConstructorToken(token)) {\n            var result = this.construct(token, context);\n            this.executePostResolutionInterceptor(token, result, \"Single\");\n            return result;\n        }\n        throw new Error(\"Attempted to construct an undefined constructor. Could mean a circular dependency problem. Try using `delay` function.\");\n    };\n    InternalDependencyContainer.prototype.executePreResolutionInterceptor = function (token, resolutionType) {\n        var e_1, _a;\n        if (this.interceptors.preResolution.has(token)) {\n            var remainingInterceptors = [];\n            try {\n                for (var _b = __values(this.interceptors.preResolution.getAll(token)), _c = _b.next(); !_c.done; _c = _b.next()) {\n                    var interceptor = _c.value;\n                    if (interceptor.options.frequency != \"Once\") {\n                        remainingInterceptors.push(interceptor);\n                    }\n                    interceptor.callback(token, resolutionType);\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n            this.interceptors.preResolution.setAll(token, remainingInterceptors);\n        }\n    };\n    InternalDependencyContainer.prototype.executePostResolutionInterceptor = function (token, result, resolutionType) {\n        var e_2, _a;\n        if (this.interceptors.postResolution.has(token)) {\n            var remainingInterceptors = [];\n            try {\n                for (var _b = __values(this.interceptors.postResolution.getAll(token)), _c = _b.next(); !_c.done; _c = _b.next()) {\n                    var interceptor = _c.value;\n                    if (interceptor.options.frequency != \"Once\") {\n                        remainingInterceptors.push(interceptor);\n                    }\n                    interceptor.callback(token, result, resolutionType);\n                }\n            }\n            catch (e_2_1) { e_2 = { error: e_2_1 }; }\n            finally {\n                try {\n                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                }\n                finally { if (e_2) throw e_2.error; }\n            }\n            this.interceptors.postResolution.setAll(token, remainingInterceptors);\n        }\n    };\n    InternalDependencyContainer.prototype.resolveRegistration = function (registration, context) {\n        this.ensureNotDisposed();\n        if (registration.options.lifecycle === Lifecycle.ResolutionScoped &&\n            context.scopedResolutions.has(registration)) {\n            return context.scopedResolutions.get(registration);\n        }\n        var isSingleton = registration.options.lifecycle === Lifecycle.Singleton;\n        var isContainerScoped = registration.options.lifecycle === Lifecycle.ContainerScoped;\n        var returnInstance = isSingleton || isContainerScoped;\n        var resolved;\n        if (isValueProvider(registration.provider)) {\n            resolved = registration.provider.useValue;\n        }\n        else if (isTokenProvider(registration.provider)) {\n            resolved = returnInstance\n                ? registration.instance ||\n                    (registration.instance = this.resolve(registration.provider.useToken, context))\n                : this.resolve(registration.provider.useToken, context);\n        }\n        else if (isClassProvider(registration.provider)) {\n            resolved = returnInstance\n                ? registration.instance ||\n                    (registration.instance = this.construct(registration.provider.useClass, context))\n                : this.construct(registration.provider.useClass, context);\n        }\n        else if (isFactoryProvider(registration.provider)) {\n            resolved = registration.provider.useFactory(this);\n        }\n        else {\n            resolved = this.construct(registration.provider, context);\n        }\n        if (registration.options.lifecycle === Lifecycle.ResolutionScoped) {\n            context.scopedResolutions.set(registration, resolved);\n        }\n        return resolved;\n    };\n    InternalDependencyContainer.prototype.resolveAll = function (token, context) {\n        var _this = this;\n        if (context === void 0) { context = new ResolutionContext(); }\n        this.ensureNotDisposed();\n        var registrations = this.getAllRegistrations(token);\n        if (!registrations && isNormalToken(token)) {\n            throw new Error(\"Attempted to resolve unregistered dependency token: \\\"\" + token.toString() + \"\\\"\");\n        }\n        this.executePreResolutionInterceptor(token, \"All\");\n        if (registrations) {\n            var result_1 = registrations.map(function (item) {\n                return _this.resolveRegistration(item, context);\n            });\n            this.executePostResolutionInterceptor(token, result_1, \"All\");\n            return result_1;\n        }\n        var result = [this.construct(token, context)];\n        this.executePostResolutionInterceptor(token, result, \"All\");\n        return result;\n    };\n    InternalDependencyContainer.prototype.isRegistered = function (token, recursive) {\n        if (recursive === void 0) { recursive = false; }\n        this.ensureNotDisposed();\n        return (this._registry.has(token) ||\n            (recursive &&\n                (this.parent || false) &&\n                this.parent.isRegistered(token, true)));\n    };\n    InternalDependencyContainer.prototype.reset = function () {\n        this.ensureNotDisposed();\n        this._registry.clear();\n        this.interceptors.preResolution.clear();\n        this.interceptors.postResolution.clear();\n    };\n    InternalDependencyContainer.prototype.clearInstances = function () {\n        var e_3, _a;\n        this.ensureNotDisposed();\n        try {\n            for (var _b = __values(this._registry.entries()), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var _d = __read(_c.value, 2), token = _d[0], registrations = _d[1];\n                this._registry.setAll(token, registrations\n                    .filter(function (registration) { return !isValueProvider(registration.provider); })\n                    .map(function (registration) {\n                    registration.instance = undefined;\n                    return registration;\n                }));\n            }\n        }\n        catch (e_3_1) { e_3 = { error: e_3_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_3) throw e_3.error; }\n        }\n    };\n    InternalDependencyContainer.prototype.createChildContainer = function () {\n        var e_4, _a;\n        this.ensureNotDisposed();\n        var childContainer = new InternalDependencyContainer(this);\n        try {\n            for (var _b = __values(this._registry.entries()), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var _d = __read(_c.value, 2), token = _d[0], registrations = _d[1];\n                if (registrations.some(function (_a) {\n                    var options = _a.options;\n                    return options.lifecycle === Lifecycle.ContainerScoped;\n                })) {\n                    childContainer._registry.setAll(token, registrations.map(function (registration) {\n                        if (registration.options.lifecycle === Lifecycle.ContainerScoped) {\n                            return {\n                                provider: registration.provider,\n                                options: registration.options\n                            };\n                        }\n                        return registration;\n                    }));\n                }\n            }\n        }\n        catch (e_4_1) { e_4 = { error: e_4_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_4) throw e_4.error; }\n        }\n        return childContainer;\n    };\n    InternalDependencyContainer.prototype.beforeResolution = function (token, callback, options) {\n        if (options === void 0) { options = { frequency: \"Always\" }; }\n        this.interceptors.preResolution.set(token, {\n            callback: callback,\n            options: options\n        });\n    };\n    InternalDependencyContainer.prototype.afterResolution = function (token, callback, options) {\n        if (options === void 0) { options = { frequency: \"Always\" }; }\n        this.interceptors.postResolution.set(token, {\n            callback: callback,\n            options: options\n        });\n    };\n    InternalDependencyContainer.prototype.dispose = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var promises;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        this.disposed = true;\n                        promises = [];\n                        this.disposables.forEach(function (disposable) {\n                            var maybePromise = disposable.dispose();\n                            if (maybePromise) {\n                                promises.push(maybePromise);\n                            }\n                        });\n                        return [4, Promise.all(promises)];\n                    case 1:\n                        _a.sent();\n                        return [2];\n                }\n            });\n        });\n    };\n    InternalDependencyContainer.prototype.getRegistration = function (token) {\n        if (this.isRegistered(token)) {\n            return this._registry.get(token);\n        }\n        if (this.parent) {\n            return this.parent.getRegistration(token);\n        }\n        return null;\n    };\n    InternalDependencyContainer.prototype.getAllRegistrations = function (token) {\n        if (this.isRegistered(token)) {\n            return this._registry.getAll(token);\n        }\n        if (this.parent) {\n            return this.parent.getAllRegistrations(token);\n        }\n        return null;\n    };\n    InternalDependencyContainer.prototype.construct = function (ctor, context) {\n        var _this = this;\n        if (ctor instanceof DelayedConstructor) {\n            return ctor.createProxy(function (target) {\n                return _this.resolve(target, context);\n            });\n        }\n        var instance = (function () {\n            var paramInfo = typeInfo.get(ctor);\n            if (!paramInfo || paramInfo.length === 0) {\n                if (ctor.length === 0) {\n                    return new ctor();\n                }\n                else {\n                    throw new Error(\"TypeInfo not known for \\\"\" + ctor.name + \"\\\"\");\n                }\n            }\n            var params = paramInfo.map(_this.resolveParams(context, ctor));\n            return new (ctor.bind.apply(ctor, __spread([void 0], params)))();\n        })();\n        if (isDisposable(instance)) {\n            this.disposables.add(instance);\n        }\n        return instance;\n    };\n    InternalDependencyContainer.prototype.resolveParams = function (context, ctor) {\n        var _this = this;\n        return function (param, idx) {\n            var _a, _b, _c;\n            try {\n                if (isTokenDescriptor(param)) {\n                    if (isTransformDescriptor(param)) {\n                        return param.multiple\n                            ? (_a = _this.resolve(param.transform)).transform.apply(_a, __spread([_this.resolveAll(param.token)], param.transformArgs)) : (_b = _this.resolve(param.transform)).transform.apply(_b, __spread([_this.resolve(param.token, context)], param.transformArgs));\n                    }\n                    else {\n                        return param.multiple\n                            ? _this.resolveAll(param.token)\n                            : _this.resolve(param.token, context);\n                    }\n                }\n                else if (isTransformDescriptor(param)) {\n                    return (_c = _this.resolve(param.transform, context)).transform.apply(_c, __spread([_this.resolve(param.token, context)], param.transformArgs));\n                }\n                return _this.resolve(param, context);\n            }\n            catch (e) {\n                throw new Error(formatErrorCtor(ctor, idx, e));\n            }\n        };\n    };\n    InternalDependencyContainer.prototype.ensureNotDisposed = function () {\n        if (this.disposed) {\n            throw new Error(\"This container has been disposed, you cannot interact with a disposed container\");\n        }\n    };\n    return InternalDependencyContainer;\n}());\nexport var instance = new InternalDependencyContainer();\nexport default instance;\n","import { isClassProvider } from \"./class-provider\";\nimport { isValueProvider } from \"./value-provider\";\nimport { isTokenProvider } from \"./token-provider\";\nimport { isFactoryProvider } from \"./factory-provider\";\nexport function isProvider(provider) {\n    return (isClassProvider(provider) ||\n        isValueProvider(provider) ||\n        isTokenProvider(provider) ||\n        isFactoryProvider(provider));\n}\n","export function isDisposable(value) {\n    if (typeof value.dispose !== \"function\")\n        return false;\n    var disposeFun = value.dispose;\n    if (disposeFun.length > 0) {\n        return false;\n    }\n    return true;\n}\n","export var INJECTION_TOKEN_METADATA_KEY = \"injectionTokens\";\nexport function getParamInfo(target) {\n    var params = Reflect.getMetadata(\"design:paramtypes\", target) || [];\n    var injectionTokens = Reflect.getOwnMetadata(INJECTION_TOKEN_METADATA_KEY, target) || {};\n    Object.keys(injectionTokens).forEach(function (key) {\n        params[+key] = injectionTokens[key];\n    });\n    return params;\n}\nexport function defineInjectionTokenMetadata(data, transform) {\n    return function (target, _propertyKey, parameterIndex) {\n        var descriptors = Reflect.getOwnMetadata(INJECTION_TOKEN_METADATA_KEY, target) || {};\n        descriptors[parameterIndex] = transform\n            ? {\n                token: data,\n                transform: transform.transformToken,\n                transformArgs: transform.args || []\n            }\n            : data;\n        Reflect.defineMetadata(INJECTION_TOKEN_METADATA_KEY, descriptors, target);\n    };\n}\n","import { getParamInfo } from \"../reflection-helpers\";\nimport { typeInfo } from \"../dependency-container\";\nfunction injectable() {\n    return function (target) {\n        typeInfo.set(target, getParamInfo(target));\n    };\n}\nexport default injectable;\n","if (typeof Reflect === \"undefined\" || !Reflect.getMetadata) {\n    throw new Error(\"tsyringe requires a reflect polyfill. Please add 'import \\\"reflect-metadata\\\"' to the top of your entry point.\");\n}\nexport { Lifecycle } from \"./types\";\nexport * from \"./decorators\";\nexport * from \"./factories\";\nexport * from \"./providers\";\nexport { delay } from \"./lazy-helpers\";\nexport { instance as container } from \"./dependency-container\";\n","var PKCS12AttrSet_1;\nimport { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes, AsnArray, AsnType, AsnTypeTypes } from \"@peculiar/asn1-schema\";\nexport class PKCS12Attribute {\n    constructor(params = {}) {\n        this.attrId = \"\";\n        this.attrValues = [];\n        Object.assign(params);\n    }\n}\n__decorate([\n    AsnProp({ type: AsnPropTypes.ObjectIdentifier })\n], PKCS12Attribute.prototype, \"attrId\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Any, repeated: \"set\" })\n], PKCS12Attribute.prototype, \"attrValues\", void 0);\nlet PKCS12AttrSet = PKCS12AttrSet_1 = class PKCS12AttrSet extends AsnArray {\n    constructor(items) {\n        super(items);\n        Object.setPrototypeOf(this, PKCS12AttrSet_1.prototype);\n    }\n};\nPKCS12AttrSet = PKCS12AttrSet_1 = __decorate([\n    AsnType({ type: AsnTypeTypes.Sequence, itemType: PKCS12Attribute })\n], PKCS12AttrSet);\nexport { PKCS12AttrSet };\n","var AuthenticatedSafe_1;\nimport { __decorate } from \"tslib\";\nimport { AsnArray, AsnType, AsnTypeTypes } from \"@peculiar/asn1-schema\";\nimport { ContentInfo } from \"@peculiar/asn1-cms\";\nlet AuthenticatedSafe = AuthenticatedSafe_1 = class AuthenticatedSafe extends AsnArray {\n    constructor(items) {\n        super(items);\n        Object.setPrototypeOf(this, AuthenticatedSafe_1.prototype);\n    }\n};\nAuthenticatedSafe = AuthenticatedSafe_1 = __decorate([\n    AsnType({ type: AsnTypeTypes.Sequence, itemType: ContentInfo })\n], AuthenticatedSafe);\nexport { AuthenticatedSafe };\n","import { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes } from \"@peculiar/asn1-schema\";\nimport { id_pkcs_9 } from \"./types\";\nexport class CertBag {\n    constructor(params = {}) {\n        this.certId = \"\";\n        this.certValue = new ArrayBuffer(0);\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AsnPropTypes.ObjectIdentifier })\n], CertBag.prototype, \"certId\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Any, context: 0 })\n], CertBag.prototype, \"certValue\", void 0);\nexport const id_certTypes = `${id_pkcs_9}.22`;\nexport const id_x509Certificate = `${id_certTypes}.1`;\nexport const id_sdsiCertificate = `${id_certTypes}.2`;\n","import { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes } from \"@peculiar/asn1-schema\";\nimport { id_pkcs_9 } from \"./types\";\nexport class CRLBag {\n    constructor(params = {}) {\n        this.crlId = \"\";\n        this.crltValue = new ArrayBuffer(0);\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AsnPropTypes.ObjectIdentifier })\n], CRLBag.prototype, \"crlId\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Any, context: 0 })\n], CRLBag.prototype, \"crltValue\", void 0);\nexport const id_crlTypes = `${id_pkcs_9}.23`;\nexport const id_x509CRL = `${id_crlTypes}.1`;\n","import { __decorate } from \"tslib\";\nimport { AsnProp, OctetString } from \"@peculiar/asn1-schema\";\nimport { AlgorithmIdentifier } from \"@peculiar/asn1-x509\";\nexport class EncryptedData extends OctetString {\n}\nexport class EncryptedPrivateKeyInfo {\n    constructor(params = {}) {\n        this.encryptionAlgorithm = new AlgorithmIdentifier();\n        this.encryptedData = new EncryptedData();\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AlgorithmIdentifier })\n], EncryptedPrivateKeyInfo.prototype, \"encryptionAlgorithm\", void 0);\n__decorate([\n    AsnProp({ type: EncryptedData })\n], EncryptedPrivateKeyInfo.prototype, \"encryptedData\", void 0);\n","var Attributes_1;\nimport { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes, AsnArray, AsnType, AsnTypeTypes, OctetString } from \"@peculiar/asn1-schema\";\nimport { AlgorithmIdentifier, Attribute } from \"@peculiar/asn1-x509\";\nexport var Version;\n(function (Version) {\n    Version[Version[\"v1\"] = 0] = \"v1\";\n})(Version || (Version = {}));\nexport class PrivateKey extends OctetString {\n}\nlet Attributes = Attributes_1 = class Attributes extends AsnArray {\n    constructor(items) {\n        super(items);\n        Object.setPrototypeOf(this, Attributes_1.prototype);\n    }\n};\nAttributes = Attributes_1 = __decorate([\n    AsnType({ type: AsnTypeTypes.Sequence, itemType: Attribute })\n], Attributes);\nexport { Attributes };\nexport class PrivateKeyInfo {\n    constructor(params = {}) {\n        this.version = Version.v1;\n        this.privateKeyAlgorithm = new AlgorithmIdentifier();\n        this.privateKey = new PrivateKey();\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer })\n], PrivateKeyInfo.prototype, \"version\", void 0);\n__decorate([\n    AsnProp({ type: AlgorithmIdentifier })\n], PrivateKeyInfo.prototype, \"privateKeyAlgorithm\", void 0);\n__decorate([\n    AsnProp({ type: PrivateKey })\n], PrivateKeyInfo.prototype, \"privateKey\", void 0);\n__decorate([\n    AsnProp({ type: Attributes, implicit: true, context: 0, optional: true })\n], PrivateKeyInfo.prototype, \"attributes\", void 0);\n","import { __decorate } from \"tslib\";\nimport { PrivateKeyInfo } from \"@peculiar/asn1-pkcs8\";\nimport { AsnType, AsnTypeTypes } from \"@peculiar/asn1-schema\";\nlet KeyBag = class KeyBag extends PrivateKeyInfo {\n};\nKeyBag = __decorate([\n    AsnType({ type: AsnTypeTypes.Sequence })\n], KeyBag);\nexport { KeyBag };\n","import { __decorate } from \"tslib\";\nimport { EncryptedPrivateKeyInfo } from \"@peculiar/asn1-pkcs8\";\nimport { AsnType, AsnTypeTypes } from \"@peculiar/asn1-schema\";\nlet PKCS8ShroudedKeyBag = class PKCS8ShroudedKeyBag extends EncryptedPrivateKeyInfo {\n};\nPKCS8ShroudedKeyBag = __decorate([\n    AsnType({ type: AsnTypeTypes.Sequence })\n], PKCS8ShroudedKeyBag);\nexport { PKCS8ShroudedKeyBag };\n","import { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes } from \"@peculiar/asn1-schema\";\nexport class SecretBag {\n    constructor(params = {}) {\n        this.secretTypeId = \"\";\n        this.secretValue = new ArrayBuffer(0);\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AsnPropTypes.ObjectIdentifier })\n], SecretBag.prototype, \"secretTypeId\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Any, context: 0 })\n], SecretBag.prototype, \"secretValue\", void 0);\n","import { __decorate } from \"tslib\";\nimport { DigestInfo } from \"@peculiar/asn1-rsa\";\nimport { AsnProp, AsnPropTypes, OctetString } from \"@peculiar/asn1-schema\";\nexport class MacData {\n    constructor(params = {}) {\n        this.mac = new DigestInfo();\n        this.macSalt = new OctetString();\n        this.iterations = 1;\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: DigestInfo })\n], MacData.prototype, \"mac\", void 0);\n__decorate([\n    AsnProp({ type: OctetString })\n], MacData.prototype, \"macSalt\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer, defaultValue: 1 })\n], MacData.prototype, \"iterations\", void 0);\n","import { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes } from \"@peculiar/asn1-schema\";\nimport { ContentInfo } from \"@peculiar/asn1-cms\";\nimport { MacData } from \"./mac_data\";\nexport class PFX {\n    constructor(params = {}) {\n        this.version = 3;\n        this.authSafe = new ContentInfo();\n        this.macData = new MacData();\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer })\n], PFX.prototype, \"version\", void 0);\n__decorate([\n    AsnProp({ type: ContentInfo })\n], PFX.prototype, \"authSafe\", void 0);\n__decorate([\n    AsnProp({ type: MacData, optional: true })\n], PFX.prototype, \"macData\", void 0);\n","var SafeContents_1;\nimport { __decorate } from \"tslib\";\nimport { AsnArray, AsnType, AsnTypeTypes, AsnProp, AsnPropTypes } from \"@peculiar/asn1-schema\";\nimport { PKCS12Attribute } from \"./attribute\";\nexport class SafeBag {\n    constructor(params = {}) {\n        this.bagId = \"\";\n        this.bagValue = new ArrayBuffer(0);\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AsnPropTypes.ObjectIdentifier })\n], SafeBag.prototype, \"bagId\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.Any, context: 0 })\n], SafeBag.prototype, \"bagValue\", void 0);\n__decorate([\n    AsnProp({ type: PKCS12Attribute, repeated: \"set\", optional: true })\n], SafeBag.prototype, \"bagAttributes\", void 0);\nlet SafeContents = SafeContents_1 = class SafeContents extends AsnArray {\n    constructor(items) {\n        super(items);\n        Object.setPrototypeOf(this, SafeContents_1.prototype);\n    }\n};\nSafeContents = SafeContents_1 = __decorate([\n    AsnType({ type: AsnTypeTypes.Sequence, itemType: SafeBag })\n], SafeContents);\nexport { SafeContents };\n","var ExtensionRequest_1, ExtendedCertificateAttributes_1, SMIMECapabilities_1;\nimport { __decorate } from \"tslib\";\nimport { AsnType, AsnTypeTypes, AsnPropTypes, AsnProp, OctetString, AsnArray } from \"@peculiar/asn1-schema\";\nimport * as cms from \"@peculiar/asn1-cms\";\nimport * as pfx from \"@peculiar/asn1-pfx\";\nimport * as pkcs8 from \"@peculiar/asn1-pkcs8\";\nimport * as x509 from \"@peculiar/asn1-x509\";\nimport * as attr from \"@peculiar/asn1-x509-attr\";\nexport const id_pkcs9 = \"1.2.840.113549.1.9\";\nexport const id_pkcs9_mo = `${id_pkcs9}.0`;\nexport const id_pkcs9_oc = `${id_pkcs9}.24`;\nexport const id_pkcs9_at = `${id_pkcs9}.25`;\nexport const id_pkcs9_sx = `${id_pkcs9}.26`;\nexport const id_pkcs9_mr = `${id_pkcs9}.27`;\nexport const id_pkcs9_oc_pkcsEntity = `${id_pkcs9_oc}.1`;\nexport const id_pkcs9_oc_naturalPerson = `${id_pkcs9_oc}.2`;\nexport const id_pkcs9_at_emailAddress = `${id_pkcs9}.1`;\nexport const id_pkcs9_at_unstructuredName = `${id_pkcs9}.2`;\nexport const id_pkcs9_at_contentType = `${id_pkcs9}.3`;\nexport const id_pkcs9_at_messageDigest = `${id_pkcs9}.4`;\nexport const id_pkcs9_at_signingTime = `${id_pkcs9}.5`;\nexport const id_pkcs9_at_counterSignature = `${id_pkcs9}.6`;\nexport const id_pkcs9_at_challengePassword = `${id_pkcs9}.7`;\nexport const id_pkcs9_at_unstructuredAddress = `${id_pkcs9}.8`;\nexport const id_pkcs9_at_extendedCertificateAttributes = `${id_pkcs9}.9`;\nexport const id_pkcs9_at_signingDescription = `${id_pkcs9}.13`;\nexport const id_pkcs9_at_extensionRequest = `${id_pkcs9}.14`;\nexport const id_pkcs9_at_smimeCapabilities = `${id_pkcs9}.15`;\nexport const id_pkcs9_at_friendlyName = `${id_pkcs9}.20`;\nexport const id_pkcs9_at_localKeyId = `${id_pkcs9}.21`;\nexport const id_pkcs9_at_userPKCS12 = `2.16.840.1.113730.3.1.216`;\nexport const id_pkcs9_at_pkcs15Token = `${id_pkcs9_at}.1`;\nexport const id_pkcs9_at_encryptedPrivateKeyInfo = `${id_pkcs9_at}.2`;\nexport const id_pkcs9_at_randomNonce = `${id_pkcs9_at}.3`;\nexport const id_pkcs9_at_sequenceNumber = `${id_pkcs9_at}.4`;\nexport const id_pkcs9_at_pkcs7PDU = `${id_pkcs9_at}.5`;\nexport const id_ietf_at = `1.3.6.1.5.5.7.9`;\nexport const id_pkcs9_at_dateOfBirth = `${id_ietf_at}.1`;\nexport const id_pkcs9_at_placeOfBirth = `${id_ietf_at}.2`;\nexport const id_pkcs9_at_gender = `${id_ietf_at}.3`;\nexport const id_pkcs9_at_countryOfCitizenship = `${id_ietf_at}.4`;\nexport const id_pkcs9_at_countryOfResidence = `${id_ietf_at}.5`;\nexport const id_pkcs9_sx_pkcs9String = `${id_pkcs9_sx}.1`;\nexport const id_pkcs9_sx_signingTime = `${id_pkcs9_sx}.2`;\nexport const id_pkcs9_mr_caseIgnoreMatch = `${id_pkcs9_mr}.1`;\nexport const id_pkcs9_mr_signingTimeMatch = `${id_pkcs9_mr}.2`;\nexport const id_smime = `${id_pkcs9}.16`;\nexport const id_certTypes = `${id_pkcs9}.22`;\nexport const crlTypes = `${id_pkcs9}.23`;\nexport const id_at_pseudonym = `${attr.id_at}.65`;\nlet PKCS9String = class PKCS9String extends x509.DirectoryString {\n    constructor(params = {}) {\n        super(params);\n    }\n    toString() {\n        const o = {};\n        o.toString();\n        return this.ia5String || super.toString();\n    }\n};\n__decorate([\n    AsnProp({ type: AsnPropTypes.IA5String })\n], PKCS9String.prototype, \"ia5String\", void 0);\nPKCS9String = __decorate([\n    AsnType({ type: AsnTypeTypes.Choice })\n], PKCS9String);\nexport { PKCS9String };\nlet Pkcs7PDU = class Pkcs7PDU extends cms.ContentInfo {\n};\nPkcs7PDU = __decorate([\n    AsnType({ type: AsnTypeTypes.Sequence })\n], Pkcs7PDU);\nexport { Pkcs7PDU };\nlet UserPKCS12 = class UserPKCS12 extends pfx.PFX {\n};\nUserPKCS12 = __decorate([\n    AsnType({ type: AsnTypeTypes.Sequence })\n], UserPKCS12);\nexport { UserPKCS12 };\nlet EncryptedPrivateKeyInfo = class EncryptedPrivateKeyInfo extends pkcs8.EncryptedPrivateKeyInfo {\n};\nEncryptedPrivateKeyInfo = __decorate([\n    AsnType({ type: AsnTypeTypes.Sequence })\n], EncryptedPrivateKeyInfo);\nexport { EncryptedPrivateKeyInfo };\nlet EmailAddress = class EmailAddress {\n    constructor(value = \"\") {\n        this.value = value;\n    }\n    toString() {\n        return this.value;\n    }\n};\n__decorate([\n    AsnProp({ type: AsnPropTypes.IA5String })\n], EmailAddress.prototype, \"value\", void 0);\nEmailAddress = __decorate([\n    AsnType({ type: AsnTypeTypes.Choice })\n], EmailAddress);\nexport { EmailAddress };\nlet UnstructuredName = class UnstructuredName extends PKCS9String {\n};\nUnstructuredName = __decorate([\n    AsnType({ type: AsnTypeTypes.Choice })\n], UnstructuredName);\nexport { UnstructuredName };\nlet UnstructuredAddress = class UnstructuredAddress extends x509.DirectoryString {\n};\nUnstructuredAddress = __decorate([\n    AsnType({ type: AsnTypeTypes.Choice })\n], UnstructuredAddress);\nexport { UnstructuredAddress };\nlet DateOfBirth = class DateOfBirth {\n    constructor(value = new Date()) {\n        this.value = value;\n    }\n};\n__decorate([\n    AsnProp({ type: AsnPropTypes.GeneralizedTime })\n], DateOfBirth.prototype, \"value\", void 0);\nDateOfBirth = __decorate([\n    AsnType({ type: AsnTypeTypes.Choice })\n], DateOfBirth);\nexport { DateOfBirth };\nlet PlaceOfBirth = class PlaceOfBirth extends x509.DirectoryString {\n};\nPlaceOfBirth = __decorate([\n    AsnType({ type: AsnTypeTypes.Choice })\n], PlaceOfBirth);\nexport { PlaceOfBirth };\nlet Gender = class Gender {\n    constructor(value = \"M\") {\n        this.value = value;\n    }\n    toString() {\n        return this.value;\n    }\n};\n__decorate([\n    AsnProp({ type: AsnPropTypes.PrintableString })\n], Gender.prototype, \"value\", void 0);\nGender = __decorate([\n    AsnType({ type: AsnTypeTypes.Choice })\n], Gender);\nexport { Gender };\nlet CountryOfCitizenship = class CountryOfCitizenship {\n    constructor(value = \"\") {\n        this.value = value;\n    }\n    toString() {\n        return this.value;\n    }\n};\n__decorate([\n    AsnProp({ type: AsnPropTypes.PrintableString })\n], CountryOfCitizenship.prototype, \"value\", void 0);\nCountryOfCitizenship = __decorate([\n    AsnType({ type: AsnTypeTypes.Choice })\n], CountryOfCitizenship);\nexport { CountryOfCitizenship };\nlet CountryOfResidence = class CountryOfResidence extends CountryOfCitizenship {\n};\nCountryOfResidence = __decorate([\n    AsnType({ type: AsnTypeTypes.Choice })\n], CountryOfResidence);\nexport { CountryOfResidence };\nlet Pseudonym = class Pseudonym extends x509.DirectoryString {\n};\nPseudonym = __decorate([\n    AsnType({ type: AsnTypeTypes.Choice })\n], Pseudonym);\nexport { Pseudonym };\nlet ContentType = class ContentType {\n    constructor(value = \"\") {\n        this.value = value;\n    }\n    toString() {\n        return this.value;\n    }\n};\n__decorate([\n    AsnProp({ type: AsnPropTypes.ObjectIdentifier })\n], ContentType.prototype, \"value\", void 0);\nContentType = __decorate([\n    AsnType({ type: AsnTypeTypes.Choice })\n], ContentType);\nexport { ContentType };\nexport class MessageDigest extends OctetString {\n}\nlet SigningTime = class SigningTime extends x509.Time {\n};\nSigningTime = __decorate([\n    AsnType({ type: AsnTypeTypes.Choice })\n], SigningTime);\nexport { SigningTime };\nexport class RandomNonce extends OctetString {\n}\nlet SequenceNumber = class SequenceNumber {\n    constructor(value = 0) {\n        this.value = value;\n    }\n    toString() {\n        return this.value.toString();\n    }\n};\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer })\n], SequenceNumber.prototype, \"value\", void 0);\nSequenceNumber = __decorate([\n    AsnType({ type: AsnTypeTypes.Choice })\n], SequenceNumber);\nexport { SequenceNumber };\nlet CounterSignature = class CounterSignature extends cms.SignerInfo {\n};\nCounterSignature = __decorate([\n    AsnType({ type: AsnTypeTypes.Sequence })\n], CounterSignature);\nexport { CounterSignature };\nlet ChallengePassword = class ChallengePassword extends x509.DirectoryString {\n};\nChallengePassword = __decorate([\n    AsnType({ type: AsnTypeTypes.Choice })\n], ChallengePassword);\nexport { ChallengePassword };\nlet ExtensionRequest = ExtensionRequest_1 = class ExtensionRequest extends x509.Extensions {\n    constructor(items) {\n        super(items);\n        Object.setPrototypeOf(this, ExtensionRequest_1.prototype);\n    }\n};\nExtensionRequest = ExtensionRequest_1 = __decorate([\n    AsnType({ type: AsnTypeTypes.Sequence })\n], ExtensionRequest);\nexport { ExtensionRequest };\nlet ExtendedCertificateAttributes = ExtendedCertificateAttributes_1 = class ExtendedCertificateAttributes extends AsnArray {\n    constructor(items) {\n        super(items);\n        Object.setPrototypeOf(this, ExtendedCertificateAttributes_1.prototype);\n    }\n};\nExtendedCertificateAttributes = ExtendedCertificateAttributes_1 = __decorate([\n    AsnType({ type: AsnTypeTypes.Set, itemType: cms.Attribute })\n], ExtendedCertificateAttributes);\nexport { ExtendedCertificateAttributes };\nlet FriendlyName = class FriendlyName {\n    constructor(value = \"\") {\n        this.value = value;\n    }\n    toString() {\n        return this.value;\n    }\n};\n__decorate([\n    AsnProp({ type: AsnPropTypes.BmpString })\n], FriendlyName.prototype, \"value\", void 0);\nFriendlyName = __decorate([\n    AsnType({ type: AsnTypeTypes.Choice })\n], FriendlyName);\nexport { FriendlyName };\nexport class LocalKeyId extends OctetString {\n}\nexport class SigningDescription extends x509.DirectoryString {\n}\nlet SMIMECapability = class SMIMECapability extends x509.AlgorithmIdentifier {\n};\nSMIMECapability = __decorate([\n    AsnType({ type: AsnTypeTypes.Sequence })\n], SMIMECapability);\nexport { SMIMECapability };\nlet SMIMECapabilities = SMIMECapabilities_1 = class SMIMECapabilities extends AsnArray {\n    constructor(items) {\n        super(items);\n        Object.setPrototypeOf(this, SMIMECapabilities_1.prototype);\n    }\n};\nSMIMECapabilities = SMIMECapabilities_1 = __decorate([\n    AsnType({ type: AsnTypeTypes.Sequence, itemType: SMIMECapability })\n], SMIMECapabilities);\nexport { SMIMECapabilities };\n","var Attributes_1;\nimport { __decorate } from \"tslib\";\nimport { AsnArray, AsnType, AsnTypeTypes } from \"@peculiar/asn1-schema\";\nimport { Attribute } from \"@peculiar/asn1-x509\";\nlet Attributes = Attributes_1 = class Attributes extends AsnArray {\n    constructor(items) {\n        super(items);\n        Object.setPrototypeOf(this, Attributes_1.prototype);\n    }\n};\nAttributes = Attributes_1 = __decorate([\n    AsnType({ type: AsnTypeTypes.Sequence, itemType: Attribute })\n], Attributes);\nexport { Attributes };\n","import { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes } from \"@peculiar/asn1-schema\";\nimport { Name, SubjectPublicKeyInfo } from \"@peculiar/asn1-x509\";\nimport { Attributes } from \"./attributes\";\nexport class CertificationRequestInfo {\n    constructor(params = {}) {\n        this.version = 0;\n        this.subject = new Name();\n        this.subjectPKInfo = new SubjectPublicKeyInfo();\n        this.attributes = new Attributes();\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: AsnPropTypes.Integer })\n], CertificationRequestInfo.prototype, \"version\", void 0);\n__decorate([\n    AsnProp({ type: Name })\n], CertificationRequestInfo.prototype, \"subject\", void 0);\n__decorate([\n    AsnProp({ type: SubjectPublicKeyInfo })\n], CertificationRequestInfo.prototype, \"subjectPKInfo\", void 0);\n__decorate([\n    AsnProp({ type: Attributes, implicit: true, context: 0 })\n], CertificationRequestInfo.prototype, \"attributes\", void 0);\n","import { __decorate } from \"tslib\";\nimport { AsnProp, AsnPropTypes } from \"@peculiar/asn1-schema\";\nimport { CertificationRequestInfo } from \"./certification_request_info\";\nimport { AlgorithmIdentifier } from \"@peculiar/asn1-x509\";\nexport class CertificationRequest {\n    constructor(params = {}) {\n        this.certificationRequestInfo = new CertificationRequestInfo();\n        this.signatureAlgorithm = new AlgorithmIdentifier();\n        this.signature = new ArrayBuffer(0);\n        Object.assign(this, params);\n    }\n}\n__decorate([\n    AsnProp({ type: CertificationRequestInfo })\n], CertificationRequest.prototype, \"certificationRequestInfo\", void 0);\n__decorate([\n    AsnProp({ type: AlgorithmIdentifier })\n], CertificationRequest.prototype, \"signatureAlgorithm\", void 0);\n__decorate([\n    AsnProp({ type: AsnPropTypes.BitString })\n], CertificationRequest.prototype, \"signature\", void 0);\n","/*!\n * MIT License\n * \n * Copyright (c) Peculiar Ventures. All rights reserved.\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * \n */\nimport 'reflect-metadata';\nimport { AsnConvert, OctetString, AsnUtf8StringConverter } from '@peculiar/asn1-schema';\nimport * as asn1X509 from '@peculiar/asn1-x509';\nimport { AlgorithmIdentifier, Extension as Extension$1, Name as Name$1, AttributeTypeAndValue, RelativeDistinguishedName, SubjectPublicKeyInfo, Certificate, Version, BasicConstraints, id_ce_basicConstraints, KeyUsage, id_ce_keyUsage, Attribute as Attribute$1, Extensions, RevokedCertificate, Time, id_ce_invalidityDate, InvalidityDate, id_ce_cRLReasons, CRLReason, CertificateList } from '@peculiar/asn1-x509';\nimport { BufferSourceConverter, isEqual, Convert, combine } from 'pvtsutils';\nimport * as asn1Cms from '@peculiar/asn1-cms';\nimport * as asn1Ecc from '@peculiar/asn1-ecc';\nimport { id_ecPublicKey, ECDSASigValue } from '@peculiar/asn1-ecc';\nimport * as asn1Rsa from '@peculiar/asn1-rsa';\nimport { id_rsaEncryption, RSAPublicKey } from '@peculiar/asn1-rsa';\nimport { __decorate } from 'tslib';\nimport { container, injectable } from 'tsyringe';\nimport * as asnPkcs9 from '@peculiar/asn1-pkcs9';\nimport { id_pkcs9_at_extensionRequest } from '@peculiar/asn1-pkcs9';\nimport { CertificationRequest, CertificationRequestInfo } from '@peculiar/asn1-csr';\n\nconst diAlgorithm = \"crypto.algorithm\";\r\nclass AlgorithmProvider {\r\n    getAlgorithms() {\r\n        return container.resolveAll(diAlgorithm);\r\n    }\r\n    toAsnAlgorithm(alg) {\r\n        ({ ...alg });\r\n        for (const algorithm of this.getAlgorithms()) {\r\n            const res = algorithm.toAsnAlgorithm(alg);\r\n            if (res) {\r\n                return res;\r\n            }\r\n        }\r\n        if (/[0-9.]+/.test(alg.name)) {\r\n            const res = new AlgorithmIdentifier({\r\n                algorithm: alg.name,\r\n            });\r\n            if (\"parameters\" in alg) {\r\n                const unknown = alg;\r\n                res.parameters = unknown.parameters;\r\n            }\r\n            return res;\r\n        }\r\n        throw new Error(\"Cannot convert WebCrypto algorithm to ASN.1 algorithm\");\r\n    }\r\n    toWebAlgorithm(alg) {\r\n        for (const algorithm of this.getAlgorithms()) {\r\n            const res = algorithm.toWebAlgorithm(alg);\r\n            if (res) {\r\n                return res;\r\n            }\r\n        }\r\n        const unknown = {\r\n            name: alg.algorithm,\r\n            parameters: alg.parameters,\r\n        };\r\n        return unknown;\r\n    }\r\n}\r\nconst diAlgorithmProvider = \"crypto.algorithmProvider\";\r\ncontainer.registerSingleton(diAlgorithmProvider, AlgorithmProvider);\n\nvar EcAlgorithm_1;\r\nconst idVersionOne = \"1.3.36.3.3.2.8.1.1\";\r\nconst idBrainpoolP160r1 = `${idVersionOne}.1`;\r\nconst idBrainpoolP160t1 = `${idVersionOne}.2`;\r\nconst idBrainpoolP192r1 = `${idVersionOne}.3`;\r\nconst idBrainpoolP192t1 = `${idVersionOne}.4`;\r\nconst idBrainpoolP224r1 = `${idVersionOne}.5`;\r\nconst idBrainpoolP224t1 = `${idVersionOne}.6`;\r\nconst idBrainpoolP256r1 = `${idVersionOne}.7`;\r\nconst idBrainpoolP256t1 = `${idVersionOne}.8`;\r\nconst idBrainpoolP320r1 = `${idVersionOne}.9`;\r\nconst idBrainpoolP320t1 = `${idVersionOne}.10`;\r\nconst idBrainpoolP384r1 = `${idVersionOne}.11`;\r\nconst idBrainpoolP384t1 = `${idVersionOne}.12`;\r\nconst idBrainpoolP512r1 = `${idVersionOne}.13`;\r\nconst idBrainpoolP512t1 = `${idVersionOne}.14`;\r\nconst brainpoolP160r1 = \"brainpoolP160r1\";\r\nconst brainpoolP160t1 = \"brainpoolP160t1\";\r\nconst brainpoolP192r1 = \"brainpoolP192r1\";\r\nconst brainpoolP192t1 = \"brainpoolP192t1\";\r\nconst brainpoolP224r1 = \"brainpoolP224r1\";\r\nconst brainpoolP224t1 = \"brainpoolP224t1\";\r\nconst brainpoolP256r1 = \"brainpoolP256r1\";\r\nconst brainpoolP256t1 = \"brainpoolP256t1\";\r\nconst brainpoolP320r1 = \"brainpoolP320r1\";\r\nconst brainpoolP320t1 = \"brainpoolP320t1\";\r\nconst brainpoolP384r1 = \"brainpoolP384r1\";\r\nconst brainpoolP384t1 = \"brainpoolP384t1\";\r\nconst brainpoolP512r1 = \"brainpoolP512r1\";\r\nconst brainpoolP512t1 = \"brainpoolP512t1\";\r\nconst ECDSA = \"ECDSA\";\r\nlet EcAlgorithm = EcAlgorithm_1 = class EcAlgorithm {\r\n    toAsnAlgorithm(alg) {\r\n        switch (alg.name.toLowerCase()) {\r\n            case ECDSA.toLowerCase():\r\n                if (\"hash\" in alg) {\r\n                    const hash = typeof alg.hash === \"string\" ? alg.hash : alg.hash.name;\r\n                    switch (hash.toLowerCase()) {\r\n                        case \"sha-1\":\r\n                            return asn1Ecc.ecdsaWithSHA1;\r\n                        case \"sha-256\":\r\n                            return asn1Ecc.ecdsaWithSHA256;\r\n                        case \"sha-384\":\r\n                            return asn1Ecc.ecdsaWithSHA384;\r\n                        case \"sha-512\":\r\n                            return asn1Ecc.ecdsaWithSHA512;\r\n                    }\r\n                }\r\n                else if (\"namedCurve\" in alg) {\r\n                    let parameters = \"\";\r\n                    switch (alg.namedCurve) {\r\n                        case \"P-256\":\r\n                            parameters = asn1Ecc.id_secp256r1;\r\n                            break;\r\n                        case \"K-256\":\r\n                            parameters = EcAlgorithm_1.SECP256K1;\r\n                            break;\r\n                        case \"P-384\":\r\n                            parameters = asn1Ecc.id_secp384r1;\r\n                            break;\r\n                        case \"P-521\":\r\n                            parameters = asn1Ecc.id_secp521r1;\r\n                            break;\r\n                        case brainpoolP160r1:\r\n                            parameters = idBrainpoolP160r1;\r\n                            break;\r\n                        case brainpoolP160t1:\r\n                            parameters = idBrainpoolP160t1;\r\n                            break;\r\n                        case brainpoolP192r1:\r\n                            parameters = idBrainpoolP192r1;\r\n                            break;\r\n                        case brainpoolP192t1:\r\n                            parameters = idBrainpoolP192t1;\r\n                            break;\r\n                        case brainpoolP224r1:\r\n                            parameters = idBrainpoolP224r1;\r\n                            break;\r\n                        case brainpoolP224t1:\r\n                            parameters = idBrainpoolP224t1;\r\n                            break;\r\n                        case brainpoolP256r1:\r\n                            parameters = idBrainpoolP256r1;\r\n                            break;\r\n                        case brainpoolP256t1:\r\n                            parameters = idBrainpoolP256t1;\r\n                            break;\r\n                        case brainpoolP320r1:\r\n                            parameters = idBrainpoolP320r1;\r\n                            break;\r\n                        case brainpoolP320t1:\r\n                            parameters = idBrainpoolP320t1;\r\n                            break;\r\n                        case brainpoolP384r1:\r\n                            parameters = idBrainpoolP384r1;\r\n                            break;\r\n                        case brainpoolP384t1:\r\n                            parameters = idBrainpoolP384t1;\r\n                            break;\r\n                        case brainpoolP512r1:\r\n                            parameters = idBrainpoolP512r1;\r\n                            break;\r\n                        case brainpoolP512t1:\r\n                            parameters = idBrainpoolP512t1;\r\n                            break;\r\n                    }\r\n                    if (parameters) {\r\n                        return new AlgorithmIdentifier({\r\n                            algorithm: asn1Ecc.id_ecPublicKey,\r\n                            parameters: AsnConvert.serialize(new asn1Ecc.ECParameters({ namedCurve: parameters })),\r\n                        });\r\n                    }\r\n                }\r\n        }\r\n        return null;\r\n    }\r\n    toWebAlgorithm(alg) {\r\n        switch (alg.algorithm) {\r\n            case asn1Ecc.id_ecdsaWithSHA1:\r\n                return { name: ECDSA, hash: { name: \"SHA-1\" } };\r\n            case asn1Ecc.id_ecdsaWithSHA256:\r\n                return { name: ECDSA, hash: { name: \"SHA-256\" } };\r\n            case asn1Ecc.id_ecdsaWithSHA384:\r\n                return { name: ECDSA, hash: { name: \"SHA-384\" } };\r\n            case asn1Ecc.id_ecdsaWithSHA512:\r\n                return { name: ECDSA, hash: { name: \"SHA-512\" } };\r\n            case asn1Ecc.id_ecPublicKey: {\r\n                if (!alg.parameters) {\r\n                    throw new TypeError(\"Cannot get required parameters from EC algorithm\");\r\n                }\r\n                const parameters = AsnConvert.parse(alg.parameters, asn1Ecc.ECParameters);\r\n                switch (parameters.namedCurve) {\r\n                    case asn1Ecc.id_secp256r1:\r\n                        return { name: ECDSA, namedCurve: \"P-256\" };\r\n                    case EcAlgorithm_1.SECP256K1:\r\n                        return { name: ECDSA, namedCurve: \"K-256\" };\r\n                    case asn1Ecc.id_secp384r1:\r\n                        return { name: ECDSA, namedCurve: \"P-384\" };\r\n                    case asn1Ecc.id_secp521r1:\r\n                        return { name: ECDSA, namedCurve: \"P-521\" };\r\n                    case idBrainpoolP160r1:\r\n                        return { name: ECDSA, namedCurve: brainpoolP160r1 };\r\n                    case idBrainpoolP160t1:\r\n                        return { name: ECDSA, namedCurve: brainpoolP160t1 };\r\n                    case idBrainpoolP192r1:\r\n                        return { name: ECDSA, namedCurve: brainpoolP192r1 };\r\n                    case idBrainpoolP192t1:\r\n                        return { name: ECDSA, namedCurve: brainpoolP192t1 };\r\n                    case idBrainpoolP224r1:\r\n                        return { name: ECDSA, namedCurve: brainpoolP224r1 };\r\n                    case idBrainpoolP224t1:\r\n                        return { name: ECDSA, namedCurve: brainpoolP224t1 };\r\n                    case idBrainpoolP256r1:\r\n                        return { name: ECDSA, namedCurve: brainpoolP256r1 };\r\n                    case idBrainpoolP256t1:\r\n                        return { name: ECDSA, namedCurve: brainpoolP256t1 };\r\n                    case idBrainpoolP320r1:\r\n                        return { name: ECDSA, namedCurve: brainpoolP320r1 };\r\n                    case idBrainpoolP320t1:\r\n                        return { name: ECDSA, namedCurve: brainpoolP320t1 };\r\n                    case idBrainpoolP384r1:\r\n                        return { name: ECDSA, namedCurve: brainpoolP384r1 };\r\n                    case idBrainpoolP384t1:\r\n                        return { name: ECDSA, namedCurve: brainpoolP384t1 };\r\n                    case idBrainpoolP512r1:\r\n                        return { name: ECDSA, namedCurve: brainpoolP512r1 };\r\n                    case idBrainpoolP512t1:\r\n                        return { name: ECDSA, namedCurve: brainpoolP512t1 };\r\n                }\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n};\r\nEcAlgorithm.SECP256K1 = \"1.3.132.0.10\";\r\nEcAlgorithm = EcAlgorithm_1 = __decorate([\r\n    injectable()\r\n], EcAlgorithm);\r\ncontainer.registerSingleton(diAlgorithm, EcAlgorithm);\n\nconst NAME = Symbol(\"name\");\r\nconst VALUE = Symbol(\"value\");\r\nclass TextObject {\r\n    constructor(name, items = {}, value = \"\") {\r\n        this[NAME] = name;\r\n        this[VALUE] = value;\r\n        for (const key in items) {\r\n            this[key] = items[key];\r\n        }\r\n    }\r\n}\r\nTextObject.NAME = NAME;\r\nTextObject.VALUE = VALUE;\r\nclass DefaultAlgorithmSerializer {\r\n    static toTextObject(alg) {\r\n        const obj = new TextObject(\"Algorithm Identifier\", {}, OidSerializer.toString(alg.algorithm));\r\n        if (alg.parameters) {\r\n            switch (alg.algorithm) {\r\n                case asn1Ecc.id_ecPublicKey: {\r\n                    const ecAlg = new EcAlgorithm().toWebAlgorithm(alg);\r\n                    if (ecAlg && \"namedCurve\" in ecAlg) {\r\n                        obj[\"Named Curve\"] = ecAlg.namedCurve;\r\n                    }\r\n                    else {\r\n                        obj[\"Parameters\"] = alg.parameters;\r\n                    }\r\n                    break;\r\n                }\r\n                default:\r\n                    obj[\"Parameters\"] = alg.parameters;\r\n            }\r\n        }\r\n        return obj;\r\n    }\r\n}\r\nclass OidSerializer {\r\n    static toString(oid) {\r\n        const name = this.items[oid];\r\n        if (name) {\r\n            return name;\r\n        }\r\n        return oid;\r\n    }\r\n}\r\nOidSerializer.items = {\r\n    [asn1Rsa.id_sha1]: \"sha1\",\r\n    [asn1Rsa.id_sha224]: \"sha224\",\r\n    [asn1Rsa.id_sha256]: \"sha256\",\r\n    [asn1Rsa.id_sha384]: \"sha384\",\r\n    [asn1Rsa.id_sha512]: \"sha512\",\r\n    [asn1Rsa.id_rsaEncryption]: \"rsaEncryption\",\r\n    [asn1Rsa.id_sha1WithRSAEncryption]: \"sha1WithRSAEncryption\",\r\n    [asn1Rsa.id_sha224WithRSAEncryption]: \"sha224WithRSAEncryption\",\r\n    [asn1Rsa.id_sha256WithRSAEncryption]: \"sha256WithRSAEncryption\",\r\n    [asn1Rsa.id_sha384WithRSAEncryption]: \"sha384WithRSAEncryption\",\r\n    [asn1Rsa.id_sha512WithRSAEncryption]: \"sha512WithRSAEncryption\",\r\n    [asn1Ecc.id_ecPublicKey]: \"ecPublicKey\",\r\n    [asn1Ecc.id_ecdsaWithSHA1]: \"ecdsaWithSHA1\",\r\n    [asn1Ecc.id_ecdsaWithSHA224]: \"ecdsaWithSHA224\",\r\n    [asn1Ecc.id_ecdsaWithSHA256]: \"ecdsaWithSHA256\",\r\n    [asn1Ecc.id_ecdsaWithSHA384]: \"ecdsaWithSHA384\",\r\n    [asn1Ecc.id_ecdsaWithSHA512]: \"ecdsaWithSHA512\",\r\n    [asn1X509.id_kp_serverAuth]: \"TLS WWW server authentication\",\r\n    [asn1X509.id_kp_clientAuth]: \"TLS WWW client authentication\",\r\n    [asn1X509.id_kp_codeSigning]: \"Code Signing\",\r\n    [asn1X509.id_kp_emailProtection]: \"E-mail Protection\",\r\n    [asn1X509.id_kp_timeStamping]: \"Time Stamping\",\r\n    [asn1X509.id_kp_OCSPSigning]: \"OCSP Signing\",\r\n    [asn1Cms.id_signedData]: \"Signed Data\",\r\n};\r\nclass TextConverter {\r\n    static serialize(obj) {\r\n        return this.serializeObj(obj).join(\"\\n\");\r\n    }\r\n    static pad(deep = 0) {\r\n        return \"\".padStart(2 * deep, \" \");\r\n    }\r\n    static serializeObj(obj, deep = 0) {\r\n        const res = [];\r\n        let pad = this.pad(deep++);\r\n        let value = \"\";\r\n        const objValue = obj[TextObject.VALUE];\r\n        if (objValue) {\r\n            value = ` ${objValue}`;\r\n        }\r\n        res.push(`${pad}${obj[TextObject.NAME]}:${value}`);\r\n        pad = this.pad(deep);\r\n        for (const key in obj) {\r\n            if (typeof key === \"symbol\") {\r\n                continue;\r\n            }\r\n            const value = obj[key];\r\n            const keyValue = key ? `${key}: ` : \"\";\r\n            if (typeof value === \"string\" ||\r\n                typeof value === \"number\" ||\r\n                typeof value === \"boolean\") {\r\n                res.push(`${pad}${keyValue}${value}`);\r\n            }\r\n            else if (value instanceof Date) {\r\n                res.push(`${pad}${keyValue}${value.toUTCString()}`);\r\n            }\r\n            else if (Array.isArray(value)) {\r\n                for (const obj of value) {\r\n                    obj[TextObject.NAME] = key;\r\n                    res.push(...this.serializeObj(obj, deep));\r\n                }\r\n            }\r\n            else if (value instanceof TextObject) {\r\n                value[TextObject.NAME] = key;\r\n                res.push(...this.serializeObj(value, deep));\r\n            }\r\n            else if (BufferSourceConverter.isBufferSource(value)) {\r\n                if (key) {\r\n                    res.push(`${pad}${keyValue}`);\r\n                    res.push(...this.serializeBufferSource(value, deep + 1));\r\n                }\r\n                else {\r\n                    res.push(...this.serializeBufferSource(value, deep));\r\n                }\r\n            }\r\n            else if (\"toTextObject\" in value) {\r\n                const obj = value.toTextObject();\r\n                obj[TextObject.NAME] = key;\r\n                res.push(...this.serializeObj(obj, deep));\r\n            }\r\n            else {\r\n                throw new TypeError(\"Cannot serialize data in text format. Unsupported type.\");\r\n            }\r\n        }\r\n        return res;\r\n    }\r\n    static serializeBufferSource(buffer, deep = 0) {\r\n        const pad = this.pad(deep);\r\n        const view = BufferSourceConverter.toUint8Array(buffer);\r\n        const res = [];\r\n        for (let i = 0; i < view.length;) {\r\n            const row = [];\r\n            for (let j = 0; j < 16 && i < view.length; j++) {\r\n                if (j === 8) {\r\n                    row.push(\"\");\r\n                }\r\n                const hex = view[i++].toString(16).padStart(2, \"0\");\r\n                row.push(hex);\r\n            }\r\n            res.push(`${pad}${row.join(\" \")}`);\r\n        }\r\n        return res;\r\n    }\r\n    static serializeAlgorithm(alg) {\r\n        return this.algorithmSerializer.toTextObject(alg);\r\n    }\r\n}\r\nTextConverter.oidSerializer = OidSerializer;\r\nTextConverter.algorithmSerializer = DefaultAlgorithmSerializer;\n\nclass AsnData {\r\n    constructor(...args) {\r\n        if (args.length === 1) {\r\n            const asn = args[0];\r\n            this.rawData = AsnConvert.serialize(asn);\r\n            this.onInit(asn);\r\n        }\r\n        else {\r\n            const asn = AsnConvert.parse(args[0], args[1]);\r\n            this.rawData = BufferSourceConverter.toArrayBuffer(args[0]);\r\n            this.onInit(asn);\r\n        }\r\n    }\r\n    equal(data) {\r\n        if (data instanceof AsnData) {\r\n            return isEqual(data.rawData, this.rawData);\r\n        }\r\n        return false;\r\n    }\r\n    toString(format = \"text\") {\r\n        switch (format) {\r\n            case \"asn\":\r\n                return AsnConvert.toString(this.rawData);\r\n            case \"text\":\r\n                return TextConverter.serialize(this.toTextObject());\r\n            case \"hex\":\r\n                return Convert.ToHex(this.rawData);\r\n            case \"base64\":\r\n                return Convert.ToBase64(this.rawData);\r\n            case \"base64url\":\r\n                return Convert.ToBase64Url(this.rawData);\r\n            default:\r\n                throw TypeError(\"Argument 'format' is unsupported value\");\r\n        }\r\n    }\r\n    getTextName() {\r\n        const constructor = this.constructor;\r\n        return constructor.NAME;\r\n    }\r\n    toTextObject() {\r\n        const obj = this.toTextObjectEmpty();\r\n        obj[\"\"] = this.rawData;\r\n        return obj;\r\n    }\r\n    toTextObjectEmpty(value) {\r\n        return new TextObject(this.getTextName(), {}, value);\r\n    }\r\n}\r\nAsnData.NAME = \"ASN\";\n\nclass Extension extends AsnData {\r\n    constructor(...args) {\r\n        let raw;\r\n        if (BufferSourceConverter.isBufferSource(args[0])) {\r\n            raw = BufferSourceConverter.toArrayBuffer(args[0]);\r\n        }\r\n        else {\r\n            raw = AsnConvert.serialize(new Extension$1({\r\n                extnID: args[0],\r\n                critical: args[1],\r\n                extnValue: new OctetString(BufferSourceConverter.toArrayBuffer(args[2])),\r\n            }));\r\n        }\r\n        super(raw, Extension$1);\r\n    }\r\n    onInit(asn) {\r\n        this.type = asn.extnID;\r\n        this.critical = asn.critical;\r\n        this.value = asn.extnValue.buffer;\r\n    }\r\n    toTextObject() {\r\n        const obj = this.toTextObjectWithoutValue();\r\n        obj[\"\"] = this.value;\r\n        return obj;\r\n    }\r\n    toTextObjectWithoutValue() {\r\n        const obj = this.toTextObjectEmpty(this.critical ? \"critical\" : undefined);\r\n        if (obj[TextObject.NAME] === Extension.NAME) {\r\n            obj[TextObject.NAME] = OidSerializer.toString(this.type);\r\n        }\r\n        return obj;\r\n    }\r\n}\n\nvar _a;\r\nclass CryptoProvider {\r\n    constructor() {\r\n        this.items = new Map();\r\n        this[_a] = \"CryptoProvider\";\r\n        if (typeof self !== \"undefined\" && typeof crypto !== \"undefined\") {\r\n            this.set(CryptoProvider.DEFAULT, crypto);\r\n        }\r\n    }\r\n    static isCryptoKeyPair(data) {\r\n        return data && data.privateKey && data.publicKey;\r\n    }\r\n    static isCryptoKey(data) {\r\n        return data && data.usages && data.type && data.algorithm && data.extractable !== undefined;\r\n    }\r\n    clear() {\r\n        this.items.clear();\r\n    }\r\n    delete(key) {\r\n        return this.items.delete(key);\r\n    }\r\n    forEach(callbackfn, thisArg) {\r\n        return this.items.forEach(callbackfn, thisArg);\r\n    }\r\n    has(key) {\r\n        return this.items.has(key);\r\n    }\r\n    get size() {\r\n        return this.items.size;\r\n    }\r\n    entries() {\r\n        return this.items.entries();\r\n    }\r\n    keys() {\r\n        return this.items.keys();\r\n    }\r\n    values() {\r\n        return this.items.values();\r\n    }\r\n    [Symbol.iterator]() {\r\n        return this.items[Symbol.iterator]();\r\n    }\r\n    get(key = CryptoProvider.DEFAULT) {\r\n        const crypto = this.items.get(key.toLowerCase());\r\n        if (!crypto) {\r\n            throw new Error(`Cannot get Crypto by name '${key}'`);\r\n        }\r\n        return crypto;\r\n    }\r\n    set(key, value) {\r\n        if (typeof key === \"string\") {\r\n            if (!value) {\r\n                throw new TypeError(\"Argument 'value' is required\");\r\n            }\r\n            this.items.set(key.toLowerCase(), value);\r\n        }\r\n        else {\r\n            this.items.set(CryptoProvider.DEFAULT, key);\r\n        }\r\n        return this;\r\n    }\r\n}\r\n_a = Symbol.toStringTag;\r\nCryptoProvider.DEFAULT = \"default\";\r\nconst cryptoProvider = new CryptoProvider();\n\nconst OID_REGEX = /^[0-2](?:\\.[1-9][0-9]*)+$/;\r\nfunction isOID(id) {\r\n    return new RegExp(OID_REGEX).test(id);\r\n}\r\nclass NameIdentifier {\r\n    constructor(names = {}) {\r\n        this.items = {};\r\n        for (const id in names) {\r\n            this.register(id, names[id]);\r\n        }\r\n    }\r\n    get(idOrName) {\r\n        return this.items[idOrName] || null;\r\n    }\r\n    findId(idOrName) {\r\n        if (!isOID(idOrName)) {\r\n            return this.get(idOrName);\r\n        }\r\n        return idOrName;\r\n    }\r\n    register(id, name) {\r\n        this.items[id] = name;\r\n        this.items[name] = id;\r\n    }\r\n}\r\nconst names = new NameIdentifier();\r\nnames.register(\"CN\", \"2.5.4.3\");\r\nnames.register(\"L\", \"2.5.4.7\");\r\nnames.register(\"ST\", \"2.5.4.8\");\r\nnames.register(\"O\", \"2.5.4.10\");\r\nnames.register(\"OU\", \"2.5.4.11\");\r\nnames.register(\"C\", \"2.5.4.6\");\r\nnames.register(\"DC\", \"0.9.2342.19200300.100.1.25\");\r\nnames.register(\"E\", \"1.2.840.113549.1.9.1\");\r\nnames.register(\"G\", \"2.5.4.42\");\r\nnames.register(\"I\", \"2.5.4.43\");\r\nnames.register(\"SN\", \"2.5.4.4\");\r\nnames.register(\"T\", \"2.5.4.12\");\r\nfunction replaceUnknownCharacter(text, char) {\r\n    return `\\\\${Convert.ToHex(Convert.FromUtf8String(char)).toUpperCase()}`;\r\n}\r\nfunction escape(data) {\r\n    return data\r\n        .replace(/([,+\"\\\\<>;])/g, \"\\\\$1\")\r\n        .replace(/^([ #])/, \"\\\\$1\")\r\n        .replace(/([ ]$)/, \"\\\\$1\")\r\n        .replace(/([\\r\\n\\t])/, replaceUnknownCharacter);\r\n}\r\nclass Name {\r\n    constructor(data, extraNames = {}) {\r\n        this.extraNames = new NameIdentifier();\r\n        this.asn = new Name$1();\r\n        for (const key in extraNames) {\r\n            if (Object.prototype.hasOwnProperty.call(extraNames, key)) {\r\n                const value = extraNames[key];\r\n                this.extraNames.register(key, value);\r\n            }\r\n        }\r\n        if (typeof data === \"string\") {\r\n            this.asn = this.fromString(data);\r\n        }\r\n        else if (data instanceof Name$1) {\r\n            this.asn = data;\r\n        }\r\n        else if (BufferSourceConverter.isBufferSource(data)) {\r\n            this.asn = AsnConvert.parse(data, Name$1);\r\n        }\r\n        else {\r\n            this.asn = this.fromJSON(data);\r\n        }\r\n    }\r\n    static isASCII(text) {\r\n        for (let i = 0; i < text.length; i++) {\r\n            const code = text.charCodeAt(i);\r\n            if (code > 0xFF) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n    getField(idOrName) {\r\n        const id = this.extraNames.findId(idOrName) || names.findId(idOrName);\r\n        const res = [];\r\n        for (const name of this.asn) {\r\n            for (const rdn of name) {\r\n                if (rdn.type === id) {\r\n                    res.push(rdn.value.toString());\r\n                }\r\n            }\r\n        }\r\n        return res;\r\n    }\r\n    getName(idOrName) {\r\n        return this.extraNames.get(idOrName) || names.get(idOrName);\r\n    }\r\n    toString() {\r\n        return this.asn.map(rdn => rdn.map(o => {\r\n            const type = this.getName(o.type) || o.type;\r\n            const value = o.value.anyValue\r\n                ? `#${Convert.ToHex(o.value.anyValue)}`\r\n                : escape(o.value.toString());\r\n            return `${type}=${value}`;\r\n        })\r\n            .join(\"+\"))\r\n            .join(\", \");\r\n    }\r\n    toJSON() {\r\n        var _a;\r\n        const json = [];\r\n        for (const rdn of this.asn) {\r\n            const jsonItem = {};\r\n            for (const attr of rdn) {\r\n                const type = this.getName(attr.type) || attr.type;\r\n                (_a = jsonItem[type]) !== null && _a !== void 0 ? _a : (jsonItem[type] = []);\r\n                jsonItem[type].push(attr.value.anyValue ? `#${Convert.ToHex(attr.value.anyValue)}` : attr.value.toString());\r\n            }\r\n            json.push(jsonItem);\r\n        }\r\n        return json;\r\n    }\r\n    fromString(data) {\r\n        const asn = new Name$1();\r\n        const regex = /(\\d\\.[\\d.]*\\d|[A-Za-z]+)=((?:\"\")|(?:\".*?[^\\\\]\")|(?:[^,+].*?(?:[^\\\\][,+]))|(?:))([,+])?/g;\r\n        let matches = null;\r\n        let level = \",\";\r\n        while (matches = regex.exec(`${data},`)) {\r\n            let [, type, value] = matches;\r\n            const lastChar = value[value.length - 1];\r\n            if (lastChar === \",\" || lastChar === \"+\") {\r\n                value = value.slice(0, value.length - 1);\r\n                matches[3] = lastChar;\r\n            }\r\n            const next = matches[3];\r\n            if (!/[\\d.]+/.test(type)) {\r\n                type = this.getName(type) || \"\";\r\n            }\r\n            if (!type) {\r\n                throw new Error(`Cannot get OID for name type '${type}'`);\r\n            }\r\n            const attr = new AttributeTypeAndValue({ type });\r\n            if (value.charAt(0) === \"#\") {\r\n                attr.value.anyValue = Convert.FromHex(value.slice(1));\r\n            }\r\n            else {\r\n                const quotedMatches = /\"(.*?[^\\\\])?\"/.exec(value);\r\n                if (quotedMatches) {\r\n                    value = quotedMatches[1];\r\n                }\r\n                value = value\r\n                    .replace(/\\\\0a/ig, \"\\n\")\r\n                    .replace(/\\\\0d/ig, \"\\r\")\r\n                    .replace(/\\\\0g/ig, \"\\t\")\r\n                    .replace(/\\\\(.)/g, \"$1\");\r\n                if (type === this.getName(\"E\") || type === this.getName(\"DC\")) {\r\n                    attr.value.ia5String = value;\r\n                }\r\n                else {\r\n                    if (Name.isASCII(value)) {\r\n                        attr.value.printableString = value;\r\n                    }\r\n                    else {\r\n                        attr.value.utf8String = value;\r\n                    }\r\n                }\r\n            }\r\n            if (level === \"+\") {\r\n                asn[asn.length - 1].push(attr);\r\n            }\r\n            else {\r\n                asn.push(new RelativeDistinguishedName([attr]));\r\n            }\r\n            level = next;\r\n        }\r\n        return asn;\r\n    }\r\n    fromJSON(data) {\r\n        const asn = new Name$1();\r\n        for (const item of data) {\r\n            const asnRdn = new RelativeDistinguishedName();\r\n            for (const type in item) {\r\n                let typeId = type;\r\n                if (!/[\\d.]+/.test(type)) {\r\n                    typeId = this.getName(type) || \"\";\r\n                }\r\n                if (!typeId) {\r\n                    throw new Error(`Cannot get OID for name type '${type}'`);\r\n                }\r\n                const values = item[type];\r\n                for (const value of values) {\r\n                    const asnAttr = new AttributeTypeAndValue({ type: typeId });\r\n                    if (typeof value === \"object\") {\r\n                        for (const key in value) {\r\n                            switch (key) {\r\n                                case \"ia5String\":\r\n                                    asnAttr.value.ia5String = value[key];\r\n                                    break;\r\n                                case \"utf8String\":\r\n                                    asnAttr.value.utf8String = value[key];\r\n                                    break;\r\n                                case \"universalString\":\r\n                                    asnAttr.value.universalString = value[key];\r\n                                    break;\r\n                                case \"bmpString\":\r\n                                    asnAttr.value.bmpString = value[key];\r\n                                    break;\r\n                                case \"printableString\":\r\n                                    asnAttr.value.printableString = value[key];\r\n                                    break;\r\n                            }\r\n                        }\r\n                    }\r\n                    else if (value[0] === \"#\") {\r\n                        asnAttr.value.anyValue = Convert.FromHex(value.slice(1));\r\n                    }\r\n                    else {\r\n                        if (typeId === this.getName(\"E\") || typeId === this.getName(\"DC\")) {\r\n                            asnAttr.value.ia5String = value;\r\n                        }\r\n                        else {\r\n                            asnAttr.value.printableString = value;\r\n                        }\r\n                    }\r\n                    asnRdn.push(asnAttr);\r\n                }\r\n            }\r\n            asn.push(asnRdn);\r\n        }\r\n        return asn;\r\n    }\r\n    toArrayBuffer() {\r\n        return AsnConvert.serialize(this.asn);\r\n    }\r\n    async getThumbprint(...args) {\r\n        var _a;\r\n        let crypto;\r\n        let algorithm = \"SHA-1\";\r\n        if (args.length >= 1 && !((_a = args[0]) === null || _a === void 0 ? void 0 : _a.subtle)) {\r\n            algorithm = args[0] || algorithm;\r\n            crypto = args[1] || cryptoProvider.get();\r\n        }\r\n        else {\r\n            crypto = args[0] || cryptoProvider.get();\r\n        }\r\n        return await crypto.subtle.digest(algorithm, this.toArrayBuffer());\r\n    }\r\n}\n\nconst ERR_GN_CONSTRUCTOR = \"Cannot initialize GeneralName from ASN.1 data.\";\r\nconst ERR_GN_STRING_FORMAT = `${ERR_GN_CONSTRUCTOR} Unsupported string format in use.`;\r\nconst ERR_GUID = `${ERR_GN_CONSTRUCTOR} Value doesn't match to GUID regular expression.`;\r\nconst GUID_REGEX = /^([0-9a-f]{8})-?([0-9a-f]{4})-?([0-9a-f]{4})-?([0-9a-f]{4})-?([0-9a-f]{12})$/i;\r\nconst id_GUID = \"1.3.6.1.4.1.311.25.1\";\r\nconst id_UPN = \"1.3.6.1.4.1.311.20.2.3\";\r\nconst DNS = \"dns\";\r\nconst DN = \"dn\";\r\nconst EMAIL = \"email\";\r\nconst IP = \"ip\";\r\nconst URL = \"url\";\r\nconst GUID = \"guid\";\r\nconst UPN = \"upn\";\r\nconst REGISTERED_ID = \"id\";\r\nclass GeneralName extends AsnData {\r\n    constructor(...args) {\r\n        let name;\r\n        if (args.length === 2) {\r\n            switch (args[0]) {\r\n                case DN: {\r\n                    const derName = new Name(args[1]).toArrayBuffer();\r\n                    const asnName = AsnConvert.parse(derName, asn1X509.Name);\r\n                    name = new asn1X509.GeneralName({ directoryName: asnName });\r\n                    break;\r\n                }\r\n                case DNS:\r\n                    name = new asn1X509.GeneralName({ dNSName: args[1] });\r\n                    break;\r\n                case EMAIL:\r\n                    name = new asn1X509.GeneralName({ rfc822Name: args[1] });\r\n                    break;\r\n                case GUID: {\r\n                    const matches = new RegExp(GUID_REGEX, \"i\").exec(args[1]);\r\n                    if (!matches) {\r\n                        throw new Error(\"Cannot parse GUID value. Value doesn't match to regular expression\");\r\n                    }\r\n                    const hex = matches\r\n                        .slice(1)\r\n                        .map((o, i) => {\r\n                        if (i < 3) {\r\n                            return Convert.ToHex(new Uint8Array(Convert.FromHex(o)).reverse());\r\n                        }\r\n                        return o;\r\n                    })\r\n                        .join(\"\");\r\n                    name = new asn1X509.GeneralName({\r\n                        otherName: new asn1X509.OtherName({\r\n                            typeId: id_GUID,\r\n                            value: AsnConvert.serialize(new OctetString(Convert.FromHex(hex))),\r\n                        }),\r\n                    });\r\n                    break;\r\n                }\r\n                case IP:\r\n                    name = new asn1X509.GeneralName({ iPAddress: args[1] });\r\n                    break;\r\n                case REGISTERED_ID:\r\n                    name = new asn1X509.GeneralName({ registeredID: args[1] });\r\n                    break;\r\n                case UPN: {\r\n                    name = new asn1X509.GeneralName({\r\n                        otherName: new asn1X509.OtherName({\r\n                            typeId: id_UPN,\r\n                            value: AsnConvert.serialize(AsnUtf8StringConverter.toASN(args[1])),\r\n                        })\r\n                    });\r\n                    break;\r\n                }\r\n                case URL:\r\n                    name = new asn1X509.GeneralName({ uniformResourceIdentifier: args[1] });\r\n                    break;\r\n                default:\r\n                    throw new Error(\"Cannot create GeneralName. Unsupported type of the name\");\r\n            }\r\n        }\r\n        else if (BufferSourceConverter.isBufferSource(args[0])) {\r\n            name = AsnConvert.parse(args[0], asn1X509.GeneralName);\r\n        }\r\n        else {\r\n            name = args[0];\r\n        }\r\n        super(name);\r\n    }\r\n    onInit(asn) {\r\n        if (asn.dNSName != undefined) {\r\n            this.type = DNS;\r\n            this.value = asn.dNSName;\r\n        }\r\n        else if (asn.rfc822Name != undefined) {\r\n            this.type = EMAIL;\r\n            this.value = asn.rfc822Name;\r\n        }\r\n        else if (asn.iPAddress != undefined) {\r\n            this.type = IP;\r\n            this.value = asn.iPAddress;\r\n        }\r\n        else if (asn.uniformResourceIdentifier != undefined) {\r\n            this.type = URL;\r\n            this.value = asn.uniformResourceIdentifier;\r\n        }\r\n        else if (asn.registeredID != undefined) {\r\n            this.type = REGISTERED_ID;\r\n            this.value = asn.registeredID;\r\n        }\r\n        else if (asn.directoryName != undefined) {\r\n            this.type = DN;\r\n            this.value = new Name(asn.directoryName).toString();\r\n        }\r\n        else if (asn.otherName != undefined) {\r\n            if (asn.otherName.typeId === id_GUID) {\r\n                this.type = GUID;\r\n                const guid = AsnConvert.parse(asn.otherName.value, OctetString);\r\n                const matches = new RegExp(GUID_REGEX, \"i\").exec(Convert.ToHex(guid));\r\n                if (!matches) {\r\n                    throw new Error(ERR_GUID);\r\n                }\r\n                this.value = matches\r\n                    .slice(1)\r\n                    .map((o, i) => {\r\n                    if (i < 3) {\r\n                        return Convert.ToHex(new Uint8Array(Convert.FromHex(o)).reverse());\r\n                    }\r\n                    return o;\r\n                })\r\n                    .join(\"-\");\r\n            }\r\n            else if (asn.otherName.typeId === id_UPN) {\r\n                this.type = UPN;\r\n                this.value = AsnConvert.parse(asn.otherName.value, asn1X509.DirectoryString).toString();\r\n            }\r\n            else {\r\n                throw new Error(ERR_GN_STRING_FORMAT);\r\n            }\r\n        }\r\n        else {\r\n            throw new Error(ERR_GN_STRING_FORMAT);\r\n        }\r\n    }\r\n    toJSON() {\r\n        return {\r\n            type: this.type,\r\n            value: this.value,\r\n        };\r\n    }\r\n    toTextObject() {\r\n        let type;\r\n        switch (this.type) {\r\n            case DN:\r\n            case DNS:\r\n            case GUID:\r\n            case IP:\r\n            case REGISTERED_ID:\r\n            case UPN:\r\n            case URL:\r\n                type = this.type.toUpperCase();\r\n                break;\r\n            case EMAIL:\r\n                type = \"Email\";\r\n                break;\r\n            default:\r\n                throw new Error(\"Unsupported GeneralName type\");\r\n        }\r\n        let value = this.value;\r\n        if (this.type === REGISTERED_ID) {\r\n            value = OidSerializer.toString(value);\r\n        }\r\n        return new TextObject(type, undefined, value);\r\n    }\r\n}\r\nclass GeneralNames extends AsnData {\r\n    constructor(params) {\r\n        let names;\r\n        if (params instanceof asn1X509.GeneralNames) {\r\n            names = params;\r\n        }\r\n        else if (Array.isArray(params)) {\r\n            const items = [];\r\n            for (const name of params) {\r\n                if (name instanceof asn1X509.GeneralName) {\r\n                    items.push(name);\r\n                }\r\n                else {\r\n                    const asnName = AsnConvert.parse(new GeneralName(name.type, name.value).rawData, asn1X509.GeneralName);\r\n                    items.push(asnName);\r\n                }\r\n            }\r\n            names = new asn1X509.GeneralNames(items);\r\n        }\r\n        else if (BufferSourceConverter.isBufferSource(params)) {\r\n            names = AsnConvert.parse(params, asn1X509.GeneralNames);\r\n        }\r\n        else {\r\n            throw new Error(\"Cannot initialize GeneralNames. Incorrect incoming arguments\");\r\n        }\r\n        super(names);\r\n    }\r\n    onInit(asn) {\r\n        const items = [];\r\n        for (const asnName of asn) {\r\n            let name = null;\r\n            try {\r\n                name = new GeneralName(asnName);\r\n            }\r\n            catch {\r\n                continue;\r\n            }\r\n            items.push(name);\r\n        }\r\n        this.items = items;\r\n    }\r\n    toJSON() {\r\n        return this.items.map(o => o.toJSON());\r\n    }\r\n    toTextObject() {\r\n        const res = super.toTextObjectEmpty();\r\n        for (const name of this.items) {\r\n            const nameObj = name.toTextObject();\r\n            let field = res[nameObj[TextObject.NAME]];\r\n            if (!Array.isArray(field)) {\r\n                field = [];\r\n                res[nameObj[TextObject.NAME]] = field;\r\n            }\r\n            field.push(nameObj);\r\n        }\r\n        return res;\r\n    }\r\n}\r\nGeneralNames.NAME = \"GeneralNames\";\n\nconst rPaddingTag = \"-{5}\";\r\nconst rEolChars = \"\\\\n\";\r\nconst rNameTag = `[^${rEolChars}]+`;\r\nconst rBeginTag = `${rPaddingTag}BEGIN (${rNameTag}(?=${rPaddingTag}))${rPaddingTag}`;\r\nconst rEndTag = `${rPaddingTag}END \\\\1${rPaddingTag}`;\r\nconst rEolGroup = \"\\\\n\";\r\nconst rHeaderKey = `[^:${rEolChars}]+`;\r\nconst rHeaderValue = `(?:[^${rEolChars}]+${rEolGroup}(?: +[^${rEolChars}]+${rEolGroup})*)`;\r\nconst rBase64Chars = \"[a-zA-Z0-9=+/]+\";\r\nconst rBase64 = `(?:${rBase64Chars}${rEolGroup})+`;\r\nconst rPem = `${rBeginTag}${rEolGroup}(?:((?:${rHeaderKey}: ${rHeaderValue})+))?${rEolGroup}?(${rBase64})${rEndTag}`;\r\nclass PemConverter {\r\n    static isPem(data) {\r\n        return typeof data === \"string\"\r\n            && new RegExp(rPem, \"g\").test(data);\r\n    }\r\n    static decodeWithHeaders(pem) {\r\n        pem = pem.replace(/\\r/g, \"\");\r\n        const pattern = new RegExp(rPem, \"g\");\r\n        const res = [];\r\n        let matches = null;\r\n        while (matches = pattern.exec(pem)) {\r\n            const base64 = matches[3]\r\n                .replace(new RegExp(`[${rEolChars}]+`, \"g\"), \"\");\r\n            const pemStruct = {\r\n                type: matches[1],\r\n                headers: [],\r\n                rawData: Convert.FromBase64(base64),\r\n            };\r\n            const headersString = matches[2];\r\n            if (headersString) {\r\n                const headers = headersString.split(new RegExp(rEolGroup, \"g\"));\r\n                let lastHeader = null;\r\n                for (const header of headers) {\r\n                    const [key, value] = header.split(/:(.*)/);\r\n                    if (value === undefined) {\r\n                        if (!lastHeader) {\r\n                            throw new Error(\"Cannot parse PEM string. Incorrect header value\");\r\n                        }\r\n                        lastHeader.value += key.trim();\r\n                    }\r\n                    else {\r\n                        if (lastHeader) {\r\n                            pemStruct.headers.push(lastHeader);\r\n                        }\r\n                        lastHeader = { key, value: value.trim() };\r\n                    }\r\n                }\r\n                if (lastHeader) {\r\n                    pemStruct.headers.push(lastHeader);\r\n                }\r\n            }\r\n            res.push(pemStruct);\r\n        }\r\n        return res;\r\n    }\r\n    static decode(pem) {\r\n        const blocks = this.decodeWithHeaders(pem);\r\n        return blocks.map(o => o.rawData);\r\n    }\r\n    static decodeFirst(pem) {\r\n        const items = this.decode(pem);\r\n        if (!items.length) {\r\n            throw new RangeError(\"PEM string doesn't contain any objects\");\r\n        }\r\n        return items[0];\r\n    }\r\n    static encode(rawData, tag) {\r\n        if (Array.isArray(rawData)) {\r\n            const raws = new Array();\r\n            if (tag) {\r\n                rawData.forEach(element => {\r\n                    if (!BufferSourceConverter.isBufferSource(element)) {\r\n                        throw new TypeError(\"Cannot encode array of BufferSource in PEM format. Not all items of the array are BufferSource\");\r\n                    }\r\n                    raws.push(this.encodeStruct({\r\n                        type: tag,\r\n                        rawData: BufferSourceConverter.toArrayBuffer(element),\r\n                    }));\r\n                });\r\n            }\r\n            else {\r\n                rawData.forEach(element => {\r\n                    if (!(\"type\" in element)) {\r\n                        throw new TypeError(\"Cannot encode array of PemStruct in PEM format. Not all items of the array are PemStrut\");\r\n                    }\r\n                    raws.push(this.encodeStruct(element));\r\n                });\r\n            }\r\n            return raws.join(\"\\n\");\r\n        }\r\n        else {\r\n            if (!tag) {\r\n                throw new Error(\"Required argument 'tag' is missed\");\r\n            }\r\n            return this.encodeStruct({\r\n                type: tag,\r\n                rawData: BufferSourceConverter.toArrayBuffer(rawData),\r\n            });\r\n        }\r\n    }\r\n    static encodeStruct(pem) {\r\n        var _a;\r\n        const upperCaseType = pem.type.toLocaleUpperCase();\r\n        const res = [];\r\n        res.push(`-----BEGIN ${upperCaseType}-----`);\r\n        if ((_a = pem.headers) === null || _a === void 0 ? void 0 : _a.length) {\r\n            for (const header of pem.headers) {\r\n                res.push(`${header.key}: ${header.value}`);\r\n            }\r\n            res.push(\"\");\r\n        }\r\n        const base64 = Convert.ToBase64(pem.rawData);\r\n        let sliced;\r\n        let offset = 0;\r\n        const rows = Array();\r\n        while (offset < base64.length) {\r\n            if (base64.length - offset < 64) {\r\n                sliced = base64.substring(offset);\r\n            }\r\n            else {\r\n                sliced = base64.substring(offset, offset + 64);\r\n                offset += 64;\r\n            }\r\n            if (sliced.length !== 0) {\r\n                rows.push(sliced);\r\n                if (sliced.length < 64) {\r\n                    break;\r\n                }\r\n            }\r\n            else {\r\n                break;\r\n            }\r\n        }\r\n        res.push(...rows);\r\n        res.push(`-----END ${upperCaseType}-----`);\r\n        return res.join(\"\\n\");\r\n    }\r\n}\r\nPemConverter.CertificateTag = \"CERTIFICATE\";\r\nPemConverter.CrlTag = \"CRL\";\r\nPemConverter.CertificateRequestTag = \"CERTIFICATE REQUEST\";\r\nPemConverter.PublicKeyTag = \"PUBLIC KEY\";\r\nPemConverter.PrivateKeyTag = \"PRIVATE KEY\";\n\nclass PemData extends AsnData {\r\n    static isAsnEncoded(data) {\r\n        return BufferSourceConverter.isBufferSource(data) || typeof data === \"string\";\r\n    }\r\n    static toArrayBuffer(raw) {\r\n        if (typeof raw === \"string\") {\r\n            if (PemConverter.isPem(raw)) {\r\n                return PemConverter.decode(raw)[0];\r\n            }\r\n            else if (Convert.isHex(raw)) {\r\n                return Convert.FromHex(raw);\r\n            }\r\n            else if (Convert.isBase64(raw)) {\r\n                return Convert.FromBase64(raw);\r\n            }\r\n            else if (Convert.isBase64Url(raw)) {\r\n                return Convert.FromBase64Url(raw);\r\n            }\r\n            else {\r\n                throw new TypeError(\"Unsupported format of 'raw' argument. Must be one of DER, PEM, HEX, Base64, or Base4Url\");\r\n            }\r\n        }\r\n        else {\r\n            const stringRaw = Convert.ToBinary(raw);\r\n            if (PemConverter.isPem(stringRaw)) {\r\n                return PemConverter.decode(stringRaw)[0];\r\n            }\r\n            else if (Convert.isHex(stringRaw)) {\r\n                return Convert.FromHex(stringRaw);\r\n            }\r\n            else if (Convert.isBase64(stringRaw)) {\r\n                return Convert.FromBase64(stringRaw);\r\n            }\r\n            else if (Convert.isBase64Url(stringRaw)) {\r\n                return Convert.FromBase64Url(stringRaw);\r\n            }\r\n            return BufferSourceConverter.toArrayBuffer(raw);\r\n        }\r\n    }\r\n    constructor(...args) {\r\n        if (PemData.isAsnEncoded(args[0])) {\r\n            super(PemData.toArrayBuffer(args[0]), args[1]);\r\n        }\r\n        else {\r\n            super(args[0]);\r\n        }\r\n    }\r\n    toString(format = \"pem\") {\r\n        switch (format) {\r\n            case \"pem\":\r\n                return PemConverter.encode(this.rawData, this.tag);\r\n            default:\r\n                return super.toString(format);\r\n        }\r\n    }\r\n}\n\nclass PublicKey extends PemData {\r\n    constructor(param) {\r\n        if (PemData.isAsnEncoded(param)) {\r\n            super(param, SubjectPublicKeyInfo);\r\n        }\r\n        else {\r\n            super(param);\r\n        }\r\n        this.tag = PemConverter.PublicKeyTag;\r\n    }\r\n    async export(...args) {\r\n        let crypto;\r\n        let keyUsages = [\"verify\"];\r\n        let algorithm = { hash: \"SHA-256\", ...this.algorithm };\r\n        if (args.length > 1) {\r\n            algorithm = args[0] || algorithm;\r\n            keyUsages = args[1] || keyUsages;\r\n            crypto = args[2] || cryptoProvider.get();\r\n        }\r\n        else {\r\n            crypto = args[0] || cryptoProvider.get();\r\n        }\r\n        return crypto.subtle.importKey(\"spki\", this.rawData, algorithm, true, keyUsages);\r\n    }\r\n    onInit(asn) {\r\n        const algProv = container.resolve(diAlgorithmProvider);\r\n        const algorithm = this.algorithm = algProv.toWebAlgorithm(asn.algorithm);\r\n        switch (asn.algorithm.algorithm) {\r\n            case id_rsaEncryption:\r\n                {\r\n                    const rsaPublicKey = AsnConvert.parse(asn.subjectPublicKey, RSAPublicKey);\r\n                    const modulus = BufferSourceConverter.toUint8Array(rsaPublicKey.modulus);\r\n                    algorithm.publicExponent = BufferSourceConverter.toUint8Array(rsaPublicKey.publicExponent);\r\n                    algorithm.modulusLength = (!modulus[0] ? modulus.slice(1) : modulus).byteLength << 3;\r\n                    break;\r\n                }\r\n        }\r\n    }\r\n    async getThumbprint(...args) {\r\n        var _a;\r\n        let crypto;\r\n        let algorithm = \"SHA-1\";\r\n        if (args.length >= 1 && !((_a = args[0]) === null || _a === void 0 ? void 0 : _a.subtle)) {\r\n            algorithm = args[0] || algorithm;\r\n            crypto = args[1] || cryptoProvider.get();\r\n        }\r\n        else {\r\n            crypto = args[0] || cryptoProvider.get();\r\n        }\r\n        return await crypto.subtle.digest(algorithm, this.rawData);\r\n    }\r\n    async getKeyIdentifier(crypto) {\r\n        if (!crypto) {\r\n            crypto = cryptoProvider.get();\r\n        }\r\n        const asn = AsnConvert.parse(this.rawData, SubjectPublicKeyInfo);\r\n        return await crypto.subtle.digest(\"SHA-1\", asn.subjectPublicKey);\r\n    }\r\n    toTextObject() {\r\n        const obj = this.toTextObjectEmpty();\r\n        const asn = AsnConvert.parse(this.rawData, SubjectPublicKeyInfo);\r\n        obj[\"Algorithm\"] = TextConverter.serializeAlgorithm(asn.algorithm);\r\n        switch (asn.algorithm.algorithm) {\r\n            case id_ecPublicKey:\r\n                obj[\"EC Point\"] = asn.subjectPublicKey;\r\n                break;\r\n            case id_rsaEncryption:\r\n            default:\r\n                obj[\"Raw Data\"] = asn.subjectPublicKey;\r\n        }\r\n        return obj;\r\n    }\r\n}\n\nclass ExtensionFactory {\r\n    static register(id, type) {\r\n        this.items.set(id, type);\r\n    }\r\n    static create(data) {\r\n        const extension = new Extension(data);\r\n        const Type = this.items.get(extension.type);\r\n        if (Type) {\r\n            return new Type(data);\r\n        }\r\n        return extension;\r\n    }\r\n}\r\nExtensionFactory.items = new Map();\n\nconst diAsnSignatureFormatter = \"crypto.signatureFormatter\";\r\nclass AsnDefaultSignatureFormatter {\r\n    toAsnSignature(algorithm, signature) {\r\n        return BufferSourceConverter.toArrayBuffer(signature);\r\n    }\r\n    toWebSignature(algorithm, signature) {\r\n        return BufferSourceConverter.toArrayBuffer(signature);\r\n    }\r\n}\n\nclass X509Certificate extends PemData {\r\n    constructor(param) {\r\n        if (PemData.isAsnEncoded(param)) {\r\n            super(param, Certificate);\r\n        }\r\n        else {\r\n            super(param);\r\n        }\r\n        this.tag = PemConverter.CertificateTag;\r\n    }\r\n    onInit(asn) {\r\n        const tbs = asn.tbsCertificate;\r\n        this.tbs = AsnConvert.serialize(tbs);\r\n        this.serialNumber = Convert.ToHex(tbs.serialNumber);\r\n        this.subjectName = new Name(tbs.subject);\r\n        this.subject = new Name(tbs.subject).toString();\r\n        this.issuerName = new Name(tbs.issuer);\r\n        this.issuer = this.issuerName.toString();\r\n        const algProv = container.resolve(diAlgorithmProvider);\r\n        this.signatureAlgorithm = algProv.toWebAlgorithm(asn.signatureAlgorithm);\r\n        this.signature = asn.signatureValue;\r\n        const notBefore = tbs.validity.notBefore.utcTime || tbs.validity.notBefore.generalTime;\r\n        if (!notBefore) {\r\n            throw new Error(\"Cannot get 'notBefore' value\");\r\n        }\r\n        this.notBefore = notBefore;\r\n        const notAfter = tbs.validity.notAfter.utcTime || tbs.validity.notAfter.generalTime;\r\n        if (!notAfter) {\r\n            throw new Error(\"Cannot get 'notAfter' value\");\r\n        }\r\n        this.notAfter = notAfter;\r\n        this.extensions = [];\r\n        if (tbs.extensions) {\r\n            this.extensions = tbs.extensions.map(o => ExtensionFactory.create(AsnConvert.serialize(o)));\r\n        }\r\n        this.publicKey = new PublicKey(tbs.subjectPublicKeyInfo);\r\n    }\r\n    getExtension(type) {\r\n        for (const ext of this.extensions) {\r\n            if (typeof type === \"string\") {\r\n                if (ext.type === type) {\r\n                    return ext;\r\n                }\r\n            }\r\n            else {\r\n                if (ext instanceof type) {\r\n                    return ext;\r\n                }\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    getExtensions(type) {\r\n        return this.extensions.filter(o => {\r\n            if (typeof type === \"string\") {\r\n                return o.type === type;\r\n            }\r\n            else {\r\n                return o instanceof type;\r\n            }\r\n        });\r\n    }\r\n    async verify(params = {}, crypto = cryptoProvider.get()) {\r\n        let keyAlgorithm;\r\n        let publicKey;\r\n        const paramsKey = params.publicKey;\r\n        try {\r\n            if (!paramsKey) {\r\n                keyAlgorithm = { ...this.publicKey.algorithm, ...this.signatureAlgorithm };\r\n                publicKey = await this.publicKey.export(keyAlgorithm, [\"verify\"], crypto);\r\n            }\r\n            else if (\"publicKey\" in paramsKey) {\r\n                keyAlgorithm = { ...paramsKey.publicKey.algorithm, ...this.signatureAlgorithm };\r\n                publicKey = await paramsKey.publicKey.export(keyAlgorithm, [\"verify\"]);\r\n            }\r\n            else if (paramsKey instanceof PublicKey) {\r\n                keyAlgorithm = { ...paramsKey.algorithm, ...this.signatureAlgorithm };\r\n                publicKey = await paramsKey.export(keyAlgorithm, [\"verify\"]);\r\n            }\r\n            else if (BufferSourceConverter.isBufferSource(paramsKey)) {\r\n                const key = new PublicKey(paramsKey);\r\n                keyAlgorithm = { ...key.algorithm, ...this.signatureAlgorithm };\r\n                publicKey = await key.export(keyAlgorithm, [\"verify\"]);\r\n            }\r\n            else {\r\n                keyAlgorithm = { ...paramsKey.algorithm, ...this.signatureAlgorithm };\r\n                publicKey = paramsKey;\r\n            }\r\n        }\r\n        catch (e) {\r\n            return false;\r\n        }\r\n        const signatureFormatters = container.resolveAll(diAsnSignatureFormatter).reverse();\r\n        let signature = null;\r\n        for (const signatureFormatter of signatureFormatters) {\r\n            signature = signatureFormatter.toWebSignature(keyAlgorithm, this.signature);\r\n            if (signature) {\r\n                break;\r\n            }\r\n        }\r\n        if (!signature) {\r\n            throw Error(\"Cannot convert ASN.1 signature value to WebCrypto format\");\r\n        }\r\n        const ok = await crypto.subtle.verify(this.signatureAlgorithm, publicKey, signature, this.tbs);\r\n        if (params.signatureOnly) {\r\n            return ok;\r\n        }\r\n        else {\r\n            const date = params.date || new Date();\r\n            const time = date.getTime();\r\n            return ok && this.notBefore.getTime() < time && time < this.notAfter.getTime();\r\n        }\r\n    }\r\n    async getThumbprint(...args) {\r\n        let crypto;\r\n        let algorithm = \"SHA-1\";\r\n        if (args[0]) {\r\n            if (!args[0].subtle) {\r\n                algorithm = args[0] || algorithm;\r\n                crypto = args[1];\r\n            }\r\n            else {\r\n                crypto = args[0];\r\n            }\r\n        }\r\n        crypto !== null && crypto !== void 0 ? crypto : (crypto = cryptoProvider.get());\r\n        return await crypto.subtle.digest(algorithm, this.rawData);\r\n    }\r\n    async isSelfSigned(crypto = cryptoProvider.get()) {\r\n        return this.subject === this.issuer && await this.verify({ signatureOnly: true }, crypto);\r\n    }\r\n    toTextObject() {\r\n        const obj = this.toTextObjectEmpty();\r\n        const cert = AsnConvert.parse(this.rawData, Certificate);\r\n        const tbs = cert.tbsCertificate;\r\n        const data = new TextObject(\"\", {\r\n            \"Version\": `${Version[tbs.version]} (${tbs.version})`,\r\n            \"Serial Number\": tbs.serialNumber,\r\n            \"Signature Algorithm\": TextConverter.serializeAlgorithm(tbs.signature),\r\n            \"Issuer\": this.issuer,\r\n            \"Validity\": new TextObject(\"\", {\r\n                \"Not Before\": tbs.validity.notBefore.getTime(),\r\n                \"Not After\": tbs.validity.notAfter.getTime(),\r\n            }),\r\n            \"Subject\": this.subject,\r\n            \"Subject Public Key Info\": this.publicKey,\r\n        });\r\n        if (tbs.issuerUniqueID) {\r\n            data[\"Issuer Unique ID\"] = tbs.issuerUniqueID;\r\n        }\r\n        if (tbs.subjectUniqueID) {\r\n            data[\"Subject Unique ID\"] = tbs.subjectUniqueID;\r\n        }\r\n        if (this.extensions.length) {\r\n            const extensions = new TextObject(\"\");\r\n            for (const ext of this.extensions) {\r\n                const extObj = ext.toTextObject();\r\n                extensions[extObj[TextObject.NAME]] = extObj;\r\n            }\r\n            data[\"Extensions\"] = extensions;\r\n        }\r\n        obj[\"Data\"] = data;\r\n        obj[\"Signature\"] = new TextObject(\"\", {\r\n            \"Algorithm\": TextConverter.serializeAlgorithm(cert.signatureAlgorithm),\r\n            \"\": cert.signatureValue,\r\n        });\r\n        return obj;\r\n    }\r\n}\r\nX509Certificate.NAME = \"Certificate\";\n\nclass AuthorityKeyIdentifierExtension extends Extension {\r\n    constructor(...args) {\r\n        if (BufferSourceConverter.isBufferSource(args[0])) {\r\n            super(args[0]);\r\n        }\r\n        else if (typeof args[0] === \"string\") {\r\n            const value = new asn1X509.AuthorityKeyIdentifier({ keyIdentifier: new asn1X509.KeyIdentifier(Convert.FromHex(args[0])) });\r\n            super(asn1X509.id_ce_authorityKeyIdentifier, args[1], AsnConvert.serialize(value));\r\n        }\r\n        else {\r\n            const certId = args[0];\r\n            const certIdName = certId.name instanceof GeneralNames\r\n                ? AsnConvert.parse(certId.name.rawData, asn1X509.GeneralNames)\r\n                : certId.name;\r\n            const value = new asn1X509.AuthorityKeyIdentifier({\r\n                authorityCertIssuer: certIdName,\r\n                authorityCertSerialNumber: Convert.FromHex(certId.serialNumber),\r\n            });\r\n            super(asn1X509.id_ce_authorityKeyIdentifier, args[1], AsnConvert.serialize(value));\r\n        }\r\n    }\r\n    static async create(param, critical = false, crypto = cryptoProvider.get()) {\r\n        if (param instanceof X509Certificate || CryptoProvider.isCryptoKey(param)) {\r\n            const publicKey = param instanceof X509Certificate ? await param.publicKey.export(crypto) : param;\r\n            const spki = await crypto.subtle.exportKey(\"spki\", publicKey);\r\n            const key = new PublicKey(spki);\r\n            const id = await key.getKeyIdentifier(crypto);\r\n            return new AuthorityKeyIdentifierExtension(Convert.ToHex(id), critical);\r\n        }\r\n        else {\r\n            return new AuthorityKeyIdentifierExtension(param, critical);\r\n        }\r\n    }\r\n    onInit(asn) {\r\n        super.onInit(asn);\r\n        const aki = AsnConvert.parse(asn.extnValue, asn1X509.AuthorityKeyIdentifier);\r\n        if (aki.keyIdentifier) {\r\n            this.keyId = Convert.ToHex(aki.keyIdentifier);\r\n        }\r\n        if (aki.authorityCertIssuer && aki.authorityCertSerialNumber) {\r\n            this.certId = {\r\n                name: aki.authorityCertIssuer,\r\n                serialNumber: Convert.ToHex(aki.authorityCertSerialNumber),\r\n            };\r\n        }\r\n    }\r\n    toTextObject() {\r\n        const obj = this.toTextObjectWithoutValue();\r\n        const asn = AsnConvert.parse(this.value, asn1X509.AuthorityKeyIdentifier);\r\n        if (asn.authorityCertIssuer) {\r\n            obj[\"Authority Issuer\"] = new GeneralNames(asn.authorityCertIssuer).toTextObject();\r\n        }\r\n        if (asn.authorityCertSerialNumber) {\r\n            obj[\"Authority Serial Number\"] = asn.authorityCertSerialNumber;\r\n        }\r\n        if (asn.keyIdentifier) {\r\n            obj[\"\"] = asn.keyIdentifier;\r\n        }\r\n        return obj;\r\n    }\r\n}\r\nAuthorityKeyIdentifierExtension.NAME = \"Authority Key Identifier\";\n\nclass BasicConstraintsExtension extends Extension {\r\n    constructor(...args) {\r\n        if (BufferSourceConverter.isBufferSource(args[0])) {\r\n            super(args[0]);\r\n            const value = AsnConvert.parse(this.value, BasicConstraints);\r\n            this.ca = value.cA;\r\n            this.pathLength = value.pathLenConstraint;\r\n        }\r\n        else {\r\n            const value = new BasicConstraints({\r\n                cA: args[0],\r\n                pathLenConstraint: args[1],\r\n            });\r\n            super(id_ce_basicConstraints, args[2], AsnConvert.serialize(value));\r\n            this.ca = args[0];\r\n            this.pathLength = args[1];\r\n        }\r\n    }\r\n    toTextObject() {\r\n        const obj = this.toTextObjectWithoutValue();\r\n        if (this.ca) {\r\n            obj[\"CA\"] = this.ca;\r\n        }\r\n        if (this.pathLength !== undefined) {\r\n            obj[\"Path Length\"] = this.pathLength;\r\n        }\r\n        return obj;\r\n    }\r\n}\r\nBasicConstraintsExtension.NAME = \"Basic Constraints\";\n\nvar ExtendedKeyUsage;\r\n(function (ExtendedKeyUsage) {\r\n    ExtendedKeyUsage[\"serverAuth\"] = \"1.3.6.1.5.5.7.3.1\";\r\n    ExtendedKeyUsage[\"clientAuth\"] = \"1.3.6.1.5.5.7.3.2\";\r\n    ExtendedKeyUsage[\"codeSigning\"] = \"1.3.6.1.5.5.7.3.3\";\r\n    ExtendedKeyUsage[\"emailProtection\"] = \"1.3.6.1.5.5.7.3.4\";\r\n    ExtendedKeyUsage[\"timeStamping\"] = \"1.3.6.1.5.5.7.3.8\";\r\n    ExtendedKeyUsage[\"ocspSigning\"] = \"1.3.6.1.5.5.7.3.9\";\r\n})(ExtendedKeyUsage || (ExtendedKeyUsage = {}));\r\nclass ExtendedKeyUsageExtension extends Extension {\r\n    constructor(...args) {\r\n        if (BufferSourceConverter.isBufferSource(args[0])) {\r\n            super(args[0]);\r\n            const value = AsnConvert.parse(this.value, asn1X509.ExtendedKeyUsage);\r\n            this.usages = value.map(o => o);\r\n        }\r\n        else {\r\n            const value = new asn1X509.ExtendedKeyUsage(args[0]);\r\n            super(asn1X509.id_ce_extKeyUsage, args[1], AsnConvert.serialize(value));\r\n            this.usages = args[0];\r\n        }\r\n    }\r\n    toTextObject() {\r\n        const obj = this.toTextObjectWithoutValue();\r\n        obj[\"\"] = this.usages.map(o => OidSerializer.toString(o)).join(\", \");\r\n        return obj;\r\n    }\r\n}\r\nExtendedKeyUsageExtension.NAME = \"Extended Key Usages\";\n\nvar KeyUsageFlags;\r\n(function (KeyUsageFlags) {\r\n    KeyUsageFlags[KeyUsageFlags[\"digitalSignature\"] = 1] = \"digitalSignature\";\r\n    KeyUsageFlags[KeyUsageFlags[\"nonRepudiation\"] = 2] = \"nonRepudiation\";\r\n    KeyUsageFlags[KeyUsageFlags[\"keyEncipherment\"] = 4] = \"keyEncipherment\";\r\n    KeyUsageFlags[KeyUsageFlags[\"dataEncipherment\"] = 8] = \"dataEncipherment\";\r\n    KeyUsageFlags[KeyUsageFlags[\"keyAgreement\"] = 16] = \"keyAgreement\";\r\n    KeyUsageFlags[KeyUsageFlags[\"keyCertSign\"] = 32] = \"keyCertSign\";\r\n    KeyUsageFlags[KeyUsageFlags[\"cRLSign\"] = 64] = \"cRLSign\";\r\n    KeyUsageFlags[KeyUsageFlags[\"encipherOnly\"] = 128] = \"encipherOnly\";\r\n    KeyUsageFlags[KeyUsageFlags[\"decipherOnly\"] = 256] = \"decipherOnly\";\r\n})(KeyUsageFlags || (KeyUsageFlags = {}));\r\nclass KeyUsagesExtension extends Extension {\r\n    constructor(...args) {\r\n        if (BufferSourceConverter.isBufferSource(args[0])) {\r\n            super(args[0]);\r\n            const value = AsnConvert.parse(this.value, KeyUsage);\r\n            this.usages = value.toNumber();\r\n        }\r\n        else {\r\n            const value = new KeyUsage(args[0]);\r\n            super(id_ce_keyUsage, args[1], AsnConvert.serialize(value));\r\n            this.usages = args[0];\r\n        }\r\n    }\r\n    toTextObject() {\r\n        const obj = this.toTextObjectWithoutValue();\r\n        const asn = AsnConvert.parse(this.value, KeyUsage);\r\n        obj[\"\"] = asn.toJSON().join(\", \");\r\n        return obj;\r\n    }\r\n}\r\nKeyUsagesExtension.NAME = \"Key Usages\";\n\nclass SubjectKeyIdentifierExtension extends Extension {\r\n    constructor(...args) {\r\n        if (BufferSourceConverter.isBufferSource(args[0])) {\r\n            super(args[0]);\r\n            const value = AsnConvert.parse(this.value, asn1X509.SubjectKeyIdentifier);\r\n            this.keyId = Convert.ToHex(value);\r\n        }\r\n        else {\r\n            const identifier = typeof args[0] === \"string\"\r\n                ? Convert.FromHex(args[0])\r\n                : args[0];\r\n            const value = new asn1X509.SubjectKeyIdentifier(identifier);\r\n            super(asn1X509.id_ce_subjectKeyIdentifier, args[1], AsnConvert.serialize(value));\r\n            this.keyId = Convert.ToHex(identifier);\r\n        }\r\n    }\r\n    static async create(publicKey, critical = false, crypto = cryptoProvider.get()) {\r\n        let spki;\r\n        if (publicKey instanceof PublicKey) {\r\n            spki = publicKey.rawData;\r\n        }\r\n        else if (\"publicKey\" in publicKey) {\r\n            spki = publicKey.publicKey.rawData;\r\n        }\r\n        else if (BufferSourceConverter.isBufferSource(publicKey)) {\r\n            spki = publicKey;\r\n        }\r\n        else {\r\n            spki = await crypto.subtle.exportKey(\"spki\", publicKey);\r\n        }\r\n        const key = new PublicKey(spki);\r\n        const id = await key.getKeyIdentifier(crypto);\r\n        return new SubjectKeyIdentifierExtension(Convert.ToHex(id), critical);\r\n    }\r\n    toTextObject() {\r\n        const obj = this.toTextObjectWithoutValue();\r\n        const asn = AsnConvert.parse(this.value, asn1X509.SubjectKeyIdentifier);\r\n        obj[\"\"] = asn;\r\n        return obj;\r\n    }\r\n}\r\nSubjectKeyIdentifierExtension.NAME = \"Subject Key Identifier\";\n\nclass SubjectAlternativeNameExtension extends Extension {\r\n    constructor(...args) {\r\n        if (BufferSourceConverter.isBufferSource(args[0])) {\r\n            super(args[0]);\r\n        }\r\n        else {\r\n            super(asn1X509.id_ce_subjectAltName, args[1], new GeneralNames(args[0] || []).rawData);\r\n        }\r\n    }\r\n    onInit(asn) {\r\n        super.onInit(asn);\r\n        const value = AsnConvert.parse(asn.extnValue, asn1X509.SubjectAlternativeName);\r\n        this.names = new GeneralNames(value);\r\n    }\r\n    toTextObject() {\r\n        const obj = this.toTextObjectWithoutValue();\r\n        const namesObj = this.names.toTextObject();\r\n        for (const key in namesObj) {\r\n            obj[key] = namesObj[key];\r\n        }\r\n        return obj;\r\n    }\r\n}\r\nSubjectAlternativeNameExtension.NAME = \"Subject Alternative Name\";\n\nclass CertificatePolicyExtension extends Extension {\r\n    constructor(...args) {\r\n        var _a;\r\n        if (BufferSourceConverter.isBufferSource(args[0])) {\r\n            super(args[0]);\r\n            const asnPolicies = AsnConvert.parse(this.value, asn1X509.CertificatePolicies);\r\n            this.policies = asnPolicies.map(o => o.policyIdentifier);\r\n        }\r\n        else {\r\n            const policies = args[0];\r\n            const critical = (_a = args[1]) !== null && _a !== void 0 ? _a : false;\r\n            const value = new asn1X509.CertificatePolicies(policies.map(o => (new asn1X509.PolicyInformation({\r\n                policyIdentifier: o,\r\n            }))));\r\n            super(asn1X509.id_ce_certificatePolicies, critical, AsnConvert.serialize(value));\r\n            this.policies = policies;\r\n        }\r\n    }\r\n    toTextObject() {\r\n        const obj = this.toTextObjectWithoutValue();\r\n        obj[\"Policy\"] = this.policies.map(o => new TextObject(\"\", {}, OidSerializer.toString(o)));\r\n        return obj;\r\n    }\r\n}\r\nCertificatePolicyExtension.NAME = \"Certificate Policies\";\r\nExtensionFactory.register(asn1X509.id_ce_certificatePolicies, CertificatePolicyExtension);\n\nclass Attribute extends AsnData {\r\n    constructor(...args) {\r\n        let raw;\r\n        if (BufferSourceConverter.isBufferSource(args[0])) {\r\n            raw = BufferSourceConverter.toArrayBuffer(args[0]);\r\n        }\r\n        else {\r\n            const type = args[0];\r\n            const values = Array.isArray(args[1]) ? args[1].map(o => BufferSourceConverter.toArrayBuffer(o)) : [];\r\n            raw = AsnConvert.serialize(new Attribute$1({ type, values }));\r\n        }\r\n        super(raw, Attribute$1);\r\n    }\r\n    onInit(asn) {\r\n        this.type = asn.type;\r\n        this.values = asn.values;\r\n    }\r\n    toTextObject() {\r\n        const obj = this.toTextObjectWithoutValue();\r\n        obj[\"Value\"] = this.values.map(o => new TextObject(\"\", { \"\": o }));\r\n        return obj;\r\n    }\r\n    toTextObjectWithoutValue() {\r\n        const obj = this.toTextObjectEmpty();\r\n        if (obj[TextObject.NAME] === Attribute.NAME) {\r\n            obj[TextObject.NAME] = OidSerializer.toString(this.type);\r\n        }\r\n        return obj;\r\n    }\r\n}\r\nAttribute.NAME = \"Attribute\";\n\nclass ChallengePasswordAttribute extends Attribute {\r\n    constructor(...args) {\r\n        var _a;\r\n        if (BufferSourceConverter.isBufferSource(args[0])) {\r\n            super(args[0]);\r\n        }\r\n        else {\r\n            const value = new asnPkcs9.ChallengePassword({\r\n                printableString: args[0],\r\n            });\r\n            super(asnPkcs9.id_pkcs9_at_challengePassword, [AsnConvert.serialize(value)]);\r\n        }\r\n        (_a = this.password) !== null && _a !== void 0 ? _a : (this.password = \"\");\r\n    }\r\n    onInit(asn) {\r\n        super.onInit(asn);\r\n        if (this.values[0]) {\r\n            const value = AsnConvert.parse(this.values[0], asnPkcs9.ChallengePassword);\r\n            this.password = value.toString();\r\n        }\r\n    }\r\n    toTextObject() {\r\n        const obj = this.toTextObjectWithoutValue();\r\n        obj[TextObject.VALUE] = this.password;\r\n        return obj;\r\n    }\r\n}\r\nChallengePasswordAttribute.NAME = \"Challenge Password\";\n\nclass ExtensionsAttribute extends Attribute {\r\n    constructor(...args) {\r\n        var _a;\r\n        if (BufferSourceConverter.isBufferSource(args[0])) {\r\n            super(args[0]);\r\n        }\r\n        else {\r\n            const extensions = args[0];\r\n            const value = new asn1X509.Extensions();\r\n            for (const extension of extensions) {\r\n                value.push(AsnConvert.parse(extension.rawData, asn1X509.Extension));\r\n            }\r\n            super(asnPkcs9.id_pkcs9_at_extensionRequest, [AsnConvert.serialize(value)]);\r\n        }\r\n        (_a = this.items) !== null && _a !== void 0 ? _a : (this.items = []);\r\n    }\r\n    onInit(asn) {\r\n        super.onInit(asn);\r\n        if (this.values[0]) {\r\n            const value = AsnConvert.parse(this.values[0], asn1X509.Extensions);\r\n            this.items = value.map(o => ExtensionFactory.create(AsnConvert.serialize(o)));\r\n        }\r\n    }\r\n    toTextObject() {\r\n        const obj = this.toTextObjectWithoutValue();\r\n        const extensions = this.items.map(o => o.toTextObject());\r\n        for (const extension of extensions) {\r\n            obj[extension[TextObject.NAME]] = extension;\r\n        }\r\n        return obj;\r\n    }\r\n}\r\nExtensionsAttribute.NAME = \"Extensions\";\n\nclass AttributeFactory {\r\n    static register(id, type) {\r\n        this.items.set(id, type);\r\n    }\r\n    static create(data) {\r\n        const attribute = new Attribute(data);\r\n        const Type = this.items.get(attribute.type);\r\n        if (Type) {\r\n            return new Type(data);\r\n        }\r\n        return attribute;\r\n    }\r\n}\r\nAttributeFactory.items = new Map();\n\nlet RsaAlgorithm = class RsaAlgorithm {\r\n    toAsnAlgorithm(alg) {\r\n        switch (alg.name.toLowerCase()) {\r\n            case \"rsassa-pkcs1-v1_5\":\r\n                if (alg.hash) {\r\n                    switch (alg.hash.name.toLowerCase()) {\r\n                        case \"sha-1\":\r\n                            return new AlgorithmIdentifier({ algorithm: asn1Rsa.id_sha1WithRSAEncryption, parameters: null });\r\n                        case \"sha-256\":\r\n                            return new AlgorithmIdentifier({ algorithm: asn1Rsa.id_sha256WithRSAEncryption, parameters: null });\r\n                        case \"sha-384\":\r\n                            return new AlgorithmIdentifier({ algorithm: asn1Rsa.id_sha384WithRSAEncryption, parameters: null });\r\n                        case \"sha-512\":\r\n                            return new AlgorithmIdentifier({ algorithm: asn1Rsa.id_sha512WithRSAEncryption, parameters: null });\r\n                    }\r\n                }\r\n                else {\r\n                    return new AlgorithmIdentifier({ algorithm: asn1Rsa.id_rsaEncryption, parameters: null });\r\n                }\r\n        }\r\n        return null;\r\n    }\r\n    toWebAlgorithm(alg) {\r\n        switch (alg.algorithm) {\r\n            case asn1Rsa.id_rsaEncryption:\r\n                return { name: \"RSASSA-PKCS1-v1_5\" };\r\n            case asn1Rsa.id_sha1WithRSAEncryption:\r\n                return { name: \"RSASSA-PKCS1-v1_5\", hash: { name: \"SHA-1\" } };\r\n            case asn1Rsa.id_sha256WithRSAEncryption:\r\n                return { name: \"RSASSA-PKCS1-v1_5\", hash: { name: \"SHA-256\" } };\r\n            case asn1Rsa.id_sha384WithRSAEncryption:\r\n                return { name: \"RSASSA-PKCS1-v1_5\", hash: { name: \"SHA-384\" } };\r\n            case asn1Rsa.id_sha512WithRSAEncryption:\r\n                return { name: \"RSASSA-PKCS1-v1_5\", hash: { name: \"SHA-512\" } };\r\n        }\r\n        return null;\r\n    }\r\n};\r\nRsaAlgorithm = __decorate([\r\n    injectable()\r\n], RsaAlgorithm);\r\ncontainer.registerSingleton(diAlgorithm, RsaAlgorithm);\n\nclass AsnEcSignatureFormatter {\r\n    addPadding(pointSize, data) {\r\n        const bytes = BufferSourceConverter.toUint8Array(data);\r\n        const res = new Uint8Array(pointSize);\r\n        res.set(bytes, pointSize - bytes.length);\r\n        return res;\r\n    }\r\n    removePadding(data, positive = false) {\r\n        let bytes = BufferSourceConverter.toUint8Array(data);\r\n        for (let i = 0; i < bytes.length; i++) {\r\n            if (!bytes[i]) {\r\n                continue;\r\n            }\r\n            bytes = bytes.slice(i);\r\n            break;\r\n        }\r\n        if (positive && bytes[0] > 127) {\r\n            const result = new Uint8Array(bytes.length + 1);\r\n            result.set(bytes, 1);\r\n            return result.buffer;\r\n        }\r\n        return bytes.buffer;\r\n    }\r\n    toAsnSignature(algorithm, signature) {\r\n        if (algorithm.name === \"ECDSA\") {\r\n            const namedCurve = algorithm.namedCurve;\r\n            const pointSize = AsnEcSignatureFormatter.namedCurveSize.get(namedCurve) || AsnEcSignatureFormatter.defaultNamedCurveSize;\r\n            const ecSignature = new ECDSASigValue();\r\n            const uint8Signature = BufferSourceConverter.toUint8Array(signature);\r\n            ecSignature.r = this.removePadding(uint8Signature.slice(0, pointSize), true);\r\n            ecSignature.s = this.removePadding(uint8Signature.slice(pointSize, pointSize + pointSize), true);\r\n            return AsnConvert.serialize(ecSignature);\r\n        }\r\n        return null;\r\n    }\r\n    toWebSignature(algorithm, signature) {\r\n        if (algorithm.name === \"ECDSA\") {\r\n            const ecSigValue = AsnConvert.parse(signature, ECDSASigValue);\r\n            const namedCurve = algorithm.namedCurve;\r\n            const pointSize = AsnEcSignatureFormatter.namedCurveSize.get(namedCurve) || AsnEcSignatureFormatter.defaultNamedCurveSize;\r\n            const r = this.addPadding(pointSize, this.removePadding(ecSigValue.r));\r\n            const s = this.addPadding(pointSize, this.removePadding(ecSigValue.s));\r\n            return combine(r, s);\r\n        }\r\n        return null;\r\n    }\r\n}\r\nAsnEcSignatureFormatter.namedCurveSize = new Map();\r\nAsnEcSignatureFormatter.defaultNamedCurveSize = 32;\n\nconst idX25519 = \"1.3.101.110\";\r\nconst idX448 = \"1.3.101.111\";\r\nconst idEd25519 = \"1.3.101.112\";\r\nconst idEd448 = \"1.3.101.113\";\r\nlet EdAlgorithm = class EdAlgorithm {\r\n    toAsnAlgorithm(alg) {\r\n        let algorithm = null;\r\n        switch (alg.name.toLowerCase()) {\r\n            case \"eddsa\":\r\n                switch (alg.namedCurve.toLowerCase()) {\r\n                    case \"ed25519\":\r\n                        algorithm = idEd25519;\r\n                        break;\r\n                    case \"ed448\":\r\n                        algorithm = idEd448;\r\n                        break;\r\n                }\r\n                break;\r\n            case \"ecdh-es\":\r\n                switch (alg.namedCurve.toLowerCase()) {\r\n                    case \"x25519\":\r\n                        algorithm = idX25519;\r\n                        break;\r\n                    case \"x448\":\r\n                        algorithm = idX448;\r\n                        break;\r\n                }\r\n        }\r\n        if (algorithm) {\r\n            return new AlgorithmIdentifier({\r\n                algorithm,\r\n            });\r\n        }\r\n        return null;\r\n    }\r\n    toWebAlgorithm(alg) {\r\n        switch (alg.algorithm) {\r\n            case idEd25519:\r\n                return { name: \"EdDSA\", namedCurve: \"Ed25519\" };\r\n            case idEd448:\r\n                return { name: \"EdDSA\", namedCurve: \"Ed448\" };\r\n            case idX25519:\r\n                return { name: \"ECDH-ES\", namedCurve: \"X25519\" };\r\n            case idX448:\r\n                return { name: \"ECDH-ES\", namedCurve: \"X448\" };\r\n        }\r\n        return null;\r\n    }\r\n};\r\nEdAlgorithm = __decorate([\r\n    injectable()\r\n], EdAlgorithm);\r\ncontainer.registerSingleton(diAlgorithm, EdAlgorithm);\n\nclass Pkcs10CertificateRequest extends PemData {\r\n    constructor(param) {\r\n        if (PemData.isAsnEncoded(param)) {\r\n            super(param, CertificationRequest);\r\n        }\r\n        else {\r\n            super(param);\r\n        }\r\n        this.tag = PemConverter.CertificateRequestTag;\r\n    }\r\n    onInit(asn) {\r\n        this.tbs = AsnConvert.serialize(asn.certificationRequestInfo);\r\n        this.publicKey = new PublicKey(asn.certificationRequestInfo.subjectPKInfo);\r\n        const algProv = container.resolve(diAlgorithmProvider);\r\n        this.signatureAlgorithm = algProv.toWebAlgorithm(asn.signatureAlgorithm);\r\n        this.signature = asn.signature;\r\n        this.attributes = asn.certificationRequestInfo.attributes\r\n            .map(o => AttributeFactory.create(AsnConvert.serialize(o)));\r\n        const extensions = this.getAttribute(id_pkcs9_at_extensionRequest);\r\n        this.extensions = [];\r\n        if (extensions instanceof ExtensionsAttribute) {\r\n            this.extensions = extensions.items;\r\n        }\r\n        this.subjectName = new Name(asn.certificationRequestInfo.subject);\r\n        this.subject = this.subjectName.toString();\r\n    }\r\n    getAttribute(type) {\r\n        for (const attr of this.attributes) {\r\n            if (attr.type === type) {\r\n                return attr;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    getAttributes(type) {\r\n        return this.attributes.filter(o => o.type === type);\r\n    }\r\n    getExtension(type) {\r\n        for (const ext of this.extensions) {\r\n            if (ext.type === type) {\r\n                return ext;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    getExtensions(type) {\r\n        return this.extensions.filter(o => o.type === type);\r\n    }\r\n    async verify(crypto = cryptoProvider.get()) {\r\n        const algorithm = { ...this.publicKey.algorithm, ...this.signatureAlgorithm };\r\n        const publicKey = await this.publicKey.export(algorithm, [\"verify\"], crypto);\r\n        const signatureFormatters = container.resolveAll(diAsnSignatureFormatter).reverse();\r\n        let signature = null;\r\n        for (const signatureFormatter of signatureFormatters) {\r\n            signature = signatureFormatter.toWebSignature(algorithm, this.signature);\r\n            if (signature) {\r\n                break;\r\n            }\r\n        }\r\n        if (!signature) {\r\n            throw Error(\"Cannot convert WebCrypto signature value to ASN.1 format\");\r\n        }\r\n        const ok = await crypto.subtle.verify(this.signatureAlgorithm, publicKey, signature, this.tbs);\r\n        return ok;\r\n    }\r\n    toTextObject() {\r\n        const obj = this.toTextObjectEmpty();\r\n        const req = AsnConvert.parse(this.rawData, CertificationRequest);\r\n        const tbs = req.certificationRequestInfo;\r\n        const data = new TextObject(\"\", {\r\n            \"Version\": `${Version[tbs.version]} (${tbs.version})`,\r\n            \"Subject\": this.subject,\r\n            \"Subject Public Key Info\": this.publicKey,\r\n        });\r\n        if (this.attributes.length) {\r\n            const attrs = new TextObject(\"\");\r\n            for (const ext of this.attributes) {\r\n                const attrObj = ext.toTextObject();\r\n                attrs[attrObj[TextObject.NAME]] = attrObj;\r\n            }\r\n            data[\"Attributes\"] = attrs;\r\n        }\r\n        obj[\"Data\"] = data;\r\n        obj[\"Signature\"] = new TextObject(\"\", {\r\n            \"Algorithm\": TextConverter.serializeAlgorithm(req.signatureAlgorithm),\r\n            \"\": req.signature,\r\n        });\r\n        return obj;\r\n    }\r\n}\r\nPkcs10CertificateRequest.NAME = \"PKCS#10 Certificate Request\";\n\nclass Pkcs10CertificateRequestGenerator {\r\n    static async create(params, crypto = cryptoProvider.get()) {\r\n        if (!params.keys.privateKey) {\r\n            throw new Error(\"Bad field 'keys' in 'params' argument. 'privateKey' is empty\");\r\n        }\r\n        if (!params.keys.publicKey) {\r\n            throw new Error(\"Bad field 'keys' in 'params' argument. 'publicKey' is empty\");\r\n        }\r\n        const spki = await crypto.subtle.exportKey(\"spki\", params.keys.publicKey);\r\n        const asnReq = new CertificationRequest({\r\n            certificationRequestInfo: new CertificationRequestInfo({\r\n                subjectPKInfo: AsnConvert.parse(spki, SubjectPublicKeyInfo),\r\n            }),\r\n        });\r\n        if (params.name) {\r\n            const name = params.name instanceof Name\r\n                ? params.name\r\n                : new Name(params.name);\r\n            asnReq.certificationRequestInfo.subject = AsnConvert.parse(name.toArrayBuffer(), Name$1);\r\n        }\r\n        if (params.attributes) {\r\n            for (const o of params.attributes) {\r\n                asnReq.certificationRequestInfo.attributes.push(AsnConvert.parse(o.rawData, Attribute$1));\r\n            }\r\n        }\r\n        if (params.extensions && params.extensions.length) {\r\n            const attr = new Attribute$1({ type: id_pkcs9_at_extensionRequest });\r\n            const extensions = new Extensions();\r\n            for (const o of params.extensions) {\r\n                extensions.push(AsnConvert.parse(o.rawData, Extension$1));\r\n            }\r\n            attr.values.push(AsnConvert.serialize(extensions));\r\n            asnReq.certificationRequestInfo.attributes.push(attr);\r\n        }\r\n        const signingAlgorithm = { ...params.signingAlgorithm, ...params.keys.privateKey.algorithm };\r\n        const algProv = container.resolve(diAlgorithmProvider);\r\n        asnReq.signatureAlgorithm = algProv.toAsnAlgorithm(signingAlgorithm);\r\n        const tbs = AsnConvert.serialize(asnReq.certificationRequestInfo);\r\n        const signature = await crypto.subtle.sign(signingAlgorithm, params.keys.privateKey, tbs);\r\n        const signatureFormatters = container.resolveAll(diAsnSignatureFormatter).reverse();\r\n        let asnSignature = null;\r\n        for (const signatureFormatter of signatureFormatters) {\r\n            asnSignature = signatureFormatter.toAsnSignature(signingAlgorithm, signature);\r\n            if (asnSignature) {\r\n                break;\r\n            }\r\n        }\r\n        if (!asnSignature) {\r\n            throw Error(\"Cannot convert WebCrypto signature value to ASN.1 format\");\r\n        }\r\n        asnReq.signature = asnSignature;\r\n        return new Pkcs10CertificateRequest(AsnConvert.serialize(asnReq));\r\n    }\r\n}\n\nclass X509Certificates extends Array {\r\n    constructor(param) {\r\n        super();\r\n        if (PemData.isAsnEncoded(param)) {\r\n            this.import(param);\r\n        }\r\n        else if (param instanceof X509Certificate) {\r\n            this.push(param);\r\n        }\r\n        else if (Array.isArray(param)) {\r\n            for (const item of param) {\r\n                this.push(item);\r\n            }\r\n        }\r\n    }\r\n    export(format) {\r\n        const signedData = new asn1Cms.SignedData();\r\n        signedData.version = 1;\r\n        signedData.encapContentInfo.eContentType = asn1Cms.id_data;\r\n        signedData.encapContentInfo.eContent = new asn1Cms.EncapsulatedContent({\r\n            single: new OctetString(),\r\n        });\r\n        signedData.certificates = new asn1Cms.CertificateSet(this.map(o => new asn1Cms.CertificateChoices({\r\n            certificate: AsnConvert.parse(o.rawData, Certificate)\r\n        })));\r\n        const cms = new asn1Cms.ContentInfo({\r\n            contentType: asn1Cms.id_signedData,\r\n            content: AsnConvert.serialize(signedData),\r\n        });\r\n        const raw = AsnConvert.serialize(cms);\r\n        if (format === \"raw\") {\r\n            return raw;\r\n        }\r\n        return this.toString(format);\r\n    }\r\n    import(data) {\r\n        const raw = PemData.toArrayBuffer(data);\r\n        const cms = AsnConvert.parse(raw, asn1Cms.ContentInfo);\r\n        if (cms.contentType !== asn1Cms.id_signedData) {\r\n            throw new TypeError(\"Cannot parse CMS package. Incoming data is not a SignedData object.\");\r\n        }\r\n        const signedData = AsnConvert.parse(cms.content, asn1Cms.SignedData);\r\n        this.clear();\r\n        for (const item of signedData.certificates || []) {\r\n            if (item.certificate) {\r\n                this.push(new X509Certificate(item.certificate));\r\n            }\r\n        }\r\n    }\r\n    clear() {\r\n        while (this.pop()) {\r\n        }\r\n    }\r\n    toString(format = \"pem\") {\r\n        const raw = this.export(\"raw\");\r\n        switch (format) {\r\n            case \"pem\":\r\n                return PemConverter.encode(raw, \"CMS\");\r\n            case \"pem-chain\":\r\n                return this\r\n                    .map(o => o.toString(\"pem\"))\r\n                    .join(\"\\n\");\r\n            case \"asn\":\r\n                return AsnConvert.toString(raw);\r\n            case \"hex\":\r\n                return Convert.ToHex(raw);\r\n            case \"base64\":\r\n                return Convert.ToBase64(raw);\r\n            case \"base64url\":\r\n                return Convert.ToBase64Url(raw);\r\n            case \"text\":\r\n                return TextConverter.serialize(this.toTextObject());\r\n            default:\r\n                throw TypeError(\"Argument 'format' is unsupported value\");\r\n        }\r\n    }\r\n    toTextObject() {\r\n        const contentInfo = AsnConvert.parse(this.export(\"raw\"), asn1Cms.ContentInfo);\r\n        const signedData = AsnConvert.parse(contentInfo.content, asn1Cms.SignedData);\r\n        const obj = new TextObject(\"X509Certificates\", {\r\n            \"Content Type\": OidSerializer.toString(contentInfo.contentType),\r\n            \"Content\": new TextObject(\"\", {\r\n                \"Version\": `${asn1Cms.CMSVersion[signedData.version]} (${signedData.version})`,\r\n                \"Certificates\": new TextObject(\"\", { \"Certificate\": this.map(o => o.toTextObject()) }),\r\n            }),\r\n        });\r\n        return obj;\r\n    }\r\n}\n\nclass X509ChainBuilder {\r\n    constructor(params = {}) {\r\n        this.certificates = [];\r\n        if (params.certificates) {\r\n            this.certificates = params.certificates;\r\n        }\r\n    }\r\n    async build(cert, crypto = cryptoProvider.get()) {\r\n        const chain = new X509Certificates(cert);\r\n        let current = cert;\r\n        while (current = await this.findIssuer(current, crypto)) {\r\n            const thumbprint = await current.getThumbprint(crypto);\r\n            for (const item of chain) {\r\n                const thumbprint2 = await item.getThumbprint(crypto);\r\n                if (isEqual(thumbprint, thumbprint2)) {\r\n                    throw new Error(\"Cannot build a certificate chain. Circular dependency.\");\r\n                }\r\n            }\r\n            chain.push(current);\r\n        }\r\n        return chain;\r\n    }\r\n    async findIssuer(cert, crypto = cryptoProvider.get()) {\r\n        if (!await cert.isSelfSigned(crypto)) {\r\n            const akiExt = cert.getExtension(asn1X509.id_ce_authorityKeyIdentifier);\r\n            for (const item of this.certificates) {\r\n                if (item.subject !== cert.issuer) {\r\n                    continue;\r\n                }\r\n                if (akiExt) {\r\n                    if (akiExt.keyId) {\r\n                        const skiExt = item.getExtension(asn1X509.id_ce_subjectKeyIdentifier);\r\n                        if (skiExt && skiExt.keyId !== akiExt.keyId) {\r\n                            continue;\r\n                        }\r\n                    }\r\n                    else if (akiExt.certId) {\r\n                        const sanExt = item.getExtension(asn1X509.id_ce_subjectAltName);\r\n                        if (sanExt &&\r\n                            !(akiExt.certId.serialNumber === item.serialNumber && isEqual(AsnConvert.serialize(akiExt.certId.name), AsnConvert.serialize(sanExt)))) {\r\n                            continue;\r\n                        }\r\n                    }\r\n                }\r\n                if (!await cert.verify({\r\n                    publicKey: await item.publicKey.export(crypto),\r\n                    signatureOnly: true,\r\n                }, crypto)) {\r\n                    continue;\r\n                }\r\n                return item;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n}\n\nclass X509CertificateGenerator {\r\n    static async createSelfSigned(params, crypto = cryptoProvider.get()) {\r\n        if (!params.keys.privateKey) {\r\n            throw new Error(\"Bad field 'keys' in 'params' argument. 'privateKey' is empty\");\r\n        }\r\n        if (!params.keys.publicKey) {\r\n            throw new Error(\"Bad field 'keys' in 'params' argument. 'privateKey' is empty\");\r\n        }\r\n        return this.create({\r\n            serialNumber: params.serialNumber,\r\n            subject: params.name,\r\n            issuer: params.name,\r\n            notBefore: params.notBefore,\r\n            notAfter: params.notAfter,\r\n            publicKey: params.keys.publicKey,\r\n            signingKey: params.keys.privateKey,\r\n            signingAlgorithm: params.signingAlgorithm,\r\n            extensions: params.extensions,\r\n        }, crypto);\r\n    }\r\n    static async create(params, crypto = cryptoProvider.get()) {\r\n        var _a;\r\n        let spki;\r\n        if (params.publicKey instanceof PublicKey) {\r\n            spki = params.publicKey.rawData;\r\n        }\r\n        else if (\"publicKey\" in params.publicKey) {\r\n            spki = params.publicKey.publicKey.rawData;\r\n        }\r\n        else if (BufferSourceConverter.isBufferSource(params.publicKey)) {\r\n            spki = params.publicKey;\r\n        }\r\n        else {\r\n            spki = await crypto.subtle.exportKey(\"spki\", params.publicKey);\r\n        }\r\n        const asnX509 = new asn1X509.Certificate({\r\n            tbsCertificate: new asn1X509.TBSCertificate({\r\n                version: asn1X509.Version.v3,\r\n                serialNumber: Convert.FromHex(params.serialNumber),\r\n                validity: new asn1X509.Validity({\r\n                    notBefore: params.notBefore,\r\n                    notAfter: params.notAfter,\r\n                }),\r\n                extensions: new asn1X509.Extensions(((_a = params.extensions) === null || _a === void 0 ? void 0 : _a.map(o => AsnConvert.parse(o.rawData, asn1X509.Extension))) || []),\r\n                subjectPublicKeyInfo: AsnConvert.parse(spki, asn1X509.SubjectPublicKeyInfo),\r\n            }),\r\n        });\r\n        if (params.subject) {\r\n            const name = params.subject instanceof Name\r\n                ? params.subject\r\n                : new Name(params.subject);\r\n            asnX509.tbsCertificate.subject = AsnConvert.parse(name.toArrayBuffer(), asn1X509.Name);\r\n        }\r\n        if (params.issuer) {\r\n            const name = params.issuer instanceof Name\r\n                ? params.issuer\r\n                : new Name(params.issuer);\r\n            asnX509.tbsCertificate.issuer = AsnConvert.parse(name.toArrayBuffer(), asn1X509.Name);\r\n        }\r\n        const signatureAlgorithm = (\"signingKey\" in params)\r\n            ? { ...params.signingAlgorithm, ...params.signingKey.algorithm }\r\n            : params.publicKey.algorithm;\r\n        const algProv = container.resolve(diAlgorithmProvider);\r\n        asnX509.tbsCertificate.signature = asnX509.signatureAlgorithm = algProv.toAsnAlgorithm(signatureAlgorithm);\r\n        const tbs = AsnConvert.serialize(asnX509.tbsCertificate);\r\n        const signatureValue = (\"signingKey\" in params)\r\n            ? await crypto.subtle.sign(signatureAlgorithm, params.signingKey, tbs)\r\n            : params.signature;\r\n        const signatureFormatters = container.resolveAll(diAsnSignatureFormatter).reverse();\r\n        let asnSignature = null;\r\n        for (const signatureFormatter of signatureFormatters) {\r\n            asnSignature = signatureFormatter.toAsnSignature(signatureAlgorithm, signatureValue);\r\n            if (asnSignature) {\r\n                break;\r\n            }\r\n        }\r\n        if (!asnSignature) {\r\n            throw Error(\"Cannot convert ASN.1 signature value to WebCrypto format\");\r\n        }\r\n        asnX509.signatureValue = asnSignature;\r\n        return new X509Certificate(AsnConvert.serialize(asnX509));\r\n    }\r\n}\n\nvar X509CrlReason;\r\n(function (X509CrlReason) {\r\n    X509CrlReason[X509CrlReason[\"unspecified\"] = 0] = \"unspecified\";\r\n    X509CrlReason[X509CrlReason[\"keyCompromise\"] = 1] = \"keyCompromise\";\r\n    X509CrlReason[X509CrlReason[\"cACompromise\"] = 2] = \"cACompromise\";\r\n    X509CrlReason[X509CrlReason[\"affiliationChanged\"] = 3] = \"affiliationChanged\";\r\n    X509CrlReason[X509CrlReason[\"superseded\"] = 4] = \"superseded\";\r\n    X509CrlReason[X509CrlReason[\"cessationOfOperation\"] = 5] = \"cessationOfOperation\";\r\n    X509CrlReason[X509CrlReason[\"certificateHold\"] = 6] = \"certificateHold\";\r\n    X509CrlReason[X509CrlReason[\"removeFromCRL\"] = 8] = \"removeFromCRL\";\r\n    X509CrlReason[X509CrlReason[\"privilegeWithdrawn\"] = 9] = \"privilegeWithdrawn\";\r\n    X509CrlReason[X509CrlReason[\"aACompromise\"] = 10] = \"aACompromise\";\r\n})(X509CrlReason || (X509CrlReason = {}));\r\nclass X509CrlEntry extends AsnData {\r\n    constructor(...args) {\r\n        let raw;\r\n        if (BufferSourceConverter.isBufferSource(args[0])) {\r\n            raw = BufferSourceConverter.toArrayBuffer(args[0]);\r\n        }\r\n        else {\r\n            raw = AsnConvert.serialize(new RevokedCertificate({\r\n                userCertificate: args[0],\r\n                revocationDate: new Time(args[1]),\r\n                crlEntryExtensions: args[2],\r\n            }));\r\n        }\r\n        super(raw, RevokedCertificate);\r\n    }\r\n    onInit(asn) {\r\n        this.serialNumber = Convert.ToHex(asn.userCertificate);\r\n        this.revocationDate = asn.revocationDate.getTime();\r\n        this.extensions = [];\r\n        if (asn.crlEntryExtensions) {\r\n            this.extensions = asn.crlEntryExtensions.map((o) => {\r\n                const extension = ExtensionFactory.create(AsnConvert.serialize(o));\r\n                switch (extension.type) {\r\n                    case id_ce_cRLReasons:\r\n                        this.reason = AsnConvert.parse(extension.value, CRLReason).reason;\r\n                        break;\r\n                    case id_ce_invalidityDate:\r\n                        this.invalidity = AsnConvert.parse(extension.value, InvalidityDate).value;\r\n                        break;\r\n                }\r\n                return extension;\r\n            });\r\n        }\r\n    }\r\n}\n\nclass X509Crl extends PemData {\r\n    constructor(param) {\r\n        if (PemData.isAsnEncoded(param)) {\r\n            super(param, CertificateList);\r\n        }\r\n        else {\r\n            super(param);\r\n        }\r\n        this.tag = PemConverter.CrlTag;\r\n    }\r\n    onInit(asn) {\r\n        var _a, _b;\r\n        const tbs = asn.tbsCertList;\r\n        this.tbs = AsnConvert.serialize(tbs);\r\n        this.version = tbs.version;\r\n        const algProv = container.resolve(diAlgorithmProvider);\r\n        this.signatureAlgorithm = algProv.toWebAlgorithm(asn.signatureAlgorithm);\r\n        this.tbsCertListSignatureAlgorithm = tbs.signature;\r\n        this.certListSignatureAlgorithm = asn.signatureAlgorithm;\r\n        this.signature = asn.signature;\r\n        this.issuerName = new Name(tbs.issuer);\r\n        this.issuer = this.issuerName.toString();\r\n        const thisUpdate = tbs.thisUpdate.getTime();\r\n        if (!thisUpdate) {\r\n            throw new Error(\"Cannot get 'thisUpdate' value\");\r\n        }\r\n        this.thisUpdate = thisUpdate;\r\n        const nextUpdate = (_a = tbs.nextUpdate) === null || _a === void 0 ? void 0 : _a.getTime();\r\n        this.nextUpdate = nextUpdate;\r\n        this.entries = ((_b = tbs.revokedCertificates) === null || _b === void 0 ? void 0 : _b.map(o => new X509CrlEntry(AsnConvert.serialize(o)))) || [];\r\n        this.extensions = [];\r\n        if (tbs.crlExtensions) {\r\n            this.extensions = tbs.crlExtensions.map((o) => ExtensionFactory.create(AsnConvert.serialize(o)));\r\n        }\r\n    }\r\n    getExtension(type) {\r\n        for (const ext of this.extensions) {\r\n            if (typeof type === \"string\") {\r\n                if (ext.type === type) {\r\n                    return ext;\r\n                }\r\n            }\r\n            else {\r\n                if (ext instanceof type) {\r\n                    return ext;\r\n                }\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    getExtensions(type) {\r\n        return this.extensions.filter((o) => {\r\n            if (typeof type === \"string\") {\r\n                return o.type === type;\r\n            }\r\n            else {\r\n                return o instanceof type;\r\n            }\r\n        });\r\n    }\r\n    async verify(params, crypto = cryptoProvider.get()) {\r\n        if (!this.certListSignatureAlgorithm.isEqual(this.tbsCertListSignatureAlgorithm)) {\r\n            throw new Error(\"algorithm identifier in the sequence tbsCertList and CertificateList mismatch\");\r\n        }\r\n        let keyAlgorithm;\r\n        let publicKey;\r\n        const paramsKey = params.publicKey;\r\n        try {\r\n            if (paramsKey instanceof X509Certificate) {\r\n                keyAlgorithm = {\r\n                    ...paramsKey.publicKey.algorithm,\r\n                    ...paramsKey.signatureAlgorithm,\r\n                };\r\n                publicKey = await paramsKey.publicKey.export(keyAlgorithm, [\"verify\"]);\r\n            }\r\n            else if (paramsKey instanceof PublicKey) {\r\n                keyAlgorithm = { ...paramsKey.algorithm, ...this.signature };\r\n                publicKey = await paramsKey.export(keyAlgorithm, [\"verify\"]);\r\n            }\r\n            else {\r\n                keyAlgorithm = { ...paramsKey.algorithm, ...this.signature };\r\n                publicKey = paramsKey;\r\n            }\r\n        }\r\n        catch (e) {\r\n            return false;\r\n        }\r\n        const signatureFormatters = container.resolveAll(diAsnSignatureFormatter).reverse();\r\n        let signature = null;\r\n        for (const signatureFormatter of signatureFormatters) {\r\n            signature = signatureFormatter.toWebSignature(keyAlgorithm, this.signature);\r\n            if (signature) {\r\n                break;\r\n            }\r\n        }\r\n        if (!signature) {\r\n            throw Error(\"Cannot convert ASN.1 signature value to WebCrypto format\");\r\n        }\r\n        return await crypto.subtle.verify(this.signatureAlgorithm, publicKey, signature, this.tbs);\r\n    }\r\n    async getThumbprint(...args) {\r\n        let crypto;\r\n        let algorithm = \"SHA-1\";\r\n        if (args[0]) {\r\n            if (!args[0].subtle) {\r\n                algorithm = args[0] || algorithm;\r\n                crypto = args[1];\r\n            }\r\n            else {\r\n                crypto = args[0];\r\n            }\r\n        }\r\n        crypto !== null && crypto !== void 0 ? crypto : (crypto = cryptoProvider.get());\r\n        return await crypto.subtle.digest(algorithm, this.rawData);\r\n    }\r\n    findRevoked(certOrSerialNumber) {\r\n        const serialNumber = typeof certOrSerialNumber === \"string\" ? certOrSerialNumber : certOrSerialNumber.serialNumber;\r\n        for (const entry of this.entries) {\r\n            if (entry.serialNumber === serialNumber) {\r\n                return entry;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n}\n\nclass X509CrlGenerator {\r\n    static async create(params, crypto = cryptoProvider.get()) {\r\n        var _a;\r\n        const name = params.issuer instanceof Name\r\n            ? params.issuer\r\n            : new Name(params.issuer);\r\n        const asnX509Crl = new asn1X509.CertificateList({\r\n            tbsCertList: new asn1X509.TBSCertList({\r\n                version: asn1X509.Version.v2,\r\n                issuer: AsnConvert.parse(name.toArrayBuffer(), asn1X509.Name),\r\n                thisUpdate: new Time(params.thisUpdate || new Date()),\r\n            }),\r\n        });\r\n        if (params.nextUpdate) {\r\n            asnX509Crl.tbsCertList.nextUpdate = new Time(params.nextUpdate);\r\n        }\r\n        if (params.extensions && params.extensions.length) {\r\n            asnX509Crl.tbsCertList.crlExtensions = new asn1X509.Extensions(params.extensions.map(o => AsnConvert.parse(o.rawData, asn1X509.Extension)) || []);\r\n        }\r\n        if (params.entries && params.entries.length) {\r\n            asnX509Crl.tbsCertList.revokedCertificates = [];\r\n            for (const entry of params.entries) {\r\n                const userCertificate = PemData.toArrayBuffer(entry.serialNumber);\r\n                const index = asnX509Crl.tbsCertList.revokedCertificates.findIndex(cert => isEqual(cert.userCertificate, userCertificate));\r\n                if (index > -1) {\r\n                    throw new Error(`Certificate serial number ${entry.serialNumber} already exists in tbsCertList`);\r\n                }\r\n                const revokedCert = new RevokedCertificate({\r\n                    userCertificate: userCertificate,\r\n                    revocationDate: new Time(entry.revocationDate || new Date())\r\n                });\r\n                if (\"extensions\" in entry && ((_a = entry.extensions) === null || _a === void 0 ? void 0 : _a.length)) {\r\n                    revokedCert.crlEntryExtensions = entry.extensions.map(o => AsnConvert.parse(o.rawData, asn1X509.Extension));\r\n                }\r\n                else {\r\n                    revokedCert.crlEntryExtensions = [];\r\n                }\r\n                if (!(entry instanceof X509CrlEntry)) {\r\n                    if (entry.reason) {\r\n                        revokedCert.crlEntryExtensions.push(new asn1X509.Extension({\r\n                            extnID: asn1X509.id_ce_cRLReasons,\r\n                            critical: false,\r\n                            extnValue: new OctetString(AsnConvert.serialize(new asn1X509.CRLReason(entry.reason))),\r\n                        }));\r\n                    }\r\n                    if (entry.invalidity) {\r\n                        revokedCert.crlEntryExtensions.push(new asn1X509.Extension({\r\n                            extnID: asn1X509.id_ce_invalidityDate,\r\n                            critical: false,\r\n                            extnValue: new OctetString(AsnConvert.serialize(new asn1X509.InvalidityDate(entry.invalidity))),\r\n                        }));\r\n                    }\r\n                    if (entry.issuer) {\r\n                        const name = params.issuer instanceof Name\r\n                            ? params.issuer\r\n                            : new Name(params.issuer);\r\n                        revokedCert.crlEntryExtensions.push(new asn1X509.Extension({\r\n                            extnID: asn1X509.id_ce_certificateIssuer,\r\n                            critical: false,\r\n                            extnValue: new OctetString(AsnConvert.serialize(AsnConvert.parse(name.toArrayBuffer(), asn1X509.Name))),\r\n                        }));\r\n                    }\r\n                }\r\n                asnX509Crl.tbsCertList.revokedCertificates.push(revokedCert);\r\n            }\r\n        }\r\n        const signingAlgorithm = { ...params.signingAlgorithm, ...params.signingKey.algorithm };\r\n        const algProv = container.resolve(diAlgorithmProvider);\r\n        asnX509Crl.tbsCertList.signature = asnX509Crl.signatureAlgorithm = algProv.toAsnAlgorithm(signingAlgorithm);\r\n        const tbs = AsnConvert.serialize(asnX509Crl.tbsCertList);\r\n        const signature = await crypto.subtle.sign(signingAlgorithm, params.signingKey, tbs);\r\n        const signatureFormatters = container.resolveAll(diAsnSignatureFormatter).reverse();\r\n        let asnSignature = null;\r\n        for (const signatureFormatter of signatureFormatters) {\r\n            asnSignature = signatureFormatter.toAsnSignature(signingAlgorithm, signature);\r\n            if (asnSignature) {\r\n                break;\r\n            }\r\n        }\r\n        if (!asnSignature) {\r\n            throw Error(\"Cannot convert ASN.1 signature value to WebCrypto format\");\r\n        }\r\n        asnX509Crl.signature = asnSignature;\r\n        return new X509Crl(AsnConvert.serialize(asnX509Crl));\r\n    }\r\n}\n\nExtensionFactory.register(asn1X509.id_ce_basicConstraints, BasicConstraintsExtension);\r\nExtensionFactory.register(asn1X509.id_ce_extKeyUsage, ExtendedKeyUsageExtension);\r\nExtensionFactory.register(asn1X509.id_ce_keyUsage, KeyUsagesExtension);\r\nExtensionFactory.register(asn1X509.id_ce_subjectKeyIdentifier, SubjectKeyIdentifierExtension);\r\nExtensionFactory.register(asn1X509.id_ce_authorityKeyIdentifier, AuthorityKeyIdentifierExtension);\r\nExtensionFactory.register(asn1X509.id_ce_subjectAltName, SubjectAlternativeNameExtension);\r\nAttributeFactory.register(asnPkcs9.id_pkcs9_at_challengePassword, ChallengePasswordAttribute);\r\nAttributeFactory.register(asnPkcs9.id_pkcs9_at_extensionRequest, ExtensionsAttribute);\r\ncontainer.registerSingleton(diAsnSignatureFormatter, AsnDefaultSignatureFormatter);\r\ncontainer.registerSingleton(diAsnSignatureFormatter, AsnEcSignatureFormatter);\r\nAsnEcSignatureFormatter.namedCurveSize.set(\"P-256\", 32);\r\nAsnEcSignatureFormatter.namedCurveSize.set(\"K-256\", 32);\r\nAsnEcSignatureFormatter.namedCurveSize.set(\"P-384\", 48);\r\nAsnEcSignatureFormatter.namedCurveSize.set(\"P-521\", 66);\n\nexport { AlgorithmProvider, AsnData, AsnDefaultSignatureFormatter, AsnEcSignatureFormatter, Attribute, AttributeFactory, AuthorityKeyIdentifierExtension, BasicConstraintsExtension, CertificatePolicyExtension, ChallengePasswordAttribute, CryptoProvider, DefaultAlgorithmSerializer, EcAlgorithm, EdAlgorithm, ExtendedKeyUsage, ExtendedKeyUsageExtension, Extension, ExtensionFactory, ExtensionsAttribute, GeneralName, GeneralNames, KeyUsageFlags, KeyUsagesExtension, Name, NameIdentifier, OidSerializer, PemConverter, Pkcs10CertificateRequest, Pkcs10CertificateRequestGenerator, PublicKey, RsaAlgorithm, SubjectAlternativeNameExtension, SubjectKeyIdentifierExtension, TextConverter, TextObject, X509Certificate, X509CertificateGenerator, X509Certificates, X509ChainBuilder, X509Crl, X509CrlEntry, X509CrlGenerator, X509CrlReason, cryptoProvider, diAlgorithm, diAlgorithmProvider, diAsnSignatureFormatter, idEd25519, idEd448, idX25519, idX448 };\n","/*! MIT License. Copyright 2015-2018 Richard Moore <me@ricmoo.com>. See LICENSE.txt. */\n(function(root) {\n    \"use strict\";\n\n    function checkInt(value) {\n        return (parseInt(value) === value);\n    }\n\n    function checkInts(arrayish) {\n        if (!checkInt(arrayish.length)) { return false; }\n\n        for (var i = 0; i < arrayish.length; i++) {\n            if (!checkInt(arrayish[i]) || arrayish[i] < 0 || arrayish[i] > 255) {\n                return false;\n            }\n        }\n\n        return true;\n    }\n\n    function coerceArray(arg, copy) {\n\n        // ArrayBuffer view\n        if (arg.buffer && arg.name === 'Uint8Array') {\n\n            if (copy) {\n                if (arg.slice) {\n                    arg = arg.slice();\n                } else {\n                    arg = Array.prototype.slice.call(arg);\n                }\n            }\n\n            return arg;\n        }\n\n        // It's an array; check it is a valid representation of a byte\n        if (Array.isArray(arg)) {\n            if (!checkInts(arg)) {\n                throw new Error('Array contains invalid value: ' + arg);\n            }\n\n            return new Uint8Array(arg);\n        }\n\n        // Something else, but behaves like an array (maybe a Buffer? Arguments?)\n        if (checkInt(arg.length) && checkInts(arg)) {\n            return new Uint8Array(arg);\n        }\n\n        throw new Error('unsupported array-like object');\n    }\n\n    function createArray(length) {\n        return new Uint8Array(length);\n    }\n\n    function copyArray(sourceArray, targetArray, targetStart, sourceStart, sourceEnd) {\n        if (sourceStart != null || sourceEnd != null) {\n            if (sourceArray.slice) {\n                sourceArray = sourceArray.slice(sourceStart, sourceEnd);\n            } else {\n                sourceArray = Array.prototype.slice.call(sourceArray, sourceStart, sourceEnd);\n            }\n        }\n        targetArray.set(sourceArray, targetStart);\n    }\n\n\n\n    var convertUtf8 = (function() {\n        function toBytes(text) {\n            var result = [], i = 0;\n            text = encodeURI(text);\n            while (i < text.length) {\n                var c = text.charCodeAt(i++);\n\n                // if it is a % sign, encode the following 2 bytes as a hex value\n                if (c === 37) {\n                    result.push(parseInt(text.substr(i, 2), 16))\n                    i += 2;\n\n                // otherwise, just the actual byte\n                } else {\n                    result.push(c)\n                }\n            }\n\n            return coerceArray(result);\n        }\n\n        function fromBytes(bytes) {\n            var result = [], i = 0;\n\n            while (i < bytes.length) {\n                var c = bytes[i];\n\n                if (c < 128) {\n                    result.push(String.fromCharCode(c));\n                    i++;\n                } else if (c > 191 && c < 224) {\n                    result.push(String.fromCharCode(((c & 0x1f) << 6) | (bytes[i + 1] & 0x3f)));\n                    i += 2;\n                } else {\n                    result.push(String.fromCharCode(((c & 0x0f) << 12) | ((bytes[i + 1] & 0x3f) << 6) | (bytes[i + 2] & 0x3f)));\n                    i += 3;\n                }\n            }\n\n            return result.join('');\n        }\n\n        return {\n            toBytes: toBytes,\n            fromBytes: fromBytes,\n        }\n    })();\n\n    var convertHex = (function() {\n        function toBytes(text) {\n            var result = [];\n            for (var i = 0; i < text.length; i += 2) {\n                result.push(parseInt(text.substr(i, 2), 16));\n            }\n\n            return result;\n        }\n\n        // http://ixti.net/development/javascript/2011/11/11/base64-encodedecode-of-utf8-in-browser-with-js.html\n        var Hex = '0123456789abcdef';\n\n        function fromBytes(bytes) {\n                var result = [];\n                for (var i = 0; i < bytes.length; i++) {\n                    var v = bytes[i];\n                    result.push(Hex[(v & 0xf0) >> 4] + Hex[v & 0x0f]);\n                }\n                return result.join('');\n        }\n\n        return {\n            toBytes: toBytes,\n            fromBytes: fromBytes,\n        }\n    })();\n\n\n    // Number of rounds by keysize\n    var numberOfRounds = {16: 10, 24: 12, 32: 14}\n\n    // Round constant words\n    var rcon = [0x01, 0x02, 0x04, 0x08, 0x10, 0x20, 0x40, 0x80, 0x1b, 0x36, 0x6c, 0xd8, 0xab, 0x4d, 0x9a, 0x2f, 0x5e, 0xbc, 0x63, 0xc6, 0x97, 0x35, 0x6a, 0xd4, 0xb3, 0x7d, 0xfa, 0xef, 0xc5, 0x91];\n\n    // S-box and Inverse S-box (S is for Substitution)\n    var S = [0x63, 0x7c, 0x77, 0x7b, 0xf2, 0x6b, 0x6f, 0xc5, 0x30, 0x01, 0x67, 0x2b, 0xfe, 0xd7, 0xab, 0x76, 0xca, 0x82, 0xc9, 0x7d, 0xfa, 0x59, 0x47, 0xf0, 0xad, 0xd4, 0xa2, 0xaf, 0x9c, 0xa4, 0x72, 0xc0, 0xb7, 0xfd, 0x93, 0x26, 0x36, 0x3f, 0xf7, 0xcc, 0x34, 0xa5, 0xe5, 0xf1, 0x71, 0xd8, 0x31, 0x15, 0x04, 0xc7, 0x23, 0xc3, 0x18, 0x96, 0x05, 0x9a, 0x07, 0x12, 0x80, 0xe2, 0xeb, 0x27, 0xb2, 0x75, 0x09, 0x83, 0x2c, 0x1a, 0x1b, 0x6e, 0x5a, 0xa0, 0x52, 0x3b, 0xd6, 0xb3, 0x29, 0xe3, 0x2f, 0x84, 0x53, 0xd1, 0x00, 0xed, 0x20, 0xfc, 0xb1, 0x5b, 0x6a, 0xcb, 0xbe, 0x39, 0x4a, 0x4c, 0x58, 0xcf, 0xd0, 0xef, 0xaa, 0xfb, 0x43, 0x4d, 0x33, 0x85, 0x45, 0xf9, 0x02, 0x7f, 0x50, 0x3c, 0x9f, 0xa8, 0x51, 0xa3, 0x40, 0x8f, 0x92, 0x9d, 0x38, 0xf5, 0xbc, 0xb6, 0xda, 0x21, 0x10, 0xff, 0xf3, 0xd2, 0xcd, 0x0c, 0x13, 0xec, 0x5f, 0x97, 0x44, 0x17, 0xc4, 0xa7, 0x7e, 0x3d, 0x64, 0x5d, 0x19, 0x73, 0x60, 0x81, 0x4f, 0xdc, 0x22, 0x2a, 0x90, 0x88, 0x46, 0xee, 0xb8, 0x14, 0xde, 0x5e, 0x0b, 0xdb, 0xe0, 0x32, 0x3a, 0x0a, 0x49, 0x06, 0x24, 0x5c, 0xc2, 0xd3, 0xac, 0x62, 0x91, 0x95, 0xe4, 0x79, 0xe7, 0xc8, 0x37, 0x6d, 0x8d, 0xd5, 0x4e, 0xa9, 0x6c, 0x56, 0xf4, 0xea, 0x65, 0x7a, 0xae, 0x08, 0xba, 0x78, 0x25, 0x2e, 0x1c, 0xa6, 0xb4, 0xc6, 0xe8, 0xdd, 0x74, 0x1f, 0x4b, 0xbd, 0x8b, 0x8a, 0x70, 0x3e, 0xb5, 0x66, 0x48, 0x03, 0xf6, 0x0e, 0x61, 0x35, 0x57, 0xb9, 0x86, 0xc1, 0x1d, 0x9e, 0xe1, 0xf8, 0x98, 0x11, 0x69, 0xd9, 0x8e, 0x94, 0x9b, 0x1e, 0x87, 0xe9, 0xce, 0x55, 0x28, 0xdf, 0x8c, 0xa1, 0x89, 0x0d, 0xbf, 0xe6, 0x42, 0x68, 0x41, 0x99, 0x2d, 0x0f, 0xb0, 0x54, 0xbb, 0x16];\n    var Si =[0x52, 0x09, 0x6a, 0xd5, 0x30, 0x36, 0xa5, 0x38, 0xbf, 0x40, 0xa3, 0x9e, 0x81, 0xf3, 0xd7, 0xfb, 0x7c, 0xe3, 0x39, 0x82, 0x9b, 0x2f, 0xff, 0x87, 0x34, 0x8e, 0x43, 0x44, 0xc4, 0xde, 0xe9, 0xcb, 0x54, 0x7b, 0x94, 0x32, 0xa6, 0xc2, 0x23, 0x3d, 0xee, 0x4c, 0x95, 0x0b, 0x42, 0xfa, 0xc3, 0x4e, 0x08, 0x2e, 0xa1, 0x66, 0x28, 0xd9, 0x24, 0xb2, 0x76, 0x5b, 0xa2, 0x49, 0x6d, 0x8b, 0xd1, 0x25, 0x72, 0xf8, 0xf6, 0x64, 0x86, 0x68, 0x98, 0x16, 0xd4, 0xa4, 0x5c, 0xcc, 0x5d, 0x65, 0xb6, 0x92, 0x6c, 0x70, 0x48, 0x50, 0xfd, 0xed, 0xb9, 0xda, 0x5e, 0x15, 0x46, 0x57, 0xa7, 0x8d, 0x9d, 0x84, 0x90, 0xd8, 0xab, 0x00, 0x8c, 0xbc, 0xd3, 0x0a, 0xf7, 0xe4, 0x58, 0x05, 0xb8, 0xb3, 0x45, 0x06, 0xd0, 0x2c, 0x1e, 0x8f, 0xca, 0x3f, 0x0f, 0x02, 0xc1, 0xaf, 0xbd, 0x03, 0x01, 0x13, 0x8a, 0x6b, 0x3a, 0x91, 0x11, 0x41, 0x4f, 0x67, 0xdc, 0xea, 0x97, 0xf2, 0xcf, 0xce, 0xf0, 0xb4, 0xe6, 0x73, 0x96, 0xac, 0x74, 0x22, 0xe7, 0xad, 0x35, 0x85, 0xe2, 0xf9, 0x37, 0xe8, 0x1c, 0x75, 0xdf, 0x6e, 0x47, 0xf1, 0x1a, 0x71, 0x1d, 0x29, 0xc5, 0x89, 0x6f, 0xb7, 0x62, 0x0e, 0xaa, 0x18, 0xbe, 0x1b, 0xfc, 0x56, 0x3e, 0x4b, 0xc6, 0xd2, 0x79, 0x20, 0x9a, 0xdb, 0xc0, 0xfe, 0x78, 0xcd, 0x5a, 0xf4, 0x1f, 0xdd, 0xa8, 0x33, 0x88, 0x07, 0xc7, 0x31, 0xb1, 0x12, 0x10, 0x59, 0x27, 0x80, 0xec, 0x5f, 0x60, 0x51, 0x7f, 0xa9, 0x19, 0xb5, 0x4a, 0x0d, 0x2d, 0xe5, 0x7a, 0x9f, 0x93, 0xc9, 0x9c, 0xef, 0xa0, 0xe0, 0x3b, 0x4d, 0xae, 0x2a, 0xf5, 0xb0, 0xc8, 0xeb, 0xbb, 0x3c, 0x83, 0x53, 0x99, 0x61, 0x17, 0x2b, 0x04, 0x7e, 0xba, 0x77, 0xd6, 0x26, 0xe1, 0x69, 0x14, 0x63, 0x55, 0x21, 0x0c, 0x7d];\n\n    // Transformations for encryption\n    var T1 = [0xc66363a5, 0xf87c7c84, 0xee777799, 0xf67b7b8d, 0xfff2f20d, 0xd66b6bbd, 0xde6f6fb1, 0x91c5c554, 0x60303050, 0x02010103, 0xce6767a9, 0x562b2b7d, 0xe7fefe19, 0xb5d7d762, 0x4dababe6, 0xec76769a, 0x8fcaca45, 0x1f82829d, 0x89c9c940, 0xfa7d7d87, 0xeffafa15, 0xb25959eb, 0x8e4747c9, 0xfbf0f00b, 0x41adadec, 0xb3d4d467, 0x5fa2a2fd, 0x45afafea, 0x239c9cbf, 0x53a4a4f7, 0xe4727296, 0x9bc0c05b, 0x75b7b7c2, 0xe1fdfd1c, 0x3d9393ae, 0x4c26266a, 0x6c36365a, 0x7e3f3f41, 0xf5f7f702, 0x83cccc4f, 0x6834345c, 0x51a5a5f4, 0xd1e5e534, 0xf9f1f108, 0xe2717193, 0xabd8d873, 0x62313153, 0x2a15153f, 0x0804040c, 0x95c7c752, 0x46232365, 0x9dc3c35e, 0x30181828, 0x379696a1, 0x0a05050f, 0x2f9a9ab5, 0x0e070709, 0x24121236, 0x1b80809b, 0xdfe2e23d, 0xcdebeb26, 0x4e272769, 0x7fb2b2cd, 0xea75759f, 0x1209091b, 0x1d83839e, 0x582c2c74, 0x341a1a2e, 0x361b1b2d, 0xdc6e6eb2, 0xb45a5aee, 0x5ba0a0fb, 0xa45252f6, 0x763b3b4d, 0xb7d6d661, 0x7db3b3ce, 0x5229297b, 0xdde3e33e, 0x5e2f2f71, 0x13848497, 0xa65353f5, 0xb9d1d168, 0x00000000, 0xc1eded2c, 0x40202060, 0xe3fcfc1f, 0x79b1b1c8, 0xb65b5bed, 0xd46a6abe, 0x8dcbcb46, 0x67bebed9, 0x7239394b, 0x944a4ade, 0x984c4cd4, 0xb05858e8, 0x85cfcf4a, 0xbbd0d06b, 0xc5efef2a, 0x4faaaae5, 0xedfbfb16, 0x864343c5, 0x9a4d4dd7, 0x66333355, 0x11858594, 0x8a4545cf, 0xe9f9f910, 0x04020206, 0xfe7f7f81, 0xa05050f0, 0x783c3c44, 0x259f9fba, 0x4ba8a8e3, 0xa25151f3, 0x5da3a3fe, 0x804040c0, 0x058f8f8a, 0x3f9292ad, 0x219d9dbc, 0x70383848, 0xf1f5f504, 0x63bcbcdf, 0x77b6b6c1, 0xafdada75, 0x42212163, 0x20101030, 0xe5ffff1a, 0xfdf3f30e, 0xbfd2d26d, 0x81cdcd4c, 0x180c0c14, 0x26131335, 0xc3ecec2f, 0xbe5f5fe1, 0x359797a2, 0x884444cc, 0x2e171739, 0x93c4c457, 0x55a7a7f2, 0xfc7e7e82, 0x7a3d3d47, 0xc86464ac, 0xba5d5de7, 0x3219192b, 0xe6737395, 0xc06060a0, 0x19818198, 0x9e4f4fd1, 0xa3dcdc7f, 0x44222266, 0x542a2a7e, 0x3b9090ab, 0x0b888883, 0x8c4646ca, 0xc7eeee29, 0x6bb8b8d3, 0x2814143c, 0xa7dede79, 0xbc5e5ee2, 0x160b0b1d, 0xaddbdb76, 0xdbe0e03b, 0x64323256, 0x743a3a4e, 0x140a0a1e, 0x924949db, 0x0c06060a, 0x4824246c, 0xb85c5ce4, 0x9fc2c25d, 0xbdd3d36e, 0x43acacef, 0xc46262a6, 0x399191a8, 0x319595a4, 0xd3e4e437, 0xf279798b, 0xd5e7e732, 0x8bc8c843, 0x6e373759, 0xda6d6db7, 0x018d8d8c, 0xb1d5d564, 0x9c4e4ed2, 0x49a9a9e0, 0xd86c6cb4, 0xac5656fa, 0xf3f4f407, 0xcfeaea25, 0xca6565af, 0xf47a7a8e, 0x47aeaee9, 0x10080818, 0x6fbabad5, 0xf0787888, 0x4a25256f, 0x5c2e2e72, 0x381c1c24, 0x57a6a6f1, 0x73b4b4c7, 0x97c6c651, 0xcbe8e823, 0xa1dddd7c, 0xe874749c, 0x3e1f1f21, 0x964b4bdd, 0x61bdbddc, 0x0d8b8b86, 0x0f8a8a85, 0xe0707090, 0x7c3e3e42, 0x71b5b5c4, 0xcc6666aa, 0x904848d8, 0x06030305, 0xf7f6f601, 0x1c0e0e12, 0xc26161a3, 0x6a35355f, 0xae5757f9, 0x69b9b9d0, 0x17868691, 0x99c1c158, 0x3a1d1d27, 0x279e9eb9, 0xd9e1e138, 0xebf8f813, 0x2b9898b3, 0x22111133, 0xd26969bb, 0xa9d9d970, 0x078e8e89, 0x339494a7, 0x2d9b9bb6, 0x3c1e1e22, 0x15878792, 0xc9e9e920, 0x87cece49, 0xaa5555ff, 0x50282878, 0xa5dfdf7a, 0x038c8c8f, 0x59a1a1f8, 0x09898980, 0x1a0d0d17, 0x65bfbfda, 0xd7e6e631, 0x844242c6, 0xd06868b8, 0x824141c3, 0x299999b0, 0x5a2d2d77, 0x1e0f0f11, 0x7bb0b0cb, 0xa85454fc, 0x6dbbbbd6, 0x2c16163a];\n    var T2 = [0xa5c66363, 0x84f87c7c, 0x99ee7777, 0x8df67b7b, 0x0dfff2f2, 0xbdd66b6b, 0xb1de6f6f, 0x5491c5c5, 0x50603030, 0x03020101, 0xa9ce6767, 0x7d562b2b, 0x19e7fefe, 0x62b5d7d7, 0xe64dabab, 0x9aec7676, 0x458fcaca, 0x9d1f8282, 0x4089c9c9, 0x87fa7d7d, 0x15effafa, 0xebb25959, 0xc98e4747, 0x0bfbf0f0, 0xec41adad, 0x67b3d4d4, 0xfd5fa2a2, 0xea45afaf, 0xbf239c9c, 0xf753a4a4, 0x96e47272, 0x5b9bc0c0, 0xc275b7b7, 0x1ce1fdfd, 0xae3d9393, 0x6a4c2626, 0x5a6c3636, 0x417e3f3f, 0x02f5f7f7, 0x4f83cccc, 0x5c683434, 0xf451a5a5, 0x34d1e5e5, 0x08f9f1f1, 0x93e27171, 0x73abd8d8, 0x53623131, 0x3f2a1515, 0x0c080404, 0x5295c7c7, 0x65462323, 0x5e9dc3c3, 0x28301818, 0xa1379696, 0x0f0a0505, 0xb52f9a9a, 0x090e0707, 0x36241212, 0x9b1b8080, 0x3ddfe2e2, 0x26cdebeb, 0x694e2727, 0xcd7fb2b2, 0x9fea7575, 0x1b120909, 0x9e1d8383, 0x74582c2c, 0x2e341a1a, 0x2d361b1b, 0xb2dc6e6e, 0xeeb45a5a, 0xfb5ba0a0, 0xf6a45252, 0x4d763b3b, 0x61b7d6d6, 0xce7db3b3, 0x7b522929, 0x3edde3e3, 0x715e2f2f, 0x97138484, 0xf5a65353, 0x68b9d1d1, 0x00000000, 0x2cc1eded, 0x60402020, 0x1fe3fcfc, 0xc879b1b1, 0xedb65b5b, 0xbed46a6a, 0x468dcbcb, 0xd967bebe, 0x4b723939, 0xde944a4a, 0xd4984c4c, 0xe8b05858, 0x4a85cfcf, 0x6bbbd0d0, 0x2ac5efef, 0xe54faaaa, 0x16edfbfb, 0xc5864343, 0xd79a4d4d, 0x55663333, 0x94118585, 0xcf8a4545, 0x10e9f9f9, 0x06040202, 0x81fe7f7f, 0xf0a05050, 0x44783c3c, 0xba259f9f, 0xe34ba8a8, 0xf3a25151, 0xfe5da3a3, 0xc0804040, 0x8a058f8f, 0xad3f9292, 0xbc219d9d, 0x48703838, 0x04f1f5f5, 0xdf63bcbc, 0xc177b6b6, 0x75afdada, 0x63422121, 0x30201010, 0x1ae5ffff, 0x0efdf3f3, 0x6dbfd2d2, 0x4c81cdcd, 0x14180c0c, 0x35261313, 0x2fc3ecec, 0xe1be5f5f, 0xa2359797, 0xcc884444, 0x392e1717, 0x5793c4c4, 0xf255a7a7, 0x82fc7e7e, 0x477a3d3d, 0xacc86464, 0xe7ba5d5d, 0x2b321919, 0x95e67373, 0xa0c06060, 0x98198181, 0xd19e4f4f, 0x7fa3dcdc, 0x66442222, 0x7e542a2a, 0xab3b9090, 0x830b8888, 0xca8c4646, 0x29c7eeee, 0xd36bb8b8, 0x3c281414, 0x79a7dede, 0xe2bc5e5e, 0x1d160b0b, 0x76addbdb, 0x3bdbe0e0, 0x56643232, 0x4e743a3a, 0x1e140a0a, 0xdb924949, 0x0a0c0606, 0x6c482424, 0xe4b85c5c, 0x5d9fc2c2, 0x6ebdd3d3, 0xef43acac, 0xa6c46262, 0xa8399191, 0xa4319595, 0x37d3e4e4, 0x8bf27979, 0x32d5e7e7, 0x438bc8c8, 0x596e3737, 0xb7da6d6d, 0x8c018d8d, 0x64b1d5d5, 0xd29c4e4e, 0xe049a9a9, 0xb4d86c6c, 0xfaac5656, 0x07f3f4f4, 0x25cfeaea, 0xafca6565, 0x8ef47a7a, 0xe947aeae, 0x18100808, 0xd56fbaba, 0x88f07878, 0x6f4a2525, 0x725c2e2e, 0x24381c1c, 0xf157a6a6, 0xc773b4b4, 0x5197c6c6, 0x23cbe8e8, 0x7ca1dddd, 0x9ce87474, 0x213e1f1f, 0xdd964b4b, 0xdc61bdbd, 0x860d8b8b, 0x850f8a8a, 0x90e07070, 0x427c3e3e, 0xc471b5b5, 0xaacc6666, 0xd8904848, 0x05060303, 0x01f7f6f6, 0x121c0e0e, 0xa3c26161, 0x5f6a3535, 0xf9ae5757, 0xd069b9b9, 0x91178686, 0x5899c1c1, 0x273a1d1d, 0xb9279e9e, 0x38d9e1e1, 0x13ebf8f8, 0xb32b9898, 0x33221111, 0xbbd26969, 0x70a9d9d9, 0x89078e8e, 0xa7339494, 0xb62d9b9b, 0x223c1e1e, 0x92158787, 0x20c9e9e9, 0x4987cece, 0xffaa5555, 0x78502828, 0x7aa5dfdf, 0x8f038c8c, 0xf859a1a1, 0x80098989, 0x171a0d0d, 0xda65bfbf, 0x31d7e6e6, 0xc6844242, 0xb8d06868, 0xc3824141, 0xb0299999, 0x775a2d2d, 0x111e0f0f, 0xcb7bb0b0, 0xfca85454, 0xd66dbbbb, 0x3a2c1616];\n    var T3 = [0x63a5c663, 0x7c84f87c, 0x7799ee77, 0x7b8df67b, 0xf20dfff2, 0x6bbdd66b, 0x6fb1de6f, 0xc55491c5, 0x30506030, 0x01030201, 0x67a9ce67, 0x2b7d562b, 0xfe19e7fe, 0xd762b5d7, 0xabe64dab, 0x769aec76, 0xca458fca, 0x829d1f82, 0xc94089c9, 0x7d87fa7d, 0xfa15effa, 0x59ebb259, 0x47c98e47, 0xf00bfbf0, 0xadec41ad, 0xd467b3d4, 0xa2fd5fa2, 0xafea45af, 0x9cbf239c, 0xa4f753a4, 0x7296e472, 0xc05b9bc0, 0xb7c275b7, 0xfd1ce1fd, 0x93ae3d93, 0x266a4c26, 0x365a6c36, 0x3f417e3f, 0xf702f5f7, 0xcc4f83cc, 0x345c6834, 0xa5f451a5, 0xe534d1e5, 0xf108f9f1, 0x7193e271, 0xd873abd8, 0x31536231, 0x153f2a15, 0x040c0804, 0xc75295c7, 0x23654623, 0xc35e9dc3, 0x18283018, 0x96a13796, 0x050f0a05, 0x9ab52f9a, 0x07090e07, 0x12362412, 0x809b1b80, 0xe23ddfe2, 0xeb26cdeb, 0x27694e27, 0xb2cd7fb2, 0x759fea75, 0x091b1209, 0x839e1d83, 0x2c74582c, 0x1a2e341a, 0x1b2d361b, 0x6eb2dc6e, 0x5aeeb45a, 0xa0fb5ba0, 0x52f6a452, 0x3b4d763b, 0xd661b7d6, 0xb3ce7db3, 0x297b5229, 0xe33edde3, 0x2f715e2f, 0x84971384, 0x53f5a653, 0xd168b9d1, 0x00000000, 0xed2cc1ed, 0x20604020, 0xfc1fe3fc, 0xb1c879b1, 0x5bedb65b, 0x6abed46a, 0xcb468dcb, 0xbed967be, 0x394b7239, 0x4ade944a, 0x4cd4984c, 0x58e8b058, 0xcf4a85cf, 0xd06bbbd0, 0xef2ac5ef, 0xaae54faa, 0xfb16edfb, 0x43c58643, 0x4dd79a4d, 0x33556633, 0x85941185, 0x45cf8a45, 0xf910e9f9, 0x02060402, 0x7f81fe7f, 0x50f0a050, 0x3c44783c, 0x9fba259f, 0xa8e34ba8, 0x51f3a251, 0xa3fe5da3, 0x40c08040, 0x8f8a058f, 0x92ad3f92, 0x9dbc219d, 0x38487038, 0xf504f1f5, 0xbcdf63bc, 0xb6c177b6, 0xda75afda, 0x21634221, 0x10302010, 0xff1ae5ff, 0xf30efdf3, 0xd26dbfd2, 0xcd4c81cd, 0x0c14180c, 0x13352613, 0xec2fc3ec, 0x5fe1be5f, 0x97a23597, 0x44cc8844, 0x17392e17, 0xc45793c4, 0xa7f255a7, 0x7e82fc7e, 0x3d477a3d, 0x64acc864, 0x5de7ba5d, 0x192b3219, 0x7395e673, 0x60a0c060, 0x81981981, 0x4fd19e4f, 0xdc7fa3dc, 0x22664422, 0x2a7e542a, 0x90ab3b90, 0x88830b88, 0x46ca8c46, 0xee29c7ee, 0xb8d36bb8, 0x143c2814, 0xde79a7de, 0x5ee2bc5e, 0x0b1d160b, 0xdb76addb, 0xe03bdbe0, 0x32566432, 0x3a4e743a, 0x0a1e140a, 0x49db9249, 0x060a0c06, 0x246c4824, 0x5ce4b85c, 0xc25d9fc2, 0xd36ebdd3, 0xacef43ac, 0x62a6c462, 0x91a83991, 0x95a43195, 0xe437d3e4, 0x798bf279, 0xe732d5e7, 0xc8438bc8, 0x37596e37, 0x6db7da6d, 0x8d8c018d, 0xd564b1d5, 0x4ed29c4e, 0xa9e049a9, 0x6cb4d86c, 0x56faac56, 0xf407f3f4, 0xea25cfea, 0x65afca65, 0x7a8ef47a, 0xaee947ae, 0x08181008, 0xbad56fba, 0x7888f078, 0x256f4a25, 0x2e725c2e, 0x1c24381c, 0xa6f157a6, 0xb4c773b4, 0xc65197c6, 0xe823cbe8, 0xdd7ca1dd, 0x749ce874, 0x1f213e1f, 0x4bdd964b, 0xbddc61bd, 0x8b860d8b, 0x8a850f8a, 0x7090e070, 0x3e427c3e, 0xb5c471b5, 0x66aacc66, 0x48d89048, 0x03050603, 0xf601f7f6, 0x0e121c0e, 0x61a3c261, 0x355f6a35, 0x57f9ae57, 0xb9d069b9, 0x86911786, 0xc15899c1, 0x1d273a1d, 0x9eb9279e, 0xe138d9e1, 0xf813ebf8, 0x98b32b98, 0x11332211, 0x69bbd269, 0xd970a9d9, 0x8e89078e, 0x94a73394, 0x9bb62d9b, 0x1e223c1e, 0x87921587, 0xe920c9e9, 0xce4987ce, 0x55ffaa55, 0x28785028, 0xdf7aa5df, 0x8c8f038c, 0xa1f859a1, 0x89800989, 0x0d171a0d, 0xbfda65bf, 0xe631d7e6, 0x42c68442, 0x68b8d068, 0x41c38241, 0x99b02999, 0x2d775a2d, 0x0f111e0f, 0xb0cb7bb0, 0x54fca854, 0xbbd66dbb, 0x163a2c16];\n    var T4 = [0x6363a5c6, 0x7c7c84f8, 0x777799ee, 0x7b7b8df6, 0xf2f20dff, 0x6b6bbdd6, 0x6f6fb1de, 0xc5c55491, 0x30305060, 0x01010302, 0x6767a9ce, 0x2b2b7d56, 0xfefe19e7, 0xd7d762b5, 0xababe64d, 0x76769aec, 0xcaca458f, 0x82829d1f, 0xc9c94089, 0x7d7d87fa, 0xfafa15ef, 0x5959ebb2, 0x4747c98e, 0xf0f00bfb, 0xadadec41, 0xd4d467b3, 0xa2a2fd5f, 0xafafea45, 0x9c9cbf23, 0xa4a4f753, 0x727296e4, 0xc0c05b9b, 0xb7b7c275, 0xfdfd1ce1, 0x9393ae3d, 0x26266a4c, 0x36365a6c, 0x3f3f417e, 0xf7f702f5, 0xcccc4f83, 0x34345c68, 0xa5a5f451, 0xe5e534d1, 0xf1f108f9, 0x717193e2, 0xd8d873ab, 0x31315362, 0x15153f2a, 0x04040c08, 0xc7c75295, 0x23236546, 0xc3c35e9d, 0x18182830, 0x9696a137, 0x05050f0a, 0x9a9ab52f, 0x0707090e, 0x12123624, 0x80809b1b, 0xe2e23ddf, 0xebeb26cd, 0x2727694e, 0xb2b2cd7f, 0x75759fea, 0x09091b12, 0x83839e1d, 0x2c2c7458, 0x1a1a2e34, 0x1b1b2d36, 0x6e6eb2dc, 0x5a5aeeb4, 0xa0a0fb5b, 0x5252f6a4, 0x3b3b4d76, 0xd6d661b7, 0xb3b3ce7d, 0x29297b52, 0xe3e33edd, 0x2f2f715e, 0x84849713, 0x5353f5a6, 0xd1d168b9, 0x00000000, 0xeded2cc1, 0x20206040, 0xfcfc1fe3, 0xb1b1c879, 0x5b5bedb6, 0x6a6abed4, 0xcbcb468d, 0xbebed967, 0x39394b72, 0x4a4ade94, 0x4c4cd498, 0x5858e8b0, 0xcfcf4a85, 0xd0d06bbb, 0xefef2ac5, 0xaaaae54f, 0xfbfb16ed, 0x4343c586, 0x4d4dd79a, 0x33335566, 0x85859411, 0x4545cf8a, 0xf9f910e9, 0x02020604, 0x7f7f81fe, 0x5050f0a0, 0x3c3c4478, 0x9f9fba25, 0xa8a8e34b, 0x5151f3a2, 0xa3a3fe5d, 0x4040c080, 0x8f8f8a05, 0x9292ad3f, 0x9d9dbc21, 0x38384870, 0xf5f504f1, 0xbcbcdf63, 0xb6b6c177, 0xdada75af, 0x21216342, 0x10103020, 0xffff1ae5, 0xf3f30efd, 0xd2d26dbf, 0xcdcd4c81, 0x0c0c1418, 0x13133526, 0xecec2fc3, 0x5f5fe1be, 0x9797a235, 0x4444cc88, 0x1717392e, 0xc4c45793, 0xa7a7f255, 0x7e7e82fc, 0x3d3d477a, 0x6464acc8, 0x5d5de7ba, 0x19192b32, 0x737395e6, 0x6060a0c0, 0x81819819, 0x4f4fd19e, 0xdcdc7fa3, 0x22226644, 0x2a2a7e54, 0x9090ab3b, 0x8888830b, 0x4646ca8c, 0xeeee29c7, 0xb8b8d36b, 0x14143c28, 0xdede79a7, 0x5e5ee2bc, 0x0b0b1d16, 0xdbdb76ad, 0xe0e03bdb, 0x32325664, 0x3a3a4e74, 0x0a0a1e14, 0x4949db92, 0x06060a0c, 0x24246c48, 0x5c5ce4b8, 0xc2c25d9f, 0xd3d36ebd, 0xacacef43, 0x6262a6c4, 0x9191a839, 0x9595a431, 0xe4e437d3, 0x79798bf2, 0xe7e732d5, 0xc8c8438b, 0x3737596e, 0x6d6db7da, 0x8d8d8c01, 0xd5d564b1, 0x4e4ed29c, 0xa9a9e049, 0x6c6cb4d8, 0x5656faac, 0xf4f407f3, 0xeaea25cf, 0x6565afca, 0x7a7a8ef4, 0xaeaee947, 0x08081810, 0xbabad56f, 0x787888f0, 0x25256f4a, 0x2e2e725c, 0x1c1c2438, 0xa6a6f157, 0xb4b4c773, 0xc6c65197, 0xe8e823cb, 0xdddd7ca1, 0x74749ce8, 0x1f1f213e, 0x4b4bdd96, 0xbdbddc61, 0x8b8b860d, 0x8a8a850f, 0x707090e0, 0x3e3e427c, 0xb5b5c471, 0x6666aacc, 0x4848d890, 0x03030506, 0xf6f601f7, 0x0e0e121c, 0x6161a3c2, 0x35355f6a, 0x5757f9ae, 0xb9b9d069, 0x86869117, 0xc1c15899, 0x1d1d273a, 0x9e9eb927, 0xe1e138d9, 0xf8f813eb, 0x9898b32b, 0x11113322, 0x6969bbd2, 0xd9d970a9, 0x8e8e8907, 0x9494a733, 0x9b9bb62d, 0x1e1e223c, 0x87879215, 0xe9e920c9, 0xcece4987, 0x5555ffaa, 0x28287850, 0xdfdf7aa5, 0x8c8c8f03, 0xa1a1f859, 0x89898009, 0x0d0d171a, 0xbfbfda65, 0xe6e631d7, 0x4242c684, 0x6868b8d0, 0x4141c382, 0x9999b029, 0x2d2d775a, 0x0f0f111e, 0xb0b0cb7b, 0x5454fca8, 0xbbbbd66d, 0x16163a2c];\n\n    // Transformations for decryption\n    var T5 = [0x51f4a750, 0x7e416553, 0x1a17a4c3, 0x3a275e96, 0x3bab6bcb, 0x1f9d45f1, 0xacfa58ab, 0x4be30393, 0x2030fa55, 0xad766df6, 0x88cc7691, 0xf5024c25, 0x4fe5d7fc, 0xc52acbd7, 0x26354480, 0xb562a38f, 0xdeb15a49, 0x25ba1b67, 0x45ea0e98, 0x5dfec0e1, 0xc32f7502, 0x814cf012, 0x8d4697a3, 0x6bd3f9c6, 0x038f5fe7, 0x15929c95, 0xbf6d7aeb, 0x955259da, 0xd4be832d, 0x587421d3, 0x49e06929, 0x8ec9c844, 0x75c2896a, 0xf48e7978, 0x99583e6b, 0x27b971dd, 0xbee14fb6, 0xf088ad17, 0xc920ac66, 0x7dce3ab4, 0x63df4a18, 0xe51a3182, 0x97513360, 0x62537f45, 0xb16477e0, 0xbb6bae84, 0xfe81a01c, 0xf9082b94, 0x70486858, 0x8f45fd19, 0x94de6c87, 0x527bf8b7, 0xab73d323, 0x724b02e2, 0xe31f8f57, 0x6655ab2a, 0xb2eb2807, 0x2fb5c203, 0x86c57b9a, 0xd33708a5, 0x302887f2, 0x23bfa5b2, 0x02036aba, 0xed16825c, 0x8acf1c2b, 0xa779b492, 0xf307f2f0, 0x4e69e2a1, 0x65daf4cd, 0x0605bed5, 0xd134621f, 0xc4a6fe8a, 0x342e539d, 0xa2f355a0, 0x058ae132, 0xa4f6eb75, 0x0b83ec39, 0x4060efaa, 0x5e719f06, 0xbd6e1051, 0x3e218af9, 0x96dd063d, 0xdd3e05ae, 0x4de6bd46, 0x91548db5, 0x71c45d05, 0x0406d46f, 0x605015ff, 0x1998fb24, 0xd6bde997, 0x894043cc, 0x67d99e77, 0xb0e842bd, 0x07898b88, 0xe7195b38, 0x79c8eedb, 0xa17c0a47, 0x7c420fe9, 0xf8841ec9, 0x00000000, 0x09808683, 0x322bed48, 0x1e1170ac, 0x6c5a724e, 0xfd0efffb, 0x0f853856, 0x3daed51e, 0x362d3927, 0x0a0fd964, 0x685ca621, 0x9b5b54d1, 0x24362e3a, 0x0c0a67b1, 0x9357e70f, 0xb4ee96d2, 0x1b9b919e, 0x80c0c54f, 0x61dc20a2, 0x5a774b69, 0x1c121a16, 0xe293ba0a, 0xc0a02ae5, 0x3c22e043, 0x121b171d, 0x0e090d0b, 0xf28bc7ad, 0x2db6a8b9, 0x141ea9c8, 0x57f11985, 0xaf75074c, 0xee99ddbb, 0xa37f60fd, 0xf701269f, 0x5c72f5bc, 0x44663bc5, 0x5bfb7e34, 0x8b432976, 0xcb23c6dc, 0xb6edfc68, 0xb8e4f163, 0xd731dcca, 0x42638510, 0x13972240, 0x84c61120, 0x854a247d, 0xd2bb3df8, 0xaef93211, 0xc729a16d, 0x1d9e2f4b, 0xdcb230f3, 0x0d8652ec, 0x77c1e3d0, 0x2bb3166c, 0xa970b999, 0x119448fa, 0x47e96422, 0xa8fc8cc4, 0xa0f03f1a, 0x567d2cd8, 0x223390ef, 0x87494ec7, 0xd938d1c1, 0x8ccaa2fe, 0x98d40b36, 0xa6f581cf, 0xa57ade28, 0xdab78e26, 0x3fadbfa4, 0x2c3a9de4, 0x5078920d, 0x6a5fcc9b, 0x547e4662, 0xf68d13c2, 0x90d8b8e8, 0x2e39f75e, 0x82c3aff5, 0x9f5d80be, 0x69d0937c, 0x6fd52da9, 0xcf2512b3, 0xc8ac993b, 0x10187da7, 0xe89c636e, 0xdb3bbb7b, 0xcd267809, 0x6e5918f4, 0xec9ab701, 0x834f9aa8, 0xe6956e65, 0xaaffe67e, 0x21bccf08, 0xef15e8e6, 0xbae79bd9, 0x4a6f36ce, 0xea9f09d4, 0x29b07cd6, 0x31a4b2af, 0x2a3f2331, 0xc6a59430, 0x35a266c0, 0x744ebc37, 0xfc82caa6, 0xe090d0b0, 0x33a7d815, 0xf104984a, 0x41ecdaf7, 0x7fcd500e, 0x1791f62f, 0x764dd68d, 0x43efb04d, 0xccaa4d54, 0xe49604df, 0x9ed1b5e3, 0x4c6a881b, 0xc12c1fb8, 0x4665517f, 0x9d5eea04, 0x018c355d, 0xfa877473, 0xfb0b412e, 0xb3671d5a, 0x92dbd252, 0xe9105633, 0x6dd64713, 0x9ad7618c, 0x37a10c7a, 0x59f8148e, 0xeb133c89, 0xcea927ee, 0xb761c935, 0xe11ce5ed, 0x7a47b13c, 0x9cd2df59, 0x55f2733f, 0x1814ce79, 0x73c737bf, 0x53f7cdea, 0x5ffdaa5b, 0xdf3d6f14, 0x7844db86, 0xcaaff381, 0xb968c43e, 0x3824342c, 0xc2a3405f, 0x161dc372, 0xbce2250c, 0x283c498b, 0xff0d9541, 0x39a80171, 0x080cb3de, 0xd8b4e49c, 0x6456c190, 0x7bcb8461, 0xd532b670, 0x486c5c74, 0xd0b85742];\n    var T6 = [0x5051f4a7, 0x537e4165, 0xc31a17a4, 0x963a275e, 0xcb3bab6b, 0xf11f9d45, 0xabacfa58, 0x934be303, 0x552030fa, 0xf6ad766d, 0x9188cc76, 0x25f5024c, 0xfc4fe5d7, 0xd7c52acb, 0x80263544, 0x8fb562a3, 0x49deb15a, 0x6725ba1b, 0x9845ea0e, 0xe15dfec0, 0x02c32f75, 0x12814cf0, 0xa38d4697, 0xc66bd3f9, 0xe7038f5f, 0x9515929c, 0xebbf6d7a, 0xda955259, 0x2dd4be83, 0xd3587421, 0x2949e069, 0x448ec9c8, 0x6a75c289, 0x78f48e79, 0x6b99583e, 0xdd27b971, 0xb6bee14f, 0x17f088ad, 0x66c920ac, 0xb47dce3a, 0x1863df4a, 0x82e51a31, 0x60975133, 0x4562537f, 0xe0b16477, 0x84bb6bae, 0x1cfe81a0, 0x94f9082b, 0x58704868, 0x198f45fd, 0x8794de6c, 0xb7527bf8, 0x23ab73d3, 0xe2724b02, 0x57e31f8f, 0x2a6655ab, 0x07b2eb28, 0x032fb5c2, 0x9a86c57b, 0xa5d33708, 0xf2302887, 0xb223bfa5, 0xba02036a, 0x5ced1682, 0x2b8acf1c, 0x92a779b4, 0xf0f307f2, 0xa14e69e2, 0xcd65daf4, 0xd50605be, 0x1fd13462, 0x8ac4a6fe, 0x9d342e53, 0xa0a2f355, 0x32058ae1, 0x75a4f6eb, 0x390b83ec, 0xaa4060ef, 0x065e719f, 0x51bd6e10, 0xf93e218a, 0x3d96dd06, 0xaedd3e05, 0x464de6bd, 0xb591548d, 0x0571c45d, 0x6f0406d4, 0xff605015, 0x241998fb, 0x97d6bde9, 0xcc894043, 0x7767d99e, 0xbdb0e842, 0x8807898b, 0x38e7195b, 0xdb79c8ee, 0x47a17c0a, 0xe97c420f, 0xc9f8841e, 0x00000000, 0x83098086, 0x48322bed, 0xac1e1170, 0x4e6c5a72, 0xfbfd0eff, 0x560f8538, 0x1e3daed5, 0x27362d39, 0x640a0fd9, 0x21685ca6, 0xd19b5b54, 0x3a24362e, 0xb10c0a67, 0x0f9357e7, 0xd2b4ee96, 0x9e1b9b91, 0x4f80c0c5, 0xa261dc20, 0x695a774b, 0x161c121a, 0x0ae293ba, 0xe5c0a02a, 0x433c22e0, 0x1d121b17, 0x0b0e090d, 0xadf28bc7, 0xb92db6a8, 0xc8141ea9, 0x8557f119, 0x4caf7507, 0xbbee99dd, 0xfda37f60, 0x9ff70126, 0xbc5c72f5, 0xc544663b, 0x345bfb7e, 0x768b4329, 0xdccb23c6, 0x68b6edfc, 0x63b8e4f1, 0xcad731dc, 0x10426385, 0x40139722, 0x2084c611, 0x7d854a24, 0xf8d2bb3d, 0x11aef932, 0x6dc729a1, 0x4b1d9e2f, 0xf3dcb230, 0xec0d8652, 0xd077c1e3, 0x6c2bb316, 0x99a970b9, 0xfa119448, 0x2247e964, 0xc4a8fc8c, 0x1aa0f03f, 0xd8567d2c, 0xef223390, 0xc787494e, 0xc1d938d1, 0xfe8ccaa2, 0x3698d40b, 0xcfa6f581, 0x28a57ade, 0x26dab78e, 0xa43fadbf, 0xe42c3a9d, 0x0d507892, 0x9b6a5fcc, 0x62547e46, 0xc2f68d13, 0xe890d8b8, 0x5e2e39f7, 0xf582c3af, 0xbe9f5d80, 0x7c69d093, 0xa96fd52d, 0xb3cf2512, 0x3bc8ac99, 0xa710187d, 0x6ee89c63, 0x7bdb3bbb, 0x09cd2678, 0xf46e5918, 0x01ec9ab7, 0xa8834f9a, 0x65e6956e, 0x7eaaffe6, 0x0821bccf, 0xe6ef15e8, 0xd9bae79b, 0xce4a6f36, 0xd4ea9f09, 0xd629b07c, 0xaf31a4b2, 0x312a3f23, 0x30c6a594, 0xc035a266, 0x37744ebc, 0xa6fc82ca, 0xb0e090d0, 0x1533a7d8, 0x4af10498, 0xf741ecda, 0x0e7fcd50, 0x2f1791f6, 0x8d764dd6, 0x4d43efb0, 0x54ccaa4d, 0xdfe49604, 0xe39ed1b5, 0x1b4c6a88, 0xb8c12c1f, 0x7f466551, 0x049d5eea, 0x5d018c35, 0x73fa8774, 0x2efb0b41, 0x5ab3671d, 0x5292dbd2, 0x33e91056, 0x136dd647, 0x8c9ad761, 0x7a37a10c, 0x8e59f814, 0x89eb133c, 0xeecea927, 0x35b761c9, 0xede11ce5, 0x3c7a47b1, 0x599cd2df, 0x3f55f273, 0x791814ce, 0xbf73c737, 0xea53f7cd, 0x5b5ffdaa, 0x14df3d6f, 0x867844db, 0x81caaff3, 0x3eb968c4, 0x2c382434, 0x5fc2a340, 0x72161dc3, 0x0cbce225, 0x8b283c49, 0x41ff0d95, 0x7139a801, 0xde080cb3, 0x9cd8b4e4, 0x906456c1, 0x617bcb84, 0x70d532b6, 0x74486c5c, 0x42d0b857];\n    var T7 = [0xa75051f4, 0x65537e41, 0xa4c31a17, 0x5e963a27, 0x6bcb3bab, 0x45f11f9d, 0x58abacfa, 0x03934be3, 0xfa552030, 0x6df6ad76, 0x769188cc, 0x4c25f502, 0xd7fc4fe5, 0xcbd7c52a, 0x44802635, 0xa38fb562, 0x5a49deb1, 0x1b6725ba, 0x0e9845ea, 0xc0e15dfe, 0x7502c32f, 0xf012814c, 0x97a38d46, 0xf9c66bd3, 0x5fe7038f, 0x9c951592, 0x7aebbf6d, 0x59da9552, 0x832dd4be, 0x21d35874, 0x692949e0, 0xc8448ec9, 0x896a75c2, 0x7978f48e, 0x3e6b9958, 0x71dd27b9, 0x4fb6bee1, 0xad17f088, 0xac66c920, 0x3ab47dce, 0x4a1863df, 0x3182e51a, 0x33609751, 0x7f456253, 0x77e0b164, 0xae84bb6b, 0xa01cfe81, 0x2b94f908, 0x68587048, 0xfd198f45, 0x6c8794de, 0xf8b7527b, 0xd323ab73, 0x02e2724b, 0x8f57e31f, 0xab2a6655, 0x2807b2eb, 0xc2032fb5, 0x7b9a86c5, 0x08a5d337, 0x87f23028, 0xa5b223bf, 0x6aba0203, 0x825ced16, 0x1c2b8acf, 0xb492a779, 0xf2f0f307, 0xe2a14e69, 0xf4cd65da, 0xbed50605, 0x621fd134, 0xfe8ac4a6, 0x539d342e, 0x55a0a2f3, 0xe132058a, 0xeb75a4f6, 0xec390b83, 0xefaa4060, 0x9f065e71, 0x1051bd6e, 0x8af93e21, 0x063d96dd, 0x05aedd3e, 0xbd464de6, 0x8db59154, 0x5d0571c4, 0xd46f0406, 0x15ff6050, 0xfb241998, 0xe997d6bd, 0x43cc8940, 0x9e7767d9, 0x42bdb0e8, 0x8b880789, 0x5b38e719, 0xeedb79c8, 0x0a47a17c, 0x0fe97c42, 0x1ec9f884, 0x00000000, 0x86830980, 0xed48322b, 0x70ac1e11, 0x724e6c5a, 0xfffbfd0e, 0x38560f85, 0xd51e3dae, 0x3927362d, 0xd9640a0f, 0xa621685c, 0x54d19b5b, 0x2e3a2436, 0x67b10c0a, 0xe70f9357, 0x96d2b4ee, 0x919e1b9b, 0xc54f80c0, 0x20a261dc, 0x4b695a77, 0x1a161c12, 0xba0ae293, 0x2ae5c0a0, 0xe0433c22, 0x171d121b, 0x0d0b0e09, 0xc7adf28b, 0xa8b92db6, 0xa9c8141e, 0x198557f1, 0x074caf75, 0xddbbee99, 0x60fda37f, 0x269ff701, 0xf5bc5c72, 0x3bc54466, 0x7e345bfb, 0x29768b43, 0xc6dccb23, 0xfc68b6ed, 0xf163b8e4, 0xdccad731, 0x85104263, 0x22401397, 0x112084c6, 0x247d854a, 0x3df8d2bb, 0x3211aef9, 0xa16dc729, 0x2f4b1d9e, 0x30f3dcb2, 0x52ec0d86, 0xe3d077c1, 0x166c2bb3, 0xb999a970, 0x48fa1194, 0x642247e9, 0x8cc4a8fc, 0x3f1aa0f0, 0x2cd8567d, 0x90ef2233, 0x4ec78749, 0xd1c1d938, 0xa2fe8cca, 0x0b3698d4, 0x81cfa6f5, 0xde28a57a, 0x8e26dab7, 0xbfa43fad, 0x9de42c3a, 0x920d5078, 0xcc9b6a5f, 0x4662547e, 0x13c2f68d, 0xb8e890d8, 0xf75e2e39, 0xaff582c3, 0x80be9f5d, 0x937c69d0, 0x2da96fd5, 0x12b3cf25, 0x993bc8ac, 0x7da71018, 0x636ee89c, 0xbb7bdb3b, 0x7809cd26, 0x18f46e59, 0xb701ec9a, 0x9aa8834f, 0x6e65e695, 0xe67eaaff, 0xcf0821bc, 0xe8e6ef15, 0x9bd9bae7, 0x36ce4a6f, 0x09d4ea9f, 0x7cd629b0, 0xb2af31a4, 0x23312a3f, 0x9430c6a5, 0x66c035a2, 0xbc37744e, 0xcaa6fc82, 0xd0b0e090, 0xd81533a7, 0x984af104, 0xdaf741ec, 0x500e7fcd, 0xf62f1791, 0xd68d764d, 0xb04d43ef, 0x4d54ccaa, 0x04dfe496, 0xb5e39ed1, 0x881b4c6a, 0x1fb8c12c, 0x517f4665, 0xea049d5e, 0x355d018c, 0x7473fa87, 0x412efb0b, 0x1d5ab367, 0xd25292db, 0x5633e910, 0x47136dd6, 0x618c9ad7, 0x0c7a37a1, 0x148e59f8, 0x3c89eb13, 0x27eecea9, 0xc935b761, 0xe5ede11c, 0xb13c7a47, 0xdf599cd2, 0x733f55f2, 0xce791814, 0x37bf73c7, 0xcdea53f7, 0xaa5b5ffd, 0x6f14df3d, 0xdb867844, 0xf381caaf, 0xc43eb968, 0x342c3824, 0x405fc2a3, 0xc372161d, 0x250cbce2, 0x498b283c, 0x9541ff0d, 0x017139a8, 0xb3de080c, 0xe49cd8b4, 0xc1906456, 0x84617bcb, 0xb670d532, 0x5c74486c, 0x5742d0b8];\n    var T8 = [0xf4a75051, 0x4165537e, 0x17a4c31a, 0x275e963a, 0xab6bcb3b, 0x9d45f11f, 0xfa58abac, 0xe303934b, 0x30fa5520, 0x766df6ad, 0xcc769188, 0x024c25f5, 0xe5d7fc4f, 0x2acbd7c5, 0x35448026, 0x62a38fb5, 0xb15a49de, 0xba1b6725, 0xea0e9845, 0xfec0e15d, 0x2f7502c3, 0x4cf01281, 0x4697a38d, 0xd3f9c66b, 0x8f5fe703, 0x929c9515, 0x6d7aebbf, 0x5259da95, 0xbe832dd4, 0x7421d358, 0xe0692949, 0xc9c8448e, 0xc2896a75, 0x8e7978f4, 0x583e6b99, 0xb971dd27, 0xe14fb6be, 0x88ad17f0, 0x20ac66c9, 0xce3ab47d, 0xdf4a1863, 0x1a3182e5, 0x51336097, 0x537f4562, 0x6477e0b1, 0x6bae84bb, 0x81a01cfe, 0x082b94f9, 0x48685870, 0x45fd198f, 0xde6c8794, 0x7bf8b752, 0x73d323ab, 0x4b02e272, 0x1f8f57e3, 0x55ab2a66, 0xeb2807b2, 0xb5c2032f, 0xc57b9a86, 0x3708a5d3, 0x2887f230, 0xbfa5b223, 0x036aba02, 0x16825ced, 0xcf1c2b8a, 0x79b492a7, 0x07f2f0f3, 0x69e2a14e, 0xdaf4cd65, 0x05bed506, 0x34621fd1, 0xa6fe8ac4, 0x2e539d34, 0xf355a0a2, 0x8ae13205, 0xf6eb75a4, 0x83ec390b, 0x60efaa40, 0x719f065e, 0x6e1051bd, 0x218af93e, 0xdd063d96, 0x3e05aedd, 0xe6bd464d, 0x548db591, 0xc45d0571, 0x06d46f04, 0x5015ff60, 0x98fb2419, 0xbde997d6, 0x4043cc89, 0xd99e7767, 0xe842bdb0, 0x898b8807, 0x195b38e7, 0xc8eedb79, 0x7c0a47a1, 0x420fe97c, 0x841ec9f8, 0x00000000, 0x80868309, 0x2bed4832, 0x1170ac1e, 0x5a724e6c, 0x0efffbfd, 0x8538560f, 0xaed51e3d, 0x2d392736, 0x0fd9640a, 0x5ca62168, 0x5b54d19b, 0x362e3a24, 0x0a67b10c, 0x57e70f93, 0xee96d2b4, 0x9b919e1b, 0xc0c54f80, 0xdc20a261, 0x774b695a, 0x121a161c, 0x93ba0ae2, 0xa02ae5c0, 0x22e0433c, 0x1b171d12, 0x090d0b0e, 0x8bc7adf2, 0xb6a8b92d, 0x1ea9c814, 0xf1198557, 0x75074caf, 0x99ddbbee, 0x7f60fda3, 0x01269ff7, 0x72f5bc5c, 0x663bc544, 0xfb7e345b, 0x4329768b, 0x23c6dccb, 0xedfc68b6, 0xe4f163b8, 0x31dccad7, 0x63851042, 0x97224013, 0xc6112084, 0x4a247d85, 0xbb3df8d2, 0xf93211ae, 0x29a16dc7, 0x9e2f4b1d, 0xb230f3dc, 0x8652ec0d, 0xc1e3d077, 0xb3166c2b, 0x70b999a9, 0x9448fa11, 0xe9642247, 0xfc8cc4a8, 0xf03f1aa0, 0x7d2cd856, 0x3390ef22, 0x494ec787, 0x38d1c1d9, 0xcaa2fe8c, 0xd40b3698, 0xf581cfa6, 0x7ade28a5, 0xb78e26da, 0xadbfa43f, 0x3a9de42c, 0x78920d50, 0x5fcc9b6a, 0x7e466254, 0x8d13c2f6, 0xd8b8e890, 0x39f75e2e, 0xc3aff582, 0x5d80be9f, 0xd0937c69, 0xd52da96f, 0x2512b3cf, 0xac993bc8, 0x187da710, 0x9c636ee8, 0x3bbb7bdb, 0x267809cd, 0x5918f46e, 0x9ab701ec, 0x4f9aa883, 0x956e65e6, 0xffe67eaa, 0xbccf0821, 0x15e8e6ef, 0xe79bd9ba, 0x6f36ce4a, 0x9f09d4ea, 0xb07cd629, 0xa4b2af31, 0x3f23312a, 0xa59430c6, 0xa266c035, 0x4ebc3774, 0x82caa6fc, 0x90d0b0e0, 0xa7d81533, 0x04984af1, 0xecdaf741, 0xcd500e7f, 0x91f62f17, 0x4dd68d76, 0xefb04d43, 0xaa4d54cc, 0x9604dfe4, 0xd1b5e39e, 0x6a881b4c, 0x2c1fb8c1, 0x65517f46, 0x5eea049d, 0x8c355d01, 0x877473fa, 0x0b412efb, 0x671d5ab3, 0xdbd25292, 0x105633e9, 0xd647136d, 0xd7618c9a, 0xa10c7a37, 0xf8148e59, 0x133c89eb, 0xa927eece, 0x61c935b7, 0x1ce5ede1, 0x47b13c7a, 0xd2df599c, 0xf2733f55, 0x14ce7918, 0xc737bf73, 0xf7cdea53, 0xfdaa5b5f, 0x3d6f14df, 0x44db8678, 0xaff381ca, 0x68c43eb9, 0x24342c38, 0xa3405fc2, 0x1dc37216, 0xe2250cbc, 0x3c498b28, 0x0d9541ff, 0xa8017139, 0x0cb3de08, 0xb4e49cd8, 0x56c19064, 0xcb84617b, 0x32b670d5, 0x6c5c7448, 0xb85742d0];\n\n    // Transformations for decryption key expansion\n    var U1 = [0x00000000, 0x0e090d0b, 0x1c121a16, 0x121b171d, 0x3824342c, 0x362d3927, 0x24362e3a, 0x2a3f2331, 0x70486858, 0x7e416553, 0x6c5a724e, 0x62537f45, 0x486c5c74, 0x4665517f, 0x547e4662, 0x5a774b69, 0xe090d0b0, 0xee99ddbb, 0xfc82caa6, 0xf28bc7ad, 0xd8b4e49c, 0xd6bde997, 0xc4a6fe8a, 0xcaaff381, 0x90d8b8e8, 0x9ed1b5e3, 0x8ccaa2fe, 0x82c3aff5, 0xa8fc8cc4, 0xa6f581cf, 0xb4ee96d2, 0xbae79bd9, 0xdb3bbb7b, 0xd532b670, 0xc729a16d, 0xc920ac66, 0xe31f8f57, 0xed16825c, 0xff0d9541, 0xf104984a, 0xab73d323, 0xa57ade28, 0xb761c935, 0xb968c43e, 0x9357e70f, 0x9d5eea04, 0x8f45fd19, 0x814cf012, 0x3bab6bcb, 0x35a266c0, 0x27b971dd, 0x29b07cd6, 0x038f5fe7, 0x0d8652ec, 0x1f9d45f1, 0x119448fa, 0x4be30393, 0x45ea0e98, 0x57f11985, 0x59f8148e, 0x73c737bf, 0x7dce3ab4, 0x6fd52da9, 0x61dc20a2, 0xad766df6, 0xa37f60fd, 0xb16477e0, 0xbf6d7aeb, 0x955259da, 0x9b5b54d1, 0x894043cc, 0x87494ec7, 0xdd3e05ae, 0xd33708a5, 0xc12c1fb8, 0xcf2512b3, 0xe51a3182, 0xeb133c89, 0xf9082b94, 0xf701269f, 0x4de6bd46, 0x43efb04d, 0x51f4a750, 0x5ffdaa5b, 0x75c2896a, 0x7bcb8461, 0x69d0937c, 0x67d99e77, 0x3daed51e, 0x33a7d815, 0x21bccf08, 0x2fb5c203, 0x058ae132, 0x0b83ec39, 0x1998fb24, 0x1791f62f, 0x764dd68d, 0x7844db86, 0x6a5fcc9b, 0x6456c190, 0x4e69e2a1, 0x4060efaa, 0x527bf8b7, 0x5c72f5bc, 0x0605bed5, 0x080cb3de, 0x1a17a4c3, 0x141ea9c8, 0x3e218af9, 0x302887f2, 0x223390ef, 0x2c3a9de4, 0x96dd063d, 0x98d40b36, 0x8acf1c2b, 0x84c61120, 0xaef93211, 0xa0f03f1a, 0xb2eb2807, 0xbce2250c, 0xe6956e65, 0xe89c636e, 0xfa877473, 0xf48e7978, 0xdeb15a49, 0xd0b85742, 0xc2a3405f, 0xccaa4d54, 0x41ecdaf7, 0x4fe5d7fc, 0x5dfec0e1, 0x53f7cdea, 0x79c8eedb, 0x77c1e3d0, 0x65daf4cd, 0x6bd3f9c6, 0x31a4b2af, 0x3fadbfa4, 0x2db6a8b9, 0x23bfa5b2, 0x09808683, 0x07898b88, 0x15929c95, 0x1b9b919e, 0xa17c0a47, 0xaf75074c, 0xbd6e1051, 0xb3671d5a, 0x99583e6b, 0x97513360, 0x854a247d, 0x8b432976, 0xd134621f, 0xdf3d6f14, 0xcd267809, 0xc32f7502, 0xe9105633, 0xe7195b38, 0xf5024c25, 0xfb0b412e, 0x9ad7618c, 0x94de6c87, 0x86c57b9a, 0x88cc7691, 0xa2f355a0, 0xacfa58ab, 0xbee14fb6, 0xb0e842bd, 0xea9f09d4, 0xe49604df, 0xf68d13c2, 0xf8841ec9, 0xd2bb3df8, 0xdcb230f3, 0xcea927ee, 0xc0a02ae5, 0x7a47b13c, 0x744ebc37, 0x6655ab2a, 0x685ca621, 0x42638510, 0x4c6a881b, 0x5e719f06, 0x5078920d, 0x0a0fd964, 0x0406d46f, 0x161dc372, 0x1814ce79, 0x322bed48, 0x3c22e043, 0x2e39f75e, 0x2030fa55, 0xec9ab701, 0xe293ba0a, 0xf088ad17, 0xfe81a01c, 0xd4be832d, 0xdab78e26, 0xc8ac993b, 0xc6a59430, 0x9cd2df59, 0x92dbd252, 0x80c0c54f, 0x8ec9c844, 0xa4f6eb75, 0xaaffe67e, 0xb8e4f163, 0xb6edfc68, 0x0c0a67b1, 0x02036aba, 0x10187da7, 0x1e1170ac, 0x342e539d, 0x3a275e96, 0x283c498b, 0x26354480, 0x7c420fe9, 0x724b02e2, 0x605015ff, 0x6e5918f4, 0x44663bc5, 0x4a6f36ce, 0x587421d3, 0x567d2cd8, 0x37a10c7a, 0x39a80171, 0x2bb3166c, 0x25ba1b67, 0x0f853856, 0x018c355d, 0x13972240, 0x1d9e2f4b, 0x47e96422, 0x49e06929, 0x5bfb7e34, 0x55f2733f, 0x7fcd500e, 0x71c45d05, 0x63df4a18, 0x6dd64713, 0xd731dcca, 0xd938d1c1, 0xcb23c6dc, 0xc52acbd7, 0xef15e8e6, 0xe11ce5ed, 0xf307f2f0, 0xfd0efffb, 0xa779b492, 0xa970b999, 0xbb6bae84, 0xb562a38f, 0x9f5d80be, 0x91548db5, 0x834f9aa8, 0x8d4697a3];\n    var U2 = [0x00000000, 0x0b0e090d, 0x161c121a, 0x1d121b17, 0x2c382434, 0x27362d39, 0x3a24362e, 0x312a3f23, 0x58704868, 0x537e4165, 0x4e6c5a72, 0x4562537f, 0x74486c5c, 0x7f466551, 0x62547e46, 0x695a774b, 0xb0e090d0, 0xbbee99dd, 0xa6fc82ca, 0xadf28bc7, 0x9cd8b4e4, 0x97d6bde9, 0x8ac4a6fe, 0x81caaff3, 0xe890d8b8, 0xe39ed1b5, 0xfe8ccaa2, 0xf582c3af, 0xc4a8fc8c, 0xcfa6f581, 0xd2b4ee96, 0xd9bae79b, 0x7bdb3bbb, 0x70d532b6, 0x6dc729a1, 0x66c920ac, 0x57e31f8f, 0x5ced1682, 0x41ff0d95, 0x4af10498, 0x23ab73d3, 0x28a57ade, 0x35b761c9, 0x3eb968c4, 0x0f9357e7, 0x049d5eea, 0x198f45fd, 0x12814cf0, 0xcb3bab6b, 0xc035a266, 0xdd27b971, 0xd629b07c, 0xe7038f5f, 0xec0d8652, 0xf11f9d45, 0xfa119448, 0x934be303, 0x9845ea0e, 0x8557f119, 0x8e59f814, 0xbf73c737, 0xb47dce3a, 0xa96fd52d, 0xa261dc20, 0xf6ad766d, 0xfda37f60, 0xe0b16477, 0xebbf6d7a, 0xda955259, 0xd19b5b54, 0xcc894043, 0xc787494e, 0xaedd3e05, 0xa5d33708, 0xb8c12c1f, 0xb3cf2512, 0x82e51a31, 0x89eb133c, 0x94f9082b, 0x9ff70126, 0x464de6bd, 0x4d43efb0, 0x5051f4a7, 0x5b5ffdaa, 0x6a75c289, 0x617bcb84, 0x7c69d093, 0x7767d99e, 0x1e3daed5, 0x1533a7d8, 0x0821bccf, 0x032fb5c2, 0x32058ae1, 0x390b83ec, 0x241998fb, 0x2f1791f6, 0x8d764dd6, 0x867844db, 0x9b6a5fcc, 0x906456c1, 0xa14e69e2, 0xaa4060ef, 0xb7527bf8, 0xbc5c72f5, 0xd50605be, 0xde080cb3, 0xc31a17a4, 0xc8141ea9, 0xf93e218a, 0xf2302887, 0xef223390, 0xe42c3a9d, 0x3d96dd06, 0x3698d40b, 0x2b8acf1c, 0x2084c611, 0x11aef932, 0x1aa0f03f, 0x07b2eb28, 0x0cbce225, 0x65e6956e, 0x6ee89c63, 0x73fa8774, 0x78f48e79, 0x49deb15a, 0x42d0b857, 0x5fc2a340, 0x54ccaa4d, 0xf741ecda, 0xfc4fe5d7, 0xe15dfec0, 0xea53f7cd, 0xdb79c8ee, 0xd077c1e3, 0xcd65daf4, 0xc66bd3f9, 0xaf31a4b2, 0xa43fadbf, 0xb92db6a8, 0xb223bfa5, 0x83098086, 0x8807898b, 0x9515929c, 0x9e1b9b91, 0x47a17c0a, 0x4caf7507, 0x51bd6e10, 0x5ab3671d, 0x6b99583e, 0x60975133, 0x7d854a24, 0x768b4329, 0x1fd13462, 0x14df3d6f, 0x09cd2678, 0x02c32f75, 0x33e91056, 0x38e7195b, 0x25f5024c, 0x2efb0b41, 0x8c9ad761, 0x8794de6c, 0x9a86c57b, 0x9188cc76, 0xa0a2f355, 0xabacfa58, 0xb6bee14f, 0xbdb0e842, 0xd4ea9f09, 0xdfe49604, 0xc2f68d13, 0xc9f8841e, 0xf8d2bb3d, 0xf3dcb230, 0xeecea927, 0xe5c0a02a, 0x3c7a47b1, 0x37744ebc, 0x2a6655ab, 0x21685ca6, 0x10426385, 0x1b4c6a88, 0x065e719f, 0x0d507892, 0x640a0fd9, 0x6f0406d4, 0x72161dc3, 0x791814ce, 0x48322bed, 0x433c22e0, 0x5e2e39f7, 0x552030fa, 0x01ec9ab7, 0x0ae293ba, 0x17f088ad, 0x1cfe81a0, 0x2dd4be83, 0x26dab78e, 0x3bc8ac99, 0x30c6a594, 0x599cd2df, 0x5292dbd2, 0x4f80c0c5, 0x448ec9c8, 0x75a4f6eb, 0x7eaaffe6, 0x63b8e4f1, 0x68b6edfc, 0xb10c0a67, 0xba02036a, 0xa710187d, 0xac1e1170, 0x9d342e53, 0x963a275e, 0x8b283c49, 0x80263544, 0xe97c420f, 0xe2724b02, 0xff605015, 0xf46e5918, 0xc544663b, 0xce4a6f36, 0xd3587421, 0xd8567d2c, 0x7a37a10c, 0x7139a801, 0x6c2bb316, 0x6725ba1b, 0x560f8538, 0x5d018c35, 0x40139722, 0x4b1d9e2f, 0x2247e964, 0x2949e069, 0x345bfb7e, 0x3f55f273, 0x0e7fcd50, 0x0571c45d, 0x1863df4a, 0x136dd647, 0xcad731dc, 0xc1d938d1, 0xdccb23c6, 0xd7c52acb, 0xe6ef15e8, 0xede11ce5, 0xf0f307f2, 0xfbfd0eff, 0x92a779b4, 0x99a970b9, 0x84bb6bae, 0x8fb562a3, 0xbe9f5d80, 0xb591548d, 0xa8834f9a, 0xa38d4697];\n    var U3 = [0x00000000, 0x0d0b0e09, 0x1a161c12, 0x171d121b, 0x342c3824, 0x3927362d, 0x2e3a2436, 0x23312a3f, 0x68587048, 0x65537e41, 0x724e6c5a, 0x7f456253, 0x5c74486c, 0x517f4665, 0x4662547e, 0x4b695a77, 0xd0b0e090, 0xddbbee99, 0xcaa6fc82, 0xc7adf28b, 0xe49cd8b4, 0xe997d6bd, 0xfe8ac4a6, 0xf381caaf, 0xb8e890d8, 0xb5e39ed1, 0xa2fe8cca, 0xaff582c3, 0x8cc4a8fc, 0x81cfa6f5, 0x96d2b4ee, 0x9bd9bae7, 0xbb7bdb3b, 0xb670d532, 0xa16dc729, 0xac66c920, 0x8f57e31f, 0x825ced16, 0x9541ff0d, 0x984af104, 0xd323ab73, 0xde28a57a, 0xc935b761, 0xc43eb968, 0xe70f9357, 0xea049d5e, 0xfd198f45, 0xf012814c, 0x6bcb3bab, 0x66c035a2, 0x71dd27b9, 0x7cd629b0, 0x5fe7038f, 0x52ec0d86, 0x45f11f9d, 0x48fa1194, 0x03934be3, 0x0e9845ea, 0x198557f1, 0x148e59f8, 0x37bf73c7, 0x3ab47dce, 0x2da96fd5, 0x20a261dc, 0x6df6ad76, 0x60fda37f, 0x77e0b164, 0x7aebbf6d, 0x59da9552, 0x54d19b5b, 0x43cc8940, 0x4ec78749, 0x05aedd3e, 0x08a5d337, 0x1fb8c12c, 0x12b3cf25, 0x3182e51a, 0x3c89eb13, 0x2b94f908, 0x269ff701, 0xbd464de6, 0xb04d43ef, 0xa75051f4, 0xaa5b5ffd, 0x896a75c2, 0x84617bcb, 0x937c69d0, 0x9e7767d9, 0xd51e3dae, 0xd81533a7, 0xcf0821bc, 0xc2032fb5, 0xe132058a, 0xec390b83, 0xfb241998, 0xf62f1791, 0xd68d764d, 0xdb867844, 0xcc9b6a5f, 0xc1906456, 0xe2a14e69, 0xefaa4060, 0xf8b7527b, 0xf5bc5c72, 0xbed50605, 0xb3de080c, 0xa4c31a17, 0xa9c8141e, 0x8af93e21, 0x87f23028, 0x90ef2233, 0x9de42c3a, 0x063d96dd, 0x0b3698d4, 0x1c2b8acf, 0x112084c6, 0x3211aef9, 0x3f1aa0f0, 0x2807b2eb, 0x250cbce2, 0x6e65e695, 0x636ee89c, 0x7473fa87, 0x7978f48e, 0x5a49deb1, 0x5742d0b8, 0x405fc2a3, 0x4d54ccaa, 0xdaf741ec, 0xd7fc4fe5, 0xc0e15dfe, 0xcdea53f7, 0xeedb79c8, 0xe3d077c1, 0xf4cd65da, 0xf9c66bd3, 0xb2af31a4, 0xbfa43fad, 0xa8b92db6, 0xa5b223bf, 0x86830980, 0x8b880789, 0x9c951592, 0x919e1b9b, 0x0a47a17c, 0x074caf75, 0x1051bd6e, 0x1d5ab367, 0x3e6b9958, 0x33609751, 0x247d854a, 0x29768b43, 0x621fd134, 0x6f14df3d, 0x7809cd26, 0x7502c32f, 0x5633e910, 0x5b38e719, 0x4c25f502, 0x412efb0b, 0x618c9ad7, 0x6c8794de, 0x7b9a86c5, 0x769188cc, 0x55a0a2f3, 0x58abacfa, 0x4fb6bee1, 0x42bdb0e8, 0x09d4ea9f, 0x04dfe496, 0x13c2f68d, 0x1ec9f884, 0x3df8d2bb, 0x30f3dcb2, 0x27eecea9, 0x2ae5c0a0, 0xb13c7a47, 0xbc37744e, 0xab2a6655, 0xa621685c, 0x85104263, 0x881b4c6a, 0x9f065e71, 0x920d5078, 0xd9640a0f, 0xd46f0406, 0xc372161d, 0xce791814, 0xed48322b, 0xe0433c22, 0xf75e2e39, 0xfa552030, 0xb701ec9a, 0xba0ae293, 0xad17f088, 0xa01cfe81, 0x832dd4be, 0x8e26dab7, 0x993bc8ac, 0x9430c6a5, 0xdf599cd2, 0xd25292db, 0xc54f80c0, 0xc8448ec9, 0xeb75a4f6, 0xe67eaaff, 0xf163b8e4, 0xfc68b6ed, 0x67b10c0a, 0x6aba0203, 0x7da71018, 0x70ac1e11, 0x539d342e, 0x5e963a27, 0x498b283c, 0x44802635, 0x0fe97c42, 0x02e2724b, 0x15ff6050, 0x18f46e59, 0x3bc54466, 0x36ce4a6f, 0x21d35874, 0x2cd8567d, 0x0c7a37a1, 0x017139a8, 0x166c2bb3, 0x1b6725ba, 0x38560f85, 0x355d018c, 0x22401397, 0x2f4b1d9e, 0x642247e9, 0x692949e0, 0x7e345bfb, 0x733f55f2, 0x500e7fcd, 0x5d0571c4, 0x4a1863df, 0x47136dd6, 0xdccad731, 0xd1c1d938, 0xc6dccb23, 0xcbd7c52a, 0xe8e6ef15, 0xe5ede11c, 0xf2f0f307, 0xfffbfd0e, 0xb492a779, 0xb999a970, 0xae84bb6b, 0xa38fb562, 0x80be9f5d, 0x8db59154, 0x9aa8834f, 0x97a38d46];\n    var U4 = [0x00000000, 0x090d0b0e, 0x121a161c, 0x1b171d12, 0x24342c38, 0x2d392736, 0x362e3a24, 0x3f23312a, 0x48685870, 0x4165537e, 0x5a724e6c, 0x537f4562, 0x6c5c7448, 0x65517f46, 0x7e466254, 0x774b695a, 0x90d0b0e0, 0x99ddbbee, 0x82caa6fc, 0x8bc7adf2, 0xb4e49cd8, 0xbde997d6, 0xa6fe8ac4, 0xaff381ca, 0xd8b8e890, 0xd1b5e39e, 0xcaa2fe8c, 0xc3aff582, 0xfc8cc4a8, 0xf581cfa6, 0xee96d2b4, 0xe79bd9ba, 0x3bbb7bdb, 0x32b670d5, 0x29a16dc7, 0x20ac66c9, 0x1f8f57e3, 0x16825ced, 0x0d9541ff, 0x04984af1, 0x73d323ab, 0x7ade28a5, 0x61c935b7, 0x68c43eb9, 0x57e70f93, 0x5eea049d, 0x45fd198f, 0x4cf01281, 0xab6bcb3b, 0xa266c035, 0xb971dd27, 0xb07cd629, 0x8f5fe703, 0x8652ec0d, 0x9d45f11f, 0x9448fa11, 0xe303934b, 0xea0e9845, 0xf1198557, 0xf8148e59, 0xc737bf73, 0xce3ab47d, 0xd52da96f, 0xdc20a261, 0x766df6ad, 0x7f60fda3, 0x6477e0b1, 0x6d7aebbf, 0x5259da95, 0x5b54d19b, 0x4043cc89, 0x494ec787, 0x3e05aedd, 0x3708a5d3, 0x2c1fb8c1, 0x2512b3cf, 0x1a3182e5, 0x133c89eb, 0x082b94f9, 0x01269ff7, 0xe6bd464d, 0xefb04d43, 0xf4a75051, 0xfdaa5b5f, 0xc2896a75, 0xcb84617b, 0xd0937c69, 0xd99e7767, 0xaed51e3d, 0xa7d81533, 0xbccf0821, 0xb5c2032f, 0x8ae13205, 0x83ec390b, 0x98fb2419, 0x91f62f17, 0x4dd68d76, 0x44db8678, 0x5fcc9b6a, 0x56c19064, 0x69e2a14e, 0x60efaa40, 0x7bf8b752, 0x72f5bc5c, 0x05bed506, 0x0cb3de08, 0x17a4c31a, 0x1ea9c814, 0x218af93e, 0x2887f230, 0x3390ef22, 0x3a9de42c, 0xdd063d96, 0xd40b3698, 0xcf1c2b8a, 0xc6112084, 0xf93211ae, 0xf03f1aa0, 0xeb2807b2, 0xe2250cbc, 0x956e65e6, 0x9c636ee8, 0x877473fa, 0x8e7978f4, 0xb15a49de, 0xb85742d0, 0xa3405fc2, 0xaa4d54cc, 0xecdaf741, 0xe5d7fc4f, 0xfec0e15d, 0xf7cdea53, 0xc8eedb79, 0xc1e3d077, 0xdaf4cd65, 0xd3f9c66b, 0xa4b2af31, 0xadbfa43f, 0xb6a8b92d, 0xbfa5b223, 0x80868309, 0x898b8807, 0x929c9515, 0x9b919e1b, 0x7c0a47a1, 0x75074caf, 0x6e1051bd, 0x671d5ab3, 0x583e6b99, 0x51336097, 0x4a247d85, 0x4329768b, 0x34621fd1, 0x3d6f14df, 0x267809cd, 0x2f7502c3, 0x105633e9, 0x195b38e7, 0x024c25f5, 0x0b412efb, 0xd7618c9a, 0xde6c8794, 0xc57b9a86, 0xcc769188, 0xf355a0a2, 0xfa58abac, 0xe14fb6be, 0xe842bdb0, 0x9f09d4ea, 0x9604dfe4, 0x8d13c2f6, 0x841ec9f8, 0xbb3df8d2, 0xb230f3dc, 0xa927eece, 0xa02ae5c0, 0x47b13c7a, 0x4ebc3774, 0x55ab2a66, 0x5ca62168, 0x63851042, 0x6a881b4c, 0x719f065e, 0x78920d50, 0x0fd9640a, 0x06d46f04, 0x1dc37216, 0x14ce7918, 0x2bed4832, 0x22e0433c, 0x39f75e2e, 0x30fa5520, 0x9ab701ec, 0x93ba0ae2, 0x88ad17f0, 0x81a01cfe, 0xbe832dd4, 0xb78e26da, 0xac993bc8, 0xa59430c6, 0xd2df599c, 0xdbd25292, 0xc0c54f80, 0xc9c8448e, 0xf6eb75a4, 0xffe67eaa, 0xe4f163b8, 0xedfc68b6, 0x0a67b10c, 0x036aba02, 0x187da710, 0x1170ac1e, 0x2e539d34, 0x275e963a, 0x3c498b28, 0x35448026, 0x420fe97c, 0x4b02e272, 0x5015ff60, 0x5918f46e, 0x663bc544, 0x6f36ce4a, 0x7421d358, 0x7d2cd856, 0xa10c7a37, 0xa8017139, 0xb3166c2b, 0xba1b6725, 0x8538560f, 0x8c355d01, 0x97224013, 0x9e2f4b1d, 0xe9642247, 0xe0692949, 0xfb7e345b, 0xf2733f55, 0xcd500e7f, 0xc45d0571, 0xdf4a1863, 0xd647136d, 0x31dccad7, 0x38d1c1d9, 0x23c6dccb, 0x2acbd7c5, 0x15e8e6ef, 0x1ce5ede1, 0x07f2f0f3, 0x0efffbfd, 0x79b492a7, 0x70b999a9, 0x6bae84bb, 0x62a38fb5, 0x5d80be9f, 0x548db591, 0x4f9aa883, 0x4697a38d];\n\n    function convertToInt32(bytes) {\n        var result = [];\n        for (var i = 0; i < bytes.length; i += 4) {\n            result.push(\n                (bytes[i    ] << 24) |\n                (bytes[i + 1] << 16) |\n                (bytes[i + 2] <<  8) |\n                 bytes[i + 3]\n            );\n        }\n        return result;\n    }\n\n    var AES = function(key) {\n        if (!(this instanceof AES)) {\n            throw Error('AES must be instanitated with `new`');\n        }\n\n        Object.defineProperty(this, 'key', {\n            value: coerceArray(key, true)\n        });\n\n        this._prepare();\n    }\n\n\n    AES.prototype._prepare = function() {\n\n        var rounds = numberOfRounds[this.key.length];\n        if (rounds == null) {\n            throw new Error('invalid key size (must be 16, 24 or 32 bytes)');\n        }\n\n        // encryption round keys\n        this._Ke = [];\n\n        // decryption round keys\n        this._Kd = [];\n\n        for (var i = 0; i <= rounds; i++) {\n            this._Ke.push([0, 0, 0, 0]);\n            this._Kd.push([0, 0, 0, 0]);\n        }\n\n        var roundKeyCount = (rounds + 1) * 4;\n        var KC = this.key.length / 4;\n\n        // convert the key into ints\n        var tk = convertToInt32(this.key);\n\n        // copy values into round key arrays\n        var index;\n        for (var i = 0; i < KC; i++) {\n            index = i >> 2;\n            this._Ke[index][i % 4] = tk[i];\n            this._Kd[rounds - index][i % 4] = tk[i];\n        }\n\n        // key expansion (fips-197 section 5.2)\n        var rconpointer = 0;\n        var t = KC, tt;\n        while (t < roundKeyCount) {\n            tt = tk[KC - 1];\n            tk[0] ^= ((S[(tt >> 16) & 0xFF] << 24) ^\n                      (S[(tt >>  8) & 0xFF] << 16) ^\n                      (S[ tt        & 0xFF] <<  8) ^\n                       S[(tt >> 24) & 0xFF]        ^\n                      (rcon[rconpointer] << 24));\n            rconpointer += 1;\n\n            // key expansion (for non-256 bit)\n            if (KC != 8) {\n                for (var i = 1; i < KC; i++) {\n                    tk[i] ^= tk[i - 1];\n                }\n\n            // key expansion for 256-bit keys is \"slightly different\" (fips-197)\n            } else {\n                for (var i = 1; i < (KC / 2); i++) {\n                    tk[i] ^= tk[i - 1];\n                }\n                tt = tk[(KC / 2) - 1];\n\n                tk[KC / 2] ^= (S[ tt        & 0xFF]        ^\n                              (S[(tt >>  8) & 0xFF] <<  8) ^\n                              (S[(tt >> 16) & 0xFF] << 16) ^\n                              (S[(tt >> 24) & 0xFF] << 24));\n\n                for (var i = (KC / 2) + 1; i < KC; i++) {\n                    tk[i] ^= tk[i - 1];\n                }\n            }\n\n            // copy values into round key arrays\n            var i = 0, r, c;\n            while (i < KC && t < roundKeyCount) {\n                r = t >> 2;\n                c = t % 4;\n                this._Ke[r][c] = tk[i];\n                this._Kd[rounds - r][c] = tk[i++];\n                t++;\n            }\n        }\n\n        // inverse-cipher-ify the decryption round key (fips-197 section 5.3)\n        for (var r = 1; r < rounds; r++) {\n            for (var c = 0; c < 4; c++) {\n                tt = this._Kd[r][c];\n                this._Kd[r][c] = (U1[(tt >> 24) & 0xFF] ^\n                                  U2[(tt >> 16) & 0xFF] ^\n                                  U3[(tt >>  8) & 0xFF] ^\n                                  U4[ tt        & 0xFF]);\n            }\n        }\n    }\n\n    AES.prototype.encrypt = function(plaintext) {\n        if (plaintext.length != 16) {\n            throw new Error('invalid plaintext size (must be 16 bytes)');\n        }\n\n        var rounds = this._Ke.length - 1;\n        var a = [0, 0, 0, 0];\n\n        // convert plaintext to (ints ^ key)\n        var t = convertToInt32(plaintext);\n        for (var i = 0; i < 4; i++) {\n            t[i] ^= this._Ke[0][i];\n        }\n\n        // apply round transforms\n        for (var r = 1; r < rounds; r++) {\n            for (var i = 0; i < 4; i++) {\n                a[i] = (T1[(t[ i         ] >> 24) & 0xff] ^\n                        T2[(t[(i + 1) % 4] >> 16) & 0xff] ^\n                        T3[(t[(i + 2) % 4] >>  8) & 0xff] ^\n                        T4[ t[(i + 3) % 4]        & 0xff] ^\n                        this._Ke[r][i]);\n            }\n            t = a.slice();\n        }\n\n        // the last round is special\n        var result = createArray(16), tt;\n        for (var i = 0; i < 4; i++) {\n            tt = this._Ke[rounds][i];\n            result[4 * i    ] = (S[(t[ i         ] >> 24) & 0xff] ^ (tt >> 24)) & 0xff;\n            result[4 * i + 1] = (S[(t[(i + 1) % 4] >> 16) & 0xff] ^ (tt >> 16)) & 0xff;\n            result[4 * i + 2] = (S[(t[(i + 2) % 4] >>  8) & 0xff] ^ (tt >>  8)) & 0xff;\n            result[4 * i + 3] = (S[ t[(i + 3) % 4]        & 0xff] ^  tt       ) & 0xff;\n        }\n\n        return result;\n    }\n\n    AES.prototype.decrypt = function(ciphertext) {\n        if (ciphertext.length != 16) {\n            throw new Error('invalid ciphertext size (must be 16 bytes)');\n        }\n\n        var rounds = this._Kd.length - 1;\n        var a = [0, 0, 0, 0];\n\n        // convert plaintext to (ints ^ key)\n        var t = convertToInt32(ciphertext);\n        for (var i = 0; i < 4; i++) {\n            t[i] ^= this._Kd[0][i];\n        }\n\n        // apply round transforms\n        for (var r = 1; r < rounds; r++) {\n            for (var i = 0; i < 4; i++) {\n                a[i] = (T5[(t[ i          ] >> 24) & 0xff] ^\n                        T6[(t[(i + 3) % 4] >> 16) & 0xff] ^\n                        T7[(t[(i + 2) % 4] >>  8) & 0xff] ^\n                        T8[ t[(i + 1) % 4]        & 0xff] ^\n                        this._Kd[r][i]);\n            }\n            t = a.slice();\n        }\n\n        // the last round is special\n        var result = createArray(16), tt;\n        for (var i = 0; i < 4; i++) {\n            tt = this._Kd[rounds][i];\n            result[4 * i    ] = (Si[(t[ i         ] >> 24) & 0xff] ^ (tt >> 24)) & 0xff;\n            result[4 * i + 1] = (Si[(t[(i + 3) % 4] >> 16) & 0xff] ^ (tt >> 16)) & 0xff;\n            result[4 * i + 2] = (Si[(t[(i + 2) % 4] >>  8) & 0xff] ^ (tt >>  8)) & 0xff;\n            result[4 * i + 3] = (Si[ t[(i + 1) % 4]        & 0xff] ^  tt       ) & 0xff;\n        }\n\n        return result;\n    }\n\n\n    /**\n     *  Mode Of Operation - Electonic Codebook (ECB)\n     */\n    var ModeOfOperationECB = function(key) {\n        if (!(this instanceof ModeOfOperationECB)) {\n            throw Error('AES must be instanitated with `new`');\n        }\n\n        this.description = \"Electronic Code Block\";\n        this.name = \"ecb\";\n\n        this._aes = new AES(key);\n    }\n\n    ModeOfOperationECB.prototype.encrypt = function(plaintext) {\n        plaintext = coerceArray(plaintext);\n\n        if ((plaintext.length % 16) !== 0) {\n            throw new Error('invalid plaintext size (must be multiple of 16 bytes)');\n        }\n\n        var ciphertext = createArray(plaintext.length);\n        var block = createArray(16);\n\n        for (var i = 0; i < plaintext.length; i += 16) {\n            copyArray(plaintext, block, 0, i, i + 16);\n            block = this._aes.encrypt(block);\n            copyArray(block, ciphertext, i);\n        }\n\n        return ciphertext;\n    }\n\n    ModeOfOperationECB.prototype.decrypt = function(ciphertext) {\n        ciphertext = coerceArray(ciphertext);\n\n        if ((ciphertext.length % 16) !== 0) {\n            throw new Error('invalid ciphertext size (must be multiple of 16 bytes)');\n        }\n\n        var plaintext = createArray(ciphertext.length);\n        var block = createArray(16);\n\n        for (var i = 0; i < ciphertext.length; i += 16) {\n            copyArray(ciphertext, block, 0, i, i + 16);\n            block = this._aes.decrypt(block);\n            copyArray(block, plaintext, i);\n        }\n\n        return plaintext;\n    }\n\n\n    /**\n     *  Mode Of Operation - Cipher Block Chaining (CBC)\n     */\n    var ModeOfOperationCBC = function(key, iv) {\n        if (!(this instanceof ModeOfOperationCBC)) {\n            throw Error('AES must be instanitated with `new`');\n        }\n\n        this.description = \"Cipher Block Chaining\";\n        this.name = \"cbc\";\n\n        if (!iv) {\n            iv = createArray(16);\n\n        } else if (iv.length != 16) {\n            throw new Error('invalid initialation vector size (must be 16 bytes)');\n        }\n\n        this._lastCipherblock = coerceArray(iv, true);\n\n        this._aes = new AES(key);\n    }\n\n    ModeOfOperationCBC.prototype.encrypt = function(plaintext) {\n        plaintext = coerceArray(plaintext);\n\n        if ((plaintext.length % 16) !== 0) {\n            throw new Error('invalid plaintext size (must be multiple of 16 bytes)');\n        }\n\n        var ciphertext = createArray(plaintext.length);\n        var block = createArray(16);\n\n        for (var i = 0; i < plaintext.length; i += 16) {\n            copyArray(plaintext, block, 0, i, i + 16);\n\n            for (var j = 0; j < 16; j++) {\n                block[j] ^= this._lastCipherblock[j];\n            }\n\n            this._lastCipherblock = this._aes.encrypt(block);\n            copyArray(this._lastCipherblock, ciphertext, i);\n        }\n\n        return ciphertext;\n    }\n\n    ModeOfOperationCBC.prototype.decrypt = function(ciphertext) {\n        ciphertext = coerceArray(ciphertext);\n\n        if ((ciphertext.length % 16) !== 0) {\n            throw new Error('invalid ciphertext size (must be multiple of 16 bytes)');\n        }\n\n        var plaintext = createArray(ciphertext.length);\n        var block = createArray(16);\n\n        for (var i = 0; i < ciphertext.length; i += 16) {\n            copyArray(ciphertext, block, 0, i, i + 16);\n            block = this._aes.decrypt(block);\n\n            for (var j = 0; j < 16; j++) {\n                plaintext[i + j] = block[j] ^ this._lastCipherblock[j];\n            }\n\n            copyArray(ciphertext, this._lastCipherblock, 0, i, i + 16);\n        }\n\n        return plaintext;\n    }\n\n\n    /**\n     *  Mode Of Operation - Cipher Feedback (CFB)\n     */\n    var ModeOfOperationCFB = function(key, iv, segmentSize) {\n        if (!(this instanceof ModeOfOperationCFB)) {\n            throw Error('AES must be instanitated with `new`');\n        }\n\n        this.description = \"Cipher Feedback\";\n        this.name = \"cfb\";\n\n        if (!iv) {\n            iv = createArray(16);\n\n        } else if (iv.length != 16) {\n            throw new Error('invalid initialation vector size (must be 16 size)');\n        }\n\n        if (!segmentSize) { segmentSize = 1; }\n\n        this.segmentSize = segmentSize;\n\n        this._shiftRegister = coerceArray(iv, true);\n\n        this._aes = new AES(key);\n    }\n\n    ModeOfOperationCFB.prototype.encrypt = function(plaintext) {\n        if ((plaintext.length % this.segmentSize) != 0) {\n            throw new Error('invalid plaintext size (must be segmentSize bytes)');\n        }\n\n        var encrypted = coerceArray(plaintext, true);\n\n        var xorSegment;\n        for (var i = 0; i < encrypted.length; i += this.segmentSize) {\n            xorSegment = this._aes.encrypt(this._shiftRegister);\n            for (var j = 0; j < this.segmentSize; j++) {\n                encrypted[i + j] ^= xorSegment[j];\n            }\n\n            // Shift the register\n            copyArray(this._shiftRegister, this._shiftRegister, 0, this.segmentSize);\n            copyArray(encrypted, this._shiftRegister, 16 - this.segmentSize, i, i + this.segmentSize);\n        }\n\n        return encrypted;\n    }\n\n    ModeOfOperationCFB.prototype.decrypt = function(ciphertext) {\n        if ((ciphertext.length % this.segmentSize) != 0) {\n            throw new Error('invalid ciphertext size (must be segmentSize bytes)');\n        }\n\n        var plaintext = coerceArray(ciphertext, true);\n\n        var xorSegment;\n        for (var i = 0; i < plaintext.length; i += this.segmentSize) {\n            xorSegment = this._aes.encrypt(this._shiftRegister);\n\n            for (var j = 0; j < this.segmentSize; j++) {\n                plaintext[i + j] ^= xorSegment[j];\n            }\n\n            // Shift the register\n            copyArray(this._shiftRegister, this._shiftRegister, 0, this.segmentSize);\n            copyArray(ciphertext, this._shiftRegister, 16 - this.segmentSize, i, i + this.segmentSize);\n        }\n\n        return plaintext;\n    }\n\n    /**\n     *  Mode Of Operation - Output Feedback (OFB)\n     */\n    var ModeOfOperationOFB = function(key, iv) {\n        if (!(this instanceof ModeOfOperationOFB)) {\n            throw Error('AES must be instanitated with `new`');\n        }\n\n        this.description = \"Output Feedback\";\n        this.name = \"ofb\";\n\n        if (!iv) {\n            iv = createArray(16);\n\n        } else if (iv.length != 16) {\n            throw new Error('invalid initialation vector size (must be 16 bytes)');\n        }\n\n        this._lastPrecipher = coerceArray(iv, true);\n        this._lastPrecipherIndex = 16;\n\n        this._aes = new AES(key);\n    }\n\n    ModeOfOperationOFB.prototype.encrypt = function(plaintext) {\n        var encrypted = coerceArray(plaintext, true);\n\n        for (var i = 0; i < encrypted.length; i++) {\n            if (this._lastPrecipherIndex === 16) {\n                this._lastPrecipher = this._aes.encrypt(this._lastPrecipher);\n                this._lastPrecipherIndex = 0;\n            }\n            encrypted[i] ^= this._lastPrecipher[this._lastPrecipherIndex++];\n        }\n\n        return encrypted;\n    }\n\n    // Decryption is symetric\n    ModeOfOperationOFB.prototype.decrypt = ModeOfOperationOFB.prototype.encrypt;\n\n\n    /**\n     *  Counter object for CTR common mode of operation\n     */\n    var Counter = function(initialValue) {\n        if (!(this instanceof Counter)) {\n            throw Error('Counter must be instanitated with `new`');\n        }\n\n        // We allow 0, but anything false-ish uses the default 1\n        if (initialValue !== 0 && !initialValue) { initialValue = 1; }\n\n        if (typeof(initialValue) === 'number') {\n            this._counter = createArray(16);\n            this.setValue(initialValue);\n\n        } else {\n            this.setBytes(initialValue);\n        }\n    }\n\n    Counter.prototype.setValue = function(value) {\n        if (typeof(value) !== 'number' || parseInt(value) != value) {\n            throw new Error('invalid counter value (must be an integer)');\n        }\n\n        // We cannot safely handle numbers beyond the safe range for integers\n        if (value > Number.MAX_SAFE_INTEGER) {\n            throw new Error('integer value out of safe range');\n        }\n\n        for (var index = 15; index >= 0; --index) {\n            this._counter[index] = value % 256;\n            value = parseInt(value / 256);\n        }\n    }\n\n    Counter.prototype.setBytes = function(bytes) {\n        bytes = coerceArray(bytes, true);\n\n        if (bytes.length != 16) {\n            throw new Error('invalid counter bytes size (must be 16 bytes)');\n        }\n\n        this._counter = bytes;\n    };\n\n    Counter.prototype.increment = function() {\n        for (var i = 15; i >= 0; i--) {\n            if (this._counter[i] === 255) {\n                this._counter[i] = 0;\n            } else {\n                this._counter[i]++;\n                break;\n            }\n        }\n    }\n\n\n    /**\n     *  Mode Of Operation - Counter (CTR)\n     */\n    var ModeOfOperationCTR = function(key, counter) {\n        if (!(this instanceof ModeOfOperationCTR)) {\n            throw Error('AES must be instanitated with `new`');\n        }\n\n        this.description = \"Counter\";\n        this.name = \"ctr\";\n\n        if (!(counter instanceof Counter)) {\n            counter = new Counter(counter)\n        }\n\n        this._counter = counter;\n\n        this._remainingCounter = null;\n        this._remainingCounterIndex = 16;\n\n        this._aes = new AES(key);\n    }\n\n    ModeOfOperationCTR.prototype.encrypt = function(plaintext) {\n        var encrypted = coerceArray(plaintext, true);\n\n        for (var i = 0; i < encrypted.length; i++) {\n            if (this._remainingCounterIndex === 16) {\n                this._remainingCounter = this._aes.encrypt(this._counter._counter);\n                this._remainingCounterIndex = 0;\n                this._counter.increment();\n            }\n            encrypted[i] ^= this._remainingCounter[this._remainingCounterIndex++];\n        }\n\n        return encrypted;\n    }\n\n    // Decryption is symetric\n    ModeOfOperationCTR.prototype.decrypt = ModeOfOperationCTR.prototype.encrypt;\n\n\n    ///////////////////////\n    // Padding\n\n    // See:https://tools.ietf.org/html/rfc2315\n    function pkcs7pad(data) {\n        data = coerceArray(data, true);\n        var padder = 16 - (data.length % 16);\n        var result = createArray(data.length + padder);\n        copyArray(data, result);\n        for (var i = data.length; i < result.length; i++) {\n            result[i] = padder;\n        }\n        return result;\n    }\n\n    function pkcs7strip(data) {\n        data = coerceArray(data, true);\n        if (data.length < 16) { throw new Error('PKCS#7 invalid length'); }\n\n        var padder = data[data.length - 1];\n        if (padder > 16) { throw new Error('PKCS#7 padding byte out of range'); }\n\n        var length = data.length - padder;\n        for (var i = 0; i < padder; i++) {\n            if (data[length + i] !== padder) {\n                throw new Error('PKCS#7 invalid padding byte');\n            }\n        }\n\n        var result = createArray(length);\n        copyArray(data, result, 0, 0, length);\n        return result;\n    }\n\n    ///////////////////////\n    // Exporting\n\n\n    // The block cipher\n    var aesjs = {\n        AES: AES,\n        Counter: Counter,\n\n        ModeOfOperation: {\n            ecb: ModeOfOperationECB,\n            cbc: ModeOfOperationCBC,\n            cfb: ModeOfOperationCFB,\n            ofb: ModeOfOperationOFB,\n            ctr: ModeOfOperationCTR\n        },\n\n        utils: {\n            hex: convertHex,\n            utf8: convertUtf8\n        },\n\n        padding: {\n            pkcs7: {\n                pad: pkcs7pad,\n                strip: pkcs7strip\n            }\n        },\n\n        _arrayTest: {\n            coerceArray: coerceArray,\n            createArray: createArray,\n            copyArray: copyArray,\n        }\n    };\n\n\n    // node.js\n    if (typeof exports !== 'undefined') {\n        module.exports = aesjs\n\n    // RequireJS/AMD\n    // http://www.requirejs.org/docs/api.html\n    // https://github.com/amdjs/amdjs-api/wiki/AMD\n    } else if (typeof(define) === 'function' && define.amd) {\n        define([], function() { return aesjs; });\n\n    // Web Browsers\n    } else {\n\n        // If there was an existing library at \"aesjs\" make sure it's still available\n        if (root.aesjs) {\n            aesjs._aesjs = root.aesjs;\n        }\n\n        root.aesjs = aesjs;\n    }\n\n\n})(this);\n","/*!\n Copyright (c) Peculiar Ventures, LLC\n*/\n\nfunction getUTCDate(date) {\r\n    return new Date(date.getTime() + (date.getTimezoneOffset() * 60000));\r\n}\r\nfunction getParametersValue(parameters, name, defaultValue) {\r\n    var _a;\r\n    if ((parameters instanceof Object) === false) {\r\n        return defaultValue;\r\n    }\r\n    return (_a = parameters[name]) !== null && _a !== void 0 ? _a : defaultValue;\r\n}\r\nfunction bufferToHexCodes(inputBuffer, inputOffset = 0, inputLength = (inputBuffer.byteLength - inputOffset), insertSpace = false) {\r\n    let result = \"\";\r\n    for (const item of (new Uint8Array(inputBuffer, inputOffset, inputLength))) {\r\n        const str = item.toString(16).toUpperCase();\r\n        if (str.length === 1) {\r\n            result += \"0\";\r\n        }\r\n        result += str;\r\n        if (insertSpace) {\r\n            result += \" \";\r\n        }\r\n    }\r\n    return result.trim();\r\n}\r\nfunction checkBufferParams(baseBlock, inputBuffer, inputOffset, inputLength) {\r\n    if (!(inputBuffer instanceof ArrayBuffer)) {\r\n        baseBlock.error = \"Wrong parameter: inputBuffer must be \\\"ArrayBuffer\\\"\";\r\n        return false;\r\n    }\r\n    if (!inputBuffer.byteLength) {\r\n        baseBlock.error = \"Wrong parameter: inputBuffer has zero length\";\r\n        return false;\r\n    }\r\n    if (inputOffset < 0) {\r\n        baseBlock.error = \"Wrong parameter: inputOffset less than zero\";\r\n        return false;\r\n    }\r\n    if (inputLength < 0) {\r\n        baseBlock.error = \"Wrong parameter: inputLength less than zero\";\r\n        return false;\r\n    }\r\n    if ((inputBuffer.byteLength - inputOffset - inputLength) < 0) {\r\n        baseBlock.error = \"End of input reached before message was fully decoded (inconsistent offset and length values)\";\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\nfunction utilFromBase(inputBuffer, inputBase) {\r\n    let result = 0;\r\n    if (inputBuffer.length === 1) {\r\n        return inputBuffer[0];\r\n    }\r\n    for (let i = (inputBuffer.length - 1); i >= 0; i--) {\r\n        result += inputBuffer[(inputBuffer.length - 1) - i] * Math.pow(2, inputBase * i);\r\n    }\r\n    return result;\r\n}\r\nfunction utilToBase(value, base, reserved = (-1)) {\r\n    const internalReserved = reserved;\r\n    let internalValue = value;\r\n    let result = 0;\r\n    let biggest = Math.pow(2, base);\r\n    for (let i = 1; i < 8; i++) {\r\n        if (value < biggest) {\r\n            let retBuf;\r\n            if (internalReserved < 0) {\r\n                retBuf = new ArrayBuffer(i);\r\n                result = i;\r\n            }\r\n            else {\r\n                if (internalReserved < i) {\r\n                    return (new ArrayBuffer(0));\r\n                }\r\n                retBuf = new ArrayBuffer(internalReserved);\r\n                result = internalReserved;\r\n            }\r\n            const retView = new Uint8Array(retBuf);\r\n            for (let j = (i - 1); j >= 0; j--) {\r\n                const basis = Math.pow(2, j * base);\r\n                retView[result - j - 1] = Math.floor(internalValue / basis);\r\n                internalValue -= (retView[result - j - 1]) * basis;\r\n            }\r\n            return retBuf;\r\n        }\r\n        biggest *= Math.pow(2, base);\r\n    }\r\n    return new ArrayBuffer(0);\r\n}\r\nfunction utilConcatBuf(...buffers) {\r\n    let outputLength = 0;\r\n    let prevLength = 0;\r\n    for (const buffer of buffers) {\r\n        outputLength += buffer.byteLength;\r\n    }\r\n    const retBuf = new ArrayBuffer(outputLength);\r\n    const retView = new Uint8Array(retBuf);\r\n    for (const buffer of buffers) {\r\n        retView.set(new Uint8Array(buffer), prevLength);\r\n        prevLength += buffer.byteLength;\r\n    }\r\n    return retBuf;\r\n}\r\nfunction utilConcatView(...views) {\r\n    let outputLength = 0;\r\n    let prevLength = 0;\r\n    for (const view of views) {\r\n        outputLength += view.length;\r\n    }\r\n    const retBuf = new ArrayBuffer(outputLength);\r\n    const retView = new Uint8Array(retBuf);\r\n    for (const view of views) {\r\n        retView.set(view, prevLength);\r\n        prevLength += view.length;\r\n    }\r\n    return retView;\r\n}\r\nfunction utilDecodeTC() {\r\n    const buf = new Uint8Array(this.valueHex);\r\n    if (this.valueHex.byteLength >= 2) {\r\n        const condition1 = (buf[0] === 0xFF) && (buf[1] & 0x80);\r\n        const condition2 = (buf[0] === 0x00) && ((buf[1] & 0x80) === 0x00);\r\n        if (condition1 || condition2) {\r\n            this.warnings.push(\"Needlessly long format\");\r\n        }\r\n    }\r\n    const bigIntBuffer = new ArrayBuffer(this.valueHex.byteLength);\r\n    const bigIntView = new Uint8Array(bigIntBuffer);\r\n    for (let i = 0; i < this.valueHex.byteLength; i++) {\r\n        bigIntView[i] = 0;\r\n    }\r\n    bigIntView[0] = (buf[0] & 0x80);\r\n    const bigInt = utilFromBase(bigIntView, 8);\r\n    const smallIntBuffer = new ArrayBuffer(this.valueHex.byteLength);\r\n    const smallIntView = new Uint8Array(smallIntBuffer);\r\n    for (let j = 0; j < this.valueHex.byteLength; j++) {\r\n        smallIntView[j] = buf[j];\r\n    }\r\n    smallIntView[0] &= 0x7F;\r\n    const smallInt = utilFromBase(smallIntView, 8);\r\n    return (smallInt - bigInt);\r\n}\r\nfunction utilEncodeTC(value) {\r\n    const modValue = (value < 0) ? (value * (-1)) : value;\r\n    let bigInt = 128;\r\n    for (let i = 1; i < 8; i++) {\r\n        if (modValue <= bigInt) {\r\n            if (value < 0) {\r\n                const smallInt = bigInt - modValue;\r\n                const retBuf = utilToBase(smallInt, 8, i);\r\n                const retView = new Uint8Array(retBuf);\r\n                retView[0] |= 0x80;\r\n                return retBuf;\r\n            }\r\n            let retBuf = utilToBase(modValue, 8, i);\r\n            let retView = new Uint8Array(retBuf);\r\n            if (retView[0] & 0x80) {\r\n                const tempBuf = retBuf.slice(0);\r\n                const tempView = new Uint8Array(tempBuf);\r\n                retBuf = new ArrayBuffer(retBuf.byteLength + 1);\r\n                retView = new Uint8Array(retBuf);\r\n                for (let k = 0; k < tempBuf.byteLength; k++) {\r\n                    retView[k + 1] = tempView[k];\r\n                }\r\n                retView[0] = 0x00;\r\n            }\r\n            return retBuf;\r\n        }\r\n        bigInt *= Math.pow(2, 8);\r\n    }\r\n    return (new ArrayBuffer(0));\r\n}\r\nfunction isEqualBuffer(inputBuffer1, inputBuffer2) {\r\n    if (inputBuffer1.byteLength !== inputBuffer2.byteLength) {\r\n        return false;\r\n    }\r\n    const view1 = new Uint8Array(inputBuffer1);\r\n    const view2 = new Uint8Array(inputBuffer2);\r\n    for (let i = 0; i < view1.length; i++) {\r\n        if (view1[i] !== view2[i]) {\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\nfunction padNumber(inputNumber, fullLength) {\r\n    const str = inputNumber.toString(10);\r\n    if (fullLength < str.length) {\r\n        return \"\";\r\n    }\r\n    const dif = fullLength - str.length;\r\n    const padding = new Array(dif);\r\n    for (let i = 0; i < dif; i++) {\r\n        padding[i] = \"0\";\r\n    }\r\n    const paddingString = padding.join(\"\");\r\n    return paddingString.concat(str);\r\n}\r\nconst base64Template = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\r\nconst base64UrlTemplate = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=\";\r\nfunction toBase64(input, useUrlTemplate = false, skipPadding = false, skipLeadingZeros = false) {\r\n    let i = 0;\r\n    let flag1 = 0;\r\n    let flag2 = 0;\r\n    let output = \"\";\r\n    const template = (useUrlTemplate) ? base64UrlTemplate : base64Template;\r\n    if (skipLeadingZeros) {\r\n        let nonZeroPosition = 0;\r\n        for (let i = 0; i < input.length; i++) {\r\n            if (input.charCodeAt(i) !== 0) {\r\n                nonZeroPosition = i;\r\n                break;\r\n            }\r\n        }\r\n        input = input.slice(nonZeroPosition);\r\n    }\r\n    while (i < input.length) {\r\n        const chr1 = input.charCodeAt(i++);\r\n        if (i >= input.length) {\r\n            flag1 = 1;\r\n        }\r\n        const chr2 = input.charCodeAt(i++);\r\n        if (i >= input.length) {\r\n            flag2 = 1;\r\n        }\r\n        const chr3 = input.charCodeAt(i++);\r\n        const enc1 = chr1 >> 2;\r\n        const enc2 = ((chr1 & 0x03) << 4) | (chr2 >> 4);\r\n        let enc3 = ((chr2 & 0x0F) << 2) | (chr3 >> 6);\r\n        let enc4 = chr3 & 0x3F;\r\n        if (flag1 === 1) {\r\n            enc3 = enc4 = 64;\r\n        }\r\n        else {\r\n            if (flag2 === 1) {\r\n                enc4 = 64;\r\n            }\r\n        }\r\n        if (skipPadding) {\r\n            if (enc3 === 64) {\r\n                output += `${template.charAt(enc1)}${template.charAt(enc2)}`;\r\n            }\r\n            else {\r\n                if (enc4 === 64) {\r\n                    output += `${template.charAt(enc1)}${template.charAt(enc2)}${template.charAt(enc3)}`;\r\n                }\r\n                else {\r\n                    output += `${template.charAt(enc1)}${template.charAt(enc2)}${template.charAt(enc3)}${template.charAt(enc4)}`;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            output += `${template.charAt(enc1)}${template.charAt(enc2)}${template.charAt(enc3)}${template.charAt(enc4)}`;\r\n        }\r\n    }\r\n    return output;\r\n}\r\nfunction fromBase64(input, useUrlTemplate = false, cutTailZeros = false) {\r\n    const template = (useUrlTemplate) ? base64UrlTemplate : base64Template;\r\n    function indexOf(toSearch) {\r\n        for (let i = 0; i < 64; i++) {\r\n            if (template.charAt(i) === toSearch)\r\n                return i;\r\n        }\r\n        return 64;\r\n    }\r\n    function test(incoming) {\r\n        return ((incoming === 64) ? 0x00 : incoming);\r\n    }\r\n    let i = 0;\r\n    let output = \"\";\r\n    while (i < input.length) {\r\n        const enc1 = indexOf(input.charAt(i++));\r\n        const enc2 = (i >= input.length) ? 0x00 : indexOf(input.charAt(i++));\r\n        const enc3 = (i >= input.length) ? 0x00 : indexOf(input.charAt(i++));\r\n        const enc4 = (i >= input.length) ? 0x00 : indexOf(input.charAt(i++));\r\n        const chr1 = (test(enc1) << 2) | (test(enc2) >> 4);\r\n        const chr2 = ((test(enc2) & 0x0F) << 4) | (test(enc3) >> 2);\r\n        const chr3 = ((test(enc3) & 0x03) << 6) | test(enc4);\r\n        output += String.fromCharCode(chr1);\r\n        if (enc3 !== 64) {\r\n            output += String.fromCharCode(chr2);\r\n        }\r\n        if (enc4 !== 64) {\r\n            output += String.fromCharCode(chr3);\r\n        }\r\n    }\r\n    if (cutTailZeros) {\r\n        const outputLength = output.length;\r\n        let nonZeroStart = (-1);\r\n        for (let i = (outputLength - 1); i >= 0; i--) {\r\n            if (output.charCodeAt(i) !== 0) {\r\n                nonZeroStart = i;\r\n                break;\r\n            }\r\n        }\r\n        if (nonZeroStart !== (-1)) {\r\n            output = output.slice(0, nonZeroStart + 1);\r\n        }\r\n        else {\r\n            output = \"\";\r\n        }\r\n    }\r\n    return output;\r\n}\r\nfunction arrayBufferToString(buffer) {\r\n    let resultString = \"\";\r\n    const view = new Uint8Array(buffer);\r\n    for (const element of view) {\r\n        resultString += String.fromCharCode(element);\r\n    }\r\n    return resultString;\r\n}\r\nfunction stringToArrayBuffer(str) {\r\n    const stringLength = str.length;\r\n    const resultBuffer = new ArrayBuffer(stringLength);\r\n    const resultView = new Uint8Array(resultBuffer);\r\n    for (let i = 0; i < stringLength; i++) {\r\n        resultView[i] = str.charCodeAt(i);\r\n    }\r\n    return resultBuffer;\r\n}\r\nconst log2 = Math.log(2);\r\nfunction nearestPowerOf2(length) {\r\n    const base = (Math.log(length) / log2);\r\n    const floor = Math.floor(base);\r\n    const round = Math.round(base);\r\n    return ((floor === round) ? floor : round);\r\n}\r\nfunction clearProps(object, propsArray) {\r\n    for (const prop of propsArray) {\r\n        delete object[prop];\r\n    }\r\n}\n\nexport { arrayBufferToString, bufferToHexCodes, checkBufferParams, clearProps, fromBase64, getParametersValue, getUTCDate, isEqualBuffer, nearestPowerOf2, padNumber, stringToArrayBuffer, toBase64, utilConcatBuf, utilConcatView, utilDecodeTC, utilEncodeTC, utilFromBase, utilToBase };\n","/*!\n * Copyright (c) 2014, GMO GlobalSign\n * Copyright (c) 2015-2022, Peculiar Ventures\n * All rights reserved.\n * \n * Author 2014-2019, Yury Strozhevsky\n * \n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n * \n * * Redistributions of source code must retain the above copyright notice, this\n *   list of conditions and the following disclaimer.\n * \n * * Redistributions in binary form must reproduce the above copyright notice, this\n *   list of conditions and the following disclaimer in the documentation and/or\n *   other materials provided with the distribution.\n * \n * * Neither the name of the copyright holder nor the names of its\n *   contributors may be used to endorse or promote products derived from\n *   this software without specific prior written permission.\n * \n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n * \n */\n\nimport * as pvtsutils from 'pvtsutils';\nimport * as pvutils from 'pvutils';\n\nfunction assertBigInt() {\r\n    if (typeof BigInt === \"undefined\") {\r\n        throw new Error(\"BigInt is not defined. Your environment doesn't implement BigInt.\");\r\n    }\r\n}\r\nfunction concat(buffers) {\r\n    let outputLength = 0;\r\n    let prevLength = 0;\r\n    for (let i = 0; i < buffers.length; i++) {\r\n        const buffer = buffers[i];\r\n        outputLength += buffer.byteLength;\r\n    }\r\n    const retView = new Uint8Array(outputLength);\r\n    for (let i = 0; i < buffers.length; i++) {\r\n        const buffer = buffers[i];\r\n        retView.set(new Uint8Array(buffer), prevLength);\r\n        prevLength += buffer.byteLength;\r\n    }\r\n    return retView.buffer;\r\n}\r\nfunction checkBufferParams(baseBlock, inputBuffer, inputOffset, inputLength) {\r\n    if (!(inputBuffer instanceof Uint8Array)) {\r\n        baseBlock.error = \"Wrong parameter: inputBuffer must be 'Uint8Array'\";\r\n        return false;\r\n    }\r\n    if (!inputBuffer.byteLength) {\r\n        baseBlock.error = \"Wrong parameter: inputBuffer has zero length\";\r\n        return false;\r\n    }\r\n    if (inputOffset < 0) {\r\n        baseBlock.error = \"Wrong parameter: inputOffset less than zero\";\r\n        return false;\r\n    }\r\n    if (inputLength < 0) {\r\n        baseBlock.error = \"Wrong parameter: inputLength less than zero\";\r\n        return false;\r\n    }\r\n    if ((inputBuffer.byteLength - inputOffset - inputLength) < 0) {\r\n        baseBlock.error = \"End of input reached before message was fully decoded (inconsistent offset and length values)\";\r\n        return false;\r\n    }\r\n    return true;\r\n}\n\nclass ViewWriter {\r\n    constructor() {\r\n        this.items = [];\r\n    }\r\n    write(buf) {\r\n        this.items.push(buf);\r\n    }\r\n    final() {\r\n        return concat(this.items);\r\n    }\r\n}\n\nconst powers2 = [new Uint8Array([1])];\r\nconst digitsString = \"0123456789\";\r\nconst NAME = \"name\";\r\nconst VALUE_HEX_VIEW = \"valueHexView\";\r\nconst IS_HEX_ONLY = \"isHexOnly\";\r\nconst ID_BLOCK = \"idBlock\";\r\nconst TAG_CLASS = \"tagClass\";\r\nconst TAG_NUMBER = \"tagNumber\";\r\nconst IS_CONSTRUCTED = \"isConstructed\";\r\nconst FROM_BER = \"fromBER\";\r\nconst TO_BER = \"toBER\";\r\nconst LOCAL = \"local\";\r\nconst EMPTY_STRING = \"\";\r\nconst EMPTY_BUFFER = new ArrayBuffer(0);\r\nconst EMPTY_VIEW = new Uint8Array(0);\r\nconst END_OF_CONTENT_NAME = \"EndOfContent\";\r\nconst OCTET_STRING_NAME = \"OCTET STRING\";\r\nconst BIT_STRING_NAME = \"BIT STRING\";\n\nfunction HexBlock(BaseClass) {\r\n    var _a;\r\n    return _a = class Some extends BaseClass {\r\n            constructor(...args) {\r\n                var _a;\r\n                super(...args);\r\n                const params = args[0] || {};\r\n                this.isHexOnly = (_a = params.isHexOnly) !== null && _a !== void 0 ? _a : false;\r\n                this.valueHexView = params.valueHex ? pvtsutils.BufferSourceConverter.toUint8Array(params.valueHex) : EMPTY_VIEW;\r\n            }\r\n            get valueHex() {\r\n                return this.valueHexView.slice().buffer;\r\n            }\r\n            set valueHex(value) {\r\n                this.valueHexView = new Uint8Array(value);\r\n            }\r\n            fromBER(inputBuffer, inputOffset, inputLength) {\r\n                const view = inputBuffer instanceof ArrayBuffer ? new Uint8Array(inputBuffer) : inputBuffer;\r\n                if (!checkBufferParams(this, view, inputOffset, inputLength)) {\r\n                    return -1;\r\n                }\r\n                const endLength = inputOffset + inputLength;\r\n                this.valueHexView = view.subarray(inputOffset, endLength);\r\n                if (!this.valueHexView.length) {\r\n                    this.warnings.push(\"Zero buffer length\");\r\n                    return inputOffset;\r\n                }\r\n                this.blockLength = inputLength;\r\n                return endLength;\r\n            }\r\n            toBER(sizeOnly = false) {\r\n                if (!this.isHexOnly) {\r\n                    this.error = \"Flag 'isHexOnly' is not set, abort\";\r\n                    return EMPTY_BUFFER;\r\n                }\r\n                if (sizeOnly) {\r\n                    return new ArrayBuffer(this.valueHexView.byteLength);\r\n                }\r\n                return (this.valueHexView.byteLength === this.valueHexView.buffer.byteLength)\r\n                    ? this.valueHexView.buffer\r\n                    : this.valueHexView.slice().buffer;\r\n            }\r\n            toJSON() {\r\n                return {\r\n                    ...super.toJSON(),\r\n                    isHexOnly: this.isHexOnly,\r\n                    valueHex: pvtsutils.Convert.ToHex(this.valueHexView),\r\n                };\r\n            }\r\n        },\r\n        _a.NAME = \"hexBlock\",\r\n        _a;\r\n}\n\nclass LocalBaseBlock {\r\n    constructor({ blockLength = 0, error = EMPTY_STRING, warnings = [], valueBeforeDecode = EMPTY_VIEW, } = {}) {\r\n        this.blockLength = blockLength;\r\n        this.error = error;\r\n        this.warnings = warnings;\r\n        this.valueBeforeDecodeView = pvtsutils.BufferSourceConverter.toUint8Array(valueBeforeDecode);\r\n    }\r\n    static blockName() {\r\n        return this.NAME;\r\n    }\r\n    get valueBeforeDecode() {\r\n        return this.valueBeforeDecodeView.slice().buffer;\r\n    }\r\n    set valueBeforeDecode(value) {\r\n        this.valueBeforeDecodeView = new Uint8Array(value);\r\n    }\r\n    toJSON() {\r\n        return {\r\n            blockName: this.constructor.NAME,\r\n            blockLength: this.blockLength,\r\n            error: this.error,\r\n            warnings: this.warnings,\r\n            valueBeforeDecode: pvtsutils.Convert.ToHex(this.valueBeforeDecodeView),\r\n        };\r\n    }\r\n}\r\nLocalBaseBlock.NAME = \"baseBlock\";\n\nclass ValueBlock extends LocalBaseBlock {\r\n    fromBER(inputBuffer, inputOffset, inputLength) {\r\n        throw TypeError(\"User need to make a specific function in a class which extends 'ValueBlock'\");\r\n    }\r\n    toBER(sizeOnly, writer) {\r\n        throw TypeError(\"User need to make a specific function in a class which extends 'ValueBlock'\");\r\n    }\r\n}\r\nValueBlock.NAME = \"valueBlock\";\n\nclass LocalIdentificationBlock extends HexBlock(LocalBaseBlock) {\r\n    constructor({ idBlock = {}, } = {}) {\r\n        var _a, _b, _c, _d;\r\n        super();\r\n        if (idBlock) {\r\n            this.isHexOnly = (_a = idBlock.isHexOnly) !== null && _a !== void 0 ? _a : false;\r\n            this.valueHexView = idBlock.valueHex ? pvtsutils.BufferSourceConverter.toUint8Array(idBlock.valueHex) : EMPTY_VIEW;\r\n            this.tagClass = (_b = idBlock.tagClass) !== null && _b !== void 0 ? _b : -1;\r\n            this.tagNumber = (_c = idBlock.tagNumber) !== null && _c !== void 0 ? _c : -1;\r\n            this.isConstructed = (_d = idBlock.isConstructed) !== null && _d !== void 0 ? _d : false;\r\n        }\r\n        else {\r\n            this.tagClass = -1;\r\n            this.tagNumber = -1;\r\n            this.isConstructed = false;\r\n        }\r\n    }\r\n    toBER(sizeOnly = false) {\r\n        let firstOctet = 0;\r\n        switch (this.tagClass) {\r\n            case 1:\r\n                firstOctet |= 0x00;\r\n                break;\r\n            case 2:\r\n                firstOctet |= 0x40;\r\n                break;\r\n            case 3:\r\n                firstOctet |= 0x80;\r\n                break;\r\n            case 4:\r\n                firstOctet |= 0xC0;\r\n                break;\r\n            default:\r\n                this.error = \"Unknown tag class\";\r\n                return EMPTY_BUFFER;\r\n        }\r\n        if (this.isConstructed)\r\n            firstOctet |= 0x20;\r\n        if (this.tagNumber < 31 && !this.isHexOnly) {\r\n            const retView = new Uint8Array(1);\r\n            if (!sizeOnly) {\r\n                let number = this.tagNumber;\r\n                number &= 0x1F;\r\n                firstOctet |= number;\r\n                retView[0] = firstOctet;\r\n            }\r\n            return retView.buffer;\r\n        }\r\n        if (!this.isHexOnly) {\r\n            const encodedBuf = pvutils.utilToBase(this.tagNumber, 7);\r\n            const encodedView = new Uint8Array(encodedBuf);\r\n            const size = encodedBuf.byteLength;\r\n            const retView = new Uint8Array(size + 1);\r\n            retView[0] = (firstOctet | 0x1F);\r\n            if (!sizeOnly) {\r\n                for (let i = 0; i < (size - 1); i++)\r\n                    retView[i + 1] = encodedView[i] | 0x80;\r\n                retView[size] = encodedView[size - 1];\r\n            }\r\n            return retView.buffer;\r\n        }\r\n        const retView = new Uint8Array(this.valueHexView.byteLength + 1);\r\n        retView[0] = (firstOctet | 0x1F);\r\n        if (!sizeOnly) {\r\n            const curView = this.valueHexView;\r\n            for (let i = 0; i < (curView.length - 1); i++)\r\n                retView[i + 1] = curView[i] | 0x80;\r\n            retView[this.valueHexView.byteLength] = curView[curView.length - 1];\r\n        }\r\n        return retView.buffer;\r\n    }\r\n    fromBER(inputBuffer, inputOffset, inputLength) {\r\n        const inputView = pvtsutils.BufferSourceConverter.toUint8Array(inputBuffer);\r\n        if (!checkBufferParams(this, inputView, inputOffset, inputLength)) {\r\n            return -1;\r\n        }\r\n        const intBuffer = inputView.subarray(inputOffset, inputOffset + inputLength);\r\n        if (intBuffer.length === 0) {\r\n            this.error = \"Zero buffer length\";\r\n            return -1;\r\n        }\r\n        const tagClassMask = intBuffer[0] & 0xC0;\r\n        switch (tagClassMask) {\r\n            case 0x00:\r\n                this.tagClass = (1);\r\n                break;\r\n            case 0x40:\r\n                this.tagClass = (2);\r\n                break;\r\n            case 0x80:\r\n                this.tagClass = (3);\r\n                break;\r\n            case 0xC0:\r\n                this.tagClass = (4);\r\n                break;\r\n            default:\r\n                this.error = \"Unknown tag class\";\r\n                return -1;\r\n        }\r\n        this.isConstructed = (intBuffer[0] & 0x20) === 0x20;\r\n        this.isHexOnly = false;\r\n        const tagNumberMask = intBuffer[0] & 0x1F;\r\n        if (tagNumberMask !== 0x1F) {\r\n            this.tagNumber = (tagNumberMask);\r\n            this.blockLength = 1;\r\n        }\r\n        else {\r\n            let count = 1;\r\n            let intTagNumberBuffer = this.valueHexView = new Uint8Array(255);\r\n            let tagNumberBufferMaxLength = 255;\r\n            while (intBuffer[count] & 0x80) {\r\n                intTagNumberBuffer[count - 1] = intBuffer[count] & 0x7F;\r\n                count++;\r\n                if (count >= intBuffer.length) {\r\n                    this.error = \"End of input reached before message was fully decoded\";\r\n                    return -1;\r\n                }\r\n                if (count === tagNumberBufferMaxLength) {\r\n                    tagNumberBufferMaxLength += 255;\r\n                    const tempBufferView = new Uint8Array(tagNumberBufferMaxLength);\r\n                    for (let i = 0; i < intTagNumberBuffer.length; i++)\r\n                        tempBufferView[i] = intTagNumberBuffer[i];\r\n                    intTagNumberBuffer = this.valueHexView = new Uint8Array(tagNumberBufferMaxLength);\r\n                }\r\n            }\r\n            this.blockLength = (count + 1);\r\n            intTagNumberBuffer[count - 1] = intBuffer[count] & 0x7F;\r\n            const tempBufferView = new Uint8Array(count);\r\n            for (let i = 0; i < count; i++)\r\n                tempBufferView[i] = intTagNumberBuffer[i];\r\n            intTagNumberBuffer = this.valueHexView = new Uint8Array(count);\r\n            intTagNumberBuffer.set(tempBufferView);\r\n            if (this.blockLength <= 9)\r\n                this.tagNumber = pvutils.utilFromBase(intTagNumberBuffer, 7);\r\n            else {\r\n                this.isHexOnly = true;\r\n                this.warnings.push(\"Tag too long, represented as hex-coded\");\r\n            }\r\n        }\r\n        if (((this.tagClass === 1)) &&\r\n            (this.isConstructed)) {\r\n            switch (this.tagNumber) {\r\n                case 1:\r\n                case 2:\r\n                case 5:\r\n                case 6:\r\n                case 9:\r\n                case 13:\r\n                case 14:\r\n                case 23:\r\n                case 24:\r\n                case 31:\r\n                case 32:\r\n                case 33:\r\n                case 34:\r\n                    this.error = \"Constructed encoding used for primitive type\";\r\n                    return -1;\r\n            }\r\n        }\r\n        return (inputOffset + this.blockLength);\r\n    }\r\n    toJSON() {\r\n        return {\r\n            ...super.toJSON(),\r\n            tagClass: this.tagClass,\r\n            tagNumber: this.tagNumber,\r\n            isConstructed: this.isConstructed,\r\n        };\r\n    }\r\n}\r\nLocalIdentificationBlock.NAME = \"identificationBlock\";\n\nclass LocalLengthBlock extends LocalBaseBlock {\r\n    constructor({ lenBlock = {}, } = {}) {\r\n        var _a, _b, _c;\r\n        super();\r\n        this.isIndefiniteForm = (_a = lenBlock.isIndefiniteForm) !== null && _a !== void 0 ? _a : false;\r\n        this.longFormUsed = (_b = lenBlock.longFormUsed) !== null && _b !== void 0 ? _b : false;\r\n        this.length = (_c = lenBlock.length) !== null && _c !== void 0 ? _c : 0;\r\n    }\r\n    fromBER(inputBuffer, inputOffset, inputLength) {\r\n        const view = pvtsutils.BufferSourceConverter.toUint8Array(inputBuffer);\r\n        if (!checkBufferParams(this, view, inputOffset, inputLength)) {\r\n            return -1;\r\n        }\r\n        const intBuffer = view.subarray(inputOffset, inputOffset + inputLength);\r\n        if (intBuffer.length === 0) {\r\n            this.error = \"Zero buffer length\";\r\n            return -1;\r\n        }\r\n        if (intBuffer[0] === 0xFF) {\r\n            this.error = \"Length block 0xFF is reserved by standard\";\r\n            return -1;\r\n        }\r\n        this.isIndefiniteForm = intBuffer[0] === 0x80;\r\n        if (this.isIndefiniteForm) {\r\n            this.blockLength = 1;\r\n            return (inputOffset + this.blockLength);\r\n        }\r\n        this.longFormUsed = !!(intBuffer[0] & 0x80);\r\n        if (this.longFormUsed === false) {\r\n            this.length = (intBuffer[0]);\r\n            this.blockLength = 1;\r\n            return (inputOffset + this.blockLength);\r\n        }\r\n        const count = intBuffer[0] & 0x7F;\r\n        if (count > 8) {\r\n            this.error = \"Too big integer\";\r\n            return -1;\r\n        }\r\n        if ((count + 1) > intBuffer.length) {\r\n            this.error = \"End of input reached before message was fully decoded\";\r\n            return -1;\r\n        }\r\n        const lenOffset = inputOffset + 1;\r\n        const lengthBufferView = view.subarray(lenOffset, lenOffset + count);\r\n        if (lengthBufferView[count - 1] === 0x00)\r\n            this.warnings.push(\"Needlessly long encoded length\");\r\n        this.length = pvutils.utilFromBase(lengthBufferView, 8);\r\n        if (this.longFormUsed && (this.length <= 127))\r\n            this.warnings.push(\"Unnecessary usage of long length form\");\r\n        this.blockLength = count + 1;\r\n        return (inputOffset + this.blockLength);\r\n    }\r\n    toBER(sizeOnly = false) {\r\n        let retBuf;\r\n        let retView;\r\n        if (this.length > 127)\r\n            this.longFormUsed = true;\r\n        if (this.isIndefiniteForm) {\r\n            retBuf = new ArrayBuffer(1);\r\n            if (sizeOnly === false) {\r\n                retView = new Uint8Array(retBuf);\r\n                retView[0] = 0x80;\r\n            }\r\n            return retBuf;\r\n        }\r\n        if (this.longFormUsed) {\r\n            const encodedBuf = pvutils.utilToBase(this.length, 8);\r\n            if (encodedBuf.byteLength > 127) {\r\n                this.error = \"Too big length\";\r\n                return (EMPTY_BUFFER);\r\n            }\r\n            retBuf = new ArrayBuffer(encodedBuf.byteLength + 1);\r\n            if (sizeOnly)\r\n                return retBuf;\r\n            const encodedView = new Uint8Array(encodedBuf);\r\n            retView = new Uint8Array(retBuf);\r\n            retView[0] = encodedBuf.byteLength | 0x80;\r\n            for (let i = 0; i < encodedBuf.byteLength; i++)\r\n                retView[i + 1] = encodedView[i];\r\n            return retBuf;\r\n        }\r\n        retBuf = new ArrayBuffer(1);\r\n        if (sizeOnly === false) {\r\n            retView = new Uint8Array(retBuf);\r\n            retView[0] = this.length;\r\n        }\r\n        return retBuf;\r\n    }\r\n    toJSON() {\r\n        return {\r\n            ...super.toJSON(),\r\n            isIndefiniteForm: this.isIndefiniteForm,\r\n            longFormUsed: this.longFormUsed,\r\n            length: this.length,\r\n        };\r\n    }\r\n}\r\nLocalLengthBlock.NAME = \"lengthBlock\";\n\nconst typeStore = {};\n\nclass BaseBlock extends LocalBaseBlock {\r\n    constructor({ name = EMPTY_STRING, optional = false, primitiveSchema, ...parameters } = {}, valueBlockType) {\r\n        super(parameters);\r\n        this.name = name;\r\n        this.optional = optional;\r\n        if (primitiveSchema) {\r\n            this.primitiveSchema = primitiveSchema;\r\n        }\r\n        this.idBlock = new LocalIdentificationBlock(parameters);\r\n        this.lenBlock = new LocalLengthBlock(parameters);\r\n        this.valueBlock = valueBlockType ? new valueBlockType(parameters) : new ValueBlock(parameters);\r\n    }\r\n    fromBER(inputBuffer, inputOffset, inputLength) {\r\n        const resultOffset = this.valueBlock.fromBER(inputBuffer, inputOffset, (this.lenBlock.isIndefiniteForm) ? inputLength : this.lenBlock.length);\r\n        if (resultOffset === -1) {\r\n            this.error = this.valueBlock.error;\r\n            return resultOffset;\r\n        }\r\n        if (!this.idBlock.error.length)\r\n            this.blockLength += this.idBlock.blockLength;\r\n        if (!this.lenBlock.error.length)\r\n            this.blockLength += this.lenBlock.blockLength;\r\n        if (!this.valueBlock.error.length)\r\n            this.blockLength += this.valueBlock.blockLength;\r\n        return resultOffset;\r\n    }\r\n    toBER(sizeOnly, writer) {\r\n        const _writer = writer || new ViewWriter();\r\n        if (!writer) {\r\n            prepareIndefiniteForm(this);\r\n        }\r\n        const idBlockBuf = this.idBlock.toBER(sizeOnly);\r\n        _writer.write(idBlockBuf);\r\n        if (this.lenBlock.isIndefiniteForm) {\r\n            _writer.write(new Uint8Array([0x80]).buffer);\r\n            this.valueBlock.toBER(sizeOnly, _writer);\r\n            _writer.write(new ArrayBuffer(2));\r\n        }\r\n        else {\r\n            const valueBlockBuf = this.valueBlock.toBER(sizeOnly);\r\n            this.lenBlock.length = valueBlockBuf.byteLength;\r\n            const lenBlockBuf = this.lenBlock.toBER(sizeOnly);\r\n            _writer.write(lenBlockBuf);\r\n            _writer.write(valueBlockBuf);\r\n        }\r\n        if (!writer) {\r\n            return _writer.final();\r\n        }\r\n        return EMPTY_BUFFER;\r\n    }\r\n    toJSON() {\r\n        const object = {\r\n            ...super.toJSON(),\r\n            idBlock: this.idBlock.toJSON(),\r\n            lenBlock: this.lenBlock.toJSON(),\r\n            valueBlock: this.valueBlock.toJSON(),\r\n            name: this.name,\r\n            optional: this.optional,\r\n        };\r\n        if (this.primitiveSchema)\r\n            object.primitiveSchema = this.primitiveSchema.toJSON();\r\n        return object;\r\n    }\r\n    toString(encoding = \"ascii\") {\r\n        if (encoding === \"ascii\") {\r\n            return this.onAsciiEncoding();\r\n        }\r\n        return pvtsutils.Convert.ToHex(this.toBER());\r\n    }\r\n    onAsciiEncoding() {\r\n        return `${this.constructor.NAME} : ${pvtsutils.Convert.ToHex(this.valueBlock.valueBeforeDecodeView)}`;\r\n    }\r\n    isEqual(other) {\r\n        if (this === other) {\r\n            return true;\r\n        }\r\n        if (!(other instanceof this.constructor)) {\r\n            return false;\r\n        }\r\n        const thisRaw = this.toBER();\r\n        const otherRaw = other.toBER();\r\n        return pvutils.isEqualBuffer(thisRaw, otherRaw);\r\n    }\r\n}\r\nBaseBlock.NAME = \"BaseBlock\";\r\nfunction prepareIndefiniteForm(baseBlock) {\r\n    if (baseBlock instanceof typeStore.Constructed) {\r\n        for (const value of baseBlock.valueBlock.value) {\r\n            if (prepareIndefiniteForm(value)) {\r\n                baseBlock.lenBlock.isIndefiniteForm = true;\r\n            }\r\n        }\r\n    }\r\n    return !!baseBlock.lenBlock.isIndefiniteForm;\r\n}\n\nclass BaseStringBlock extends BaseBlock {\r\n    constructor({ value = EMPTY_STRING, ...parameters } = {}, stringValueBlockType) {\r\n        super(parameters, stringValueBlockType);\r\n        if (value) {\r\n            this.fromString(value);\r\n        }\r\n    }\r\n    getValue() {\r\n        return this.valueBlock.value;\r\n    }\r\n    setValue(value) {\r\n        this.valueBlock.value = value;\r\n    }\r\n    fromBER(inputBuffer, inputOffset, inputLength) {\r\n        const resultOffset = this.valueBlock.fromBER(inputBuffer, inputOffset, (this.lenBlock.isIndefiniteForm) ? inputLength : this.lenBlock.length);\r\n        if (resultOffset === -1) {\r\n            this.error = this.valueBlock.error;\r\n            return resultOffset;\r\n        }\r\n        this.fromBuffer(this.valueBlock.valueHexView);\r\n        if (!this.idBlock.error.length)\r\n            this.blockLength += this.idBlock.blockLength;\r\n        if (!this.lenBlock.error.length)\r\n            this.blockLength += this.lenBlock.blockLength;\r\n        if (!this.valueBlock.error.length)\r\n            this.blockLength += this.valueBlock.blockLength;\r\n        return resultOffset;\r\n    }\r\n    onAsciiEncoding() {\r\n        return `${this.constructor.NAME} : '${this.valueBlock.value}'`;\r\n    }\r\n}\r\nBaseStringBlock.NAME = \"BaseStringBlock\";\n\nclass LocalPrimitiveValueBlock extends HexBlock(ValueBlock) {\r\n    constructor({ isHexOnly = true, ...parameters } = {}) {\r\n        super(parameters);\r\n        this.isHexOnly = isHexOnly;\r\n    }\r\n}\r\nLocalPrimitiveValueBlock.NAME = \"PrimitiveValueBlock\";\n\nvar _a$w;\r\nclass Primitive extends BaseBlock {\r\n    constructor(parameters = {}) {\r\n        super(parameters, LocalPrimitiveValueBlock);\r\n        this.idBlock.isConstructed = false;\r\n    }\r\n}\r\n_a$w = Primitive;\r\n(() => {\r\n    typeStore.Primitive = _a$w;\r\n})();\r\nPrimitive.NAME = \"PRIMITIVE\";\n\nfunction localChangeType(inputObject, newType) {\r\n    if (inputObject instanceof newType) {\r\n        return inputObject;\r\n    }\r\n    const newObject = new newType();\r\n    newObject.idBlock = inputObject.idBlock;\r\n    newObject.lenBlock = inputObject.lenBlock;\r\n    newObject.warnings = inputObject.warnings;\r\n    newObject.valueBeforeDecodeView = inputObject.valueBeforeDecodeView;\r\n    return newObject;\r\n}\r\nfunction localFromBER(inputBuffer, inputOffset = 0, inputLength = inputBuffer.length) {\r\n    const incomingOffset = inputOffset;\r\n    let returnObject = new BaseBlock({}, ValueBlock);\r\n    const baseBlock = new LocalBaseBlock();\r\n    if (!checkBufferParams(baseBlock, inputBuffer, inputOffset, inputLength)) {\r\n        returnObject.error = baseBlock.error;\r\n        return {\r\n            offset: -1,\r\n            result: returnObject\r\n        };\r\n    }\r\n    const intBuffer = inputBuffer.subarray(inputOffset, inputOffset + inputLength);\r\n    if (!intBuffer.length) {\r\n        returnObject.error = \"Zero buffer length\";\r\n        return {\r\n            offset: -1,\r\n            result: returnObject\r\n        };\r\n    }\r\n    let resultOffset = returnObject.idBlock.fromBER(inputBuffer, inputOffset, inputLength);\r\n    if (returnObject.idBlock.warnings.length) {\r\n        returnObject.warnings.concat(returnObject.idBlock.warnings);\r\n    }\r\n    if (resultOffset === -1) {\r\n        returnObject.error = returnObject.idBlock.error;\r\n        return {\r\n            offset: -1,\r\n            result: returnObject\r\n        };\r\n    }\r\n    inputOffset = resultOffset;\r\n    inputLength -= returnObject.idBlock.blockLength;\r\n    resultOffset = returnObject.lenBlock.fromBER(inputBuffer, inputOffset, inputLength);\r\n    if (returnObject.lenBlock.warnings.length) {\r\n        returnObject.warnings.concat(returnObject.lenBlock.warnings);\r\n    }\r\n    if (resultOffset === -1) {\r\n        returnObject.error = returnObject.lenBlock.error;\r\n        return {\r\n            offset: -1,\r\n            result: returnObject\r\n        };\r\n    }\r\n    inputOffset = resultOffset;\r\n    inputLength -= returnObject.lenBlock.blockLength;\r\n    if (!returnObject.idBlock.isConstructed &&\r\n        returnObject.lenBlock.isIndefiniteForm) {\r\n        returnObject.error = \"Indefinite length form used for primitive encoding form\";\r\n        return {\r\n            offset: -1,\r\n            result: returnObject\r\n        };\r\n    }\r\n    let newASN1Type = BaseBlock;\r\n    switch (returnObject.idBlock.tagClass) {\r\n        case 1:\r\n            if ((returnObject.idBlock.tagNumber >= 37) &&\r\n                (returnObject.idBlock.isHexOnly === false)) {\r\n                returnObject.error = \"UNIVERSAL 37 and upper tags are reserved by ASN.1 standard\";\r\n                return {\r\n                    offset: -1,\r\n                    result: returnObject\r\n                };\r\n            }\r\n            switch (returnObject.idBlock.tagNumber) {\r\n                case 0:\r\n                    if ((returnObject.idBlock.isConstructed) &&\r\n                        (returnObject.lenBlock.length > 0)) {\r\n                        returnObject.error = \"Type [UNIVERSAL 0] is reserved\";\r\n                        return {\r\n                            offset: -1,\r\n                            result: returnObject\r\n                        };\r\n                    }\r\n                    newASN1Type = typeStore.EndOfContent;\r\n                    break;\r\n                case 1:\r\n                    newASN1Type = typeStore.Boolean;\r\n                    break;\r\n                case 2:\r\n                    newASN1Type = typeStore.Integer;\r\n                    break;\r\n                case 3:\r\n                    newASN1Type = typeStore.BitString;\r\n                    break;\r\n                case 4:\r\n                    newASN1Type = typeStore.OctetString;\r\n                    break;\r\n                case 5:\r\n                    newASN1Type = typeStore.Null;\r\n                    break;\r\n                case 6:\r\n                    newASN1Type = typeStore.ObjectIdentifier;\r\n                    break;\r\n                case 10:\r\n                    newASN1Type = typeStore.Enumerated;\r\n                    break;\r\n                case 12:\r\n                    newASN1Type = typeStore.Utf8String;\r\n                    break;\r\n                case 13:\r\n                    newASN1Type = typeStore.RelativeObjectIdentifier;\r\n                    break;\r\n                case 14:\r\n                    newASN1Type = typeStore.TIME;\r\n                    break;\r\n                case 15:\r\n                    returnObject.error = \"[UNIVERSAL 15] is reserved by ASN.1 standard\";\r\n                    return {\r\n                        offset: -1,\r\n                        result: returnObject\r\n                    };\r\n                case 16:\r\n                    newASN1Type = typeStore.Sequence;\r\n                    break;\r\n                case 17:\r\n                    newASN1Type = typeStore.Set;\r\n                    break;\r\n                case 18:\r\n                    newASN1Type = typeStore.NumericString;\r\n                    break;\r\n                case 19:\r\n                    newASN1Type = typeStore.PrintableString;\r\n                    break;\r\n                case 20:\r\n                    newASN1Type = typeStore.TeletexString;\r\n                    break;\r\n                case 21:\r\n                    newASN1Type = typeStore.VideotexString;\r\n                    break;\r\n                case 22:\r\n                    newASN1Type = typeStore.IA5String;\r\n                    break;\r\n                case 23:\r\n                    newASN1Type = typeStore.UTCTime;\r\n                    break;\r\n                case 24:\r\n                    newASN1Type = typeStore.GeneralizedTime;\r\n                    break;\r\n                case 25:\r\n                    newASN1Type = typeStore.GraphicString;\r\n                    break;\r\n                case 26:\r\n                    newASN1Type = typeStore.VisibleString;\r\n                    break;\r\n                case 27:\r\n                    newASN1Type = typeStore.GeneralString;\r\n                    break;\r\n                case 28:\r\n                    newASN1Type = typeStore.UniversalString;\r\n                    break;\r\n                case 29:\r\n                    newASN1Type = typeStore.CharacterString;\r\n                    break;\r\n                case 30:\r\n                    newASN1Type = typeStore.BmpString;\r\n                    break;\r\n                case 31:\r\n                    newASN1Type = typeStore.DATE;\r\n                    break;\r\n                case 32:\r\n                    newASN1Type = typeStore.TimeOfDay;\r\n                    break;\r\n                case 33:\r\n                    newASN1Type = typeStore.DateTime;\r\n                    break;\r\n                case 34:\r\n                    newASN1Type = typeStore.Duration;\r\n                    break;\r\n                default: {\r\n                    const newObject = returnObject.idBlock.isConstructed\r\n                        ? new typeStore.Constructed()\r\n                        : new typeStore.Primitive();\r\n                    newObject.idBlock = returnObject.idBlock;\r\n                    newObject.lenBlock = returnObject.lenBlock;\r\n                    newObject.warnings = returnObject.warnings;\r\n                    returnObject = newObject;\r\n                }\r\n            }\r\n            break;\r\n        case 2:\r\n        case 3:\r\n        case 4:\r\n        default: {\r\n            newASN1Type = returnObject.idBlock.isConstructed\r\n                ? typeStore.Constructed\r\n                : typeStore.Primitive;\r\n        }\r\n    }\r\n    returnObject = localChangeType(returnObject, newASN1Type);\r\n    resultOffset = returnObject.fromBER(inputBuffer, inputOffset, returnObject.lenBlock.isIndefiniteForm ? inputLength : returnObject.lenBlock.length);\r\n    returnObject.valueBeforeDecodeView = inputBuffer.subarray(incomingOffset, incomingOffset + returnObject.blockLength);\r\n    return {\r\n        offset: resultOffset,\r\n        result: returnObject\r\n    };\r\n}\r\nfunction fromBER(inputBuffer) {\r\n    if (!inputBuffer.byteLength) {\r\n        const result = new BaseBlock({}, ValueBlock);\r\n        result.error = \"Input buffer has zero length\";\r\n        return {\r\n            offset: -1,\r\n            result\r\n        };\r\n    }\r\n    return localFromBER(pvtsutils.BufferSourceConverter.toUint8Array(inputBuffer).slice(), 0, inputBuffer.byteLength);\r\n}\n\nfunction checkLen(indefiniteLength, length) {\r\n    if (indefiniteLength) {\r\n        return 1;\r\n    }\r\n    return length;\r\n}\r\nclass LocalConstructedValueBlock extends ValueBlock {\r\n    constructor({ value = [], isIndefiniteForm = false, ...parameters } = {}) {\r\n        super(parameters);\r\n        this.value = value;\r\n        this.isIndefiniteForm = isIndefiniteForm;\r\n    }\r\n    fromBER(inputBuffer, inputOffset, inputLength) {\r\n        const view = pvtsutils.BufferSourceConverter.toUint8Array(inputBuffer);\r\n        if (!checkBufferParams(this, view, inputOffset, inputLength)) {\r\n            return -1;\r\n        }\r\n        this.valueBeforeDecodeView = view.subarray(inputOffset, inputOffset + inputLength);\r\n        if (this.valueBeforeDecodeView.length === 0) {\r\n            this.warnings.push(\"Zero buffer length\");\r\n            return inputOffset;\r\n        }\r\n        let currentOffset = inputOffset;\r\n        while (checkLen(this.isIndefiniteForm, inputLength) > 0) {\r\n            const returnObject = localFromBER(view, currentOffset, inputLength);\r\n            if (returnObject.offset === -1) {\r\n                this.error = returnObject.result.error;\r\n                this.warnings.concat(returnObject.result.warnings);\r\n                return -1;\r\n            }\r\n            currentOffset = returnObject.offset;\r\n            this.blockLength += returnObject.result.blockLength;\r\n            inputLength -= returnObject.result.blockLength;\r\n            this.value.push(returnObject.result);\r\n            if (this.isIndefiniteForm && returnObject.result.constructor.NAME === END_OF_CONTENT_NAME) {\r\n                break;\r\n            }\r\n        }\r\n        if (this.isIndefiniteForm) {\r\n            if (this.value[this.value.length - 1].constructor.NAME === END_OF_CONTENT_NAME) {\r\n                this.value.pop();\r\n            }\r\n            else {\r\n                this.warnings.push(\"No EndOfContent block encoded\");\r\n            }\r\n        }\r\n        return currentOffset;\r\n    }\r\n    toBER(sizeOnly, writer) {\r\n        const _writer = writer || new ViewWriter();\r\n        for (let i = 0; i < this.value.length; i++) {\r\n            this.value[i].toBER(sizeOnly, _writer);\r\n        }\r\n        if (!writer) {\r\n            return _writer.final();\r\n        }\r\n        return EMPTY_BUFFER;\r\n    }\r\n    toJSON() {\r\n        const object = {\r\n            ...super.toJSON(),\r\n            isIndefiniteForm: this.isIndefiniteForm,\r\n            value: [],\r\n        };\r\n        for (const value of this.value) {\r\n            object.value.push(value.toJSON());\r\n        }\r\n        return object;\r\n    }\r\n}\r\nLocalConstructedValueBlock.NAME = \"ConstructedValueBlock\";\n\nvar _a$v;\r\nclass Constructed extends BaseBlock {\r\n    constructor(parameters = {}) {\r\n        super(parameters, LocalConstructedValueBlock);\r\n        this.idBlock.isConstructed = true;\r\n    }\r\n    fromBER(inputBuffer, inputOffset, inputLength) {\r\n        this.valueBlock.isIndefiniteForm = this.lenBlock.isIndefiniteForm;\r\n        const resultOffset = this.valueBlock.fromBER(inputBuffer, inputOffset, (this.lenBlock.isIndefiniteForm) ? inputLength : this.lenBlock.length);\r\n        if (resultOffset === -1) {\r\n            this.error = this.valueBlock.error;\r\n            return resultOffset;\r\n        }\r\n        if (!this.idBlock.error.length)\r\n            this.blockLength += this.idBlock.blockLength;\r\n        if (!this.lenBlock.error.length)\r\n            this.blockLength += this.lenBlock.blockLength;\r\n        if (!this.valueBlock.error.length)\r\n            this.blockLength += this.valueBlock.blockLength;\r\n        return resultOffset;\r\n    }\r\n    onAsciiEncoding() {\r\n        const values = [];\r\n        for (const value of this.valueBlock.value) {\r\n            values.push(value.toString(\"ascii\").split(\"\\n\").map(o => `  ${o}`).join(\"\\n\"));\r\n        }\r\n        const blockName = this.idBlock.tagClass === 3\r\n            ? `[${this.idBlock.tagNumber}]`\r\n            : this.constructor.NAME;\r\n        return values.length\r\n            ? `${blockName} :\\n${values.join(\"\\n\")}`\r\n            : `${blockName} :`;\r\n    }\r\n}\r\n_a$v = Constructed;\r\n(() => {\r\n    typeStore.Constructed = _a$v;\r\n})();\r\nConstructed.NAME = \"CONSTRUCTED\";\n\nclass LocalEndOfContentValueBlock extends ValueBlock {\r\n    fromBER(inputBuffer, inputOffset, inputLength) {\r\n        return inputOffset;\r\n    }\r\n    toBER(sizeOnly) {\r\n        return EMPTY_BUFFER;\r\n    }\r\n}\r\nLocalEndOfContentValueBlock.override = \"EndOfContentValueBlock\";\n\nvar _a$u;\r\nclass EndOfContent extends BaseBlock {\r\n    constructor(parameters = {}) {\r\n        super(parameters, LocalEndOfContentValueBlock);\r\n        this.idBlock.tagClass = 1;\r\n        this.idBlock.tagNumber = 0;\r\n    }\r\n}\r\n_a$u = EndOfContent;\r\n(() => {\r\n    typeStore.EndOfContent = _a$u;\r\n})();\r\nEndOfContent.NAME = END_OF_CONTENT_NAME;\n\nvar _a$t;\r\nclass Null extends BaseBlock {\r\n    constructor(parameters = {}) {\r\n        super(parameters, ValueBlock);\r\n        this.idBlock.tagClass = 1;\r\n        this.idBlock.tagNumber = 5;\r\n    }\r\n    fromBER(inputBuffer, inputOffset, inputLength) {\r\n        if (this.lenBlock.length > 0)\r\n            this.warnings.push(\"Non-zero length of value block for Null type\");\r\n        if (!this.idBlock.error.length)\r\n            this.blockLength += this.idBlock.blockLength;\r\n        if (!this.lenBlock.error.length)\r\n            this.blockLength += this.lenBlock.blockLength;\r\n        this.blockLength += inputLength;\r\n        if ((inputOffset + inputLength) > inputBuffer.byteLength) {\r\n            this.error = \"End of input reached before message was fully decoded (inconsistent offset and length values)\";\r\n            return -1;\r\n        }\r\n        return (inputOffset + inputLength);\r\n    }\r\n    toBER(sizeOnly, writer) {\r\n        const retBuf = new ArrayBuffer(2);\r\n        if (!sizeOnly) {\r\n            const retView = new Uint8Array(retBuf);\r\n            retView[0] = 0x05;\r\n            retView[1] = 0x00;\r\n        }\r\n        if (writer) {\r\n            writer.write(retBuf);\r\n        }\r\n        return retBuf;\r\n    }\r\n    onAsciiEncoding() {\r\n        return `${this.constructor.NAME}`;\r\n    }\r\n}\r\n_a$t = Null;\r\n(() => {\r\n    typeStore.Null = _a$t;\r\n})();\r\nNull.NAME = \"NULL\";\n\nclass LocalBooleanValueBlock extends HexBlock(ValueBlock) {\r\n    constructor({ value, ...parameters } = {}) {\r\n        super(parameters);\r\n        if (parameters.valueHex) {\r\n            this.valueHexView = pvtsutils.BufferSourceConverter.toUint8Array(parameters.valueHex);\r\n        }\r\n        else {\r\n            this.valueHexView = new Uint8Array(1);\r\n        }\r\n        if (value) {\r\n            this.value = value;\r\n        }\r\n    }\r\n    get value() {\r\n        for (const octet of this.valueHexView) {\r\n            if (octet > 0) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    set value(value) {\r\n        this.valueHexView[0] = value ? 0xFF : 0x00;\r\n    }\r\n    fromBER(inputBuffer, inputOffset, inputLength) {\r\n        const inputView = pvtsutils.BufferSourceConverter.toUint8Array(inputBuffer);\r\n        if (!checkBufferParams(this, inputView, inputOffset, inputLength)) {\r\n            return -1;\r\n        }\r\n        this.valueHexView = inputView.subarray(inputOffset, inputOffset + inputLength);\r\n        if (inputLength > 1)\r\n            this.warnings.push(\"Boolean value encoded in more then 1 octet\");\r\n        this.isHexOnly = true;\r\n        pvutils.utilDecodeTC.call(this);\r\n        this.blockLength = inputLength;\r\n        return (inputOffset + inputLength);\r\n    }\r\n    toBER() {\r\n        return this.valueHexView.slice();\r\n    }\r\n    toJSON() {\r\n        return {\r\n            ...super.toJSON(),\r\n            value: this.value,\r\n        };\r\n    }\r\n}\r\nLocalBooleanValueBlock.NAME = \"BooleanValueBlock\";\n\nvar _a$s;\r\nclass Boolean extends BaseBlock {\r\n    constructor(parameters = {}) {\r\n        super(parameters, LocalBooleanValueBlock);\r\n        this.idBlock.tagClass = 1;\r\n        this.idBlock.tagNumber = 1;\r\n    }\r\n    getValue() {\r\n        return this.valueBlock.value;\r\n    }\r\n    setValue(value) {\r\n        this.valueBlock.value = value;\r\n    }\r\n    onAsciiEncoding() {\r\n        return `${this.constructor.NAME} : ${this.getValue}`;\r\n    }\r\n}\r\n_a$s = Boolean;\r\n(() => {\r\n    typeStore.Boolean = _a$s;\r\n})();\r\nBoolean.NAME = \"BOOLEAN\";\n\nclass LocalOctetStringValueBlock extends HexBlock(LocalConstructedValueBlock) {\r\n    constructor({ isConstructed = false, ...parameters } = {}) {\r\n        super(parameters);\r\n        this.isConstructed = isConstructed;\r\n    }\r\n    fromBER(inputBuffer, inputOffset, inputLength) {\r\n        let resultOffset = 0;\r\n        if (this.isConstructed) {\r\n            this.isHexOnly = false;\r\n            resultOffset = LocalConstructedValueBlock.prototype.fromBER.call(this, inputBuffer, inputOffset, inputLength);\r\n            if (resultOffset === -1)\r\n                return resultOffset;\r\n            for (let i = 0; i < this.value.length; i++) {\r\n                const currentBlockName = this.value[i].constructor.NAME;\r\n                if (currentBlockName === END_OF_CONTENT_NAME) {\r\n                    if (this.isIndefiniteForm)\r\n                        break;\r\n                    else {\r\n                        this.error = \"EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only\";\r\n                        return -1;\r\n                    }\r\n                }\r\n                if (currentBlockName !== OCTET_STRING_NAME) {\r\n                    this.error = \"OCTET STRING may consists of OCTET STRINGs only\";\r\n                    return -1;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            this.isHexOnly = true;\r\n            resultOffset = super.fromBER(inputBuffer, inputOffset, inputLength);\r\n            this.blockLength = inputLength;\r\n        }\r\n        return resultOffset;\r\n    }\r\n    toBER(sizeOnly, writer) {\r\n        if (this.isConstructed)\r\n            return LocalConstructedValueBlock.prototype.toBER.call(this, sizeOnly, writer);\r\n        return sizeOnly\r\n            ? new ArrayBuffer(this.valueHexView.byteLength)\r\n            : this.valueHexView.slice().buffer;\r\n    }\r\n    toJSON() {\r\n        return {\r\n            ...super.toJSON(),\r\n            isConstructed: this.isConstructed,\r\n        };\r\n    }\r\n}\r\nLocalOctetStringValueBlock.NAME = \"OctetStringValueBlock\";\n\nvar _a$r;\r\nclass OctetString extends BaseBlock {\r\n    constructor({ idBlock = {}, lenBlock = {}, ...parameters } = {}) {\r\n        var _b, _c;\r\n        (_b = parameters.isConstructed) !== null && _b !== void 0 ? _b : (parameters.isConstructed = !!((_c = parameters.value) === null || _c === void 0 ? void 0 : _c.length));\r\n        super({\r\n            idBlock: {\r\n                isConstructed: parameters.isConstructed,\r\n                ...idBlock,\r\n            },\r\n            lenBlock: {\r\n                ...lenBlock,\r\n                isIndefiniteForm: !!parameters.isIndefiniteForm,\r\n            },\r\n            ...parameters,\r\n        }, LocalOctetStringValueBlock);\r\n        this.idBlock.tagClass = 1;\r\n        this.idBlock.tagNumber = 4;\r\n    }\r\n    fromBER(inputBuffer, inputOffset, inputLength) {\r\n        this.valueBlock.isConstructed = this.idBlock.isConstructed;\r\n        this.valueBlock.isIndefiniteForm = this.lenBlock.isIndefiniteForm;\r\n        if (inputLength === 0) {\r\n            if (this.idBlock.error.length === 0)\r\n                this.blockLength += this.idBlock.blockLength;\r\n            if (this.lenBlock.error.length === 0)\r\n                this.blockLength += this.lenBlock.blockLength;\r\n            return inputOffset;\r\n        }\r\n        if (!this.valueBlock.isConstructed) {\r\n            const view = inputBuffer instanceof ArrayBuffer ? new Uint8Array(inputBuffer) : inputBuffer;\r\n            const buf = view.subarray(inputOffset, inputOffset + inputLength);\r\n            try {\r\n                if (buf.byteLength) {\r\n                    const asn = localFromBER(buf, 0, buf.byteLength);\r\n                    if (asn.offset !== -1 && asn.offset === inputLength) {\r\n                        this.valueBlock.value = [asn.result];\r\n                    }\r\n                }\r\n            }\r\n            catch (e) {\r\n            }\r\n        }\r\n        return super.fromBER(inputBuffer, inputOffset, inputLength);\r\n    }\r\n    onAsciiEncoding() {\r\n        if (this.valueBlock.isConstructed || (this.valueBlock.value && this.valueBlock.value.length)) {\r\n            return Constructed.prototype.onAsciiEncoding.call(this);\r\n        }\r\n        return `${this.constructor.NAME} : ${pvtsutils.Convert.ToHex(this.valueBlock.valueHexView)}`;\r\n    }\r\n    getValue() {\r\n        if (!this.idBlock.isConstructed) {\r\n            return this.valueBlock.valueHexView.slice().buffer;\r\n        }\r\n        const array = [];\r\n        for (const content of this.valueBlock.value) {\r\n            if (content instanceof OctetString) {\r\n                array.push(content.valueBlock.valueHexView);\r\n            }\r\n        }\r\n        return pvtsutils.BufferSourceConverter.concat(array);\r\n    }\r\n}\r\n_a$r = OctetString;\r\n(() => {\r\n    typeStore.OctetString = _a$r;\r\n})();\r\nOctetString.NAME = OCTET_STRING_NAME;\n\nclass LocalBitStringValueBlock extends HexBlock(LocalConstructedValueBlock) {\r\n    constructor({ unusedBits = 0, isConstructed = false, ...parameters } = {}) {\r\n        super(parameters);\r\n        this.unusedBits = unusedBits;\r\n        this.isConstructed = isConstructed;\r\n        this.blockLength = this.valueHexView.byteLength;\r\n    }\r\n    fromBER(inputBuffer, inputOffset, inputLength) {\r\n        if (!inputLength) {\r\n            return inputOffset;\r\n        }\r\n        let resultOffset = -1;\r\n        if (this.isConstructed) {\r\n            resultOffset = LocalConstructedValueBlock.prototype.fromBER.call(this, inputBuffer, inputOffset, inputLength);\r\n            if (resultOffset === -1)\r\n                return resultOffset;\r\n            for (const value of this.value) {\r\n                const currentBlockName = value.constructor.NAME;\r\n                if (currentBlockName === END_OF_CONTENT_NAME) {\r\n                    if (this.isIndefiniteForm)\r\n                        break;\r\n                    else {\r\n                        this.error = \"EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only\";\r\n                        return -1;\r\n                    }\r\n                }\r\n                if (currentBlockName !== BIT_STRING_NAME) {\r\n                    this.error = \"BIT STRING may consists of BIT STRINGs only\";\r\n                    return -1;\r\n                }\r\n                const valueBlock = value.valueBlock;\r\n                if ((this.unusedBits > 0) && (valueBlock.unusedBits > 0)) {\r\n                    this.error = \"Using of \\\"unused bits\\\" inside constructive BIT STRING allowed for least one only\";\r\n                    return -1;\r\n                }\r\n                this.unusedBits = valueBlock.unusedBits;\r\n            }\r\n            return resultOffset;\r\n        }\r\n        const inputView = pvtsutils.BufferSourceConverter.toUint8Array(inputBuffer);\r\n        if (!checkBufferParams(this, inputView, inputOffset, inputLength)) {\r\n            return -1;\r\n        }\r\n        const intBuffer = inputView.subarray(inputOffset, inputOffset + inputLength);\r\n        this.unusedBits = intBuffer[0];\r\n        if (this.unusedBits > 7) {\r\n            this.error = \"Unused bits for BitString must be in range 0-7\";\r\n            return -1;\r\n        }\r\n        if (!this.unusedBits) {\r\n            const buf = intBuffer.subarray(1);\r\n            try {\r\n                if (buf.byteLength) {\r\n                    const asn = localFromBER(buf, 0, buf.byteLength);\r\n                    if (asn.offset !== -1 && asn.offset === (inputLength - 1)) {\r\n                        this.value = [asn.result];\r\n                    }\r\n                }\r\n            }\r\n            catch (e) {\r\n            }\r\n        }\r\n        this.valueHexView = intBuffer.subarray(1);\r\n        this.blockLength = intBuffer.length;\r\n        return (inputOffset + inputLength);\r\n    }\r\n    toBER(sizeOnly, writer) {\r\n        if (this.isConstructed) {\r\n            return LocalConstructedValueBlock.prototype.toBER.call(this, sizeOnly, writer);\r\n        }\r\n        if (sizeOnly) {\r\n            return new ArrayBuffer(this.valueHexView.byteLength + 1);\r\n        }\r\n        if (!this.valueHexView.byteLength) {\r\n            return EMPTY_BUFFER;\r\n        }\r\n        const retView = new Uint8Array(this.valueHexView.length + 1);\r\n        retView[0] = this.unusedBits;\r\n        retView.set(this.valueHexView, 1);\r\n        return retView.buffer;\r\n    }\r\n    toJSON() {\r\n        return {\r\n            ...super.toJSON(),\r\n            unusedBits: this.unusedBits,\r\n            isConstructed: this.isConstructed,\r\n        };\r\n    }\r\n}\r\nLocalBitStringValueBlock.NAME = \"BitStringValueBlock\";\n\nvar _a$q;\r\nclass BitString extends BaseBlock {\r\n    constructor({ idBlock = {}, lenBlock = {}, ...parameters } = {}) {\r\n        var _b, _c;\r\n        (_b = parameters.isConstructed) !== null && _b !== void 0 ? _b : (parameters.isConstructed = !!((_c = parameters.value) === null || _c === void 0 ? void 0 : _c.length));\r\n        super({\r\n            idBlock: {\r\n                isConstructed: parameters.isConstructed,\r\n                ...idBlock,\r\n            },\r\n            lenBlock: {\r\n                ...lenBlock,\r\n                isIndefiniteForm: !!parameters.isIndefiniteForm,\r\n            },\r\n            ...parameters,\r\n        }, LocalBitStringValueBlock);\r\n        this.idBlock.tagClass = 1;\r\n        this.idBlock.tagNumber = 3;\r\n    }\r\n    fromBER(inputBuffer, inputOffset, inputLength) {\r\n        this.valueBlock.isConstructed = this.idBlock.isConstructed;\r\n        this.valueBlock.isIndefiniteForm = this.lenBlock.isIndefiniteForm;\r\n        return super.fromBER(inputBuffer, inputOffset, inputLength);\r\n    }\r\n    onAsciiEncoding() {\r\n        if (this.valueBlock.isConstructed || (this.valueBlock.value && this.valueBlock.value.length)) {\r\n            return Constructed.prototype.onAsciiEncoding.call(this);\r\n        }\r\n        else {\r\n            const bits = [];\r\n            const valueHex = this.valueBlock.valueHexView;\r\n            for (const byte of valueHex) {\r\n                bits.push(byte.toString(2).padStart(8, \"0\"));\r\n            }\r\n            const bitsStr = bits.join(\"\");\r\n            return `${this.constructor.NAME} : ${bitsStr.substring(0, bitsStr.length - this.valueBlock.unusedBits)}`;\r\n        }\r\n    }\r\n}\r\n_a$q = BitString;\r\n(() => {\r\n    typeStore.BitString = _a$q;\r\n})();\r\nBitString.NAME = BIT_STRING_NAME;\n\nvar _a$p;\r\nfunction viewAdd(first, second) {\r\n    const c = new Uint8Array([0]);\r\n    const firstView = new Uint8Array(first);\r\n    const secondView = new Uint8Array(second);\r\n    let firstViewCopy = firstView.slice(0);\r\n    const firstViewCopyLength = firstViewCopy.length - 1;\r\n    const secondViewCopy = secondView.slice(0);\r\n    const secondViewCopyLength = secondViewCopy.length - 1;\r\n    let value = 0;\r\n    const max = (secondViewCopyLength < firstViewCopyLength) ? firstViewCopyLength : secondViewCopyLength;\r\n    let counter = 0;\r\n    for (let i = max; i >= 0; i--, counter++) {\r\n        switch (true) {\r\n            case (counter < secondViewCopy.length):\r\n                value = firstViewCopy[firstViewCopyLength - counter] + secondViewCopy[secondViewCopyLength - counter] + c[0];\r\n                break;\r\n            default:\r\n                value = firstViewCopy[firstViewCopyLength - counter] + c[0];\r\n        }\r\n        c[0] = value / 10;\r\n        switch (true) {\r\n            case (counter >= firstViewCopy.length):\r\n                firstViewCopy = pvutils.utilConcatView(new Uint8Array([value % 10]), firstViewCopy);\r\n                break;\r\n            default:\r\n                firstViewCopy[firstViewCopyLength - counter] = value % 10;\r\n        }\r\n    }\r\n    if (c[0] > 0)\r\n        firstViewCopy = pvutils.utilConcatView(c, firstViewCopy);\r\n    return firstViewCopy;\r\n}\r\nfunction power2(n) {\r\n    if (n >= powers2.length) {\r\n        for (let p = powers2.length; p <= n; p++) {\r\n            const c = new Uint8Array([0]);\r\n            let digits = (powers2[p - 1]).slice(0);\r\n            for (let i = (digits.length - 1); i >= 0; i--) {\r\n                const newValue = new Uint8Array([(digits[i] << 1) + c[0]]);\r\n                c[0] = newValue[0] / 10;\r\n                digits[i] = newValue[0] % 10;\r\n            }\r\n            if (c[0] > 0)\r\n                digits = pvutils.utilConcatView(c, digits);\r\n            powers2.push(digits);\r\n        }\r\n    }\r\n    return powers2[n];\r\n}\r\nfunction viewSub(first, second) {\r\n    let b = 0;\r\n    const firstView = new Uint8Array(first);\r\n    const secondView = new Uint8Array(second);\r\n    const firstViewCopy = firstView.slice(0);\r\n    const firstViewCopyLength = firstViewCopy.length - 1;\r\n    const secondViewCopy = secondView.slice(0);\r\n    const secondViewCopyLength = secondViewCopy.length - 1;\r\n    let value;\r\n    let counter = 0;\r\n    for (let i = secondViewCopyLength; i >= 0; i--, counter++) {\r\n        value = firstViewCopy[firstViewCopyLength - counter] - secondViewCopy[secondViewCopyLength - counter] - b;\r\n        switch (true) {\r\n            case (value < 0):\r\n                b = 1;\r\n                firstViewCopy[firstViewCopyLength - counter] = value + 10;\r\n                break;\r\n            default:\r\n                b = 0;\r\n                firstViewCopy[firstViewCopyLength - counter] = value;\r\n        }\r\n    }\r\n    if (b > 0) {\r\n        for (let i = (firstViewCopyLength - secondViewCopyLength + 1); i >= 0; i--, counter++) {\r\n            value = firstViewCopy[firstViewCopyLength - counter] - b;\r\n            if (value < 0) {\r\n                b = 1;\r\n                firstViewCopy[firstViewCopyLength - counter] = value + 10;\r\n            }\r\n            else {\r\n                b = 0;\r\n                firstViewCopy[firstViewCopyLength - counter] = value;\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    return firstViewCopy.slice();\r\n}\r\nclass LocalIntegerValueBlock extends HexBlock(ValueBlock) {\r\n    constructor({ value, ...parameters } = {}) {\r\n        super(parameters);\r\n        this._valueDec = 0;\r\n        if (parameters.valueHex) {\r\n            this.setValueHex();\r\n        }\r\n        if (value !== undefined) {\r\n            this.valueDec = value;\r\n        }\r\n    }\r\n    setValueHex() {\r\n        if (this.valueHexView.length >= 4) {\r\n            this.warnings.push(\"Too big Integer for decoding, hex only\");\r\n            this.isHexOnly = true;\r\n            this._valueDec = 0;\r\n        }\r\n        else {\r\n            this.isHexOnly = false;\r\n            if (this.valueHexView.length > 0) {\r\n                this._valueDec = pvutils.utilDecodeTC.call(this);\r\n            }\r\n        }\r\n    }\r\n    set valueDec(v) {\r\n        this._valueDec = v;\r\n        this.isHexOnly = false;\r\n        this.valueHexView = new Uint8Array(pvutils.utilEncodeTC(v));\r\n    }\r\n    get valueDec() {\r\n        return this._valueDec;\r\n    }\r\n    fromDER(inputBuffer, inputOffset, inputLength, expectedLength = 0) {\r\n        const offset = this.fromBER(inputBuffer, inputOffset, inputLength);\r\n        if (offset === -1)\r\n            return offset;\r\n        const view = this.valueHexView;\r\n        if ((view[0] === 0x00) && ((view[1] & 0x80) !== 0)) {\r\n            this.valueHexView = view.subarray(1);\r\n        }\r\n        else {\r\n            if (expectedLength !== 0) {\r\n                if (view.length < expectedLength) {\r\n                    if ((expectedLength - view.length) > 1)\r\n                        expectedLength = view.length + 1;\r\n                    this.valueHexView = view.subarray(expectedLength - view.length);\r\n                }\r\n            }\r\n        }\r\n        return offset;\r\n    }\r\n    toDER(sizeOnly = false) {\r\n        const view = this.valueHexView;\r\n        switch (true) {\r\n            case ((view[0] & 0x80) !== 0):\r\n                {\r\n                    const updatedView = new Uint8Array(this.valueHexView.length + 1);\r\n                    updatedView[0] = 0x00;\r\n                    updatedView.set(view, 1);\r\n                    this.valueHexView = updatedView;\r\n                }\r\n                break;\r\n            case ((view[0] === 0x00) && ((view[1] & 0x80) === 0)):\r\n                {\r\n                    this.valueHexView = this.valueHexView.subarray(1);\r\n                }\r\n                break;\r\n        }\r\n        return this.toBER(sizeOnly);\r\n    }\r\n    fromBER(inputBuffer, inputOffset, inputLength) {\r\n        const resultOffset = super.fromBER(inputBuffer, inputOffset, inputLength);\r\n        if (resultOffset === -1) {\r\n            return resultOffset;\r\n        }\r\n        this.setValueHex();\r\n        return resultOffset;\r\n    }\r\n    toBER(sizeOnly) {\r\n        return sizeOnly\r\n            ? new ArrayBuffer(this.valueHexView.length)\r\n            : this.valueHexView.slice().buffer;\r\n    }\r\n    toJSON() {\r\n        return {\r\n            ...super.toJSON(),\r\n            valueDec: this.valueDec,\r\n        };\r\n    }\r\n    toString() {\r\n        const firstBit = (this.valueHexView.length * 8) - 1;\r\n        let digits = new Uint8Array((this.valueHexView.length * 8) / 3);\r\n        let bitNumber = 0;\r\n        let currentByte;\r\n        const asn1View = this.valueHexView;\r\n        let result = \"\";\r\n        let flag = false;\r\n        for (let byteNumber = (asn1View.byteLength - 1); byteNumber >= 0; byteNumber--) {\r\n            currentByte = asn1View[byteNumber];\r\n            for (let i = 0; i < 8; i++) {\r\n                if ((currentByte & 1) === 1) {\r\n                    switch (bitNumber) {\r\n                        case firstBit:\r\n                            digits = viewSub(power2(bitNumber), digits);\r\n                            result = \"-\";\r\n                            break;\r\n                        default:\r\n                            digits = viewAdd(digits, power2(bitNumber));\r\n                    }\r\n                }\r\n                bitNumber++;\r\n                currentByte >>= 1;\r\n            }\r\n        }\r\n        for (let i = 0; i < digits.length; i++) {\r\n            if (digits[i])\r\n                flag = true;\r\n            if (flag)\r\n                result += digitsString.charAt(digits[i]);\r\n        }\r\n        if (flag === false)\r\n            result += digitsString.charAt(0);\r\n        return result;\r\n    }\r\n}\r\n_a$p = LocalIntegerValueBlock;\r\nLocalIntegerValueBlock.NAME = \"IntegerValueBlock\";\r\n(() => {\r\n    Object.defineProperty(_a$p.prototype, \"valueHex\", {\r\n        set: function (v) {\r\n            this.valueHexView = new Uint8Array(v);\r\n            this.setValueHex();\r\n        },\r\n        get: function () {\r\n            return this.valueHexView.slice().buffer;\r\n        },\r\n    });\r\n})();\n\nvar _a$o;\r\nclass Integer extends BaseBlock {\r\n    constructor(parameters = {}) {\r\n        super(parameters, LocalIntegerValueBlock);\r\n        this.idBlock.tagClass = 1;\r\n        this.idBlock.tagNumber = 2;\r\n    }\r\n    toBigInt() {\r\n        assertBigInt();\r\n        return BigInt(this.valueBlock.toString());\r\n    }\r\n    static fromBigInt(value) {\r\n        assertBigInt();\r\n        const bigIntValue = BigInt(value);\r\n        const writer = new ViewWriter();\r\n        const hex = bigIntValue.toString(16).replace(/^-/, \"\");\r\n        const view = new Uint8Array(pvtsutils.Convert.FromHex(hex));\r\n        if (bigIntValue < 0) {\r\n            const first = new Uint8Array(view.length + (view[0] & 0x80 ? 1 : 0));\r\n            first[0] |= 0x80;\r\n            const firstInt = BigInt(`0x${pvtsutils.Convert.ToHex(first)}`);\r\n            const secondInt = firstInt + bigIntValue;\r\n            const second = pvtsutils.BufferSourceConverter.toUint8Array(pvtsutils.Convert.FromHex(secondInt.toString(16)));\r\n            second[0] |= 0x80;\r\n            writer.write(second);\r\n        }\r\n        else {\r\n            if (view[0] & 0x80) {\r\n                writer.write(new Uint8Array([0]));\r\n            }\r\n            writer.write(view);\r\n        }\r\n        const res = new Integer({\r\n            valueHex: writer.final(),\r\n        });\r\n        return res;\r\n    }\r\n    convertToDER() {\r\n        const integer = new Integer({ valueHex: this.valueBlock.valueHexView });\r\n        integer.valueBlock.toDER();\r\n        return integer;\r\n    }\r\n    convertFromDER() {\r\n        return new Integer({\r\n            valueHex: this.valueBlock.valueHexView[0] === 0\r\n                ? this.valueBlock.valueHexView.subarray(1)\r\n                : this.valueBlock.valueHexView,\r\n        });\r\n    }\r\n    onAsciiEncoding() {\r\n        return `${this.constructor.NAME} : ${this.valueBlock.toString()}`;\r\n    }\r\n}\r\n_a$o = Integer;\r\n(() => {\r\n    typeStore.Integer = _a$o;\r\n})();\r\nInteger.NAME = \"INTEGER\";\n\nvar _a$n;\r\nclass Enumerated extends Integer {\r\n    constructor(parameters = {}) {\r\n        super(parameters);\r\n        this.idBlock.tagClass = 1;\r\n        this.idBlock.tagNumber = 10;\r\n    }\r\n}\r\n_a$n = Enumerated;\r\n(() => {\r\n    typeStore.Enumerated = _a$n;\r\n})();\r\nEnumerated.NAME = \"ENUMERATED\";\n\nclass LocalSidValueBlock extends HexBlock(ValueBlock) {\r\n    constructor({ valueDec = -1, isFirstSid = false, ...parameters } = {}) {\r\n        super(parameters);\r\n        this.valueDec = valueDec;\r\n        this.isFirstSid = isFirstSid;\r\n    }\r\n    fromBER(inputBuffer, inputOffset, inputLength) {\r\n        if (!inputLength) {\r\n            return inputOffset;\r\n        }\r\n        const inputView = pvtsutils.BufferSourceConverter.toUint8Array(inputBuffer);\r\n        if (!checkBufferParams(this, inputView, inputOffset, inputLength)) {\r\n            return -1;\r\n        }\r\n        const intBuffer = inputView.subarray(inputOffset, inputOffset + inputLength);\r\n        this.valueHexView = new Uint8Array(inputLength);\r\n        for (let i = 0; i < inputLength; i++) {\r\n            this.valueHexView[i] = intBuffer[i] & 0x7F;\r\n            this.blockLength++;\r\n            if ((intBuffer[i] & 0x80) === 0x00)\r\n                break;\r\n        }\r\n        const tempView = new Uint8Array(this.blockLength);\r\n        for (let i = 0; i < this.blockLength; i++) {\r\n            tempView[i] = this.valueHexView[i];\r\n        }\r\n        this.valueHexView = tempView;\r\n        if ((intBuffer[this.blockLength - 1] & 0x80) !== 0x00) {\r\n            this.error = \"End of input reached before message was fully decoded\";\r\n            return -1;\r\n        }\r\n        if (this.valueHexView[0] === 0x00)\r\n            this.warnings.push(\"Needlessly long format of SID encoding\");\r\n        if (this.blockLength <= 8)\r\n            this.valueDec = pvutils.utilFromBase(this.valueHexView, 7);\r\n        else {\r\n            this.isHexOnly = true;\r\n            this.warnings.push(\"Too big SID for decoding, hex only\");\r\n        }\r\n        return (inputOffset + this.blockLength);\r\n    }\r\n    set valueBigInt(value) {\r\n        assertBigInt();\r\n        let bits = BigInt(value).toString(2);\r\n        while (bits.length % 7) {\r\n            bits = \"0\" + bits;\r\n        }\r\n        const bytes = new Uint8Array(bits.length / 7);\r\n        for (let i = 0; i < bytes.length; i++) {\r\n            bytes[i] = parseInt(bits.slice(i * 7, i * 7 + 7), 2) + (i + 1 < bytes.length ? 0x80 : 0);\r\n        }\r\n        this.fromBER(bytes.buffer, 0, bytes.length);\r\n    }\r\n    toBER(sizeOnly) {\r\n        if (this.isHexOnly) {\r\n            if (sizeOnly)\r\n                return (new ArrayBuffer(this.valueHexView.byteLength));\r\n            const curView = this.valueHexView;\r\n            const retView = new Uint8Array(this.blockLength);\r\n            for (let i = 0; i < (this.blockLength - 1); i++)\r\n                retView[i] = curView[i] | 0x80;\r\n            retView[this.blockLength - 1] = curView[this.blockLength - 1];\r\n            return retView.buffer;\r\n        }\r\n        const encodedBuf = pvutils.utilToBase(this.valueDec, 7);\r\n        if (encodedBuf.byteLength === 0) {\r\n            this.error = \"Error during encoding SID value\";\r\n            return EMPTY_BUFFER;\r\n        }\r\n        const retView = new Uint8Array(encodedBuf.byteLength);\r\n        if (!sizeOnly) {\r\n            const encodedView = new Uint8Array(encodedBuf);\r\n            const len = encodedBuf.byteLength - 1;\r\n            for (let i = 0; i < len; i++)\r\n                retView[i] = encodedView[i] | 0x80;\r\n            retView[len] = encodedView[len];\r\n        }\r\n        return retView;\r\n    }\r\n    toString() {\r\n        let result = \"\";\r\n        if (this.isHexOnly)\r\n            result = pvtsutils.Convert.ToHex(this.valueHexView);\r\n        else {\r\n            if (this.isFirstSid) {\r\n                let sidValue = this.valueDec;\r\n                if (this.valueDec <= 39)\r\n                    result = \"0.\";\r\n                else {\r\n                    if (this.valueDec <= 79) {\r\n                        result = \"1.\";\r\n                        sidValue -= 40;\r\n                    }\r\n                    else {\r\n                        result = \"2.\";\r\n                        sidValue -= 80;\r\n                    }\r\n                }\r\n                result += sidValue.toString();\r\n            }\r\n            else\r\n                result = this.valueDec.toString();\r\n        }\r\n        return result;\r\n    }\r\n    toJSON() {\r\n        return {\r\n            ...super.toJSON(),\r\n            valueDec: this.valueDec,\r\n            isFirstSid: this.isFirstSid,\r\n        };\r\n    }\r\n}\r\nLocalSidValueBlock.NAME = \"sidBlock\";\n\nclass LocalObjectIdentifierValueBlock extends ValueBlock {\r\n    constructor({ value = EMPTY_STRING, ...parameters } = {}) {\r\n        super(parameters);\r\n        this.value = [];\r\n        if (value) {\r\n            this.fromString(value);\r\n        }\r\n    }\r\n    fromBER(inputBuffer, inputOffset, inputLength) {\r\n        let resultOffset = inputOffset;\r\n        while (inputLength > 0) {\r\n            const sidBlock = new LocalSidValueBlock();\r\n            resultOffset = sidBlock.fromBER(inputBuffer, resultOffset, inputLength);\r\n            if (resultOffset === -1) {\r\n                this.blockLength = 0;\r\n                this.error = sidBlock.error;\r\n                return resultOffset;\r\n            }\r\n            if (this.value.length === 0)\r\n                sidBlock.isFirstSid = true;\r\n            this.blockLength += sidBlock.blockLength;\r\n            inputLength -= sidBlock.blockLength;\r\n            this.value.push(sidBlock);\r\n        }\r\n        return resultOffset;\r\n    }\r\n    toBER(sizeOnly) {\r\n        const retBuffers = [];\r\n        for (let i = 0; i < this.value.length; i++) {\r\n            const valueBuf = this.value[i].toBER(sizeOnly);\r\n            if (valueBuf.byteLength === 0) {\r\n                this.error = this.value[i].error;\r\n                return EMPTY_BUFFER;\r\n            }\r\n            retBuffers.push(valueBuf);\r\n        }\r\n        return concat(retBuffers);\r\n    }\r\n    fromString(string) {\r\n        this.value = [];\r\n        let pos1 = 0;\r\n        let pos2 = 0;\r\n        let sid = \"\";\r\n        let flag = false;\r\n        do {\r\n            pos2 = string.indexOf(\".\", pos1);\r\n            if (pos2 === -1)\r\n                sid = string.substring(pos1);\r\n            else\r\n                sid = string.substring(pos1, pos2);\r\n            pos1 = pos2 + 1;\r\n            if (flag) {\r\n                const sidBlock = this.value[0];\r\n                let plus = 0;\r\n                switch (sidBlock.valueDec) {\r\n                    case 0:\r\n                        break;\r\n                    case 1:\r\n                        plus = 40;\r\n                        break;\r\n                    case 2:\r\n                        plus = 80;\r\n                        break;\r\n                    default:\r\n                        this.value = [];\r\n                        return;\r\n                }\r\n                const parsedSID = parseInt(sid, 10);\r\n                if (isNaN(parsedSID))\r\n                    return;\r\n                sidBlock.valueDec = parsedSID + plus;\r\n                flag = false;\r\n            }\r\n            else {\r\n                const sidBlock = new LocalSidValueBlock();\r\n                if (sid > Number.MAX_SAFE_INTEGER) {\r\n                    assertBigInt();\r\n                    const sidValue = BigInt(sid);\r\n                    sidBlock.valueBigInt = sidValue;\r\n                }\r\n                else {\r\n                    sidBlock.valueDec = parseInt(sid, 10);\r\n                    if (isNaN(sidBlock.valueDec))\r\n                        return;\r\n                }\r\n                if (!this.value.length) {\r\n                    sidBlock.isFirstSid = true;\r\n                    flag = true;\r\n                }\r\n                this.value.push(sidBlock);\r\n            }\r\n        } while (pos2 !== -1);\r\n    }\r\n    toString() {\r\n        let result = \"\";\r\n        let isHexOnly = false;\r\n        for (let i = 0; i < this.value.length; i++) {\r\n            isHexOnly = this.value[i].isHexOnly;\r\n            let sidStr = this.value[i].toString();\r\n            if (i !== 0)\r\n                result = `${result}.`;\r\n            if (isHexOnly) {\r\n                sidStr = `{${sidStr}}`;\r\n                if (this.value[i].isFirstSid)\r\n                    result = `2.{${sidStr} - 80}`;\r\n                else\r\n                    result += sidStr;\r\n            }\r\n            else\r\n                result += sidStr;\r\n        }\r\n        return result;\r\n    }\r\n    toJSON() {\r\n        const object = {\r\n            ...super.toJSON(),\r\n            value: this.toString(),\r\n            sidArray: [],\r\n        };\r\n        for (let i = 0; i < this.value.length; i++) {\r\n            object.sidArray.push(this.value[i].toJSON());\r\n        }\r\n        return object;\r\n    }\r\n}\r\nLocalObjectIdentifierValueBlock.NAME = \"ObjectIdentifierValueBlock\";\n\nvar _a$m;\r\nclass ObjectIdentifier extends BaseBlock {\r\n    constructor(parameters = {}) {\r\n        super(parameters, LocalObjectIdentifierValueBlock);\r\n        this.idBlock.tagClass = 1;\r\n        this.idBlock.tagNumber = 6;\r\n    }\r\n    getValue() {\r\n        return this.valueBlock.toString();\r\n    }\r\n    setValue(value) {\r\n        this.valueBlock.fromString(value);\r\n    }\r\n    onAsciiEncoding() {\r\n        return `${this.constructor.NAME} : ${this.valueBlock.toString() || \"empty\"}`;\r\n    }\r\n    toJSON() {\r\n        return {\r\n            ...super.toJSON(),\r\n            value: this.getValue(),\r\n        };\r\n    }\r\n}\r\n_a$m = ObjectIdentifier;\r\n(() => {\r\n    typeStore.ObjectIdentifier = _a$m;\r\n})();\r\nObjectIdentifier.NAME = \"OBJECT IDENTIFIER\";\n\nclass LocalRelativeSidValueBlock extends HexBlock(LocalBaseBlock) {\r\n    constructor({ valueDec = 0, ...parameters } = {}) {\r\n        super(parameters);\r\n        this.valueDec = valueDec;\r\n    }\r\n    fromBER(inputBuffer, inputOffset, inputLength) {\r\n        if (inputLength === 0)\r\n            return inputOffset;\r\n        const inputView = pvtsutils.BufferSourceConverter.toUint8Array(inputBuffer);\r\n        if (!checkBufferParams(this, inputView, inputOffset, inputLength))\r\n            return -1;\r\n        const intBuffer = inputView.subarray(inputOffset, inputOffset + inputLength);\r\n        this.valueHexView = new Uint8Array(inputLength);\r\n        for (let i = 0; i < inputLength; i++) {\r\n            this.valueHexView[i] = intBuffer[i] & 0x7F;\r\n            this.blockLength++;\r\n            if ((intBuffer[i] & 0x80) === 0x00)\r\n                break;\r\n        }\r\n        const tempView = new Uint8Array(this.blockLength);\r\n        for (let i = 0; i < this.blockLength; i++)\r\n            tempView[i] = this.valueHexView[i];\r\n        this.valueHexView = tempView;\r\n        if ((intBuffer[this.blockLength - 1] & 0x80) !== 0x00) {\r\n            this.error = \"End of input reached before message was fully decoded\";\r\n            return -1;\r\n        }\r\n        if (this.valueHexView[0] === 0x00)\r\n            this.warnings.push(\"Needlessly long format of SID encoding\");\r\n        if (this.blockLength <= 8)\r\n            this.valueDec = pvutils.utilFromBase(this.valueHexView, 7);\r\n        else {\r\n            this.isHexOnly = true;\r\n            this.warnings.push(\"Too big SID for decoding, hex only\");\r\n        }\r\n        return (inputOffset + this.blockLength);\r\n    }\r\n    toBER(sizeOnly) {\r\n        if (this.isHexOnly) {\r\n            if (sizeOnly)\r\n                return (new ArrayBuffer(this.valueHexView.byteLength));\r\n            const curView = this.valueHexView;\r\n            const retView = new Uint8Array(this.blockLength);\r\n            for (let i = 0; i < (this.blockLength - 1); i++)\r\n                retView[i] = curView[i] | 0x80;\r\n            retView[this.blockLength - 1] = curView[this.blockLength - 1];\r\n            return retView.buffer;\r\n        }\r\n        const encodedBuf = pvutils.utilToBase(this.valueDec, 7);\r\n        if (encodedBuf.byteLength === 0) {\r\n            this.error = \"Error during encoding SID value\";\r\n            return EMPTY_BUFFER;\r\n        }\r\n        const retView = new Uint8Array(encodedBuf.byteLength);\r\n        if (!sizeOnly) {\r\n            const encodedView = new Uint8Array(encodedBuf);\r\n            const len = encodedBuf.byteLength - 1;\r\n            for (let i = 0; i < len; i++)\r\n                retView[i] = encodedView[i] | 0x80;\r\n            retView[len] = encodedView[len];\r\n        }\r\n        return retView.buffer;\r\n    }\r\n    toString() {\r\n        let result = \"\";\r\n        if (this.isHexOnly)\r\n            result = pvtsutils.Convert.ToHex(this.valueHexView);\r\n        else {\r\n            result = this.valueDec.toString();\r\n        }\r\n        return result;\r\n    }\r\n    toJSON() {\r\n        return {\r\n            ...super.toJSON(),\r\n            valueDec: this.valueDec,\r\n        };\r\n    }\r\n}\r\nLocalRelativeSidValueBlock.NAME = \"relativeSidBlock\";\n\nclass LocalRelativeObjectIdentifierValueBlock extends ValueBlock {\r\n    constructor({ value = EMPTY_STRING, ...parameters } = {}) {\r\n        super(parameters);\r\n        this.value = [];\r\n        if (value) {\r\n            this.fromString(value);\r\n        }\r\n    }\r\n    fromBER(inputBuffer, inputOffset, inputLength) {\r\n        let resultOffset = inputOffset;\r\n        while (inputLength > 0) {\r\n            const sidBlock = new LocalRelativeSidValueBlock();\r\n            resultOffset = sidBlock.fromBER(inputBuffer, resultOffset, inputLength);\r\n            if (resultOffset === -1) {\r\n                this.blockLength = 0;\r\n                this.error = sidBlock.error;\r\n                return resultOffset;\r\n            }\r\n            this.blockLength += sidBlock.blockLength;\r\n            inputLength -= sidBlock.blockLength;\r\n            this.value.push(sidBlock);\r\n        }\r\n        return resultOffset;\r\n    }\r\n    toBER(sizeOnly, writer) {\r\n        const retBuffers = [];\r\n        for (let i = 0; i < this.value.length; i++) {\r\n            const valueBuf = this.value[i].toBER(sizeOnly);\r\n            if (valueBuf.byteLength === 0) {\r\n                this.error = this.value[i].error;\r\n                return EMPTY_BUFFER;\r\n            }\r\n            retBuffers.push(valueBuf);\r\n        }\r\n        return concat(retBuffers);\r\n    }\r\n    fromString(string) {\r\n        this.value = [];\r\n        let pos1 = 0;\r\n        let pos2 = 0;\r\n        let sid = \"\";\r\n        do {\r\n            pos2 = string.indexOf(\".\", pos1);\r\n            if (pos2 === -1)\r\n                sid = string.substring(pos1);\r\n            else\r\n                sid = string.substring(pos1, pos2);\r\n            pos1 = pos2 + 1;\r\n            const sidBlock = new LocalRelativeSidValueBlock();\r\n            sidBlock.valueDec = parseInt(sid, 10);\r\n            if (isNaN(sidBlock.valueDec))\r\n                return true;\r\n            this.value.push(sidBlock);\r\n        } while (pos2 !== -1);\r\n        return true;\r\n    }\r\n    toString() {\r\n        let result = \"\";\r\n        let isHexOnly = false;\r\n        for (let i = 0; i < this.value.length; i++) {\r\n            isHexOnly = this.value[i].isHexOnly;\r\n            let sidStr = this.value[i].toString();\r\n            if (i !== 0)\r\n                result = `${result}.`;\r\n            if (isHexOnly) {\r\n                sidStr = `{${sidStr}}`;\r\n                result += sidStr;\r\n            }\r\n            else\r\n                result += sidStr;\r\n        }\r\n        return result;\r\n    }\r\n    toJSON() {\r\n        const object = {\r\n            ...super.toJSON(),\r\n            value: this.toString(),\r\n            sidArray: [],\r\n        };\r\n        for (let i = 0; i < this.value.length; i++)\r\n            object.sidArray.push(this.value[i].toJSON());\r\n        return object;\r\n    }\r\n}\r\nLocalRelativeObjectIdentifierValueBlock.NAME = \"RelativeObjectIdentifierValueBlock\";\n\nvar _a$l;\r\nclass RelativeObjectIdentifier extends BaseBlock {\r\n    constructor(parameters = {}) {\r\n        super(parameters, LocalRelativeObjectIdentifierValueBlock);\r\n        this.idBlock.tagClass = 1;\r\n        this.idBlock.tagNumber = 13;\r\n    }\r\n    getValue() {\r\n        return this.valueBlock.toString();\r\n    }\r\n    setValue(value) {\r\n        this.valueBlock.fromString(value);\r\n    }\r\n    onAsciiEncoding() {\r\n        return `${this.constructor.NAME} : ${this.valueBlock.toString() || \"empty\"}`;\r\n    }\r\n    toJSON() {\r\n        return {\r\n            ...super.toJSON(),\r\n            value: this.getValue(),\r\n        };\r\n    }\r\n}\r\n_a$l = RelativeObjectIdentifier;\r\n(() => {\r\n    typeStore.RelativeObjectIdentifier = _a$l;\r\n})();\r\nRelativeObjectIdentifier.NAME = \"RelativeObjectIdentifier\";\n\nvar _a$k;\r\nclass Sequence extends Constructed {\r\n    constructor(parameters = {}) {\r\n        super(parameters);\r\n        this.idBlock.tagClass = 1;\r\n        this.idBlock.tagNumber = 16;\r\n    }\r\n}\r\n_a$k = Sequence;\r\n(() => {\r\n    typeStore.Sequence = _a$k;\r\n})();\r\nSequence.NAME = \"SEQUENCE\";\n\nvar _a$j;\r\nclass Set extends Constructed {\r\n    constructor(parameters = {}) {\r\n        super(parameters);\r\n        this.idBlock.tagClass = 1;\r\n        this.idBlock.tagNumber = 17;\r\n    }\r\n}\r\n_a$j = Set;\r\n(() => {\r\n    typeStore.Set = _a$j;\r\n})();\r\nSet.NAME = \"SET\";\n\nclass LocalStringValueBlock extends HexBlock(ValueBlock) {\r\n    constructor({ ...parameters } = {}) {\r\n        super(parameters);\r\n        this.isHexOnly = true;\r\n        this.value = EMPTY_STRING;\r\n    }\r\n    toJSON() {\r\n        return {\r\n            ...super.toJSON(),\r\n            value: this.value,\r\n        };\r\n    }\r\n}\r\nLocalStringValueBlock.NAME = \"StringValueBlock\";\n\nclass LocalSimpleStringValueBlock extends LocalStringValueBlock {\r\n}\r\nLocalSimpleStringValueBlock.NAME = \"SimpleStringValueBlock\";\n\nclass LocalSimpleStringBlock extends BaseStringBlock {\r\n    constructor({ ...parameters } = {}) {\r\n        super(parameters, LocalSimpleStringValueBlock);\r\n    }\r\n    fromBuffer(inputBuffer) {\r\n        this.valueBlock.value = String.fromCharCode.apply(null, pvtsutils.BufferSourceConverter.toUint8Array(inputBuffer));\r\n    }\r\n    fromString(inputString) {\r\n        const strLen = inputString.length;\r\n        const view = this.valueBlock.valueHexView = new Uint8Array(strLen);\r\n        for (let i = 0; i < strLen; i++)\r\n            view[i] = inputString.charCodeAt(i);\r\n        this.valueBlock.value = inputString;\r\n    }\r\n}\r\nLocalSimpleStringBlock.NAME = \"SIMPLE STRING\";\n\nclass LocalUtf8StringValueBlock extends LocalSimpleStringBlock {\r\n    fromBuffer(inputBuffer) {\r\n        this.valueBlock.valueHexView = pvtsutils.BufferSourceConverter.toUint8Array(inputBuffer);\r\n        try {\r\n            this.valueBlock.value = pvtsutils.Convert.ToUtf8String(inputBuffer);\r\n        }\r\n        catch (ex) {\r\n            this.warnings.push(`Error during \"decodeURIComponent\": ${ex}, using raw string`);\r\n            this.valueBlock.value = pvtsutils.Convert.ToBinary(inputBuffer);\r\n        }\r\n    }\r\n    fromString(inputString) {\r\n        this.valueBlock.valueHexView = new Uint8Array(pvtsutils.Convert.FromUtf8String(inputString));\r\n        this.valueBlock.value = inputString;\r\n    }\r\n}\r\nLocalUtf8StringValueBlock.NAME = \"Utf8StringValueBlock\";\n\nvar _a$i;\r\nclass Utf8String extends LocalUtf8StringValueBlock {\r\n    constructor(parameters = {}) {\r\n        super(parameters);\r\n        this.idBlock.tagClass = 1;\r\n        this.idBlock.tagNumber = 12;\r\n    }\r\n}\r\n_a$i = Utf8String;\r\n(() => {\r\n    typeStore.Utf8String = _a$i;\r\n})();\r\nUtf8String.NAME = \"UTF8String\";\n\nclass LocalBmpStringValueBlock extends LocalSimpleStringBlock {\r\n    fromBuffer(inputBuffer) {\r\n        this.valueBlock.value = pvtsutils.Convert.ToUtf16String(inputBuffer);\r\n        this.valueBlock.valueHexView = pvtsutils.BufferSourceConverter.toUint8Array(inputBuffer);\r\n    }\r\n    fromString(inputString) {\r\n        this.valueBlock.value = inputString;\r\n        this.valueBlock.valueHexView = new Uint8Array(pvtsutils.Convert.FromUtf16String(inputString));\r\n    }\r\n}\r\nLocalBmpStringValueBlock.NAME = \"BmpStringValueBlock\";\n\nvar _a$h;\r\nclass BmpString extends LocalBmpStringValueBlock {\r\n    constructor({ ...parameters } = {}) {\r\n        super(parameters);\r\n        this.idBlock.tagClass = 1;\r\n        this.idBlock.tagNumber = 30;\r\n    }\r\n}\r\n_a$h = BmpString;\r\n(() => {\r\n    typeStore.BmpString = _a$h;\r\n})();\r\nBmpString.NAME = \"BMPString\";\n\nclass LocalUniversalStringValueBlock extends LocalSimpleStringBlock {\r\n    fromBuffer(inputBuffer) {\r\n        const copyBuffer = ArrayBuffer.isView(inputBuffer) ? inputBuffer.slice().buffer : inputBuffer.slice(0);\r\n        const valueView = new Uint8Array(copyBuffer);\r\n        for (let i = 0; i < valueView.length; i += 4) {\r\n            valueView[i] = valueView[i + 3];\r\n            valueView[i + 1] = valueView[i + 2];\r\n            valueView[i + 2] = 0x00;\r\n            valueView[i + 3] = 0x00;\r\n        }\r\n        this.valueBlock.value = String.fromCharCode.apply(null, new Uint32Array(copyBuffer));\r\n    }\r\n    fromString(inputString) {\r\n        const strLength = inputString.length;\r\n        const valueHexView = this.valueBlock.valueHexView = new Uint8Array(strLength * 4);\r\n        for (let i = 0; i < strLength; i++) {\r\n            const codeBuf = pvutils.utilToBase(inputString.charCodeAt(i), 8);\r\n            const codeView = new Uint8Array(codeBuf);\r\n            if (codeView.length > 4)\r\n                continue;\r\n            const dif = 4 - codeView.length;\r\n            for (let j = (codeView.length - 1); j >= 0; j--)\r\n                valueHexView[i * 4 + j + dif] = codeView[j];\r\n        }\r\n        this.valueBlock.value = inputString;\r\n    }\r\n}\r\nLocalUniversalStringValueBlock.NAME = \"UniversalStringValueBlock\";\n\nvar _a$g;\r\nclass UniversalString extends LocalUniversalStringValueBlock {\r\n    constructor({ ...parameters } = {}) {\r\n        super(parameters);\r\n        this.idBlock.tagClass = 1;\r\n        this.idBlock.tagNumber = 28;\r\n    }\r\n}\r\n_a$g = UniversalString;\r\n(() => {\r\n    typeStore.UniversalString = _a$g;\r\n})();\r\nUniversalString.NAME = \"UniversalString\";\n\nvar _a$f;\r\nclass NumericString extends LocalSimpleStringBlock {\r\n    constructor(parameters = {}) {\r\n        super(parameters);\r\n        this.idBlock.tagClass = 1;\r\n        this.idBlock.tagNumber = 18;\r\n    }\r\n}\r\n_a$f = NumericString;\r\n(() => {\r\n    typeStore.NumericString = _a$f;\r\n})();\r\nNumericString.NAME = \"NumericString\";\n\nvar _a$e;\r\nclass PrintableString extends LocalSimpleStringBlock {\r\n    constructor(parameters = {}) {\r\n        super(parameters);\r\n        this.idBlock.tagClass = 1;\r\n        this.idBlock.tagNumber = 19;\r\n    }\r\n}\r\n_a$e = PrintableString;\r\n(() => {\r\n    typeStore.PrintableString = _a$e;\r\n})();\r\nPrintableString.NAME = \"PrintableString\";\n\nvar _a$d;\r\nclass TeletexString extends LocalSimpleStringBlock {\r\n    constructor(parameters = {}) {\r\n        super(parameters);\r\n        this.idBlock.tagClass = 1;\r\n        this.idBlock.tagNumber = 20;\r\n    }\r\n}\r\n_a$d = TeletexString;\r\n(() => {\r\n    typeStore.TeletexString = _a$d;\r\n})();\r\nTeletexString.NAME = \"TeletexString\";\n\nvar _a$c;\r\nclass VideotexString extends LocalSimpleStringBlock {\r\n    constructor(parameters = {}) {\r\n        super(parameters);\r\n        this.idBlock.tagClass = 1;\r\n        this.idBlock.tagNumber = 21;\r\n    }\r\n}\r\n_a$c = VideotexString;\r\n(() => {\r\n    typeStore.VideotexString = _a$c;\r\n})();\r\nVideotexString.NAME = \"VideotexString\";\n\nvar _a$b;\r\nclass IA5String extends LocalSimpleStringBlock {\r\n    constructor(parameters = {}) {\r\n        super(parameters);\r\n        this.idBlock.tagClass = 1;\r\n        this.idBlock.tagNumber = 22;\r\n    }\r\n}\r\n_a$b = IA5String;\r\n(() => {\r\n    typeStore.IA5String = _a$b;\r\n})();\r\nIA5String.NAME = \"IA5String\";\n\nvar _a$a;\r\nclass GraphicString extends LocalSimpleStringBlock {\r\n    constructor(parameters = {}) {\r\n        super(parameters);\r\n        this.idBlock.tagClass = 1;\r\n        this.idBlock.tagNumber = 25;\r\n    }\r\n}\r\n_a$a = GraphicString;\r\n(() => {\r\n    typeStore.GraphicString = _a$a;\r\n})();\r\nGraphicString.NAME = \"GraphicString\";\n\nvar _a$9;\r\nclass VisibleString extends LocalSimpleStringBlock {\r\n    constructor(parameters = {}) {\r\n        super(parameters);\r\n        this.idBlock.tagClass = 1;\r\n        this.idBlock.tagNumber = 26;\r\n    }\r\n}\r\n_a$9 = VisibleString;\r\n(() => {\r\n    typeStore.VisibleString = _a$9;\r\n})();\r\nVisibleString.NAME = \"VisibleString\";\n\nvar _a$8;\r\nclass GeneralString extends LocalSimpleStringBlock {\r\n    constructor(parameters = {}) {\r\n        super(parameters);\r\n        this.idBlock.tagClass = 1;\r\n        this.idBlock.tagNumber = 27;\r\n    }\r\n}\r\n_a$8 = GeneralString;\r\n(() => {\r\n    typeStore.GeneralString = _a$8;\r\n})();\r\nGeneralString.NAME = \"GeneralString\";\n\nvar _a$7;\r\nclass CharacterString extends LocalSimpleStringBlock {\r\n    constructor(parameters = {}) {\r\n        super(parameters);\r\n        this.idBlock.tagClass = 1;\r\n        this.idBlock.tagNumber = 29;\r\n    }\r\n}\r\n_a$7 = CharacterString;\r\n(() => {\r\n    typeStore.CharacterString = _a$7;\r\n})();\r\nCharacterString.NAME = \"CharacterString\";\n\nvar _a$6;\r\nclass UTCTime extends VisibleString {\r\n    constructor({ value, valueDate, ...parameters } = {}) {\r\n        super(parameters);\r\n        this.year = 0;\r\n        this.month = 0;\r\n        this.day = 0;\r\n        this.hour = 0;\r\n        this.minute = 0;\r\n        this.second = 0;\r\n        if (value) {\r\n            this.fromString(value);\r\n            this.valueBlock.valueHexView = new Uint8Array(value.length);\r\n            for (let i = 0; i < value.length; i++)\r\n                this.valueBlock.valueHexView[i] = value.charCodeAt(i);\r\n        }\r\n        if (valueDate) {\r\n            this.fromDate(valueDate);\r\n            this.valueBlock.valueHexView = new Uint8Array(this.toBuffer());\r\n        }\r\n        this.idBlock.tagClass = 1;\r\n        this.idBlock.tagNumber = 23;\r\n    }\r\n    fromBuffer(inputBuffer) {\r\n        this.fromString(String.fromCharCode.apply(null, pvtsutils.BufferSourceConverter.toUint8Array(inputBuffer)));\r\n    }\r\n    toBuffer() {\r\n        const str = this.toString();\r\n        const buffer = new ArrayBuffer(str.length);\r\n        const view = new Uint8Array(buffer);\r\n        for (let i = 0; i < str.length; i++)\r\n            view[i] = str.charCodeAt(i);\r\n        return buffer;\r\n    }\r\n    fromDate(inputDate) {\r\n        this.year = inputDate.getUTCFullYear();\r\n        this.month = inputDate.getUTCMonth() + 1;\r\n        this.day = inputDate.getUTCDate();\r\n        this.hour = inputDate.getUTCHours();\r\n        this.minute = inputDate.getUTCMinutes();\r\n        this.second = inputDate.getUTCSeconds();\r\n    }\r\n    toDate() {\r\n        return (new Date(Date.UTC(this.year, this.month - 1, this.day, this.hour, this.minute, this.second)));\r\n    }\r\n    fromString(inputString) {\r\n        const parser = /(\\d{2})(\\d{2})(\\d{2})(\\d{2})(\\d{2})(\\d{2})Z/ig;\r\n        const parserArray = parser.exec(inputString);\r\n        if (parserArray === null) {\r\n            this.error = \"Wrong input string for conversion\";\r\n            return;\r\n        }\r\n        const year = parseInt(parserArray[1], 10);\r\n        if (year >= 50)\r\n            this.year = 1900 + year;\r\n        else\r\n            this.year = 2000 + year;\r\n        this.month = parseInt(parserArray[2], 10);\r\n        this.day = parseInt(parserArray[3], 10);\r\n        this.hour = parseInt(parserArray[4], 10);\r\n        this.minute = parseInt(parserArray[5], 10);\r\n        this.second = parseInt(parserArray[6], 10);\r\n    }\r\n    toString(encoding = \"iso\") {\r\n        if (encoding === \"iso\") {\r\n            const outputArray = new Array(7);\r\n            outputArray[0] = pvutils.padNumber(((this.year < 2000) ? (this.year - 1900) : (this.year - 2000)), 2);\r\n            outputArray[1] = pvutils.padNumber(this.month, 2);\r\n            outputArray[2] = pvutils.padNumber(this.day, 2);\r\n            outputArray[3] = pvutils.padNumber(this.hour, 2);\r\n            outputArray[4] = pvutils.padNumber(this.minute, 2);\r\n            outputArray[5] = pvutils.padNumber(this.second, 2);\r\n            outputArray[6] = \"Z\";\r\n            return outputArray.join(\"\");\r\n        }\r\n        return super.toString(encoding);\r\n    }\r\n    onAsciiEncoding() {\r\n        return `${this.constructor.NAME} : ${this.toDate().toISOString()}`;\r\n    }\r\n    toJSON() {\r\n        return {\r\n            ...super.toJSON(),\r\n            year: this.year,\r\n            month: this.month,\r\n            day: this.day,\r\n            hour: this.hour,\r\n            minute: this.minute,\r\n            second: this.second,\r\n        };\r\n    }\r\n}\r\n_a$6 = UTCTime;\r\n(() => {\r\n    typeStore.UTCTime = _a$6;\r\n})();\r\nUTCTime.NAME = \"UTCTime\";\n\nvar _a$5;\r\nclass GeneralizedTime extends UTCTime {\r\n    constructor(parameters = {}) {\r\n        var _b;\r\n        super(parameters);\r\n        (_b = this.millisecond) !== null && _b !== void 0 ? _b : (this.millisecond = 0);\r\n        this.idBlock.tagClass = 1;\r\n        this.idBlock.tagNumber = 24;\r\n    }\r\n    fromDate(inputDate) {\r\n        super.fromDate(inputDate);\r\n        this.millisecond = inputDate.getUTCMilliseconds();\r\n    }\r\n    toDate() {\r\n        return (new Date(Date.UTC(this.year, this.month - 1, this.day, this.hour, this.minute, this.second, this.millisecond)));\r\n    }\r\n    fromString(inputString) {\r\n        let isUTC = false;\r\n        let timeString = \"\";\r\n        let dateTimeString = \"\";\r\n        let fractionPart = 0;\r\n        let parser;\r\n        let hourDifference = 0;\r\n        let minuteDifference = 0;\r\n        if (inputString[inputString.length - 1] === \"Z\") {\r\n            timeString = inputString.substring(0, inputString.length - 1);\r\n            isUTC = true;\r\n        }\r\n        else {\r\n            const number = new Number(inputString[inputString.length - 1]);\r\n            if (isNaN(number.valueOf()))\r\n                throw new Error(\"Wrong input string for conversion\");\r\n            timeString = inputString;\r\n        }\r\n        if (isUTC) {\r\n            if (timeString.indexOf(\"+\") !== -1)\r\n                throw new Error(\"Wrong input string for conversion\");\r\n            if (timeString.indexOf(\"-\") !== -1)\r\n                throw new Error(\"Wrong input string for conversion\");\r\n        }\r\n        else {\r\n            let multiplier = 1;\r\n            let differencePosition = timeString.indexOf(\"+\");\r\n            let differenceString = \"\";\r\n            if (differencePosition === -1) {\r\n                differencePosition = timeString.indexOf(\"-\");\r\n                multiplier = -1;\r\n            }\r\n            if (differencePosition !== -1) {\r\n                differenceString = timeString.substring(differencePosition + 1);\r\n                timeString = timeString.substring(0, differencePosition);\r\n                if ((differenceString.length !== 2) && (differenceString.length !== 4))\r\n                    throw new Error(\"Wrong input string for conversion\");\r\n                let number = parseInt(differenceString.substring(0, 2), 10);\r\n                if (isNaN(number.valueOf()))\r\n                    throw new Error(\"Wrong input string for conversion\");\r\n                hourDifference = multiplier * number;\r\n                if (differenceString.length === 4) {\r\n                    number = parseInt(differenceString.substring(2, 4), 10);\r\n                    if (isNaN(number.valueOf()))\r\n                        throw new Error(\"Wrong input string for conversion\");\r\n                    minuteDifference = multiplier * number;\r\n                }\r\n            }\r\n        }\r\n        let fractionPointPosition = timeString.indexOf(\".\");\r\n        if (fractionPointPosition === -1)\r\n            fractionPointPosition = timeString.indexOf(\",\");\r\n        if (fractionPointPosition !== -1) {\r\n            const fractionPartCheck = new Number(`0${timeString.substring(fractionPointPosition)}`);\r\n            if (isNaN(fractionPartCheck.valueOf()))\r\n                throw new Error(\"Wrong input string for conversion\");\r\n            fractionPart = fractionPartCheck.valueOf();\r\n            dateTimeString = timeString.substring(0, fractionPointPosition);\r\n        }\r\n        else\r\n            dateTimeString = timeString;\r\n        switch (true) {\r\n            case (dateTimeString.length === 8):\r\n                parser = /(\\d{4})(\\d{2})(\\d{2})/ig;\r\n                if (fractionPointPosition !== -1)\r\n                    throw new Error(\"Wrong input string for conversion\");\r\n                break;\r\n            case (dateTimeString.length === 10):\r\n                parser = /(\\d{4})(\\d{2})(\\d{2})(\\d{2})/ig;\r\n                if (fractionPointPosition !== -1) {\r\n                    let fractionResult = 60 * fractionPart;\r\n                    this.minute = Math.floor(fractionResult);\r\n                    fractionResult = 60 * (fractionResult - this.minute);\r\n                    this.second = Math.floor(fractionResult);\r\n                    fractionResult = 1000 * (fractionResult - this.second);\r\n                    this.millisecond = Math.floor(fractionResult);\r\n                }\r\n                break;\r\n            case (dateTimeString.length === 12):\r\n                parser = /(\\d{4})(\\d{2})(\\d{2})(\\d{2})(\\d{2})/ig;\r\n                if (fractionPointPosition !== -1) {\r\n                    let fractionResult = 60 * fractionPart;\r\n                    this.second = Math.floor(fractionResult);\r\n                    fractionResult = 1000 * (fractionResult - this.second);\r\n                    this.millisecond = Math.floor(fractionResult);\r\n                }\r\n                break;\r\n            case (dateTimeString.length === 14):\r\n                parser = /(\\d{4})(\\d{2})(\\d{2})(\\d{2})(\\d{2})(\\d{2})/ig;\r\n                if (fractionPointPosition !== -1) {\r\n                    const fractionResult = 1000 * fractionPart;\r\n                    this.millisecond = Math.floor(fractionResult);\r\n                }\r\n                break;\r\n            default:\r\n                throw new Error(\"Wrong input string for conversion\");\r\n        }\r\n        const parserArray = parser.exec(dateTimeString);\r\n        if (parserArray === null)\r\n            throw new Error(\"Wrong input string for conversion\");\r\n        for (let j = 1; j < parserArray.length; j++) {\r\n            switch (j) {\r\n                case 1:\r\n                    this.year = parseInt(parserArray[j], 10);\r\n                    break;\r\n                case 2:\r\n                    this.month = parseInt(parserArray[j], 10);\r\n                    break;\r\n                case 3:\r\n                    this.day = parseInt(parserArray[j], 10);\r\n                    break;\r\n                case 4:\r\n                    this.hour = parseInt(parserArray[j], 10) + hourDifference;\r\n                    break;\r\n                case 5:\r\n                    this.minute = parseInt(parserArray[j], 10) + minuteDifference;\r\n                    break;\r\n                case 6:\r\n                    this.second = parseInt(parserArray[j], 10);\r\n                    break;\r\n                default:\r\n                    throw new Error(\"Wrong input string for conversion\");\r\n            }\r\n        }\r\n        if (isUTC === false) {\r\n            const tempDate = new Date(this.year, this.month, this.day, this.hour, this.minute, this.second, this.millisecond);\r\n            this.year = tempDate.getUTCFullYear();\r\n            this.month = tempDate.getUTCMonth();\r\n            this.day = tempDate.getUTCDay();\r\n            this.hour = tempDate.getUTCHours();\r\n            this.minute = tempDate.getUTCMinutes();\r\n            this.second = tempDate.getUTCSeconds();\r\n            this.millisecond = tempDate.getUTCMilliseconds();\r\n        }\r\n    }\r\n    toString(encoding = \"iso\") {\r\n        if (encoding === \"iso\") {\r\n            const outputArray = [];\r\n            outputArray.push(pvutils.padNumber(this.year, 4));\r\n            outputArray.push(pvutils.padNumber(this.month, 2));\r\n            outputArray.push(pvutils.padNumber(this.day, 2));\r\n            outputArray.push(pvutils.padNumber(this.hour, 2));\r\n            outputArray.push(pvutils.padNumber(this.minute, 2));\r\n            outputArray.push(pvutils.padNumber(this.second, 2));\r\n            if (this.millisecond !== 0) {\r\n                outputArray.push(\".\");\r\n                outputArray.push(pvutils.padNumber(this.millisecond, 3));\r\n            }\r\n            outputArray.push(\"Z\");\r\n            return outputArray.join(\"\");\r\n        }\r\n        return super.toString(encoding);\r\n    }\r\n    toJSON() {\r\n        return {\r\n            ...super.toJSON(),\r\n            millisecond: this.millisecond,\r\n        };\r\n    }\r\n}\r\n_a$5 = GeneralizedTime;\r\n(() => {\r\n    typeStore.GeneralizedTime = _a$5;\r\n})();\r\nGeneralizedTime.NAME = \"GeneralizedTime\";\n\nvar _a$4;\r\nclass DATE extends Utf8String {\r\n    constructor(parameters = {}) {\r\n        super(parameters);\r\n        this.idBlock.tagClass = 1;\r\n        this.idBlock.tagNumber = 31;\r\n    }\r\n}\r\n_a$4 = DATE;\r\n(() => {\r\n    typeStore.DATE = _a$4;\r\n})();\r\nDATE.NAME = \"DATE\";\n\nvar _a$3;\r\nclass TimeOfDay extends Utf8String {\r\n    constructor(parameters = {}) {\r\n        super(parameters);\r\n        this.idBlock.tagClass = 1;\r\n        this.idBlock.tagNumber = 32;\r\n    }\r\n}\r\n_a$3 = TimeOfDay;\r\n(() => {\r\n    typeStore.TimeOfDay = _a$3;\r\n})();\r\nTimeOfDay.NAME = \"TimeOfDay\";\n\nvar _a$2;\r\nclass DateTime extends Utf8String {\r\n    constructor(parameters = {}) {\r\n        super(parameters);\r\n        this.idBlock.tagClass = 1;\r\n        this.idBlock.tagNumber = 33;\r\n    }\r\n}\r\n_a$2 = DateTime;\r\n(() => {\r\n    typeStore.DateTime = _a$2;\r\n})();\r\nDateTime.NAME = \"DateTime\";\n\nvar _a$1;\r\nclass Duration extends Utf8String {\r\n    constructor(parameters = {}) {\r\n        super(parameters);\r\n        this.idBlock.tagClass = 1;\r\n        this.idBlock.tagNumber = 34;\r\n    }\r\n}\r\n_a$1 = Duration;\r\n(() => {\r\n    typeStore.Duration = _a$1;\r\n})();\r\nDuration.NAME = \"Duration\";\n\nvar _a;\r\nclass TIME extends Utf8String {\r\n    constructor(parameters = {}) {\r\n        super(parameters);\r\n        this.idBlock.tagClass = 1;\r\n        this.idBlock.tagNumber = 14;\r\n    }\r\n}\r\n_a = TIME;\r\n(() => {\r\n    typeStore.TIME = _a;\r\n})();\r\nTIME.NAME = \"TIME\";\n\nclass Any {\r\n    constructor({ name = EMPTY_STRING, optional = false, } = {}) {\r\n        this.name = name;\r\n        this.optional = optional;\r\n    }\r\n}\n\nclass Choice extends Any {\r\n    constructor({ value = [], ...parameters } = {}) {\r\n        super(parameters);\r\n        this.value = value;\r\n    }\r\n}\n\nclass Repeated extends Any {\r\n    constructor({ value = new Any(), local = false, ...parameters } = {}) {\r\n        super(parameters);\r\n        this.value = value;\r\n        this.local = local;\r\n    }\r\n}\n\nclass RawData {\r\n    constructor({ data = EMPTY_VIEW } = {}) {\r\n        this.dataView = pvtsutils.BufferSourceConverter.toUint8Array(data);\r\n    }\r\n    get data() {\r\n        return this.dataView.slice().buffer;\r\n    }\r\n    set data(value) {\r\n        this.dataView = pvtsutils.BufferSourceConverter.toUint8Array(value);\r\n    }\r\n    fromBER(inputBuffer, inputOffset, inputLength) {\r\n        const endLength = inputOffset + inputLength;\r\n        this.dataView = pvtsutils.BufferSourceConverter.toUint8Array(inputBuffer).subarray(inputOffset, endLength);\r\n        return endLength;\r\n    }\r\n    toBER(sizeOnly) {\r\n        return this.dataView.slice().buffer;\r\n    }\r\n}\n\nfunction compareSchema(root, inputData, inputSchema) {\r\n    if (inputSchema instanceof Choice) {\r\n        for (let j = 0; j < inputSchema.value.length; j++) {\r\n            const result = compareSchema(root, inputData, inputSchema.value[j]);\r\n            if (result.verified) {\r\n                return {\r\n                    verified: true,\r\n                    result: root\r\n                };\r\n            }\r\n        }\r\n        {\r\n            const _result = {\r\n                verified: false,\r\n                result: {\r\n                    error: \"Wrong values for Choice type\"\r\n                },\r\n            };\r\n            if (inputSchema.hasOwnProperty(NAME))\r\n                _result.name = inputSchema.name;\r\n            return _result;\r\n        }\r\n    }\r\n    if (inputSchema instanceof Any) {\r\n        if (inputSchema.hasOwnProperty(NAME))\r\n            root[inputSchema.name] = inputData;\r\n        return {\r\n            verified: true,\r\n            result: root\r\n        };\r\n    }\r\n    if ((root instanceof Object) === false) {\r\n        return {\r\n            verified: false,\r\n            result: { error: \"Wrong root object\" }\r\n        };\r\n    }\r\n    if ((inputData instanceof Object) === false) {\r\n        return {\r\n            verified: false,\r\n            result: { error: \"Wrong ASN.1 data\" }\r\n        };\r\n    }\r\n    if ((inputSchema instanceof Object) === false) {\r\n        return {\r\n            verified: false,\r\n            result: { error: \"Wrong ASN.1 schema\" }\r\n        };\r\n    }\r\n    if ((ID_BLOCK in inputSchema) === false) {\r\n        return {\r\n            verified: false,\r\n            result: { error: \"Wrong ASN.1 schema\" }\r\n        };\r\n    }\r\n    if ((FROM_BER in inputSchema.idBlock) === false) {\r\n        return {\r\n            verified: false,\r\n            result: { error: \"Wrong ASN.1 schema\" }\r\n        };\r\n    }\r\n    if ((TO_BER in inputSchema.idBlock) === false) {\r\n        return {\r\n            verified: false,\r\n            result: { error: \"Wrong ASN.1 schema\" }\r\n        };\r\n    }\r\n    const encodedId = inputSchema.idBlock.toBER(false);\r\n    if (encodedId.byteLength === 0) {\r\n        return {\r\n            verified: false,\r\n            result: { error: \"Error encoding idBlock for ASN.1 schema\" }\r\n        };\r\n    }\r\n    const decodedOffset = inputSchema.idBlock.fromBER(encodedId, 0, encodedId.byteLength);\r\n    if (decodedOffset === -1) {\r\n        return {\r\n            verified: false,\r\n            result: { error: \"Error decoding idBlock for ASN.1 schema\" }\r\n        };\r\n    }\r\n    if (inputSchema.idBlock.hasOwnProperty(TAG_CLASS) === false) {\r\n        return {\r\n            verified: false,\r\n            result: { error: \"Wrong ASN.1 schema\" }\r\n        };\r\n    }\r\n    if (inputSchema.idBlock.tagClass !== inputData.idBlock.tagClass) {\r\n        return {\r\n            verified: false,\r\n            result: root\r\n        };\r\n    }\r\n    if (inputSchema.idBlock.hasOwnProperty(TAG_NUMBER) === false) {\r\n        return {\r\n            verified: false,\r\n            result: { error: \"Wrong ASN.1 schema\" }\r\n        };\r\n    }\r\n    if (inputSchema.idBlock.tagNumber !== inputData.idBlock.tagNumber) {\r\n        return {\r\n            verified: false,\r\n            result: root\r\n        };\r\n    }\r\n    if (inputSchema.idBlock.hasOwnProperty(IS_CONSTRUCTED) === false) {\r\n        return {\r\n            verified: false,\r\n            result: { error: \"Wrong ASN.1 schema\" }\r\n        };\r\n    }\r\n    if (inputSchema.idBlock.isConstructed !== inputData.idBlock.isConstructed) {\r\n        return {\r\n            verified: false,\r\n            result: root\r\n        };\r\n    }\r\n    if (!(IS_HEX_ONLY in inputSchema.idBlock)) {\r\n        return {\r\n            verified: false,\r\n            result: { error: \"Wrong ASN.1 schema\" }\r\n        };\r\n    }\r\n    if (inputSchema.idBlock.isHexOnly !== inputData.idBlock.isHexOnly) {\r\n        return {\r\n            verified: false,\r\n            result: root\r\n        };\r\n    }\r\n    if (inputSchema.idBlock.isHexOnly) {\r\n        if ((VALUE_HEX_VIEW in inputSchema.idBlock) === false) {\r\n            return {\r\n                verified: false,\r\n                result: { error: \"Wrong ASN.1 schema\" }\r\n            };\r\n        }\r\n        const schemaView = inputSchema.idBlock.valueHexView;\r\n        const asn1View = inputData.idBlock.valueHexView;\r\n        if (schemaView.length !== asn1View.length) {\r\n            return {\r\n                verified: false,\r\n                result: root\r\n            };\r\n        }\r\n        for (let i = 0; i < schemaView.length; i++) {\r\n            if (schemaView[i] !== asn1View[1]) {\r\n                return {\r\n                    verified: false,\r\n                    result: root\r\n                };\r\n            }\r\n        }\r\n    }\r\n    if (inputSchema.name) {\r\n        inputSchema.name = inputSchema.name.replace(/^\\s+|\\s+$/g, EMPTY_STRING);\r\n        if (inputSchema.name)\r\n            root[inputSchema.name] = inputData;\r\n    }\r\n    if (inputSchema instanceof typeStore.Constructed) {\r\n        let admission = 0;\r\n        let result = {\r\n            verified: false,\r\n            result: {\r\n                error: \"Unknown error\",\r\n            }\r\n        };\r\n        let maxLength = inputSchema.valueBlock.value.length;\r\n        if (maxLength > 0) {\r\n            if (inputSchema.valueBlock.value[0] instanceof Repeated) {\r\n                maxLength = inputData.valueBlock.value.length;\r\n            }\r\n        }\r\n        if (maxLength === 0) {\r\n            return {\r\n                verified: true,\r\n                result: root\r\n            };\r\n        }\r\n        if ((inputData.valueBlock.value.length === 0) &&\r\n            (inputSchema.valueBlock.value.length !== 0)) {\r\n            let _optional = true;\r\n            for (let i = 0; i < inputSchema.valueBlock.value.length; i++)\r\n                _optional = _optional && (inputSchema.valueBlock.value[i].optional || false);\r\n            if (_optional) {\r\n                return {\r\n                    verified: true,\r\n                    result: root\r\n                };\r\n            }\r\n            if (inputSchema.name) {\r\n                inputSchema.name = inputSchema.name.replace(/^\\s+|\\s+$/g, EMPTY_STRING);\r\n                if (inputSchema.name)\r\n                    delete root[inputSchema.name];\r\n            }\r\n            root.error = \"Inconsistent object length\";\r\n            return {\r\n                verified: false,\r\n                result: root\r\n            };\r\n        }\r\n        for (let i = 0; i < maxLength; i++) {\r\n            if ((i - admission) >= inputData.valueBlock.value.length) {\r\n                if (inputSchema.valueBlock.value[i].optional === false) {\r\n                    const _result = {\r\n                        verified: false,\r\n                        result: root\r\n                    };\r\n                    root.error = \"Inconsistent length between ASN.1 data and schema\";\r\n                    if (inputSchema.name) {\r\n                        inputSchema.name = inputSchema.name.replace(/^\\s+|\\s+$/g, EMPTY_STRING);\r\n                        if (inputSchema.name) {\r\n                            delete root[inputSchema.name];\r\n                            _result.name = inputSchema.name;\r\n                        }\r\n                    }\r\n                    return _result;\r\n                }\r\n            }\r\n            else {\r\n                if (inputSchema.valueBlock.value[0] instanceof Repeated) {\r\n                    result = compareSchema(root, inputData.valueBlock.value[i], inputSchema.valueBlock.value[0].value);\r\n                    if (result.verified === false) {\r\n                        if (inputSchema.valueBlock.value[0].optional)\r\n                            admission++;\r\n                        else {\r\n                            if (inputSchema.name) {\r\n                                inputSchema.name = inputSchema.name.replace(/^\\s+|\\s+$/g, EMPTY_STRING);\r\n                                if (inputSchema.name)\r\n                                    delete root[inputSchema.name];\r\n                            }\r\n                            return result;\r\n                        }\r\n                    }\r\n                    if ((NAME in inputSchema.valueBlock.value[0]) && (inputSchema.valueBlock.value[0].name.length > 0)) {\r\n                        let arrayRoot = {};\r\n                        if ((LOCAL in inputSchema.valueBlock.value[0]) && (inputSchema.valueBlock.value[0].local))\r\n                            arrayRoot = inputData;\r\n                        else\r\n                            arrayRoot = root;\r\n                        if (typeof arrayRoot[inputSchema.valueBlock.value[0].name] === \"undefined\")\r\n                            arrayRoot[inputSchema.valueBlock.value[0].name] = [];\r\n                        arrayRoot[inputSchema.valueBlock.value[0].name].push(inputData.valueBlock.value[i]);\r\n                    }\r\n                }\r\n                else {\r\n                    result = compareSchema(root, inputData.valueBlock.value[i - admission], inputSchema.valueBlock.value[i]);\r\n                    if (result.verified === false) {\r\n                        if (inputSchema.valueBlock.value[i].optional)\r\n                            admission++;\r\n                        else {\r\n                            if (inputSchema.name) {\r\n                                inputSchema.name = inputSchema.name.replace(/^\\s+|\\s+$/g, EMPTY_STRING);\r\n                                if (inputSchema.name)\r\n                                    delete root[inputSchema.name];\r\n                            }\r\n                            return result;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (result.verified === false) {\r\n            const _result = {\r\n                verified: false,\r\n                result: root\r\n            };\r\n            if (inputSchema.name) {\r\n                inputSchema.name = inputSchema.name.replace(/^\\s+|\\s+$/g, EMPTY_STRING);\r\n                if (inputSchema.name) {\r\n                    delete root[inputSchema.name];\r\n                    _result.name = inputSchema.name;\r\n                }\r\n            }\r\n            return _result;\r\n        }\r\n        return {\r\n            verified: true,\r\n            result: root\r\n        };\r\n    }\r\n    if (inputSchema.primitiveSchema &&\r\n        (VALUE_HEX_VIEW in inputData.valueBlock)) {\r\n        const asn1 = localFromBER(inputData.valueBlock.valueHexView);\r\n        if (asn1.offset === -1) {\r\n            const _result = {\r\n                verified: false,\r\n                result: asn1.result\r\n            };\r\n            if (inputSchema.name) {\r\n                inputSchema.name = inputSchema.name.replace(/^\\s+|\\s+$/g, EMPTY_STRING);\r\n                if (inputSchema.name) {\r\n                    delete root[inputSchema.name];\r\n                    _result.name = inputSchema.name;\r\n                }\r\n            }\r\n            return _result;\r\n        }\r\n        return compareSchema(root, asn1.result, inputSchema.primitiveSchema);\r\n    }\r\n    return {\r\n        verified: true,\r\n        result: root\r\n    };\r\n}\r\nfunction verifySchema(inputBuffer, inputSchema) {\r\n    if ((inputSchema instanceof Object) === false) {\r\n        return {\r\n            verified: false,\r\n            result: { error: \"Wrong ASN.1 schema type\" }\r\n        };\r\n    }\r\n    const asn1 = localFromBER(pvtsutils.BufferSourceConverter.toUint8Array(inputBuffer));\r\n    if (asn1.offset === -1) {\r\n        return {\r\n            verified: false,\r\n            result: asn1.result\r\n        };\r\n    }\r\n    return compareSchema(asn1.result, asn1.result, inputSchema);\r\n}\n\nexport { Any, BaseBlock, BaseStringBlock, BitString, BmpString, Boolean, CharacterString, Choice, Constructed, DATE, DateTime, Duration, EndOfContent, Enumerated, GeneralString, GeneralizedTime, GraphicString, HexBlock, IA5String, Integer, Null, NumericString, ObjectIdentifier, OctetString, Primitive, PrintableString, RawData, RelativeObjectIdentifier, Repeated, Sequence, Set, TIME, TeletexString, TimeOfDay, UTCTime, UniversalString, Utf8String, ValueBlock, VideotexString, ViewWriter, VisibleString, compareSchema, fromBER, verifySchema };\n","var bigInt = (function (undefined) {\r\n    \"use strict\";\r\n\r\n    var BASE = 1e7,\r\n        LOG_BASE = 7,\r\n        MAX_INT = 9007199254740992,\r\n        MAX_INT_ARR = smallToArray(MAX_INT),\r\n        DEFAULT_ALPHABET = \"0123456789abcdefghijklmnopqrstuvwxyz\";\r\n\r\n    var supportsNativeBigInt = typeof BigInt === \"function\";\r\n\r\n    function Integer(v, radix, alphabet, caseSensitive) {\r\n        if (typeof v === \"undefined\") return Integer[0];\r\n        if (typeof radix !== \"undefined\") return +radix === 10 && !alphabet ? parseValue(v) : parseBase(v, radix, alphabet, caseSensitive);\r\n        return parseValue(v);\r\n    }\r\n\r\n    function BigInteger(value, sign) {\r\n        this.value = value;\r\n        this.sign = sign;\r\n        this.isSmall = false;\r\n    }\r\n    BigInteger.prototype = Object.create(Integer.prototype);\r\n\r\n    function SmallInteger(value) {\r\n        this.value = value;\r\n        this.sign = value < 0;\r\n        this.isSmall = true;\r\n    }\r\n    SmallInteger.prototype = Object.create(Integer.prototype);\r\n\r\n    function NativeBigInt(value) {\r\n        this.value = value;\r\n    }\r\n    NativeBigInt.prototype = Object.create(Integer.prototype);\r\n\r\n    function isPrecise(n) {\r\n        return -MAX_INT < n && n < MAX_INT;\r\n    }\r\n\r\n    function smallToArray(n) { // For performance reasons doesn't reference BASE, need to change this function if BASE changes\r\n        if (n < 1e7)\r\n            return [n];\r\n        if (n < 1e14)\r\n            return [n % 1e7, Math.floor(n / 1e7)];\r\n        return [n % 1e7, Math.floor(n / 1e7) % 1e7, Math.floor(n / 1e14)];\r\n    }\r\n\r\n    function arrayToSmall(arr) { // If BASE changes this function may need to change\r\n        trim(arr);\r\n        var length = arr.length;\r\n        if (length < 4 && compareAbs(arr, MAX_INT_ARR) < 0) {\r\n            switch (length) {\r\n                case 0: return 0;\r\n                case 1: return arr[0];\r\n                case 2: return arr[0] + arr[1] * BASE;\r\n                default: return arr[0] + (arr[1] + arr[2] * BASE) * BASE;\r\n            }\r\n        }\r\n        return arr;\r\n    }\r\n\r\n    function trim(v) {\r\n        var i = v.length;\r\n        while (v[--i] === 0);\r\n        v.length = i + 1;\r\n    }\r\n\r\n    function createArray(length) { // function shamelessly stolen from Yaffle's library https://github.com/Yaffle/BigInteger\r\n        var x = new Array(length);\r\n        var i = -1;\r\n        while (++i < length) {\r\n            x[i] = 0;\r\n        }\r\n        return x;\r\n    }\r\n\r\n    function truncate(n) {\r\n        if (n > 0) return Math.floor(n);\r\n        return Math.ceil(n);\r\n    }\r\n\r\n    function add(a, b) { // assumes a and b are arrays with a.length >= b.length\r\n        var l_a = a.length,\r\n            l_b = b.length,\r\n            r = new Array(l_a),\r\n            carry = 0,\r\n            base = BASE,\r\n            sum, i;\r\n        for (i = 0; i < l_b; i++) {\r\n            sum = a[i] + b[i] + carry;\r\n            carry = sum >= base ? 1 : 0;\r\n            r[i] = sum - carry * base;\r\n        }\r\n        while (i < l_a) {\r\n            sum = a[i] + carry;\r\n            carry = sum === base ? 1 : 0;\r\n            r[i++] = sum - carry * base;\r\n        }\r\n        if (carry > 0) r.push(carry);\r\n        return r;\r\n    }\r\n\r\n    function addAny(a, b) {\r\n        if (a.length >= b.length) return add(a, b);\r\n        return add(b, a);\r\n    }\r\n\r\n    function addSmall(a, carry) { // assumes a is array, carry is number with 0 <= carry < MAX_INT\r\n        var l = a.length,\r\n            r = new Array(l),\r\n            base = BASE,\r\n            sum, i;\r\n        for (i = 0; i < l; i++) {\r\n            sum = a[i] - base + carry;\r\n            carry = Math.floor(sum / base);\r\n            r[i] = sum - carry * base;\r\n            carry += 1;\r\n        }\r\n        while (carry > 0) {\r\n            r[i++] = carry % base;\r\n            carry = Math.floor(carry / base);\r\n        }\r\n        return r;\r\n    }\r\n\r\n    BigInteger.prototype.add = function (v) {\r\n        var n = parseValue(v);\r\n        if (this.sign !== n.sign) {\r\n            return this.subtract(n.negate());\r\n        }\r\n        var a = this.value, b = n.value;\r\n        if (n.isSmall) {\r\n            return new BigInteger(addSmall(a, Math.abs(b)), this.sign);\r\n        }\r\n        return new BigInteger(addAny(a, b), this.sign);\r\n    };\r\n    BigInteger.prototype.plus = BigInteger.prototype.add;\r\n\r\n    SmallInteger.prototype.add = function (v) {\r\n        var n = parseValue(v);\r\n        var a = this.value;\r\n        if (a < 0 !== n.sign) {\r\n            return this.subtract(n.negate());\r\n        }\r\n        var b = n.value;\r\n        if (n.isSmall) {\r\n            if (isPrecise(a + b)) return new SmallInteger(a + b);\r\n            b = smallToArray(Math.abs(b));\r\n        }\r\n        return new BigInteger(addSmall(b, Math.abs(a)), a < 0);\r\n    };\r\n    SmallInteger.prototype.plus = SmallInteger.prototype.add;\r\n\r\n    NativeBigInt.prototype.add = function (v) {\r\n        return new NativeBigInt(this.value + parseValue(v).value);\r\n    }\r\n    NativeBigInt.prototype.plus = NativeBigInt.prototype.add;\r\n\r\n    function subtract(a, b) { // assumes a and b are arrays with a >= b\r\n        var a_l = a.length,\r\n            b_l = b.length,\r\n            r = new Array(a_l),\r\n            borrow = 0,\r\n            base = BASE,\r\n            i, difference;\r\n        for (i = 0; i < b_l; i++) {\r\n            difference = a[i] - borrow - b[i];\r\n            if (difference < 0) {\r\n                difference += base;\r\n                borrow = 1;\r\n            } else borrow = 0;\r\n            r[i] = difference;\r\n        }\r\n        for (i = b_l; i < a_l; i++) {\r\n            difference = a[i] - borrow;\r\n            if (difference < 0) difference += base;\r\n            else {\r\n                r[i++] = difference;\r\n                break;\r\n            }\r\n            r[i] = difference;\r\n        }\r\n        for (; i < a_l; i++) {\r\n            r[i] = a[i];\r\n        }\r\n        trim(r);\r\n        return r;\r\n    }\r\n\r\n    function subtractAny(a, b, sign) {\r\n        var value;\r\n        if (compareAbs(a, b) >= 0) {\r\n            value = subtract(a, b);\r\n        } else {\r\n            value = subtract(b, a);\r\n            sign = !sign;\r\n        }\r\n        value = arrayToSmall(value);\r\n        if (typeof value === \"number\") {\r\n            if (sign) value = -value;\r\n            return new SmallInteger(value);\r\n        }\r\n        return new BigInteger(value, sign);\r\n    }\r\n\r\n    function subtractSmall(a, b, sign) { // assumes a is array, b is number with 0 <= b < MAX_INT\r\n        var l = a.length,\r\n            r = new Array(l),\r\n            carry = -b,\r\n            base = BASE,\r\n            i, difference;\r\n        for (i = 0; i < l; i++) {\r\n            difference = a[i] + carry;\r\n            carry = Math.floor(difference / base);\r\n            difference %= base;\r\n            r[i] = difference < 0 ? difference + base : difference;\r\n        }\r\n        r = arrayToSmall(r);\r\n        if (typeof r === \"number\") {\r\n            if (sign) r = -r;\r\n            return new SmallInteger(r);\r\n        } return new BigInteger(r, sign);\r\n    }\r\n\r\n    BigInteger.prototype.subtract = function (v) {\r\n        var n = parseValue(v);\r\n        if (this.sign !== n.sign) {\r\n            return this.add(n.negate());\r\n        }\r\n        var a = this.value, b = n.value;\r\n        if (n.isSmall)\r\n            return subtractSmall(a, Math.abs(b), this.sign);\r\n        return subtractAny(a, b, this.sign);\r\n    };\r\n    BigInteger.prototype.minus = BigInteger.prototype.subtract;\r\n\r\n    SmallInteger.prototype.subtract = function (v) {\r\n        var n = parseValue(v);\r\n        var a = this.value;\r\n        if (a < 0 !== n.sign) {\r\n            return this.add(n.negate());\r\n        }\r\n        var b = n.value;\r\n        if (n.isSmall) {\r\n            return new SmallInteger(a - b);\r\n        }\r\n        return subtractSmall(b, Math.abs(a), a >= 0);\r\n    };\r\n    SmallInteger.prototype.minus = SmallInteger.prototype.subtract;\r\n\r\n    NativeBigInt.prototype.subtract = function (v) {\r\n        return new NativeBigInt(this.value - parseValue(v).value);\r\n    }\r\n    NativeBigInt.prototype.minus = NativeBigInt.prototype.subtract;\r\n\r\n    BigInteger.prototype.negate = function () {\r\n        return new BigInteger(this.value, !this.sign);\r\n    };\r\n    SmallInteger.prototype.negate = function () {\r\n        var sign = this.sign;\r\n        var small = new SmallInteger(-this.value);\r\n        small.sign = !sign;\r\n        return small;\r\n    };\r\n    NativeBigInt.prototype.negate = function () {\r\n        return new NativeBigInt(-this.value);\r\n    }\r\n\r\n    BigInteger.prototype.abs = function () {\r\n        return new BigInteger(this.value, false);\r\n    };\r\n    SmallInteger.prototype.abs = function () {\r\n        return new SmallInteger(Math.abs(this.value));\r\n    };\r\n    NativeBigInt.prototype.abs = function () {\r\n        return new NativeBigInt(this.value >= 0 ? this.value : -this.value);\r\n    }\r\n\r\n\r\n    function multiplyLong(a, b) {\r\n        var a_l = a.length,\r\n            b_l = b.length,\r\n            l = a_l + b_l,\r\n            r = createArray(l),\r\n            base = BASE,\r\n            product, carry, i, a_i, b_j;\r\n        for (i = 0; i < a_l; ++i) {\r\n            a_i = a[i];\r\n            for (var j = 0; j < b_l; ++j) {\r\n                b_j = b[j];\r\n                product = a_i * b_j + r[i + j];\r\n                carry = Math.floor(product / base);\r\n                r[i + j] = product - carry * base;\r\n                r[i + j + 1] += carry;\r\n            }\r\n        }\r\n        trim(r);\r\n        return r;\r\n    }\r\n\r\n    function multiplySmall(a, b) { // assumes a is array, b is number with |b| < BASE\r\n        var l = a.length,\r\n            r = new Array(l),\r\n            base = BASE,\r\n            carry = 0,\r\n            product, i;\r\n        for (i = 0; i < l; i++) {\r\n            product = a[i] * b + carry;\r\n            carry = Math.floor(product / base);\r\n            r[i] = product - carry * base;\r\n        }\r\n        while (carry > 0) {\r\n            r[i++] = carry % base;\r\n            carry = Math.floor(carry / base);\r\n        }\r\n        return r;\r\n    }\r\n\r\n    function shiftLeft(x, n) {\r\n        var r = [];\r\n        while (n-- > 0) r.push(0);\r\n        return r.concat(x);\r\n    }\r\n\r\n    function multiplyKaratsuba(x, y) {\r\n        var n = Math.max(x.length, y.length);\r\n\r\n        if (n <= 30) return multiplyLong(x, y);\r\n        n = Math.ceil(n / 2);\r\n\r\n        var b = x.slice(n),\r\n            a = x.slice(0, n),\r\n            d = y.slice(n),\r\n            c = y.slice(0, n);\r\n\r\n        var ac = multiplyKaratsuba(a, c),\r\n            bd = multiplyKaratsuba(b, d),\r\n            abcd = multiplyKaratsuba(addAny(a, b), addAny(c, d));\r\n\r\n        var product = addAny(addAny(ac, shiftLeft(subtract(subtract(abcd, ac), bd), n)), shiftLeft(bd, 2 * n));\r\n        trim(product);\r\n        return product;\r\n    }\r\n\r\n    // The following function is derived from a surface fit of a graph plotting the performance difference\r\n    // between long multiplication and karatsuba multiplication versus the lengths of the two arrays.\r\n    function useKaratsuba(l1, l2) {\r\n        return -0.012 * l1 - 0.012 * l2 + 0.000015 * l1 * l2 > 0;\r\n    }\r\n\r\n    BigInteger.prototype.multiply = function (v) {\r\n        var n = parseValue(v),\r\n            a = this.value, b = n.value,\r\n            sign = this.sign !== n.sign,\r\n            abs;\r\n        if (n.isSmall) {\r\n            if (b === 0) return Integer[0];\r\n            if (b === 1) return this;\r\n            if (b === -1) return this.negate();\r\n            abs = Math.abs(b);\r\n            if (abs < BASE) {\r\n                return new BigInteger(multiplySmall(a, abs), sign);\r\n            }\r\n            b = smallToArray(abs);\r\n        }\r\n        if (useKaratsuba(a.length, b.length)) // Karatsuba is only faster for certain array sizes\r\n            return new BigInteger(multiplyKaratsuba(a, b), sign);\r\n        return new BigInteger(multiplyLong(a, b), sign);\r\n    };\r\n\r\n    BigInteger.prototype.times = BigInteger.prototype.multiply;\r\n\r\n    function multiplySmallAndArray(a, b, sign) { // a >= 0\r\n        if (a < BASE) {\r\n            return new BigInteger(multiplySmall(b, a), sign);\r\n        }\r\n        return new BigInteger(multiplyLong(b, smallToArray(a)), sign);\r\n    }\r\n    SmallInteger.prototype._multiplyBySmall = function (a) {\r\n        if (isPrecise(a.value * this.value)) {\r\n            return new SmallInteger(a.value * this.value);\r\n        }\r\n        return multiplySmallAndArray(Math.abs(a.value), smallToArray(Math.abs(this.value)), this.sign !== a.sign);\r\n    };\r\n    BigInteger.prototype._multiplyBySmall = function (a) {\r\n        if (a.value === 0) return Integer[0];\r\n        if (a.value === 1) return this;\r\n        if (a.value === -1) return this.negate();\r\n        return multiplySmallAndArray(Math.abs(a.value), this.value, this.sign !== a.sign);\r\n    };\r\n    SmallInteger.prototype.multiply = function (v) {\r\n        return parseValue(v)._multiplyBySmall(this);\r\n    };\r\n    SmallInteger.prototype.times = SmallInteger.prototype.multiply;\r\n\r\n    NativeBigInt.prototype.multiply = function (v) {\r\n        return new NativeBigInt(this.value * parseValue(v).value);\r\n    }\r\n    NativeBigInt.prototype.times = NativeBigInt.prototype.multiply;\r\n\r\n    function square(a) {\r\n        //console.assert(2 * BASE * BASE < MAX_INT);\r\n        var l = a.length,\r\n            r = createArray(l + l),\r\n            base = BASE,\r\n            product, carry, i, a_i, a_j;\r\n        for (i = 0; i < l; i++) {\r\n            a_i = a[i];\r\n            carry = 0 - a_i * a_i;\r\n            for (var j = i; j < l; j++) {\r\n                a_j = a[j];\r\n                product = 2 * (a_i * a_j) + r[i + j] + carry;\r\n                carry = Math.floor(product / base);\r\n                r[i + j] = product - carry * base;\r\n            }\r\n            r[i + l] = carry;\r\n        }\r\n        trim(r);\r\n        return r;\r\n    }\r\n\r\n    BigInteger.prototype.square = function () {\r\n        return new BigInteger(square(this.value), false);\r\n    };\r\n\r\n    SmallInteger.prototype.square = function () {\r\n        var value = this.value * this.value;\r\n        if (isPrecise(value)) return new SmallInteger(value);\r\n        return new BigInteger(square(smallToArray(Math.abs(this.value))), false);\r\n    };\r\n\r\n    NativeBigInt.prototype.square = function (v) {\r\n        return new NativeBigInt(this.value * this.value);\r\n    }\r\n\r\n    function divMod1(a, b) { // Left over from previous version. Performs faster than divMod2 on smaller input sizes.\r\n        var a_l = a.length,\r\n            b_l = b.length,\r\n            base = BASE,\r\n            result = createArray(b.length),\r\n            divisorMostSignificantDigit = b[b_l - 1],\r\n            // normalization\r\n            lambda = Math.ceil(base / (2 * divisorMostSignificantDigit)),\r\n            remainder = multiplySmall(a, lambda),\r\n            divisor = multiplySmall(b, lambda),\r\n            quotientDigit, shift, carry, borrow, i, l, q;\r\n        if (remainder.length <= a_l) remainder.push(0);\r\n        divisor.push(0);\r\n        divisorMostSignificantDigit = divisor[b_l - 1];\r\n        for (shift = a_l - b_l; shift >= 0; shift--) {\r\n            quotientDigit = base - 1;\r\n            if (remainder[shift + b_l] !== divisorMostSignificantDigit) {\r\n                quotientDigit = Math.floor((remainder[shift + b_l] * base + remainder[shift + b_l - 1]) / divisorMostSignificantDigit);\r\n            }\r\n            // quotientDigit <= base - 1\r\n            carry = 0;\r\n            borrow = 0;\r\n            l = divisor.length;\r\n            for (i = 0; i < l; i++) {\r\n                carry += quotientDigit * divisor[i];\r\n                q = Math.floor(carry / base);\r\n                borrow += remainder[shift + i] - (carry - q * base);\r\n                carry = q;\r\n                if (borrow < 0) {\r\n                    remainder[shift + i] = borrow + base;\r\n                    borrow = -1;\r\n                } else {\r\n                    remainder[shift + i] = borrow;\r\n                    borrow = 0;\r\n                }\r\n            }\r\n            while (borrow !== 0) {\r\n                quotientDigit -= 1;\r\n                carry = 0;\r\n                for (i = 0; i < l; i++) {\r\n                    carry += remainder[shift + i] - base + divisor[i];\r\n                    if (carry < 0) {\r\n                        remainder[shift + i] = carry + base;\r\n                        carry = 0;\r\n                    } else {\r\n                        remainder[shift + i] = carry;\r\n                        carry = 1;\r\n                    }\r\n                }\r\n                borrow += carry;\r\n            }\r\n            result[shift] = quotientDigit;\r\n        }\r\n        // denormalization\r\n        remainder = divModSmall(remainder, lambda)[0];\r\n        return [arrayToSmall(result), arrayToSmall(remainder)];\r\n    }\r\n\r\n    function divMod2(a, b) { // Implementation idea shamelessly stolen from Silent Matt's library http://silentmatt.com/biginteger/\r\n        // Performs faster than divMod1 on larger input sizes.\r\n        var a_l = a.length,\r\n            b_l = b.length,\r\n            result = [],\r\n            part = [],\r\n            base = BASE,\r\n            guess, xlen, highx, highy, check;\r\n        while (a_l) {\r\n            part.unshift(a[--a_l]);\r\n            trim(part);\r\n            if (compareAbs(part, b) < 0) {\r\n                result.push(0);\r\n                continue;\r\n            }\r\n            xlen = part.length;\r\n            highx = part[xlen - 1] * base + part[xlen - 2];\r\n            highy = b[b_l - 1] * base + b[b_l - 2];\r\n            if (xlen > b_l) {\r\n                highx = (highx + 1) * base;\r\n            }\r\n            guess = Math.ceil(highx / highy);\r\n            do {\r\n                check = multiplySmall(b, guess);\r\n                if (compareAbs(check, part) <= 0) break;\r\n                guess--;\r\n            } while (guess);\r\n            result.push(guess);\r\n            part = subtract(part, check);\r\n        }\r\n        result.reverse();\r\n        return [arrayToSmall(result), arrayToSmall(part)];\r\n    }\r\n\r\n    function divModSmall(value, lambda) {\r\n        var length = value.length,\r\n            quotient = createArray(length),\r\n            base = BASE,\r\n            i, q, remainder, divisor;\r\n        remainder = 0;\r\n        for (i = length - 1; i >= 0; --i) {\r\n            divisor = remainder * base + value[i];\r\n            q = truncate(divisor / lambda);\r\n            remainder = divisor - q * lambda;\r\n            quotient[i] = q | 0;\r\n        }\r\n        return [quotient, remainder | 0];\r\n    }\r\n\r\n    function divModAny(self, v) {\r\n        var value, n = parseValue(v);\r\n        if (supportsNativeBigInt) {\r\n            return [new NativeBigInt(self.value / n.value), new NativeBigInt(self.value % n.value)];\r\n        }\r\n        var a = self.value, b = n.value;\r\n        var quotient;\r\n        if (b === 0) throw new Error(\"Cannot divide by zero\");\r\n        if (self.isSmall) {\r\n            if (n.isSmall) {\r\n                return [new SmallInteger(truncate(a / b)), new SmallInteger(a % b)];\r\n            }\r\n            return [Integer[0], self];\r\n        }\r\n        if (n.isSmall) {\r\n            if (b === 1) return [self, Integer[0]];\r\n            if (b == -1) return [self.negate(), Integer[0]];\r\n            var abs = Math.abs(b);\r\n            if (abs < BASE) {\r\n                value = divModSmall(a, abs);\r\n                quotient = arrayToSmall(value[0]);\r\n                var remainder = value[1];\r\n                if (self.sign) remainder = -remainder;\r\n                if (typeof quotient === \"number\") {\r\n                    if (self.sign !== n.sign) quotient = -quotient;\r\n                    return [new SmallInteger(quotient), new SmallInteger(remainder)];\r\n                }\r\n                return [new BigInteger(quotient, self.sign !== n.sign), new SmallInteger(remainder)];\r\n            }\r\n            b = smallToArray(abs);\r\n        }\r\n        var comparison = compareAbs(a, b);\r\n        if (comparison === -1) return [Integer[0], self];\r\n        if (comparison === 0) return [Integer[self.sign === n.sign ? 1 : -1], Integer[0]];\r\n\r\n        // divMod1 is faster on smaller input sizes\r\n        if (a.length + b.length <= 200)\r\n            value = divMod1(a, b);\r\n        else value = divMod2(a, b);\r\n\r\n        quotient = value[0];\r\n        var qSign = self.sign !== n.sign,\r\n            mod = value[1],\r\n            mSign = self.sign;\r\n        if (typeof quotient === \"number\") {\r\n            if (qSign) quotient = -quotient;\r\n            quotient = new SmallInteger(quotient);\r\n        } else quotient = new BigInteger(quotient, qSign);\r\n        if (typeof mod === \"number\") {\r\n            if (mSign) mod = -mod;\r\n            mod = new SmallInteger(mod);\r\n        } else mod = new BigInteger(mod, mSign);\r\n        return [quotient, mod];\r\n    }\r\n\r\n    BigInteger.prototype.divmod = function (v) {\r\n        var result = divModAny(this, v);\r\n        return {\r\n            quotient: result[0],\r\n            remainder: result[1]\r\n        };\r\n    };\r\n    NativeBigInt.prototype.divmod = SmallInteger.prototype.divmod = BigInteger.prototype.divmod;\r\n\r\n\r\n    BigInteger.prototype.divide = function (v) {\r\n        return divModAny(this, v)[0];\r\n    };\r\n    NativeBigInt.prototype.over = NativeBigInt.prototype.divide = function (v) {\r\n        return new NativeBigInt(this.value / parseValue(v).value);\r\n    };\r\n    SmallInteger.prototype.over = SmallInteger.prototype.divide = BigInteger.prototype.over = BigInteger.prototype.divide;\r\n\r\n    BigInteger.prototype.mod = function (v) {\r\n        return divModAny(this, v)[1];\r\n    };\r\n    NativeBigInt.prototype.mod = NativeBigInt.prototype.remainder = function (v) {\r\n        return new NativeBigInt(this.value % parseValue(v).value);\r\n    };\r\n    SmallInteger.prototype.remainder = SmallInteger.prototype.mod = BigInteger.prototype.remainder = BigInteger.prototype.mod;\r\n\r\n    BigInteger.prototype.pow = function (v) {\r\n        var n = parseValue(v),\r\n            a = this.value,\r\n            b = n.value,\r\n            value, x, y;\r\n        if (b === 0) return Integer[1];\r\n        if (a === 0) return Integer[0];\r\n        if (a === 1) return Integer[1];\r\n        if (a === -1) return n.isEven() ? Integer[1] : Integer[-1];\r\n        if (n.sign) {\r\n            return Integer[0];\r\n        }\r\n        if (!n.isSmall) throw new Error(\"The exponent \" + n.toString() + \" is too large.\");\r\n        if (this.isSmall) {\r\n            if (isPrecise(value = Math.pow(a, b)))\r\n                return new SmallInteger(truncate(value));\r\n        }\r\n        x = this;\r\n        y = Integer[1];\r\n        while (true) {\r\n            if (b & 1 === 1) {\r\n                y = y.times(x);\r\n                --b;\r\n            }\r\n            if (b === 0) break;\r\n            b /= 2;\r\n            x = x.square();\r\n        }\r\n        return y;\r\n    };\r\n    SmallInteger.prototype.pow = BigInteger.prototype.pow;\r\n\r\n    NativeBigInt.prototype.pow = function (v) {\r\n        var n = parseValue(v);\r\n        var a = this.value, b = n.value;\r\n        var _0 = BigInt(0), _1 = BigInt(1), _2 = BigInt(2);\r\n        if (b === _0) return Integer[1];\r\n        if (a === _0) return Integer[0];\r\n        if (a === _1) return Integer[1];\r\n        if (a === BigInt(-1)) return n.isEven() ? Integer[1] : Integer[-1];\r\n        if (n.isNegative()) return new NativeBigInt(_0);\r\n        var x = this;\r\n        var y = Integer[1];\r\n        while (true) {\r\n            if ((b & _1) === _1) {\r\n                y = y.times(x);\r\n                --b;\r\n            }\r\n            if (b === _0) break;\r\n            b /= _2;\r\n            x = x.square();\r\n        }\r\n        return y;\r\n    }\r\n\r\n    BigInteger.prototype.modPow = function (exp, mod) {\r\n        exp = parseValue(exp);\r\n        mod = parseValue(mod);\r\n        if (mod.isZero()) throw new Error(\"Cannot take modPow with modulus 0\");\r\n        var r = Integer[1],\r\n            base = this.mod(mod);\r\n        if (exp.isNegative()) {\r\n            exp = exp.multiply(Integer[-1]);\r\n            base = base.modInv(mod);\r\n        }\r\n        while (exp.isPositive()) {\r\n            if (base.isZero()) return Integer[0];\r\n            if (exp.isOdd()) r = r.multiply(base).mod(mod);\r\n            exp = exp.divide(2);\r\n            base = base.square().mod(mod);\r\n        }\r\n        return r;\r\n    };\r\n    NativeBigInt.prototype.modPow = SmallInteger.prototype.modPow = BigInteger.prototype.modPow;\r\n\r\n    function compareAbs(a, b) {\r\n        if (a.length !== b.length) {\r\n            return a.length > b.length ? 1 : -1;\r\n        }\r\n        for (var i = a.length - 1; i >= 0; i--) {\r\n            if (a[i] !== b[i]) return a[i] > b[i] ? 1 : -1;\r\n        }\r\n        return 0;\r\n    }\r\n\r\n    BigInteger.prototype.compareAbs = function (v) {\r\n        var n = parseValue(v),\r\n            a = this.value,\r\n            b = n.value;\r\n        if (n.isSmall) return 1;\r\n        return compareAbs(a, b);\r\n    };\r\n    SmallInteger.prototype.compareAbs = function (v) {\r\n        var n = parseValue(v),\r\n            a = Math.abs(this.value),\r\n            b = n.value;\r\n        if (n.isSmall) {\r\n            b = Math.abs(b);\r\n            return a === b ? 0 : a > b ? 1 : -1;\r\n        }\r\n        return -1;\r\n    };\r\n    NativeBigInt.prototype.compareAbs = function (v) {\r\n        var a = this.value;\r\n        var b = parseValue(v).value;\r\n        a = a >= 0 ? a : -a;\r\n        b = b >= 0 ? b : -b;\r\n        return a === b ? 0 : a > b ? 1 : -1;\r\n    }\r\n\r\n    BigInteger.prototype.compare = function (v) {\r\n        // See discussion about comparison with Infinity:\r\n        // https://github.com/peterolson/BigInteger.js/issues/61\r\n        if (v === Infinity) {\r\n            return -1;\r\n        }\r\n        if (v === -Infinity) {\r\n            return 1;\r\n        }\r\n\r\n        var n = parseValue(v),\r\n            a = this.value,\r\n            b = n.value;\r\n        if (this.sign !== n.sign) {\r\n            return n.sign ? 1 : -1;\r\n        }\r\n        if (n.isSmall) {\r\n            return this.sign ? -1 : 1;\r\n        }\r\n        return compareAbs(a, b) * (this.sign ? -1 : 1);\r\n    };\r\n    BigInteger.prototype.compareTo = BigInteger.prototype.compare;\r\n\r\n    SmallInteger.prototype.compare = function (v) {\r\n        if (v === Infinity) {\r\n            return -1;\r\n        }\r\n        if (v === -Infinity) {\r\n            return 1;\r\n        }\r\n\r\n        var n = parseValue(v),\r\n            a = this.value,\r\n            b = n.value;\r\n        if (n.isSmall) {\r\n            return a == b ? 0 : a > b ? 1 : -1;\r\n        }\r\n        if (a < 0 !== n.sign) {\r\n            return a < 0 ? -1 : 1;\r\n        }\r\n        return a < 0 ? 1 : -1;\r\n    };\r\n    SmallInteger.prototype.compareTo = SmallInteger.prototype.compare;\r\n\r\n    NativeBigInt.prototype.compare = function (v) {\r\n        if (v === Infinity) {\r\n            return -1;\r\n        }\r\n        if (v === -Infinity) {\r\n            return 1;\r\n        }\r\n        var a = this.value;\r\n        var b = parseValue(v).value;\r\n        return a === b ? 0 : a > b ? 1 : -1;\r\n    }\r\n    NativeBigInt.prototype.compareTo = NativeBigInt.prototype.compare;\r\n\r\n    BigInteger.prototype.equals = function (v) {\r\n        return this.compare(v) === 0;\r\n    };\r\n    NativeBigInt.prototype.eq = NativeBigInt.prototype.equals = SmallInteger.prototype.eq = SmallInteger.prototype.equals = BigInteger.prototype.eq = BigInteger.prototype.equals;\r\n\r\n    BigInteger.prototype.notEquals = function (v) {\r\n        return this.compare(v) !== 0;\r\n    };\r\n    NativeBigInt.prototype.neq = NativeBigInt.prototype.notEquals = SmallInteger.prototype.neq = SmallInteger.prototype.notEquals = BigInteger.prototype.neq = BigInteger.prototype.notEquals;\r\n\r\n    BigInteger.prototype.greater = function (v) {\r\n        return this.compare(v) > 0;\r\n    };\r\n    NativeBigInt.prototype.gt = NativeBigInt.prototype.greater = SmallInteger.prototype.gt = SmallInteger.prototype.greater = BigInteger.prototype.gt = BigInteger.prototype.greater;\r\n\r\n    BigInteger.prototype.lesser = function (v) {\r\n        return this.compare(v) < 0;\r\n    };\r\n    NativeBigInt.prototype.lt = NativeBigInt.prototype.lesser = SmallInteger.prototype.lt = SmallInteger.prototype.lesser = BigInteger.prototype.lt = BigInteger.prototype.lesser;\r\n\r\n    BigInteger.prototype.greaterOrEquals = function (v) {\r\n        return this.compare(v) >= 0;\r\n    };\r\n    NativeBigInt.prototype.geq = NativeBigInt.prototype.greaterOrEquals = SmallInteger.prototype.geq = SmallInteger.prototype.greaterOrEquals = BigInteger.prototype.geq = BigInteger.prototype.greaterOrEquals;\r\n\r\n    BigInteger.prototype.lesserOrEquals = function (v) {\r\n        return this.compare(v) <= 0;\r\n    };\r\n    NativeBigInt.prototype.leq = NativeBigInt.prototype.lesserOrEquals = SmallInteger.prototype.leq = SmallInteger.prototype.lesserOrEquals = BigInteger.prototype.leq = BigInteger.prototype.lesserOrEquals;\r\n\r\n    BigInteger.prototype.isEven = function () {\r\n        return (this.value[0] & 1) === 0;\r\n    };\r\n    SmallInteger.prototype.isEven = function () {\r\n        return (this.value & 1) === 0;\r\n    };\r\n    NativeBigInt.prototype.isEven = function () {\r\n        return (this.value & BigInt(1)) === BigInt(0);\r\n    }\r\n\r\n    BigInteger.prototype.isOdd = function () {\r\n        return (this.value[0] & 1) === 1;\r\n    };\r\n    SmallInteger.prototype.isOdd = function () {\r\n        return (this.value & 1) === 1;\r\n    };\r\n    NativeBigInt.prototype.isOdd = function () {\r\n        return (this.value & BigInt(1)) === BigInt(1);\r\n    }\r\n\r\n    BigInteger.prototype.isPositive = function () {\r\n        return !this.sign;\r\n    };\r\n    SmallInteger.prototype.isPositive = function () {\r\n        return this.value > 0;\r\n    };\r\n    NativeBigInt.prototype.isPositive = SmallInteger.prototype.isPositive;\r\n\r\n    BigInteger.prototype.isNegative = function () {\r\n        return this.sign;\r\n    };\r\n    SmallInteger.prototype.isNegative = function () {\r\n        return this.value < 0;\r\n    };\r\n    NativeBigInt.prototype.isNegative = SmallInteger.prototype.isNegative;\r\n\r\n    BigInteger.prototype.isUnit = function () {\r\n        return false;\r\n    };\r\n    SmallInteger.prototype.isUnit = function () {\r\n        return Math.abs(this.value) === 1;\r\n    };\r\n    NativeBigInt.prototype.isUnit = function () {\r\n        return this.abs().value === BigInt(1);\r\n    }\r\n\r\n    BigInteger.prototype.isZero = function () {\r\n        return false;\r\n    };\r\n    SmallInteger.prototype.isZero = function () {\r\n        return this.value === 0;\r\n    };\r\n    NativeBigInt.prototype.isZero = function () {\r\n        return this.value === BigInt(0);\r\n    }\r\n\r\n    BigInteger.prototype.isDivisibleBy = function (v) {\r\n        var n = parseValue(v);\r\n        if (n.isZero()) return false;\r\n        if (n.isUnit()) return true;\r\n        if (n.compareAbs(2) === 0) return this.isEven();\r\n        return this.mod(n).isZero();\r\n    };\r\n    NativeBigInt.prototype.isDivisibleBy = SmallInteger.prototype.isDivisibleBy = BigInteger.prototype.isDivisibleBy;\r\n\r\n    function isBasicPrime(v) {\r\n        var n = v.abs();\r\n        if (n.isUnit()) return false;\r\n        if (n.equals(2) || n.equals(3) || n.equals(5)) return true;\r\n        if (n.isEven() || n.isDivisibleBy(3) || n.isDivisibleBy(5)) return false;\r\n        if (n.lesser(49)) return true;\r\n        // we don't know if it's prime: let the other functions figure it out\r\n    }\r\n\r\n    function millerRabinTest(n, a) {\r\n        var nPrev = n.prev(),\r\n            b = nPrev,\r\n            r = 0,\r\n            d, t, i, x;\r\n        while (b.isEven()) b = b.divide(2), r++;\r\n        next: for (i = 0; i < a.length; i++) {\r\n            if (n.lesser(a[i])) continue;\r\n            x = bigInt(a[i]).modPow(b, n);\r\n            if (x.isUnit() || x.equals(nPrev)) continue;\r\n            for (d = r - 1; d != 0; d--) {\r\n                x = x.square().mod(n);\r\n                if (x.isUnit()) return false;\r\n                if (x.equals(nPrev)) continue next;\r\n            }\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    // Set \"strict\" to true to force GRH-supported lower bound of 2*log(N)^2\r\n    BigInteger.prototype.isPrime = function (strict) {\r\n        var isPrime = isBasicPrime(this);\r\n        if (isPrime !== undefined) return isPrime;\r\n        var n = this.abs();\r\n        var bits = n.bitLength();\r\n        if (bits <= 64)\r\n            return millerRabinTest(n, [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37]);\r\n        var logN = Math.log(2) * bits.toJSNumber();\r\n        var t = Math.ceil((strict === true) ? (2 * Math.pow(logN, 2)) : logN);\r\n        for (var a = [], i = 0; i < t; i++) {\r\n            a.push(bigInt(i + 2));\r\n        }\r\n        return millerRabinTest(n, a);\r\n    };\r\n    NativeBigInt.prototype.isPrime = SmallInteger.prototype.isPrime = BigInteger.prototype.isPrime;\r\n\r\n    BigInteger.prototype.isProbablePrime = function (iterations, rng) {\r\n        var isPrime = isBasicPrime(this);\r\n        if (isPrime !== undefined) return isPrime;\r\n        var n = this.abs();\r\n        var t = iterations === undefined ? 5 : iterations;\r\n        for (var a = [], i = 0; i < t; i++) {\r\n            a.push(bigInt.randBetween(2, n.minus(2), rng));\r\n        }\r\n        return millerRabinTest(n, a);\r\n    };\r\n    NativeBigInt.prototype.isProbablePrime = SmallInteger.prototype.isProbablePrime = BigInteger.prototype.isProbablePrime;\r\n\r\n    BigInteger.prototype.modInv = function (n) {\r\n        var t = bigInt.zero, newT = bigInt.one, r = parseValue(n), newR = this.abs(), q, lastT, lastR;\r\n        while (!newR.isZero()) {\r\n            q = r.divide(newR);\r\n            lastT = t;\r\n            lastR = r;\r\n            t = newT;\r\n            r = newR;\r\n            newT = lastT.subtract(q.multiply(newT));\r\n            newR = lastR.subtract(q.multiply(newR));\r\n        }\r\n        if (!r.isUnit()) throw new Error(this.toString() + \" and \" + n.toString() + \" are not co-prime\");\r\n        if (t.compare(0) === -1) {\r\n            t = t.add(n);\r\n        }\r\n        if (this.isNegative()) {\r\n            return t.negate();\r\n        }\r\n        return t;\r\n    };\r\n\r\n    NativeBigInt.prototype.modInv = SmallInteger.prototype.modInv = BigInteger.prototype.modInv;\r\n\r\n    BigInteger.prototype.next = function () {\r\n        var value = this.value;\r\n        if (this.sign) {\r\n            return subtractSmall(value, 1, this.sign);\r\n        }\r\n        return new BigInteger(addSmall(value, 1), this.sign);\r\n    };\r\n    SmallInteger.prototype.next = function () {\r\n        var value = this.value;\r\n        if (value + 1 < MAX_INT) return new SmallInteger(value + 1);\r\n        return new BigInteger(MAX_INT_ARR, false);\r\n    };\r\n    NativeBigInt.prototype.next = function () {\r\n        return new NativeBigInt(this.value + BigInt(1));\r\n    }\r\n\r\n    BigInteger.prototype.prev = function () {\r\n        var value = this.value;\r\n        if (this.sign) {\r\n            return new BigInteger(addSmall(value, 1), true);\r\n        }\r\n        return subtractSmall(value, 1, this.sign);\r\n    };\r\n    SmallInteger.prototype.prev = function () {\r\n        var value = this.value;\r\n        if (value - 1 > -MAX_INT) return new SmallInteger(value - 1);\r\n        return new BigInteger(MAX_INT_ARR, true);\r\n    };\r\n    NativeBigInt.prototype.prev = function () {\r\n        return new NativeBigInt(this.value - BigInt(1));\r\n    }\r\n\r\n    var powersOfTwo = [1];\r\n    while (2 * powersOfTwo[powersOfTwo.length - 1] <= BASE) powersOfTwo.push(2 * powersOfTwo[powersOfTwo.length - 1]);\r\n    var powers2Length = powersOfTwo.length, highestPower2 = powersOfTwo[powers2Length - 1];\r\n\r\n    function shift_isSmall(n) {\r\n        return Math.abs(n) <= BASE;\r\n    }\r\n\r\n    BigInteger.prototype.shiftLeft = function (v) {\r\n        var n = parseValue(v).toJSNumber();\r\n        if (!shift_isSmall(n)) {\r\n            throw new Error(String(n) + \" is too large for shifting.\");\r\n        }\r\n        if (n < 0) return this.shiftRight(-n);\r\n        var result = this;\r\n        if (result.isZero()) return result;\r\n        while (n >= powers2Length) {\r\n            result = result.multiply(highestPower2);\r\n            n -= powers2Length - 1;\r\n        }\r\n        return result.multiply(powersOfTwo[n]);\r\n    };\r\n    NativeBigInt.prototype.shiftLeft = SmallInteger.prototype.shiftLeft = BigInteger.prototype.shiftLeft;\r\n\r\n    BigInteger.prototype.shiftRight = function (v) {\r\n        var remQuo;\r\n        var n = parseValue(v).toJSNumber();\r\n        if (!shift_isSmall(n)) {\r\n            throw new Error(String(n) + \" is too large for shifting.\");\r\n        }\r\n        if (n < 0) return this.shiftLeft(-n);\r\n        var result = this;\r\n        while (n >= powers2Length) {\r\n            if (result.isZero() || (result.isNegative() && result.isUnit())) return result;\r\n            remQuo = divModAny(result, highestPower2);\r\n            result = remQuo[1].isNegative() ? remQuo[0].prev() : remQuo[0];\r\n            n -= powers2Length - 1;\r\n        }\r\n        remQuo = divModAny(result, powersOfTwo[n]);\r\n        return remQuo[1].isNegative() ? remQuo[0].prev() : remQuo[0];\r\n    };\r\n    NativeBigInt.prototype.shiftRight = SmallInteger.prototype.shiftRight = BigInteger.prototype.shiftRight;\r\n\r\n    function bitwise(x, y, fn) {\r\n        y = parseValue(y);\r\n        var xSign = x.isNegative(), ySign = y.isNegative();\r\n        var xRem = xSign ? x.not() : x,\r\n            yRem = ySign ? y.not() : y;\r\n        var xDigit = 0, yDigit = 0;\r\n        var xDivMod = null, yDivMod = null;\r\n        var result = [];\r\n        while (!xRem.isZero() || !yRem.isZero()) {\r\n            xDivMod = divModAny(xRem, highestPower2);\r\n            xDigit = xDivMod[1].toJSNumber();\r\n            if (xSign) {\r\n                xDigit = highestPower2 - 1 - xDigit; // two's complement for negative numbers\r\n            }\r\n\r\n            yDivMod = divModAny(yRem, highestPower2);\r\n            yDigit = yDivMod[1].toJSNumber();\r\n            if (ySign) {\r\n                yDigit = highestPower2 - 1 - yDigit; // two's complement for negative numbers\r\n            }\r\n\r\n            xRem = xDivMod[0];\r\n            yRem = yDivMod[0];\r\n            result.push(fn(xDigit, yDigit));\r\n        }\r\n        var sum = fn(xSign ? 1 : 0, ySign ? 1 : 0) !== 0 ? bigInt(-1) : bigInt(0);\r\n        for (var i = result.length - 1; i >= 0; i -= 1) {\r\n            sum = sum.multiply(highestPower2).add(bigInt(result[i]));\r\n        }\r\n        return sum;\r\n    }\r\n\r\n    BigInteger.prototype.not = function () {\r\n        return this.negate().prev();\r\n    };\r\n    NativeBigInt.prototype.not = SmallInteger.prototype.not = BigInteger.prototype.not;\r\n\r\n    BigInteger.prototype.and = function (n) {\r\n        return bitwise(this, n, function (a, b) { return a & b; });\r\n    };\r\n    NativeBigInt.prototype.and = SmallInteger.prototype.and = BigInteger.prototype.and;\r\n\r\n    BigInteger.prototype.or = function (n) {\r\n        return bitwise(this, n, function (a, b) { return a | b; });\r\n    };\r\n    NativeBigInt.prototype.or = SmallInteger.prototype.or = BigInteger.prototype.or;\r\n\r\n    BigInteger.prototype.xor = function (n) {\r\n        return bitwise(this, n, function (a, b) { return a ^ b; });\r\n    };\r\n    NativeBigInt.prototype.xor = SmallInteger.prototype.xor = BigInteger.prototype.xor;\r\n\r\n    var LOBMASK_I = 1 << 30, LOBMASK_BI = (BASE & -BASE) * (BASE & -BASE) | LOBMASK_I;\r\n    function roughLOB(n) { // get lowestOneBit (rough)\r\n        // SmallInteger: return Min(lowestOneBit(n), 1 << 30)\r\n        // BigInteger: return Min(lowestOneBit(n), 1 << 14) [BASE=1e7]\r\n        var v = n.value,\r\n            x = typeof v === \"number\" ? v | LOBMASK_I :\r\n                typeof v === \"bigint\" ? v | BigInt(LOBMASK_I) :\r\n                    v[0] + v[1] * BASE | LOBMASK_BI;\r\n        return x & -x;\r\n    }\r\n\r\n    function integerLogarithm(value, base) {\r\n        if (base.compareTo(value) <= 0) {\r\n            var tmp = integerLogarithm(value, base.square(base));\r\n            var p = tmp.p;\r\n            var e = tmp.e;\r\n            var t = p.multiply(base);\r\n            return t.compareTo(value) <= 0 ? { p: t, e: e * 2 + 1 } : { p: p, e: e * 2 };\r\n        }\r\n        return { p: bigInt(1), e: 0 };\r\n    }\r\n\r\n    BigInteger.prototype.bitLength = function () {\r\n        var n = this;\r\n        if (n.compareTo(bigInt(0)) < 0) {\r\n            n = n.negate().subtract(bigInt(1));\r\n        }\r\n        if (n.compareTo(bigInt(0)) === 0) {\r\n            return bigInt(0);\r\n        }\r\n        return bigInt(integerLogarithm(n, bigInt(2)).e).add(bigInt(1));\r\n    }\r\n    NativeBigInt.prototype.bitLength = SmallInteger.prototype.bitLength = BigInteger.prototype.bitLength;\r\n\r\n    function max(a, b) {\r\n        a = parseValue(a);\r\n        b = parseValue(b);\r\n        return a.greater(b) ? a : b;\r\n    }\r\n    function min(a, b) {\r\n        a = parseValue(a);\r\n        b = parseValue(b);\r\n        return a.lesser(b) ? a : b;\r\n    }\r\n    function gcd(a, b) {\r\n        a = parseValue(a).abs();\r\n        b = parseValue(b).abs();\r\n        if (a.equals(b)) return a;\r\n        if (a.isZero()) return b;\r\n        if (b.isZero()) return a;\r\n        var c = Integer[1], d, t;\r\n        while (a.isEven() && b.isEven()) {\r\n            d = min(roughLOB(a), roughLOB(b));\r\n            a = a.divide(d);\r\n            b = b.divide(d);\r\n            c = c.multiply(d);\r\n        }\r\n        while (a.isEven()) {\r\n            a = a.divide(roughLOB(a));\r\n        }\r\n        do {\r\n            while (b.isEven()) {\r\n                b = b.divide(roughLOB(b));\r\n            }\r\n            if (a.greater(b)) {\r\n                t = b; b = a; a = t;\r\n            }\r\n            b = b.subtract(a);\r\n        } while (!b.isZero());\r\n        return c.isUnit() ? a : a.multiply(c);\r\n    }\r\n    function lcm(a, b) {\r\n        a = parseValue(a).abs();\r\n        b = parseValue(b).abs();\r\n        return a.divide(gcd(a, b)).multiply(b);\r\n    }\r\n    function randBetween(a, b, rng) {\r\n        a = parseValue(a);\r\n        b = parseValue(b);\r\n        var usedRNG = rng || Math.random;\r\n        var low = min(a, b), high = max(a, b);\r\n        var range = high.subtract(low).add(1);\r\n        if (range.isSmall) return low.add(Math.floor(usedRNG() * range));\r\n        var digits = toBase(range, BASE).value;\r\n        var result = [], restricted = true;\r\n        for (var i = 0; i < digits.length; i++) {\r\n            var top = restricted ? digits[i] + (i + 1 < digits.length ? digits[i + 1] / BASE : 0) : BASE;\r\n            var digit = truncate(usedRNG() * top);\r\n            result.push(digit);\r\n            if (digit < digits[i]) restricted = false;\r\n        }\r\n        return low.add(Integer.fromArray(result, BASE, false));\r\n    }\r\n\r\n    var parseBase = function (text, base, alphabet, caseSensitive) {\r\n        alphabet = alphabet || DEFAULT_ALPHABET;\r\n        text = String(text);\r\n        if (!caseSensitive) {\r\n            text = text.toLowerCase();\r\n            alphabet = alphabet.toLowerCase();\r\n        }\r\n        var length = text.length;\r\n        var i;\r\n        var absBase = Math.abs(base);\r\n        var alphabetValues = {};\r\n        for (i = 0; i < alphabet.length; i++) {\r\n            alphabetValues[alphabet[i]] = i;\r\n        }\r\n        for (i = 0; i < length; i++) {\r\n            var c = text[i];\r\n            if (c === \"-\") continue;\r\n            if (c in alphabetValues) {\r\n                if (alphabetValues[c] >= absBase) {\r\n                    if (c === \"1\" && absBase === 1) continue;\r\n                    throw new Error(c + \" is not a valid digit in base \" + base + \".\");\r\n                }\r\n            }\r\n        }\r\n        base = parseValue(base);\r\n        var digits = [];\r\n        var isNegative = text[0] === \"-\";\r\n        for (i = isNegative ? 1 : 0; i < text.length; i++) {\r\n            var c = text[i];\r\n            if (c in alphabetValues) digits.push(parseValue(alphabetValues[c]));\r\n            else if (c === \"<\") {\r\n                var start = i;\r\n                do { i++; } while (text[i] !== \">\" && i < text.length);\r\n                digits.push(parseValue(text.slice(start + 1, i)));\r\n            }\r\n            else throw new Error(c + \" is not a valid character\");\r\n        }\r\n        return parseBaseFromArray(digits, base, isNegative);\r\n    };\r\n\r\n    function parseBaseFromArray(digits, base, isNegative) {\r\n        var val = Integer[0], pow = Integer[1], i;\r\n        for (i = digits.length - 1; i >= 0; i--) {\r\n            val = val.add(digits[i].times(pow));\r\n            pow = pow.times(base);\r\n        }\r\n        return isNegative ? val.negate() : val;\r\n    }\r\n\r\n    function stringify(digit, alphabet) {\r\n        alphabet = alphabet || DEFAULT_ALPHABET;\r\n        if (digit < alphabet.length) {\r\n            return alphabet[digit];\r\n        }\r\n        return \"<\" + digit + \">\";\r\n    }\r\n\r\n    function toBase(n, base) {\r\n        base = bigInt(base);\r\n        if (base.isZero()) {\r\n            if (n.isZero()) return { value: [0], isNegative: false };\r\n            throw new Error(\"Cannot convert nonzero numbers to base 0.\");\r\n        }\r\n        if (base.equals(-1)) {\r\n            if (n.isZero()) return { value: [0], isNegative: false };\r\n            if (n.isNegative())\r\n                return {\r\n                    value: [].concat.apply([], Array.apply(null, Array(-n.toJSNumber()))\r\n                        .map(Array.prototype.valueOf, [1, 0])\r\n                    ),\r\n                    isNegative: false\r\n                };\r\n\r\n            var arr = Array.apply(null, Array(n.toJSNumber() - 1))\r\n                .map(Array.prototype.valueOf, [0, 1]);\r\n            arr.unshift([1]);\r\n            return {\r\n                value: [].concat.apply([], arr),\r\n                isNegative: false\r\n            };\r\n        }\r\n\r\n        var neg = false;\r\n        if (n.isNegative() && base.isPositive()) {\r\n            neg = true;\r\n            n = n.abs();\r\n        }\r\n        if (base.isUnit()) {\r\n            if (n.isZero()) return { value: [0], isNegative: false };\r\n\r\n            return {\r\n                value: Array.apply(null, Array(n.toJSNumber()))\r\n                    .map(Number.prototype.valueOf, 1),\r\n                isNegative: neg\r\n            };\r\n        }\r\n        var out = [];\r\n        var left = n, divmod;\r\n        while (left.isNegative() || left.compareAbs(base) >= 0) {\r\n            divmod = left.divmod(base);\r\n            left = divmod.quotient;\r\n            var digit = divmod.remainder;\r\n            if (digit.isNegative()) {\r\n                digit = base.minus(digit).abs();\r\n                left = left.next();\r\n            }\r\n            out.push(digit.toJSNumber());\r\n        }\r\n        out.push(left.toJSNumber());\r\n        return { value: out.reverse(), isNegative: neg };\r\n    }\r\n\r\n    function toBaseString(n, base, alphabet) {\r\n        var arr = toBase(n, base);\r\n        return (arr.isNegative ? \"-\" : \"\") + arr.value.map(function (x) {\r\n            return stringify(x, alphabet);\r\n        }).join('');\r\n    }\r\n\r\n    BigInteger.prototype.toArray = function (radix) {\r\n        return toBase(this, radix);\r\n    };\r\n\r\n    SmallInteger.prototype.toArray = function (radix) {\r\n        return toBase(this, radix);\r\n    };\r\n\r\n    NativeBigInt.prototype.toArray = function (radix) {\r\n        return toBase(this, radix);\r\n    };\r\n\r\n    BigInteger.prototype.toString = function (radix, alphabet) {\r\n        if (radix === undefined) radix = 10;\r\n        if (radix !== 10) return toBaseString(this, radix, alphabet);\r\n        var v = this.value, l = v.length, str = String(v[--l]), zeros = \"0000000\", digit;\r\n        while (--l >= 0) {\r\n            digit = String(v[l]);\r\n            str += zeros.slice(digit.length) + digit;\r\n        }\r\n        var sign = this.sign ? \"-\" : \"\";\r\n        return sign + str;\r\n    };\r\n\r\n    SmallInteger.prototype.toString = function (radix, alphabet) {\r\n        if (radix === undefined) radix = 10;\r\n        if (radix != 10) return toBaseString(this, radix, alphabet);\r\n        return String(this.value);\r\n    };\r\n\r\n    NativeBigInt.prototype.toString = SmallInteger.prototype.toString;\r\n\r\n    NativeBigInt.prototype.toJSON = BigInteger.prototype.toJSON = SmallInteger.prototype.toJSON = function () { return this.toString(); }\r\n\r\n    BigInteger.prototype.valueOf = function () {\r\n        return parseInt(this.toString(), 10);\r\n    };\r\n    BigInteger.prototype.toJSNumber = BigInteger.prototype.valueOf;\r\n\r\n    SmallInteger.prototype.valueOf = function () {\r\n        return this.value;\r\n    };\r\n    SmallInteger.prototype.toJSNumber = SmallInteger.prototype.valueOf;\r\n    NativeBigInt.prototype.valueOf = NativeBigInt.prototype.toJSNumber = function () {\r\n        return parseInt(this.toString(), 10);\r\n    }\r\n\r\n    function parseStringValue(v) {\r\n        if (isPrecise(+v)) {\r\n            var x = +v;\r\n            if (x === truncate(x))\r\n                return supportsNativeBigInt ? new NativeBigInt(BigInt(x)) : new SmallInteger(x);\r\n            throw new Error(\"Invalid integer: \" + v);\r\n        }\r\n        var sign = v[0] === \"-\";\r\n        if (sign) v = v.slice(1);\r\n        var split = v.split(/e/i);\r\n        if (split.length > 2) throw new Error(\"Invalid integer: \" + split.join(\"e\"));\r\n        if (split.length === 2) {\r\n            var exp = split[1];\r\n            if (exp[0] === \"+\") exp = exp.slice(1);\r\n            exp = +exp;\r\n            if (exp !== truncate(exp) || !isPrecise(exp)) throw new Error(\"Invalid integer: \" + exp + \" is not a valid exponent.\");\r\n            var text = split[0];\r\n            var decimalPlace = text.indexOf(\".\");\r\n            if (decimalPlace >= 0) {\r\n                exp -= text.length - decimalPlace - 1;\r\n                text = text.slice(0, decimalPlace) + text.slice(decimalPlace + 1);\r\n            }\r\n            if (exp < 0) throw new Error(\"Cannot include negative exponent part for integers\");\r\n            text += (new Array(exp + 1)).join(\"0\");\r\n            v = text;\r\n        }\r\n        var isValid = /^([0-9][0-9]*)$/.test(v);\r\n        if (!isValid) throw new Error(\"Invalid integer: \" + v);\r\n        if (supportsNativeBigInt) {\r\n            return new NativeBigInt(BigInt(sign ? \"-\" + v : v));\r\n        }\r\n        var r = [], max = v.length, l = LOG_BASE, min = max - l;\r\n        while (max > 0) {\r\n            r.push(+v.slice(min, max));\r\n            min -= l;\r\n            if (min < 0) min = 0;\r\n            max -= l;\r\n        }\r\n        trim(r);\r\n        return new BigInteger(r, sign);\r\n    }\r\n\r\n    function parseNumberValue(v) {\r\n        if (supportsNativeBigInt) {\r\n            return new NativeBigInt(BigInt(v));\r\n        }\r\n        if (isPrecise(v)) {\r\n            if (v !== truncate(v)) throw new Error(v + \" is not an integer.\");\r\n            return new SmallInteger(v);\r\n        }\r\n        return parseStringValue(v.toString());\r\n    }\r\n\r\n    function parseValue(v) {\r\n        if (typeof v === \"number\") {\r\n            return parseNumberValue(v);\r\n        }\r\n        if (typeof v === \"string\") {\r\n            return parseStringValue(v);\r\n        }\r\n        if (typeof v === \"bigint\") {\r\n            return new NativeBigInt(v);\r\n        }\r\n        return v;\r\n    }\r\n    // Pre-define numbers in range [-999,999]\r\n    for (var i = 0; i < 1000; i++) {\r\n        Integer[i] = parseValue(i);\r\n        if (i > 0) Integer[-i] = parseValue(-i);\r\n    }\r\n    // Backwards compatibility\r\n    Integer.one = Integer[1];\r\n    Integer.zero = Integer[0];\r\n    Integer.minusOne = Integer[-1];\r\n    Integer.max = max;\r\n    Integer.min = min;\r\n    Integer.gcd = gcd;\r\n    Integer.lcm = lcm;\r\n    Integer.isInstance = function (x) { return x instanceof BigInteger || x instanceof SmallInteger || x instanceof NativeBigInt; };\r\n    Integer.randBetween = randBetween;\r\n\r\n    Integer.fromArray = function (digits, base, isNegative) {\r\n        return parseBaseFromArray(digits.map(parseValue), parseValue(base || 10), isNegative);\r\n    };\r\n\r\n    return Integer;\r\n})();\r\n\r\n// Node.js check\r\nif (typeof module !== \"undefined\" && module.hasOwnProperty(\"exports\")) {\r\n    module.exports = bigInt;\r\n}\r\n\r\n//amd check\r\nif (typeof define === \"function\" && define.amd) {\r\n    define( function () {\r\n        return bigInt;\r\n    });\r\n}\r\n","'use strict';\n\nconst BinaryStream = require('lib/binary-stream');\nconst array = require('types/array');\nconst buffer = require('types/buffer');\nconst bool = require('types/bool');\nconst reserved = require('types/reserved');\nconst string = require('types/string');\nconst numbers = require('types/numbers');\nconst when = require('types/when');\nconst select = require('types/select');\nconst { encode } = require('lib/encode');\nconst { decode } = require('lib/decode');\nconst { encodingLength } = require('lib/encoding-length');\nconst Transaction = require('lib/transaction');\nconst NotEnoughDataError = require('lib/not-enough-data-error');\n\nconst types = {\n  array,\n  bool,\n  buffer,\n  reserved,\n  string,\n  when,\n  select,\n};\n\nfor (const type of Object.keys(numbers)) {\n  types[type] = numbers[type]; // eslint-disable-line security/detect-object-injection\n}\n\nconst kschema = Symbol('schema');\n\n/**\n * Create transform stream to encode objects into Buffer.\n * @param {Object} [schema]\n * @returns {EncodeStream}\n */\nfunction createEncodeStream(schema) {\n  const stream = new BinaryStream({\n    readableObjectMode: false,\n    writableObjectMode: true,\n    transform: transformEncode,\n  });\n\n  stream[kschema] = schema;\n  return stream;\n}\n\n/**\n * Create transform stream to decode binary data into object.\n * @param {Buffer|Object} [bufOrSchema]\n * @returns {DecodeStream}\n */\nfunction createDecodeStream(bufOrSchema) {\n  let schema = null;\n  const isBuffer = Buffer.isBuffer(bufOrSchema);\n\n  if (!isBuffer) {\n    schema = bufOrSchema;\n  }\n\n  const stream = new BinaryStream({\n    transform: transformDecode,\n    readableObjectMode: true,\n    writableObjectMode: false,\n  });\n\n  stream[kschema] = schema;\n\n  if (isBuffer) {\n    stream.append(bufOrSchema);\n  }\n\n  return stream;\n}\n\n/**\n * The `transform` function for transform stream.\n * @param {*} chunk Any valid js data type.\n * @param {string} encoding\n * @param {Function} cb\n */\nfunction transformEncode(chunk, encoding, cb) {\n  try {\n    encode(chunk, this[kschema], this);\n\n    const buf = this.slice();\n    this.consume(buf.length);\n\n    cb(null, buf);\n  } catch (error) {\n    cb(error);\n  }\n}\n\n/**\n * The `transform` function for transform stream.\n * @param {*} chunk Any valid js data type.\n * @param {string} encoding\n * @param {Function} cb\n */\nfunction transformDecode(chunk, encoding, cb) {\n  this.append(chunk);\n\n  try {\n    while (this.length > 0) {\n      const transaction = new Transaction(this);\n      const data = decode(transaction, this[kschema]);\n\n      transaction.commit();\n      this.push(data);\n    }\n\n    cb();\n  } catch (error) {\n    if (error instanceof NotEnoughDataError) {\n      cb();\n    } else {\n      cb(error);\n    }\n  }\n}\n\nmodule.exports = {\n  /* Main api */\n  createEncodeStream,\n  createDecodeStream,\n  encode,\n  decode,\n  encodingLength,\n\n  /* aliases */\n  createEncode: createEncodeStream,\n  createDecode: createDecodeStream,\n\n  /* Data types */\n  types,\n\n  /* Re-export utils */\n  BinaryStream,\n  NotEnoughDataError,\n};\n","'use strict';\n\nconst createFunction = require('generate-function');\nconst LinkedList = require('internal/linked-list');\n\n/**\n * An optimised partial implementation of Buffer list from `bl`.\n */\nclass BufferList {\n  /**\n   * @class\n   */\n  constructor() {\n    this.queue = new LinkedList();\n    this.offset = 0;\n  }\n\n  /**\n   * The number of bytes in list.\n   * @returns {number}\n   */\n  get length() {\n    return this.queue.length - this.offset;\n  }\n\n  /**\n   * Adds an additional buffer or BufferList to the internal list.\n   * @param {Buffer|Buffer[]|BufferList|BufferList[]} buf\n   */\n  append(buf) {\n    if (Buffer.isBuffer(buf)) {\n      if (this.offset > 0) {\n        const head = this.queue.shift();\n        this.queue.unshift(head.slice(this.offset));\n\n        this.offset = 0;\n      }\n\n      this.queue.push(buf);\n    } else if (Array.isArray(buf)) {\n      for (let i = 0; i < buf.length; i += 1) {\n        this.append(buf[i]);\n      }\n    } else if (buf instanceof BufferList) {\n      if (this.offset > 0) {\n        const head = this.queue.shift();\n        this.queue.unshift(head.slice(this.offset));\n\n        this.offset = 0;\n      }\n\n      if (buf.offset > 0) {\n        const head = buf.queue.shift();\n        buf.queue.unshift(head.slice(buf.offset));\n\n        buf.offset = 0;\n      }\n\n      let leaf = buf.queue.head;\n\n      while (leaf) {\n        this.queue.push(leaf.buffer);\n        leaf = leaf.next;\n      }\n    }\n  }\n\n  /* eslint-disable consistent-return */\n  /**\n   * Return the byte at the specified index.\n   * @param {number} index Index of the byte in the Buffer list.\n   * @returns {number}\n   */\n  get(index) {\n    let i = index;\n\n    while (i >= this.length) {\n      i -= this.length;\n    }\n\n    while (i < 0) {\n      i += this.length;\n    }\n\n    let leaf = this.queue.head;\n    let { offset } = this;\n\n    while (leaf) {\n      if (leaf.buffer.length - offset > i) {\n        return leaf.buffer[i + offset];\n      }\n\n      i -= leaf.buffer.length - offset;\n      offset = 0;\n      leaf = leaf.next;\n    }\n  }\n  /* eslint-enable consistent-return */\n\n  /**\n   * Returns a new Buffer object containing the bytes within the range specified.\n   * @param {number} start\n   * @param {number} end\n   * @returns {Buffer}\n   */\n  slice(start, end) {\n    /* eslint-disable no-param-reassign */\n    if (typeof start !== 'number') {\n      start = 0;\n    }\n\n    if (typeof end !== 'number') {\n      end = this.length;\n    }\n\n    while (start < 0) {\n      start += this.length;\n    }\n\n    while (end < 0) {\n      end += this.length;\n    }\n\n    end = Math.min(end, this.length);\n\n    if (start >= this.length || end === 0) {\n      return Buffer.alloc(0);\n    }\n\n    const tmpStart = start;\n    start = Math.min(tmpStart, end);\n    end = Math.max(tmpStart, end);\n\n    const subset = this.queue.slice(start + this.offset, end + this.offset);\n\n    // Buffer.concat() doesn't have optimization for count == 1\n    if (subset.count === 1) {\n      return subset.first;\n    }\n\n    let leaf = subset.head;\n    const target = Buffer.allocUnsafe(subset.length);\n    let offset = 0;\n\n    for (let i = 0; i < subset.count; i += 1) {\n      target.set(leaf.buffer, offset);\n      offset += leaf.buffer.length;\n      leaf = leaf.next;\n    }\n\n    return target;\n    /* eslint-enable no-param-reassign */\n  }\n\n  /**\n   * Return a string representation of the buffer.\n   * @param {string} encoding\n   * @param {number} start\n   * @param {number} end\n   * @returns {string}\n   */\n  toString(encoding, start, end) {\n    return this.slice(start, end).toString(encoding);\n  }\n\n  /**\n   * Shift bytes off the start of the list.\n   * @param {number} bytes\n   */\n  consume(bytes) {\n    let remainder = bytes;\n\n    while (this.length > 0) {\n      const firstLength = this.queue.first.length - this.offset;\n\n      if (remainder >= firstLength) {\n        this.queue.shift();\n\n        remainder -= firstLength;\n        this.offset = 0;\n      } else {\n        this.offset += remainder;\n        break;\n      }\n    }\n  }\n\n  /**\n   * Returns the first (least) index of an element\n   * within the list equal to the specified value,\n   * or -1 if none is found.\n   * @param {number} byte\n   * @param {number} [offset]\n   * @returns {number}\n   */\n  indexOf(byte, offset = 0) {\n    /* eslint-disable no-param-reassign */\n    if (!Number.isInteger(byte)) {\n      throw new TypeError('Invalid argument 1');\n    }\n\n    if (byte < 0 || byte > 0xff) {\n      throw new Error('Invalid argument 1');\n    }\n\n    if (!Number.isInteger(offset)) {\n      offset = 0;\n    }\n\n    while (offset >= this.length) {\n      offset -= this.length;\n    }\n\n    while (offset < 0) {\n      offset += this.length;\n    }\n\n    let leaf = this.queue.head;\n    let bias = 0;\n\n    const next = () => {\n      bias += leaf.buffer.length;\n      leaf = leaf.next;\n    };\n\n    while (leaf) {\n      let byteOffset = 0;\n\n      if (leaf === this.queue.head) {\n        byteOffset += this.offset;\n      }\n\n      // `offset` is point to next chunk\n      if (offset >= leaf.buffer.length - byteOffset) {\n        offset -= leaf.buffer.length - byteOffset;\n        next();\n        continue; // eslint-disable-line no-continue\n      }\n\n      // `offset` is point to current chunk\n      if (offset < leaf.buffer.length) {\n        byteOffset += offset;\n      }\n\n      const index = leaf.buffer.indexOf(byte, byteOffset);\n\n      if (index > -1) {\n        return index + bias - this.offset;\n      }\n\n      next();\n\n      if (byteOffset > this.offset) {\n        offset = 0;\n      }\n    }\n\n    return -1;\n    /* eslint-enable no-param-reassign */\n  }\n}\n\nconst fixedReadMethods = {\n  readDoubleBE: 8,\n  readDoubleLE: 8,\n  readFloatBE: 4,\n  readFloatLE: 4,\n  readInt32BE: 4,\n  readInt32LE: 4,\n  readUInt32BE: 4,\n  readUInt32LE: 4,\n  readInt16BE: 2,\n  readInt16LE: 2,\n  readUInt16BE: 2,\n  readUInt16LE: 2,\n  readInt8: 1,\n  readUInt8: 1,\n};\n\nObject.keys(fixedReadMethods).forEach(method => {\n  const gen = createFunction();\n\n  gen(`\n    function bufferlist_${method}(offset = 0) {\n      const start = offset + this.offset;\n      const head = this.queue.first;\n      const size = ${gen.formats.d(fixedReadMethods[method])};\n      const isFirtsChunkEnough = head.length - start >= size;\n\n      return isFirtsChunkEnough\n        ? head.${method}(start)\n        : this.slice(offset, offset + size).${method}(0)\n    }\n  `);\n\n  BufferList.prototype[method] = gen.toFunction();\n});\n\nconst metaReadMethods = ['readIntBE', 'readIntLE', 'readUIntBE', 'readUIntLE'];\n\nmetaReadMethods.forEach(method => {\n  const gen = createFunction();\n\n  gen(`\n    function bufferlist_${method}(size, offset = 0) {\n      const start = offset + this.offset;\n      const head = this.queue.first;\n      const isFirtsChunkEnough = head.length - start >= size;\n\n      return isFirtsChunkEnough\n        ? head.${method}(start, size)\n        : this.slice(offset, offset + size).${method}(0, size)\n    }\n  `);\n\n  BufferList.prototype[method] = gen.toFunction();\n});\n\nconst fixedWriteMethods = {\n  writeDoubleBE: 8,\n  writeDoubleLE: 8,\n  writeFloatBE: 4,\n  writeFloatLE: 4,\n  writeInt32BE: 4,\n  writeInt32LE: 4,\n  writeUInt32BE: 4,\n  writeUInt32LE: 4,\n  writeInt16BE: 2,\n  writeInt16LE: 2,\n  writeUInt16BE: 2,\n  writeUInt16LE: 2,\n  writeInt8: 1,\n  writeUInt8: 1,\n};\n\nObject.keys(fixedWriteMethods).forEach(method => {\n  const gen = createFunction();\n\n  gen(`\n    function bufferlist_${method}(value) {\n      const size = ${gen.formats.d(fixedWriteMethods[method])};\n      const buf = Buffer.allocUnsafe(size);\n      buf.${method}(value, 0);\n      this.append(buf);\n    }\n  `);\n\n  BufferList.prototype[method] = gen.toFunction();\n});\n\nconst metaWriteMethods = [\n  'writeIntBE',\n  'writeIntLE',\n  'writeUIntBE',\n  'writeUIntLE',\n];\n\nmetaWriteMethods.forEach(method => {\n  const gen = createFunction();\n\n  gen(`\n    function bufferlist_${method}(value, size) {\n      const buf = Buffer.allocUnsafe(size);\n      buf.${method}(value, 0, size);\n      this.append(buf);\n    }\n  `);\n\n  BufferList.prototype[method] = gen.toFunction();\n});\n\nmodule.exports = BufferList;\n","'use strict';\n\n/**\n * A Leaf in a linked list.\n */\nclass Chunk {\n  /**\n   * @class Chunk\n   */\n  constructor() {\n    /** @type {Chunk} */\n    this.next = null;\n    /** @type {Buffer} */\n    this.buffer = null;\n  }\n}\n\n/**\n * Linked list for buffers.\n */\nmodule.exports = class LinkedList {\n  /**\n   * @class LinkedList\n   */\n  constructor() {\n    /** @type {Chunk} */\n    this.head = null;\n    /** @type {Chunk} */\n    this.tail = null;\n\n    this.length = 0;\n    this.count = 0;\n  }\n\n  /**\n   * Add a buffer to the end of the list.\n   * @param {Buffer} buf\n   */\n  push(buf) {\n    const entry = new Chunk();\n    entry.buffer = buf;\n\n    if (this.length > 0) {\n      this.tail.next = entry;\n    } else {\n      this.head = entry;\n    }\n\n    this.tail = entry;\n    this.length += buf.length;\n    this.count += 1;\n  }\n\n  /**\n   * Add a buffer to the start of the list.\n   * @param {Buffer} buf\n   */\n  unshift(buf) {\n    const entry = new Chunk();\n    entry.buffer = buf;\n    entry.next = this.head;\n\n    if (this.isEmpty()) {\n      this.tail = entry;\n    }\n\n    this.head = entry;\n    this.length += buf.length;\n    this.count += 1;\n  }\n\n  /**\n   * Remove and return first element's buffer.\n   * @returns {Buffer|null}\n   */\n  shift() {\n    if (this.isEmpty()) {\n      return null;\n    }\n\n    const ret = this.head.buffer;\n\n    if (this.head === this.tail) {\n      this.head = null;\n      this.tail = null;\n    } else {\n      this.head = this.head.next;\n    }\n\n    this.length -= ret.length;\n    this.length = Math.max(this.length, 0);\n    this.count -= 1;\n\n    return ret;\n  }\n\n  /**\n   * Get buffer of first element or null.\n   * @returns {Buffer|null}\n   */\n  get first() {\n    if (this.isEmpty()) {\n      return null;\n    }\n\n    return this.head.buffer;\n  }\n\n  /**\n   * Get buffer of last element or null.\n   * @returns {Buffer|null}\n   */\n  get last() {\n    if (this.isEmpty()) {\n      return null;\n    }\n\n    return this.tail.buffer;\n  }\n\n  /**\n   * Check if a list is empty.\n   * @returns {bool}\n   */\n  isEmpty() {\n    return this.length === 0;\n  }\n\n  /**\n   * Remove all elements from a list.\n   */\n  clear() {\n    this.head = null;\n    this.tail = null;\n    this.length = 0;\n    this.count = 0;\n  }\n\n  /**\n   * Return a subset of linked list.\n   * @param {number} start Offset bytes from start.\n   * @param {number} end Bytes count.\n   * @returns {LinkedList}\n   */\n  slice(start, end) {\n    if (start < 0 || start >= this.length) {\n      return new LinkedList();\n    }\n\n    if (end < 0 || end > this.length || end < start) {\n      return new LinkedList();\n    }\n\n    const list = new LinkedList();\n\n    let leaf = this.head;\n    let offsetStart = start;\n    let offsetEnd = end;\n\n    // Find head of slice.\n    while (leaf) {\n      if (leaf.buffer.length > offsetStart) {\n        if (offsetStart === 0 && leaf.buffer.length <= offsetEnd) {\n          list.push(leaf.buffer);\n        } else if (leaf.buffer.length >= offsetEnd) {\n          list.push(leaf.buffer.slice(offsetStart, offsetEnd));\n        } else {\n          list.push(leaf.buffer.slice(offsetStart));\n        }\n\n        break;\n      }\n\n      offsetStart -= leaf.buffer.length;\n      offsetEnd -= leaf.buffer.length;\n      leaf = leaf.next;\n    }\n\n    // Find tail of slice\n    if (leaf.buffer.length < offsetEnd) {\n      while (leaf) {\n        if (leaf.buffer.length === offsetEnd) {\n          list.push(leaf.buffer);\n          break;\n        } else if (leaf.buffer.length > offsetEnd) {\n          list.push(leaf.buffer.slice(0, offsetEnd));\n          break;\n        } else if (offsetStart < 0 && leaf.buffer.length < offsetEnd) {\n          list.push(leaf.buffer);\n        }\n\n        offsetStart -= leaf.buffer.length;\n        offsetEnd -= leaf.buffer.length;\n        leaf = leaf.next;\n      }\n    }\n\n    return list;\n  }\n};\n","'use strict';\n\nconst symbols = require('internal/symbols');\n\n/**\n * Store extended info between encode/decode calls.\n */\nmodule.exports = class Metadata {\n  /**\n   * @class Metadata\n   */\n  constructor() {\n    // The number of bytes are processed.\n    this[symbols.bytes] = 0;\n\n    // Root node.\n    this.node = undefined;\n\n    // Current node.\n    this.current = undefined;\n  }\n\n  /**\n   * The number of bytes are processed.\n   * @returns {number}\n   */\n  get bytes() {\n    return this[symbols.bytes];\n  }\n\n  /**\n   * Clone provided metadata.\n   * @param {Metadata} metadata\n   * @returns {Metadata}\n   */\n  static clone(metadata) {\n    const meta = new Metadata();\n\n    if (metadata instanceof Metadata) {\n      meta.node = metadata.node;\n      meta.current = metadata.current;\n    }\n\n    return meta;\n  }\n\n  /**\n   * Remove internal references to processed nodes.\n   * @param {Metadata} metadata\n   */\n  static clean(metadata) {\n    if (metadata instanceof Metadata) {\n      metadata.node = undefined;\n      metadata.current = undefined;\n    }\n  }\n};\n","'use strict';\n\n// Helps to \"skip\" field in result.\nconst skip = Symbol('skip');\n\n// Private field `bytes` in Metadata.\nconst bytes = Symbol('bytes');\n\nmodule.exports = {\n  skip,\n  bytes,\n};\n","'use strict';\n\nconst { Transform } = require('stream');\nconst createFunction = require('generate-function');\nconst BufferList = require('internal/buffer-list');\nconst NotEnoughDataError = require('lib/not-enough-data-error');\n\nconst kbuffer = Symbol('buffer');\n\n/**\n * Binary data queue.\n * Also represent a part of BufferList API.\n */\nclass BinaryStream extends Transform {\n  /**\n   * @class Binary\n   * @param {Object} options\n   */\n  constructor(options = {}) {\n    super(options);\n\n    this[kbuffer] = new BufferList();\n  }\n\n  /**\n   * @returns {BufferList}\n   */\n  get buffer() {\n    return this[kbuffer];\n  }\n\n  /**\n   * @returns {number}\n   */\n  get length() {\n    return this.buffer.length;\n  }\n\n  /**\n   * @param {Buffer} buf\n   */\n  append(buf) {\n    this.buffer.append(buf);\n  }\n\n  /**\n   * @param {number} i\n   * @returns {number}\n   */\n  get(i) {\n    return this.buffer.get(i);\n  }\n\n  /**\n   * @param {number} [start]\n   * @param {number} [end]\n   * @returns {Buffer}\n   */\n  slice(start, end) {\n    return this.buffer.slice(start, end);\n  }\n\n  /**\n   * @param {number} bytes\n   */\n  consume(bytes) {\n    this.buffer.consume(bytes);\n  }\n\n  /**\n   * @param {string} encoding\n   * @param {number} [start]\n   * @param {number} [end]\n   * @returns {string}\n   */\n  toString(encoding, start, end) {\n    return this.buffer.toString(encoding, start, end);\n  }\n\n  /**\n   * Returns the first (least) index of an element\n   * within the list equal to the specified value,\n   * or -1 if none is found.\n   * @param {number} byte\n   * @param {number} [offset]\n   * @returns {number}\n   */\n  indexOf(byte, offset = 0) {\n    return this.buffer.indexOf(byte, offset);\n  }\n\n  /**\n   * Read provided amount of bytes from stream.\n   * @param {number} size\n   * @returns {Buffer}\n   */\n  readBuffer(size) {\n    assertSize(size, this.length);\n\n    const buf = this.slice(0, size);\n    this.consume(size);\n\n    return buf;\n  }\n\n  /**\n   * Write provided chunk to the stream.\n   * @param {Buffer} chunk\n   */\n  writeBuffer(chunk) {\n    this.append(chunk);\n  }\n}\n\nconst fixedReadMethods = {\n  readDoubleBE: 8,\n  readDoubleLE: 8,\n  readFloatBE: 4,\n  readFloatLE: 4,\n  readInt32BE: 4,\n  readInt32LE: 4,\n  readUInt32BE: 4,\n  readUInt32LE: 4,\n  readInt16BE: 2,\n  readInt16LE: 2,\n  readUInt16BE: 2,\n  readUInt16LE: 2,\n  readInt8: 1,\n  readUInt8: 1,\n};\n\nconst metaReadMethods = ['readIntBE', 'readIntLE', 'readUIntBE', 'readUIntLE'];\n\nObject.keys(fixedReadMethods).forEach(method => {\n  const gen = createFunction();\n\n  gen(`\n    function binary_${method}() {\n      const bytes = ${gen.formats.d(fixedReadMethods[method])};\n      assertSize(bytes, this.length);\n\n      const res = this.buffer.${method}(0);\n      this.consume(bytes);\n\n      return res;\n    }\n  `);\n\n  BinaryStream.prototype[method] = gen.toFunction({ assertSize });\n});\n\nmetaReadMethods.forEach(method => {\n  const gen = createFunction();\n\n  gen(`\n    function binary_${method}(size) {\n      assertSize(size, this.length);\n\n      const res = this.buffer.${method}(size, 0);\n      this.consume(size);\n      return res;\n    }\n  `);\n\n  BinaryStream.prototype[method] = gen.toFunction({ assertSize });\n});\n\nconst fixedWriteMethods = [\n  'writeDoubleBE',\n  'writeDoubleLE',\n  'writeFloatBE',\n  'writeFloatLE',\n  'writeInt32BE',\n  'writeInt32LE',\n  'writeUInt32BE',\n  'writeUInt32LE',\n  'writeInt16BE',\n  'writeInt16LE',\n  'writeUInt16BE',\n  'writeUInt16LE',\n  'writeInt8',\n  'writeUInt8',\n];\n\nfixedWriteMethods.forEach(method => {\n  const gen = createFunction();\n\n  gen(`\n    function binary_${method}(value) {\n      this.buffer.${method}(value);\n    }\n  `);\n\n  BinaryStream.prototype[method] = gen.toFunction();\n});\n\nconst metaWriteMethods = [\n  'writeIntBE',\n  'writeIntLE',\n  'writeUIntBE',\n  'writeUIntLE',\n];\n\nmetaWriteMethods.forEach(method => {\n  const gen = createFunction();\n\n  gen(`\n    function binary_${method}(value, size) {\n      this.buffer.${method}(value, size);\n    }\n  `);\n\n  BinaryStream.prototype[method] = gen.toFunction();\n});\n\n/**\n * Check if stream is able to read requested amound of data.\n * @param {number} size Requested data size to read.\n * @param {number} length The number of bytes in stream.\n */\nfunction assertSize(size, length) {\n  if (size > length) {\n    throw new NotEnoughDataError(size, length);\n  }\n}\n\nmodule.exports = BinaryStream;\n","'use strict';\n\nconst { isType, isUserType, isDecodeType } = require('lib/util');\nconst BinaryStream = require('lib/binary-stream');\nconst symbols = require('internal/symbols');\nconst Metadata = require('internal/meta');\n\nmodule.exports = {\n  decode,\n  decodeCommon,\n};\n\n/**\n * Decode any data from provided stream using schema.\n * @param {BinaryStream} rstream Read stream to decode.\n * @param {Object} typeOrSchema Builtin data type or schema.\n * @returns {*}\n */\nfunction decode(rstream, typeOrSchema) {\n  let decodeStream = rstream;\n\n  if (Buffer.isBuffer(rstream)) {\n    decodeStream = new BinaryStream();\n    decodeStream.append(rstream);\n  }\n\n  const meta = new Metadata();\n  const value = decodeCommon(decodeStream, typeOrSchema, meta);\n\n  decode.bytes = meta.bytes;\n  Metadata.clean(meta);\n\n  return value;\n}\n\n/**\n * @private\n * @param {BinaryStream|Buffer} rstream\n * @param {Object} typeOrSchema\n * @param {Metadata} meta\n * @returns {*}\n */\nfunction decodeCommon(rstream, typeOrSchema, meta) {\n  if (isType(typeOrSchema)) {\n    const value = typeOrSchema.decode.call(meta, rstream);\n    meta[symbols.bytes] += typeOrSchema.decode.bytes;\n    return value;\n  }\n\n  return decodeSchema(rstream, typeOrSchema, meta);\n}\n\n/**\n * @private\n * @param {BinaryStream} rstream\n * @param {Object} schema\n * @param {Metadata} meta\n * @returns {Object}\n */\nfunction decodeSchema(rstream, schema, meta) {\n  assertSchema(schema);\n\n  const node = Object.create(null);\n\n  if (meta.node === undefined) {\n    meta.node = node;\n    meta.current = node;\n  } else {\n    meta.current = node;\n  }\n\n  const keys = Object.keys(schema);\n\n  for (let i = 0; i < keys.length; i += 1) {\n    const key = keys[i];\n    const type = schema[key];\n\n    if (!isDecodeType(type)) {\n      node[key] = decodeSchema(rstream, type, meta);\n      meta.current = node;\n      continue; // eslint-disable-line no-continue\n    }\n\n    const value = type.decode.call(meta, rstream);\n    meta[symbols.bytes] += type.decode.bytes;\n\n    if (type[symbols.skip] === true) {\n      continue; // eslint-disable-line no-continue\n    }\n\n    node[key] = value;\n  }\n\n  return node;\n}\n\n/**\n * Check if argument is schema.\n * @param {Object} schema\n * @private\n */\nfunction assertSchema(schema) {\n  if (!isUserType(schema)) {\n    throw new TypeError('Argument #2 should be a plain object.');\n  }\n}\n","'use strict';\n\nconst { isUserType, isEncodeType, isType } = require('lib/util');\nconst symbols = require('internal/symbols');\nconst Metadata = require('internal/meta');\nconst BinaryStream = require('lib/binary-stream');\n\nmodule.exports = {\n  encode,\n  encodeCommon,\n};\n\n/**\n * @param {any} obj\n * @param {any} type\n * @param {BinaryStream} [target]\n * @returns {BinaryStream}\n */\nfunction encode(obj, type, target) {\n  const meta = new Metadata();\n\n  // Check for legacy interface.\n  if (type instanceof BinaryStream) {\n    const tmp = target;\n    target = type; // eslint-disable-line no-param-reassign\n    type = tmp; // eslint-disable-line no-param-reassign\n  }\n\n  if (!(target instanceof BinaryStream)) {\n    target = new BinaryStream(); // eslint-disable-line no-param-reassign\n  }\n\n  encodeCommon(obj, target, type, meta);\n\n  encode.bytes = meta.bytes;\n  Metadata.clean(meta);\n\n  return target;\n}\n\n/**\n * @param {any} object\n * @param {EncodeStream} wstream\n * @param {any} typeOrSchema\n * @param {Metadata} context\n */\nfunction encodeCommon(object, wstream, typeOrSchema, context) {\n  if (isType(typeOrSchema)) {\n    typeOrSchema.encode.call(context, object, wstream);\n    context[symbols.bytes] += typeOrSchema.encode.bytes;\n  } else {\n    encodeSchema(object, wstream, typeOrSchema, context);\n  }\n}\n\n/**\n * @param {any} object\n * @param {EncodeStream} wstream\n * @param {any} schema\n * @param {Metadata} context\n */\nfunction encodeSchema(object, wstream, schema, context) {\n  assertSchema(schema);\n\n  if (context.node === undefined) {\n    context.node = object;\n    context.current = object;\n  } else {\n    context.current = object;\n  }\n\n  const keys = Object.keys(schema);\n\n  for (let i = 0; i < keys.length; i += 1) {\n    const key = keys[i];\n    const type = schema[key];\n    const value = object[key];\n\n    if (!isEncodeType(type)) {\n      encodeSchema(value, wstream, type, context);\n      context.current = object;\n\n      continue; // eslint-disable-line no-continue\n    }\n\n    type.encode.call(context, value, wstream);\n    context[symbols.bytes] += type.encode.bytes;\n  }\n}\n\n/**\n * Check if argument is schema.\n * @param {Object} schema\n * @private\n */\nfunction assertSchema(schema) {\n  if (!isUserType(schema)) {\n    throw new TypeError('Argument `schema` should be a plain object.');\n  }\n}\n","'use strict';\n\nconst { isUserType, isType } = require('lib/util');\nconst Metadata = require('internal/meta');\nconst symbols = require('internal/symbols');\n\nmodule.exports = {\n  encodingLength,\n  encodingLengthCommon,\n};\n\n/**\n * Get the number of bytes to encode `obj` using `schema`.\n * @param {*} obj Any valid js object.\n * @param {Object} schema\n * @returns {number}\n */\nfunction encodingLength(obj, schema) {\n  const context = new Metadata();\n\n  encodingLengthCommon(obj, schema, context);\n  Metadata.clean(context);\n\n  return context.bytes;\n}\n\n/**\n * @param {any} item\n * @param {Object} typeOrSchema\n * @param {Metadata} context\n */\nfunction encodingLengthCommon(item, typeOrSchema, context) {\n  if (isType(typeOrSchema)) {\n    context[symbols.bytes] += typeOrSchema.encodingLength.call(context, item);\n  } else {\n    encodingLengthSchema(item, typeOrSchema, context);\n  }\n}\n\n/**\n * @param {any} item\n * @param {Object} schema\n * @param {Metadata} context\n */\nfunction encodingLengthSchema(item, schema, context) {\n  if (!isUserType(schema)) {\n    throw new TypeError('Argument `schema` should be a plain object.');\n  }\n\n  if (context.node === undefined) {\n    context.node = item;\n    context.current = item;\n  } else {\n    context.current = item;\n  }\n\n  const keys = Object.keys(schema);\n\n  for (let i = 0; i < keys.length; i += 1) {\n    const key = keys[i];\n    const type = schema[key];\n    const value = item[key];\n\n    if (!isType(type)) {\n      encodingLengthSchema(value, type, context);\n      context.current = item;\n      continue; // eslint-disable-line no-continue\n    }\n\n    context[symbols.bytes] += type.encodingLength.call(context, value);\n  }\n}\n","'use strict';\n\n/**\n * Represent an unexpected end of decode stream.\n */\nmodule.exports = class NotEnoughDataError extends Error {\n  /**\n   * @class NotEnoughDataError\n   * @param {number} expected The number of expected bytes.\n   * @param {number} received The number of received bytes.\n   */\n  constructor(expected, received) {\n    const message = `requested ${expected} bytes but only ${received} available`;\n\n    super(message);\n    this.name = 'NotEnoughDataError';\n  }\n};\n","'use strict';\n\nconst createFunction = require('generate-function');\nconst NotEnoughDataError = require('lib/not-enough-data-error');\n\n/**\n * Helps to read the whole data chunk.\n */\nclass Transaction {\n  /**\n   * @class Transaction\n   * @param {DecodeStream} stream\n   */\n  constructor(stream) {\n    this.stream = stream;\n    this.index = 0;\n  }\n\n  /**\n   * @param {Buffer} buf\n   */\n  append(buf) {\n    this.stream.append(buf);\n  }\n\n  /**\n   * Confirm reading and removes data from stream.\n   */\n  commit() {\n    this.stream.consume(this.index);\n  }\n\n  /**\n   * Get byte from stream by index.\n   * @param {number} i\n   * @returns {number}\n   */\n  get(i = 0) {\n    return this.stream.get(this.index + i);\n  }\n\n  /**\n   * Get the number of bytes in stream.\n   * @returns {number}\n   */\n  get length() {\n    return this.stream.length;\n  }\n\n  /**\n   * @param {number} [start]\n   * @param {number} [end]\n   * @returns {Buffer}\n   */\n  slice(start, end) {\n    return this.stream.slice(start, end);\n  }\n\n  /**\n   * @param {string} encoding\n   * @param {number} [start]\n   * @param {number} [end]\n   * @returns {string}\n   */\n  toString(encoding, start, end) {\n    return this.stream.toString(encoding, start, end);\n  }\n\n  /**\n   * Read provided amount of bytes from stream.\n   * @param {number} size\n   * @returns {Buffer}\n   */\n  readBuffer(size) {\n    assertSize(this.index + size, this.length);\n\n    const buf = this.stream.slice(this.index, this.index + size);\n    this.index += size;\n\n    return buf;\n  }\n\n  /**\n   * @param {number} byte\n   * @param {number} [offset]\n   * @returns {number}\n   */\n  indexOf(byte, offset = 0) {\n    return this.stream.indexOf(byte, this.index + offset) - this.index;\n  }\n}\n\nconst methods = {\n  readDoubleBE: 8,\n  readDoubleLE: 8,\n  readFloatBE: 4,\n  readFloatLE: 4,\n  readInt32BE: 4,\n  readInt32LE: 4,\n  readUInt32BE: 4,\n  readUInt32LE: 4,\n  readInt16BE: 2,\n  readInt16LE: 2,\n  readUInt16BE: 2,\n  readUInt16LE: 2,\n  readInt8: 1,\n  readUInt8: 1,\n};\n\nObject.keys(methods).forEach(method => {\n  const gen = createFunction();\n  const bytes = methods[method];\n\n  gen(`\n    function transaction_${method}() {\n      assertSize(this.index + ${gen.formats.d(bytes)}, this.length);\n      const value = this.stream.buffer.${method}(this.index);\n      this.index += ${gen.formats.d(bytes)};\n      return value;\n    }\n  `);\n\n  Transaction.prototype[method] = gen.toFunction({ assertSize });\n});\n\n['readIntBE', 'readIntLE', 'readUIntBE', 'readUIntLE'].forEach(method => {\n  const gen = createFunction();\n\n  gen(`\n    function transaction_${method}(bytes) {\n      assertSize(this.index + bytes, this.length);\n      const value = this.stream.buffer.${method}(bytes, this.index);\n      this.index += bytes;\n      return value;\n    }\n  `);\n\n  Transaction.prototype[method] = gen.toFunction({ assertSize });\n});\n\nmodule.exports = Transaction;\n\n/**\n * Check if stream is able to read requested amound of data.\n * @param {number} size Requested data size to read.\n * @param {number} length The number of bytes in stream.\n */\nfunction assertSize(size, length) {\n  if (size > length) {\n    throw new NotEnoughDataError(size, length);\n  }\n}\n","'use strict';\n\nconst isPlainObject = require('is-plain-object');\n\nmodule.exports = {\n  isType,\n  isUserType: isPlainObject,\n  isFunction,\n  isDecodeType,\n  isEncodeType,\n};\n\n/**\n * Check if argument is data type.\n * @param {*} type\n * @returns {bool}\n */\nfunction isType(type) {\n  return isObject(type) && isFunction(type.encode) && isFunction(type.decode);\n}\n\n/**\n * Check if argument is function.\n * @param {*} value\n * @returns {bool}\n */\nfunction isFunction(value) {\n  return typeof value === 'function';\n}\n\n/**\n * Check if argument is object.\n * @param {*} value\n * @returns {bool}\n */\nfunction isObject(value) {\n  return typeof value === 'object' && value !== null;\n}\n\n/**\n * Check if argument is data type and able to decode data.\n * @param {*} type\n * @returns {bool}\n */\nfunction isDecodeType(type) {\n  return isObject(type) && isFunction(type.decode);\n}\n\n/**\n * Check if argument is data type and able to encode data.\n * @param {*} type\n * @returns {bool}\n */\nfunction isEncodeType(type) {\n  return isObject(type) && isFunction(type.encode);\n}\n","'use strict';\n\nconst { decodeCommon } = require('lib/decode');\nconst { encodeCommon } = require('lib/encode');\nconst { encodingLengthCommon } = require('lib/encoding-length');\nconst { isType, isUserType, isFunction } = require('lib/util');\nconst Metadata = require('internal/meta');\n\nmodule.exports = array;\n\n/**\n * Array type.\n * @param {Object} type Any builtin type or schema.\n * @param {Object|number} length Number type or number.\n * @param {string} lengthType Method of calculate the length of array.\n * @returns {Object}\n */\nfunction array(type, length, lengthType = 'count') {\n  if (!isType(type) && !isUserType(type)) {\n    throw new TypeError('Argument #1 should be a valid type.');\n  }\n\n  const isLengthInBytes = lengthType === 'bytes';\n  const isnum = typeof length === 'number';\n  const istype = isType(length);\n  const isfunc = isFunction(length);\n\n  if (!isnum && !istype && !isfunc) {\n    throw new TypeError('Unknown type of argument #1.');\n  }\n\n  return {\n    encode,\n    decode,\n    encodingLength,\n  };\n\n  /**\n   * Encode array's items.\n   * @param {any[]} items Array of items to encode.\n   * @param {EncodeStream} wstream\n   */\n  function encode(items, wstream) {\n    checkArray(items);\n\n    // eslint-disable-next-line no-invalid-this\n    const context = Metadata.clone(this);\n\n    encode.bytes = 0;\n    let expectedSize = 0;\n\n    if (istype) {\n      expectedSize = items.length;\n    } else if (isnum) {\n      expectedSize = length;\n    } else if (isfunc) {\n      expectedSize = length(context);\n\n      checkArraySizeType(expectedSize);\n    }\n\n    if (!isLengthInBytes) {\n      checkArraySize(expectedSize, items.length);\n    }\n\n    if (isLengthInBytes) {\n      const lengthContext = Metadata.clone(context);\n\n      for (const item of items) {\n        encodingLengthCommon(item, type, lengthContext);\n      }\n\n      if (istype) {\n        expectedSize = lengthContext.bytes;\n      }\n\n      checkArraySize(lengthContext.bytes, expectedSize);\n      Metadata.clean(lengthContext);\n    }\n\n    if (istype) {\n      length.encode.call(context, expectedSize, wstream);\n      encode.bytes += length.encode.bytes;\n    }\n\n    items.forEach(item => {\n      encodeCommon(item, wstream, type, context);\n    });\n\n    encode.bytes += context.bytes;\n    Metadata.clean(context);\n  }\n\n  /**\n   * Decode array from stream.\n   * @param {DecodeStream} rstream\n   * @returns {any[]}\n   */\n  function decode(rstream) {\n    let expectedSize = 0;\n    decode.bytes = 0;\n\n    // eslint-disable-next-line no-invalid-this\n    const context = Metadata.clone(this);\n\n    if (isnum) {\n      expectedSize = length;\n    } else if (istype) {\n      expectedSize = length.decode.call(context, rstream);\n      decode.bytes += length.decode.bytes;\n    } else if (isfunc) {\n      expectedSize = length(context);\n    }\n\n    checkArraySizeType(expectedSize);\n\n    let values;\n\n    if (isLengthInBytes) {\n      values = decodeBytes(type, expectedSize, rstream, context);\n    } else {\n      values = decodeCount(type, expectedSize, rstream, context);\n    }\n\n    decode.bytes += context.bytes;\n    Metadata.clean(context);\n    return values;\n  }\n\n  /**\n   * Returns the number of bytes of an encoded items.\n   * @param {any[]} items\n   * @returns {number}\n   */\n  function encodingLength(items) {\n    checkArray(items);\n\n    // eslint-disable-next-line no-invalid-this\n    const context = Metadata.clone(this);\n\n    let size = 0;\n\n    if (isnum && isLengthInBytes) {\n      return length;\n    }\n\n    if (istype && !isLengthInBytes) {\n      size = length.encodingLength(items.length);\n    }\n\n    for (const item of items) {\n      encodingLengthCommon(item, type, context);\n    }\n\n    Metadata.clean(context);\n    size += context.bytes;\n\n    if (istype && isLengthInBytes) {\n      size += length.encodingLength(size);\n    }\n\n    return size;\n  }\n}\n\n/**\n * Check if argument is an Array.\n * @param {*} items\n * @private\n */\nfunction checkArray(items) {\n  if (!Array.isArray(items)) {\n    throw new TypeError('Argument #1 should be an Array.');\n  }\n}\n\n/**\n * Check if argument is a number.\n * @param {*} length\n * @private\n */\nfunction checkArraySizeType(length) {\n  if (typeof length !== 'number') {\n    throw new TypeError('Length of an array should be a number.');\n  }\n}\n\n/**\n * Check the number of items in an Array.\n * @param {number} requiredSize\n * @param {number} havingSize\n * @private\n */\nfunction checkArraySize(requiredSize, havingSize) {\n  if (requiredSize !== havingSize) {\n    throw new Error(\n      `Argument #1 required length ${requiredSize} instead of ${havingSize}`\n    );\n  }\n}\n\n/**\n * Decode items of an array when length is the number of bytes.\n * @param {Object} type Type of each array's item - user schema builtin type.\n * @param {number} lengthBytes\n * @param {DecodeStream} rstream\n * @param {Metadata} context\n * @returns {any[]}\n * @private\n */\nfunction decodeBytes(type, lengthBytes, rstream, context) {\n  const items = [];\n  const before = context.bytes;\n  let bytes = 0;\n\n  while (bytes < lengthBytes) {\n    items.push(decodeCommon(rstream, type, context));\n    bytes = context.bytes - before;\n  }\n\n  if (bytes > lengthBytes) {\n    throw new Error('Incorrect length of an array.');\n  }\n\n  return items;\n}\n\n/**\n * Decode items of an array when length is the number of items.\n * @param {Object} type Type of each array's item - user schema builtin type.\n * @param {number} length\n * @param {DecodeStream} rstream\n * @param {Metadata} context\n * @returns {any[]}\n * @private\n */\nfunction decodeCount(type, length, rstream, context) {\n  const items = new Array(length);\n\n  for (let i = 0; i < length; i += 1) {\n    items[i] = decodeCommon(rstream, type, context);\n  }\n\n  return items;\n}\n","'use strict';\n\nconst { isType } = require('lib/util');\n\nmodule.exports = bool;\n\n/**\n * Boolean type.\n * @param {Object} type Any builtin type or schema.\n * @returns {Object}\n */\nfunction bool(type) {\n  if (!isType(type)) {\n    throw new TypeError('Argument #1 should be valid type.');\n  }\n\n  /**\n   * Decode element as boolean.\n   * @param {DecodeStream} rstream\n   * @returns {bool}\n   */\n  function decode(rstream) {\n    // eslint-disable-next-line no-invalid-this\n    const context = this;\n\n    const value = type.decode.call(context, rstream);\n    decode.bytes = type.decode.bytes;\n\n    return Boolean(value);\n  }\n\n  /**\n   * Encode boolean item.\n   * @param {bool} value\n   * @param {EncodeStream} wstream\n   */\n  function encode(value, wstream) {\n    // eslint-disable-next-line no-invalid-this\n    const context = this;\n\n    type.encode.call(context, value ? 1 : 0, wstream);\n    encode.bytes = type.encode.bytes;\n  }\n\n  return {\n    encode,\n    decode,\n    encodingLength: type.encodingLength,\n  };\n}\n","'use strict';\n\nconst { isType, isFunction } = require('lib/util');\nconst NotEnoughDataError = require('lib/not-enough-data-error');\nconst BinaryStream = require('lib/binary-stream');\n\nmodule.exports = buffer;\n\n/**\n * Buffer type.\n * @param {number|Object} length The number of bytes or type for size-prefixed buffers.\n * @returns {Object}\n */\nfunction buffer(length) {\n  const isnum = typeof length === 'number';\n  const istype = isType(length);\n  const isfunc = isFunction(length);\n  const isNull = length === null;\n\n  if (!isnum && !istype && !isfunc && !isNull) {\n    throw new TypeError('Unknown type of argument #1.');\n  }\n\n  return {\n    encode,\n    decode,\n    encodingLength,\n  };\n\n  /**\n   * Encode buffer.\n   * @param {Buffer} buf\n   * @param {EncodeStream} wstream\n   */\n  function encode(buf, wstream) {\n    checkBuffer(buf);\n    encode.bytes = 0;\n\n    // eslint-disable-next-line no-invalid-this\n    const context = this;\n\n    if (isnum) {\n      checkLength(length, buf.length);\n    }\n\n    if (istype) {\n      length.encode.call(context, buf.length, wstream);\n      encode.bytes += length.encode.bytes;\n    }\n\n    if (isfunc) {\n      const expectedLength = length(context);\n\n      checkLengthType(expectedLength);\n      checkLength(expectedLength, buf.length);\n    }\n\n    wstream.writeBuffer(Buffer.isBuffer(buf) ? buf : buf.buffer);\n    encode.bytes += buf.length;\n\n    if (isNull) {\n      wstream.writeUInt8(0);\n      encode.bytes += 1;\n    }\n  }\n\n  /**\n   * Read the buffer from the stream.\n   * @param {DecodeStream} rstream\n   * @returns {Buffer}\n   */\n  function decode(rstream) {\n    let size = 0;\n    decode.bytes = 0;\n\n    // eslint-disable-next-line no-invalid-this\n    const context = this;\n\n    if (isnum) {\n      size = length;\n    } else if (istype) {\n      size = length.decode.call(context, rstream);\n      decode.bytes += length.decode.bytes;\n      checkLengthType(size);\n    } else if (isfunc) {\n      size = length(context);\n\n      checkLengthType(size);\n    } else if (isNull) {\n      size = rstream.indexOf(0);\n\n      if (size === -1) {\n        throw new NotEnoughDataError(rstream.length + 1, rstream.length);\n      }\n    }\n\n    const buf = rstream.readBuffer(size);\n    decode.bytes += size;\n\n    if (isNull) {\n      decode.bytes += 1;\n      rstream.consume(1);\n    }\n\n    return buf;\n  }\n\n  /**\n   * Get the number bytes of an encoded buffer.\n   * @param {Buffer} buf\n   * @returns {number}\n   */\n  function encodingLength(buf) {\n    checkBuffer(buf);\n    let size = 0;\n\n    if (isnum) {\n      return length;\n    }\n\n    if (isNull) {\n      size = 1;\n    } else if (istype) {\n      size = length.encodingLength(buf.length);\n    }\n\n    return size + buf.length;\n  }\n}\n\n/**\n * Check if item is a Buffer.\n * @param {any} buf\n * @private\n */\nfunction checkBuffer(buf) {\n  if (!Buffer.isBuffer(buf) && !(buf instanceof BinaryStream)) {\n    throw new TypeError('Argument 1 should be a Buffer or a BinaryStream.');\n  }\n}\n\n/**\n * Check the length of a Buffer to encode.\n * @param {number} requiredSize\n * @param {number} havingSize\n */\nfunction checkLength(requiredSize, havingSize) {\n  if (requiredSize !== havingSize) {\n    throw new Error(\n      `Buffer required length ${requiredSize} instead of ${havingSize}`\n    );\n  }\n}\n\n/**\n * Check if the length type is a number.\n * @param {any} length\n */\nfunction checkLengthType(length) {\n  if (typeof length !== 'number') {\n    throw new TypeError('Length of a buffer should be a number.');\n  }\n}\n","'use strict';\n\nconst createFunction = require('generate-function');\n\nmodule.exports = {\n  doublebe: createFastStub(8, 'writeDoubleBE', 'readDoubleBE'),\n  doublele: createFastStub(8, 'writeDoubleLE', 'readDoubleLE'),\n  floatbe: createFastStub(4, 'writeFloatBE', 'readFloatBE'),\n  floatle: createFastStub(4, 'writeFloatLE', 'readFloatLE'),\n  int8: createFastStub(1, 'writeInt8', 'readInt8'),\n  uint8: createFastStub(1, 'writeUInt8', 'readUInt8'),\n  int16be: createFastStub(2, 'writeInt16BE', 'readInt16BE'),\n  uint16be: createFastStub(2, 'writeUInt16BE', 'readUInt16BE'),\n  int16le: createFastStub(2, 'writeInt16LE', 'readInt16LE'),\n  uint16le: createFastStub(2, 'writeUInt16LE', 'readUInt16LE'),\n  int32be: createFastStub(4, 'writeInt32BE', 'readInt32BE'),\n  uint32be: createFastStub(4, 'writeUInt32BE', 'readUInt32BE'),\n  int32le: createFastStub(4, 'writeInt32LE', 'readInt32LE'),\n  uint32le: createFastStub(4, 'writeUInt32LE', 'readUInt32LE'),\n  int24be: createFastStubGeneric(3, 'writeIntBE', 'readIntBE'),\n  uint24be: createFastStubGeneric(3, 'writeUIntBE', 'readUIntBE'),\n  int24le: createFastStubGeneric(3, 'writeIntLE', 'readIntLE'),\n  uint24le: createFastStubGeneric(3, 'writeUIntLE', 'readUIntLE'),\n  int40be: createFastStubGeneric(5, 'writeIntBE', 'readIntBE'),\n  uint40be: createFastStubGeneric(5, 'writeUIntBE', 'readUIntBE'),\n  int40le: createFastStubGeneric(5, 'writeIntLE', 'readIntLE'),\n  uint40le: createFastStubGeneric(5, 'writeUIntLE', 'readUIntLE'),\n  int48be: createFastStubGeneric(6, 'writeIntBE', 'readIntBE'),\n  uint48be: createFastStubGeneric(6, 'writeUIntBE', 'readUIntBE'),\n  int48le: createFastStubGeneric(6, 'writeIntLE', 'readIntLE'),\n  uint48le: createFastStubGeneric(6, 'writeUIntLE', 'readUIntLE'),\n};\n\n/**\n * Generate number type for provided the number of bytes.\n * @param {number} size\n * @param {string} write\n * @param {string} read\n * @returns {Object}\n * @private\n */\nfunction createFastStub(size, write, read) {\n  const genread = createFunction();\n  const genwrite = createFunction();\n\n  genread(`\n    function decode_${read}(rstream) {\n      decode_${read}.bytes = ${genread.formats.d(size)};\n      return rstream.${read}()\n    }\n  `);\n\n  genwrite(`\n    function encode_${write}(value, wstream) {\n      wstream.${write}(value);\n      encode_${write}.bytes = ${genread.formats.d(size)};\n    }\n  `);\n\n  return {\n    encodingLength: () => size,\n    encode: genwrite.toFunction(),\n    decode: genread.toFunction(),\n  };\n}\n\n/**\n * Generate number type for provided the number of bytes.\n * @param {number} size\n * @param {string} write\n * @param {string} read\n * @returns {Object}\n * @private\n */\nfunction createFastStubGeneric(size, write, read) {\n  const genread = createFunction();\n  const genwrite = createFunction();\n\n  genread(`\n    function decode_${read}(rstream) {\n      decode_${read}.bytes = ${genread.formats.d(size)};\n      return rstream.${read}(${genread.formats.d(size)})\n    }\n  `);\n\n  genwrite(`\n    function encode_${write}(value, wstream) {\n      wstream.${write}(value, ${genread.formats.d(size)});\n      encode_${write}.bytes = ${genread.formats.d(size)};\n    }\n  `);\n\n  return {\n    encodingLength: () => size,\n    encode: genwrite.toFunction(),\n    decode: genread.toFunction(),\n  };\n}\n","'use strict';\n\nconst { decodeCommon } = require('lib/decode');\nconst { encodeCommon } = require('lib/encode');\nconst { encodingLengthCommon } = require('lib/encoding-length');\nconst { isType, isFunction } = require('lib/util');\nconst symbols = require('internal/symbols');\nconst Metadata = require('internal/meta');\n\nmodule.exports = reserved;\n\n/**\n * Type for reserved data.\n * @param {Object} type Any builtin type or schema.\n * @param {number} size The number of reserved items.\n * @returns {Object}\n */\nfunction reserved(type, size = 1) {\n  if (!isType(type)) {\n    throw new TypeError('Invalid data type.');\n  }\n\n  if (!Number.isInteger(size) && !isFunction(size)) {\n    throw new TypeError('Argument #2 should be a valid integer or function.');\n  }\n\n  return {\n    [symbols.skip]: true,\n    encodingLength,\n    decode,\n    encode,\n  };\n\n  /**\n   * Get the number of bytes to encode value.\n   * @param {any} value\n   * @returns {number}\n   */\n  function encodingLength(value) {\n    // eslint-disable-next-line no-invalid-this\n    const context = Metadata.clone(this);\n\n    const count = isFunction(size) ? size(context) : size;\n\n    encodingLengthCommon(value, type, context);\n    Metadata.clean(context);\n\n    return context.bytes * count;\n  }\n\n  /**\n   * Silently decode items.\n   * @param {DecodeStream} rstream\n   */\n  function decode(rstream) {\n    // eslint-disable-next-line no-invalid-this\n    const context = Metadata.clone(this);\n    decode.bytes = 0;\n\n    const count = isFunction(size) ? size(context) : size;\n\n    if (count === 0) {\n      Metadata.clean(context);\n      return;\n    }\n\n    for (let i = count; i > 0; i -= 1) {\n      decodeCommon(rstream, type, context);\n    }\n\n    decode.bytes = context.bytes;\n    Metadata.clean(context);\n  }\n\n  /**\n   * Encode reserved data.\n   * Fill with zeros the number of required bytes.\n   * @param {any} value\n   * @param {EncodeStream} wstream\n   */\n  function encode(value, wstream) {\n    encode.bytes = 0;\n\n    // eslint-disable-next-line no-invalid-this\n    const context = Metadata.clone(this);\n\n    const count = isFunction(size) ? size(context) : size;\n\n    if (count === 0) {\n      Metadata.clean(context);\n      return;\n    }\n\n    for (let i = count; i > 0; i -= 1) {\n      encodeCommon(0, wstream, type, context);\n    }\n\n    encode.bytes = context.bytes;\n    Metadata.clean(context);\n  }\n}\n","'use strict';\n\nconst symbols = require('internal/symbols');\nconst { decodeCommon } = require('lib/decode');\nconst Metadata = require('internal/meta');\n\nmodule.exports = select;\n\n/**\n * Type for multiple conditions.\n * Works almost like `switch` operator.\n * @param {...any} whenTypes The `when` type.\n * @returns {Object}\n */\nfunction select(...whenTypes) {\n  if (whenTypes.length === 0) {\n    throw new TypeError('You should set at least one condition type.');\n  }\n\n  const result = {\n    decode,\n    encode: () => {},\n    [symbols.skip]: true,\n  };\n\n  return result;\n\n  /* eslint-disable consistent-return */\n  /**\n   * Decode data using a first success contifion.\n   * @param {DecodeStream} rstream\n   * @returns {any}\n   */\n  function decode(rstream) {\n    decode.bytes = 0;\n    const context = Metadata.clone(this); // eslint-disable-line no-invalid-this\n\n    for (const when of whenTypes) {\n      // eslint-disable-next-line no-invalid-this\n      const probalyValue = decodeCommon(rstream, when, context);\n\n      if (when[symbols.skip] === true) {\n        continue; // eslint-disable-line no-continue\n      }\n\n      decode.bytes = context.bytes;\n      Metadata.clean(context);\n\n      result[symbols.skip] = false;\n      return probalyValue;\n    }\n\n    result[symbols.skip] = true;\n  }\n  /* eslint-enable consistent-return */\n}\n","'use strict';\n\nconst { isType } = require('lib/util');\nconst NotEnoughDataError = require('lib/not-enough-data-error');\n\nmodule.exports = string;\n\n/**\n * Type for strings.\n * @param {Object|number|null} length The number of bytes or type for size-prefixed strings.\n * @param {string} encoding\n * @returns {Object}\n */\nfunction string(length, encoding = 'ascii') {\n  if (!Buffer.isEncoding(encoding)) {\n    throw new Error('Argument #2 should be an encoding name.');\n  }\n\n  if (typeof length === 'number') {\n    return {\n      encode: encodeFixedString(length, encoding),\n      decode: decodeFixedString(length, encoding),\n      encodingLength: () => length,\n    };\n  }\n\n  if (isType(length)) {\n    return {\n      encode: encodeSizePrefixedString(length, encoding),\n      decode: decodeSizePrefixedString(length, encoding),\n      encodingLength: encodingLengthSizePrefixedString(length, encoding),\n    };\n  }\n\n  if (length === null) {\n    return {\n      encode: encodeNullString(encoding),\n      decode: decodeNullString(encoding),\n\n      /**\n       * Get the number bytes to encode provided string.\n       * @param {string} value\n       * @returns {number}\n       */\n      encodingLength(value) {\n        return Buffer.byteLength(value, encoding) + 1;\n      },\n    };\n  }\n\n  if (typeof length === 'function') {\n    return {\n      encode: encodeCallback(length, encoding),\n      decode: decodeCallback(length, encoding),\n\n      /**\n       * Get the number bytes to encode provided string.\n       * @param {string} value\n       * @returns {number}\n       */\n      encodingLength(value) {\n        return Buffer.byteLength(value, encoding);\n      },\n    };\n  }\n\n  throw new TypeError('Unknown type of argument #1.');\n}\n\n/**\n * Encode null-terminated string.\n * @param {string} encoding\n * @returns {Function}\n */\nfunction encodeNullString(encoding) {\n  return function encode(value, wstream) {\n    const buf = Buffer.from(value.toString(), encoding);\n\n    wstream.writeBuffer(buf);\n    wstream.writeInt8(0);\n\n    encode.bytes = buf.length + 1;\n  };\n}\n\n/**\n * Decode null-terminated string.\n * @param {string} encoding\n * @returns {Function}\n */\nfunction decodeNullString(encoding) {\n  return function decode(rstream) {\n    const bytes = rstream.indexOf(0);\n\n    if (bytes === -1) {\n      throw new NotEnoughDataError(rstream.length + 1, rstream.length);\n    }\n\n    const bytesWithNull = bytes + 1;\n    const buf = rstream.readBuffer(bytesWithNull);\n    decode.bytes = bytesWithNull;\n\n    return buf.toString(encoding, 0, bytes);\n  };\n}\n\n/**\n * Encode fixed-length string.\n * @param {number} size The length of the string.\n * @param {string} encoding\n * @returns {Function}\n */\nfunction encodeFixedString(size, encoding) {\n  return function encode(value, wstream) {\n    value = value.toString(); // eslint-disable-line no-param-reassign\n\n    if (Buffer.byteLength(value, encoding) !== size) {\n      throw new Error(`Size of string should be ${size} in bytes.`);\n    }\n\n    const buf = Buffer.from(value, encoding);\n\n    wstream.writeBuffer(buf);\n    encode.bytes = buf.length;\n  };\n}\n\n/**\n * Decode fixed-length string.\n * @param {number} size The length of the string.\n * @param {string} encoding\n * @returns {Function}\n */\nfunction decodeFixedString(size, encoding) {\n  return function decode(rstream) {\n    const buf = rstream.readBuffer(size);\n    decode.bytes = size;\n\n    return buf.toString(encoding);\n  };\n}\n\n/**\n * Encode size-prefixed string.\n * @param {Object} type Number type.\n * @param {string} encoding\n * @returns {number}\n */\nfunction encodeSizePrefixedString(type, encoding) {\n  return function encode(value, wstream) {\n    value = value.toString(); // eslint-disable-line no-param-reassign\n\n    const context = this;\n\n    type.encode.call(context, Buffer.byteLength(value, encoding), wstream);\n    encode.bytes = type.encode.bytes;\n\n    const buf = Buffer.from(value, encoding);\n\n    wstream.writeBuffer(buf);\n    encode.bytes += buf.length;\n  };\n}\n\n/**\n * Decode size-prefixed string.\n * @param {Object} type Number type.\n * @param {string} encoding\n * @returns {number}\n */\nfunction decodeSizePrefixedString(type, encoding) {\n  return function decode(rstream) {\n    const size = type.decode.call(this, rstream);\n\n    if (typeof size !== 'number') {\n      throw new TypeError('Size of a string should be a number.');\n    }\n\n    const buf = rstream.readBuffer(size);\n    decode.bytes = type.decode.bytes + buf.length;\n\n    return buf.toString(encoding);\n  };\n}\n\n/**\n * Get the number of bytes of size-prefixed string.\n * @param {Object} type Number type.\n * @param {string} encoding\n * @returns {number}\n */\nfunction encodingLengthSizePrefixedString(type, encoding) {\n  return function encodingLength(value) {\n    const size = Buffer.byteLength(value, encoding);\n\n    return type.encodingLength(size) + size;\n  };\n}\n\n/**\n * Encode the string with dynamic evaluated size.\n * @param {Function} callback Function that returns a number.\n * @param {string} encoding\n * @returns {number}\n */\nfunction encodeCallback(callback, encoding) {\n  return function encode(value, wstream) {\n    encode.bytes = 0;\n\n    const context = this;\n\n    const expectedLength = callback(context);\n    const buf = Buffer.from(value.toString(), encoding);\n\n    checkLengthType(expectedLength);\n    checkLength(expectedLength, buf.length);\n\n    wstream.writeBuffer(buf);\n    encode.bytes += buf.length;\n  };\n}\n\n/**\n * Decode the string with dynamic evaluated size.\n * @param {Function} callback Function that returns a number.\n * @param {string} encoding\n * @returns {number}\n */\nfunction decodeCallback(callback, encoding) {\n  return function decode(rstream) {\n    const size = callback(this);\n    checkLengthType(size);\n\n    const buf = rstream.readBuffer(size);\n    decode.bytes = size;\n\n    return buf.toString(encoding);\n  };\n}\n\n/**\n * @param {any} length\n */\nfunction checkLengthType(length) {\n  if (typeof length !== 'number') {\n    throw new TypeError('Length of a buffer should be a number.');\n  }\n}\n\n/**\n * @param {number} requiredSize\n * @param {number} havingSize\n */\nfunction checkLength(requiredSize, havingSize) {\n  if (requiredSize !== havingSize) {\n    throw new Error(\n      `Buffer required length ${requiredSize} instead of ${havingSize}`\n    );\n  }\n}\n","'use strict';\n\nconst { isType, isFunction, isUserType } = require('lib/util');\nconst symbols = require('internal/symbols');\nconst { decodeCommon } = require('lib/decode');\nconst { encodeCommon } = require('lib/encode');\nconst { encodingLengthCommon } = require('lib/encoding-length');\nconst Metadata = require('internal/meta');\n\nmodule.exports = when;\n\n/**\n * Type for conditions.\n * @param {Function|bool} condition\n * @param {Object} type Any builtin type or schema.\n * @returns {Object}\n */\nfunction when(condition, type) {\n  if (!isType(type) && !isUserType(type)) {\n    throw new TypeError('Argument #2 should be a valid type.');\n  }\n\n  const result = {\n    encode,\n    decode,\n    encodingLength,\n    [symbols.skip]: false,\n  };\n\n  return result;\n\n  /**\n   * Encode value if condition is truthy.\n   * @param {any} value\n   * @param {EncodeStream} wstream\n   */\n  function encode(value, wstream) {\n    const context = Metadata.clone(this);\n    encode.bytes = 0;\n\n    const status = isFunction(condition)\n      ? Boolean(condition(context))\n      : Boolean(condition);\n\n    result[symbols.skip] = !status;\n\n    if (!status) {\n      Metadata.clean(context);\n      return;\n    }\n\n    encodeCommon(value, wstream, type, context);\n    encode.bytes = context.bytes;\n\n    Metadata.clean(context);\n  }\n\n  /**\n   * Decode value if condition is truthy.\n   * @param {DecodeStream} rstream\n   * @returns {any}\n   */\n  function decode(rstream) {\n    const context = Metadata.clone(this);\n    decode.bytes = 0;\n\n    const status = isFunction(condition)\n      ? Boolean(condition(context))\n      : Boolean(condition);\n\n    result[symbols.skip] = !status;\n\n    if (!status) {\n      Metadata.clean(context);\n      return;\n    }\n\n    const value = decodeCommon(rstream, type, context);\n\n    decode.bytes = context.bytes;\n    Metadata.clean(context);\n\n    return value; // eslint-disable-line consistent-return\n  }\n\n  /**\n   * Get the number bytes of an encoded value\n   * when condition is truthy or 0.\n   * @param {any} value\n   * @returns {number}\n   */\n  function encodingLength(value) {\n    const context = Metadata.clone(this);\n\n    const status = isFunction(condition)\n      ? Boolean(condition(context))\n      : Boolean(condition);\n\n    if (status) {\n      encodingLengthCommon(value, type, context);\n    }\n\n    Metadata.clean(context);\n    return context.bytes;\n  }\n}\n","(function (module, exports) {\n  'use strict';\n\n  // Utils\n  function assert (val, msg) {\n    if (!val) throw new Error(msg || 'Assertion failed');\n  }\n\n  // Could use `inherits` module, but don't want to move from single file\n  // architecture yet.\n  function inherits (ctor, superCtor) {\n    ctor.super_ = superCtor;\n    var TempCtor = function () {};\n    TempCtor.prototype = superCtor.prototype;\n    ctor.prototype = new TempCtor();\n    ctor.prototype.constructor = ctor;\n  }\n\n  // BN\n\n  function BN (number, base, endian) {\n    if (BN.isBN(number)) {\n      return number;\n    }\n\n    this.negative = 0;\n    this.words = null;\n    this.length = 0;\n\n    // Reduction context\n    this.red = null;\n\n    if (number !== null) {\n      if (base === 'le' || base === 'be') {\n        endian = base;\n        base = 10;\n      }\n\n      this._init(number || 0, base || 10, endian || 'be');\n    }\n  }\n  if (typeof module === 'object') {\n    module.exports = BN;\n  } else {\n    exports.BN = BN;\n  }\n\n  BN.BN = BN;\n  BN.wordSize = 26;\n\n  var Buffer;\n  try {\n    if (typeof window !== 'undefined' && typeof window.Buffer !== 'undefined') {\n      Buffer = window.Buffer;\n    } else {\n      Buffer = require('buffer').Buffer;\n    }\n  } catch (e) {\n  }\n\n  BN.isBN = function isBN (num) {\n    if (num instanceof BN) {\n      return true;\n    }\n\n    return num !== null && typeof num === 'object' &&\n      num.constructor.wordSize === BN.wordSize && Array.isArray(num.words);\n  };\n\n  BN.max = function max (left, right) {\n    if (left.cmp(right) > 0) return left;\n    return right;\n  };\n\n  BN.min = function min (left, right) {\n    if (left.cmp(right) < 0) return left;\n    return right;\n  };\n\n  BN.prototype._init = function init (number, base, endian) {\n    if (typeof number === 'number') {\n      return this._initNumber(number, base, endian);\n    }\n\n    if (typeof number === 'object') {\n      return this._initArray(number, base, endian);\n    }\n\n    if (base === 'hex') {\n      base = 16;\n    }\n    assert(base === (base | 0) && base >= 2 && base <= 36);\n\n    number = number.toString().replace(/\\s+/g, '');\n    var start = 0;\n    if (number[0] === '-') {\n      start++;\n      this.negative = 1;\n    }\n\n    if (start < number.length) {\n      if (base === 16) {\n        this._parseHex(number, start, endian);\n      } else {\n        this._parseBase(number, base, start);\n        if (endian === 'le') {\n          this._initArray(this.toArray(), base, endian);\n        }\n      }\n    }\n  };\n\n  BN.prototype._initNumber = function _initNumber (number, base, endian) {\n    if (number < 0) {\n      this.negative = 1;\n      number = -number;\n    }\n    if (number < 0x4000000) {\n      this.words = [ number & 0x3ffffff ];\n      this.length = 1;\n    } else if (number < 0x10000000000000) {\n      this.words = [\n        number & 0x3ffffff,\n        (number / 0x4000000) & 0x3ffffff\n      ];\n      this.length = 2;\n    } else {\n      assert(number < 0x20000000000000); // 2 ^ 53 (unsafe)\n      this.words = [\n        number & 0x3ffffff,\n        (number / 0x4000000) & 0x3ffffff,\n        1\n      ];\n      this.length = 3;\n    }\n\n    if (endian !== 'le') return;\n\n    // Reverse the bytes\n    this._initArray(this.toArray(), base, endian);\n  };\n\n  BN.prototype._initArray = function _initArray (number, base, endian) {\n    // Perhaps a Uint8Array\n    assert(typeof number.length === 'number');\n    if (number.length <= 0) {\n      this.words = [ 0 ];\n      this.length = 1;\n      return this;\n    }\n\n    this.length = Math.ceil(number.length / 3);\n    this.words = new Array(this.length);\n    for (var i = 0; i < this.length; i++) {\n      this.words[i] = 0;\n    }\n\n    var j, w;\n    var off = 0;\n    if (endian === 'be') {\n      for (i = number.length - 1, j = 0; i >= 0; i -= 3) {\n        w = number[i] | (number[i - 1] << 8) | (number[i - 2] << 16);\n        this.words[j] |= (w << off) & 0x3ffffff;\n        this.words[j + 1] = (w >>> (26 - off)) & 0x3ffffff;\n        off += 24;\n        if (off >= 26) {\n          off -= 26;\n          j++;\n        }\n      }\n    } else if (endian === 'le') {\n      for (i = 0, j = 0; i < number.length; i += 3) {\n        w = number[i] | (number[i + 1] << 8) | (number[i + 2] << 16);\n        this.words[j] |= (w << off) & 0x3ffffff;\n        this.words[j + 1] = (w >>> (26 - off)) & 0x3ffffff;\n        off += 24;\n        if (off >= 26) {\n          off -= 26;\n          j++;\n        }\n      }\n    }\n    return this.strip();\n  };\n\n  function parseHex4Bits (string, index) {\n    var c = string.charCodeAt(index);\n    // 'A' - 'F'\n    if (c >= 65 && c <= 70) {\n      return c - 55;\n    // 'a' - 'f'\n    } else if (c >= 97 && c <= 102) {\n      return c - 87;\n    // '0' - '9'\n    } else {\n      return (c - 48) & 0xf;\n    }\n  }\n\n  function parseHexByte (string, lowerBound, index) {\n    var r = parseHex4Bits(string, index);\n    if (index - 1 >= lowerBound) {\n      r |= parseHex4Bits(string, index - 1) << 4;\n    }\n    return r;\n  }\n\n  BN.prototype._parseHex = function _parseHex (number, start, endian) {\n    // Create possibly bigger array to ensure that it fits the number\n    this.length = Math.ceil((number.length - start) / 6);\n    this.words = new Array(this.length);\n    for (var i = 0; i < this.length; i++) {\n      this.words[i] = 0;\n    }\n\n    // 24-bits chunks\n    var off = 0;\n    var j = 0;\n\n    var w;\n    if (endian === 'be') {\n      for (i = number.length - 1; i >= start; i -= 2) {\n        w = parseHexByte(number, start, i) << off;\n        this.words[j] |= w & 0x3ffffff;\n        if (off >= 18) {\n          off -= 18;\n          j += 1;\n          this.words[j] |= w >>> 26;\n        } else {\n          off += 8;\n        }\n      }\n    } else {\n      var parseLength = number.length - start;\n      for (i = parseLength % 2 === 0 ? start + 1 : start; i < number.length; i += 2) {\n        w = parseHexByte(number, start, i) << off;\n        this.words[j] |= w & 0x3ffffff;\n        if (off >= 18) {\n          off -= 18;\n          j += 1;\n          this.words[j] |= w >>> 26;\n        } else {\n          off += 8;\n        }\n      }\n    }\n\n    this.strip();\n  };\n\n  function parseBase (str, start, end, mul) {\n    var r = 0;\n    var len = Math.min(str.length, end);\n    for (var i = start; i < len; i++) {\n      var c = str.charCodeAt(i) - 48;\n\n      r *= mul;\n\n      // 'a'\n      if (c >= 49) {\n        r += c - 49 + 0xa;\n\n      // 'A'\n      } else if (c >= 17) {\n        r += c - 17 + 0xa;\n\n      // '0' - '9'\n      } else {\n        r += c;\n      }\n    }\n    return r;\n  }\n\n  BN.prototype._parseBase = function _parseBase (number, base, start) {\n    // Initialize as zero\n    this.words = [ 0 ];\n    this.length = 1;\n\n    // Find length of limb in base\n    for (var limbLen = 0, limbPow = 1; limbPow <= 0x3ffffff; limbPow *= base) {\n      limbLen++;\n    }\n    limbLen--;\n    limbPow = (limbPow / base) | 0;\n\n    var total = number.length - start;\n    var mod = total % limbLen;\n    var end = Math.min(total, total - mod) + start;\n\n    var word = 0;\n    for (var i = start; i < end; i += limbLen) {\n      word = parseBase(number, i, i + limbLen, base);\n\n      this.imuln(limbPow);\n      if (this.words[0] + word < 0x4000000) {\n        this.words[0] += word;\n      } else {\n        this._iaddn(word);\n      }\n    }\n\n    if (mod !== 0) {\n      var pow = 1;\n      word = parseBase(number, i, number.length, base);\n\n      for (i = 0; i < mod; i++) {\n        pow *= base;\n      }\n\n      this.imuln(pow);\n      if (this.words[0] + word < 0x4000000) {\n        this.words[0] += word;\n      } else {\n        this._iaddn(word);\n      }\n    }\n\n    this.strip();\n  };\n\n  BN.prototype.copy = function copy (dest) {\n    dest.words = new Array(this.length);\n    for (var i = 0; i < this.length; i++) {\n      dest.words[i] = this.words[i];\n    }\n    dest.length = this.length;\n    dest.negative = this.negative;\n    dest.red = this.red;\n  };\n\n  BN.prototype.clone = function clone () {\n    var r = new BN(null);\n    this.copy(r);\n    return r;\n  };\n\n  BN.prototype._expand = function _expand (size) {\n    while (this.length < size) {\n      this.words[this.length++] = 0;\n    }\n    return this;\n  };\n\n  // Remove leading `0` from `this`\n  BN.prototype.strip = function strip () {\n    while (this.length > 1 && this.words[this.length - 1] === 0) {\n      this.length--;\n    }\n    return this._normSign();\n  };\n\n  BN.prototype._normSign = function _normSign () {\n    // -0 = 0\n    if (this.length === 1 && this.words[0] === 0) {\n      this.negative = 0;\n    }\n    return this;\n  };\n\n  BN.prototype.inspect = function inspect () {\n    return (this.red ? '<BN-R: ' : '<BN: ') + this.toString(16) + '>';\n  };\n\n  /*\n\n  var zeros = [];\n  var groupSizes = [];\n  var groupBases = [];\n\n  var s = '';\n  var i = -1;\n  while (++i < BN.wordSize) {\n    zeros[i] = s;\n    s += '0';\n  }\n  groupSizes[0] = 0;\n  groupSizes[1] = 0;\n  groupBases[0] = 0;\n  groupBases[1] = 0;\n  var base = 2 - 1;\n  while (++base < 36 + 1) {\n    var groupSize = 0;\n    var groupBase = 1;\n    while (groupBase < (1 << BN.wordSize) / base) {\n      groupBase *= base;\n      groupSize += 1;\n    }\n    groupSizes[base] = groupSize;\n    groupBases[base] = groupBase;\n  }\n\n  */\n\n  var zeros = [\n    '',\n    '0',\n    '00',\n    '000',\n    '0000',\n    '00000',\n    '000000',\n    '0000000',\n    '00000000',\n    '000000000',\n    '0000000000',\n    '00000000000',\n    '000000000000',\n    '0000000000000',\n    '00000000000000',\n    '000000000000000',\n    '0000000000000000',\n    '00000000000000000',\n    '000000000000000000',\n    '0000000000000000000',\n    '00000000000000000000',\n    '000000000000000000000',\n    '0000000000000000000000',\n    '00000000000000000000000',\n    '000000000000000000000000',\n    '0000000000000000000000000'\n  ];\n\n  var groupSizes = [\n    0, 0,\n    25, 16, 12, 11, 10, 9, 8,\n    8, 7, 7, 7, 7, 6, 6,\n    6, 6, 6, 6, 6, 5, 5,\n    5, 5, 5, 5, 5, 5, 5,\n    5, 5, 5, 5, 5, 5, 5\n  ];\n\n  var groupBases = [\n    0, 0,\n    33554432, 43046721, 16777216, 48828125, 60466176, 40353607, 16777216,\n    43046721, 10000000, 19487171, 35831808, 62748517, 7529536, 11390625,\n    16777216, 24137569, 34012224, 47045881, 64000000, 4084101, 5153632,\n    6436343, 7962624, 9765625, 11881376, 14348907, 17210368, 20511149,\n    24300000, 28629151, 33554432, 39135393, 45435424, 52521875, 60466176\n  ];\n\n  BN.prototype.toString = function toString (base, padding) {\n    base = base || 10;\n    padding = padding | 0 || 1;\n\n    var out;\n    if (base === 16 || base === 'hex') {\n      out = '';\n      var off = 0;\n      var carry = 0;\n      for (var i = 0; i < this.length; i++) {\n        var w = this.words[i];\n        var word = (((w << off) | carry) & 0xffffff).toString(16);\n        carry = (w >>> (24 - off)) & 0xffffff;\n        if (carry !== 0 || i !== this.length - 1) {\n          out = zeros[6 - word.length] + word + out;\n        } else {\n          out = word + out;\n        }\n        off += 2;\n        if (off >= 26) {\n          off -= 26;\n          i--;\n        }\n      }\n      if (carry !== 0) {\n        out = carry.toString(16) + out;\n      }\n      while (out.length % padding !== 0) {\n        out = '0' + out;\n      }\n      if (this.negative !== 0) {\n        out = '-' + out;\n      }\n      return out;\n    }\n\n    if (base === (base | 0) && base >= 2 && base <= 36) {\n      // var groupSize = Math.floor(BN.wordSize * Math.LN2 / Math.log(base));\n      var groupSize = groupSizes[base];\n      // var groupBase = Math.pow(base, groupSize);\n      var groupBase = groupBases[base];\n      out = '';\n      var c = this.clone();\n      c.negative = 0;\n      while (!c.isZero()) {\n        var r = c.modn(groupBase).toString(base);\n        c = c.idivn(groupBase);\n\n        if (!c.isZero()) {\n          out = zeros[groupSize - r.length] + r + out;\n        } else {\n          out = r + out;\n        }\n      }\n      if (this.isZero()) {\n        out = '0' + out;\n      }\n      while (out.length % padding !== 0) {\n        out = '0' + out;\n      }\n      if (this.negative !== 0) {\n        out = '-' + out;\n      }\n      return out;\n    }\n\n    assert(false, 'Base should be between 2 and 36');\n  };\n\n  BN.prototype.toNumber = function toNumber () {\n    var ret = this.words[0];\n    if (this.length === 2) {\n      ret += this.words[1] * 0x4000000;\n    } else if (this.length === 3 && this.words[2] === 0x01) {\n      // NOTE: at this stage it is known that the top bit is set\n      ret += 0x10000000000000 + (this.words[1] * 0x4000000);\n    } else if (this.length > 2) {\n      assert(false, 'Number can only safely store up to 53 bits');\n    }\n    return (this.negative !== 0) ? -ret : ret;\n  };\n\n  BN.prototype.toJSON = function toJSON () {\n    return this.toString(16);\n  };\n\n  BN.prototype.toBuffer = function toBuffer (endian, length) {\n    assert(typeof Buffer !== 'undefined');\n    return this.toArrayLike(Buffer, endian, length);\n  };\n\n  BN.prototype.toArray = function toArray (endian, length) {\n    return this.toArrayLike(Array, endian, length);\n  };\n\n  BN.prototype.toArrayLike = function toArrayLike (ArrayType, endian, length) {\n    var byteLength = this.byteLength();\n    var reqLength = length || Math.max(1, byteLength);\n    assert(byteLength <= reqLength, 'byte array longer than desired length');\n    assert(reqLength > 0, 'Requested array length <= 0');\n\n    this.strip();\n    var littleEndian = endian === 'le';\n    var res = new ArrayType(reqLength);\n\n    var b, i;\n    var q = this.clone();\n    if (!littleEndian) {\n      // Assume big-endian\n      for (i = 0; i < reqLength - byteLength; i++) {\n        res[i] = 0;\n      }\n\n      for (i = 0; !q.isZero(); i++) {\n        b = q.andln(0xff);\n        q.iushrn(8);\n\n        res[reqLength - i - 1] = b;\n      }\n    } else {\n      for (i = 0; !q.isZero(); i++) {\n        b = q.andln(0xff);\n        q.iushrn(8);\n\n        res[i] = b;\n      }\n\n      for (; i < reqLength; i++) {\n        res[i] = 0;\n      }\n    }\n\n    return res;\n  };\n\n  if (Math.clz32) {\n    BN.prototype._countBits = function _countBits (w) {\n      return 32 - Math.clz32(w);\n    };\n  } else {\n    BN.prototype._countBits = function _countBits (w) {\n      var t = w;\n      var r = 0;\n      if (t >= 0x1000) {\n        r += 13;\n        t >>>= 13;\n      }\n      if (t >= 0x40) {\n        r += 7;\n        t >>>= 7;\n      }\n      if (t >= 0x8) {\n        r += 4;\n        t >>>= 4;\n      }\n      if (t >= 0x02) {\n        r += 2;\n        t >>>= 2;\n      }\n      return r + t;\n    };\n  }\n\n  BN.prototype._zeroBits = function _zeroBits (w) {\n    // Short-cut\n    if (w === 0) return 26;\n\n    var t = w;\n    var r = 0;\n    if ((t & 0x1fff) === 0) {\n      r += 13;\n      t >>>= 13;\n    }\n    if ((t & 0x7f) === 0) {\n      r += 7;\n      t >>>= 7;\n    }\n    if ((t & 0xf) === 0) {\n      r += 4;\n      t >>>= 4;\n    }\n    if ((t & 0x3) === 0) {\n      r += 2;\n      t >>>= 2;\n    }\n    if ((t & 0x1) === 0) {\n      r++;\n    }\n    return r;\n  };\n\n  // Return number of used bits in a BN\n  BN.prototype.bitLength = function bitLength () {\n    var w = this.words[this.length - 1];\n    var hi = this._countBits(w);\n    return (this.length - 1) * 26 + hi;\n  };\n\n  function toBitArray (num) {\n    var w = new Array(num.bitLength());\n\n    for (var bit = 0; bit < w.length; bit++) {\n      var off = (bit / 26) | 0;\n      var wbit = bit % 26;\n\n      w[bit] = (num.words[off] & (1 << wbit)) >>> wbit;\n    }\n\n    return w;\n  }\n\n  // Number of trailing zero bits\n  BN.prototype.zeroBits = function zeroBits () {\n    if (this.isZero()) return 0;\n\n    var r = 0;\n    for (var i = 0; i < this.length; i++) {\n      var b = this._zeroBits(this.words[i]);\n      r += b;\n      if (b !== 26) break;\n    }\n    return r;\n  };\n\n  BN.prototype.byteLength = function byteLength () {\n    return Math.ceil(this.bitLength() / 8);\n  };\n\n  BN.prototype.toTwos = function toTwos (width) {\n    if (this.negative !== 0) {\n      return this.abs().inotn(width).iaddn(1);\n    }\n    return this.clone();\n  };\n\n  BN.prototype.fromTwos = function fromTwos (width) {\n    if (this.testn(width - 1)) {\n      return this.notn(width).iaddn(1).ineg();\n    }\n    return this.clone();\n  };\n\n  BN.prototype.isNeg = function isNeg () {\n    return this.negative !== 0;\n  };\n\n  // Return negative clone of `this`\n  BN.prototype.neg = function neg () {\n    return this.clone().ineg();\n  };\n\n  BN.prototype.ineg = function ineg () {\n    if (!this.isZero()) {\n      this.negative ^= 1;\n    }\n\n    return this;\n  };\n\n  // Or `num` with `this` in-place\n  BN.prototype.iuor = function iuor (num) {\n    while (this.length < num.length) {\n      this.words[this.length++] = 0;\n    }\n\n    for (var i = 0; i < num.length; i++) {\n      this.words[i] = this.words[i] | num.words[i];\n    }\n\n    return this.strip();\n  };\n\n  BN.prototype.ior = function ior (num) {\n    assert((this.negative | num.negative) === 0);\n    return this.iuor(num);\n  };\n\n  // Or `num` with `this`\n  BN.prototype.or = function or (num) {\n    if (this.length > num.length) return this.clone().ior(num);\n    return num.clone().ior(this);\n  };\n\n  BN.prototype.uor = function uor (num) {\n    if (this.length > num.length) return this.clone().iuor(num);\n    return num.clone().iuor(this);\n  };\n\n  // And `num` with `this` in-place\n  BN.prototype.iuand = function iuand (num) {\n    // b = min-length(num, this)\n    var b;\n    if (this.length > num.length) {\n      b = num;\n    } else {\n      b = this;\n    }\n\n    for (var i = 0; i < b.length; i++) {\n      this.words[i] = this.words[i] & num.words[i];\n    }\n\n    this.length = b.length;\n\n    return this.strip();\n  };\n\n  BN.prototype.iand = function iand (num) {\n    assert((this.negative | num.negative) === 0);\n    return this.iuand(num);\n  };\n\n  // And `num` with `this`\n  BN.prototype.and = function and (num) {\n    if (this.length > num.length) return this.clone().iand(num);\n    return num.clone().iand(this);\n  };\n\n  BN.prototype.uand = function uand (num) {\n    if (this.length > num.length) return this.clone().iuand(num);\n    return num.clone().iuand(this);\n  };\n\n  // Xor `num` with `this` in-place\n  BN.prototype.iuxor = function iuxor (num) {\n    // a.length > b.length\n    var a;\n    var b;\n    if (this.length > num.length) {\n      a = this;\n      b = num;\n    } else {\n      a = num;\n      b = this;\n    }\n\n    for (var i = 0; i < b.length; i++) {\n      this.words[i] = a.words[i] ^ b.words[i];\n    }\n\n    if (this !== a) {\n      for (; i < a.length; i++) {\n        this.words[i] = a.words[i];\n      }\n    }\n\n    this.length = a.length;\n\n    return this.strip();\n  };\n\n  BN.prototype.ixor = function ixor (num) {\n    assert((this.negative | num.negative) === 0);\n    return this.iuxor(num);\n  };\n\n  // Xor `num` with `this`\n  BN.prototype.xor = function xor (num) {\n    if (this.length > num.length) return this.clone().ixor(num);\n    return num.clone().ixor(this);\n  };\n\n  BN.prototype.uxor = function uxor (num) {\n    if (this.length > num.length) return this.clone().iuxor(num);\n    return num.clone().iuxor(this);\n  };\n\n  // Not ``this`` with ``width`` bitwidth\n  BN.prototype.inotn = function inotn (width) {\n    assert(typeof width === 'number' && width >= 0);\n\n    var bytesNeeded = Math.ceil(width / 26) | 0;\n    var bitsLeft = width % 26;\n\n    // Extend the buffer with leading zeroes\n    this._expand(bytesNeeded);\n\n    if (bitsLeft > 0) {\n      bytesNeeded--;\n    }\n\n    // Handle complete words\n    for (var i = 0; i < bytesNeeded; i++) {\n      this.words[i] = ~this.words[i] & 0x3ffffff;\n    }\n\n    // Handle the residue\n    if (bitsLeft > 0) {\n      this.words[i] = ~this.words[i] & (0x3ffffff >> (26 - bitsLeft));\n    }\n\n    // And remove leading zeroes\n    return this.strip();\n  };\n\n  BN.prototype.notn = function notn (width) {\n    return this.clone().inotn(width);\n  };\n\n  // Set `bit` of `this`\n  BN.prototype.setn = function setn (bit, val) {\n    assert(typeof bit === 'number' && bit >= 0);\n\n    var off = (bit / 26) | 0;\n    var wbit = bit % 26;\n\n    this._expand(off + 1);\n\n    if (val) {\n      this.words[off] = this.words[off] | (1 << wbit);\n    } else {\n      this.words[off] = this.words[off] & ~(1 << wbit);\n    }\n\n    return this.strip();\n  };\n\n  // Add `num` to `this` in-place\n  BN.prototype.iadd = function iadd (num) {\n    var r;\n\n    // negative + positive\n    if (this.negative !== 0 && num.negative === 0) {\n      this.negative = 0;\n      r = this.isub(num);\n      this.negative ^= 1;\n      return this._normSign();\n\n    // positive + negative\n    } else if (this.negative === 0 && num.negative !== 0) {\n      num.negative = 0;\n      r = this.isub(num);\n      num.negative = 1;\n      return r._normSign();\n    }\n\n    // a.length > b.length\n    var a, b;\n    if (this.length > num.length) {\n      a = this;\n      b = num;\n    } else {\n      a = num;\n      b = this;\n    }\n\n    var carry = 0;\n    for (var i = 0; i < b.length; i++) {\n      r = (a.words[i] | 0) + (b.words[i] | 0) + carry;\n      this.words[i] = r & 0x3ffffff;\n      carry = r >>> 26;\n    }\n    for (; carry !== 0 && i < a.length; i++) {\n      r = (a.words[i] | 0) + carry;\n      this.words[i] = r & 0x3ffffff;\n      carry = r >>> 26;\n    }\n\n    this.length = a.length;\n    if (carry !== 0) {\n      this.words[this.length] = carry;\n      this.length++;\n    // Copy the rest of the words\n    } else if (a !== this) {\n      for (; i < a.length; i++) {\n        this.words[i] = a.words[i];\n      }\n    }\n\n    return this;\n  };\n\n  // Add `num` to `this`\n  BN.prototype.add = function add (num) {\n    var res;\n    if (num.negative !== 0 && this.negative === 0) {\n      num.negative = 0;\n      res = this.sub(num);\n      num.negative ^= 1;\n      return res;\n    } else if (num.negative === 0 && this.negative !== 0) {\n      this.negative = 0;\n      res = num.sub(this);\n      this.negative = 1;\n      return res;\n    }\n\n    if (this.length > num.length) return this.clone().iadd(num);\n\n    return num.clone().iadd(this);\n  };\n\n  // Subtract `num` from `this` in-place\n  BN.prototype.isub = function isub (num) {\n    // this - (-num) = this + num\n    if (num.negative !== 0) {\n      num.negative = 0;\n      var r = this.iadd(num);\n      num.negative = 1;\n      return r._normSign();\n\n    // -this - num = -(this + num)\n    } else if (this.negative !== 0) {\n      this.negative = 0;\n      this.iadd(num);\n      this.negative = 1;\n      return this._normSign();\n    }\n\n    // At this point both numbers are positive\n    var cmp = this.cmp(num);\n\n    // Optimization - zeroify\n    if (cmp === 0) {\n      this.negative = 0;\n      this.length = 1;\n      this.words[0] = 0;\n      return this;\n    }\n\n    // a > b\n    var a, b;\n    if (cmp > 0) {\n      a = this;\n      b = num;\n    } else {\n      a = num;\n      b = this;\n    }\n\n    var carry = 0;\n    for (var i = 0; i < b.length; i++) {\n      r = (a.words[i] | 0) - (b.words[i] | 0) + carry;\n      carry = r >> 26;\n      this.words[i] = r & 0x3ffffff;\n    }\n    for (; carry !== 0 && i < a.length; i++) {\n      r = (a.words[i] | 0) + carry;\n      carry = r >> 26;\n      this.words[i] = r & 0x3ffffff;\n    }\n\n    // Copy rest of the words\n    if (carry === 0 && i < a.length && a !== this) {\n      for (; i < a.length; i++) {\n        this.words[i] = a.words[i];\n      }\n    }\n\n    this.length = Math.max(this.length, i);\n\n    if (a !== this) {\n      this.negative = 1;\n    }\n\n    return this.strip();\n  };\n\n  // Subtract `num` from `this`\n  BN.prototype.sub = function sub (num) {\n    return this.clone().isub(num);\n  };\n\n  function smallMulTo (self, num, out) {\n    out.negative = num.negative ^ self.negative;\n    var len = (self.length + num.length) | 0;\n    out.length = len;\n    len = (len - 1) | 0;\n\n    // Peel one iteration (compiler can't do it, because of code complexity)\n    var a = self.words[0] | 0;\n    var b = num.words[0] | 0;\n    var r = a * b;\n\n    var lo = r & 0x3ffffff;\n    var carry = (r / 0x4000000) | 0;\n    out.words[0] = lo;\n\n    for (var k = 1; k < len; k++) {\n      // Sum all words with the same `i + j = k` and accumulate `ncarry`,\n      // note that ncarry could be >= 0x3ffffff\n      var ncarry = carry >>> 26;\n      var rword = carry & 0x3ffffff;\n      var maxJ = Math.min(k, num.length - 1);\n      for (var j = Math.max(0, k - self.length + 1); j <= maxJ; j++) {\n        var i = (k - j) | 0;\n        a = self.words[i] | 0;\n        b = num.words[j] | 0;\n        r = a * b + rword;\n        ncarry += (r / 0x4000000) | 0;\n        rword = r & 0x3ffffff;\n      }\n      out.words[k] = rword | 0;\n      carry = ncarry | 0;\n    }\n    if (carry !== 0) {\n      out.words[k] = carry | 0;\n    } else {\n      out.length--;\n    }\n\n    return out.strip();\n  }\n\n  // TODO(indutny): it may be reasonable to omit it for users who don't need\n  // to work with 256-bit numbers, otherwise it gives 20% improvement for 256-bit\n  // multiplication (like elliptic secp256k1).\n  var comb10MulTo = function comb10MulTo (self, num, out) {\n    var a = self.words;\n    var b = num.words;\n    var o = out.words;\n    var c = 0;\n    var lo;\n    var mid;\n    var hi;\n    var a0 = a[0] | 0;\n    var al0 = a0 & 0x1fff;\n    var ah0 = a0 >>> 13;\n    var a1 = a[1] | 0;\n    var al1 = a1 & 0x1fff;\n    var ah1 = a1 >>> 13;\n    var a2 = a[2] | 0;\n    var al2 = a2 & 0x1fff;\n    var ah2 = a2 >>> 13;\n    var a3 = a[3] | 0;\n    var al3 = a3 & 0x1fff;\n    var ah3 = a3 >>> 13;\n    var a4 = a[4] | 0;\n    var al4 = a4 & 0x1fff;\n    var ah4 = a4 >>> 13;\n    var a5 = a[5] | 0;\n    var al5 = a5 & 0x1fff;\n    var ah5 = a5 >>> 13;\n    var a6 = a[6] | 0;\n    var al6 = a6 & 0x1fff;\n    var ah6 = a6 >>> 13;\n    var a7 = a[7] | 0;\n    var al7 = a7 & 0x1fff;\n    var ah7 = a7 >>> 13;\n    var a8 = a[8] | 0;\n    var al8 = a8 & 0x1fff;\n    var ah8 = a8 >>> 13;\n    var a9 = a[9] | 0;\n    var al9 = a9 & 0x1fff;\n    var ah9 = a9 >>> 13;\n    var b0 = b[0] | 0;\n    var bl0 = b0 & 0x1fff;\n    var bh0 = b0 >>> 13;\n    var b1 = b[1] | 0;\n    var bl1 = b1 & 0x1fff;\n    var bh1 = b1 >>> 13;\n    var b2 = b[2] | 0;\n    var bl2 = b2 & 0x1fff;\n    var bh2 = b2 >>> 13;\n    var b3 = b[3] | 0;\n    var bl3 = b3 & 0x1fff;\n    var bh3 = b3 >>> 13;\n    var b4 = b[4] | 0;\n    var bl4 = b4 & 0x1fff;\n    var bh4 = b4 >>> 13;\n    var b5 = b[5] | 0;\n    var bl5 = b5 & 0x1fff;\n    var bh5 = b5 >>> 13;\n    var b6 = b[6] | 0;\n    var bl6 = b6 & 0x1fff;\n    var bh6 = b6 >>> 13;\n    var b7 = b[7] | 0;\n    var bl7 = b7 & 0x1fff;\n    var bh7 = b7 >>> 13;\n    var b8 = b[8] | 0;\n    var bl8 = b8 & 0x1fff;\n    var bh8 = b8 >>> 13;\n    var b9 = b[9] | 0;\n    var bl9 = b9 & 0x1fff;\n    var bh9 = b9 >>> 13;\n\n    out.negative = self.negative ^ num.negative;\n    out.length = 19;\n    /* k = 0 */\n    lo = Math.imul(al0, bl0);\n    mid = Math.imul(al0, bh0);\n    mid = (mid + Math.imul(ah0, bl0)) | 0;\n    hi = Math.imul(ah0, bh0);\n    var w0 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w0 >>> 26)) | 0;\n    w0 &= 0x3ffffff;\n    /* k = 1 */\n    lo = Math.imul(al1, bl0);\n    mid = Math.imul(al1, bh0);\n    mid = (mid + Math.imul(ah1, bl0)) | 0;\n    hi = Math.imul(ah1, bh0);\n    lo = (lo + Math.imul(al0, bl1)) | 0;\n    mid = (mid + Math.imul(al0, bh1)) | 0;\n    mid = (mid + Math.imul(ah0, bl1)) | 0;\n    hi = (hi + Math.imul(ah0, bh1)) | 0;\n    var w1 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w1 >>> 26)) | 0;\n    w1 &= 0x3ffffff;\n    /* k = 2 */\n    lo = Math.imul(al2, bl0);\n    mid = Math.imul(al2, bh0);\n    mid = (mid + Math.imul(ah2, bl0)) | 0;\n    hi = Math.imul(ah2, bh0);\n    lo = (lo + Math.imul(al1, bl1)) | 0;\n    mid = (mid + Math.imul(al1, bh1)) | 0;\n    mid = (mid + Math.imul(ah1, bl1)) | 0;\n    hi = (hi + Math.imul(ah1, bh1)) | 0;\n    lo = (lo + Math.imul(al0, bl2)) | 0;\n    mid = (mid + Math.imul(al0, bh2)) | 0;\n    mid = (mid + Math.imul(ah0, bl2)) | 0;\n    hi = (hi + Math.imul(ah0, bh2)) | 0;\n    var w2 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w2 >>> 26)) | 0;\n    w2 &= 0x3ffffff;\n    /* k = 3 */\n    lo = Math.imul(al3, bl0);\n    mid = Math.imul(al3, bh0);\n    mid = (mid + Math.imul(ah3, bl0)) | 0;\n    hi = Math.imul(ah3, bh0);\n    lo = (lo + Math.imul(al2, bl1)) | 0;\n    mid = (mid + Math.imul(al2, bh1)) | 0;\n    mid = (mid + Math.imul(ah2, bl1)) | 0;\n    hi = (hi + Math.imul(ah2, bh1)) | 0;\n    lo = (lo + Math.imul(al1, bl2)) | 0;\n    mid = (mid + Math.imul(al1, bh2)) | 0;\n    mid = (mid + Math.imul(ah1, bl2)) | 0;\n    hi = (hi + Math.imul(ah1, bh2)) | 0;\n    lo = (lo + Math.imul(al0, bl3)) | 0;\n    mid = (mid + Math.imul(al0, bh3)) | 0;\n    mid = (mid + Math.imul(ah0, bl3)) | 0;\n    hi = (hi + Math.imul(ah0, bh3)) | 0;\n    var w3 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w3 >>> 26)) | 0;\n    w3 &= 0x3ffffff;\n    /* k = 4 */\n    lo = Math.imul(al4, bl0);\n    mid = Math.imul(al4, bh0);\n    mid = (mid + Math.imul(ah4, bl0)) | 0;\n    hi = Math.imul(ah4, bh0);\n    lo = (lo + Math.imul(al3, bl1)) | 0;\n    mid = (mid + Math.imul(al3, bh1)) | 0;\n    mid = (mid + Math.imul(ah3, bl1)) | 0;\n    hi = (hi + Math.imul(ah3, bh1)) | 0;\n    lo = (lo + Math.imul(al2, bl2)) | 0;\n    mid = (mid + Math.imul(al2, bh2)) | 0;\n    mid = (mid + Math.imul(ah2, bl2)) | 0;\n    hi = (hi + Math.imul(ah2, bh2)) | 0;\n    lo = (lo + Math.imul(al1, bl3)) | 0;\n    mid = (mid + Math.imul(al1, bh3)) | 0;\n    mid = (mid + Math.imul(ah1, bl3)) | 0;\n    hi = (hi + Math.imul(ah1, bh3)) | 0;\n    lo = (lo + Math.imul(al0, bl4)) | 0;\n    mid = (mid + Math.imul(al0, bh4)) | 0;\n    mid = (mid + Math.imul(ah0, bl4)) | 0;\n    hi = (hi + Math.imul(ah0, bh4)) | 0;\n    var w4 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w4 >>> 26)) | 0;\n    w4 &= 0x3ffffff;\n    /* k = 5 */\n    lo = Math.imul(al5, bl0);\n    mid = Math.imul(al5, bh0);\n    mid = (mid + Math.imul(ah5, bl0)) | 0;\n    hi = Math.imul(ah5, bh0);\n    lo = (lo + Math.imul(al4, bl1)) | 0;\n    mid = (mid + Math.imul(al4, bh1)) | 0;\n    mid = (mid + Math.imul(ah4, bl1)) | 0;\n    hi = (hi + Math.imul(ah4, bh1)) | 0;\n    lo = (lo + Math.imul(al3, bl2)) | 0;\n    mid = (mid + Math.imul(al3, bh2)) | 0;\n    mid = (mid + Math.imul(ah3, bl2)) | 0;\n    hi = (hi + Math.imul(ah3, bh2)) | 0;\n    lo = (lo + Math.imul(al2, bl3)) | 0;\n    mid = (mid + Math.imul(al2, bh3)) | 0;\n    mid = (mid + Math.imul(ah2, bl3)) | 0;\n    hi = (hi + Math.imul(ah2, bh3)) | 0;\n    lo = (lo + Math.imul(al1, bl4)) | 0;\n    mid = (mid + Math.imul(al1, bh4)) | 0;\n    mid = (mid + Math.imul(ah1, bl4)) | 0;\n    hi = (hi + Math.imul(ah1, bh4)) | 0;\n    lo = (lo + Math.imul(al0, bl5)) | 0;\n    mid = (mid + Math.imul(al0, bh5)) | 0;\n    mid = (mid + Math.imul(ah0, bl5)) | 0;\n    hi = (hi + Math.imul(ah0, bh5)) | 0;\n    var w5 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w5 >>> 26)) | 0;\n    w5 &= 0x3ffffff;\n    /* k = 6 */\n    lo = Math.imul(al6, bl0);\n    mid = Math.imul(al6, bh0);\n    mid = (mid + Math.imul(ah6, bl0)) | 0;\n    hi = Math.imul(ah6, bh0);\n    lo = (lo + Math.imul(al5, bl1)) | 0;\n    mid = (mid + Math.imul(al5, bh1)) | 0;\n    mid = (mid + Math.imul(ah5, bl1)) | 0;\n    hi = (hi + Math.imul(ah5, bh1)) | 0;\n    lo = (lo + Math.imul(al4, bl2)) | 0;\n    mid = (mid + Math.imul(al4, bh2)) | 0;\n    mid = (mid + Math.imul(ah4, bl2)) | 0;\n    hi = (hi + Math.imul(ah4, bh2)) | 0;\n    lo = (lo + Math.imul(al3, bl3)) | 0;\n    mid = (mid + Math.imul(al3, bh3)) | 0;\n    mid = (mid + Math.imul(ah3, bl3)) | 0;\n    hi = (hi + Math.imul(ah3, bh3)) | 0;\n    lo = (lo + Math.imul(al2, bl4)) | 0;\n    mid = (mid + Math.imul(al2, bh4)) | 0;\n    mid = (mid + Math.imul(ah2, bl4)) | 0;\n    hi = (hi + Math.imul(ah2, bh4)) | 0;\n    lo = (lo + Math.imul(al1, bl5)) | 0;\n    mid = (mid + Math.imul(al1, bh5)) | 0;\n    mid = (mid + Math.imul(ah1, bl5)) | 0;\n    hi = (hi + Math.imul(ah1, bh5)) | 0;\n    lo = (lo + Math.imul(al0, bl6)) | 0;\n    mid = (mid + Math.imul(al0, bh6)) | 0;\n    mid = (mid + Math.imul(ah0, bl6)) | 0;\n    hi = (hi + Math.imul(ah0, bh6)) | 0;\n    var w6 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w6 >>> 26)) | 0;\n    w6 &= 0x3ffffff;\n    /* k = 7 */\n    lo = Math.imul(al7, bl0);\n    mid = Math.imul(al7, bh0);\n    mid = (mid + Math.imul(ah7, bl0)) | 0;\n    hi = Math.imul(ah7, bh0);\n    lo = (lo + Math.imul(al6, bl1)) | 0;\n    mid = (mid + Math.imul(al6, bh1)) | 0;\n    mid = (mid + Math.imul(ah6, bl1)) | 0;\n    hi = (hi + Math.imul(ah6, bh1)) | 0;\n    lo = (lo + Math.imul(al5, bl2)) | 0;\n    mid = (mid + Math.imul(al5, bh2)) | 0;\n    mid = (mid + Math.imul(ah5, bl2)) | 0;\n    hi = (hi + Math.imul(ah5, bh2)) | 0;\n    lo = (lo + Math.imul(al4, bl3)) | 0;\n    mid = (mid + Math.imul(al4, bh3)) | 0;\n    mid = (mid + Math.imul(ah4, bl3)) | 0;\n    hi = (hi + Math.imul(ah4, bh3)) | 0;\n    lo = (lo + Math.imul(al3, bl4)) | 0;\n    mid = (mid + Math.imul(al3, bh4)) | 0;\n    mid = (mid + Math.imul(ah3, bl4)) | 0;\n    hi = (hi + Math.imul(ah3, bh4)) | 0;\n    lo = (lo + Math.imul(al2, bl5)) | 0;\n    mid = (mid + Math.imul(al2, bh5)) | 0;\n    mid = (mid + Math.imul(ah2, bl5)) | 0;\n    hi = (hi + Math.imul(ah2, bh5)) | 0;\n    lo = (lo + Math.imul(al1, bl6)) | 0;\n    mid = (mid + Math.imul(al1, bh6)) | 0;\n    mid = (mid + Math.imul(ah1, bl6)) | 0;\n    hi = (hi + Math.imul(ah1, bh6)) | 0;\n    lo = (lo + Math.imul(al0, bl7)) | 0;\n    mid = (mid + Math.imul(al0, bh7)) | 0;\n    mid = (mid + Math.imul(ah0, bl7)) | 0;\n    hi = (hi + Math.imul(ah0, bh7)) | 0;\n    var w7 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w7 >>> 26)) | 0;\n    w7 &= 0x3ffffff;\n    /* k = 8 */\n    lo = Math.imul(al8, bl0);\n    mid = Math.imul(al8, bh0);\n    mid = (mid + Math.imul(ah8, bl0)) | 0;\n    hi = Math.imul(ah8, bh0);\n    lo = (lo + Math.imul(al7, bl1)) | 0;\n    mid = (mid + Math.imul(al7, bh1)) | 0;\n    mid = (mid + Math.imul(ah7, bl1)) | 0;\n    hi = (hi + Math.imul(ah7, bh1)) | 0;\n    lo = (lo + Math.imul(al6, bl2)) | 0;\n    mid = (mid + Math.imul(al6, bh2)) | 0;\n    mid = (mid + Math.imul(ah6, bl2)) | 0;\n    hi = (hi + Math.imul(ah6, bh2)) | 0;\n    lo = (lo + Math.imul(al5, bl3)) | 0;\n    mid = (mid + Math.imul(al5, bh3)) | 0;\n    mid = (mid + Math.imul(ah5, bl3)) | 0;\n    hi = (hi + Math.imul(ah5, bh3)) | 0;\n    lo = (lo + Math.imul(al4, bl4)) | 0;\n    mid = (mid + Math.imul(al4, bh4)) | 0;\n    mid = (mid + Math.imul(ah4, bl4)) | 0;\n    hi = (hi + Math.imul(ah4, bh4)) | 0;\n    lo = (lo + Math.imul(al3, bl5)) | 0;\n    mid = (mid + Math.imul(al3, bh5)) | 0;\n    mid = (mid + Math.imul(ah3, bl5)) | 0;\n    hi = (hi + Math.imul(ah3, bh5)) | 0;\n    lo = (lo + Math.imul(al2, bl6)) | 0;\n    mid = (mid + Math.imul(al2, bh6)) | 0;\n    mid = (mid + Math.imul(ah2, bl6)) | 0;\n    hi = (hi + Math.imul(ah2, bh6)) | 0;\n    lo = (lo + Math.imul(al1, bl7)) | 0;\n    mid = (mid + Math.imul(al1, bh7)) | 0;\n    mid = (mid + Math.imul(ah1, bl7)) | 0;\n    hi = (hi + Math.imul(ah1, bh7)) | 0;\n    lo = (lo + Math.imul(al0, bl8)) | 0;\n    mid = (mid + Math.imul(al0, bh8)) | 0;\n    mid = (mid + Math.imul(ah0, bl8)) | 0;\n    hi = (hi + Math.imul(ah0, bh8)) | 0;\n    var w8 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w8 >>> 26)) | 0;\n    w8 &= 0x3ffffff;\n    /* k = 9 */\n    lo = Math.imul(al9, bl0);\n    mid = Math.imul(al9, bh0);\n    mid = (mid + Math.imul(ah9, bl0)) | 0;\n    hi = Math.imul(ah9, bh0);\n    lo = (lo + Math.imul(al8, bl1)) | 0;\n    mid = (mid + Math.imul(al8, bh1)) | 0;\n    mid = (mid + Math.imul(ah8, bl1)) | 0;\n    hi = (hi + Math.imul(ah8, bh1)) | 0;\n    lo = (lo + Math.imul(al7, bl2)) | 0;\n    mid = (mid + Math.imul(al7, bh2)) | 0;\n    mid = (mid + Math.imul(ah7, bl2)) | 0;\n    hi = (hi + Math.imul(ah7, bh2)) | 0;\n    lo = (lo + Math.imul(al6, bl3)) | 0;\n    mid = (mid + Math.imul(al6, bh3)) | 0;\n    mid = (mid + Math.imul(ah6, bl3)) | 0;\n    hi = (hi + Math.imul(ah6, bh3)) | 0;\n    lo = (lo + Math.imul(al5, bl4)) | 0;\n    mid = (mid + Math.imul(al5, bh4)) | 0;\n    mid = (mid + Math.imul(ah5, bl4)) | 0;\n    hi = (hi + Math.imul(ah5, bh4)) | 0;\n    lo = (lo + Math.imul(al4, bl5)) | 0;\n    mid = (mid + Math.imul(al4, bh5)) | 0;\n    mid = (mid + Math.imul(ah4, bl5)) | 0;\n    hi = (hi + Math.imul(ah4, bh5)) | 0;\n    lo = (lo + Math.imul(al3, bl6)) | 0;\n    mid = (mid + Math.imul(al3, bh6)) | 0;\n    mid = (mid + Math.imul(ah3, bl6)) | 0;\n    hi = (hi + Math.imul(ah3, bh6)) | 0;\n    lo = (lo + Math.imul(al2, bl7)) | 0;\n    mid = (mid + Math.imul(al2, bh7)) | 0;\n    mid = (mid + Math.imul(ah2, bl7)) | 0;\n    hi = (hi + Math.imul(ah2, bh7)) | 0;\n    lo = (lo + Math.imul(al1, bl8)) | 0;\n    mid = (mid + Math.imul(al1, bh8)) | 0;\n    mid = (mid + Math.imul(ah1, bl8)) | 0;\n    hi = (hi + Math.imul(ah1, bh8)) | 0;\n    lo = (lo + Math.imul(al0, bl9)) | 0;\n    mid = (mid + Math.imul(al0, bh9)) | 0;\n    mid = (mid + Math.imul(ah0, bl9)) | 0;\n    hi = (hi + Math.imul(ah0, bh9)) | 0;\n    var w9 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w9 >>> 26)) | 0;\n    w9 &= 0x3ffffff;\n    /* k = 10 */\n    lo = Math.imul(al9, bl1);\n    mid = Math.imul(al9, bh1);\n    mid = (mid + Math.imul(ah9, bl1)) | 0;\n    hi = Math.imul(ah9, bh1);\n    lo = (lo + Math.imul(al8, bl2)) | 0;\n    mid = (mid + Math.imul(al8, bh2)) | 0;\n    mid = (mid + Math.imul(ah8, bl2)) | 0;\n    hi = (hi + Math.imul(ah8, bh2)) | 0;\n    lo = (lo + Math.imul(al7, bl3)) | 0;\n    mid = (mid + Math.imul(al7, bh3)) | 0;\n    mid = (mid + Math.imul(ah7, bl3)) | 0;\n    hi = (hi + Math.imul(ah7, bh3)) | 0;\n    lo = (lo + Math.imul(al6, bl4)) | 0;\n    mid = (mid + Math.imul(al6, bh4)) | 0;\n    mid = (mid + Math.imul(ah6, bl4)) | 0;\n    hi = (hi + Math.imul(ah6, bh4)) | 0;\n    lo = (lo + Math.imul(al5, bl5)) | 0;\n    mid = (mid + Math.imul(al5, bh5)) | 0;\n    mid = (mid + Math.imul(ah5, bl5)) | 0;\n    hi = (hi + Math.imul(ah5, bh5)) | 0;\n    lo = (lo + Math.imul(al4, bl6)) | 0;\n    mid = (mid + Math.imul(al4, bh6)) | 0;\n    mid = (mid + Math.imul(ah4, bl6)) | 0;\n    hi = (hi + Math.imul(ah4, bh6)) | 0;\n    lo = (lo + Math.imul(al3, bl7)) | 0;\n    mid = (mid + Math.imul(al3, bh7)) | 0;\n    mid = (mid + Math.imul(ah3, bl7)) | 0;\n    hi = (hi + Math.imul(ah3, bh7)) | 0;\n    lo = (lo + Math.imul(al2, bl8)) | 0;\n    mid = (mid + Math.imul(al2, bh8)) | 0;\n    mid = (mid + Math.imul(ah2, bl8)) | 0;\n    hi = (hi + Math.imul(ah2, bh8)) | 0;\n    lo = (lo + Math.imul(al1, bl9)) | 0;\n    mid = (mid + Math.imul(al1, bh9)) | 0;\n    mid = (mid + Math.imul(ah1, bl9)) | 0;\n    hi = (hi + Math.imul(ah1, bh9)) | 0;\n    var w10 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w10 >>> 26)) | 0;\n    w10 &= 0x3ffffff;\n    /* k = 11 */\n    lo = Math.imul(al9, bl2);\n    mid = Math.imul(al9, bh2);\n    mid = (mid + Math.imul(ah9, bl2)) | 0;\n    hi = Math.imul(ah9, bh2);\n    lo = (lo + Math.imul(al8, bl3)) | 0;\n    mid = (mid + Math.imul(al8, bh3)) | 0;\n    mid = (mid + Math.imul(ah8, bl3)) | 0;\n    hi = (hi + Math.imul(ah8, bh3)) | 0;\n    lo = (lo + Math.imul(al7, bl4)) | 0;\n    mid = (mid + Math.imul(al7, bh4)) | 0;\n    mid = (mid + Math.imul(ah7, bl4)) | 0;\n    hi = (hi + Math.imul(ah7, bh4)) | 0;\n    lo = (lo + Math.imul(al6, bl5)) | 0;\n    mid = (mid + Math.imul(al6, bh5)) | 0;\n    mid = (mid + Math.imul(ah6, bl5)) | 0;\n    hi = (hi + Math.imul(ah6, bh5)) | 0;\n    lo = (lo + Math.imul(al5, bl6)) | 0;\n    mid = (mid + Math.imul(al5, bh6)) | 0;\n    mid = (mid + Math.imul(ah5, bl6)) | 0;\n    hi = (hi + Math.imul(ah5, bh6)) | 0;\n    lo = (lo + Math.imul(al4, bl7)) | 0;\n    mid = (mid + Math.imul(al4, bh7)) | 0;\n    mid = (mid + Math.imul(ah4, bl7)) | 0;\n    hi = (hi + Math.imul(ah4, bh7)) | 0;\n    lo = (lo + Math.imul(al3, bl8)) | 0;\n    mid = (mid + Math.imul(al3, bh8)) | 0;\n    mid = (mid + Math.imul(ah3, bl8)) | 0;\n    hi = (hi + Math.imul(ah3, bh8)) | 0;\n    lo = (lo + Math.imul(al2, bl9)) | 0;\n    mid = (mid + Math.imul(al2, bh9)) | 0;\n    mid = (mid + Math.imul(ah2, bl9)) | 0;\n    hi = (hi + Math.imul(ah2, bh9)) | 0;\n    var w11 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w11 >>> 26)) | 0;\n    w11 &= 0x3ffffff;\n    /* k = 12 */\n    lo = Math.imul(al9, bl3);\n    mid = Math.imul(al9, bh3);\n    mid = (mid + Math.imul(ah9, bl3)) | 0;\n    hi = Math.imul(ah9, bh3);\n    lo = (lo + Math.imul(al8, bl4)) | 0;\n    mid = (mid + Math.imul(al8, bh4)) | 0;\n    mid = (mid + Math.imul(ah8, bl4)) | 0;\n    hi = (hi + Math.imul(ah8, bh4)) | 0;\n    lo = (lo + Math.imul(al7, bl5)) | 0;\n    mid = (mid + Math.imul(al7, bh5)) | 0;\n    mid = (mid + Math.imul(ah7, bl5)) | 0;\n    hi = (hi + Math.imul(ah7, bh5)) | 0;\n    lo = (lo + Math.imul(al6, bl6)) | 0;\n    mid = (mid + Math.imul(al6, bh6)) | 0;\n    mid = (mid + Math.imul(ah6, bl6)) | 0;\n    hi = (hi + Math.imul(ah6, bh6)) | 0;\n    lo = (lo + Math.imul(al5, bl7)) | 0;\n    mid = (mid + Math.imul(al5, bh7)) | 0;\n    mid = (mid + Math.imul(ah5, bl7)) | 0;\n    hi = (hi + Math.imul(ah5, bh7)) | 0;\n    lo = (lo + Math.imul(al4, bl8)) | 0;\n    mid = (mid + Math.imul(al4, bh8)) | 0;\n    mid = (mid + Math.imul(ah4, bl8)) | 0;\n    hi = (hi + Math.imul(ah4, bh8)) | 0;\n    lo = (lo + Math.imul(al3, bl9)) | 0;\n    mid = (mid + Math.imul(al3, bh9)) | 0;\n    mid = (mid + Math.imul(ah3, bl9)) | 0;\n    hi = (hi + Math.imul(ah3, bh9)) | 0;\n    var w12 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w12 >>> 26)) | 0;\n    w12 &= 0x3ffffff;\n    /* k = 13 */\n    lo = Math.imul(al9, bl4);\n    mid = Math.imul(al9, bh4);\n    mid = (mid + Math.imul(ah9, bl4)) | 0;\n    hi = Math.imul(ah9, bh4);\n    lo = (lo + Math.imul(al8, bl5)) | 0;\n    mid = (mid + Math.imul(al8, bh5)) | 0;\n    mid = (mid + Math.imul(ah8, bl5)) | 0;\n    hi = (hi + Math.imul(ah8, bh5)) | 0;\n    lo = (lo + Math.imul(al7, bl6)) | 0;\n    mid = (mid + Math.imul(al7, bh6)) | 0;\n    mid = (mid + Math.imul(ah7, bl6)) | 0;\n    hi = (hi + Math.imul(ah7, bh6)) | 0;\n    lo = (lo + Math.imul(al6, bl7)) | 0;\n    mid = (mid + Math.imul(al6, bh7)) | 0;\n    mid = (mid + Math.imul(ah6, bl7)) | 0;\n    hi = (hi + Math.imul(ah6, bh7)) | 0;\n    lo = (lo + Math.imul(al5, bl8)) | 0;\n    mid = (mid + Math.imul(al5, bh8)) | 0;\n    mid = (mid + Math.imul(ah5, bl8)) | 0;\n    hi = (hi + Math.imul(ah5, bh8)) | 0;\n    lo = (lo + Math.imul(al4, bl9)) | 0;\n    mid = (mid + Math.imul(al4, bh9)) | 0;\n    mid = (mid + Math.imul(ah4, bl9)) | 0;\n    hi = (hi + Math.imul(ah4, bh9)) | 0;\n    var w13 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w13 >>> 26)) | 0;\n    w13 &= 0x3ffffff;\n    /* k = 14 */\n    lo = Math.imul(al9, bl5);\n    mid = Math.imul(al9, bh5);\n    mid = (mid + Math.imul(ah9, bl5)) | 0;\n    hi = Math.imul(ah9, bh5);\n    lo = (lo + Math.imul(al8, bl6)) | 0;\n    mid = (mid + Math.imul(al8, bh6)) | 0;\n    mid = (mid + Math.imul(ah8, bl6)) | 0;\n    hi = (hi + Math.imul(ah8, bh6)) | 0;\n    lo = (lo + Math.imul(al7, bl7)) | 0;\n    mid = (mid + Math.imul(al7, bh7)) | 0;\n    mid = (mid + Math.imul(ah7, bl7)) | 0;\n    hi = (hi + Math.imul(ah7, bh7)) | 0;\n    lo = (lo + Math.imul(al6, bl8)) | 0;\n    mid = (mid + Math.imul(al6, bh8)) | 0;\n    mid = (mid + Math.imul(ah6, bl8)) | 0;\n    hi = (hi + Math.imul(ah6, bh8)) | 0;\n    lo = (lo + Math.imul(al5, bl9)) | 0;\n    mid = (mid + Math.imul(al5, bh9)) | 0;\n    mid = (mid + Math.imul(ah5, bl9)) | 0;\n    hi = (hi + Math.imul(ah5, bh9)) | 0;\n    var w14 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w14 >>> 26)) | 0;\n    w14 &= 0x3ffffff;\n    /* k = 15 */\n    lo = Math.imul(al9, bl6);\n    mid = Math.imul(al9, bh6);\n    mid = (mid + Math.imul(ah9, bl6)) | 0;\n    hi = Math.imul(ah9, bh6);\n    lo = (lo + Math.imul(al8, bl7)) | 0;\n    mid = (mid + Math.imul(al8, bh7)) | 0;\n    mid = (mid + Math.imul(ah8, bl7)) | 0;\n    hi = (hi + Math.imul(ah8, bh7)) | 0;\n    lo = (lo + Math.imul(al7, bl8)) | 0;\n    mid = (mid + Math.imul(al7, bh8)) | 0;\n    mid = (mid + Math.imul(ah7, bl8)) | 0;\n    hi = (hi + Math.imul(ah7, bh8)) | 0;\n    lo = (lo + Math.imul(al6, bl9)) | 0;\n    mid = (mid + Math.imul(al6, bh9)) | 0;\n    mid = (mid + Math.imul(ah6, bl9)) | 0;\n    hi = (hi + Math.imul(ah6, bh9)) | 0;\n    var w15 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w15 >>> 26)) | 0;\n    w15 &= 0x3ffffff;\n    /* k = 16 */\n    lo = Math.imul(al9, bl7);\n    mid = Math.imul(al9, bh7);\n    mid = (mid + Math.imul(ah9, bl7)) | 0;\n    hi = Math.imul(ah9, bh7);\n    lo = (lo + Math.imul(al8, bl8)) | 0;\n    mid = (mid + Math.imul(al8, bh8)) | 0;\n    mid = (mid + Math.imul(ah8, bl8)) | 0;\n    hi = (hi + Math.imul(ah8, bh8)) | 0;\n    lo = (lo + Math.imul(al7, bl9)) | 0;\n    mid = (mid + Math.imul(al7, bh9)) | 0;\n    mid = (mid + Math.imul(ah7, bl9)) | 0;\n    hi = (hi + Math.imul(ah7, bh9)) | 0;\n    var w16 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w16 >>> 26)) | 0;\n    w16 &= 0x3ffffff;\n    /* k = 17 */\n    lo = Math.imul(al9, bl8);\n    mid = Math.imul(al9, bh8);\n    mid = (mid + Math.imul(ah9, bl8)) | 0;\n    hi = Math.imul(ah9, bh8);\n    lo = (lo + Math.imul(al8, bl9)) | 0;\n    mid = (mid + Math.imul(al8, bh9)) | 0;\n    mid = (mid + Math.imul(ah8, bl9)) | 0;\n    hi = (hi + Math.imul(ah8, bh9)) | 0;\n    var w17 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w17 >>> 26)) | 0;\n    w17 &= 0x3ffffff;\n    /* k = 18 */\n    lo = Math.imul(al9, bl9);\n    mid = Math.imul(al9, bh9);\n    mid = (mid + Math.imul(ah9, bl9)) | 0;\n    hi = Math.imul(ah9, bh9);\n    var w18 = (((c + lo) | 0) + ((mid & 0x1fff) << 13)) | 0;\n    c = (((hi + (mid >>> 13)) | 0) + (w18 >>> 26)) | 0;\n    w18 &= 0x3ffffff;\n    o[0] = w0;\n    o[1] = w1;\n    o[2] = w2;\n    o[3] = w3;\n    o[4] = w4;\n    o[5] = w5;\n    o[6] = w6;\n    o[7] = w7;\n    o[8] = w8;\n    o[9] = w9;\n    o[10] = w10;\n    o[11] = w11;\n    o[12] = w12;\n    o[13] = w13;\n    o[14] = w14;\n    o[15] = w15;\n    o[16] = w16;\n    o[17] = w17;\n    o[18] = w18;\n    if (c !== 0) {\n      o[19] = c;\n      out.length++;\n    }\n    return out;\n  };\n\n  // Polyfill comb\n  if (!Math.imul) {\n    comb10MulTo = smallMulTo;\n  }\n\n  function bigMulTo (self, num, out) {\n    out.negative = num.negative ^ self.negative;\n    out.length = self.length + num.length;\n\n    var carry = 0;\n    var hncarry = 0;\n    for (var k = 0; k < out.length - 1; k++) {\n      // Sum all words with the same `i + j = k` and accumulate `ncarry`,\n      // note that ncarry could be >= 0x3ffffff\n      var ncarry = hncarry;\n      hncarry = 0;\n      var rword = carry & 0x3ffffff;\n      var maxJ = Math.min(k, num.length - 1);\n      for (var j = Math.max(0, k - self.length + 1); j <= maxJ; j++) {\n        var i = k - j;\n        var a = self.words[i] | 0;\n        var b = num.words[j] | 0;\n        var r = a * b;\n\n        var lo = r & 0x3ffffff;\n        ncarry = (ncarry + ((r / 0x4000000) | 0)) | 0;\n        lo = (lo + rword) | 0;\n        rword = lo & 0x3ffffff;\n        ncarry = (ncarry + (lo >>> 26)) | 0;\n\n        hncarry += ncarry >>> 26;\n        ncarry &= 0x3ffffff;\n      }\n      out.words[k] = rword;\n      carry = ncarry;\n      ncarry = hncarry;\n    }\n    if (carry !== 0) {\n      out.words[k] = carry;\n    } else {\n      out.length--;\n    }\n\n    return out.strip();\n  }\n\n  function jumboMulTo (self, num, out) {\n    var fftm = new FFTM();\n    return fftm.mulp(self, num, out);\n  }\n\n  BN.prototype.mulTo = function mulTo (num, out) {\n    var res;\n    var len = this.length + num.length;\n    if (this.length === 10 && num.length === 10) {\n      res = comb10MulTo(this, num, out);\n    } else if (len < 63) {\n      res = smallMulTo(this, num, out);\n    } else if (len < 1024) {\n      res = bigMulTo(this, num, out);\n    } else {\n      res = jumboMulTo(this, num, out);\n    }\n\n    return res;\n  };\n\n  // Cooley-Tukey algorithm for FFT\n  // slightly revisited to rely on looping instead of recursion\n\n  function FFTM (x, y) {\n    this.x = x;\n    this.y = y;\n  }\n\n  FFTM.prototype.makeRBT = function makeRBT (N) {\n    var t = new Array(N);\n    var l = BN.prototype._countBits(N) - 1;\n    for (var i = 0; i < N; i++) {\n      t[i] = this.revBin(i, l, N);\n    }\n\n    return t;\n  };\n\n  // Returns binary-reversed representation of `x`\n  FFTM.prototype.revBin = function revBin (x, l, N) {\n    if (x === 0 || x === N - 1) return x;\n\n    var rb = 0;\n    for (var i = 0; i < l; i++) {\n      rb |= (x & 1) << (l - i - 1);\n      x >>= 1;\n    }\n\n    return rb;\n  };\n\n  // Performs \"tweedling\" phase, therefore 'emulating'\n  // behaviour of the recursive algorithm\n  FFTM.prototype.permute = function permute (rbt, rws, iws, rtws, itws, N) {\n    for (var i = 0; i < N; i++) {\n      rtws[i] = rws[rbt[i]];\n      itws[i] = iws[rbt[i]];\n    }\n  };\n\n  FFTM.prototype.transform = function transform (rws, iws, rtws, itws, N, rbt) {\n    this.permute(rbt, rws, iws, rtws, itws, N);\n\n    for (var s = 1; s < N; s <<= 1) {\n      var l = s << 1;\n\n      var rtwdf = Math.cos(2 * Math.PI / l);\n      var itwdf = Math.sin(2 * Math.PI / l);\n\n      for (var p = 0; p < N; p += l) {\n        var rtwdf_ = rtwdf;\n        var itwdf_ = itwdf;\n\n        for (var j = 0; j < s; j++) {\n          var re = rtws[p + j];\n          var ie = itws[p + j];\n\n          var ro = rtws[p + j + s];\n          var io = itws[p + j + s];\n\n          var rx = rtwdf_ * ro - itwdf_ * io;\n\n          io = rtwdf_ * io + itwdf_ * ro;\n          ro = rx;\n\n          rtws[p + j] = re + ro;\n          itws[p + j] = ie + io;\n\n          rtws[p + j + s] = re - ro;\n          itws[p + j + s] = ie - io;\n\n          /* jshint maxdepth : false */\n          if (j !== l) {\n            rx = rtwdf * rtwdf_ - itwdf * itwdf_;\n\n            itwdf_ = rtwdf * itwdf_ + itwdf * rtwdf_;\n            rtwdf_ = rx;\n          }\n        }\n      }\n    }\n  };\n\n  FFTM.prototype.guessLen13b = function guessLen13b (n, m) {\n    var N = Math.max(m, n) | 1;\n    var odd = N & 1;\n    var i = 0;\n    for (N = N / 2 | 0; N; N = N >>> 1) {\n      i++;\n    }\n\n    return 1 << i + 1 + odd;\n  };\n\n  FFTM.prototype.conjugate = function conjugate (rws, iws, N) {\n    if (N <= 1) return;\n\n    for (var i = 0; i < N / 2; i++) {\n      var t = rws[i];\n\n      rws[i] = rws[N - i - 1];\n      rws[N - i - 1] = t;\n\n      t = iws[i];\n\n      iws[i] = -iws[N - i - 1];\n      iws[N - i - 1] = -t;\n    }\n  };\n\n  FFTM.prototype.normalize13b = function normalize13b (ws, N) {\n    var carry = 0;\n    for (var i = 0; i < N / 2; i++) {\n      var w = Math.round(ws[2 * i + 1] / N) * 0x2000 +\n        Math.round(ws[2 * i] / N) +\n        carry;\n\n      ws[i] = w & 0x3ffffff;\n\n      if (w < 0x4000000) {\n        carry = 0;\n      } else {\n        carry = w / 0x4000000 | 0;\n      }\n    }\n\n    return ws;\n  };\n\n  FFTM.prototype.convert13b = function convert13b (ws, len, rws, N) {\n    var carry = 0;\n    for (var i = 0; i < len; i++) {\n      carry = carry + (ws[i] | 0);\n\n      rws[2 * i] = carry & 0x1fff; carry = carry >>> 13;\n      rws[2 * i + 1] = carry & 0x1fff; carry = carry >>> 13;\n    }\n\n    // Pad with zeroes\n    for (i = 2 * len; i < N; ++i) {\n      rws[i] = 0;\n    }\n\n    assert(carry === 0);\n    assert((carry & ~0x1fff) === 0);\n  };\n\n  FFTM.prototype.stub = function stub (N) {\n    var ph = new Array(N);\n    for (var i = 0; i < N; i++) {\n      ph[i] = 0;\n    }\n\n    return ph;\n  };\n\n  FFTM.prototype.mulp = function mulp (x, y, out) {\n    var N = 2 * this.guessLen13b(x.length, y.length);\n\n    var rbt = this.makeRBT(N);\n\n    var _ = this.stub(N);\n\n    var rws = new Array(N);\n    var rwst = new Array(N);\n    var iwst = new Array(N);\n\n    var nrws = new Array(N);\n    var nrwst = new Array(N);\n    var niwst = new Array(N);\n\n    var rmws = out.words;\n    rmws.length = N;\n\n    this.convert13b(x.words, x.length, rws, N);\n    this.convert13b(y.words, y.length, nrws, N);\n\n    this.transform(rws, _, rwst, iwst, N, rbt);\n    this.transform(nrws, _, nrwst, niwst, N, rbt);\n\n    for (var i = 0; i < N; i++) {\n      var rx = rwst[i] * nrwst[i] - iwst[i] * niwst[i];\n      iwst[i] = rwst[i] * niwst[i] + iwst[i] * nrwst[i];\n      rwst[i] = rx;\n    }\n\n    this.conjugate(rwst, iwst, N);\n    this.transform(rwst, iwst, rmws, _, N, rbt);\n    this.conjugate(rmws, _, N);\n    this.normalize13b(rmws, N);\n\n    out.negative = x.negative ^ y.negative;\n    out.length = x.length + y.length;\n    return out.strip();\n  };\n\n  // Multiply `this` by `num`\n  BN.prototype.mul = function mul (num) {\n    var out = new BN(null);\n    out.words = new Array(this.length + num.length);\n    return this.mulTo(num, out);\n  };\n\n  // Multiply employing FFT\n  BN.prototype.mulf = function mulf (num) {\n    var out = new BN(null);\n    out.words = new Array(this.length + num.length);\n    return jumboMulTo(this, num, out);\n  };\n\n  // In-place Multiplication\n  BN.prototype.imul = function imul (num) {\n    return this.clone().mulTo(num, this);\n  };\n\n  BN.prototype.imuln = function imuln (num) {\n    assert(typeof num === 'number');\n    assert(num < 0x4000000);\n\n    // Carry\n    var carry = 0;\n    for (var i = 0; i < this.length; i++) {\n      var w = (this.words[i] | 0) * num;\n      var lo = (w & 0x3ffffff) + (carry & 0x3ffffff);\n      carry >>= 26;\n      carry += (w / 0x4000000) | 0;\n      // NOTE: lo is 27bit maximum\n      carry += lo >>> 26;\n      this.words[i] = lo & 0x3ffffff;\n    }\n\n    if (carry !== 0) {\n      this.words[i] = carry;\n      this.length++;\n    }\n\n    return this;\n  };\n\n  BN.prototype.muln = function muln (num) {\n    return this.clone().imuln(num);\n  };\n\n  // `this` * `this`\n  BN.prototype.sqr = function sqr () {\n    return this.mul(this);\n  };\n\n  // `this` * `this` in-place\n  BN.prototype.isqr = function isqr () {\n    return this.imul(this.clone());\n  };\n\n  // Math.pow(`this`, `num`)\n  BN.prototype.pow = function pow (num) {\n    var w = toBitArray(num);\n    if (w.length === 0) return new BN(1);\n\n    // Skip leading zeroes\n    var res = this;\n    for (var i = 0; i < w.length; i++, res = res.sqr()) {\n      if (w[i] !== 0) break;\n    }\n\n    if (++i < w.length) {\n      for (var q = res.sqr(); i < w.length; i++, q = q.sqr()) {\n        if (w[i] === 0) continue;\n\n        res = res.mul(q);\n      }\n    }\n\n    return res;\n  };\n\n  // Shift-left in-place\n  BN.prototype.iushln = function iushln (bits) {\n    assert(typeof bits === 'number' && bits >= 0);\n    var r = bits % 26;\n    var s = (bits - r) / 26;\n    var carryMask = (0x3ffffff >>> (26 - r)) << (26 - r);\n    var i;\n\n    if (r !== 0) {\n      var carry = 0;\n\n      for (i = 0; i < this.length; i++) {\n        var newCarry = this.words[i] & carryMask;\n        var c = ((this.words[i] | 0) - newCarry) << r;\n        this.words[i] = c | carry;\n        carry = newCarry >>> (26 - r);\n      }\n\n      if (carry) {\n        this.words[i] = carry;\n        this.length++;\n      }\n    }\n\n    if (s !== 0) {\n      for (i = this.length - 1; i >= 0; i--) {\n        this.words[i + s] = this.words[i];\n      }\n\n      for (i = 0; i < s; i++) {\n        this.words[i] = 0;\n      }\n\n      this.length += s;\n    }\n\n    return this.strip();\n  };\n\n  BN.prototype.ishln = function ishln (bits) {\n    // TODO(indutny): implement me\n    assert(this.negative === 0);\n    return this.iushln(bits);\n  };\n\n  // Shift-right in-place\n  // NOTE: `hint` is a lowest bit before trailing zeroes\n  // NOTE: if `extended` is present - it will be filled with destroyed bits\n  BN.prototype.iushrn = function iushrn (bits, hint, extended) {\n    assert(typeof bits === 'number' && bits >= 0);\n    var h;\n    if (hint) {\n      h = (hint - (hint % 26)) / 26;\n    } else {\n      h = 0;\n    }\n\n    var r = bits % 26;\n    var s = Math.min((bits - r) / 26, this.length);\n    var mask = 0x3ffffff ^ ((0x3ffffff >>> r) << r);\n    var maskedWords = extended;\n\n    h -= s;\n    h = Math.max(0, h);\n\n    // Extended mode, copy masked part\n    if (maskedWords) {\n      for (var i = 0; i < s; i++) {\n        maskedWords.words[i] = this.words[i];\n      }\n      maskedWords.length = s;\n    }\n\n    if (s === 0) {\n      // No-op, we should not move anything at all\n    } else if (this.length > s) {\n      this.length -= s;\n      for (i = 0; i < this.length; i++) {\n        this.words[i] = this.words[i + s];\n      }\n    } else {\n      this.words[0] = 0;\n      this.length = 1;\n    }\n\n    var carry = 0;\n    for (i = this.length - 1; i >= 0 && (carry !== 0 || i >= h); i--) {\n      var word = this.words[i] | 0;\n      this.words[i] = (carry << (26 - r)) | (word >>> r);\n      carry = word & mask;\n    }\n\n    // Push carried bits as a mask\n    if (maskedWords && carry !== 0) {\n      maskedWords.words[maskedWords.length++] = carry;\n    }\n\n    if (this.length === 0) {\n      this.words[0] = 0;\n      this.length = 1;\n    }\n\n    return this.strip();\n  };\n\n  BN.prototype.ishrn = function ishrn (bits, hint, extended) {\n    // TODO(indutny): implement me\n    assert(this.negative === 0);\n    return this.iushrn(bits, hint, extended);\n  };\n\n  // Shift-left\n  BN.prototype.shln = function shln (bits) {\n    return this.clone().ishln(bits);\n  };\n\n  BN.prototype.ushln = function ushln (bits) {\n    return this.clone().iushln(bits);\n  };\n\n  // Shift-right\n  BN.prototype.shrn = function shrn (bits) {\n    return this.clone().ishrn(bits);\n  };\n\n  BN.prototype.ushrn = function ushrn (bits) {\n    return this.clone().iushrn(bits);\n  };\n\n  // Test if n bit is set\n  BN.prototype.testn = function testn (bit) {\n    assert(typeof bit === 'number' && bit >= 0);\n    var r = bit % 26;\n    var s = (bit - r) / 26;\n    var q = 1 << r;\n\n    // Fast case: bit is much higher than all existing words\n    if (this.length <= s) return false;\n\n    // Check bit and return\n    var w = this.words[s];\n\n    return !!(w & q);\n  };\n\n  // Return only lowers bits of number (in-place)\n  BN.prototype.imaskn = function imaskn (bits) {\n    assert(typeof bits === 'number' && bits >= 0);\n    var r = bits % 26;\n    var s = (bits - r) / 26;\n\n    assert(this.negative === 0, 'imaskn works only with positive numbers');\n\n    if (this.length <= s) {\n      return this;\n    }\n\n    if (r !== 0) {\n      s++;\n    }\n    this.length = Math.min(s, this.length);\n\n    if (r !== 0) {\n      var mask = 0x3ffffff ^ ((0x3ffffff >>> r) << r);\n      this.words[this.length - 1] &= mask;\n    }\n\n    return this.strip();\n  };\n\n  // Return only lowers bits of number\n  BN.prototype.maskn = function maskn (bits) {\n    return this.clone().imaskn(bits);\n  };\n\n  // Add plain number `num` to `this`\n  BN.prototype.iaddn = function iaddn (num) {\n    assert(typeof num === 'number');\n    assert(num < 0x4000000);\n    if (num < 0) return this.isubn(-num);\n\n    // Possible sign change\n    if (this.negative !== 0) {\n      if (this.length === 1 && (this.words[0] | 0) < num) {\n        this.words[0] = num - (this.words[0] | 0);\n        this.negative = 0;\n        return this;\n      }\n\n      this.negative = 0;\n      this.isubn(num);\n      this.negative = 1;\n      return this;\n    }\n\n    // Add without checks\n    return this._iaddn(num);\n  };\n\n  BN.prototype._iaddn = function _iaddn (num) {\n    this.words[0] += num;\n\n    // Carry\n    for (var i = 0; i < this.length && this.words[i] >= 0x4000000; i++) {\n      this.words[i] -= 0x4000000;\n      if (i === this.length - 1) {\n        this.words[i + 1] = 1;\n      } else {\n        this.words[i + 1]++;\n      }\n    }\n    this.length = Math.max(this.length, i + 1);\n\n    return this;\n  };\n\n  // Subtract plain number `num` from `this`\n  BN.prototype.isubn = function isubn (num) {\n    assert(typeof num === 'number');\n    assert(num < 0x4000000);\n    if (num < 0) return this.iaddn(-num);\n\n    if (this.negative !== 0) {\n      this.negative = 0;\n      this.iaddn(num);\n      this.negative = 1;\n      return this;\n    }\n\n    this.words[0] -= num;\n\n    if (this.length === 1 && this.words[0] < 0) {\n      this.words[0] = -this.words[0];\n      this.negative = 1;\n    } else {\n      // Carry\n      for (var i = 0; i < this.length && this.words[i] < 0; i++) {\n        this.words[i] += 0x4000000;\n        this.words[i + 1] -= 1;\n      }\n    }\n\n    return this.strip();\n  };\n\n  BN.prototype.addn = function addn (num) {\n    return this.clone().iaddn(num);\n  };\n\n  BN.prototype.subn = function subn (num) {\n    return this.clone().isubn(num);\n  };\n\n  BN.prototype.iabs = function iabs () {\n    this.negative = 0;\n\n    return this;\n  };\n\n  BN.prototype.abs = function abs () {\n    return this.clone().iabs();\n  };\n\n  BN.prototype._ishlnsubmul = function _ishlnsubmul (num, mul, shift) {\n    var len = num.length + shift;\n    var i;\n\n    this._expand(len);\n\n    var w;\n    var carry = 0;\n    for (i = 0; i < num.length; i++) {\n      w = (this.words[i + shift] | 0) + carry;\n      var right = (num.words[i] | 0) * mul;\n      w -= right & 0x3ffffff;\n      carry = (w >> 26) - ((right / 0x4000000) | 0);\n      this.words[i + shift] = w & 0x3ffffff;\n    }\n    for (; i < this.length - shift; i++) {\n      w = (this.words[i + shift] | 0) + carry;\n      carry = w >> 26;\n      this.words[i + shift] = w & 0x3ffffff;\n    }\n\n    if (carry === 0) return this.strip();\n\n    // Subtraction overflow\n    assert(carry === -1);\n    carry = 0;\n    for (i = 0; i < this.length; i++) {\n      w = -(this.words[i] | 0) + carry;\n      carry = w >> 26;\n      this.words[i] = w & 0x3ffffff;\n    }\n    this.negative = 1;\n\n    return this.strip();\n  };\n\n  BN.prototype._wordDiv = function _wordDiv (num, mode) {\n    var shift = this.length - num.length;\n\n    var a = this.clone();\n    var b = num;\n\n    // Normalize\n    var bhi = b.words[b.length - 1] | 0;\n    var bhiBits = this._countBits(bhi);\n    shift = 26 - bhiBits;\n    if (shift !== 0) {\n      b = b.ushln(shift);\n      a.iushln(shift);\n      bhi = b.words[b.length - 1] | 0;\n    }\n\n    // Initialize quotient\n    var m = a.length - b.length;\n    var q;\n\n    if (mode !== 'mod') {\n      q = new BN(null);\n      q.length = m + 1;\n      q.words = new Array(q.length);\n      for (var i = 0; i < q.length; i++) {\n        q.words[i] = 0;\n      }\n    }\n\n    var diff = a.clone()._ishlnsubmul(b, 1, m);\n    if (diff.negative === 0) {\n      a = diff;\n      if (q) {\n        q.words[m] = 1;\n      }\n    }\n\n    for (var j = m - 1; j >= 0; j--) {\n      var qj = (a.words[b.length + j] | 0) * 0x4000000 +\n        (a.words[b.length + j - 1] | 0);\n\n      // NOTE: (qj / bhi) is (0x3ffffff * 0x4000000 + 0x3ffffff) / 0x2000000 max\n      // (0x7ffffff)\n      qj = Math.min((qj / bhi) | 0, 0x3ffffff);\n\n      a._ishlnsubmul(b, qj, j);\n      while (a.negative !== 0) {\n        qj--;\n        a.negative = 0;\n        a._ishlnsubmul(b, 1, j);\n        if (!a.isZero()) {\n          a.negative ^= 1;\n        }\n      }\n      if (q) {\n        q.words[j] = qj;\n      }\n    }\n    if (q) {\n      q.strip();\n    }\n    a.strip();\n\n    // Denormalize\n    if (mode !== 'div' && shift !== 0) {\n      a.iushrn(shift);\n    }\n\n    return {\n      div: q || null,\n      mod: a\n    };\n  };\n\n  // NOTE: 1) `mode` can be set to `mod` to request mod only,\n  //       to `div` to request div only, or be absent to\n  //       request both div & mod\n  //       2) `positive` is true if unsigned mod is requested\n  BN.prototype.divmod = function divmod (num, mode, positive) {\n    assert(!num.isZero());\n\n    if (this.isZero()) {\n      return {\n        div: new BN(0),\n        mod: new BN(0)\n      };\n    }\n\n    var div, mod, res;\n    if (this.negative !== 0 && num.negative === 0) {\n      res = this.neg().divmod(num, mode);\n\n      if (mode !== 'mod') {\n        div = res.div.neg();\n      }\n\n      if (mode !== 'div') {\n        mod = res.mod.neg();\n        if (positive && mod.negative !== 0) {\n          mod.iadd(num);\n        }\n      }\n\n      return {\n        div: div,\n        mod: mod\n      };\n    }\n\n    if (this.negative === 0 && num.negative !== 0) {\n      res = this.divmod(num.neg(), mode);\n\n      if (mode !== 'mod') {\n        div = res.div.neg();\n      }\n\n      return {\n        div: div,\n        mod: res.mod\n      };\n    }\n\n    if ((this.negative & num.negative) !== 0) {\n      res = this.neg().divmod(num.neg(), mode);\n\n      if (mode !== 'div') {\n        mod = res.mod.neg();\n        if (positive && mod.negative !== 0) {\n          mod.isub(num);\n        }\n      }\n\n      return {\n        div: res.div,\n        mod: mod\n      };\n    }\n\n    // Both numbers are positive at this point\n\n    // Strip both numbers to approximate shift value\n    if (num.length > this.length || this.cmp(num) < 0) {\n      return {\n        div: new BN(0),\n        mod: this\n      };\n    }\n\n    // Very short reduction\n    if (num.length === 1) {\n      if (mode === 'div') {\n        return {\n          div: this.divn(num.words[0]),\n          mod: null\n        };\n      }\n\n      if (mode === 'mod') {\n        return {\n          div: null,\n          mod: new BN(this.modn(num.words[0]))\n        };\n      }\n\n      return {\n        div: this.divn(num.words[0]),\n        mod: new BN(this.modn(num.words[0]))\n      };\n    }\n\n    return this._wordDiv(num, mode);\n  };\n\n  // Find `this` / `num`\n  BN.prototype.div = function div (num) {\n    return this.divmod(num, 'div', false).div;\n  };\n\n  // Find `this` % `num`\n  BN.prototype.mod = function mod (num) {\n    return this.divmod(num, 'mod', false).mod;\n  };\n\n  BN.prototype.umod = function umod (num) {\n    return this.divmod(num, 'mod', true).mod;\n  };\n\n  // Find Round(`this` / `num`)\n  BN.prototype.divRound = function divRound (num) {\n    var dm = this.divmod(num);\n\n    // Fast case - exact division\n    if (dm.mod.isZero()) return dm.div;\n\n    var mod = dm.div.negative !== 0 ? dm.mod.isub(num) : dm.mod;\n\n    var half = num.ushrn(1);\n    var r2 = num.andln(1);\n    var cmp = mod.cmp(half);\n\n    // Round down\n    if (cmp < 0 || r2 === 1 && cmp === 0) return dm.div;\n\n    // Round up\n    return dm.div.negative !== 0 ? dm.div.isubn(1) : dm.div.iaddn(1);\n  };\n\n  BN.prototype.modn = function modn (num) {\n    assert(num <= 0x3ffffff);\n    var p = (1 << 26) % num;\n\n    var acc = 0;\n    for (var i = this.length - 1; i >= 0; i--) {\n      acc = (p * acc + (this.words[i] | 0)) % num;\n    }\n\n    return acc;\n  };\n\n  // In-place division by number\n  BN.prototype.idivn = function idivn (num) {\n    assert(num <= 0x3ffffff);\n\n    var carry = 0;\n    for (var i = this.length - 1; i >= 0; i--) {\n      var w = (this.words[i] | 0) + carry * 0x4000000;\n      this.words[i] = (w / num) | 0;\n      carry = w % num;\n    }\n\n    return this.strip();\n  };\n\n  BN.prototype.divn = function divn (num) {\n    return this.clone().idivn(num);\n  };\n\n  BN.prototype.egcd = function egcd (p) {\n    assert(p.negative === 0);\n    assert(!p.isZero());\n\n    var x = this;\n    var y = p.clone();\n\n    if (x.negative !== 0) {\n      x = x.umod(p);\n    } else {\n      x = x.clone();\n    }\n\n    // A * x + B * y = x\n    var A = new BN(1);\n    var B = new BN(0);\n\n    // C * x + D * y = y\n    var C = new BN(0);\n    var D = new BN(1);\n\n    var g = 0;\n\n    while (x.isEven() && y.isEven()) {\n      x.iushrn(1);\n      y.iushrn(1);\n      ++g;\n    }\n\n    var yp = y.clone();\n    var xp = x.clone();\n\n    while (!x.isZero()) {\n      for (var i = 0, im = 1; (x.words[0] & im) === 0 && i < 26; ++i, im <<= 1);\n      if (i > 0) {\n        x.iushrn(i);\n        while (i-- > 0) {\n          if (A.isOdd() || B.isOdd()) {\n            A.iadd(yp);\n            B.isub(xp);\n          }\n\n          A.iushrn(1);\n          B.iushrn(1);\n        }\n      }\n\n      for (var j = 0, jm = 1; (y.words[0] & jm) === 0 && j < 26; ++j, jm <<= 1);\n      if (j > 0) {\n        y.iushrn(j);\n        while (j-- > 0) {\n          if (C.isOdd() || D.isOdd()) {\n            C.iadd(yp);\n            D.isub(xp);\n          }\n\n          C.iushrn(1);\n          D.iushrn(1);\n        }\n      }\n\n      if (x.cmp(y) >= 0) {\n        x.isub(y);\n        A.isub(C);\n        B.isub(D);\n      } else {\n        y.isub(x);\n        C.isub(A);\n        D.isub(B);\n      }\n    }\n\n    return {\n      a: C,\n      b: D,\n      gcd: y.iushln(g)\n    };\n  };\n\n  // This is reduced incarnation of the binary EEA\n  // above, designated to invert members of the\n  // _prime_ fields F(p) at a maximal speed\n  BN.prototype._invmp = function _invmp (p) {\n    assert(p.negative === 0);\n    assert(!p.isZero());\n\n    var a = this;\n    var b = p.clone();\n\n    if (a.negative !== 0) {\n      a = a.umod(p);\n    } else {\n      a = a.clone();\n    }\n\n    var x1 = new BN(1);\n    var x2 = new BN(0);\n\n    var delta = b.clone();\n\n    while (a.cmpn(1) > 0 && b.cmpn(1) > 0) {\n      for (var i = 0, im = 1; (a.words[0] & im) === 0 && i < 26; ++i, im <<= 1);\n      if (i > 0) {\n        a.iushrn(i);\n        while (i-- > 0) {\n          if (x1.isOdd()) {\n            x1.iadd(delta);\n          }\n\n          x1.iushrn(1);\n        }\n      }\n\n      for (var j = 0, jm = 1; (b.words[0] & jm) === 0 && j < 26; ++j, jm <<= 1);\n      if (j > 0) {\n        b.iushrn(j);\n        while (j-- > 0) {\n          if (x2.isOdd()) {\n            x2.iadd(delta);\n          }\n\n          x2.iushrn(1);\n        }\n      }\n\n      if (a.cmp(b) >= 0) {\n        a.isub(b);\n        x1.isub(x2);\n      } else {\n        b.isub(a);\n        x2.isub(x1);\n      }\n    }\n\n    var res;\n    if (a.cmpn(1) === 0) {\n      res = x1;\n    } else {\n      res = x2;\n    }\n\n    if (res.cmpn(0) < 0) {\n      res.iadd(p);\n    }\n\n    return res;\n  };\n\n  BN.prototype.gcd = function gcd (num) {\n    if (this.isZero()) return num.abs();\n    if (num.isZero()) return this.abs();\n\n    var a = this.clone();\n    var b = num.clone();\n    a.negative = 0;\n    b.negative = 0;\n\n    // Remove common factor of two\n    for (var shift = 0; a.isEven() && b.isEven(); shift++) {\n      a.iushrn(1);\n      b.iushrn(1);\n    }\n\n    do {\n      while (a.isEven()) {\n        a.iushrn(1);\n      }\n      while (b.isEven()) {\n        b.iushrn(1);\n      }\n\n      var r = a.cmp(b);\n      if (r < 0) {\n        // Swap `a` and `b` to make `a` always bigger than `b`\n        var t = a;\n        a = b;\n        b = t;\n      } else if (r === 0 || b.cmpn(1) === 0) {\n        break;\n      }\n\n      a.isub(b);\n    } while (true);\n\n    return b.iushln(shift);\n  };\n\n  // Invert number in the field F(num)\n  BN.prototype.invm = function invm (num) {\n    return this.egcd(num).a.umod(num);\n  };\n\n  BN.prototype.isEven = function isEven () {\n    return (this.words[0] & 1) === 0;\n  };\n\n  BN.prototype.isOdd = function isOdd () {\n    return (this.words[0] & 1) === 1;\n  };\n\n  // And first word and num\n  BN.prototype.andln = function andln (num) {\n    return this.words[0] & num;\n  };\n\n  // Increment at the bit position in-line\n  BN.prototype.bincn = function bincn (bit) {\n    assert(typeof bit === 'number');\n    var r = bit % 26;\n    var s = (bit - r) / 26;\n    var q = 1 << r;\n\n    // Fast case: bit is much higher than all existing words\n    if (this.length <= s) {\n      this._expand(s + 1);\n      this.words[s] |= q;\n      return this;\n    }\n\n    // Add bit and propagate, if needed\n    var carry = q;\n    for (var i = s; carry !== 0 && i < this.length; i++) {\n      var w = this.words[i] | 0;\n      w += carry;\n      carry = w >>> 26;\n      w &= 0x3ffffff;\n      this.words[i] = w;\n    }\n    if (carry !== 0) {\n      this.words[i] = carry;\n      this.length++;\n    }\n    return this;\n  };\n\n  BN.prototype.isZero = function isZero () {\n    return this.length === 1 && this.words[0] === 0;\n  };\n\n  BN.prototype.cmpn = function cmpn (num) {\n    var negative = num < 0;\n\n    if (this.negative !== 0 && !negative) return -1;\n    if (this.negative === 0 && negative) return 1;\n\n    this.strip();\n\n    var res;\n    if (this.length > 1) {\n      res = 1;\n    } else {\n      if (negative) {\n        num = -num;\n      }\n\n      assert(num <= 0x3ffffff, 'Number is too big');\n\n      var w = this.words[0] | 0;\n      res = w === num ? 0 : w < num ? -1 : 1;\n    }\n    if (this.negative !== 0) return -res | 0;\n    return res;\n  };\n\n  // Compare two numbers and return:\n  // 1 - if `this` > `num`\n  // 0 - if `this` == `num`\n  // -1 - if `this` < `num`\n  BN.prototype.cmp = function cmp (num) {\n    if (this.negative !== 0 && num.negative === 0) return -1;\n    if (this.negative === 0 && num.negative !== 0) return 1;\n\n    var res = this.ucmp(num);\n    if (this.negative !== 0) return -res | 0;\n    return res;\n  };\n\n  // Unsigned comparison\n  BN.prototype.ucmp = function ucmp (num) {\n    // At this point both numbers have the same sign\n    if (this.length > num.length) return 1;\n    if (this.length < num.length) return -1;\n\n    var res = 0;\n    for (var i = this.length - 1; i >= 0; i--) {\n      var a = this.words[i] | 0;\n      var b = num.words[i] | 0;\n\n      if (a === b) continue;\n      if (a < b) {\n        res = -1;\n      } else if (a > b) {\n        res = 1;\n      }\n      break;\n    }\n    return res;\n  };\n\n  BN.prototype.gtn = function gtn (num) {\n    return this.cmpn(num) === 1;\n  };\n\n  BN.prototype.gt = function gt (num) {\n    return this.cmp(num) === 1;\n  };\n\n  BN.prototype.gten = function gten (num) {\n    return this.cmpn(num) >= 0;\n  };\n\n  BN.prototype.gte = function gte (num) {\n    return this.cmp(num) >= 0;\n  };\n\n  BN.prototype.ltn = function ltn (num) {\n    return this.cmpn(num) === -1;\n  };\n\n  BN.prototype.lt = function lt (num) {\n    return this.cmp(num) === -1;\n  };\n\n  BN.prototype.lten = function lten (num) {\n    return this.cmpn(num) <= 0;\n  };\n\n  BN.prototype.lte = function lte (num) {\n    return this.cmp(num) <= 0;\n  };\n\n  BN.prototype.eqn = function eqn (num) {\n    return this.cmpn(num) === 0;\n  };\n\n  BN.prototype.eq = function eq (num) {\n    return this.cmp(num) === 0;\n  };\n\n  //\n  // A reduce context, could be using montgomery or something better, depending\n  // on the `m` itself.\n  //\n  BN.red = function red (num) {\n    return new Red(num);\n  };\n\n  BN.prototype.toRed = function toRed (ctx) {\n    assert(!this.red, 'Already a number in reduction context');\n    assert(this.negative === 0, 'red works only with positives');\n    return ctx.convertTo(this)._forceRed(ctx);\n  };\n\n  BN.prototype.fromRed = function fromRed () {\n    assert(this.red, 'fromRed works only with numbers in reduction context');\n    return this.red.convertFrom(this);\n  };\n\n  BN.prototype._forceRed = function _forceRed (ctx) {\n    this.red = ctx;\n    return this;\n  };\n\n  BN.prototype.forceRed = function forceRed (ctx) {\n    assert(!this.red, 'Already a number in reduction context');\n    return this._forceRed(ctx);\n  };\n\n  BN.prototype.redAdd = function redAdd (num) {\n    assert(this.red, 'redAdd works only with red numbers');\n    return this.red.add(this, num);\n  };\n\n  BN.prototype.redIAdd = function redIAdd (num) {\n    assert(this.red, 'redIAdd works only with red numbers');\n    return this.red.iadd(this, num);\n  };\n\n  BN.prototype.redSub = function redSub (num) {\n    assert(this.red, 'redSub works only with red numbers');\n    return this.red.sub(this, num);\n  };\n\n  BN.prototype.redISub = function redISub (num) {\n    assert(this.red, 'redISub works only with red numbers');\n    return this.red.isub(this, num);\n  };\n\n  BN.prototype.redShl = function redShl (num) {\n    assert(this.red, 'redShl works only with red numbers');\n    return this.red.shl(this, num);\n  };\n\n  BN.prototype.redMul = function redMul (num) {\n    assert(this.red, 'redMul works only with red numbers');\n    this.red._verify2(this, num);\n    return this.red.mul(this, num);\n  };\n\n  BN.prototype.redIMul = function redIMul (num) {\n    assert(this.red, 'redMul works only with red numbers');\n    this.red._verify2(this, num);\n    return this.red.imul(this, num);\n  };\n\n  BN.prototype.redSqr = function redSqr () {\n    assert(this.red, 'redSqr works only with red numbers');\n    this.red._verify1(this);\n    return this.red.sqr(this);\n  };\n\n  BN.prototype.redISqr = function redISqr () {\n    assert(this.red, 'redISqr works only with red numbers');\n    this.red._verify1(this);\n    return this.red.isqr(this);\n  };\n\n  // Square root over p\n  BN.prototype.redSqrt = function redSqrt () {\n    assert(this.red, 'redSqrt works only with red numbers');\n    this.red._verify1(this);\n    return this.red.sqrt(this);\n  };\n\n  BN.prototype.redInvm = function redInvm () {\n    assert(this.red, 'redInvm works only with red numbers');\n    this.red._verify1(this);\n    return this.red.invm(this);\n  };\n\n  // Return negative clone of `this` % `red modulo`\n  BN.prototype.redNeg = function redNeg () {\n    assert(this.red, 'redNeg works only with red numbers');\n    this.red._verify1(this);\n    return this.red.neg(this);\n  };\n\n  BN.prototype.redPow = function redPow (num) {\n    assert(this.red && !num.red, 'redPow(normalNum)');\n    this.red._verify1(this);\n    return this.red.pow(this, num);\n  };\n\n  // Prime numbers with efficient reduction\n  var primes = {\n    k256: null,\n    p224: null,\n    p192: null,\n    p25519: null\n  };\n\n  // Pseudo-Mersenne prime\n  function MPrime (name, p) {\n    // P = 2 ^ N - K\n    this.name = name;\n    this.p = new BN(p, 16);\n    this.n = this.p.bitLength();\n    this.k = new BN(1).iushln(this.n).isub(this.p);\n\n    this.tmp = this._tmp();\n  }\n\n  MPrime.prototype._tmp = function _tmp () {\n    var tmp = new BN(null);\n    tmp.words = new Array(Math.ceil(this.n / 13));\n    return tmp;\n  };\n\n  MPrime.prototype.ireduce = function ireduce (num) {\n    // Assumes that `num` is less than `P^2`\n    // num = HI * (2 ^ N - K) + HI * K + LO = HI * K + LO (mod P)\n    var r = num;\n    var rlen;\n\n    do {\n      this.split(r, this.tmp);\n      r = this.imulK(r);\n      r = r.iadd(this.tmp);\n      rlen = r.bitLength();\n    } while (rlen > this.n);\n\n    var cmp = rlen < this.n ? -1 : r.ucmp(this.p);\n    if (cmp === 0) {\n      r.words[0] = 0;\n      r.length = 1;\n    } else if (cmp > 0) {\n      r.isub(this.p);\n    } else {\n      if (r.strip !== undefined) {\n        // r is BN v4 instance\n        r.strip();\n      } else {\n        // r is BN v5 instance\n        r._strip();\n      }\n    }\n\n    return r;\n  };\n\n  MPrime.prototype.split = function split (input, out) {\n    input.iushrn(this.n, 0, out);\n  };\n\n  MPrime.prototype.imulK = function imulK (num) {\n    return num.imul(this.k);\n  };\n\n  function K256 () {\n    MPrime.call(\n      this,\n      'k256',\n      'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f');\n  }\n  inherits(K256, MPrime);\n\n  K256.prototype.split = function split (input, output) {\n    // 256 = 9 * 26 + 22\n    var mask = 0x3fffff;\n\n    var outLen = Math.min(input.length, 9);\n    for (var i = 0; i < outLen; i++) {\n      output.words[i] = input.words[i];\n    }\n    output.length = outLen;\n\n    if (input.length <= 9) {\n      input.words[0] = 0;\n      input.length = 1;\n      return;\n    }\n\n    // Shift by 9 limbs\n    var prev = input.words[9];\n    output.words[output.length++] = prev & mask;\n\n    for (i = 10; i < input.length; i++) {\n      var next = input.words[i] | 0;\n      input.words[i - 10] = ((next & mask) << 4) | (prev >>> 22);\n      prev = next;\n    }\n    prev >>>= 22;\n    input.words[i - 10] = prev;\n    if (prev === 0 && input.length > 10) {\n      input.length -= 10;\n    } else {\n      input.length -= 9;\n    }\n  };\n\n  K256.prototype.imulK = function imulK (num) {\n    // K = 0x1000003d1 = [ 0x40, 0x3d1 ]\n    num.words[num.length] = 0;\n    num.words[num.length + 1] = 0;\n    num.length += 2;\n\n    // bounded at: 0x40 * 0x3ffffff + 0x3d0 = 0x100000390\n    var lo = 0;\n    for (var i = 0; i < num.length; i++) {\n      var w = num.words[i] | 0;\n      lo += w * 0x3d1;\n      num.words[i] = lo & 0x3ffffff;\n      lo = w * 0x40 + ((lo / 0x4000000) | 0);\n    }\n\n    // Fast length reduction\n    if (num.words[num.length - 1] === 0) {\n      num.length--;\n      if (num.words[num.length - 1] === 0) {\n        num.length--;\n      }\n    }\n    return num;\n  };\n\n  function P224 () {\n    MPrime.call(\n      this,\n      'p224',\n      'ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001');\n  }\n  inherits(P224, MPrime);\n\n  function P192 () {\n    MPrime.call(\n      this,\n      'p192',\n      'ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff');\n  }\n  inherits(P192, MPrime);\n\n  function P25519 () {\n    // 2 ^ 255 - 19\n    MPrime.call(\n      this,\n      '25519',\n      '7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed');\n  }\n  inherits(P25519, MPrime);\n\n  P25519.prototype.imulK = function imulK (num) {\n    // K = 0x13\n    var carry = 0;\n    for (var i = 0; i < num.length; i++) {\n      var hi = (num.words[i] | 0) * 0x13 + carry;\n      var lo = hi & 0x3ffffff;\n      hi >>>= 26;\n\n      num.words[i] = lo;\n      carry = hi;\n    }\n    if (carry !== 0) {\n      num.words[num.length++] = carry;\n    }\n    return num;\n  };\n\n  // Exported mostly for testing purposes, use plain name instead\n  BN._prime = function prime (name) {\n    // Cached version of prime\n    if (primes[name]) return primes[name];\n\n    var prime;\n    if (name === 'k256') {\n      prime = new K256();\n    } else if (name === 'p224') {\n      prime = new P224();\n    } else if (name === 'p192') {\n      prime = new P192();\n    } else if (name === 'p25519') {\n      prime = new P25519();\n    } else {\n      throw new Error('Unknown prime ' + name);\n    }\n    primes[name] = prime;\n\n    return prime;\n  };\n\n  //\n  // Base reduction engine\n  //\n  function Red (m) {\n    if (typeof m === 'string') {\n      var prime = BN._prime(m);\n      this.m = prime.p;\n      this.prime = prime;\n    } else {\n      assert(m.gtn(1), 'modulus must be greater than 1');\n      this.m = m;\n      this.prime = null;\n    }\n  }\n\n  Red.prototype._verify1 = function _verify1 (a) {\n    assert(a.negative === 0, 'red works only with positives');\n    assert(a.red, 'red works only with red numbers');\n  };\n\n  Red.prototype._verify2 = function _verify2 (a, b) {\n    assert((a.negative | b.negative) === 0, 'red works only with positives');\n    assert(a.red && a.red === b.red,\n      'red works only with red numbers');\n  };\n\n  Red.prototype.imod = function imod (a) {\n    if (this.prime) return this.prime.ireduce(a)._forceRed(this);\n    return a.umod(this.m)._forceRed(this);\n  };\n\n  Red.prototype.neg = function neg (a) {\n    if (a.isZero()) {\n      return a.clone();\n    }\n\n    return this.m.sub(a)._forceRed(this);\n  };\n\n  Red.prototype.add = function add (a, b) {\n    this._verify2(a, b);\n\n    var res = a.add(b);\n    if (res.cmp(this.m) >= 0) {\n      res.isub(this.m);\n    }\n    return res._forceRed(this);\n  };\n\n  Red.prototype.iadd = function iadd (a, b) {\n    this._verify2(a, b);\n\n    var res = a.iadd(b);\n    if (res.cmp(this.m) >= 0) {\n      res.isub(this.m);\n    }\n    return res;\n  };\n\n  Red.prototype.sub = function sub (a, b) {\n    this._verify2(a, b);\n\n    var res = a.sub(b);\n    if (res.cmpn(0) < 0) {\n      res.iadd(this.m);\n    }\n    return res._forceRed(this);\n  };\n\n  Red.prototype.isub = function isub (a, b) {\n    this._verify2(a, b);\n\n    var res = a.isub(b);\n    if (res.cmpn(0) < 0) {\n      res.iadd(this.m);\n    }\n    return res;\n  };\n\n  Red.prototype.shl = function shl (a, num) {\n    this._verify1(a);\n    return this.imod(a.ushln(num));\n  };\n\n  Red.prototype.imul = function imul (a, b) {\n    this._verify2(a, b);\n    return this.imod(a.imul(b));\n  };\n\n  Red.prototype.mul = function mul (a, b) {\n    this._verify2(a, b);\n    return this.imod(a.mul(b));\n  };\n\n  Red.prototype.isqr = function isqr (a) {\n    return this.imul(a, a.clone());\n  };\n\n  Red.prototype.sqr = function sqr (a) {\n    return this.mul(a, a);\n  };\n\n  Red.prototype.sqrt = function sqrt (a) {\n    if (a.isZero()) return a.clone();\n\n    var mod3 = this.m.andln(3);\n    assert(mod3 % 2 === 1);\n\n    // Fast case\n    if (mod3 === 3) {\n      var pow = this.m.add(new BN(1)).iushrn(2);\n      return this.pow(a, pow);\n    }\n\n    // Tonelli-Shanks algorithm (Totally unoptimized and slow)\n    //\n    // Find Q and S, that Q * 2 ^ S = (P - 1)\n    var q = this.m.subn(1);\n    var s = 0;\n    while (!q.isZero() && q.andln(1) === 0) {\n      s++;\n      q.iushrn(1);\n    }\n    assert(!q.isZero());\n\n    var one = new BN(1).toRed(this);\n    var nOne = one.redNeg();\n\n    // Find quadratic non-residue\n    // NOTE: Max is such because of generalized Riemann hypothesis.\n    var lpow = this.m.subn(1).iushrn(1);\n    var z = this.m.bitLength();\n    z = new BN(2 * z * z).toRed(this);\n\n    while (this.pow(z, lpow).cmp(nOne) !== 0) {\n      z.redIAdd(nOne);\n    }\n\n    var c = this.pow(z, q);\n    var r = this.pow(a, q.addn(1).iushrn(1));\n    var t = this.pow(a, q);\n    var m = s;\n    while (t.cmp(one) !== 0) {\n      var tmp = t;\n      for (var i = 0; tmp.cmp(one) !== 0; i++) {\n        tmp = tmp.redSqr();\n      }\n      assert(i < m);\n      var b = this.pow(c, new BN(1).iushln(m - i - 1));\n\n      r = r.redMul(b);\n      c = b.redSqr();\n      t = t.redMul(c);\n      m = i;\n    }\n\n    return r;\n  };\n\n  Red.prototype.invm = function invm (a) {\n    var inv = a._invmp(this.m);\n    if (inv.negative !== 0) {\n      inv.negative = 0;\n      return this.imod(inv).redNeg();\n    } else {\n      return this.imod(inv);\n    }\n  };\n\n  Red.prototype.pow = function pow (a, num) {\n    if (num.isZero()) return new BN(1).toRed(this);\n    if (num.cmpn(1) === 0) return a.clone();\n\n    var windowSize = 4;\n    var wnd = new Array(1 << windowSize);\n    wnd[0] = new BN(1).toRed(this);\n    wnd[1] = a;\n    for (var i = 2; i < wnd.length; i++) {\n      wnd[i] = this.mul(wnd[i - 1], a);\n    }\n\n    var res = wnd[0];\n    var current = 0;\n    var currentLen = 0;\n    var start = num.bitLength() % 26;\n    if (start === 0) {\n      start = 26;\n    }\n\n    for (i = num.length - 1; i >= 0; i--) {\n      var word = num.words[i];\n      for (var j = start - 1; j >= 0; j--) {\n        var bit = (word >> j) & 1;\n        if (res !== wnd[0]) {\n          res = this.sqr(res);\n        }\n\n        if (bit === 0 && current === 0) {\n          currentLen = 0;\n          continue;\n        }\n\n        current <<= 1;\n        current |= bit;\n        currentLen++;\n        if (currentLen !== windowSize && (i !== 0 || j !== 0)) continue;\n\n        res = this.mul(res, wnd[current]);\n        currentLen = 0;\n        current = 0;\n      }\n      start = 26;\n    }\n\n    return res;\n  };\n\n  Red.prototype.convertTo = function convertTo (num) {\n    var r = num.umod(this.m);\n\n    return r === num ? r.clone() : r;\n  };\n\n  Red.prototype.convertFrom = function convertFrom (num) {\n    var res = num.clone();\n    res.red = null;\n    return res;\n  };\n\n  //\n  // Montgomery method engine\n  //\n\n  BN.mont = function mont (num) {\n    return new Mont(num);\n  };\n\n  function Mont (m) {\n    Red.call(this, m);\n\n    this.shift = this.m.bitLength();\n    if (this.shift % 26 !== 0) {\n      this.shift += 26 - (this.shift % 26);\n    }\n\n    this.r = new BN(1).iushln(this.shift);\n    this.r2 = this.imod(this.r.sqr());\n    this.rinv = this.r._invmp(this.m);\n\n    this.minv = this.rinv.mul(this.r).isubn(1).div(this.m);\n    this.minv = this.minv.umod(this.r);\n    this.minv = this.r.sub(this.minv);\n  }\n  inherits(Mont, Red);\n\n  Mont.prototype.convertTo = function convertTo (num) {\n    return this.imod(num.ushln(this.shift));\n  };\n\n  Mont.prototype.convertFrom = function convertFrom (num) {\n    var r = this.imod(num.mul(this.rinv));\n    r.red = null;\n    return r;\n  };\n\n  Mont.prototype.imul = function imul (a, b) {\n    if (a.isZero() || b.isZero()) {\n      a.words[0] = 0;\n      a.length = 1;\n      return a;\n    }\n\n    var t = a.imul(b);\n    var c = t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);\n    var u = t.isub(c).iushrn(this.shift);\n    var res = u;\n\n    if (u.cmp(this.m) >= 0) {\n      res = u.isub(this.m);\n    } else if (u.cmpn(0) < 0) {\n      res = u.iadd(this.m);\n    }\n\n    return res._forceRed(this);\n  };\n\n  Mont.prototype.mul = function mul (a, b) {\n    if (a.isZero() || b.isZero()) return new BN(0)._forceRed(this);\n\n    var t = a.mul(b);\n    var c = t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);\n    var u = t.isub(c).iushrn(this.shift);\n    var res = u;\n    if (u.cmp(this.m) >= 0) {\n      res = u.isub(this.m);\n    } else if (u.cmpn(0) < 0) {\n      res = u.iadd(this.m);\n    }\n\n    return res._forceRed(this);\n  };\n\n  Mont.prototype.invm = function invm (a) {\n    // (AR)^-1 * R^2 = (A^-1 * R^-1) * R^2 = A^-1 * R\n    var res = this.imod(a._invmp(this.m).mul(this.r2));\n    return res._forceRed(this);\n  };\n})(typeof module === 'undefined' || module, this);\n","var r;\n\nmodule.exports = function rand(len) {\n  if (!r)\n    r = new Rand(null);\n\n  return r.generate(len);\n};\n\nfunction Rand(rand) {\n  this.rand = rand;\n}\nmodule.exports.Rand = Rand;\n\nRand.prototype.generate = function generate(len) {\n  return this._rand(len);\n};\n\n// Emulate crypto API using randy\nRand.prototype._rand = function _rand(n) {\n  if (this.rand.getBytes)\n    return this.rand.getBytes(n);\n\n  var res = new Uint8Array(n);\n  for (var i = 0; i < res.length; i++)\n    res[i] = this.rand.getByte();\n  return res;\n};\n\nif (typeof self === 'object') {\n  if (self.crypto && self.crypto.getRandomValues) {\n    // Modern browsers\n    Rand.prototype._rand = function _rand(n) {\n      var arr = new Uint8Array(n);\n      self.crypto.getRandomValues(arr);\n      return arr;\n    };\n  } else if (self.msCrypto && self.msCrypto.getRandomValues) {\n    // IE\n    Rand.prototype._rand = function _rand(n) {\n      var arr = new Uint8Array(n);\n      self.msCrypto.getRandomValues(arr);\n      return arr;\n    };\n\n  // Safari's WebWorkers do not have `crypto`\n  } else if (typeof window === 'object') {\n    // Old junk\n    Rand.prototype._rand = function() {\n      throw new Error('Not implemented yet');\n    };\n  }\n} else {\n  // Node.js or Web worker with no crypto support\n  try {\n    var crypto = require('crypto');\n    if (typeof crypto.randomBytes !== 'function')\n      throw new Error('Not supported');\n\n    Rand.prototype._rand = function _rand(n) {\n      return crypto.randomBytes(n);\n    };\n  } catch (e) {\n  }\n}\n","var Buffer = require('buffer').Buffer;\n\nvar CRC_TABLE = [\n  0x00000000, 0x77073096, 0xee0e612c, 0x990951ba, 0x076dc419,\n  0x706af48f, 0xe963a535, 0x9e6495a3, 0x0edb8832, 0x79dcb8a4,\n  0xe0d5e91e, 0x97d2d988, 0x09b64c2b, 0x7eb17cbd, 0xe7b82d07,\n  0x90bf1d91, 0x1db71064, 0x6ab020f2, 0xf3b97148, 0x84be41de,\n  0x1adad47d, 0x6ddde4eb, 0xf4d4b551, 0x83d385c7, 0x136c9856,\n  0x646ba8c0, 0xfd62f97a, 0x8a65c9ec, 0x14015c4f, 0x63066cd9,\n  0xfa0f3d63, 0x8d080df5, 0x3b6e20c8, 0x4c69105e, 0xd56041e4,\n  0xa2677172, 0x3c03e4d1, 0x4b04d447, 0xd20d85fd, 0xa50ab56b,\n  0x35b5a8fa, 0x42b2986c, 0xdbbbc9d6, 0xacbcf940, 0x32d86ce3,\n  0x45df5c75, 0xdcd60dcf, 0xabd13d59, 0x26d930ac, 0x51de003a,\n  0xc8d75180, 0xbfd06116, 0x21b4f4b5, 0x56b3c423, 0xcfba9599,\n  0xb8bda50f, 0x2802b89e, 0x5f058808, 0xc60cd9b2, 0xb10be924,\n  0x2f6f7c87, 0x58684c11, 0xc1611dab, 0xb6662d3d, 0x76dc4190,\n  0x01db7106, 0x98d220bc, 0xefd5102a, 0x71b18589, 0x06b6b51f,\n  0x9fbfe4a5, 0xe8b8d433, 0x7807c9a2, 0x0f00f934, 0x9609a88e,\n  0xe10e9818, 0x7f6a0dbb, 0x086d3d2d, 0x91646c97, 0xe6635c01,\n  0x6b6b51f4, 0x1c6c6162, 0x856530d8, 0xf262004e, 0x6c0695ed,\n  0x1b01a57b, 0x8208f4c1, 0xf50fc457, 0x65b0d9c6, 0x12b7e950,\n  0x8bbeb8ea, 0xfcb9887c, 0x62dd1ddf, 0x15da2d49, 0x8cd37cf3,\n  0xfbd44c65, 0x4db26158, 0x3ab551ce, 0xa3bc0074, 0xd4bb30e2,\n  0x4adfa541, 0x3dd895d7, 0xa4d1c46d, 0xd3d6f4fb, 0x4369e96a,\n  0x346ed9fc, 0xad678846, 0xda60b8d0, 0x44042d73, 0x33031de5,\n  0xaa0a4c5f, 0xdd0d7cc9, 0x5005713c, 0x270241aa, 0xbe0b1010,\n  0xc90c2086, 0x5768b525, 0x206f85b3, 0xb966d409, 0xce61e49f,\n  0x5edef90e, 0x29d9c998, 0xb0d09822, 0xc7d7a8b4, 0x59b33d17,\n  0x2eb40d81, 0xb7bd5c3b, 0xc0ba6cad, 0xedb88320, 0x9abfb3b6,\n  0x03b6e20c, 0x74b1d29a, 0xead54739, 0x9dd277af, 0x04db2615,\n  0x73dc1683, 0xe3630b12, 0x94643b84, 0x0d6d6a3e, 0x7a6a5aa8,\n  0xe40ecf0b, 0x9309ff9d, 0x0a00ae27, 0x7d079eb1, 0xf00f9344,\n  0x8708a3d2, 0x1e01f268, 0x6906c2fe, 0xf762575d, 0x806567cb,\n  0x196c3671, 0x6e6b06e7, 0xfed41b76, 0x89d32be0, 0x10da7a5a,\n  0x67dd4acc, 0xf9b9df6f, 0x8ebeeff9, 0x17b7be43, 0x60b08ed5,\n  0xd6d6a3e8, 0xa1d1937e, 0x38d8c2c4, 0x4fdff252, 0xd1bb67f1,\n  0xa6bc5767, 0x3fb506dd, 0x48b2364b, 0xd80d2bda, 0xaf0a1b4c,\n  0x36034af6, 0x41047a60, 0xdf60efc3, 0xa867df55, 0x316e8eef,\n  0x4669be79, 0xcb61b38c, 0xbc66831a, 0x256fd2a0, 0x5268e236,\n  0xcc0c7795, 0xbb0b4703, 0x220216b9, 0x5505262f, 0xc5ba3bbe,\n  0xb2bd0b28, 0x2bb45a92, 0x5cb36a04, 0xc2d7ffa7, 0xb5d0cf31,\n  0x2cd99e8b, 0x5bdeae1d, 0x9b64c2b0, 0xec63f226, 0x756aa39c,\n  0x026d930a, 0x9c0906a9, 0xeb0e363f, 0x72076785, 0x05005713,\n  0x95bf4a82, 0xe2b87a14, 0x7bb12bae, 0x0cb61b38, 0x92d28e9b,\n  0xe5d5be0d, 0x7cdcefb7, 0x0bdbdf21, 0x86d3d2d4, 0xf1d4e242,\n  0x68ddb3f8, 0x1fda836e, 0x81be16cd, 0xf6b9265b, 0x6fb077e1,\n  0x18b74777, 0x88085ae6, 0xff0f6a70, 0x66063bca, 0x11010b5c,\n  0x8f659eff, 0xf862ae69, 0x616bffd3, 0x166ccf45, 0xa00ae278,\n  0xd70dd2ee, 0x4e048354, 0x3903b3c2, 0xa7672661, 0xd06016f7,\n  0x4969474d, 0x3e6e77db, 0xaed16a4a, 0xd9d65adc, 0x40df0b66,\n  0x37d83bf0, 0xa9bcae53, 0xdebb9ec5, 0x47b2cf7f, 0x30b5ffe9,\n  0xbdbdf21c, 0xcabac28a, 0x53b39330, 0x24b4a3a6, 0xbad03605,\n  0xcdd70693, 0x54de5729, 0x23d967bf, 0xb3667a2e, 0xc4614ab8,\n  0x5d681b02, 0x2a6f2b94, 0xb40bbe37, 0xc30c8ea1, 0x5a05df1b,\n  0x2d02ef8d\n];\n\nif (typeof Int32Array !== 'undefined') {\n  CRC_TABLE = new Int32Array(CRC_TABLE);\n}\n\nfunction ensureBuffer(input) {\n  if (Buffer.isBuffer(input)) {\n    return input;\n  }\n\n  var hasNewBufferAPI =\n      typeof Buffer.alloc === \"function\" &&\n      typeof Buffer.from === \"function\";\n\n  if (typeof input === \"number\") {\n    return hasNewBufferAPI ? Buffer.alloc(input) : new Buffer(input);\n  }\n  else if (typeof input === \"string\") {\n    return hasNewBufferAPI ? Buffer.from(input) : new Buffer(input);\n  }\n  else {\n    throw new Error(\"input must be buffer, number, or string, received \" +\n                    typeof input);\n  }\n}\n\nfunction bufferizeInt(num) {\n  var tmp = ensureBuffer(4);\n  tmp.writeInt32BE(num, 0);\n  return tmp;\n}\n\nfunction _crc32(buf, previous) {\n  buf = ensureBuffer(buf);\n  if (Buffer.isBuffer(previous)) {\n    previous = previous.readUInt32BE(0);\n  }\n  var crc = ~~previous ^ -1;\n  for (var n = 0; n < buf.length; n++) {\n    crc = CRC_TABLE[(crc ^ buf[n]) & 0xff] ^ (crc >>> 8);\n  }\n  return (crc ^ -1);\n}\n\nfunction crc32() {\n  return bufferizeInt(_crc32.apply(null, arguments));\n}\ncrc32.signed = function () {\n  return _crc32.apply(null, arguments);\n};\ncrc32.unsigned = function () {\n  return _crc32.apply(null, arguments) >>> 0;\n};\n\nmodule.exports = crc32;\n","export default function toInteger(dirtyNumber) {\n  if (dirtyNumber === null || dirtyNumber === true || dirtyNumber === false) {\n    return NaN;\n  }\n\n  var number = Number(dirtyNumber);\n\n  if (isNaN(number)) {\n    return number;\n  }\n\n  return number < 0 ? Math.ceil(number) : Math.floor(number);\n}","export default function requiredArgs(required, args) {\n  if (args.length < required) {\n    throw new TypeError(required + ' argument' + (required > 1 ? 's' : '') + ' required, but only ' + args.length + ' present');\n  }\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nimport requiredArgs from \"../_lib/requiredArgs/index.js\";\n/**\n * @name toDate\n * @category Common Helpers\n * @summary Convert the given argument to an instance of Date.\n *\n * @description\n * Convert the given argument to an instance of Date.\n *\n * If the argument is an instance of Date, the function returns its clone.\n *\n * If the argument is a number, it is treated as a timestamp.\n *\n * If the argument is none of the above, the function returns Invalid Date.\n *\n * **Note**: *all* Date arguments passed to any *date-fns* function is processed by `toDate`.\n *\n * @param {Date|Number} argument - the value to convert\n * @returns {Date} the parsed date in the local time zone\n * @throws {TypeError} 1 argument required\n *\n * @example\n * // Clone the date:\n * const result = toDate(new Date(2014, 1, 11, 11, 30, 30))\n * //=> Tue Feb 11 2014 11:30:30\n *\n * @example\n * // Convert the timestamp to date:\n * const result = toDate(1392098430000)\n * //=> Tue Feb 11 2014 11:30:30\n */\n\nexport default function toDate(argument) {\n  requiredArgs(1, arguments);\n  var argStr = Object.prototype.toString.call(argument); // Clone the date\n\n  if (argument instanceof Date || _typeof(argument) === 'object' && argStr === '[object Date]') {\n    // Prevent the date to lose the milliseconds when passed to new Date() in IE10\n    return new Date(argument.getTime());\n  } else if (typeof argument === 'number' || argStr === '[object Number]') {\n    return new Date(argument);\n  } else {\n    if ((typeof argument === 'string' || argStr === '[object String]') && typeof console !== 'undefined') {\n      // eslint-disable-next-line no-console\n      console.warn(\"Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments\"); // eslint-disable-next-line no-console\n\n      console.warn(new Error().stack);\n    }\n\n    return new Date(NaN);\n  }\n}","import toInteger from \"../_lib/toInteger/index.js\";\nimport toDate from \"../toDate/index.js\";\nimport requiredArgs from \"../_lib/requiredArgs/index.js\";\n/**\n * @name addMonths\n * @category Month Helpers\n * @summary Add the specified number of months to the given date.\n *\n * @description\n * Add the specified number of months to the given date.\n *\n * @param {Date|Number} date - the date to be changed\n * @param {Number} amount - the amount of months to be added. Positive decimals will be rounded using `Math.floor`, decimals less than zero will be rounded using `Math.ceil`.\n * @returns {Date} the new date with the months added\n * @throws {TypeError} 2 arguments required\n *\n * @example\n * // Add 5 months to 1 September 2014:\n * const result = addMonths(new Date(2014, 8, 1), 5)\n * //=> Sun Feb 01 2015 00:00:00\n */\n\nexport default function addMonths(dirtyDate, dirtyAmount) {\n  requiredArgs(2, arguments);\n  var date = toDate(dirtyDate);\n  var amount = toInteger(dirtyAmount);\n\n  if (isNaN(amount)) {\n    return new Date(NaN);\n  }\n\n  if (!amount) {\n    // If 0 months, no-op to avoid changing times in the hour before end of DST\n    return date;\n  }\n\n  var dayOfMonth = date.getDate(); // The JS Date object supports date math by accepting out-of-bounds values for\n  // month, day, etc. For example, new Date(2020, 0, 0) returns 31 Dec 2019 and\n  // new Date(2020, 13, 1) returns 1 Feb 2021.  This is *almost* the behavior we\n  // want except that dates will wrap around the end of a month, meaning that\n  // new Date(2020, 13, 31) will return 3 Mar 2021 not 28 Feb 2021 as desired. So\n  // we'll default to the end of the desired month by adding 1 to the desired\n  // month and using a date of 0 to back up one day to the end of the desired\n  // month.\n\n  var endOfDesiredMonth = new Date(date.getTime());\n  endOfDesiredMonth.setMonth(date.getMonth() + amount + 1, 0);\n  var daysInMonth = endOfDesiredMonth.getDate();\n\n  if (dayOfMonth >= daysInMonth) {\n    // If we're already at the end of the month, then this is the correct date\n    // and we're done.\n    return endOfDesiredMonth;\n  } else {\n    // Otherwise, we now know that setting the original day-of-month value won't\n    // cause an overflow, so set the desired day-of-month. Note that we can't\n    // just set the date of `endOfDesiredMonth` because that object may have had\n    // its time changed in the unusual case where where a DST transition was on\n    // the last day of the month and its local time was in the hour skipped or\n    // repeated next to a DST transition.  So we use `date` instead which is\n    // guaranteed to still have the original time.\n    date.setFullYear(endOfDesiredMonth.getFullYear(), endOfDesiredMonth.getMonth(), dayOfMonth);\n    return date;\n  }\n}","import toInteger from \"../_lib/toInteger/index.js\";\nimport addMonths from \"../addMonths/index.js\";\nimport requiredArgs from \"../_lib/requiredArgs/index.js\";\n/**\n * @name addYears\n * @category Year Helpers\n * @summary Add the specified number of years to the given date.\n *\n * @description\n * Add the specified number of years to the given date.\n *\n * @param {Date|Number} date - the date to be changed\n * @param {Number} amount - the amount of years to be added. Positive decimals will be rounded using `Math.floor`, decimals less than zero will be rounded using `Math.ceil`.\n * @returns {Date} the new date with the years added\n * @throws {TypeError} 2 arguments required\n *\n * @example\n * // Add 5 years to 1 September 2014:\n * const result = addYears(new Date(2014, 8, 1), 5)\n * //=> Sun Sep 01 2019 00:00:00\n */\n\nexport default function addYears(dirtyDate, dirtyAmount) {\n  requiredArgs(2, arguments);\n  var amount = toInteger(dirtyAmount);\n  return addMonths(dirtyDate, amount * 12);\n}","/* eslint-env browser */\n\n/**\n * This is the web browser implementation of `debug()`.\n */\n\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = localstorage();\nexports.destroy = (() => {\n\tlet warned = false;\n\n\treturn () => {\n\t\tif (!warned) {\n\t\t\twarned = true;\n\t\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t\t}\n\t};\n})();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n\t'#0000CC',\n\t'#0000FF',\n\t'#0033CC',\n\t'#0033FF',\n\t'#0066CC',\n\t'#0066FF',\n\t'#0099CC',\n\t'#0099FF',\n\t'#00CC00',\n\t'#00CC33',\n\t'#00CC66',\n\t'#00CC99',\n\t'#00CCCC',\n\t'#00CCFF',\n\t'#3300CC',\n\t'#3300FF',\n\t'#3333CC',\n\t'#3333FF',\n\t'#3366CC',\n\t'#3366FF',\n\t'#3399CC',\n\t'#3399FF',\n\t'#33CC00',\n\t'#33CC33',\n\t'#33CC66',\n\t'#33CC99',\n\t'#33CCCC',\n\t'#33CCFF',\n\t'#6600CC',\n\t'#6600FF',\n\t'#6633CC',\n\t'#6633FF',\n\t'#66CC00',\n\t'#66CC33',\n\t'#9900CC',\n\t'#9900FF',\n\t'#9933CC',\n\t'#9933FF',\n\t'#99CC00',\n\t'#99CC33',\n\t'#CC0000',\n\t'#CC0033',\n\t'#CC0066',\n\t'#CC0099',\n\t'#CC00CC',\n\t'#CC00FF',\n\t'#CC3300',\n\t'#CC3333',\n\t'#CC3366',\n\t'#CC3399',\n\t'#CC33CC',\n\t'#CC33FF',\n\t'#CC6600',\n\t'#CC6633',\n\t'#CC9900',\n\t'#CC9933',\n\t'#CCCC00',\n\t'#CCCC33',\n\t'#FF0000',\n\t'#FF0033',\n\t'#FF0066',\n\t'#FF0099',\n\t'#FF00CC',\n\t'#FF00FF',\n\t'#FF3300',\n\t'#FF3333',\n\t'#FF3366',\n\t'#FF3399',\n\t'#FF33CC',\n\t'#FF33FF',\n\t'#FF6600',\n\t'#FF6633',\n\t'#FF9900',\n\t'#FF9933',\n\t'#FFCC00',\n\t'#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\n// eslint-disable-next-line complexity\nfunction useColors() {\n\t// NB: In an Electron preload script, document will be defined but not fully\n\t// initialized. Since we know we're in Chrome, we'll just detect this case\n\t// explicitly\n\tif (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n\t\treturn true;\n\t}\n\n\t// Internet Explorer and Edge do not support colors.\n\tif (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n\t\treturn false;\n\t}\n\n\t// Is webkit? http://stackoverflow.com/a/16459606/376773\n\t// document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\treturn (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n\t\t// Is firebug? http://stackoverflow.com/a/398120/376773\n\t\t(typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n\t\t// Is firefox >= v31?\n\t\t// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n\t\t// Double check webkit in userAgent just in case we are in a worker\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n\targs[0] = (this.useColors ? '%c' : '') +\n\t\tthis.namespace +\n\t\t(this.useColors ? ' %c' : ' ') +\n\t\targs[0] +\n\t\t(this.useColors ? '%c ' : ' ') +\n\t\t'+' + module.exports.humanize(this.diff);\n\n\tif (!this.useColors) {\n\t\treturn;\n\t}\n\n\tconst c = 'color: ' + this.color;\n\targs.splice(1, 0, c, 'color: inherit');\n\n\t// The final \"%c\" is somewhat tricky, because there could be other\n\t// arguments passed either before or after the %c, so we need to\n\t// figure out the correct index to insert the CSS into\n\tlet index = 0;\n\tlet lastC = 0;\n\targs[0].replace(/%[a-zA-Z%]/g, match => {\n\t\tif (match === '%%') {\n\t\t\treturn;\n\t\t}\n\t\tindex++;\n\t\tif (match === '%c') {\n\t\t\t// We only are interested in the *last* %c\n\t\t\t// (the user may have provided their own)\n\t\t\tlastC = index;\n\t\t}\n\t});\n\n\targs.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.debug()` when available.\n * No-op when `console.debug` is not a \"function\".\n * If `console.debug` is not available, falls back\n * to `console.log`.\n *\n * @api public\n */\nexports.log = console.debug || console.log || (() => {});\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\nfunction save(namespaces) {\n\ttry {\n\t\tif (namespaces) {\n\t\t\texports.storage.setItem('debug', namespaces);\n\t\t} else {\n\t\t\texports.storage.removeItem('debug');\n\t\t}\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\nfunction load() {\n\tlet r;\n\ttry {\n\t\tr = exports.storage.getItem('debug');\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n\n\t// If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\tif (!r && typeof process !== 'undefined' && 'env' in process) {\n\t\tr = process.env.DEBUG;\n\t}\n\n\treturn r;\n}\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n\ttry {\n\t\t// TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n\t\t// The Browser also has localStorage in the global context.\n\t\treturn localStorage;\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\nmodule.exports = require('./common')(exports);\n\nconst {formatters} = module.exports;\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nformatters.j = function (v) {\n\ttry {\n\t\treturn JSON.stringify(v);\n\t} catch (error) {\n\t\treturn '[UnexpectedJSONParseError]: ' + error.message;\n\t}\n};\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n */\n\nfunction setup(env) {\n\tcreateDebug.debug = createDebug;\n\tcreateDebug.default = createDebug;\n\tcreateDebug.coerce = coerce;\n\tcreateDebug.disable = disable;\n\tcreateDebug.enable = enable;\n\tcreateDebug.enabled = enabled;\n\tcreateDebug.humanize = require('ms');\n\tcreateDebug.destroy = destroy;\n\n\tObject.keys(env).forEach(key => {\n\t\tcreateDebug[key] = env[key];\n\t});\n\n\t/**\n\t* The currently active debug mode names, and names to skip.\n\t*/\n\n\tcreateDebug.names = [];\n\tcreateDebug.skips = [];\n\n\t/**\n\t* Map of special \"%n\" handling functions, for the debug \"format\" argument.\n\t*\n\t* Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n\t*/\n\tcreateDebug.formatters = {};\n\n\t/**\n\t* Selects a color for a debug namespace\n\t* @param {String} namespace The namespace string for the debug instance to be colored\n\t* @return {Number|String} An ANSI color code for the given namespace\n\t* @api private\n\t*/\n\tfunction selectColor(namespace) {\n\t\tlet hash = 0;\n\n\t\tfor (let i = 0; i < namespace.length; i++) {\n\t\t\thash = ((hash << 5) - hash) + namespace.charCodeAt(i);\n\t\t\thash |= 0; // Convert to 32bit integer\n\t\t}\n\n\t\treturn createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n\t}\n\tcreateDebug.selectColor = selectColor;\n\n\t/**\n\t* Create a debugger with the given `namespace`.\n\t*\n\t* @param {String} namespace\n\t* @return {Function}\n\t* @api public\n\t*/\n\tfunction createDebug(namespace) {\n\t\tlet prevTime;\n\t\tlet enableOverride = null;\n\t\tlet namespacesCache;\n\t\tlet enabledCache;\n\n\t\tfunction debug(...args) {\n\t\t\t// Disabled?\n\t\t\tif (!debug.enabled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst self = debug;\n\n\t\t\t// Set `diff` timestamp\n\t\t\tconst curr = Number(new Date());\n\t\t\tconst ms = curr - (prevTime || curr);\n\t\t\tself.diff = ms;\n\t\t\tself.prev = prevTime;\n\t\t\tself.curr = curr;\n\t\t\tprevTime = curr;\n\n\t\t\targs[0] = createDebug.coerce(args[0]);\n\n\t\t\tif (typeof args[0] !== 'string') {\n\t\t\t\t// Anything else let's inspect with %O\n\t\t\t\targs.unshift('%O');\n\t\t\t}\n\n\t\t\t// Apply any `formatters` transformations\n\t\t\tlet index = 0;\n\t\t\targs[0] = args[0].replace(/%([a-zA-Z%])/g, (match, format) => {\n\t\t\t\t// If we encounter an escaped % then don't increase the array index\n\t\t\t\tif (match === '%%') {\n\t\t\t\t\treturn '%';\n\t\t\t\t}\n\t\t\t\tindex++;\n\t\t\t\tconst formatter = createDebug.formatters[format];\n\t\t\t\tif (typeof formatter === 'function') {\n\t\t\t\t\tconst val = args[index];\n\t\t\t\t\tmatch = formatter.call(self, val);\n\n\t\t\t\t\t// Now we need to remove `args[index]` since it's inlined in the `format`\n\t\t\t\t\targs.splice(index, 1);\n\t\t\t\t\tindex--;\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\t// Apply env-specific formatting (colors, etc.)\n\t\t\tcreateDebug.formatArgs.call(self, args);\n\n\t\t\tconst logFn = self.log || createDebug.log;\n\t\t\tlogFn.apply(self, args);\n\t\t}\n\n\t\tdebug.namespace = namespace;\n\t\tdebug.useColors = createDebug.useColors();\n\t\tdebug.color = createDebug.selectColor(namespace);\n\t\tdebug.extend = extend;\n\t\tdebug.destroy = createDebug.destroy; // XXX Temporary. Will be removed in the next major release.\n\n\t\tObject.defineProperty(debug, 'enabled', {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: false,\n\t\t\tget: () => {\n\t\t\t\tif (enableOverride !== null) {\n\t\t\t\t\treturn enableOverride;\n\t\t\t\t}\n\t\t\t\tif (namespacesCache !== createDebug.namespaces) {\n\t\t\t\t\tnamespacesCache = createDebug.namespaces;\n\t\t\t\t\tenabledCache = createDebug.enabled(namespace);\n\t\t\t\t}\n\n\t\t\t\treturn enabledCache;\n\t\t\t},\n\t\t\tset: v => {\n\t\t\t\tenableOverride = v;\n\t\t\t}\n\t\t});\n\n\t\t// Env-specific initialization logic for debug instances\n\t\tif (typeof createDebug.init === 'function') {\n\t\t\tcreateDebug.init(debug);\n\t\t}\n\n\t\treturn debug;\n\t}\n\n\tfunction extend(namespace, delimiter) {\n\t\tconst newDebug = createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n\t\tnewDebug.log = this.log;\n\t\treturn newDebug;\n\t}\n\n\t/**\n\t* Enables a debug mode by namespaces. This can include modes\n\t* separated by a colon and wildcards.\n\t*\n\t* @param {String} namespaces\n\t* @api public\n\t*/\n\tfunction enable(namespaces) {\n\t\tcreateDebug.save(namespaces);\n\t\tcreateDebug.namespaces = namespaces;\n\n\t\tcreateDebug.names = [];\n\t\tcreateDebug.skips = [];\n\n\t\tlet i;\n\t\tconst split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n\t\tconst len = split.length;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tif (!split[i]) {\n\t\t\t\t// ignore empty strings\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tnamespaces = split[i].replace(/\\*/g, '.*?');\n\n\t\t\tif (namespaces[0] === '-') {\n\t\t\t\tcreateDebug.skips.push(new RegExp('^' + namespaces.slice(1) + '$'));\n\t\t\t} else {\n\t\t\t\tcreateDebug.names.push(new RegExp('^' + namespaces + '$'));\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t* Disable debug output.\n\t*\n\t* @return {String} namespaces\n\t* @api public\n\t*/\n\tfunction disable() {\n\t\tconst namespaces = [\n\t\t\t...createDebug.names.map(toNamespace),\n\t\t\t...createDebug.skips.map(toNamespace).map(namespace => '-' + namespace)\n\t\t].join(',');\n\t\tcreateDebug.enable('');\n\t\treturn namespaces;\n\t}\n\n\t/**\n\t* Returns true if the given mode name is enabled, false otherwise.\n\t*\n\t* @param {String} name\n\t* @return {Boolean}\n\t* @api public\n\t*/\n\tfunction enabled(name) {\n\t\tif (name[name.length - 1] === '*') {\n\t\t\treturn true;\n\t\t}\n\n\t\tlet i;\n\t\tlet len;\n\n\t\tfor (i = 0, len = createDebug.skips.length; i < len; i++) {\n\t\t\tif (createDebug.skips[i].test(name)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0, len = createDebug.names.length; i < len; i++) {\n\t\t\tif (createDebug.names[i].test(name)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t* Convert regexp to namespace\n\t*\n\t* @param {RegExp} regxep\n\t* @return {String} namespace\n\t* @api private\n\t*/\n\tfunction toNamespace(regexp) {\n\t\treturn regexp.toString()\n\t\t\t.substring(2, regexp.toString().length - 2)\n\t\t\t.replace(/\\.\\*\\?$/, '*');\n\t}\n\n\t/**\n\t* Coerce `val`.\n\t*\n\t* @param {Mixed} val\n\t* @return {Mixed}\n\t* @api private\n\t*/\n\tfunction coerce(val) {\n\t\tif (val instanceof Error) {\n\t\t\treturn val.stack || val.message;\n\t\t}\n\t\treturn val;\n\t}\n\n\t/**\n\t* XXX DO NOT USE. This is a temporary stub function.\n\t* XXX It WILL be removed in the next major release.\n\t*/\n\tfunction destroy() {\n\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t}\n\n\tcreateDebug.enable(createDebug.load());\n\n\treturn createDebug;\n}\n\nmodule.exports = setup;\n","/**\n * Detect Electron renderer / nwjs process, which is node, but we should\n * treat as a browser.\n */\n\nif (typeof process === 'undefined' || process.type === 'renderer' || process.browser === true || process.__nwjs) {\n\tmodule.exports = require('./browser.js');\n} else {\n\tmodule.exports = require('./node.js');\n}\n","/**\n * Module dependencies.\n */\n\nconst tty = require('tty');\nconst util = require('util');\n\n/**\n * This is the Node.js implementation of `debug()`.\n */\n\nexports.init = init;\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.destroy = util.deprecate(\n\t() => {},\n\t'Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.'\n);\n\n/**\n * Colors.\n */\n\nexports.colors = [6, 2, 3, 4, 5, 1];\n\ntry {\n\t// Optional dependency (as in, doesn't need to be installed, NOT like optionalDependencies in package.json)\n\t// eslint-disable-next-line import/no-extraneous-dependencies\n\tconst supportsColor = require('supports-color');\n\n\tif (supportsColor && (supportsColor.stderr || supportsColor).level >= 2) {\n\t\texports.colors = [\n\t\t\t20,\n\t\t\t21,\n\t\t\t26,\n\t\t\t27,\n\t\t\t32,\n\t\t\t33,\n\t\t\t38,\n\t\t\t39,\n\t\t\t40,\n\t\t\t41,\n\t\t\t42,\n\t\t\t43,\n\t\t\t44,\n\t\t\t45,\n\t\t\t56,\n\t\t\t57,\n\t\t\t62,\n\t\t\t63,\n\t\t\t68,\n\t\t\t69,\n\t\t\t74,\n\t\t\t75,\n\t\t\t76,\n\t\t\t77,\n\t\t\t78,\n\t\t\t79,\n\t\t\t80,\n\t\t\t81,\n\t\t\t92,\n\t\t\t93,\n\t\t\t98,\n\t\t\t99,\n\t\t\t112,\n\t\t\t113,\n\t\t\t128,\n\t\t\t129,\n\t\t\t134,\n\t\t\t135,\n\t\t\t148,\n\t\t\t149,\n\t\t\t160,\n\t\t\t161,\n\t\t\t162,\n\t\t\t163,\n\t\t\t164,\n\t\t\t165,\n\t\t\t166,\n\t\t\t167,\n\t\t\t168,\n\t\t\t169,\n\t\t\t170,\n\t\t\t171,\n\t\t\t172,\n\t\t\t173,\n\t\t\t178,\n\t\t\t179,\n\t\t\t184,\n\t\t\t185,\n\t\t\t196,\n\t\t\t197,\n\t\t\t198,\n\t\t\t199,\n\t\t\t200,\n\t\t\t201,\n\t\t\t202,\n\t\t\t203,\n\t\t\t204,\n\t\t\t205,\n\t\t\t206,\n\t\t\t207,\n\t\t\t208,\n\t\t\t209,\n\t\t\t214,\n\t\t\t215,\n\t\t\t220,\n\t\t\t221\n\t\t];\n\t}\n} catch (error) {\n\t// Swallow - we only care if `supports-color` is available; it doesn't have to be.\n}\n\n/**\n * Build up the default `inspectOpts` object from the environment variables.\n *\n *   $ DEBUG_COLORS=no DEBUG_DEPTH=10 DEBUG_SHOW_HIDDEN=enabled node script.js\n */\n\nexports.inspectOpts = Object.keys(process.env).filter(key => {\n\treturn /^debug_/i.test(key);\n}).reduce((obj, key) => {\n\t// Camel-case\n\tconst prop = key\n\t\t.substring(6)\n\t\t.toLowerCase()\n\t\t.replace(/_([a-z])/g, (_, k) => {\n\t\t\treturn k.toUpperCase();\n\t\t});\n\n\t// Coerce string value into JS value\n\tlet val = process.env[key];\n\tif (/^(yes|on|true|enabled)$/i.test(val)) {\n\t\tval = true;\n\t} else if (/^(no|off|false|disabled)$/i.test(val)) {\n\t\tval = false;\n\t} else if (val === 'null') {\n\t\tval = null;\n\t} else {\n\t\tval = Number(val);\n\t}\n\n\tobj[prop] = val;\n\treturn obj;\n}, {});\n\n/**\n * Is stdout a TTY? Colored output is enabled when `true`.\n */\n\nfunction useColors() {\n\treturn 'colors' in exports.inspectOpts ?\n\t\tBoolean(exports.inspectOpts.colors) :\n\t\ttty.isatty(process.stderr.fd);\n}\n\n/**\n * Adds ANSI color escape codes if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n\tconst {namespace: name, useColors} = this;\n\n\tif (useColors) {\n\t\tconst c = this.color;\n\t\tconst colorCode = '\\u001B[3' + (c < 8 ? c : '8;5;' + c);\n\t\tconst prefix = `  ${colorCode};1m${name} \\u001B[0m`;\n\n\t\targs[0] = prefix + args[0].split('\\n').join('\\n' + prefix);\n\t\targs.push(colorCode + 'm+' + module.exports.humanize(this.diff) + '\\u001B[0m');\n\t} else {\n\t\targs[0] = getDate() + name + ' ' + args[0];\n\t}\n}\n\nfunction getDate() {\n\tif (exports.inspectOpts.hideDate) {\n\t\treturn '';\n\t}\n\treturn new Date().toISOString() + ' ';\n}\n\n/**\n * Invokes `util.format()` with the specified arguments and writes to stderr.\n */\n\nfunction log(...args) {\n\treturn process.stderr.write(util.format(...args) + '\\n');\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\nfunction save(namespaces) {\n\tif (namespaces) {\n\t\tprocess.env.DEBUG = namespaces;\n\t} else {\n\t\t// If you set a process.env field to null or undefined, it gets cast to the\n\t\t// string 'null' or 'undefined'. Just delete instead.\n\t\tdelete process.env.DEBUG;\n\t}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n\treturn process.env.DEBUG;\n}\n\n/**\n * Init logic for `debug` instances.\n *\n * Create a new `inspectOpts` object in case `useColors` is set\n * differently for a particular `debug` instance.\n */\n\nfunction init(debug) {\n\tdebug.inspectOpts = {};\n\n\tconst keys = Object.keys(exports.inspectOpts);\n\tfor (let i = 0; i < keys.length; i++) {\n\t\tdebug.inspectOpts[keys[i]] = exports.inspectOpts[keys[i]];\n\t}\n}\n\nmodule.exports = require('./common')(exports);\n\nconst {formatters} = module.exports;\n\n/**\n * Map %o to `util.inspect()`, all on a single line.\n */\n\nformatters.o = function (v) {\n\tthis.inspectOpts.colors = this.useColors;\n\treturn util.inspect(v, this.inspectOpts)\n\t\t.split('\\n')\n\t\t.map(str => str.trim())\n\t\t.join(' ');\n};\n\n/**\n * Map %O to `util.inspect()`, allowing multiple lines if needed.\n */\n\nformatters.O = function (v) {\n\tthis.inspectOpts.colors = this.useColors;\n\treturn util.inspect(v, this.inspectOpts);\n};\n","'use strict';\n\nvar elliptic = exports;\n\nelliptic.version = require('../package.json').version;\nelliptic.utils = require('./elliptic/utils');\nelliptic.rand = require('brorand');\nelliptic.curve = require('./elliptic/curve');\nelliptic.curves = require('./elliptic/curves');\n\n// Protocols\nelliptic.ec = require('./elliptic/ec');\nelliptic.eddsa = require('./elliptic/eddsa');\n","'use strict';\n\nvar BN = require('bn.js');\nvar utils = require('../utils');\nvar getNAF = utils.getNAF;\nvar getJSF = utils.getJSF;\nvar assert = utils.assert;\n\nfunction BaseCurve(type, conf) {\n  this.type = type;\n  this.p = new BN(conf.p, 16);\n\n  // Use Montgomery, when there is no fast reduction for the prime\n  this.red = conf.prime ? BN.red(conf.prime) : BN.mont(this.p);\n\n  // Useful for many curves\n  this.zero = new BN(0).toRed(this.red);\n  this.one = new BN(1).toRed(this.red);\n  this.two = new BN(2).toRed(this.red);\n\n  // Curve configuration, optional\n  this.n = conf.n && new BN(conf.n, 16);\n  this.g = conf.g && this.pointFromJSON(conf.g, conf.gRed);\n\n  // Temporary arrays\n  this._wnafT1 = new Array(4);\n  this._wnafT2 = new Array(4);\n  this._wnafT3 = new Array(4);\n  this._wnafT4 = new Array(4);\n\n  this._bitLength = this.n ? this.n.bitLength() : 0;\n\n  // Generalized Greg Maxwell's trick\n  var adjustCount = this.n && this.p.div(this.n);\n  if (!adjustCount || adjustCount.cmpn(100) > 0) {\n    this.redN = null;\n  } else {\n    this._maxwellTrick = true;\n    this.redN = this.n.toRed(this.red);\n  }\n}\nmodule.exports = BaseCurve;\n\nBaseCurve.prototype.point = function point() {\n  throw new Error('Not implemented');\n};\n\nBaseCurve.prototype.validate = function validate() {\n  throw new Error('Not implemented');\n};\n\nBaseCurve.prototype._fixedNafMul = function _fixedNafMul(p, k) {\n  assert(p.precomputed);\n  var doubles = p._getDoubles();\n\n  var naf = getNAF(k, 1, this._bitLength);\n  var I = (1 << (doubles.step + 1)) - (doubles.step % 2 === 0 ? 2 : 1);\n  I /= 3;\n\n  // Translate into more windowed form\n  var repr = [];\n  var j;\n  var nafW;\n  for (j = 0; j < naf.length; j += doubles.step) {\n    nafW = 0;\n    for (var l = j + doubles.step - 1; l >= j; l--)\n      nafW = (nafW << 1) + naf[l];\n    repr.push(nafW);\n  }\n\n  var a = this.jpoint(null, null, null);\n  var b = this.jpoint(null, null, null);\n  for (var i = I; i > 0; i--) {\n    for (j = 0; j < repr.length; j++) {\n      nafW = repr[j];\n      if (nafW === i)\n        b = b.mixedAdd(doubles.points[j]);\n      else if (nafW === -i)\n        b = b.mixedAdd(doubles.points[j].neg());\n    }\n    a = a.add(b);\n  }\n  return a.toP();\n};\n\nBaseCurve.prototype._wnafMul = function _wnafMul(p, k) {\n  var w = 4;\n\n  // Precompute window\n  var nafPoints = p._getNAFPoints(w);\n  w = nafPoints.wnd;\n  var wnd = nafPoints.points;\n\n  // Get NAF form\n  var naf = getNAF(k, w, this._bitLength);\n\n  // Add `this`*(N+1) for every w-NAF index\n  var acc = this.jpoint(null, null, null);\n  for (var i = naf.length - 1; i >= 0; i--) {\n    // Count zeroes\n    for (var l = 0; i >= 0 && naf[i] === 0; i--)\n      l++;\n    if (i >= 0)\n      l++;\n    acc = acc.dblp(l);\n\n    if (i < 0)\n      break;\n    var z = naf[i];\n    assert(z !== 0);\n    if (p.type === 'affine') {\n      // J +- P\n      if (z > 0)\n        acc = acc.mixedAdd(wnd[(z - 1) >> 1]);\n      else\n        acc = acc.mixedAdd(wnd[(-z - 1) >> 1].neg());\n    } else {\n      // J +- J\n      if (z > 0)\n        acc = acc.add(wnd[(z - 1) >> 1]);\n      else\n        acc = acc.add(wnd[(-z - 1) >> 1].neg());\n    }\n  }\n  return p.type === 'affine' ? acc.toP() : acc;\n};\n\nBaseCurve.prototype._wnafMulAdd = function _wnafMulAdd(defW,\n  points,\n  coeffs,\n  len,\n  jacobianResult) {\n  var wndWidth = this._wnafT1;\n  var wnd = this._wnafT2;\n  var naf = this._wnafT3;\n\n  // Fill all arrays\n  var max = 0;\n  var i;\n  var j;\n  var p;\n  for (i = 0; i < len; i++) {\n    p = points[i];\n    var nafPoints = p._getNAFPoints(defW);\n    wndWidth[i] = nafPoints.wnd;\n    wnd[i] = nafPoints.points;\n  }\n\n  // Comb small window NAFs\n  for (i = len - 1; i >= 1; i -= 2) {\n    var a = i - 1;\n    var b = i;\n    if (wndWidth[a] !== 1 || wndWidth[b] !== 1) {\n      naf[a] = getNAF(coeffs[a], wndWidth[a], this._bitLength);\n      naf[b] = getNAF(coeffs[b], wndWidth[b], this._bitLength);\n      max = Math.max(naf[a].length, max);\n      max = Math.max(naf[b].length, max);\n      continue;\n    }\n\n    var comb = [\n      points[a], /* 1 */\n      null, /* 3 */\n      null, /* 5 */\n      points[b], /* 7 */\n    ];\n\n    // Try to avoid Projective points, if possible\n    if (points[a].y.cmp(points[b].y) === 0) {\n      comb[1] = points[a].add(points[b]);\n      comb[2] = points[a].toJ().mixedAdd(points[b].neg());\n    } else if (points[a].y.cmp(points[b].y.redNeg()) === 0) {\n      comb[1] = points[a].toJ().mixedAdd(points[b]);\n      comb[2] = points[a].add(points[b].neg());\n    } else {\n      comb[1] = points[a].toJ().mixedAdd(points[b]);\n      comb[2] = points[a].toJ().mixedAdd(points[b].neg());\n    }\n\n    var index = [\n      -3, /* -1 -1 */\n      -1, /* -1 0 */\n      -5, /* -1 1 */\n      -7, /* 0 -1 */\n      0, /* 0 0 */\n      7, /* 0 1 */\n      5, /* 1 -1 */\n      1, /* 1 0 */\n      3,  /* 1 1 */\n    ];\n\n    var jsf = getJSF(coeffs[a], coeffs[b]);\n    max = Math.max(jsf[0].length, max);\n    naf[a] = new Array(max);\n    naf[b] = new Array(max);\n    for (j = 0; j < max; j++) {\n      var ja = jsf[0][j] | 0;\n      var jb = jsf[1][j] | 0;\n\n      naf[a][j] = index[(ja + 1) * 3 + (jb + 1)];\n      naf[b][j] = 0;\n      wnd[a] = comb;\n    }\n  }\n\n  var acc = this.jpoint(null, null, null);\n  var tmp = this._wnafT4;\n  for (i = max; i >= 0; i--) {\n    var k = 0;\n\n    while (i >= 0) {\n      var zero = true;\n      for (j = 0; j < len; j++) {\n        tmp[j] = naf[j][i] | 0;\n        if (tmp[j] !== 0)\n          zero = false;\n      }\n      if (!zero)\n        break;\n      k++;\n      i--;\n    }\n    if (i >= 0)\n      k++;\n    acc = acc.dblp(k);\n    if (i < 0)\n      break;\n\n    for (j = 0; j < len; j++) {\n      var z = tmp[j];\n      p;\n      if (z === 0)\n        continue;\n      else if (z > 0)\n        p = wnd[j][(z - 1) >> 1];\n      else if (z < 0)\n        p = wnd[j][(-z - 1) >> 1].neg();\n\n      if (p.type === 'affine')\n        acc = acc.mixedAdd(p);\n      else\n        acc = acc.add(p);\n    }\n  }\n  // Zeroify references\n  for (i = 0; i < len; i++)\n    wnd[i] = null;\n\n  if (jacobianResult)\n    return acc;\n  else\n    return acc.toP();\n};\n\nfunction BasePoint(curve, type) {\n  this.curve = curve;\n  this.type = type;\n  this.precomputed = null;\n}\nBaseCurve.BasePoint = BasePoint;\n\nBasePoint.prototype.eq = function eq(/*other*/) {\n  throw new Error('Not implemented');\n};\n\nBasePoint.prototype.validate = function validate() {\n  return this.curve.validate(this);\n};\n\nBaseCurve.prototype.decodePoint = function decodePoint(bytes, enc) {\n  bytes = utils.toArray(bytes, enc);\n\n  var len = this.p.byteLength();\n\n  // uncompressed, hybrid-odd, hybrid-even\n  if ((bytes[0] === 0x04 || bytes[0] === 0x06 || bytes[0] === 0x07) &&\n      bytes.length - 1 === 2 * len) {\n    if (bytes[0] === 0x06)\n      assert(bytes[bytes.length - 1] % 2 === 0);\n    else if (bytes[0] === 0x07)\n      assert(bytes[bytes.length - 1] % 2 === 1);\n\n    var res =  this.point(bytes.slice(1, 1 + len),\n      bytes.slice(1 + len, 1 + 2 * len));\n\n    return res;\n  } else if ((bytes[0] === 0x02 || bytes[0] === 0x03) &&\n              bytes.length - 1 === len) {\n    return this.pointFromX(bytes.slice(1, 1 + len), bytes[0] === 0x03);\n  }\n  throw new Error('Unknown point format');\n};\n\nBasePoint.prototype.encodeCompressed = function encodeCompressed(enc) {\n  return this.encode(enc, true);\n};\n\nBasePoint.prototype._encode = function _encode(compact) {\n  var len = this.curve.p.byteLength();\n  var x = this.getX().toArray('be', len);\n\n  if (compact)\n    return [ this.getY().isEven() ? 0x02 : 0x03 ].concat(x);\n\n  return [ 0x04 ].concat(x, this.getY().toArray('be', len));\n};\n\nBasePoint.prototype.encode = function encode(enc, compact) {\n  return utils.encode(this._encode(compact), enc);\n};\n\nBasePoint.prototype.precompute = function precompute(power) {\n  if (this.precomputed)\n    return this;\n\n  var precomputed = {\n    doubles: null,\n    naf: null,\n    beta: null,\n  };\n  precomputed.naf = this._getNAFPoints(8);\n  precomputed.doubles = this._getDoubles(4, power);\n  precomputed.beta = this._getBeta();\n  this.precomputed = precomputed;\n\n  return this;\n};\n\nBasePoint.prototype._hasDoubles = function _hasDoubles(k) {\n  if (!this.precomputed)\n    return false;\n\n  var doubles = this.precomputed.doubles;\n  if (!doubles)\n    return false;\n\n  return doubles.points.length >= Math.ceil((k.bitLength() + 1) / doubles.step);\n};\n\nBasePoint.prototype._getDoubles = function _getDoubles(step, power) {\n  if (this.precomputed && this.precomputed.doubles)\n    return this.precomputed.doubles;\n\n  var doubles = [ this ];\n  var acc = this;\n  for (var i = 0; i < power; i += step) {\n    for (var j = 0; j < step; j++)\n      acc = acc.dbl();\n    doubles.push(acc);\n  }\n  return {\n    step: step,\n    points: doubles,\n  };\n};\n\nBasePoint.prototype._getNAFPoints = function _getNAFPoints(wnd) {\n  if (this.precomputed && this.precomputed.naf)\n    return this.precomputed.naf;\n\n  var res = [ this ];\n  var max = (1 << wnd) - 1;\n  var dbl = max === 1 ? null : this.dbl();\n  for (var i = 1; i < max; i++)\n    res[i] = res[i - 1].add(dbl);\n  return {\n    wnd: wnd,\n    points: res,\n  };\n};\n\nBasePoint.prototype._getBeta = function _getBeta() {\n  return null;\n};\n\nBasePoint.prototype.dblp = function dblp(k) {\n  var r = this;\n  for (var i = 0; i < k; i++)\n    r = r.dbl();\n  return r;\n};\n","'use strict';\n\nvar utils = require('../utils');\nvar BN = require('bn.js');\nvar inherits = require('inherits');\nvar Base = require('./base');\n\nvar assert = utils.assert;\n\nfunction EdwardsCurve(conf) {\n  // NOTE: Important as we are creating point in Base.call()\n  this.twisted = (conf.a | 0) !== 1;\n  this.mOneA = this.twisted && (conf.a | 0) === -1;\n  this.extended = this.mOneA;\n\n  Base.call(this, 'edwards', conf);\n\n  this.a = new BN(conf.a, 16).umod(this.red.m);\n  this.a = this.a.toRed(this.red);\n  this.c = new BN(conf.c, 16).toRed(this.red);\n  this.c2 = this.c.redSqr();\n  this.d = new BN(conf.d, 16).toRed(this.red);\n  this.dd = this.d.redAdd(this.d);\n\n  assert(!this.twisted || this.c.fromRed().cmpn(1) === 0);\n  this.oneC = (conf.c | 0) === 1;\n}\ninherits(EdwardsCurve, Base);\nmodule.exports = EdwardsCurve;\n\nEdwardsCurve.prototype._mulA = function _mulA(num) {\n  if (this.mOneA)\n    return num.redNeg();\n  else\n    return this.a.redMul(num);\n};\n\nEdwardsCurve.prototype._mulC = function _mulC(num) {\n  if (this.oneC)\n    return num;\n  else\n    return this.c.redMul(num);\n};\n\n// Just for compatibility with Short curve\nEdwardsCurve.prototype.jpoint = function jpoint(x, y, z, t) {\n  return this.point(x, y, z, t);\n};\n\nEdwardsCurve.prototype.pointFromX = function pointFromX(x, odd) {\n  x = new BN(x, 16);\n  if (!x.red)\n    x = x.toRed(this.red);\n\n  var x2 = x.redSqr();\n  var rhs = this.c2.redSub(this.a.redMul(x2));\n  var lhs = this.one.redSub(this.c2.redMul(this.d).redMul(x2));\n\n  var y2 = rhs.redMul(lhs.redInvm());\n  var y = y2.redSqrt();\n  if (y.redSqr().redSub(y2).cmp(this.zero) !== 0)\n    throw new Error('invalid point');\n\n  var isOdd = y.fromRed().isOdd();\n  if (odd && !isOdd || !odd && isOdd)\n    y = y.redNeg();\n\n  return this.point(x, y);\n};\n\nEdwardsCurve.prototype.pointFromY = function pointFromY(y, odd) {\n  y = new BN(y, 16);\n  if (!y.red)\n    y = y.toRed(this.red);\n\n  // x^2 = (y^2 - c^2) / (c^2 d y^2 - a)\n  var y2 = y.redSqr();\n  var lhs = y2.redSub(this.c2);\n  var rhs = y2.redMul(this.d).redMul(this.c2).redSub(this.a);\n  var x2 = lhs.redMul(rhs.redInvm());\n\n  if (x2.cmp(this.zero) === 0) {\n    if (odd)\n      throw new Error('invalid point');\n    else\n      return this.point(this.zero, y);\n  }\n\n  var x = x2.redSqrt();\n  if (x.redSqr().redSub(x2).cmp(this.zero) !== 0)\n    throw new Error('invalid point');\n\n  if (x.fromRed().isOdd() !== odd)\n    x = x.redNeg();\n\n  return this.point(x, y);\n};\n\nEdwardsCurve.prototype.validate = function validate(point) {\n  if (point.isInfinity())\n    return true;\n\n  // Curve: A * X^2 + Y^2 = C^2 * (1 + D * X^2 * Y^2)\n  point.normalize();\n\n  var x2 = point.x.redSqr();\n  var y2 = point.y.redSqr();\n  var lhs = x2.redMul(this.a).redAdd(y2);\n  var rhs = this.c2.redMul(this.one.redAdd(this.d.redMul(x2).redMul(y2)));\n\n  return lhs.cmp(rhs) === 0;\n};\n\nfunction Point(curve, x, y, z, t) {\n  Base.BasePoint.call(this, curve, 'projective');\n  if (x === null && y === null && z === null) {\n    this.x = this.curve.zero;\n    this.y = this.curve.one;\n    this.z = this.curve.one;\n    this.t = this.curve.zero;\n    this.zOne = true;\n  } else {\n    this.x = new BN(x, 16);\n    this.y = new BN(y, 16);\n    this.z = z ? new BN(z, 16) : this.curve.one;\n    this.t = t && new BN(t, 16);\n    if (!this.x.red)\n      this.x = this.x.toRed(this.curve.red);\n    if (!this.y.red)\n      this.y = this.y.toRed(this.curve.red);\n    if (!this.z.red)\n      this.z = this.z.toRed(this.curve.red);\n    if (this.t && !this.t.red)\n      this.t = this.t.toRed(this.curve.red);\n    this.zOne = this.z === this.curve.one;\n\n    // Use extended coordinates\n    if (this.curve.extended && !this.t) {\n      this.t = this.x.redMul(this.y);\n      if (!this.zOne)\n        this.t = this.t.redMul(this.z.redInvm());\n    }\n  }\n}\ninherits(Point, Base.BasePoint);\n\nEdwardsCurve.prototype.pointFromJSON = function pointFromJSON(obj) {\n  return Point.fromJSON(this, obj);\n};\n\nEdwardsCurve.prototype.point = function point(x, y, z, t) {\n  return new Point(this, x, y, z, t);\n};\n\nPoint.fromJSON = function fromJSON(curve, obj) {\n  return new Point(curve, obj[0], obj[1], obj[2]);\n};\n\nPoint.prototype.inspect = function inspect() {\n  if (this.isInfinity())\n    return '<EC Point Infinity>';\n  return '<EC Point x: ' + this.x.fromRed().toString(16, 2) +\n      ' y: ' + this.y.fromRed().toString(16, 2) +\n      ' z: ' + this.z.fromRed().toString(16, 2) + '>';\n};\n\nPoint.prototype.isInfinity = function isInfinity() {\n  // XXX This code assumes that zero is always zero in red\n  return this.x.cmpn(0) === 0 &&\n    (this.y.cmp(this.z) === 0 ||\n    (this.zOne && this.y.cmp(this.curve.c) === 0));\n};\n\nPoint.prototype._extDbl = function _extDbl() {\n  // hyperelliptic.org/EFD/g1p/auto-twisted-extended-1.html\n  //     #doubling-dbl-2008-hwcd\n  // 4M + 4S\n\n  // A = X1^2\n  var a = this.x.redSqr();\n  // B = Y1^2\n  var b = this.y.redSqr();\n  // C = 2 * Z1^2\n  var c = this.z.redSqr();\n  c = c.redIAdd(c);\n  // D = a * A\n  var d = this.curve._mulA(a);\n  // E = (X1 + Y1)^2 - A - B\n  var e = this.x.redAdd(this.y).redSqr().redISub(a).redISub(b);\n  // G = D + B\n  var g = d.redAdd(b);\n  // F = G - C\n  var f = g.redSub(c);\n  // H = D - B\n  var h = d.redSub(b);\n  // X3 = E * F\n  var nx = e.redMul(f);\n  // Y3 = G * H\n  var ny = g.redMul(h);\n  // T3 = E * H\n  var nt = e.redMul(h);\n  // Z3 = F * G\n  var nz = f.redMul(g);\n  return this.curve.point(nx, ny, nz, nt);\n};\n\nPoint.prototype._projDbl = function _projDbl() {\n  // hyperelliptic.org/EFD/g1p/auto-twisted-projective.html\n  //     #doubling-dbl-2008-bbjlp\n  //     #doubling-dbl-2007-bl\n  // and others\n  // Generally 3M + 4S or 2M + 4S\n\n  // B = (X1 + Y1)^2\n  var b = this.x.redAdd(this.y).redSqr();\n  // C = X1^2\n  var c = this.x.redSqr();\n  // D = Y1^2\n  var d = this.y.redSqr();\n\n  var nx;\n  var ny;\n  var nz;\n  var e;\n  var h;\n  var j;\n  if (this.curve.twisted) {\n    // E = a * C\n    e = this.curve._mulA(c);\n    // F = E + D\n    var f = e.redAdd(d);\n    if (this.zOne) {\n      // X3 = (B - C - D) * (F - 2)\n      nx = b.redSub(c).redSub(d).redMul(f.redSub(this.curve.two));\n      // Y3 = F * (E - D)\n      ny = f.redMul(e.redSub(d));\n      // Z3 = F^2 - 2 * F\n      nz = f.redSqr().redSub(f).redSub(f);\n    } else {\n      // H = Z1^2\n      h = this.z.redSqr();\n      // J = F - 2 * H\n      j = f.redSub(h).redISub(h);\n      // X3 = (B-C-D)*J\n      nx = b.redSub(c).redISub(d).redMul(j);\n      // Y3 = F * (E - D)\n      ny = f.redMul(e.redSub(d));\n      // Z3 = F * J\n      nz = f.redMul(j);\n    }\n  } else {\n    // E = C + D\n    e = c.redAdd(d);\n    // H = (c * Z1)^2\n    h = this.curve._mulC(this.z).redSqr();\n    // J = E - 2 * H\n    j = e.redSub(h).redSub(h);\n    // X3 = c * (B - E) * J\n    nx = this.curve._mulC(b.redISub(e)).redMul(j);\n    // Y3 = c * E * (C - D)\n    ny = this.curve._mulC(e).redMul(c.redISub(d));\n    // Z3 = E * J\n    nz = e.redMul(j);\n  }\n  return this.curve.point(nx, ny, nz);\n};\n\nPoint.prototype.dbl = function dbl() {\n  if (this.isInfinity())\n    return this;\n\n  // Double in extended coordinates\n  if (this.curve.extended)\n    return this._extDbl();\n  else\n    return this._projDbl();\n};\n\nPoint.prototype._extAdd = function _extAdd(p) {\n  // hyperelliptic.org/EFD/g1p/auto-twisted-extended-1.html\n  //     #addition-add-2008-hwcd-3\n  // 8M\n\n  // A = (Y1 - X1) * (Y2 - X2)\n  var a = this.y.redSub(this.x).redMul(p.y.redSub(p.x));\n  // B = (Y1 + X1) * (Y2 + X2)\n  var b = this.y.redAdd(this.x).redMul(p.y.redAdd(p.x));\n  // C = T1 * k * T2\n  var c = this.t.redMul(this.curve.dd).redMul(p.t);\n  // D = Z1 * 2 * Z2\n  var d = this.z.redMul(p.z.redAdd(p.z));\n  // E = B - A\n  var e = b.redSub(a);\n  // F = D - C\n  var f = d.redSub(c);\n  // G = D + C\n  var g = d.redAdd(c);\n  // H = B + A\n  var h = b.redAdd(a);\n  // X3 = E * F\n  var nx = e.redMul(f);\n  // Y3 = G * H\n  var ny = g.redMul(h);\n  // T3 = E * H\n  var nt = e.redMul(h);\n  // Z3 = F * G\n  var nz = f.redMul(g);\n  return this.curve.point(nx, ny, nz, nt);\n};\n\nPoint.prototype._projAdd = function _projAdd(p) {\n  // hyperelliptic.org/EFD/g1p/auto-twisted-projective.html\n  //     #addition-add-2008-bbjlp\n  //     #addition-add-2007-bl\n  // 10M + 1S\n\n  // A = Z1 * Z2\n  var a = this.z.redMul(p.z);\n  // B = A^2\n  var b = a.redSqr();\n  // C = X1 * X2\n  var c = this.x.redMul(p.x);\n  // D = Y1 * Y2\n  var d = this.y.redMul(p.y);\n  // E = d * C * D\n  var e = this.curve.d.redMul(c).redMul(d);\n  // F = B - E\n  var f = b.redSub(e);\n  // G = B + E\n  var g = b.redAdd(e);\n  // X3 = A * F * ((X1 + Y1) * (X2 + Y2) - C - D)\n  var tmp = this.x.redAdd(this.y).redMul(p.x.redAdd(p.y)).redISub(c).redISub(d);\n  var nx = a.redMul(f).redMul(tmp);\n  var ny;\n  var nz;\n  if (this.curve.twisted) {\n    // Y3 = A * G * (D - a * C)\n    ny = a.redMul(g).redMul(d.redSub(this.curve._mulA(c)));\n    // Z3 = F * G\n    nz = f.redMul(g);\n  } else {\n    // Y3 = A * G * (D - C)\n    ny = a.redMul(g).redMul(d.redSub(c));\n    // Z3 = c * F * G\n    nz = this.curve._mulC(f).redMul(g);\n  }\n  return this.curve.point(nx, ny, nz);\n};\n\nPoint.prototype.add = function add(p) {\n  if (this.isInfinity())\n    return p;\n  if (p.isInfinity())\n    return this;\n\n  if (this.curve.extended)\n    return this._extAdd(p);\n  else\n    return this._projAdd(p);\n};\n\nPoint.prototype.mul = function mul(k) {\n  if (this._hasDoubles(k))\n    return this.curve._fixedNafMul(this, k);\n  else\n    return this.curve._wnafMul(this, k);\n};\n\nPoint.prototype.mulAdd = function mulAdd(k1, p, k2) {\n  return this.curve._wnafMulAdd(1, [ this, p ], [ k1, k2 ], 2, false);\n};\n\nPoint.prototype.jmulAdd = function jmulAdd(k1, p, k2) {\n  return this.curve._wnafMulAdd(1, [ this, p ], [ k1, k2 ], 2, true);\n};\n\nPoint.prototype.normalize = function normalize() {\n  if (this.zOne)\n    return this;\n\n  // Normalize coordinates\n  var zi = this.z.redInvm();\n  this.x = this.x.redMul(zi);\n  this.y = this.y.redMul(zi);\n  if (this.t)\n    this.t = this.t.redMul(zi);\n  this.z = this.curve.one;\n  this.zOne = true;\n  return this;\n};\n\nPoint.prototype.neg = function neg() {\n  return this.curve.point(this.x.redNeg(),\n    this.y,\n    this.z,\n    this.t && this.t.redNeg());\n};\n\nPoint.prototype.getX = function getX() {\n  this.normalize();\n  return this.x.fromRed();\n};\n\nPoint.prototype.getY = function getY() {\n  this.normalize();\n  return this.y.fromRed();\n};\n\nPoint.prototype.eq = function eq(other) {\n  return this === other ||\n         this.getX().cmp(other.getX()) === 0 &&\n         this.getY().cmp(other.getY()) === 0;\n};\n\nPoint.prototype.eqXToP = function eqXToP(x) {\n  var rx = x.toRed(this.curve.red).redMul(this.z);\n  if (this.x.cmp(rx) === 0)\n    return true;\n\n  var xc = x.clone();\n  var t = this.curve.redN.redMul(this.z);\n  for (;;) {\n    xc.iadd(this.curve.n);\n    if (xc.cmp(this.curve.p) >= 0)\n      return false;\n\n    rx.redIAdd(t);\n    if (this.x.cmp(rx) === 0)\n      return true;\n  }\n};\n\n// Compatibility with BaseCurve\nPoint.prototype.toP = Point.prototype.normalize;\nPoint.prototype.mixedAdd = Point.prototype.add;\n","'use strict';\n\nvar curve = exports;\n\ncurve.base = require('./base');\ncurve.short = require('./short');\ncurve.mont = require('./mont');\ncurve.edwards = require('./edwards');\n","'use strict';\n\nvar BN = require('bn.js');\nvar inherits = require('inherits');\nvar Base = require('./base');\n\nvar utils = require('../utils');\n\nfunction MontCurve(conf) {\n  Base.call(this, 'mont', conf);\n\n  this.a = new BN(conf.a, 16).toRed(this.red);\n  this.b = new BN(conf.b, 16).toRed(this.red);\n  this.i4 = new BN(4).toRed(this.red).redInvm();\n  this.two = new BN(2).toRed(this.red);\n  this.a24 = this.i4.redMul(this.a.redAdd(this.two));\n}\ninherits(MontCurve, Base);\nmodule.exports = MontCurve;\n\nMontCurve.prototype.validate = function validate(point) {\n  var x = point.normalize().x;\n  var x2 = x.redSqr();\n  var rhs = x2.redMul(x).redAdd(x2.redMul(this.a)).redAdd(x);\n  var y = rhs.redSqrt();\n\n  return y.redSqr().cmp(rhs) === 0;\n};\n\nfunction Point(curve, x, z) {\n  Base.BasePoint.call(this, curve, 'projective');\n  if (x === null && z === null) {\n    this.x = this.curve.one;\n    this.z = this.curve.zero;\n  } else {\n    this.x = new BN(x, 16);\n    this.z = new BN(z, 16);\n    if (!this.x.red)\n      this.x = this.x.toRed(this.curve.red);\n    if (!this.z.red)\n      this.z = this.z.toRed(this.curve.red);\n  }\n}\ninherits(Point, Base.BasePoint);\n\nMontCurve.prototype.decodePoint = function decodePoint(bytes, enc) {\n  return this.point(utils.toArray(bytes, enc), 1);\n};\n\nMontCurve.prototype.point = function point(x, z) {\n  return new Point(this, x, z);\n};\n\nMontCurve.prototype.pointFromJSON = function pointFromJSON(obj) {\n  return Point.fromJSON(this, obj);\n};\n\nPoint.prototype.precompute = function precompute() {\n  // No-op\n};\n\nPoint.prototype._encode = function _encode() {\n  return this.getX().toArray('be', this.curve.p.byteLength());\n};\n\nPoint.fromJSON = function fromJSON(curve, obj) {\n  return new Point(curve, obj[0], obj[1] || curve.one);\n};\n\nPoint.prototype.inspect = function inspect() {\n  if (this.isInfinity())\n    return '<EC Point Infinity>';\n  return '<EC Point x: ' + this.x.fromRed().toString(16, 2) +\n      ' z: ' + this.z.fromRed().toString(16, 2) + '>';\n};\n\nPoint.prototype.isInfinity = function isInfinity() {\n  // XXX This code assumes that zero is always zero in red\n  return this.z.cmpn(0) === 0;\n};\n\nPoint.prototype.dbl = function dbl() {\n  // http://hyperelliptic.org/EFD/g1p/auto-montgom-xz.html#doubling-dbl-1987-m-3\n  // 2M + 2S + 4A\n\n  // A = X1 + Z1\n  var a = this.x.redAdd(this.z);\n  // AA = A^2\n  var aa = a.redSqr();\n  // B = X1 - Z1\n  var b = this.x.redSub(this.z);\n  // BB = B^2\n  var bb = b.redSqr();\n  // C = AA - BB\n  var c = aa.redSub(bb);\n  // X3 = AA * BB\n  var nx = aa.redMul(bb);\n  // Z3 = C * (BB + A24 * C)\n  var nz = c.redMul(bb.redAdd(this.curve.a24.redMul(c)));\n  return this.curve.point(nx, nz);\n};\n\nPoint.prototype.add = function add() {\n  throw new Error('Not supported on Montgomery curve');\n};\n\nPoint.prototype.diffAdd = function diffAdd(p, diff) {\n  // http://hyperelliptic.org/EFD/g1p/auto-montgom-xz.html#diffadd-dadd-1987-m-3\n  // 4M + 2S + 6A\n\n  // A = X2 + Z2\n  var a = this.x.redAdd(this.z);\n  // B = X2 - Z2\n  var b = this.x.redSub(this.z);\n  // C = X3 + Z3\n  var c = p.x.redAdd(p.z);\n  // D = X3 - Z3\n  var d = p.x.redSub(p.z);\n  // DA = D * A\n  var da = d.redMul(a);\n  // CB = C * B\n  var cb = c.redMul(b);\n  // X5 = Z1 * (DA + CB)^2\n  var nx = diff.z.redMul(da.redAdd(cb).redSqr());\n  // Z5 = X1 * (DA - CB)^2\n  var nz = diff.x.redMul(da.redISub(cb).redSqr());\n  return this.curve.point(nx, nz);\n};\n\nPoint.prototype.mul = function mul(k) {\n  var t = k.clone();\n  var a = this; // (N / 2) * Q + Q\n  var b = this.curve.point(null, null); // (N / 2) * Q\n  var c = this; // Q\n\n  for (var bits = []; t.cmpn(0) !== 0; t.iushrn(1))\n    bits.push(t.andln(1));\n\n  for (var i = bits.length - 1; i >= 0; i--) {\n    if (bits[i] === 0) {\n      // N * Q + Q = ((N / 2) * Q + Q)) + (N / 2) * Q\n      a = a.diffAdd(b, c);\n      // N * Q = 2 * ((N / 2) * Q + Q))\n      b = b.dbl();\n    } else {\n      // N * Q = ((N / 2) * Q + Q) + ((N / 2) * Q)\n      b = a.diffAdd(b, c);\n      // N * Q + Q = 2 * ((N / 2) * Q + Q)\n      a = a.dbl();\n    }\n  }\n  return b;\n};\n\nPoint.prototype.mulAdd = function mulAdd() {\n  throw new Error('Not supported on Montgomery curve');\n};\n\nPoint.prototype.jumlAdd = function jumlAdd() {\n  throw new Error('Not supported on Montgomery curve');\n};\n\nPoint.prototype.eq = function eq(other) {\n  return this.getX().cmp(other.getX()) === 0;\n};\n\nPoint.prototype.normalize = function normalize() {\n  this.x = this.x.redMul(this.z.redInvm());\n  this.z = this.curve.one;\n  return this;\n};\n\nPoint.prototype.getX = function getX() {\n  // Normalize coordinates\n  this.normalize();\n\n  return this.x.fromRed();\n};\n","'use strict';\n\nvar utils = require('../utils');\nvar BN = require('bn.js');\nvar inherits = require('inherits');\nvar Base = require('./base');\n\nvar assert = utils.assert;\n\nfunction ShortCurve(conf) {\n  Base.call(this, 'short', conf);\n\n  this.a = new BN(conf.a, 16).toRed(this.red);\n  this.b = new BN(conf.b, 16).toRed(this.red);\n  this.tinv = this.two.redInvm();\n\n  this.zeroA = this.a.fromRed().cmpn(0) === 0;\n  this.threeA = this.a.fromRed().sub(this.p).cmpn(-3) === 0;\n\n  // If the curve is endomorphic, precalculate beta and lambda\n  this.endo = this._getEndomorphism(conf);\n  this._endoWnafT1 = new Array(4);\n  this._endoWnafT2 = new Array(4);\n}\ninherits(ShortCurve, Base);\nmodule.exports = ShortCurve;\n\nShortCurve.prototype._getEndomorphism = function _getEndomorphism(conf) {\n  // No efficient endomorphism\n  if (!this.zeroA || !this.g || !this.n || this.p.modn(3) !== 1)\n    return;\n\n  // Compute beta and lambda, that lambda * P = (beta * Px; Py)\n  var beta;\n  var lambda;\n  if (conf.beta) {\n    beta = new BN(conf.beta, 16).toRed(this.red);\n  } else {\n    var betas = this._getEndoRoots(this.p);\n    // Choose the smallest beta\n    beta = betas[0].cmp(betas[1]) < 0 ? betas[0] : betas[1];\n    beta = beta.toRed(this.red);\n  }\n  if (conf.lambda) {\n    lambda = new BN(conf.lambda, 16);\n  } else {\n    // Choose the lambda that is matching selected beta\n    var lambdas = this._getEndoRoots(this.n);\n    if (this.g.mul(lambdas[0]).x.cmp(this.g.x.redMul(beta)) === 0) {\n      lambda = lambdas[0];\n    } else {\n      lambda = lambdas[1];\n      assert(this.g.mul(lambda).x.cmp(this.g.x.redMul(beta)) === 0);\n    }\n  }\n\n  // Get basis vectors, used for balanced length-two representation\n  var basis;\n  if (conf.basis) {\n    basis = conf.basis.map(function(vec) {\n      return {\n        a: new BN(vec.a, 16),\n        b: new BN(vec.b, 16),\n      };\n    });\n  } else {\n    basis = this._getEndoBasis(lambda);\n  }\n\n  return {\n    beta: beta,\n    lambda: lambda,\n    basis: basis,\n  };\n};\n\nShortCurve.prototype._getEndoRoots = function _getEndoRoots(num) {\n  // Find roots of for x^2 + x + 1 in F\n  // Root = (-1 +- Sqrt(-3)) / 2\n  //\n  var red = num === this.p ? this.red : BN.mont(num);\n  var tinv = new BN(2).toRed(red).redInvm();\n  var ntinv = tinv.redNeg();\n\n  var s = new BN(3).toRed(red).redNeg().redSqrt().redMul(tinv);\n\n  var l1 = ntinv.redAdd(s).fromRed();\n  var l2 = ntinv.redSub(s).fromRed();\n  return [ l1, l2 ];\n};\n\nShortCurve.prototype._getEndoBasis = function _getEndoBasis(lambda) {\n  // aprxSqrt >= sqrt(this.n)\n  var aprxSqrt = this.n.ushrn(Math.floor(this.n.bitLength() / 2));\n\n  // 3.74\n  // Run EGCD, until r(L + 1) < aprxSqrt\n  var u = lambda;\n  var v = this.n.clone();\n  var x1 = new BN(1);\n  var y1 = new BN(0);\n  var x2 = new BN(0);\n  var y2 = new BN(1);\n\n  // NOTE: all vectors are roots of: a + b * lambda = 0 (mod n)\n  var a0;\n  var b0;\n  // First vector\n  var a1;\n  var b1;\n  // Second vector\n  var a2;\n  var b2;\n\n  var prevR;\n  var i = 0;\n  var r;\n  var x;\n  while (u.cmpn(0) !== 0) {\n    var q = v.div(u);\n    r = v.sub(q.mul(u));\n    x = x2.sub(q.mul(x1));\n    var y = y2.sub(q.mul(y1));\n\n    if (!a1 && r.cmp(aprxSqrt) < 0) {\n      a0 = prevR.neg();\n      b0 = x1;\n      a1 = r.neg();\n      b1 = x;\n    } else if (a1 && ++i === 2) {\n      break;\n    }\n    prevR = r;\n\n    v = u;\n    u = r;\n    x2 = x1;\n    x1 = x;\n    y2 = y1;\n    y1 = y;\n  }\n  a2 = r.neg();\n  b2 = x;\n\n  var len1 = a1.sqr().add(b1.sqr());\n  var len2 = a2.sqr().add(b2.sqr());\n  if (len2.cmp(len1) >= 0) {\n    a2 = a0;\n    b2 = b0;\n  }\n\n  // Normalize signs\n  if (a1.negative) {\n    a1 = a1.neg();\n    b1 = b1.neg();\n  }\n  if (a2.negative) {\n    a2 = a2.neg();\n    b2 = b2.neg();\n  }\n\n  return [\n    { a: a1, b: b1 },\n    { a: a2, b: b2 },\n  ];\n};\n\nShortCurve.prototype._endoSplit = function _endoSplit(k) {\n  var basis = this.endo.basis;\n  var v1 = basis[0];\n  var v2 = basis[1];\n\n  var c1 = v2.b.mul(k).divRound(this.n);\n  var c2 = v1.b.neg().mul(k).divRound(this.n);\n\n  var p1 = c1.mul(v1.a);\n  var p2 = c2.mul(v2.a);\n  var q1 = c1.mul(v1.b);\n  var q2 = c2.mul(v2.b);\n\n  // Calculate answer\n  var k1 = k.sub(p1).sub(p2);\n  var k2 = q1.add(q2).neg();\n  return { k1: k1, k2: k2 };\n};\n\nShortCurve.prototype.pointFromX = function pointFromX(x, odd) {\n  x = new BN(x, 16);\n  if (!x.red)\n    x = x.toRed(this.red);\n\n  var y2 = x.redSqr().redMul(x).redIAdd(x.redMul(this.a)).redIAdd(this.b);\n  var y = y2.redSqrt();\n  if (y.redSqr().redSub(y2).cmp(this.zero) !== 0)\n    throw new Error('invalid point');\n\n  // XXX Is there any way to tell if the number is odd without converting it\n  // to non-red form?\n  var isOdd = y.fromRed().isOdd();\n  if (odd && !isOdd || !odd && isOdd)\n    y = y.redNeg();\n\n  return this.point(x, y);\n};\n\nShortCurve.prototype.validate = function validate(point) {\n  if (point.inf)\n    return true;\n\n  var x = point.x;\n  var y = point.y;\n\n  var ax = this.a.redMul(x);\n  var rhs = x.redSqr().redMul(x).redIAdd(ax).redIAdd(this.b);\n  return y.redSqr().redISub(rhs).cmpn(0) === 0;\n};\n\nShortCurve.prototype._endoWnafMulAdd =\n    function _endoWnafMulAdd(points, coeffs, jacobianResult) {\n      var npoints = this._endoWnafT1;\n      var ncoeffs = this._endoWnafT2;\n      for (var i = 0; i < points.length; i++) {\n        var split = this._endoSplit(coeffs[i]);\n        var p = points[i];\n        var beta = p._getBeta();\n\n        if (split.k1.negative) {\n          split.k1.ineg();\n          p = p.neg(true);\n        }\n        if (split.k2.negative) {\n          split.k2.ineg();\n          beta = beta.neg(true);\n        }\n\n        npoints[i * 2] = p;\n        npoints[i * 2 + 1] = beta;\n        ncoeffs[i * 2] = split.k1;\n        ncoeffs[i * 2 + 1] = split.k2;\n      }\n      var res = this._wnafMulAdd(1, npoints, ncoeffs, i * 2, jacobianResult);\n\n      // Clean-up references to points and coefficients\n      for (var j = 0; j < i * 2; j++) {\n        npoints[j] = null;\n        ncoeffs[j] = null;\n      }\n      return res;\n    };\n\nfunction Point(curve, x, y, isRed) {\n  Base.BasePoint.call(this, curve, 'affine');\n  if (x === null && y === null) {\n    this.x = null;\n    this.y = null;\n    this.inf = true;\n  } else {\n    this.x = new BN(x, 16);\n    this.y = new BN(y, 16);\n    // Force redgomery representation when loading from JSON\n    if (isRed) {\n      this.x.forceRed(this.curve.red);\n      this.y.forceRed(this.curve.red);\n    }\n    if (!this.x.red)\n      this.x = this.x.toRed(this.curve.red);\n    if (!this.y.red)\n      this.y = this.y.toRed(this.curve.red);\n    this.inf = false;\n  }\n}\ninherits(Point, Base.BasePoint);\n\nShortCurve.prototype.point = function point(x, y, isRed) {\n  return new Point(this, x, y, isRed);\n};\n\nShortCurve.prototype.pointFromJSON = function pointFromJSON(obj, red) {\n  return Point.fromJSON(this, obj, red);\n};\n\nPoint.prototype._getBeta = function _getBeta() {\n  if (!this.curve.endo)\n    return;\n\n  var pre = this.precomputed;\n  if (pre && pre.beta)\n    return pre.beta;\n\n  var beta = this.curve.point(this.x.redMul(this.curve.endo.beta), this.y);\n  if (pre) {\n    var curve = this.curve;\n    var endoMul = function(p) {\n      return curve.point(p.x.redMul(curve.endo.beta), p.y);\n    };\n    pre.beta = beta;\n    beta.precomputed = {\n      beta: null,\n      naf: pre.naf && {\n        wnd: pre.naf.wnd,\n        points: pre.naf.points.map(endoMul),\n      },\n      doubles: pre.doubles && {\n        step: pre.doubles.step,\n        points: pre.doubles.points.map(endoMul),\n      },\n    };\n  }\n  return beta;\n};\n\nPoint.prototype.toJSON = function toJSON() {\n  if (!this.precomputed)\n    return [ this.x, this.y ];\n\n  return [ this.x, this.y, this.precomputed && {\n    doubles: this.precomputed.doubles && {\n      step: this.precomputed.doubles.step,\n      points: this.precomputed.doubles.points.slice(1),\n    },\n    naf: this.precomputed.naf && {\n      wnd: this.precomputed.naf.wnd,\n      points: this.precomputed.naf.points.slice(1),\n    },\n  } ];\n};\n\nPoint.fromJSON = function fromJSON(curve, obj, red) {\n  if (typeof obj === 'string')\n    obj = JSON.parse(obj);\n  var res = curve.point(obj[0], obj[1], red);\n  if (!obj[2])\n    return res;\n\n  function obj2point(obj) {\n    return curve.point(obj[0], obj[1], red);\n  }\n\n  var pre = obj[2];\n  res.precomputed = {\n    beta: null,\n    doubles: pre.doubles && {\n      step: pre.doubles.step,\n      points: [ res ].concat(pre.doubles.points.map(obj2point)),\n    },\n    naf: pre.naf && {\n      wnd: pre.naf.wnd,\n      points: [ res ].concat(pre.naf.points.map(obj2point)),\n    },\n  };\n  return res;\n};\n\nPoint.prototype.inspect = function inspect() {\n  if (this.isInfinity())\n    return '<EC Point Infinity>';\n  return '<EC Point x: ' + this.x.fromRed().toString(16, 2) +\n      ' y: ' + this.y.fromRed().toString(16, 2) + '>';\n};\n\nPoint.prototype.isInfinity = function isInfinity() {\n  return this.inf;\n};\n\nPoint.prototype.add = function add(p) {\n  // O + P = P\n  if (this.inf)\n    return p;\n\n  // P + O = P\n  if (p.inf)\n    return this;\n\n  // P + P = 2P\n  if (this.eq(p))\n    return this.dbl();\n\n  // P + (-P) = O\n  if (this.neg().eq(p))\n    return this.curve.point(null, null);\n\n  // P + Q = O\n  if (this.x.cmp(p.x) === 0)\n    return this.curve.point(null, null);\n\n  var c = this.y.redSub(p.y);\n  if (c.cmpn(0) !== 0)\n    c = c.redMul(this.x.redSub(p.x).redInvm());\n  var nx = c.redSqr().redISub(this.x).redISub(p.x);\n  var ny = c.redMul(this.x.redSub(nx)).redISub(this.y);\n  return this.curve.point(nx, ny);\n};\n\nPoint.prototype.dbl = function dbl() {\n  if (this.inf)\n    return this;\n\n  // 2P = O\n  var ys1 = this.y.redAdd(this.y);\n  if (ys1.cmpn(0) === 0)\n    return this.curve.point(null, null);\n\n  var a = this.curve.a;\n\n  var x2 = this.x.redSqr();\n  var dyinv = ys1.redInvm();\n  var c = x2.redAdd(x2).redIAdd(x2).redIAdd(a).redMul(dyinv);\n\n  var nx = c.redSqr().redISub(this.x.redAdd(this.x));\n  var ny = c.redMul(this.x.redSub(nx)).redISub(this.y);\n  return this.curve.point(nx, ny);\n};\n\nPoint.prototype.getX = function getX() {\n  return this.x.fromRed();\n};\n\nPoint.prototype.getY = function getY() {\n  return this.y.fromRed();\n};\n\nPoint.prototype.mul = function mul(k) {\n  k = new BN(k, 16);\n  if (this.isInfinity())\n    return this;\n  else if (this._hasDoubles(k))\n    return this.curve._fixedNafMul(this, k);\n  else if (this.curve.endo)\n    return this.curve._endoWnafMulAdd([ this ], [ k ]);\n  else\n    return this.curve._wnafMul(this, k);\n};\n\nPoint.prototype.mulAdd = function mulAdd(k1, p2, k2) {\n  var points = [ this, p2 ];\n  var coeffs = [ k1, k2 ];\n  if (this.curve.endo)\n    return this.curve._endoWnafMulAdd(points, coeffs);\n  else\n    return this.curve._wnafMulAdd(1, points, coeffs, 2);\n};\n\nPoint.prototype.jmulAdd = function jmulAdd(k1, p2, k2) {\n  var points = [ this, p2 ];\n  var coeffs = [ k1, k2 ];\n  if (this.curve.endo)\n    return this.curve._endoWnafMulAdd(points, coeffs, true);\n  else\n    return this.curve._wnafMulAdd(1, points, coeffs, 2, true);\n};\n\nPoint.prototype.eq = function eq(p) {\n  return this === p ||\n         this.inf === p.inf &&\n             (this.inf || this.x.cmp(p.x) === 0 && this.y.cmp(p.y) === 0);\n};\n\nPoint.prototype.neg = function neg(_precompute) {\n  if (this.inf)\n    return this;\n\n  var res = this.curve.point(this.x, this.y.redNeg());\n  if (_precompute && this.precomputed) {\n    var pre = this.precomputed;\n    var negate = function(p) {\n      return p.neg();\n    };\n    res.precomputed = {\n      naf: pre.naf && {\n        wnd: pre.naf.wnd,\n        points: pre.naf.points.map(negate),\n      },\n      doubles: pre.doubles && {\n        step: pre.doubles.step,\n        points: pre.doubles.points.map(negate),\n      },\n    };\n  }\n  return res;\n};\n\nPoint.prototype.toJ = function toJ() {\n  if (this.inf)\n    return this.curve.jpoint(null, null, null);\n\n  var res = this.curve.jpoint(this.x, this.y, this.curve.one);\n  return res;\n};\n\nfunction JPoint(curve, x, y, z) {\n  Base.BasePoint.call(this, curve, 'jacobian');\n  if (x === null && y === null && z === null) {\n    this.x = this.curve.one;\n    this.y = this.curve.one;\n    this.z = new BN(0);\n  } else {\n    this.x = new BN(x, 16);\n    this.y = new BN(y, 16);\n    this.z = new BN(z, 16);\n  }\n  if (!this.x.red)\n    this.x = this.x.toRed(this.curve.red);\n  if (!this.y.red)\n    this.y = this.y.toRed(this.curve.red);\n  if (!this.z.red)\n    this.z = this.z.toRed(this.curve.red);\n\n  this.zOne = this.z === this.curve.one;\n}\ninherits(JPoint, Base.BasePoint);\n\nShortCurve.prototype.jpoint = function jpoint(x, y, z) {\n  return new JPoint(this, x, y, z);\n};\n\nJPoint.prototype.toP = function toP() {\n  if (this.isInfinity())\n    return this.curve.point(null, null);\n\n  var zinv = this.z.redInvm();\n  var zinv2 = zinv.redSqr();\n  var ax = this.x.redMul(zinv2);\n  var ay = this.y.redMul(zinv2).redMul(zinv);\n\n  return this.curve.point(ax, ay);\n};\n\nJPoint.prototype.neg = function neg() {\n  return this.curve.jpoint(this.x, this.y.redNeg(), this.z);\n};\n\nJPoint.prototype.add = function add(p) {\n  // O + P = P\n  if (this.isInfinity())\n    return p;\n\n  // P + O = P\n  if (p.isInfinity())\n    return this;\n\n  // 12M + 4S + 7A\n  var pz2 = p.z.redSqr();\n  var z2 = this.z.redSqr();\n  var u1 = this.x.redMul(pz2);\n  var u2 = p.x.redMul(z2);\n  var s1 = this.y.redMul(pz2.redMul(p.z));\n  var s2 = p.y.redMul(z2.redMul(this.z));\n\n  var h = u1.redSub(u2);\n  var r = s1.redSub(s2);\n  if (h.cmpn(0) === 0) {\n    if (r.cmpn(0) !== 0)\n      return this.curve.jpoint(null, null, null);\n    else\n      return this.dbl();\n  }\n\n  var h2 = h.redSqr();\n  var h3 = h2.redMul(h);\n  var v = u1.redMul(h2);\n\n  var nx = r.redSqr().redIAdd(h3).redISub(v).redISub(v);\n  var ny = r.redMul(v.redISub(nx)).redISub(s1.redMul(h3));\n  var nz = this.z.redMul(p.z).redMul(h);\n\n  return this.curve.jpoint(nx, ny, nz);\n};\n\nJPoint.prototype.mixedAdd = function mixedAdd(p) {\n  // O + P = P\n  if (this.isInfinity())\n    return p.toJ();\n\n  // P + O = P\n  if (p.isInfinity())\n    return this;\n\n  // 8M + 3S + 7A\n  var z2 = this.z.redSqr();\n  var u1 = this.x;\n  var u2 = p.x.redMul(z2);\n  var s1 = this.y;\n  var s2 = p.y.redMul(z2).redMul(this.z);\n\n  var h = u1.redSub(u2);\n  var r = s1.redSub(s2);\n  if (h.cmpn(0) === 0) {\n    if (r.cmpn(0) !== 0)\n      return this.curve.jpoint(null, null, null);\n    else\n      return this.dbl();\n  }\n\n  var h2 = h.redSqr();\n  var h3 = h2.redMul(h);\n  var v = u1.redMul(h2);\n\n  var nx = r.redSqr().redIAdd(h3).redISub(v).redISub(v);\n  var ny = r.redMul(v.redISub(nx)).redISub(s1.redMul(h3));\n  var nz = this.z.redMul(h);\n\n  return this.curve.jpoint(nx, ny, nz);\n};\n\nJPoint.prototype.dblp = function dblp(pow) {\n  if (pow === 0)\n    return this;\n  if (this.isInfinity())\n    return this;\n  if (!pow)\n    return this.dbl();\n\n  var i;\n  if (this.curve.zeroA || this.curve.threeA) {\n    var r = this;\n    for (i = 0; i < pow; i++)\n      r = r.dbl();\n    return r;\n  }\n\n  // 1M + 2S + 1A + N * (4S + 5M + 8A)\n  // N = 1 => 6M + 6S + 9A\n  var a = this.curve.a;\n  var tinv = this.curve.tinv;\n\n  var jx = this.x;\n  var jy = this.y;\n  var jz = this.z;\n  var jz4 = jz.redSqr().redSqr();\n\n  // Reuse results\n  var jyd = jy.redAdd(jy);\n  for (i = 0; i < pow; i++) {\n    var jx2 = jx.redSqr();\n    var jyd2 = jyd.redSqr();\n    var jyd4 = jyd2.redSqr();\n    var c = jx2.redAdd(jx2).redIAdd(jx2).redIAdd(a.redMul(jz4));\n\n    var t1 = jx.redMul(jyd2);\n    var nx = c.redSqr().redISub(t1.redAdd(t1));\n    var t2 = t1.redISub(nx);\n    var dny = c.redMul(t2);\n    dny = dny.redIAdd(dny).redISub(jyd4);\n    var nz = jyd.redMul(jz);\n    if (i + 1 < pow)\n      jz4 = jz4.redMul(jyd4);\n\n    jx = nx;\n    jz = nz;\n    jyd = dny;\n  }\n\n  return this.curve.jpoint(jx, jyd.redMul(tinv), jz);\n};\n\nJPoint.prototype.dbl = function dbl() {\n  if (this.isInfinity())\n    return this;\n\n  if (this.curve.zeroA)\n    return this._zeroDbl();\n  else if (this.curve.threeA)\n    return this._threeDbl();\n  else\n    return this._dbl();\n};\n\nJPoint.prototype._zeroDbl = function _zeroDbl() {\n  var nx;\n  var ny;\n  var nz;\n  // Z = 1\n  if (this.zOne) {\n    // hyperelliptic.org/EFD/g1p/auto-shortw-jacobian-0.html\n    //     #doubling-mdbl-2007-bl\n    // 1M + 5S + 14A\n\n    // XX = X1^2\n    var xx = this.x.redSqr();\n    // YY = Y1^2\n    var yy = this.y.redSqr();\n    // YYYY = YY^2\n    var yyyy = yy.redSqr();\n    // S = 2 * ((X1 + YY)^2 - XX - YYYY)\n    var s = this.x.redAdd(yy).redSqr().redISub(xx).redISub(yyyy);\n    s = s.redIAdd(s);\n    // M = 3 * XX + a; a = 0\n    var m = xx.redAdd(xx).redIAdd(xx);\n    // T = M ^ 2 - 2*S\n    var t = m.redSqr().redISub(s).redISub(s);\n\n    // 8 * YYYY\n    var yyyy8 = yyyy.redIAdd(yyyy);\n    yyyy8 = yyyy8.redIAdd(yyyy8);\n    yyyy8 = yyyy8.redIAdd(yyyy8);\n\n    // X3 = T\n    nx = t;\n    // Y3 = M * (S - T) - 8 * YYYY\n    ny = m.redMul(s.redISub(t)).redISub(yyyy8);\n    // Z3 = 2*Y1\n    nz = this.y.redAdd(this.y);\n  } else {\n    // hyperelliptic.org/EFD/g1p/auto-shortw-jacobian-0.html\n    //     #doubling-dbl-2009-l\n    // 2M + 5S + 13A\n\n    // A = X1^2\n    var a = this.x.redSqr();\n    // B = Y1^2\n    var b = this.y.redSqr();\n    // C = B^2\n    var c = b.redSqr();\n    // D = 2 * ((X1 + B)^2 - A - C)\n    var d = this.x.redAdd(b).redSqr().redISub(a).redISub(c);\n    d = d.redIAdd(d);\n    // E = 3 * A\n    var e = a.redAdd(a).redIAdd(a);\n    // F = E^2\n    var f = e.redSqr();\n\n    // 8 * C\n    var c8 = c.redIAdd(c);\n    c8 = c8.redIAdd(c8);\n    c8 = c8.redIAdd(c8);\n\n    // X3 = F - 2 * D\n    nx = f.redISub(d).redISub(d);\n    // Y3 = E * (D - X3) - 8 * C\n    ny = e.redMul(d.redISub(nx)).redISub(c8);\n    // Z3 = 2 * Y1 * Z1\n    nz = this.y.redMul(this.z);\n    nz = nz.redIAdd(nz);\n  }\n\n  return this.curve.jpoint(nx, ny, nz);\n};\n\nJPoint.prototype._threeDbl = function _threeDbl() {\n  var nx;\n  var ny;\n  var nz;\n  // Z = 1\n  if (this.zOne) {\n    // hyperelliptic.org/EFD/g1p/auto-shortw-jacobian-3.html\n    //     #doubling-mdbl-2007-bl\n    // 1M + 5S + 15A\n\n    // XX = X1^2\n    var xx = this.x.redSqr();\n    // YY = Y1^2\n    var yy = this.y.redSqr();\n    // YYYY = YY^2\n    var yyyy = yy.redSqr();\n    // S = 2 * ((X1 + YY)^2 - XX - YYYY)\n    var s = this.x.redAdd(yy).redSqr().redISub(xx).redISub(yyyy);\n    s = s.redIAdd(s);\n    // M = 3 * XX + a\n    var m = xx.redAdd(xx).redIAdd(xx).redIAdd(this.curve.a);\n    // T = M^2 - 2 * S\n    var t = m.redSqr().redISub(s).redISub(s);\n    // X3 = T\n    nx = t;\n    // Y3 = M * (S - T) - 8 * YYYY\n    var yyyy8 = yyyy.redIAdd(yyyy);\n    yyyy8 = yyyy8.redIAdd(yyyy8);\n    yyyy8 = yyyy8.redIAdd(yyyy8);\n    ny = m.redMul(s.redISub(t)).redISub(yyyy8);\n    // Z3 = 2 * Y1\n    nz = this.y.redAdd(this.y);\n  } else {\n    // hyperelliptic.org/EFD/g1p/auto-shortw-jacobian-3.html#doubling-dbl-2001-b\n    // 3M + 5S\n\n    // delta = Z1^2\n    var delta = this.z.redSqr();\n    // gamma = Y1^2\n    var gamma = this.y.redSqr();\n    // beta = X1 * gamma\n    var beta = this.x.redMul(gamma);\n    // alpha = 3 * (X1 - delta) * (X1 + delta)\n    var alpha = this.x.redSub(delta).redMul(this.x.redAdd(delta));\n    alpha = alpha.redAdd(alpha).redIAdd(alpha);\n    // X3 = alpha^2 - 8 * beta\n    var beta4 = beta.redIAdd(beta);\n    beta4 = beta4.redIAdd(beta4);\n    var beta8 = beta4.redAdd(beta4);\n    nx = alpha.redSqr().redISub(beta8);\n    // Z3 = (Y1 + Z1)^2 - gamma - delta\n    nz = this.y.redAdd(this.z).redSqr().redISub(gamma).redISub(delta);\n    // Y3 = alpha * (4 * beta - X3) - 8 * gamma^2\n    var ggamma8 = gamma.redSqr();\n    ggamma8 = ggamma8.redIAdd(ggamma8);\n    ggamma8 = ggamma8.redIAdd(ggamma8);\n    ggamma8 = ggamma8.redIAdd(ggamma8);\n    ny = alpha.redMul(beta4.redISub(nx)).redISub(ggamma8);\n  }\n\n  return this.curve.jpoint(nx, ny, nz);\n};\n\nJPoint.prototype._dbl = function _dbl() {\n  var a = this.curve.a;\n\n  // 4M + 6S + 10A\n  var jx = this.x;\n  var jy = this.y;\n  var jz = this.z;\n  var jz4 = jz.redSqr().redSqr();\n\n  var jx2 = jx.redSqr();\n  var jy2 = jy.redSqr();\n\n  var c = jx2.redAdd(jx2).redIAdd(jx2).redIAdd(a.redMul(jz4));\n\n  var jxd4 = jx.redAdd(jx);\n  jxd4 = jxd4.redIAdd(jxd4);\n  var t1 = jxd4.redMul(jy2);\n  var nx = c.redSqr().redISub(t1.redAdd(t1));\n  var t2 = t1.redISub(nx);\n\n  var jyd8 = jy2.redSqr();\n  jyd8 = jyd8.redIAdd(jyd8);\n  jyd8 = jyd8.redIAdd(jyd8);\n  jyd8 = jyd8.redIAdd(jyd8);\n  var ny = c.redMul(t2).redISub(jyd8);\n  var nz = jy.redAdd(jy).redMul(jz);\n\n  return this.curve.jpoint(nx, ny, nz);\n};\n\nJPoint.prototype.trpl = function trpl() {\n  if (!this.curve.zeroA)\n    return this.dbl().add(this);\n\n  // hyperelliptic.org/EFD/g1p/auto-shortw-jacobian-0.html#tripling-tpl-2007-bl\n  // 5M + 10S + ...\n\n  // XX = X1^2\n  var xx = this.x.redSqr();\n  // YY = Y1^2\n  var yy = this.y.redSqr();\n  // ZZ = Z1^2\n  var zz = this.z.redSqr();\n  // YYYY = YY^2\n  var yyyy = yy.redSqr();\n  // M = 3 * XX + a * ZZ2; a = 0\n  var m = xx.redAdd(xx).redIAdd(xx);\n  // MM = M^2\n  var mm = m.redSqr();\n  // E = 6 * ((X1 + YY)^2 - XX - YYYY) - MM\n  var e = this.x.redAdd(yy).redSqr().redISub(xx).redISub(yyyy);\n  e = e.redIAdd(e);\n  e = e.redAdd(e).redIAdd(e);\n  e = e.redISub(mm);\n  // EE = E^2\n  var ee = e.redSqr();\n  // T = 16*YYYY\n  var t = yyyy.redIAdd(yyyy);\n  t = t.redIAdd(t);\n  t = t.redIAdd(t);\n  t = t.redIAdd(t);\n  // U = (M + E)^2 - MM - EE - T\n  var u = m.redIAdd(e).redSqr().redISub(mm).redISub(ee).redISub(t);\n  // X3 = 4 * (X1 * EE - 4 * YY * U)\n  var yyu4 = yy.redMul(u);\n  yyu4 = yyu4.redIAdd(yyu4);\n  yyu4 = yyu4.redIAdd(yyu4);\n  var nx = this.x.redMul(ee).redISub(yyu4);\n  nx = nx.redIAdd(nx);\n  nx = nx.redIAdd(nx);\n  // Y3 = 8 * Y1 * (U * (T - U) - E * EE)\n  var ny = this.y.redMul(u.redMul(t.redISub(u)).redISub(e.redMul(ee)));\n  ny = ny.redIAdd(ny);\n  ny = ny.redIAdd(ny);\n  ny = ny.redIAdd(ny);\n  // Z3 = (Z1 + E)^2 - ZZ - EE\n  var nz = this.z.redAdd(e).redSqr().redISub(zz).redISub(ee);\n\n  return this.curve.jpoint(nx, ny, nz);\n};\n\nJPoint.prototype.mul = function mul(k, kbase) {\n  k = new BN(k, kbase);\n\n  return this.curve._wnafMul(this, k);\n};\n\nJPoint.prototype.eq = function eq(p) {\n  if (p.type === 'affine')\n    return this.eq(p.toJ());\n\n  if (this === p)\n    return true;\n\n  // x1 * z2^2 == x2 * z1^2\n  var z2 = this.z.redSqr();\n  var pz2 = p.z.redSqr();\n  if (this.x.redMul(pz2).redISub(p.x.redMul(z2)).cmpn(0) !== 0)\n    return false;\n\n  // y1 * z2^3 == y2 * z1^3\n  var z3 = z2.redMul(this.z);\n  var pz3 = pz2.redMul(p.z);\n  return this.y.redMul(pz3).redISub(p.y.redMul(z3)).cmpn(0) === 0;\n};\n\nJPoint.prototype.eqXToP = function eqXToP(x) {\n  var zs = this.z.redSqr();\n  var rx = x.toRed(this.curve.red).redMul(zs);\n  if (this.x.cmp(rx) === 0)\n    return true;\n\n  var xc = x.clone();\n  var t = this.curve.redN.redMul(zs);\n  for (;;) {\n    xc.iadd(this.curve.n);\n    if (xc.cmp(this.curve.p) >= 0)\n      return false;\n\n    rx.redIAdd(t);\n    if (this.x.cmp(rx) === 0)\n      return true;\n  }\n};\n\nJPoint.prototype.inspect = function inspect() {\n  if (this.isInfinity())\n    return '<EC JPoint Infinity>';\n  return '<EC JPoint x: ' + this.x.toString(16, 2) +\n      ' y: ' + this.y.toString(16, 2) +\n      ' z: ' + this.z.toString(16, 2) + '>';\n};\n\nJPoint.prototype.isInfinity = function isInfinity() {\n  // XXX This code assumes that zero is always zero in red\n  return this.z.cmpn(0) === 0;\n};\n","'use strict';\n\nvar curves = exports;\n\nvar hash = require('hash.js');\nvar curve = require('./curve');\nvar utils = require('./utils');\n\nvar assert = utils.assert;\n\nfunction PresetCurve(options) {\n  if (options.type === 'short')\n    this.curve = new curve.short(options);\n  else if (options.type === 'edwards')\n    this.curve = new curve.edwards(options);\n  else\n    this.curve = new curve.mont(options);\n  this.g = this.curve.g;\n  this.n = this.curve.n;\n  this.hash = options.hash;\n\n  assert(this.g.validate(), 'Invalid curve');\n  assert(this.g.mul(this.n).isInfinity(), 'Invalid curve, G*N != O');\n}\ncurves.PresetCurve = PresetCurve;\n\nfunction defineCurve(name, options) {\n  Object.defineProperty(curves, name, {\n    configurable: true,\n    enumerable: true,\n    get: function() {\n      var curve = new PresetCurve(options);\n      Object.defineProperty(curves, name, {\n        configurable: true,\n        enumerable: true,\n        value: curve,\n      });\n      return curve;\n    },\n  });\n}\n\ndefineCurve('p192', {\n  type: 'short',\n  prime: 'p192',\n  p: 'ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff',\n  a: 'ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc',\n  b: '64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1',\n  n: 'ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831',\n  hash: hash.sha256,\n  gRed: false,\n  g: [\n    '188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012',\n    '07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811',\n  ],\n});\n\ndefineCurve('p224', {\n  type: 'short',\n  prime: 'p224',\n  p: 'ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001',\n  a: 'ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe',\n  b: 'b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4',\n  n: 'ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d',\n  hash: hash.sha256,\n  gRed: false,\n  g: [\n    'b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21',\n    'bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34',\n  ],\n});\n\ndefineCurve('p256', {\n  type: 'short',\n  prime: null,\n  p: 'ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff',\n  a: 'ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc',\n  b: '5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b',\n  n: 'ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551',\n  hash: hash.sha256,\n  gRed: false,\n  g: [\n    '6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296',\n    '4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5',\n  ],\n});\n\ndefineCurve('p384', {\n  type: 'short',\n  prime: null,\n  p: 'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ' +\n     'fffffffe ffffffff 00000000 00000000 ffffffff',\n  a: 'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ' +\n     'fffffffe ffffffff 00000000 00000000 fffffffc',\n  b: 'b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f ' +\n     '5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef',\n  n: 'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 ' +\n     'f4372ddf 581a0db2 48b0a77a ecec196a ccc52973',\n  hash: hash.sha384,\n  gRed: false,\n  g: [\n    'aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 ' +\n    '5502f25d bf55296c 3a545e38 72760ab7',\n    '3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 ' +\n    '0a60b1ce 1d7e819d 7a431d7c 90ea0e5f',\n  ],\n});\n\ndefineCurve('p521', {\n  type: 'short',\n  prime: null,\n  p: '000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ' +\n     'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ' +\n     'ffffffff ffffffff ffffffff ffffffff ffffffff',\n  a: '000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ' +\n     'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ' +\n     'ffffffff ffffffff ffffffff ffffffff fffffffc',\n  b: '00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b ' +\n     '99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd ' +\n     '3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00',\n  n: '000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ' +\n     'ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 ' +\n     'f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409',\n  hash: hash.sha512,\n  gRed: false,\n  g: [\n    '000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 ' +\n    '053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 ' +\n    'a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66',\n    '00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 ' +\n    '579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 ' +\n    '3fad0761 353c7086 a272c240 88be9476 9fd16650',\n  ],\n});\n\ndefineCurve('curve25519', {\n  type: 'mont',\n  prime: 'p25519',\n  p: '7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed',\n  a: '76d06',\n  b: '1',\n  n: '1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed',\n  hash: hash.sha256,\n  gRed: false,\n  g: [\n    '9',\n  ],\n});\n\ndefineCurve('ed25519', {\n  type: 'edwards',\n  prime: 'p25519',\n  p: '7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed',\n  a: '-1',\n  c: '1',\n  // -121665 * (121666^(-1)) (mod P)\n  d: '52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3',\n  n: '1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed',\n  hash: hash.sha256,\n  gRed: false,\n  g: [\n    '216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a',\n\n    // 4/5\n    '6666666666666666666666666666666666666666666666666666666666666658',\n  ],\n});\n\nvar pre;\ntry {\n  pre = require('./precomputed/secp256k1');\n} catch (e) {\n  pre = undefined;\n}\n\ndefineCurve('secp256k1', {\n  type: 'short',\n  prime: 'k256',\n  p: 'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f',\n  a: '0',\n  b: '7',\n  n: 'ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141',\n  h: '1',\n  hash: hash.sha256,\n\n  // Precomputed endomorphism\n  beta: '7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee',\n  lambda: '5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72',\n  basis: [\n    {\n      a: '3086d221a7d46bcde86c90e49284eb15',\n      b: '-e4437ed6010e88286f547fa90abfe4c3',\n    },\n    {\n      a: '114ca50f7a8e2f3f657c1108d9d44cfd8',\n      b: '3086d221a7d46bcde86c90e49284eb15',\n    },\n  ],\n\n  gRed: false,\n  g: [\n    '79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798',\n    '483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8',\n    pre,\n  ],\n});\n","'use strict';\n\nvar BN = require('bn.js');\nvar HmacDRBG = require('hmac-drbg');\nvar utils = require('../utils');\nvar curves = require('../curves');\nvar rand = require('brorand');\nvar assert = utils.assert;\n\nvar KeyPair = require('./key');\nvar Signature = require('./signature');\n\nfunction EC(options) {\n  if (!(this instanceof EC))\n    return new EC(options);\n\n  // Shortcut `elliptic.ec(curve-name)`\n  if (typeof options === 'string') {\n    assert(Object.prototype.hasOwnProperty.call(curves, options),\n      'Unknown curve ' + options);\n\n    options = curves[options];\n  }\n\n  // Shortcut for `elliptic.ec(elliptic.curves.curveName)`\n  if (options instanceof curves.PresetCurve)\n    options = { curve: options };\n\n  this.curve = options.curve.curve;\n  this.n = this.curve.n;\n  this.nh = this.n.ushrn(1);\n  this.g = this.curve.g;\n\n  // Point on curve\n  this.g = options.curve.g;\n  this.g.precompute(options.curve.n.bitLength() + 1);\n\n  // Hash for function for DRBG\n  this.hash = options.hash || options.curve.hash;\n}\nmodule.exports = EC;\n\nEC.prototype.keyPair = function keyPair(options) {\n  return new KeyPair(this, options);\n};\n\nEC.prototype.keyFromPrivate = function keyFromPrivate(priv, enc) {\n  return KeyPair.fromPrivate(this, priv, enc);\n};\n\nEC.prototype.keyFromPublic = function keyFromPublic(pub, enc) {\n  return KeyPair.fromPublic(this, pub, enc);\n};\n\nEC.prototype.genKeyPair = function genKeyPair(options) {\n  if (!options)\n    options = {};\n\n  // Instantiate Hmac_DRBG\n  var drbg = new HmacDRBG({\n    hash: this.hash,\n    pers: options.pers,\n    persEnc: options.persEnc || 'utf8',\n    entropy: options.entropy || rand(this.hash.hmacStrength),\n    entropyEnc: options.entropy && options.entropyEnc || 'utf8',\n    nonce: this.n.toArray(),\n  });\n\n  var bytes = this.n.byteLength();\n  var ns2 = this.n.sub(new BN(2));\n  for (;;) {\n    var priv = new BN(drbg.generate(bytes));\n    if (priv.cmp(ns2) > 0)\n      continue;\n\n    priv.iaddn(1);\n    return this.keyFromPrivate(priv);\n  }\n};\n\nEC.prototype._truncateToN = function _truncateToN(msg, truncOnly) {\n  var delta = msg.byteLength() * 8 - this.n.bitLength();\n  if (delta > 0)\n    msg = msg.ushrn(delta);\n  if (!truncOnly && msg.cmp(this.n) >= 0)\n    return msg.sub(this.n);\n  else\n    return msg;\n};\n\nEC.prototype.sign = function sign(msg, key, enc, options) {\n  if (typeof enc === 'object') {\n    options = enc;\n    enc = null;\n  }\n  if (!options)\n    options = {};\n\n  key = this.keyFromPrivate(key, enc);\n  msg = this._truncateToN(new BN(msg, 16));\n\n  // Zero-extend key to provide enough entropy\n  var bytes = this.n.byteLength();\n  var bkey = key.getPrivate().toArray('be', bytes);\n\n  // Zero-extend nonce to have the same byte size as N\n  var nonce = msg.toArray('be', bytes);\n\n  // Instantiate Hmac_DRBG\n  var drbg = new HmacDRBG({\n    hash: this.hash,\n    entropy: bkey,\n    nonce: nonce,\n    pers: options.pers,\n    persEnc: options.persEnc || 'utf8',\n  });\n\n  // Number of bytes to generate\n  var ns1 = this.n.sub(new BN(1));\n\n  for (var iter = 0; ; iter++) {\n    var k = options.k ?\n      options.k(iter) :\n      new BN(drbg.generate(this.n.byteLength()));\n    k = this._truncateToN(k, true);\n    if (k.cmpn(1) <= 0 || k.cmp(ns1) >= 0)\n      continue;\n\n    var kp = this.g.mul(k);\n    if (kp.isInfinity())\n      continue;\n\n    var kpX = kp.getX();\n    var r = kpX.umod(this.n);\n    if (r.cmpn(0) === 0)\n      continue;\n\n    var s = k.invm(this.n).mul(r.mul(key.getPrivate()).iadd(msg));\n    s = s.umod(this.n);\n    if (s.cmpn(0) === 0)\n      continue;\n\n    var recoveryParam = (kp.getY().isOdd() ? 1 : 0) |\n                        (kpX.cmp(r) !== 0 ? 2 : 0);\n\n    // Use complement of `s`, if it is > `n / 2`\n    if (options.canonical && s.cmp(this.nh) > 0) {\n      s = this.n.sub(s);\n      recoveryParam ^= 1;\n    }\n\n    return new Signature({ r: r, s: s, recoveryParam: recoveryParam });\n  }\n};\n\nEC.prototype.verify = function verify(msg, signature, key, enc) {\n  msg = this._truncateToN(new BN(msg, 16));\n  key = this.keyFromPublic(key, enc);\n  signature = new Signature(signature, 'hex');\n\n  // Perform primitive values validation\n  var r = signature.r;\n  var s = signature.s;\n  if (r.cmpn(1) < 0 || r.cmp(this.n) >= 0)\n    return false;\n  if (s.cmpn(1) < 0 || s.cmp(this.n) >= 0)\n    return false;\n\n  // Validate signature\n  var sinv = s.invm(this.n);\n  var u1 = sinv.mul(msg).umod(this.n);\n  var u2 = sinv.mul(r).umod(this.n);\n  var p;\n\n  if (!this.curve._maxwellTrick) {\n    p = this.g.mulAdd(u1, key.getPublic(), u2);\n    if (p.isInfinity())\n      return false;\n\n    return p.getX().umod(this.n).cmp(r) === 0;\n  }\n\n  // NOTE: Greg Maxwell's trick, inspired by:\n  // https://git.io/vad3K\n\n  p = this.g.jmulAdd(u1, key.getPublic(), u2);\n  if (p.isInfinity())\n    return false;\n\n  // Compare `p.x` of Jacobian point with `r`,\n  // this will do `p.x == r * p.z^2` instead of multiplying `p.x` by the\n  // inverse of `p.z^2`\n  return p.eqXToP(r);\n};\n\nEC.prototype.recoverPubKey = function(msg, signature, j, enc) {\n  assert((3 & j) === j, 'The recovery param is more than two bits');\n  signature = new Signature(signature, enc);\n\n  var n = this.n;\n  var e = new BN(msg);\n  var r = signature.r;\n  var s = signature.s;\n\n  // A set LSB signifies that the y-coordinate is odd\n  var isYOdd = j & 1;\n  var isSecondKey = j >> 1;\n  if (r.cmp(this.curve.p.umod(this.curve.n)) >= 0 && isSecondKey)\n    throw new Error('Unable to find sencond key candinate');\n\n  // 1.1. Let x = r + jn.\n  if (isSecondKey)\n    r = this.curve.pointFromX(r.add(this.curve.n), isYOdd);\n  else\n    r = this.curve.pointFromX(r, isYOdd);\n\n  var rInv = signature.r.invm(n);\n  var s1 = n.sub(e).mul(rInv).umod(n);\n  var s2 = s.mul(rInv).umod(n);\n\n  // 1.6.1 Compute Q = r^-1 (sR -  eG)\n  //               Q = r^-1 (sR + -eG)\n  return this.g.mulAdd(s1, r, s2);\n};\n\nEC.prototype.getKeyRecoveryParam = function(e, signature, Q, enc) {\n  signature = new Signature(signature, enc);\n  if (signature.recoveryParam !== null)\n    return signature.recoveryParam;\n\n  for (var i = 0; i < 4; i++) {\n    var Qprime;\n    try {\n      Qprime = this.recoverPubKey(e, signature, i);\n    } catch (e) {\n      continue;\n    }\n\n    if (Qprime.eq(Q))\n      return i;\n  }\n  throw new Error('Unable to find valid recovery factor');\n};\n","'use strict';\n\nvar BN = require('bn.js');\nvar utils = require('../utils');\nvar assert = utils.assert;\n\nfunction KeyPair(ec, options) {\n  this.ec = ec;\n  this.priv = null;\n  this.pub = null;\n\n  // KeyPair(ec, { priv: ..., pub: ... })\n  if (options.priv)\n    this._importPrivate(options.priv, options.privEnc);\n  if (options.pub)\n    this._importPublic(options.pub, options.pubEnc);\n}\nmodule.exports = KeyPair;\n\nKeyPair.fromPublic = function fromPublic(ec, pub, enc) {\n  if (pub instanceof KeyPair)\n    return pub;\n\n  return new KeyPair(ec, {\n    pub: pub,\n    pubEnc: enc,\n  });\n};\n\nKeyPair.fromPrivate = function fromPrivate(ec, priv, enc) {\n  if (priv instanceof KeyPair)\n    return priv;\n\n  return new KeyPair(ec, {\n    priv: priv,\n    privEnc: enc,\n  });\n};\n\nKeyPair.prototype.validate = function validate() {\n  var pub = this.getPublic();\n\n  if (pub.isInfinity())\n    return { result: false, reason: 'Invalid public key' };\n  if (!pub.validate())\n    return { result: false, reason: 'Public key is not a point' };\n  if (!pub.mul(this.ec.curve.n).isInfinity())\n    return { result: false, reason: 'Public key * N != O' };\n\n  return { result: true, reason: null };\n};\n\nKeyPair.prototype.getPublic = function getPublic(compact, enc) {\n  // compact is optional argument\n  if (typeof compact === 'string') {\n    enc = compact;\n    compact = null;\n  }\n\n  if (!this.pub)\n    this.pub = this.ec.g.mul(this.priv);\n\n  if (!enc)\n    return this.pub;\n\n  return this.pub.encode(enc, compact);\n};\n\nKeyPair.prototype.getPrivate = function getPrivate(enc) {\n  if (enc === 'hex')\n    return this.priv.toString(16, 2);\n  else\n    return this.priv;\n};\n\nKeyPair.prototype._importPrivate = function _importPrivate(key, enc) {\n  this.priv = new BN(key, enc || 16);\n\n  // Ensure that the priv won't be bigger than n, otherwise we may fail\n  // in fixed multiplication method\n  this.priv = this.priv.umod(this.ec.curve.n);\n};\n\nKeyPair.prototype._importPublic = function _importPublic(key, enc) {\n  if (key.x || key.y) {\n    // Montgomery points only have an `x` coordinate.\n    // Weierstrass/Edwards points on the other hand have both `x` and\n    // `y` coordinates.\n    if (this.ec.curve.type === 'mont') {\n      assert(key.x, 'Need x coordinate');\n    } else if (this.ec.curve.type === 'short' ||\n               this.ec.curve.type === 'edwards') {\n      assert(key.x && key.y, 'Need both x and y coordinate');\n    }\n    this.pub = this.ec.curve.point(key.x, key.y);\n    return;\n  }\n  this.pub = this.ec.curve.decodePoint(key, enc);\n};\n\n// ECDH\nKeyPair.prototype.derive = function derive(pub) {\n  if(!pub.validate()) {\n    assert(pub.validate(), 'public point not validated');\n  }\n  return pub.mul(this.priv).getX();\n};\n\n// ECDSA\nKeyPair.prototype.sign = function sign(msg, enc, options) {\n  return this.ec.sign(msg, this, enc, options);\n};\n\nKeyPair.prototype.verify = function verify(msg, signature) {\n  return this.ec.verify(msg, signature, this);\n};\n\nKeyPair.prototype.inspect = function inspect() {\n  return '<Key priv: ' + (this.priv && this.priv.toString(16, 2)) +\n         ' pub: ' + (this.pub && this.pub.inspect()) + ' >';\n};\n","'use strict';\n\nvar BN = require('bn.js');\n\nvar utils = require('../utils');\nvar assert = utils.assert;\n\nfunction Signature(options, enc) {\n  if (options instanceof Signature)\n    return options;\n\n  if (this._importDER(options, enc))\n    return;\n\n  assert(options.r && options.s, 'Signature without r or s');\n  this.r = new BN(options.r, 16);\n  this.s = new BN(options.s, 16);\n  if (options.recoveryParam === undefined)\n    this.recoveryParam = null;\n  else\n    this.recoveryParam = options.recoveryParam;\n}\nmodule.exports = Signature;\n\nfunction Position() {\n  this.place = 0;\n}\n\nfunction getLength(buf, p) {\n  var initial = buf[p.place++];\n  if (!(initial & 0x80)) {\n    return initial;\n  }\n  var octetLen = initial & 0xf;\n\n  // Indefinite length or overflow\n  if (octetLen === 0 || octetLen > 4) {\n    return false;\n  }\n\n  var val = 0;\n  for (var i = 0, off = p.place; i < octetLen; i++, off++) {\n    val <<= 8;\n    val |= buf[off];\n    val >>>= 0;\n  }\n\n  // Leading zeroes\n  if (val <= 0x7f) {\n    return false;\n  }\n\n  p.place = off;\n  return val;\n}\n\nfunction rmPadding(buf) {\n  var i = 0;\n  var len = buf.length - 1;\n  while (!buf[i] && !(buf[i + 1] & 0x80) && i < len) {\n    i++;\n  }\n  if (i === 0) {\n    return buf;\n  }\n  return buf.slice(i);\n}\n\nSignature.prototype._importDER = function _importDER(data, enc) {\n  data = utils.toArray(data, enc);\n  var p = new Position();\n  if (data[p.place++] !== 0x30) {\n    return false;\n  }\n  var len = getLength(data, p);\n  if (len === false) {\n    return false;\n  }\n  if ((len + p.place) !== data.length) {\n    return false;\n  }\n  if (data[p.place++] !== 0x02) {\n    return false;\n  }\n  var rlen = getLength(data, p);\n  if (rlen === false) {\n    return false;\n  }\n  var r = data.slice(p.place, rlen + p.place);\n  p.place += rlen;\n  if (data[p.place++] !== 0x02) {\n    return false;\n  }\n  var slen = getLength(data, p);\n  if (slen === false) {\n    return false;\n  }\n  if (data.length !== slen + p.place) {\n    return false;\n  }\n  var s = data.slice(p.place, slen + p.place);\n  if (r[0] === 0) {\n    if (r[1] & 0x80) {\n      r = r.slice(1);\n    } else {\n      // Leading zeroes\n      return false;\n    }\n  }\n  if (s[0] === 0) {\n    if (s[1] & 0x80) {\n      s = s.slice(1);\n    } else {\n      // Leading zeroes\n      return false;\n    }\n  }\n\n  this.r = new BN(r);\n  this.s = new BN(s);\n  this.recoveryParam = null;\n\n  return true;\n};\n\nfunction constructLength(arr, len) {\n  if (len < 0x80) {\n    arr.push(len);\n    return;\n  }\n  var octets = 1 + (Math.log(len) / Math.LN2 >>> 3);\n  arr.push(octets | 0x80);\n  while (--octets) {\n    arr.push((len >>> (octets << 3)) & 0xff);\n  }\n  arr.push(len);\n}\n\nSignature.prototype.toDER = function toDER(enc) {\n  var r = this.r.toArray();\n  var s = this.s.toArray();\n\n  // Pad values\n  if (r[0] & 0x80)\n    r = [ 0 ].concat(r);\n  // Pad values\n  if (s[0] & 0x80)\n    s = [ 0 ].concat(s);\n\n  r = rmPadding(r);\n  s = rmPadding(s);\n\n  while (!s[0] && !(s[1] & 0x80)) {\n    s = s.slice(1);\n  }\n  var arr = [ 0x02 ];\n  constructLength(arr, r.length);\n  arr = arr.concat(r);\n  arr.push(0x02);\n  constructLength(arr, s.length);\n  var backHalf = arr.concat(s);\n  var res = [ 0x30 ];\n  constructLength(res, backHalf.length);\n  res = res.concat(backHalf);\n  return utils.encode(res, enc);\n};\n","'use strict';\n\nvar hash = require('hash.js');\nvar curves = require('../curves');\nvar utils = require('../utils');\nvar assert = utils.assert;\nvar parseBytes = utils.parseBytes;\nvar KeyPair = require('./key');\nvar Signature = require('./signature');\n\nfunction EDDSA(curve) {\n  assert(curve === 'ed25519', 'only tested with ed25519 so far');\n\n  if (!(this instanceof EDDSA))\n    return new EDDSA(curve);\n\n  curve = curves[curve].curve;\n  this.curve = curve;\n  this.g = curve.g;\n  this.g.precompute(curve.n.bitLength() + 1);\n\n  this.pointClass = curve.point().constructor;\n  this.encodingLength = Math.ceil(curve.n.bitLength() / 8);\n  this.hash = hash.sha512;\n}\n\nmodule.exports = EDDSA;\n\n/**\n* @param {Array|String} message - message bytes\n* @param {Array|String|KeyPair} secret - secret bytes or a keypair\n* @returns {Signature} - signature\n*/\nEDDSA.prototype.sign = function sign(message, secret) {\n  message = parseBytes(message);\n  var key = this.keyFromSecret(secret);\n  var r = this.hashInt(key.messagePrefix(), message);\n  var R = this.g.mul(r);\n  var Rencoded = this.encodePoint(R);\n  var s_ = this.hashInt(Rencoded, key.pubBytes(), message)\n    .mul(key.priv());\n  var S = r.add(s_).umod(this.curve.n);\n  return this.makeSignature({ R: R, S: S, Rencoded: Rencoded });\n};\n\n/**\n* @param {Array} message - message bytes\n* @param {Array|String|Signature} sig - sig bytes\n* @param {Array|String|Point|KeyPair} pub - public key\n* @returns {Boolean} - true if public key matches sig of message\n*/\nEDDSA.prototype.verify = function verify(message, sig, pub) {\n  message = parseBytes(message);\n  sig = this.makeSignature(sig);\n  var key = this.keyFromPublic(pub);\n  var h = this.hashInt(sig.Rencoded(), key.pubBytes(), message);\n  var SG = this.g.mul(sig.S());\n  var RplusAh = sig.R().add(key.pub().mul(h));\n  return RplusAh.eq(SG);\n};\n\nEDDSA.prototype.hashInt = function hashInt() {\n  var hash = this.hash();\n  for (var i = 0; i < arguments.length; i++)\n    hash.update(arguments[i]);\n  return utils.intFromLE(hash.digest()).umod(this.curve.n);\n};\n\nEDDSA.prototype.keyFromPublic = function keyFromPublic(pub) {\n  return KeyPair.fromPublic(this, pub);\n};\n\nEDDSA.prototype.keyFromSecret = function keyFromSecret(secret) {\n  return KeyPair.fromSecret(this, secret);\n};\n\nEDDSA.prototype.makeSignature = function makeSignature(sig) {\n  if (sig instanceof Signature)\n    return sig;\n  return new Signature(this, sig);\n};\n\n/**\n* * https://tools.ietf.org/html/draft-josefsson-eddsa-ed25519-03#section-5.2\n*\n* EDDSA defines methods for encoding and decoding points and integers. These are\n* helper convenience methods, that pass along to utility functions implied\n* parameters.\n*\n*/\nEDDSA.prototype.encodePoint = function encodePoint(point) {\n  var enc = point.getY().toArray('le', this.encodingLength);\n  enc[this.encodingLength - 1] |= point.getX().isOdd() ? 0x80 : 0;\n  return enc;\n};\n\nEDDSA.prototype.decodePoint = function decodePoint(bytes) {\n  bytes = utils.parseBytes(bytes);\n\n  var lastIx = bytes.length - 1;\n  var normed = bytes.slice(0, lastIx).concat(bytes[lastIx] & ~0x80);\n  var xIsOdd = (bytes[lastIx] & 0x80) !== 0;\n\n  var y = utils.intFromLE(normed);\n  return this.curve.pointFromY(y, xIsOdd);\n};\n\nEDDSA.prototype.encodeInt = function encodeInt(num) {\n  return num.toArray('le', this.encodingLength);\n};\n\nEDDSA.prototype.decodeInt = function decodeInt(bytes) {\n  return utils.intFromLE(bytes);\n};\n\nEDDSA.prototype.isPoint = function isPoint(val) {\n  return val instanceof this.pointClass;\n};\n","'use strict';\n\nvar utils = require('../utils');\nvar assert = utils.assert;\nvar parseBytes = utils.parseBytes;\nvar cachedProperty = utils.cachedProperty;\n\n/**\n* @param {EDDSA} eddsa - instance\n* @param {Object} params - public/private key parameters\n*\n* @param {Array<Byte>} [params.secret] - secret seed bytes\n* @param {Point} [params.pub] - public key point (aka `A` in eddsa terms)\n* @param {Array<Byte>} [params.pub] - public key point encoded as bytes\n*\n*/\nfunction KeyPair(eddsa, params) {\n  this.eddsa = eddsa;\n  this._secret = parseBytes(params.secret);\n  if (eddsa.isPoint(params.pub))\n    this._pub = params.pub;\n  else\n    this._pubBytes = parseBytes(params.pub);\n}\n\nKeyPair.fromPublic = function fromPublic(eddsa, pub) {\n  if (pub instanceof KeyPair)\n    return pub;\n  return new KeyPair(eddsa, { pub: pub });\n};\n\nKeyPair.fromSecret = function fromSecret(eddsa, secret) {\n  if (secret instanceof KeyPair)\n    return secret;\n  return new KeyPair(eddsa, { secret: secret });\n};\n\nKeyPair.prototype.secret = function secret() {\n  return this._secret;\n};\n\ncachedProperty(KeyPair, 'pubBytes', function pubBytes() {\n  return this.eddsa.encodePoint(this.pub());\n});\n\ncachedProperty(KeyPair, 'pub', function pub() {\n  if (this._pubBytes)\n    return this.eddsa.decodePoint(this._pubBytes);\n  return this.eddsa.g.mul(this.priv());\n});\n\ncachedProperty(KeyPair, 'privBytes', function privBytes() {\n  var eddsa = this.eddsa;\n  var hash = this.hash();\n  var lastIx = eddsa.encodingLength - 1;\n\n  var a = hash.slice(0, eddsa.encodingLength);\n  a[0] &= 248;\n  a[lastIx] &= 127;\n  a[lastIx] |= 64;\n\n  return a;\n});\n\ncachedProperty(KeyPair, 'priv', function priv() {\n  return this.eddsa.decodeInt(this.privBytes());\n});\n\ncachedProperty(KeyPair, 'hash', function hash() {\n  return this.eddsa.hash().update(this.secret()).digest();\n});\n\ncachedProperty(KeyPair, 'messagePrefix', function messagePrefix() {\n  return this.hash().slice(this.eddsa.encodingLength);\n});\n\nKeyPair.prototype.sign = function sign(message) {\n  assert(this._secret, 'KeyPair can only verify');\n  return this.eddsa.sign(message, this);\n};\n\nKeyPair.prototype.verify = function verify(message, sig) {\n  return this.eddsa.verify(message, sig, this);\n};\n\nKeyPair.prototype.getSecret = function getSecret(enc) {\n  assert(this._secret, 'KeyPair is public only');\n  return utils.encode(this.secret(), enc);\n};\n\nKeyPair.prototype.getPublic = function getPublic(enc) {\n  return utils.encode(this.pubBytes(), enc);\n};\n\nmodule.exports = KeyPair;\n","'use strict';\n\nvar BN = require('bn.js');\nvar utils = require('../utils');\nvar assert = utils.assert;\nvar cachedProperty = utils.cachedProperty;\nvar parseBytes = utils.parseBytes;\n\n/**\n* @param {EDDSA} eddsa - eddsa instance\n* @param {Array<Bytes>|Object} sig -\n* @param {Array<Bytes>|Point} [sig.R] - R point as Point or bytes\n* @param {Array<Bytes>|bn} [sig.S] - S scalar as bn or bytes\n* @param {Array<Bytes>} [sig.Rencoded] - R point encoded\n* @param {Array<Bytes>} [sig.Sencoded] - S scalar encoded\n*/\nfunction Signature(eddsa, sig) {\n  this.eddsa = eddsa;\n\n  if (typeof sig !== 'object')\n    sig = parseBytes(sig);\n\n  if (Array.isArray(sig)) {\n    sig = {\n      R: sig.slice(0, eddsa.encodingLength),\n      S: sig.slice(eddsa.encodingLength),\n    };\n  }\n\n  assert(sig.R && sig.S, 'Signature without R or S');\n\n  if (eddsa.isPoint(sig.R))\n    this._R = sig.R;\n  if (sig.S instanceof BN)\n    this._S = sig.S;\n\n  this._Rencoded = Array.isArray(sig.R) ? sig.R : sig.Rencoded;\n  this._Sencoded = Array.isArray(sig.S) ? sig.S : sig.Sencoded;\n}\n\ncachedProperty(Signature, 'S', function S() {\n  return this.eddsa.decodeInt(this.Sencoded());\n});\n\ncachedProperty(Signature, 'R', function R() {\n  return this.eddsa.decodePoint(this.Rencoded());\n});\n\ncachedProperty(Signature, 'Rencoded', function Rencoded() {\n  return this.eddsa.encodePoint(this.R());\n});\n\ncachedProperty(Signature, 'Sencoded', function Sencoded() {\n  return this.eddsa.encodeInt(this.S());\n});\n\nSignature.prototype.toBytes = function toBytes() {\n  return this.Rencoded().concat(this.Sencoded());\n};\n\nSignature.prototype.toHex = function toHex() {\n  return utils.encode(this.toBytes(), 'hex').toUpperCase();\n};\n\nmodule.exports = Signature;\n","module.exports = {\n  doubles: {\n    step: 4,\n    points: [\n      [\n        'e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a',\n        'f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821',\n      ],\n      [\n        '8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508',\n        '11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf',\n      ],\n      [\n        '175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739',\n        'd3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695',\n      ],\n      [\n        '363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640',\n        '4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9',\n      ],\n      [\n        '8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c',\n        '4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36',\n      ],\n      [\n        '723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda',\n        '96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f',\n      ],\n      [\n        'eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa',\n        '5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999',\n      ],\n      [\n        '100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0',\n        'cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09',\n      ],\n      [\n        'e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d',\n        '9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d',\n      ],\n      [\n        'feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d',\n        'e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088',\n      ],\n      [\n        'da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1',\n        '9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d',\n      ],\n      [\n        '53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0',\n        '5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8',\n      ],\n      [\n        '8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047',\n        '10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a',\n      ],\n      [\n        '385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862',\n        '283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453',\n      ],\n      [\n        '6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7',\n        '7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160',\n      ],\n      [\n        '3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd',\n        '56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0',\n      ],\n      [\n        '85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83',\n        '7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6',\n      ],\n      [\n        '948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a',\n        '53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589',\n      ],\n      [\n        '6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8',\n        'bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17',\n      ],\n      [\n        'e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d',\n        '4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda',\n      ],\n      [\n        'e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725',\n        '7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd',\n      ],\n      [\n        '213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754',\n        '4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2',\n      ],\n      [\n        '4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c',\n        '17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6',\n      ],\n      [\n        'fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6',\n        '6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f',\n      ],\n      [\n        '76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39',\n        'c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01',\n      ],\n      [\n        'c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891',\n        '893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3',\n      ],\n      [\n        'd895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b',\n        'febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f',\n      ],\n      [\n        'b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03',\n        '2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7',\n      ],\n      [\n        'e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d',\n        'eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78',\n      ],\n      [\n        'a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070',\n        '7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1',\n      ],\n      [\n        '90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4',\n        'e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150',\n      ],\n      [\n        '8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da',\n        '662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82',\n      ],\n      [\n        'e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11',\n        '1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc',\n      ],\n      [\n        '8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e',\n        'efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b',\n      ],\n      [\n        'e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41',\n        '2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51',\n      ],\n      [\n        'b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef',\n        '67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45',\n      ],\n      [\n        'd68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8',\n        'db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120',\n      ],\n      [\n        '324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d',\n        '648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84',\n      ],\n      [\n        '4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96',\n        '35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d',\n      ],\n      [\n        '9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd',\n        'ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d',\n      ],\n      [\n        '6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5',\n        '9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8',\n      ],\n      [\n        'a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266',\n        '40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8',\n      ],\n      [\n        '7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71',\n        '34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac',\n      ],\n      [\n        '928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac',\n        'c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f',\n      ],\n      [\n        '85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751',\n        '1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962',\n      ],\n      [\n        'ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e',\n        '493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907',\n      ],\n      [\n        '827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241',\n        'c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec',\n      ],\n      [\n        'eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3',\n        'be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d',\n      ],\n      [\n        'e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f',\n        '4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414',\n      ],\n      [\n        '1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19',\n        'aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd',\n      ],\n      [\n        '146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be',\n        'b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0',\n      ],\n      [\n        'fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9',\n        '6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811',\n      ],\n      [\n        'da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2',\n        '8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1',\n      ],\n      [\n        'a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13',\n        '7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c',\n      ],\n      [\n        '174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c',\n        'ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73',\n      ],\n      [\n        '959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba',\n        '2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd',\n      ],\n      [\n        'd2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151',\n        'e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405',\n      ],\n      [\n        '64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073',\n        'd99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589',\n      ],\n      [\n        '8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458',\n        '38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e',\n      ],\n      [\n        '13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b',\n        '69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27',\n      ],\n      [\n        'bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366',\n        'd3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1',\n      ],\n      [\n        '8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa',\n        '40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482',\n      ],\n      [\n        '8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0',\n        '620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945',\n      ],\n      [\n        'dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787',\n        '7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573',\n      ],\n      [\n        'f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e',\n        'ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82',\n      ],\n    ],\n  },\n  naf: {\n    wnd: 7,\n    points: [\n      [\n        'f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9',\n        '388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672',\n      ],\n      [\n        '2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4',\n        'd8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6',\n      ],\n      [\n        '5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc',\n        '6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da',\n      ],\n      [\n        'acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe',\n        'cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37',\n      ],\n      [\n        '774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb',\n        'd984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b',\n      ],\n      [\n        'f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8',\n        'ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81',\n      ],\n      [\n        'd7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e',\n        '581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58',\n      ],\n      [\n        'defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34',\n        '4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77',\n      ],\n      [\n        '2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c',\n        '85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a',\n      ],\n      [\n        '352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5',\n        '321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c',\n      ],\n      [\n        '2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f',\n        '2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67',\n      ],\n      [\n        '9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714',\n        '73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402',\n      ],\n      [\n        'daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729',\n        'a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55',\n      ],\n      [\n        'c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db',\n        '2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482',\n      ],\n      [\n        '6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4',\n        'e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82',\n      ],\n      [\n        '1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5',\n        'b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396',\n      ],\n      [\n        '605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479',\n        '2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49',\n      ],\n      [\n        '62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d',\n        '80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf',\n      ],\n      [\n        '80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f',\n        '1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a',\n      ],\n      [\n        '7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb',\n        'd0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7',\n      ],\n      [\n        'd528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9',\n        'eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933',\n      ],\n      [\n        '49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963',\n        '758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a',\n      ],\n      [\n        '77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74',\n        '958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6',\n      ],\n      [\n        'f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530',\n        'e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37',\n      ],\n      [\n        '463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b',\n        '5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e',\n      ],\n      [\n        'f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247',\n        'cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6',\n      ],\n      [\n        'caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1',\n        'cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476',\n      ],\n      [\n        '2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120',\n        '4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40',\n      ],\n      [\n        '7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435',\n        '91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61',\n      ],\n      [\n        '754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18',\n        '673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683',\n      ],\n      [\n        'e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8',\n        '59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5',\n      ],\n      [\n        '186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb',\n        '3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b',\n      ],\n      [\n        'df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f',\n        '55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417',\n      ],\n      [\n        '5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143',\n        'efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868',\n      ],\n      [\n        '290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba',\n        'e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a',\n      ],\n      [\n        'af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45',\n        'f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6',\n      ],\n      [\n        '766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a',\n        '744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996',\n      ],\n      [\n        '59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e',\n        'c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e',\n      ],\n      [\n        'f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8',\n        'e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d',\n      ],\n      [\n        '7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c',\n        '30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2',\n      ],\n      [\n        '948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519',\n        'e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e',\n      ],\n      [\n        '7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab',\n        '100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437',\n      ],\n      [\n        '3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca',\n        'ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311',\n      ],\n      [\n        'd3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf',\n        '8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4',\n      ],\n      [\n        '1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610',\n        '68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575',\n      ],\n      [\n        '733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4',\n        'f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d',\n      ],\n      [\n        '15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c',\n        'd56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d',\n      ],\n      [\n        'a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940',\n        'edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629',\n      ],\n      [\n        'e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980',\n        'a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06',\n      ],\n      [\n        '311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3',\n        '66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374',\n      ],\n      [\n        '34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf',\n        '9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee',\n      ],\n      [\n        'f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63',\n        '4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1',\n      ],\n      [\n        'd7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448',\n        'fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b',\n      ],\n      [\n        '32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf',\n        '5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661',\n      ],\n      [\n        '7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5',\n        '8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6',\n      ],\n      [\n        'ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6',\n        '8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e',\n      ],\n      [\n        '16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5',\n        '5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d',\n      ],\n      [\n        'eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99',\n        'f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc',\n      ],\n      [\n        '78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51',\n        'f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4',\n      ],\n      [\n        '494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5',\n        '42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c',\n      ],\n      [\n        'a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5',\n        '204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b',\n      ],\n      [\n        'c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997',\n        '4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913',\n      ],\n      [\n        '841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881',\n        '73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154',\n      ],\n      [\n        '5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5',\n        '39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865',\n      ],\n      [\n        '36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66',\n        'd2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc',\n      ],\n      [\n        '336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726',\n        'ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224',\n      ],\n      [\n        '8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede',\n        '6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e',\n      ],\n      [\n        '1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94',\n        '60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6',\n      ],\n      [\n        '85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31',\n        '3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511',\n      ],\n      [\n        '29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51',\n        'b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b',\n      ],\n      [\n        'a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252',\n        'ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2',\n      ],\n      [\n        '4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5',\n        'cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c',\n      ],\n      [\n        'd24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b',\n        '6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3',\n      ],\n      [\n        'ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4',\n        '322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d',\n      ],\n      [\n        'af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f',\n        '6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700',\n      ],\n      [\n        'e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889',\n        '2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4',\n      ],\n      [\n        '591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246',\n        'b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196',\n      ],\n      [\n        '11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984',\n        '998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4',\n      ],\n      [\n        '3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a',\n        'b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257',\n      ],\n      [\n        'cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030',\n        'bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13',\n      ],\n      [\n        'c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197',\n        '6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096',\n      ],\n      [\n        'c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593',\n        'c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38',\n      ],\n      [\n        'a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef',\n        '21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f',\n      ],\n      [\n        '347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38',\n        '60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448',\n      ],\n      [\n        'da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a',\n        '49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a',\n      ],\n      [\n        'c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111',\n        '5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4',\n      ],\n      [\n        '4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502',\n        '7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437',\n      ],\n      [\n        '3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea',\n        'be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7',\n      ],\n      [\n        'cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26',\n        '8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d',\n      ],\n      [\n        'b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986',\n        '39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a',\n      ],\n      [\n        'd4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e',\n        '62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54',\n      ],\n      [\n        '48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4',\n        '25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77',\n      ],\n      [\n        'dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda',\n        'ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517',\n      ],\n      [\n        '6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859',\n        'cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10',\n      ],\n      [\n        'e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f',\n        'f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125',\n      ],\n      [\n        'eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c',\n        '6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e',\n      ],\n      [\n        '13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942',\n        'fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1',\n      ],\n      [\n        'ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a',\n        '1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2',\n      ],\n      [\n        'b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80',\n        '5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423',\n      ],\n      [\n        'ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d',\n        '438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8',\n      ],\n      [\n        '8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1',\n        'cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758',\n      ],\n      [\n        '52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63',\n        'c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375',\n      ],\n      [\n        'e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352',\n        '6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d',\n      ],\n      [\n        '7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193',\n        'ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec',\n      ],\n      [\n        '5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00',\n        '9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0',\n      ],\n      [\n        '32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58',\n        'ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c',\n      ],\n      [\n        'e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7',\n        'd3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4',\n      ],\n      [\n        '8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8',\n        'c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f',\n      ],\n      [\n        '4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e',\n        '67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649',\n      ],\n      [\n        '3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d',\n        'cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826',\n      ],\n      [\n        '674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b',\n        '299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5',\n      ],\n      [\n        'd32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f',\n        'f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87',\n      ],\n      [\n        '30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6',\n        '462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b',\n      ],\n      [\n        'be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297',\n        '62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc',\n      ],\n      [\n        '93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a',\n        '7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c',\n      ],\n      [\n        'b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c',\n        'ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f',\n      ],\n      [\n        'd5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52',\n        '4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a',\n      ],\n      [\n        'd3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb',\n        'bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46',\n      ],\n      [\n        '463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065',\n        'bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f',\n      ],\n      [\n        '7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917',\n        '603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03',\n      ],\n      [\n        '74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9',\n        'cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08',\n      ],\n      [\n        '30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3',\n        '553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8',\n      ],\n      [\n        '9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57',\n        '712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373',\n      ],\n      [\n        '176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66',\n        'ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3',\n      ],\n      [\n        '75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8',\n        '9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8',\n      ],\n      [\n        '809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721',\n        '9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1',\n      ],\n      [\n        '1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180',\n        '4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9',\n      ],\n    ],\n  },\n};\n","'use strict';\n\nvar utils = exports;\nvar BN = require('bn.js');\nvar minAssert = require('minimalistic-assert');\nvar minUtils = require('minimalistic-crypto-utils');\n\nutils.assert = minAssert;\nutils.toArray = minUtils.toArray;\nutils.zero2 = minUtils.zero2;\nutils.toHex = minUtils.toHex;\nutils.encode = minUtils.encode;\n\n// Represent num in a w-NAF form\nfunction getNAF(num, w, bits) {\n  var naf = new Array(Math.max(num.bitLength(), bits) + 1);\n  naf.fill(0);\n\n  var ws = 1 << (w + 1);\n  var k = num.clone();\n\n  for (var i = 0; i < naf.length; i++) {\n    var z;\n    var mod = k.andln(ws - 1);\n    if (k.isOdd()) {\n      if (mod > (ws >> 1) - 1)\n        z = (ws >> 1) - mod;\n      else\n        z = mod;\n      k.isubn(z);\n    } else {\n      z = 0;\n    }\n\n    naf[i] = z;\n    k.iushrn(1);\n  }\n\n  return naf;\n}\nutils.getNAF = getNAF;\n\n// Represent k1, k2 in a Joint Sparse Form\nfunction getJSF(k1, k2) {\n  var jsf = [\n    [],\n    [],\n  ];\n\n  k1 = k1.clone();\n  k2 = k2.clone();\n  var d1 = 0;\n  var d2 = 0;\n  var m8;\n  while (k1.cmpn(-d1) > 0 || k2.cmpn(-d2) > 0) {\n    // First phase\n    var m14 = (k1.andln(3) + d1) & 3;\n    var m24 = (k2.andln(3) + d2) & 3;\n    if (m14 === 3)\n      m14 = -1;\n    if (m24 === 3)\n      m24 = -1;\n    var u1;\n    if ((m14 & 1) === 0) {\n      u1 = 0;\n    } else {\n      m8 = (k1.andln(7) + d1) & 7;\n      if ((m8 === 3 || m8 === 5) && m24 === 2)\n        u1 = -m14;\n      else\n        u1 = m14;\n    }\n    jsf[0].push(u1);\n\n    var u2;\n    if ((m24 & 1) === 0) {\n      u2 = 0;\n    } else {\n      m8 = (k2.andln(7) + d2) & 7;\n      if ((m8 === 3 || m8 === 5) && m14 === 2)\n        u2 = -m24;\n      else\n        u2 = m24;\n    }\n    jsf[1].push(u2);\n\n    // Second phase\n    if (2 * d1 === u1 + 1)\n      d1 = 1 - d1;\n    if (2 * d2 === u2 + 1)\n      d2 = 1 - d2;\n    k1.iushrn(1);\n    k2.iushrn(1);\n  }\n\n  return jsf;\n}\nutils.getJSF = getJSF;\n\nfunction cachedProperty(obj, name, computer) {\n  var key = '_' + name;\n  obj.prototype[name] = function cachedProperty() {\n    return this[key] !== undefined ? this[key] :\n      this[key] = computer.call(this);\n  };\n}\nutils.cachedProperty = cachedProperty;\n\nfunction parseBytes(bytes) {\n  return typeof bytes === 'string' ? utils.toArray(bytes, 'hex') :\n    bytes;\n}\nutils.parseBytes = parseBytes;\n\nfunction intFromLE(bytes) {\n  return new BN(bytes, 'hex', 'le');\n}\nutils.intFromLE = intFromLE;\n\n","var util = require('util')\nvar isProperty = require('is-property')\n\nvar INDENT_START = /[\\{\\[]/\nvar INDENT_END = /[\\}\\]]/\n\n// from https://mathiasbynens.be/notes/reserved-keywords\nvar RESERVED = [\n  'do',\n  'if',\n  'in',\n  'for',\n  'let',\n  'new',\n  'try',\n  'var',\n  'case',\n  'else',\n  'enum',\n  'eval',\n  'null',\n  'this',\n  'true',\n  'void',\n  'with',\n  'await',\n  'break',\n  'catch',\n  'class',\n  'const',\n  'false',\n  'super',\n  'throw',\n  'while',\n  'yield',\n  'delete',\n  'export',\n  'import',\n  'public',\n  'return',\n  'static',\n  'switch',\n  'typeof',\n  'default',\n  'extends',\n  'finally',\n  'package',\n  'private',\n  'continue',\n  'debugger',\n  'function',\n  'arguments',\n  'interface',\n  'protected',\n  'implements',\n  'instanceof',\n  'NaN',\n  'undefined'\n]\n\nvar RESERVED_MAP = {}\n\nfor (var i = 0; i < RESERVED.length; i++) {\n  RESERVED_MAP[RESERVED[i]] = true\n}\n\nvar isVariable = function (name) {\n  return isProperty(name) && !RESERVED_MAP.hasOwnProperty(name)\n}\n\nvar formats = {\n  s: function(s) {\n    return '' + s\n  },\n  d: function(d) {\n    return '' + Number(d)\n  },\n  o: function(o) {\n    return JSON.stringify(o)\n  }\n}\n\nvar genfun = function() {\n  var lines = []\n  var indent = 0\n  var vars = {}\n\n  var push = function(str) {\n    var spaces = ''\n    while (spaces.length < indent*2) spaces += '  '\n    lines.push(spaces+str)\n  }\n\n  var pushLine = function(line) {\n    if (INDENT_END.test(line.trim()[0]) && INDENT_START.test(line[line.length-1])) {\n      indent--\n      push(line)\n      indent++\n      return\n    }\n    if (INDENT_START.test(line[line.length-1])) {\n      push(line)\n      indent++\n      return\n    }\n    if (INDENT_END.test(line.trim()[0])) {\n      indent--\n      push(line)\n      return\n    }\n\n    push(line)\n  }\n\n  var line = function(fmt) {\n    if (!fmt) return line\n\n    if (arguments.length === 1 && fmt.indexOf('\\n') > -1) {\n      var lines = fmt.trim().split('\\n')\n      for (var i = 0; i < lines.length; i++) {\n        pushLine(lines[i].trim())\n      }\n    } else {\n      pushLine(util.format.apply(util, arguments))\n    }\n\n    return line\n  }\n\n  line.scope = {}\n  line.formats = formats\n\n  line.sym = function(name) {\n    if (!name || !isVariable(name)) name = 'tmp'\n    if (!vars[name]) vars[name] = 0\n    return name + (vars[name]++ || '')\n  }\n\n  line.property = function(obj, name) {\n    if (arguments.length === 1) {\n      name = obj\n      obj = ''\n    }\n\n    name = name + ''\n\n    if (isProperty(name)) return (obj ? obj + '.' + name : name)\n    return obj ? obj + '[' + JSON.stringify(name) + ']' : JSON.stringify(name)\n  }\n\n  line.toString = function() {\n    return lines.join('\\n')\n  }\n\n  line.toFunction = function(scope) {\n    if (!scope) scope = {}\n\n    var src = 'return ('+line.toString()+')'\n\n    Object.keys(line.scope).forEach(function (key) {\n      if (!scope[key]) scope[key] = line.scope[key]\n    })\n\n    var keys = Object.keys(scope).map(function(key) {\n      return key\n    })\n\n    var vals = keys.map(function(key) {\n      return scope[key]\n    })\n\n    return Function.apply(null, keys.concat(src)).apply(null, vals)\n  }\n\n  if (arguments.length) line.apply(null, arguments)\n\n  return line\n}\n\ngenfun.formats = formats\nmodule.exports = genfun\n","'use strict';\n\nmodule.exports = (flag, argv = process.argv) => {\n\tconst prefix = flag.startsWith('-') ? '' : (flag.length === 1 ? '-' : '--');\n\tconst position = argv.indexOf(prefix + flag);\n\tconst terminatorPosition = argv.indexOf('--');\n\treturn position !== -1 && (terminatorPosition === -1 || position < terminatorPosition);\n};\n","var hash = exports;\n\nhash.utils = require('./hash/utils');\nhash.common = require('./hash/common');\nhash.sha = require('./hash/sha');\nhash.ripemd = require('./hash/ripemd');\nhash.hmac = require('./hash/hmac');\n\n// Proxy hash functions to the main object\nhash.sha1 = hash.sha.sha1;\nhash.sha256 = hash.sha.sha256;\nhash.sha224 = hash.sha.sha224;\nhash.sha384 = hash.sha.sha384;\nhash.sha512 = hash.sha.sha512;\nhash.ripemd160 = hash.ripemd.ripemd160;\n","'use strict';\n\nvar utils = require('./utils');\nvar assert = require('minimalistic-assert');\n\nfunction BlockHash() {\n  this.pending = null;\n  this.pendingTotal = 0;\n  this.blockSize = this.constructor.blockSize;\n  this.outSize = this.constructor.outSize;\n  this.hmacStrength = this.constructor.hmacStrength;\n  this.padLength = this.constructor.padLength / 8;\n  this.endian = 'big';\n\n  this._delta8 = this.blockSize / 8;\n  this._delta32 = this.blockSize / 32;\n}\nexports.BlockHash = BlockHash;\n\nBlockHash.prototype.update = function update(msg, enc) {\n  // Convert message to array, pad it, and join into 32bit blocks\n  msg = utils.toArray(msg, enc);\n  if (!this.pending)\n    this.pending = msg;\n  else\n    this.pending = this.pending.concat(msg);\n  this.pendingTotal += msg.length;\n\n  // Enough data, try updating\n  if (this.pending.length >= this._delta8) {\n    msg = this.pending;\n\n    // Process pending data in blocks\n    var r = msg.length % this._delta8;\n    this.pending = msg.slice(msg.length - r, msg.length);\n    if (this.pending.length === 0)\n      this.pending = null;\n\n    msg = utils.join32(msg, 0, msg.length - r, this.endian);\n    for (var i = 0; i < msg.length; i += this._delta32)\n      this._update(msg, i, i + this._delta32);\n  }\n\n  return this;\n};\n\nBlockHash.prototype.digest = function digest(enc) {\n  this.update(this._pad());\n  assert(this.pending === null);\n\n  return this._digest(enc);\n};\n\nBlockHash.prototype._pad = function pad() {\n  var len = this.pendingTotal;\n  var bytes = this._delta8;\n  var k = bytes - ((len + this.padLength) % bytes);\n  var res = new Array(k + this.padLength);\n  res[0] = 0x80;\n  for (var i = 1; i < k; i++)\n    res[i] = 0;\n\n  // Append length\n  len <<= 3;\n  if (this.endian === 'big') {\n    for (var t = 8; t < this.padLength; t++)\n      res[i++] = 0;\n\n    res[i++] = 0;\n    res[i++] = 0;\n    res[i++] = 0;\n    res[i++] = 0;\n    res[i++] = (len >>> 24) & 0xff;\n    res[i++] = (len >>> 16) & 0xff;\n    res[i++] = (len >>> 8) & 0xff;\n    res[i++] = len & 0xff;\n  } else {\n    res[i++] = len & 0xff;\n    res[i++] = (len >>> 8) & 0xff;\n    res[i++] = (len >>> 16) & 0xff;\n    res[i++] = (len >>> 24) & 0xff;\n    res[i++] = 0;\n    res[i++] = 0;\n    res[i++] = 0;\n    res[i++] = 0;\n\n    for (t = 8; t < this.padLength; t++)\n      res[i++] = 0;\n  }\n\n  return res;\n};\n","'use strict';\n\nvar utils = require('./utils');\nvar assert = require('minimalistic-assert');\n\nfunction Hmac(hash, key, enc) {\n  if (!(this instanceof Hmac))\n    return new Hmac(hash, key, enc);\n  this.Hash = hash;\n  this.blockSize = hash.blockSize / 8;\n  this.outSize = hash.outSize / 8;\n  this.inner = null;\n  this.outer = null;\n\n  this._init(utils.toArray(key, enc));\n}\nmodule.exports = Hmac;\n\nHmac.prototype._init = function init(key) {\n  // Shorten key, if needed\n  if (key.length > this.blockSize)\n    key = new this.Hash().update(key).digest();\n  assert(key.length <= this.blockSize);\n\n  // Add padding to key\n  for (var i = key.length; i < this.blockSize; i++)\n    key.push(0);\n\n  for (i = 0; i < key.length; i++)\n    key[i] ^= 0x36;\n  this.inner = new this.Hash().update(key);\n\n  // 0x36 ^ 0x5c = 0x6a\n  for (i = 0; i < key.length; i++)\n    key[i] ^= 0x6a;\n  this.outer = new this.Hash().update(key);\n};\n\nHmac.prototype.update = function update(msg, enc) {\n  this.inner.update(msg, enc);\n  return this;\n};\n\nHmac.prototype.digest = function digest(enc) {\n  this.outer.update(this.inner.digest());\n  return this.outer.digest(enc);\n};\n","'use strict';\n\nvar utils = require('./utils');\nvar common = require('./common');\n\nvar rotl32 = utils.rotl32;\nvar sum32 = utils.sum32;\nvar sum32_3 = utils.sum32_3;\nvar sum32_4 = utils.sum32_4;\nvar BlockHash = common.BlockHash;\n\nfunction RIPEMD160() {\n  if (!(this instanceof RIPEMD160))\n    return new RIPEMD160();\n\n  BlockHash.call(this);\n\n  this.h = [ 0x67452301, 0xefcdab89, 0x98badcfe, 0x10325476, 0xc3d2e1f0 ];\n  this.endian = 'little';\n}\nutils.inherits(RIPEMD160, BlockHash);\nexports.ripemd160 = RIPEMD160;\n\nRIPEMD160.blockSize = 512;\nRIPEMD160.outSize = 160;\nRIPEMD160.hmacStrength = 192;\nRIPEMD160.padLength = 64;\n\nRIPEMD160.prototype._update = function update(msg, start) {\n  var A = this.h[0];\n  var B = this.h[1];\n  var C = this.h[2];\n  var D = this.h[3];\n  var E = this.h[4];\n  var Ah = A;\n  var Bh = B;\n  var Ch = C;\n  var Dh = D;\n  var Eh = E;\n  for (var j = 0; j < 80; j++) {\n    var T = sum32(\n      rotl32(\n        sum32_4(A, f(j, B, C, D), msg[r[j] + start], K(j)),\n        s[j]),\n      E);\n    A = E;\n    E = D;\n    D = rotl32(C, 10);\n    C = B;\n    B = T;\n    T = sum32(\n      rotl32(\n        sum32_4(Ah, f(79 - j, Bh, Ch, Dh), msg[rh[j] + start], Kh(j)),\n        sh[j]),\n      Eh);\n    Ah = Eh;\n    Eh = Dh;\n    Dh = rotl32(Ch, 10);\n    Ch = Bh;\n    Bh = T;\n  }\n  T = sum32_3(this.h[1], C, Dh);\n  this.h[1] = sum32_3(this.h[2], D, Eh);\n  this.h[2] = sum32_3(this.h[3], E, Ah);\n  this.h[3] = sum32_3(this.h[4], A, Bh);\n  this.h[4] = sum32_3(this.h[0], B, Ch);\n  this.h[0] = T;\n};\n\nRIPEMD160.prototype._digest = function digest(enc) {\n  if (enc === 'hex')\n    return utils.toHex32(this.h, 'little');\n  else\n    return utils.split32(this.h, 'little');\n};\n\nfunction f(j, x, y, z) {\n  if (j <= 15)\n    return x ^ y ^ z;\n  else if (j <= 31)\n    return (x & y) | ((~x) & z);\n  else if (j <= 47)\n    return (x | (~y)) ^ z;\n  else if (j <= 63)\n    return (x & z) | (y & (~z));\n  else\n    return x ^ (y | (~z));\n}\n\nfunction K(j) {\n  if (j <= 15)\n    return 0x00000000;\n  else if (j <= 31)\n    return 0x5a827999;\n  else if (j <= 47)\n    return 0x6ed9eba1;\n  else if (j <= 63)\n    return 0x8f1bbcdc;\n  else\n    return 0xa953fd4e;\n}\n\nfunction Kh(j) {\n  if (j <= 15)\n    return 0x50a28be6;\n  else if (j <= 31)\n    return 0x5c4dd124;\n  else if (j <= 47)\n    return 0x6d703ef3;\n  else if (j <= 63)\n    return 0x7a6d76e9;\n  else\n    return 0x00000000;\n}\n\nvar r = [\n  0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15,\n  7, 4, 13, 1, 10, 6, 15, 3, 12, 0, 9, 5, 2, 14, 11, 8,\n  3, 10, 14, 4, 9, 15, 8, 1, 2, 7, 0, 6, 13, 11, 5, 12,\n  1, 9, 11, 10, 0, 8, 12, 4, 13, 3, 7, 15, 14, 5, 6, 2,\n  4, 0, 5, 9, 7, 12, 2, 10, 14, 1, 3, 8, 11, 6, 15, 13\n];\n\nvar rh = [\n  5, 14, 7, 0, 9, 2, 11, 4, 13, 6, 15, 8, 1, 10, 3, 12,\n  6, 11, 3, 7, 0, 13, 5, 10, 14, 15, 8, 12, 4, 9, 1, 2,\n  15, 5, 1, 3, 7, 14, 6, 9, 11, 8, 12, 2, 10, 0, 4, 13,\n  8, 6, 4, 1, 3, 11, 15, 0, 5, 12, 2, 13, 9, 7, 10, 14,\n  12, 15, 10, 4, 1, 5, 8, 7, 6, 2, 13, 14, 0, 3, 9, 11\n];\n\nvar s = [\n  11, 14, 15, 12, 5, 8, 7, 9, 11, 13, 14, 15, 6, 7, 9, 8,\n  7, 6, 8, 13, 11, 9, 7, 15, 7, 12, 15, 9, 11, 7, 13, 12,\n  11, 13, 6, 7, 14, 9, 13, 15, 14, 8, 13, 6, 5, 12, 7, 5,\n  11, 12, 14, 15, 14, 15, 9, 8, 9, 14, 5, 6, 8, 6, 5, 12,\n  9, 15, 5, 11, 6, 8, 13, 12, 5, 12, 13, 14, 11, 8, 5, 6\n];\n\nvar sh = [\n  8, 9, 9, 11, 13, 15, 15, 5, 7, 7, 8, 11, 14, 14, 12, 6,\n  9, 13, 15, 7, 12, 8, 9, 11, 7, 7, 12, 7, 6, 15, 13, 11,\n  9, 7, 15, 11, 8, 6, 6, 14, 12, 13, 5, 14, 13, 13, 7, 5,\n  15, 5, 8, 11, 14, 14, 6, 14, 6, 9, 12, 9, 12, 5, 15, 8,\n  8, 5, 12, 9, 12, 5, 14, 6, 8, 13, 6, 5, 15, 13, 11, 11\n];\n","'use strict';\n\nexports.sha1 = require('./sha/1');\nexports.sha224 = require('./sha/224');\nexports.sha256 = require('./sha/256');\nexports.sha384 = require('./sha/384');\nexports.sha512 = require('./sha/512');\n","'use strict';\n\nvar utils = require('../utils');\nvar common = require('../common');\nvar shaCommon = require('./common');\n\nvar rotl32 = utils.rotl32;\nvar sum32 = utils.sum32;\nvar sum32_5 = utils.sum32_5;\nvar ft_1 = shaCommon.ft_1;\nvar BlockHash = common.BlockHash;\n\nvar sha1_K = [\n  0x5A827999, 0x6ED9EBA1,\n  0x8F1BBCDC, 0xCA62C1D6\n];\n\nfunction SHA1() {\n  if (!(this instanceof SHA1))\n    return new SHA1();\n\n  BlockHash.call(this);\n  this.h = [\n    0x67452301, 0xefcdab89, 0x98badcfe,\n    0x10325476, 0xc3d2e1f0 ];\n  this.W = new Array(80);\n}\n\nutils.inherits(SHA1, BlockHash);\nmodule.exports = SHA1;\n\nSHA1.blockSize = 512;\nSHA1.outSize = 160;\nSHA1.hmacStrength = 80;\nSHA1.padLength = 64;\n\nSHA1.prototype._update = function _update(msg, start) {\n  var W = this.W;\n\n  for (var i = 0; i < 16; i++)\n    W[i] = msg[start + i];\n\n  for(; i < W.length; i++)\n    W[i] = rotl32(W[i - 3] ^ W[i - 8] ^ W[i - 14] ^ W[i - 16], 1);\n\n  var a = this.h[0];\n  var b = this.h[1];\n  var c = this.h[2];\n  var d = this.h[3];\n  var e = this.h[4];\n\n  for (i = 0; i < W.length; i++) {\n    var s = ~~(i / 20);\n    var t = sum32_5(rotl32(a, 5), ft_1(s, b, c, d), e, W[i], sha1_K[s]);\n    e = d;\n    d = c;\n    c = rotl32(b, 30);\n    b = a;\n    a = t;\n  }\n\n  this.h[0] = sum32(this.h[0], a);\n  this.h[1] = sum32(this.h[1], b);\n  this.h[2] = sum32(this.h[2], c);\n  this.h[3] = sum32(this.h[3], d);\n  this.h[4] = sum32(this.h[4], e);\n};\n\nSHA1.prototype._digest = function digest(enc) {\n  if (enc === 'hex')\n    return utils.toHex32(this.h, 'big');\n  else\n    return utils.split32(this.h, 'big');\n};\n","'use strict';\n\nvar utils = require('../utils');\nvar SHA256 = require('./256');\n\nfunction SHA224() {\n  if (!(this instanceof SHA224))\n    return new SHA224();\n\n  SHA256.call(this);\n  this.h = [\n    0xc1059ed8, 0x367cd507, 0x3070dd17, 0xf70e5939,\n    0xffc00b31, 0x68581511, 0x64f98fa7, 0xbefa4fa4 ];\n}\nutils.inherits(SHA224, SHA256);\nmodule.exports = SHA224;\n\nSHA224.blockSize = 512;\nSHA224.outSize = 224;\nSHA224.hmacStrength = 192;\nSHA224.padLength = 64;\n\nSHA224.prototype._digest = function digest(enc) {\n  // Just truncate output\n  if (enc === 'hex')\n    return utils.toHex32(this.h.slice(0, 7), 'big');\n  else\n    return utils.split32(this.h.slice(0, 7), 'big');\n};\n\n","'use strict';\n\nvar utils = require('../utils');\nvar common = require('../common');\nvar shaCommon = require('./common');\nvar assert = require('minimalistic-assert');\n\nvar sum32 = utils.sum32;\nvar sum32_4 = utils.sum32_4;\nvar sum32_5 = utils.sum32_5;\nvar ch32 = shaCommon.ch32;\nvar maj32 = shaCommon.maj32;\nvar s0_256 = shaCommon.s0_256;\nvar s1_256 = shaCommon.s1_256;\nvar g0_256 = shaCommon.g0_256;\nvar g1_256 = shaCommon.g1_256;\n\nvar BlockHash = common.BlockHash;\n\nvar sha256_K = [\n  0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5,\n  0x3956c25b, 0x59f111f1, 0x923f82a4, 0xab1c5ed5,\n  0xd807aa98, 0x12835b01, 0x243185be, 0x550c7dc3,\n  0x72be5d74, 0x80deb1fe, 0x9bdc06a7, 0xc19bf174,\n  0xe49b69c1, 0xefbe4786, 0x0fc19dc6, 0x240ca1cc,\n  0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da,\n  0x983e5152, 0xa831c66d, 0xb00327c8, 0xbf597fc7,\n  0xc6e00bf3, 0xd5a79147, 0x06ca6351, 0x14292967,\n  0x27b70a85, 0x2e1b2138, 0x4d2c6dfc, 0x53380d13,\n  0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85,\n  0xa2bfe8a1, 0xa81a664b, 0xc24b8b70, 0xc76c51a3,\n  0xd192e819, 0xd6990624, 0xf40e3585, 0x106aa070,\n  0x19a4c116, 0x1e376c08, 0x2748774c, 0x34b0bcb5,\n  0x391c0cb3, 0x4ed8aa4a, 0x5b9cca4f, 0x682e6ff3,\n  0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208,\n  0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2\n];\n\nfunction SHA256() {\n  if (!(this instanceof SHA256))\n    return new SHA256();\n\n  BlockHash.call(this);\n  this.h = [\n    0x6a09e667, 0xbb67ae85, 0x3c6ef372, 0xa54ff53a,\n    0x510e527f, 0x9b05688c, 0x1f83d9ab, 0x5be0cd19\n  ];\n  this.k = sha256_K;\n  this.W = new Array(64);\n}\nutils.inherits(SHA256, BlockHash);\nmodule.exports = SHA256;\n\nSHA256.blockSize = 512;\nSHA256.outSize = 256;\nSHA256.hmacStrength = 192;\nSHA256.padLength = 64;\n\nSHA256.prototype._update = function _update(msg, start) {\n  var W = this.W;\n\n  for (var i = 0; i < 16; i++)\n    W[i] = msg[start + i];\n  for (; i < W.length; i++)\n    W[i] = sum32_4(g1_256(W[i - 2]), W[i - 7], g0_256(W[i - 15]), W[i - 16]);\n\n  var a = this.h[0];\n  var b = this.h[1];\n  var c = this.h[2];\n  var d = this.h[3];\n  var e = this.h[4];\n  var f = this.h[5];\n  var g = this.h[6];\n  var h = this.h[7];\n\n  assert(this.k.length === W.length);\n  for (i = 0; i < W.length; i++) {\n    var T1 = sum32_5(h, s1_256(e), ch32(e, f, g), this.k[i], W[i]);\n    var T2 = sum32(s0_256(a), maj32(a, b, c));\n    h = g;\n    g = f;\n    f = e;\n    e = sum32(d, T1);\n    d = c;\n    c = b;\n    b = a;\n    a = sum32(T1, T2);\n  }\n\n  this.h[0] = sum32(this.h[0], a);\n  this.h[1] = sum32(this.h[1], b);\n  this.h[2] = sum32(this.h[2], c);\n  this.h[3] = sum32(this.h[3], d);\n  this.h[4] = sum32(this.h[4], e);\n  this.h[5] = sum32(this.h[5], f);\n  this.h[6] = sum32(this.h[6], g);\n  this.h[7] = sum32(this.h[7], h);\n};\n\nSHA256.prototype._digest = function digest(enc) {\n  if (enc === 'hex')\n    return utils.toHex32(this.h, 'big');\n  else\n    return utils.split32(this.h, 'big');\n};\n","'use strict';\n\nvar utils = require('../utils');\n\nvar SHA512 = require('./512');\n\nfunction SHA384() {\n  if (!(this instanceof SHA384))\n    return new SHA384();\n\n  SHA512.call(this);\n  this.h = [\n    0xcbbb9d5d, 0xc1059ed8,\n    0x629a292a, 0x367cd507,\n    0x9159015a, 0x3070dd17,\n    0x152fecd8, 0xf70e5939,\n    0x67332667, 0xffc00b31,\n    0x8eb44a87, 0x68581511,\n    0xdb0c2e0d, 0x64f98fa7,\n    0x47b5481d, 0xbefa4fa4 ];\n}\nutils.inherits(SHA384, SHA512);\nmodule.exports = SHA384;\n\nSHA384.blockSize = 1024;\nSHA384.outSize = 384;\nSHA384.hmacStrength = 192;\nSHA384.padLength = 128;\n\nSHA384.prototype._digest = function digest(enc) {\n  if (enc === 'hex')\n    return utils.toHex32(this.h.slice(0, 12), 'big');\n  else\n    return utils.split32(this.h.slice(0, 12), 'big');\n};\n","'use strict';\n\nvar utils = require('../utils');\nvar common = require('../common');\nvar assert = require('minimalistic-assert');\n\nvar rotr64_hi = utils.rotr64_hi;\nvar rotr64_lo = utils.rotr64_lo;\nvar shr64_hi = utils.shr64_hi;\nvar shr64_lo = utils.shr64_lo;\nvar sum64 = utils.sum64;\nvar sum64_hi = utils.sum64_hi;\nvar sum64_lo = utils.sum64_lo;\nvar sum64_4_hi = utils.sum64_4_hi;\nvar sum64_4_lo = utils.sum64_4_lo;\nvar sum64_5_hi = utils.sum64_5_hi;\nvar sum64_5_lo = utils.sum64_5_lo;\n\nvar BlockHash = common.BlockHash;\n\nvar sha512_K = [\n  0x428a2f98, 0xd728ae22, 0x71374491, 0x23ef65cd,\n  0xb5c0fbcf, 0xec4d3b2f, 0xe9b5dba5, 0x8189dbbc,\n  0x3956c25b, 0xf348b538, 0x59f111f1, 0xb605d019,\n  0x923f82a4, 0xaf194f9b, 0xab1c5ed5, 0xda6d8118,\n  0xd807aa98, 0xa3030242, 0x12835b01, 0x45706fbe,\n  0x243185be, 0x4ee4b28c, 0x550c7dc3, 0xd5ffb4e2,\n  0x72be5d74, 0xf27b896f, 0x80deb1fe, 0x3b1696b1,\n  0x9bdc06a7, 0x25c71235, 0xc19bf174, 0xcf692694,\n  0xe49b69c1, 0x9ef14ad2, 0xefbe4786, 0x384f25e3,\n  0x0fc19dc6, 0x8b8cd5b5, 0x240ca1cc, 0x77ac9c65,\n  0x2de92c6f, 0x592b0275, 0x4a7484aa, 0x6ea6e483,\n  0x5cb0a9dc, 0xbd41fbd4, 0x76f988da, 0x831153b5,\n  0x983e5152, 0xee66dfab, 0xa831c66d, 0x2db43210,\n  0xb00327c8, 0x98fb213f, 0xbf597fc7, 0xbeef0ee4,\n  0xc6e00bf3, 0x3da88fc2, 0xd5a79147, 0x930aa725,\n  0x06ca6351, 0xe003826f, 0x14292967, 0x0a0e6e70,\n  0x27b70a85, 0x46d22ffc, 0x2e1b2138, 0x5c26c926,\n  0x4d2c6dfc, 0x5ac42aed, 0x53380d13, 0x9d95b3df,\n  0x650a7354, 0x8baf63de, 0x766a0abb, 0x3c77b2a8,\n  0x81c2c92e, 0x47edaee6, 0x92722c85, 0x1482353b,\n  0xa2bfe8a1, 0x4cf10364, 0xa81a664b, 0xbc423001,\n  0xc24b8b70, 0xd0f89791, 0xc76c51a3, 0x0654be30,\n  0xd192e819, 0xd6ef5218, 0xd6990624, 0x5565a910,\n  0xf40e3585, 0x5771202a, 0x106aa070, 0x32bbd1b8,\n  0x19a4c116, 0xb8d2d0c8, 0x1e376c08, 0x5141ab53,\n  0x2748774c, 0xdf8eeb99, 0x34b0bcb5, 0xe19b48a8,\n  0x391c0cb3, 0xc5c95a63, 0x4ed8aa4a, 0xe3418acb,\n  0x5b9cca4f, 0x7763e373, 0x682e6ff3, 0xd6b2b8a3,\n  0x748f82ee, 0x5defb2fc, 0x78a5636f, 0x43172f60,\n  0x84c87814, 0xa1f0ab72, 0x8cc70208, 0x1a6439ec,\n  0x90befffa, 0x23631e28, 0xa4506ceb, 0xde82bde9,\n  0xbef9a3f7, 0xb2c67915, 0xc67178f2, 0xe372532b,\n  0xca273ece, 0xea26619c, 0xd186b8c7, 0x21c0c207,\n  0xeada7dd6, 0xcde0eb1e, 0xf57d4f7f, 0xee6ed178,\n  0x06f067aa, 0x72176fba, 0x0a637dc5, 0xa2c898a6,\n  0x113f9804, 0xbef90dae, 0x1b710b35, 0x131c471b,\n  0x28db77f5, 0x23047d84, 0x32caab7b, 0x40c72493,\n  0x3c9ebe0a, 0x15c9bebc, 0x431d67c4, 0x9c100d4c,\n  0x4cc5d4be, 0xcb3e42b6, 0x597f299c, 0xfc657e2a,\n  0x5fcb6fab, 0x3ad6faec, 0x6c44198c, 0x4a475817\n];\n\nfunction SHA512() {\n  if (!(this instanceof SHA512))\n    return new SHA512();\n\n  BlockHash.call(this);\n  this.h = [\n    0x6a09e667, 0xf3bcc908,\n    0xbb67ae85, 0x84caa73b,\n    0x3c6ef372, 0xfe94f82b,\n    0xa54ff53a, 0x5f1d36f1,\n    0x510e527f, 0xade682d1,\n    0x9b05688c, 0x2b3e6c1f,\n    0x1f83d9ab, 0xfb41bd6b,\n    0x5be0cd19, 0x137e2179 ];\n  this.k = sha512_K;\n  this.W = new Array(160);\n}\nutils.inherits(SHA512, BlockHash);\nmodule.exports = SHA512;\n\nSHA512.blockSize = 1024;\nSHA512.outSize = 512;\nSHA512.hmacStrength = 192;\nSHA512.padLength = 128;\n\nSHA512.prototype._prepareBlock = function _prepareBlock(msg, start) {\n  var W = this.W;\n\n  // 32 x 32bit words\n  for (var i = 0; i < 32; i++)\n    W[i] = msg[start + i];\n  for (; i < W.length; i += 2) {\n    var c0_hi = g1_512_hi(W[i - 4], W[i - 3]);  // i - 2\n    var c0_lo = g1_512_lo(W[i - 4], W[i - 3]);\n    var c1_hi = W[i - 14];  // i - 7\n    var c1_lo = W[i - 13];\n    var c2_hi = g0_512_hi(W[i - 30], W[i - 29]);  // i - 15\n    var c2_lo = g0_512_lo(W[i - 30], W[i - 29]);\n    var c3_hi = W[i - 32];  // i - 16\n    var c3_lo = W[i - 31];\n\n    W[i] = sum64_4_hi(\n      c0_hi, c0_lo,\n      c1_hi, c1_lo,\n      c2_hi, c2_lo,\n      c3_hi, c3_lo);\n    W[i + 1] = sum64_4_lo(\n      c0_hi, c0_lo,\n      c1_hi, c1_lo,\n      c2_hi, c2_lo,\n      c3_hi, c3_lo);\n  }\n};\n\nSHA512.prototype._update = function _update(msg, start) {\n  this._prepareBlock(msg, start);\n\n  var W = this.W;\n\n  var ah = this.h[0];\n  var al = this.h[1];\n  var bh = this.h[2];\n  var bl = this.h[3];\n  var ch = this.h[4];\n  var cl = this.h[5];\n  var dh = this.h[6];\n  var dl = this.h[7];\n  var eh = this.h[8];\n  var el = this.h[9];\n  var fh = this.h[10];\n  var fl = this.h[11];\n  var gh = this.h[12];\n  var gl = this.h[13];\n  var hh = this.h[14];\n  var hl = this.h[15];\n\n  assert(this.k.length === W.length);\n  for (var i = 0; i < W.length; i += 2) {\n    var c0_hi = hh;\n    var c0_lo = hl;\n    var c1_hi = s1_512_hi(eh, el);\n    var c1_lo = s1_512_lo(eh, el);\n    var c2_hi = ch64_hi(eh, el, fh, fl, gh, gl);\n    var c2_lo = ch64_lo(eh, el, fh, fl, gh, gl);\n    var c3_hi = this.k[i];\n    var c3_lo = this.k[i + 1];\n    var c4_hi = W[i];\n    var c4_lo = W[i + 1];\n\n    var T1_hi = sum64_5_hi(\n      c0_hi, c0_lo,\n      c1_hi, c1_lo,\n      c2_hi, c2_lo,\n      c3_hi, c3_lo,\n      c4_hi, c4_lo);\n    var T1_lo = sum64_5_lo(\n      c0_hi, c0_lo,\n      c1_hi, c1_lo,\n      c2_hi, c2_lo,\n      c3_hi, c3_lo,\n      c4_hi, c4_lo);\n\n    c0_hi = s0_512_hi(ah, al);\n    c0_lo = s0_512_lo(ah, al);\n    c1_hi = maj64_hi(ah, al, bh, bl, ch, cl);\n    c1_lo = maj64_lo(ah, al, bh, bl, ch, cl);\n\n    var T2_hi = sum64_hi(c0_hi, c0_lo, c1_hi, c1_lo);\n    var T2_lo = sum64_lo(c0_hi, c0_lo, c1_hi, c1_lo);\n\n    hh = gh;\n    hl = gl;\n\n    gh = fh;\n    gl = fl;\n\n    fh = eh;\n    fl = el;\n\n    eh = sum64_hi(dh, dl, T1_hi, T1_lo);\n    el = sum64_lo(dl, dl, T1_hi, T1_lo);\n\n    dh = ch;\n    dl = cl;\n\n    ch = bh;\n    cl = bl;\n\n    bh = ah;\n    bl = al;\n\n    ah = sum64_hi(T1_hi, T1_lo, T2_hi, T2_lo);\n    al = sum64_lo(T1_hi, T1_lo, T2_hi, T2_lo);\n  }\n\n  sum64(this.h, 0, ah, al);\n  sum64(this.h, 2, bh, bl);\n  sum64(this.h, 4, ch, cl);\n  sum64(this.h, 6, dh, dl);\n  sum64(this.h, 8, eh, el);\n  sum64(this.h, 10, fh, fl);\n  sum64(this.h, 12, gh, gl);\n  sum64(this.h, 14, hh, hl);\n};\n\nSHA512.prototype._digest = function digest(enc) {\n  if (enc === 'hex')\n    return utils.toHex32(this.h, 'big');\n  else\n    return utils.split32(this.h, 'big');\n};\n\nfunction ch64_hi(xh, xl, yh, yl, zh) {\n  var r = (xh & yh) ^ ((~xh) & zh);\n  if (r < 0)\n    r += 0x100000000;\n  return r;\n}\n\nfunction ch64_lo(xh, xl, yh, yl, zh, zl) {\n  var r = (xl & yl) ^ ((~xl) & zl);\n  if (r < 0)\n    r += 0x100000000;\n  return r;\n}\n\nfunction maj64_hi(xh, xl, yh, yl, zh) {\n  var r = (xh & yh) ^ (xh & zh) ^ (yh & zh);\n  if (r < 0)\n    r += 0x100000000;\n  return r;\n}\n\nfunction maj64_lo(xh, xl, yh, yl, zh, zl) {\n  var r = (xl & yl) ^ (xl & zl) ^ (yl & zl);\n  if (r < 0)\n    r += 0x100000000;\n  return r;\n}\n\nfunction s0_512_hi(xh, xl) {\n  var c0_hi = rotr64_hi(xh, xl, 28);\n  var c1_hi = rotr64_hi(xl, xh, 2);  // 34\n  var c2_hi = rotr64_hi(xl, xh, 7);  // 39\n\n  var r = c0_hi ^ c1_hi ^ c2_hi;\n  if (r < 0)\n    r += 0x100000000;\n  return r;\n}\n\nfunction s0_512_lo(xh, xl) {\n  var c0_lo = rotr64_lo(xh, xl, 28);\n  var c1_lo = rotr64_lo(xl, xh, 2);  // 34\n  var c2_lo = rotr64_lo(xl, xh, 7);  // 39\n\n  var r = c0_lo ^ c1_lo ^ c2_lo;\n  if (r < 0)\n    r += 0x100000000;\n  return r;\n}\n\nfunction s1_512_hi(xh, xl) {\n  var c0_hi = rotr64_hi(xh, xl, 14);\n  var c1_hi = rotr64_hi(xh, xl, 18);\n  var c2_hi = rotr64_hi(xl, xh, 9);  // 41\n\n  var r = c0_hi ^ c1_hi ^ c2_hi;\n  if (r < 0)\n    r += 0x100000000;\n  return r;\n}\n\nfunction s1_512_lo(xh, xl) {\n  var c0_lo = rotr64_lo(xh, xl, 14);\n  var c1_lo = rotr64_lo(xh, xl, 18);\n  var c2_lo = rotr64_lo(xl, xh, 9);  // 41\n\n  var r = c0_lo ^ c1_lo ^ c2_lo;\n  if (r < 0)\n    r += 0x100000000;\n  return r;\n}\n\nfunction g0_512_hi(xh, xl) {\n  var c0_hi = rotr64_hi(xh, xl, 1);\n  var c1_hi = rotr64_hi(xh, xl, 8);\n  var c2_hi = shr64_hi(xh, xl, 7);\n\n  var r = c0_hi ^ c1_hi ^ c2_hi;\n  if (r < 0)\n    r += 0x100000000;\n  return r;\n}\n\nfunction g0_512_lo(xh, xl) {\n  var c0_lo = rotr64_lo(xh, xl, 1);\n  var c1_lo = rotr64_lo(xh, xl, 8);\n  var c2_lo = shr64_lo(xh, xl, 7);\n\n  var r = c0_lo ^ c1_lo ^ c2_lo;\n  if (r < 0)\n    r += 0x100000000;\n  return r;\n}\n\nfunction g1_512_hi(xh, xl) {\n  var c0_hi = rotr64_hi(xh, xl, 19);\n  var c1_hi = rotr64_hi(xl, xh, 29);  // 61\n  var c2_hi = shr64_hi(xh, xl, 6);\n\n  var r = c0_hi ^ c1_hi ^ c2_hi;\n  if (r < 0)\n    r += 0x100000000;\n  return r;\n}\n\nfunction g1_512_lo(xh, xl) {\n  var c0_lo = rotr64_lo(xh, xl, 19);\n  var c1_lo = rotr64_lo(xl, xh, 29);  // 61\n  var c2_lo = shr64_lo(xh, xl, 6);\n\n  var r = c0_lo ^ c1_lo ^ c2_lo;\n  if (r < 0)\n    r += 0x100000000;\n  return r;\n}\n","'use strict';\n\nvar utils = require('../utils');\nvar rotr32 = utils.rotr32;\n\nfunction ft_1(s, x, y, z) {\n  if (s === 0)\n    return ch32(x, y, z);\n  if (s === 1 || s === 3)\n    return p32(x, y, z);\n  if (s === 2)\n    return maj32(x, y, z);\n}\nexports.ft_1 = ft_1;\n\nfunction ch32(x, y, z) {\n  return (x & y) ^ ((~x) & z);\n}\nexports.ch32 = ch32;\n\nfunction maj32(x, y, z) {\n  return (x & y) ^ (x & z) ^ (y & z);\n}\nexports.maj32 = maj32;\n\nfunction p32(x, y, z) {\n  return x ^ y ^ z;\n}\nexports.p32 = p32;\n\nfunction s0_256(x) {\n  return rotr32(x, 2) ^ rotr32(x, 13) ^ rotr32(x, 22);\n}\nexports.s0_256 = s0_256;\n\nfunction s1_256(x) {\n  return rotr32(x, 6) ^ rotr32(x, 11) ^ rotr32(x, 25);\n}\nexports.s1_256 = s1_256;\n\nfunction g0_256(x) {\n  return rotr32(x, 7) ^ rotr32(x, 18) ^ (x >>> 3);\n}\nexports.g0_256 = g0_256;\n\nfunction g1_256(x) {\n  return rotr32(x, 17) ^ rotr32(x, 19) ^ (x >>> 10);\n}\nexports.g1_256 = g1_256;\n","'use strict';\n\nvar assert = require('minimalistic-assert');\nvar inherits = require('inherits');\n\nexports.inherits = inherits;\n\nfunction isSurrogatePair(msg, i) {\n  if ((msg.charCodeAt(i) & 0xFC00) !== 0xD800) {\n    return false;\n  }\n  if (i < 0 || i + 1 >= msg.length) {\n    return false;\n  }\n  return (msg.charCodeAt(i + 1) & 0xFC00) === 0xDC00;\n}\n\nfunction toArray(msg, enc) {\n  if (Array.isArray(msg))\n    return msg.slice();\n  if (!msg)\n    return [];\n  var res = [];\n  if (typeof msg === 'string') {\n    if (!enc) {\n      // Inspired by stringToUtf8ByteArray() in closure-library by Google\n      // https://github.com/google/closure-library/blob/8598d87242af59aac233270742c8984e2b2bdbe0/closure/goog/crypt/crypt.js#L117-L143\n      // Apache License 2.0\n      // https://github.com/google/closure-library/blob/master/LICENSE\n      var p = 0;\n      for (var i = 0; i < msg.length; i++) {\n        var c = msg.charCodeAt(i);\n        if (c < 128) {\n          res[p++] = c;\n        } else if (c < 2048) {\n          res[p++] = (c >> 6) | 192;\n          res[p++] = (c & 63) | 128;\n        } else if (isSurrogatePair(msg, i)) {\n          c = 0x10000 + ((c & 0x03FF) << 10) + (msg.charCodeAt(++i) & 0x03FF);\n          res[p++] = (c >> 18) | 240;\n          res[p++] = ((c >> 12) & 63) | 128;\n          res[p++] = ((c >> 6) & 63) | 128;\n          res[p++] = (c & 63) | 128;\n        } else {\n          res[p++] = (c >> 12) | 224;\n          res[p++] = ((c >> 6) & 63) | 128;\n          res[p++] = (c & 63) | 128;\n        }\n      }\n    } else if (enc === 'hex') {\n      msg = msg.replace(/[^a-z0-9]+/ig, '');\n      if (msg.length % 2 !== 0)\n        msg = '0' + msg;\n      for (i = 0; i < msg.length; i += 2)\n        res.push(parseInt(msg[i] + msg[i + 1], 16));\n    }\n  } else {\n    for (i = 0; i < msg.length; i++)\n      res[i] = msg[i] | 0;\n  }\n  return res;\n}\nexports.toArray = toArray;\n\nfunction toHex(msg) {\n  var res = '';\n  for (var i = 0; i < msg.length; i++)\n    res += zero2(msg[i].toString(16));\n  return res;\n}\nexports.toHex = toHex;\n\nfunction htonl(w) {\n  var res = (w >>> 24) |\n            ((w >>> 8) & 0xff00) |\n            ((w << 8) & 0xff0000) |\n            ((w & 0xff) << 24);\n  return res >>> 0;\n}\nexports.htonl = htonl;\n\nfunction toHex32(msg, endian) {\n  var res = '';\n  for (var i = 0; i < msg.length; i++) {\n    var w = msg[i];\n    if (endian === 'little')\n      w = htonl(w);\n    res += zero8(w.toString(16));\n  }\n  return res;\n}\nexports.toHex32 = toHex32;\n\nfunction zero2(word) {\n  if (word.length === 1)\n    return '0' + word;\n  else\n    return word;\n}\nexports.zero2 = zero2;\n\nfunction zero8(word) {\n  if (word.length === 7)\n    return '0' + word;\n  else if (word.length === 6)\n    return '00' + word;\n  else if (word.length === 5)\n    return '000' + word;\n  else if (word.length === 4)\n    return '0000' + word;\n  else if (word.length === 3)\n    return '00000' + word;\n  else if (word.length === 2)\n    return '000000' + word;\n  else if (word.length === 1)\n    return '0000000' + word;\n  else\n    return word;\n}\nexports.zero8 = zero8;\n\nfunction join32(msg, start, end, endian) {\n  var len = end - start;\n  assert(len % 4 === 0);\n  var res = new Array(len / 4);\n  for (var i = 0, k = start; i < res.length; i++, k += 4) {\n    var w;\n    if (endian === 'big')\n      w = (msg[k] << 24) | (msg[k + 1] << 16) | (msg[k + 2] << 8) | msg[k + 3];\n    else\n      w = (msg[k + 3] << 24) | (msg[k + 2] << 16) | (msg[k + 1] << 8) | msg[k];\n    res[i] = w >>> 0;\n  }\n  return res;\n}\nexports.join32 = join32;\n\nfunction split32(msg, endian) {\n  var res = new Array(msg.length * 4);\n  for (var i = 0, k = 0; i < msg.length; i++, k += 4) {\n    var m = msg[i];\n    if (endian === 'big') {\n      res[k] = m >>> 24;\n      res[k + 1] = (m >>> 16) & 0xff;\n      res[k + 2] = (m >>> 8) & 0xff;\n      res[k + 3] = m & 0xff;\n    } else {\n      res[k + 3] = m >>> 24;\n      res[k + 2] = (m >>> 16) & 0xff;\n      res[k + 1] = (m >>> 8) & 0xff;\n      res[k] = m & 0xff;\n    }\n  }\n  return res;\n}\nexports.split32 = split32;\n\nfunction rotr32(w, b) {\n  return (w >>> b) | (w << (32 - b));\n}\nexports.rotr32 = rotr32;\n\nfunction rotl32(w, b) {\n  return (w << b) | (w >>> (32 - b));\n}\nexports.rotl32 = rotl32;\n\nfunction sum32(a, b) {\n  return (a + b) >>> 0;\n}\nexports.sum32 = sum32;\n\nfunction sum32_3(a, b, c) {\n  return (a + b + c) >>> 0;\n}\nexports.sum32_3 = sum32_3;\n\nfunction sum32_4(a, b, c, d) {\n  return (a + b + c + d) >>> 0;\n}\nexports.sum32_4 = sum32_4;\n\nfunction sum32_5(a, b, c, d, e) {\n  return (a + b + c + d + e) >>> 0;\n}\nexports.sum32_5 = sum32_5;\n\nfunction sum64(buf, pos, ah, al) {\n  var bh = buf[pos];\n  var bl = buf[pos + 1];\n\n  var lo = (al + bl) >>> 0;\n  var hi = (lo < al ? 1 : 0) + ah + bh;\n  buf[pos] = hi >>> 0;\n  buf[pos + 1] = lo;\n}\nexports.sum64 = sum64;\n\nfunction sum64_hi(ah, al, bh, bl) {\n  var lo = (al + bl) >>> 0;\n  var hi = (lo < al ? 1 : 0) + ah + bh;\n  return hi >>> 0;\n}\nexports.sum64_hi = sum64_hi;\n\nfunction sum64_lo(ah, al, bh, bl) {\n  var lo = al + bl;\n  return lo >>> 0;\n}\nexports.sum64_lo = sum64_lo;\n\nfunction sum64_4_hi(ah, al, bh, bl, ch, cl, dh, dl) {\n  var carry = 0;\n  var lo = al;\n  lo = (lo + bl) >>> 0;\n  carry += lo < al ? 1 : 0;\n  lo = (lo + cl) >>> 0;\n  carry += lo < cl ? 1 : 0;\n  lo = (lo + dl) >>> 0;\n  carry += lo < dl ? 1 : 0;\n\n  var hi = ah + bh + ch + dh + carry;\n  return hi >>> 0;\n}\nexports.sum64_4_hi = sum64_4_hi;\n\nfunction sum64_4_lo(ah, al, bh, bl, ch, cl, dh, dl) {\n  var lo = al + bl + cl + dl;\n  return lo >>> 0;\n}\nexports.sum64_4_lo = sum64_4_lo;\n\nfunction sum64_5_hi(ah, al, bh, bl, ch, cl, dh, dl, eh, el) {\n  var carry = 0;\n  var lo = al;\n  lo = (lo + bl) >>> 0;\n  carry += lo < al ? 1 : 0;\n  lo = (lo + cl) >>> 0;\n  carry += lo < cl ? 1 : 0;\n  lo = (lo + dl) >>> 0;\n  carry += lo < dl ? 1 : 0;\n  lo = (lo + el) >>> 0;\n  carry += lo < el ? 1 : 0;\n\n  var hi = ah + bh + ch + dh + eh + carry;\n  return hi >>> 0;\n}\nexports.sum64_5_hi = sum64_5_hi;\n\nfunction sum64_5_lo(ah, al, bh, bl, ch, cl, dh, dl, eh, el) {\n  var lo = al + bl + cl + dl + el;\n\n  return lo >>> 0;\n}\nexports.sum64_5_lo = sum64_5_lo;\n\nfunction rotr64_hi(ah, al, num) {\n  var r = (al << (32 - num)) | (ah >>> num);\n  return r >>> 0;\n}\nexports.rotr64_hi = rotr64_hi;\n\nfunction rotr64_lo(ah, al, num) {\n  var r = (ah << (32 - num)) | (al >>> num);\n  return r >>> 0;\n}\nexports.rotr64_lo = rotr64_lo;\n\nfunction shr64_hi(ah, al, num) {\n  return ah >>> num;\n}\nexports.shr64_hi = shr64_hi;\n\nfunction shr64_lo(ah, al, num) {\n  var r = (ah << (32 - num)) | (al >>> num);\n  return r >>> 0;\n}\nexports.shr64_lo = shr64_lo;\n","'use strict';\n\nvar hash = require('hash.js');\nvar utils = require('minimalistic-crypto-utils');\nvar assert = require('minimalistic-assert');\n\nfunction HmacDRBG(options) {\n  if (!(this instanceof HmacDRBG))\n    return new HmacDRBG(options);\n  this.hash = options.hash;\n  this.predResist = !!options.predResist;\n\n  this.outLen = this.hash.outSize;\n  this.minEntropy = options.minEntropy || this.hash.hmacStrength;\n\n  this._reseed = null;\n  this.reseedInterval = null;\n  this.K = null;\n  this.V = null;\n\n  var entropy = utils.toArray(options.entropy, options.entropyEnc || 'hex');\n  var nonce = utils.toArray(options.nonce, options.nonceEnc || 'hex');\n  var pers = utils.toArray(options.pers, options.persEnc || 'hex');\n  assert(entropy.length >= (this.minEntropy / 8),\n         'Not enough entropy. Minimum is: ' + this.minEntropy + ' bits');\n  this._init(entropy, nonce, pers);\n}\nmodule.exports = HmacDRBG;\n\nHmacDRBG.prototype._init = function init(entropy, nonce, pers) {\n  var seed = entropy.concat(nonce).concat(pers);\n\n  this.K = new Array(this.outLen / 8);\n  this.V = new Array(this.outLen / 8);\n  for (var i = 0; i < this.V.length; i++) {\n    this.K[i] = 0x00;\n    this.V[i] = 0x01;\n  }\n\n  this._update(seed);\n  this._reseed = 1;\n  this.reseedInterval = 0x1000000000000;  // 2^48\n};\n\nHmacDRBG.prototype._hmac = function hmac() {\n  return new hash.hmac(this.hash, this.K);\n};\n\nHmacDRBG.prototype._update = function update(seed) {\n  var kmac = this._hmac()\n                 .update(this.V)\n                 .update([ 0x00 ]);\n  if (seed)\n    kmac = kmac.update(seed);\n  this.K = kmac.digest();\n  this.V = this._hmac().update(this.V).digest();\n  if (!seed)\n    return;\n\n  this.K = this._hmac()\n               .update(this.V)\n               .update([ 0x01 ])\n               .update(seed)\n               .digest();\n  this.V = this._hmac().update(this.V).digest();\n};\n\nHmacDRBG.prototype.reseed = function reseed(entropy, entropyEnc, add, addEnc) {\n  // Optional entropy enc\n  if (typeof entropyEnc !== 'string') {\n    addEnc = add;\n    add = entropyEnc;\n    entropyEnc = null;\n  }\n\n  entropy = utils.toArray(entropy, entropyEnc);\n  add = utils.toArray(add, addEnc);\n\n  assert(entropy.length >= (this.minEntropy / 8),\n         'Not enough entropy. Minimum is: ' + this.minEntropy + ' bits');\n\n  this._update(entropy.concat(add || []));\n  this._reseed = 1;\n};\n\nHmacDRBG.prototype.generate = function generate(len, enc, add, addEnc) {\n  if (this._reseed > this.reseedInterval)\n    throw new Error('Reseed is required');\n\n  // Optional encoding\n  if (typeof enc !== 'string') {\n    addEnc = add;\n    add = enc;\n    enc = null;\n  }\n\n  // Optional additional data\n  if (add) {\n    add = utils.toArray(add, addEnc || 'hex');\n    this._update(add);\n  }\n\n  var temp = [];\n  while (temp.length < len) {\n    this.V = this._hmac().update(this.V).digest();\n    temp = temp.concat(this.V);\n  }\n\n  var res = temp.slice(0, len);\n  this._update(add);\n  this._reseed++;\n  return utils.encode(res, enc);\n};\n","try {\n  var util = require('util');\n  /* istanbul ignore next */\n  if (typeof util.inherits !== 'function') throw '';\n  module.exports = util.inherits;\n} catch (e) {\n  /* istanbul ignore next */\n  module.exports = require('./inherits_browser.js');\n}\n","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      ctor.prototype = Object.create(superCtor.prototype, {\n        constructor: {\n          value: ctor,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      })\n    }\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      var TempCtor = function () {}\n      TempCtor.prototype = superCtor.prototype\n      ctor.prototype = new TempCtor()\n      ctor.prototype.constructor = ctor\n    }\n  }\n}\n","// int64-buffer.js\n\n/*jshint -W018 */ // Confusing use of '!'.\n/*jshint -W030 */ // Expected an assignment or function call and instead saw an expression.\n/*jshint -W093 */ // Did you mean to return a conditional instead of an assignment?\n\nvar Uint64BE, Int64BE, Uint64LE, Int64LE;\n\n!function(exports) {\n  // constants\n\n  var UNDEFINED = \"undefined\";\n  var BUFFER = (UNDEFINED !== typeof Buffer) && Buffer;\n  var UINT8ARRAY = (UNDEFINED !== typeof Uint8Array) && Uint8Array;\n  var ARRAYBUFFER = (UNDEFINED !== typeof ArrayBuffer) && ArrayBuffer;\n  var ZERO = [0, 0, 0, 0, 0, 0, 0, 0];\n  var isArray = Array.isArray || _isArray;\n  var BIT32 = 4294967296;\n  var BIT24 = 16777216;\n\n  // storage class\n\n  var storage; // Array;\n\n  // generate classes\n\n  Uint64BE = factory(\"Uint64BE\", true, true);\n  Int64BE = factory(\"Int64BE\", true, false);\n  Uint64LE = factory(\"Uint64LE\", false, true);\n  Int64LE = factory(\"Int64LE\", false, false);\n\n  // class factory\n\n  function factory(name, bigendian, unsigned) {\n    var posH = bigendian ? 0 : 4;\n    var posL = bigendian ? 4 : 0;\n    var pos0 = bigendian ? 0 : 3;\n    var pos1 = bigendian ? 1 : 2;\n    var pos2 = bigendian ? 2 : 1;\n    var pos3 = bigendian ? 3 : 0;\n    var fromPositive = bigendian ? fromPositiveBE : fromPositiveLE;\n    var fromNegative = bigendian ? fromNegativeBE : fromNegativeLE;\n    var proto = Int64.prototype;\n    var isName = \"is\" + name;\n    var _isInt64 = \"_\" + isName;\n\n    // properties\n    proto.buffer = void 0;\n    proto.offset = 0;\n    proto[_isInt64] = true;\n\n    // methods\n    proto.toNumber = toNumber;\n    proto.toString = toString;\n    proto.toJSON = toNumber;\n    proto.toArray = toArray;\n\n    // add .toBuffer() method only when Buffer available\n    if (BUFFER) proto.toBuffer = toBuffer;\n\n    // add .toArrayBuffer() method only when Uint8Array available\n    if (UINT8ARRAY) proto.toArrayBuffer = toArrayBuffer;\n\n    // isUint64BE, isInt64BE\n    Int64[isName] = isInt64;\n\n    // CommonJS\n    exports[name] = Int64;\n\n    return Int64;\n\n    // constructor\n    function Int64(buffer, offset, value, raddix) {\n      if (!(this instanceof Int64)) return new Int64(buffer, offset, value, raddix);\n      return init(this, buffer, offset, value, raddix);\n    }\n\n    // isUint64BE, isInt64BE\n    function isInt64(b) {\n      return !!(b && b[_isInt64]);\n    }\n\n    // initializer\n    function init(that, buffer, offset, value, raddix) {\n      if (UINT8ARRAY && ARRAYBUFFER) {\n        if (buffer instanceof ARRAYBUFFER) buffer = new UINT8ARRAY(buffer);\n        if (value instanceof ARRAYBUFFER) value = new UINT8ARRAY(value);\n      }\n\n      // Int64BE() style\n      if (!buffer && !offset && !value && !storage) {\n        // shortcut to initialize with zero\n        that.buffer = newArray(ZERO, 0);\n        return;\n      }\n\n      // Int64BE(value, raddix) style\n      if (!isValidBuffer(buffer, offset)) {\n        var _storage = storage || Array;\n        raddix = offset;\n        value = buffer;\n        offset = 0;\n        buffer = (storage === BUFFER) ? BUFFER.alloc(8) : new _storage(8);\n      }\n\n      that.buffer = buffer;\n      that.offset = offset |= 0;\n\n      // Int64BE(buffer, offset) style\n      if (UNDEFINED === typeof value) return;\n\n      // Int64BE(buffer, offset, value, raddix) style\n      if (\"string\" === typeof value) {\n        fromString(buffer, offset, value, raddix || 10);\n      } else if (isValidBuffer(value, raddix)) {\n        fromArray(buffer, offset, value, raddix);\n      } else if (\"number\" === typeof raddix) {\n        writeInt32(buffer, offset + posH, value); // high\n        writeInt32(buffer, offset + posL, raddix); // low\n      } else if (value > 0) {\n        fromPositive(buffer, offset, value); // positive\n      } else if (value < 0) {\n        fromNegative(buffer, offset, value); // negative\n      } else {\n        fromArray(buffer, offset, ZERO, 0); // zero, NaN and others\n      }\n    }\n\n    function fromString(buffer, offset, str, raddix) {\n      var pos = 0;\n      var len = str.length;\n      var high = 0;\n      var low = 0;\n      if (str[0] === \"-\") pos++;\n      var sign = pos;\n      while (pos < len) {\n        var chr = parseInt(str[pos++], raddix);\n        if (!(chr >= 0)) break; // NaN\n        low = low * raddix + chr;\n        high = high * raddix + Math.floor(low / BIT32);\n        low %= BIT32;\n      }\n      if (sign) {\n        high = ~high;\n        if (low) {\n          low = BIT32 - low;\n        } else {\n          high++;\n        }\n      }\n      writeInt32(buffer, offset + posH, high);\n      writeInt32(buffer, offset + posL, low);\n    }\n\n    function toNumber() {\n      var buffer = this.buffer;\n      var offset = this.offset;\n      var high = readInt32(buffer, offset + posH);\n      var low = readInt32(buffer, offset + posL);\n      if (!unsigned) high |= 0; // a trick to get signed\n      return high ? (high * BIT32 + low) : low;\n    }\n\n    function toString(radix) {\n      var buffer = this.buffer;\n      var offset = this.offset;\n      var high = readInt32(buffer, offset + posH);\n      var low = readInt32(buffer, offset + posL);\n      var str = \"\";\n      var sign = !unsigned && (high & 0x80000000);\n      if (sign) {\n        high = ~high;\n        low = BIT32 - low;\n      }\n      radix = radix || 10;\n      while (1) {\n        var mod = (high % radix) * BIT32 + low;\n        high = Math.floor(high / radix);\n        low = Math.floor(mod / radix);\n        str = (mod % radix).toString(radix) + str;\n        if (!high && !low) break;\n      }\n      if (sign) {\n        str = \"-\" + str;\n      }\n      return str;\n    }\n\n    function writeInt32(buffer, offset, value) {\n      buffer[offset + pos3] = value & 255;\n      value = value >> 8;\n      buffer[offset + pos2] = value & 255;\n      value = value >> 8;\n      buffer[offset + pos1] = value & 255;\n      value = value >> 8;\n      buffer[offset + pos0] = value & 255;\n    }\n\n    function readInt32(buffer, offset) {\n      return (buffer[offset + pos0] * BIT24) +\n        (buffer[offset + pos1] << 16) +\n        (buffer[offset + pos2] << 8) +\n        buffer[offset + pos3];\n    }\n  }\n\n  function toArray(raw) {\n    var buffer = this.buffer;\n    var offset = this.offset;\n    storage = null; // Array\n\n    if (raw !== false && isArray(buffer)) {\n      return (buffer.length === 8) ? buffer : buffer.slice(offset, offset + 8);\n    }\n\n    return newArray(buffer, offset);\n  }\n\n  function toBuffer(raw) {\n    var buffer = this.buffer;\n    var offset = this.offset;\n    storage = BUFFER;\n\n    if (raw !== false && BUFFER.isBuffer(buffer)) {\n      return (buffer.length === 8) ? buffer : buffer.slice(offset, offset + 8);\n    }\n\n    // Buffer.from(arraybuffer) available since Node v4.5.0\n    // https://nodejs.org/en/blog/release/v4.5.0/\n    return BUFFER.from(toArrayBuffer.call(this, raw));\n  }\n\n  function toArrayBuffer(raw) {\n    var buffer = this.buffer;\n    var offset = this.offset;\n    var arrbuf = buffer.buffer;\n    storage = UINT8ARRAY;\n\n    // arrbuf.slice() ignores buffer.offset until Node v8.0.0\n    if (raw !== false && !buffer.offset && (arrbuf instanceof ARRAYBUFFER)) {\n      return (arrbuf.byteLength === 8) ? arrbuf : arrbuf.slice(offset, offset + 8);\n    }\n\n    var dest = new UINT8ARRAY(8);\n    fromArray(dest, 0, buffer, offset);\n    return dest.buffer;\n  }\n\n  function isValidBuffer(buffer, offset) {\n    var len = buffer && buffer.length;\n    offset |= 0;\n    return len && (offset + 8 <= len) && (\"string\" !== typeof buffer[offset]);\n  }\n\n  function fromArray(destbuf, destoff, srcbuf, srcoff) {\n    destoff |= 0;\n    srcoff |= 0;\n    for (var i = 0; i < 8; i++) {\n      destbuf[destoff++] = srcbuf[srcoff++] & 255;\n    }\n  }\n\n  function newArray(buffer, offset) {\n    return Array.prototype.slice.call(buffer, offset, offset + 8);\n  }\n\n  function fromPositiveBE(buffer, offset, value) {\n    var pos = offset + 8;\n    while (pos > offset) {\n      buffer[--pos] = value & 255;\n      value /= 256;\n    }\n  }\n\n  function fromNegativeBE(buffer, offset, value) {\n    var pos = offset + 8;\n    value++;\n    while (pos > offset) {\n      buffer[--pos] = ((-value) & 255) ^ 255;\n      value /= 256;\n    }\n  }\n\n  function fromPositiveLE(buffer, offset, value) {\n    var end = offset + 8;\n    while (offset < end) {\n      buffer[offset++] = value & 255;\n      value /= 256;\n    }\n  }\n\n  function fromNegativeLE(buffer, offset, value) {\n    var end = offset + 8;\n    value++;\n    while (offset < end) {\n      buffer[offset++] = ((-value) & 255) ^ 255;\n      value /= 256;\n    }\n  }\n\n  // https://github.com/retrofox/is-array\n  function _isArray(val) {\n    return !!val && \"[object Array]\" == Object.prototype.toString.call(val);\n  }\n\n}(typeof exports === 'object' && typeof exports.nodeName !== 'string' ? exports : (this || {}));\n","(function (root) {\n    'use strict';\n    // A list of regular expressions that match arbitrary IPv4 addresses,\n    // for which a number of weird notations exist.\n    // Note that an address like 0010.0xa5.1.1 is considered legal.\n    const ipv4Part = '(0?\\\\d+|0x[a-f0-9]+)';\n    const ipv4Regexes = {\n        fourOctet: new RegExp(`^${ipv4Part}\\\\.${ipv4Part}\\\\.${ipv4Part}\\\\.${ipv4Part}$`, 'i'),\n        threeOctet: new RegExp(`^${ipv4Part}\\\\.${ipv4Part}\\\\.${ipv4Part}$`, 'i'),\n        twoOctet: new RegExp(`^${ipv4Part}\\\\.${ipv4Part}$`, 'i'),\n        longValue: new RegExp(`^${ipv4Part}$`, 'i')\n    };\n\n    // Regular Expression for checking Octal numbers\n    const octalRegex = new RegExp(`^0[0-7]+$`, 'i');\n    const hexRegex = new RegExp(`^0x[a-f0-9]+$`, 'i');\n\n    const zoneIndex = '%[0-9a-z]{1,}';\n\n    // IPv6-matching regular expressions.\n    // For IPv6, the task is simpler: it is enough to match the colon-delimited\n    // hexadecimal IPv6 and a transitional variant with dotted-decimal IPv4 at\n    // the end.\n    const ipv6Part = '(?:[0-9a-f]+::?)+';\n    const ipv6Regexes = {\n        zoneIndex: new RegExp(zoneIndex, 'i'),\n        'native': new RegExp(`^(::)?(${ipv6Part})?([0-9a-f]+)?(::)?(${zoneIndex})?$`, 'i'),\n        deprecatedTransitional: new RegExp(`^(?:::)(${ipv4Part}\\\\.${ipv4Part}\\\\.${ipv4Part}\\\\.${ipv4Part}(${zoneIndex})?)$`, 'i'),\n        transitional: new RegExp(`^((?:${ipv6Part})|(?:::)(?:${ipv6Part})?)${ipv4Part}\\\\.${ipv4Part}\\\\.${ipv4Part}\\\\.${ipv4Part}(${zoneIndex})?$`, 'i')\n    };\n\n    // Expand :: in an IPv6 address or address part consisting of `parts` groups.\n    function expandIPv6 (string, parts) {\n        // More than one '::' means invalid adddress\n        if (string.indexOf('::') !== string.lastIndexOf('::')) {\n            return null;\n        }\n\n        let colonCount = 0;\n        let lastColon = -1;\n        let zoneId = (string.match(ipv6Regexes.zoneIndex) || [])[0];\n        let replacement, replacementCount;\n\n        // Remove zone index and save it for later\n        if (zoneId) {\n            zoneId = zoneId.substring(1);\n            string = string.replace(/%.+$/, '');\n        }\n\n        // How many parts do we already have?\n        while ((lastColon = string.indexOf(':', lastColon + 1)) >= 0) {\n            colonCount++;\n        }\n\n        // 0::0 is two parts more than ::\n        if (string.substr(0, 2) === '::') {\n            colonCount--;\n        }\n\n        if (string.substr(-2, 2) === '::') {\n            colonCount--;\n        }\n\n        // The following loop would hang if colonCount > parts\n        if (colonCount > parts) {\n            return null;\n        }\n\n        // replacement = ':' + '0:' * (parts - colonCount)\n        replacementCount = parts - colonCount;\n        replacement = ':';\n        while (replacementCount--) {\n            replacement += '0:';\n        }\n\n        // Insert the missing zeroes\n        string = string.replace('::', replacement);\n\n        // Trim any garbage which may be hanging around if :: was at the edge in\n        // the source strin\n        if (string[0] === ':') {\n            string = string.slice(1);\n        }\n\n        if (string[string.length - 1] === ':') {\n            string = string.slice(0, -1);\n        }\n\n        parts = (function () {\n            const ref = string.split(':');\n            const results = [];\n\n            for (let i = 0; i < ref.length; i++) {\n                results.push(parseInt(ref[i], 16));\n            }\n\n            return results;\n        })();\n\n        return {\n            parts: parts,\n            zoneId: zoneId\n        };\n    }\n\n    // A generic CIDR (Classless Inter-Domain Routing) RFC1518 range matcher.\n    function matchCIDR (first, second, partSize, cidrBits) {\n        if (first.length !== second.length) {\n            throw new Error('ipaddr: cannot match CIDR for objects with different lengths');\n        }\n\n        let part = 0;\n        let shift;\n\n        while (cidrBits > 0) {\n            shift = partSize - cidrBits;\n            if (shift < 0) {\n                shift = 0;\n            }\n\n            if (first[part] >> shift !== second[part] >> shift) {\n                return false;\n            }\n\n            cidrBits -= partSize;\n            part += 1;\n        }\n\n        return true;\n    }\n\n    function parseIntAuto (string) {\n        // Hexadedimal base 16 (0x#)\n        if (hexRegex.test(string)) {\n            return parseInt(string, 16);\n        }\n        // While octal representation is discouraged by ECMAScript 3\n        // and forbidden by ECMAScript 5, we silently allow it to\n        // work only if the rest of the string has numbers less than 8.\n        if (string[0] === '0' && !isNaN(parseInt(string[1], 10))) {\n        if (octalRegex.test(string)) {\n            return parseInt(string, 8);\n        }\n            throw new Error(`ipaddr: cannot parse ${string} as octal`);\n        }\n        // Always include the base 10 radix!\n        return parseInt(string, 10);\n    }\n\n    function padPart (part, length) {\n        while (part.length < length) {\n            part = `0${part}`;\n        }\n\n        return part;\n    }\n\n    const ipaddr = {};\n\n    // An IPv4 address (RFC791).\n    ipaddr.IPv4 = (function () {\n        // Constructs a new IPv4 address from an array of four octets\n        // in network order (MSB first)\n        // Verifies the input.\n        function IPv4 (octets) {\n            if (octets.length !== 4) {\n                throw new Error('ipaddr: ipv4 octet count should be 4');\n            }\n\n            let i, octet;\n\n            for (i = 0; i < octets.length; i++) {\n                octet = octets[i];\n                if (!((0 <= octet && octet <= 255))) {\n                    throw new Error('ipaddr: ipv4 octet should fit in 8 bits');\n                }\n            }\n\n            this.octets = octets;\n        }\n\n        // Special IPv4 address ranges.\n        // See also https://en.wikipedia.org/wiki/Reserved_IP_addresses\n        IPv4.prototype.SpecialRanges = {\n            unspecified: [[new IPv4([0, 0, 0, 0]), 8]],\n            broadcast: [[new IPv4([255, 255, 255, 255]), 32]],\n            // RFC3171\n            multicast: [[new IPv4([224, 0, 0, 0]), 4]],\n            // RFC3927\n            linkLocal: [[new IPv4([169, 254, 0, 0]), 16]],\n            // RFC5735\n            loopback: [[new IPv4([127, 0, 0, 0]), 8]],\n            // RFC6598\n            carrierGradeNat: [[new IPv4([100, 64, 0, 0]), 10]],\n            // RFC1918\n            'private': [\n                [new IPv4([10, 0, 0, 0]), 8],\n                [new IPv4([172, 16, 0, 0]), 12],\n                [new IPv4([192, 168, 0, 0]), 16]\n            ],\n            // Reserved and testing-only ranges; RFCs 5735, 5737, 2544, 1700\n            reserved: [\n                [new IPv4([192, 0, 0, 0]), 24],\n                [new IPv4([192, 0, 2, 0]), 24],\n                [new IPv4([192, 88, 99, 0]), 24],\n                [new IPv4([198, 51, 100, 0]), 24],\n                [new IPv4([203, 0, 113, 0]), 24],\n                [new IPv4([240, 0, 0, 0]), 4]\n            ]\n        };\n\n        // The 'kind' method exists on both IPv4 and IPv6 classes.\n        IPv4.prototype.kind = function () {\n            return 'ipv4';\n        };\n\n        // Checks if this address matches other one within given CIDR range.\n        IPv4.prototype.match = function (other, cidrRange) {\n            let ref;\n            if (cidrRange === undefined) {\n                ref = other;\n                other = ref[0];\n                cidrRange = ref[1];\n            }\n\n            if (other.kind() !== 'ipv4') {\n                throw new Error('ipaddr: cannot match ipv4 address with non-ipv4 one');\n            }\n\n            return matchCIDR(this.octets, other.octets, 8, cidrRange);\n        };\n\n        // returns a number of leading ones in IPv4 address, making sure that\n        // the rest is a solid sequence of 0's (valid netmask)\n        // returns either the CIDR length or null if mask is not valid\n        IPv4.prototype.prefixLengthFromSubnetMask = function () {\n            let cidr = 0;\n            // non-zero encountered stop scanning for zeroes\n            let stop = false;\n            // number of zeroes in octet\n            const zerotable = {\n                0: 8,\n                128: 7,\n                192: 6,\n                224: 5,\n                240: 4,\n                248: 3,\n                252: 2,\n                254: 1,\n                255: 0\n            };\n            let i, octet, zeros;\n\n            for (i = 3; i >= 0; i -= 1) {\n                octet = this.octets[i];\n                if (octet in zerotable) {\n                    zeros = zerotable[octet];\n                    if (stop && zeros !== 0) {\n                        return null;\n                    }\n\n                    if (zeros !== 8) {\n                        stop = true;\n                    }\n\n                    cidr += zeros;\n                } else {\n                    return null;\n                }\n            }\n\n            return 32 - cidr;\n        };\n\n        // Checks if the address corresponds to one of the special ranges.\n        IPv4.prototype.range = function () {\n            return ipaddr.subnetMatch(this, this.SpecialRanges);\n        };\n\n        // Returns an array of byte-sized values in network order (MSB first)\n        IPv4.prototype.toByteArray = function () {\n            return this.octets.slice(0);\n        };\n\n        // Converts this IPv4 address to an IPv4-mapped IPv6 address.\n        IPv4.prototype.toIPv4MappedAddress = function () {\n            return ipaddr.IPv6.parse(`::ffff:${this.toString()}`);\n        };\n\n        // Symmetrical method strictly for aligning with the IPv6 methods.\n        IPv4.prototype.toNormalizedString = function () {\n            return this.toString();\n        };\n\n        // Returns the address in convenient, decimal-dotted format.\n        IPv4.prototype.toString = function () {\n            return this.octets.join('.');\n        };\n\n        return IPv4;\n    })();\n\n    // A utility function to return broadcast address given the IPv4 interface and prefix length in CIDR notation\n    ipaddr.IPv4.broadcastAddressFromCIDR = function (string) {\n\n        try {\n            const cidr = this.parseCIDR(string);\n            const ipInterfaceOctets = cidr[0].toByteArray();\n            const subnetMaskOctets = this.subnetMaskFromPrefixLength(cidr[1]).toByteArray();\n            const octets = [];\n            let i = 0;\n            while (i < 4) {\n                // Broadcast address is bitwise OR between ip interface and inverted mask\n                octets.push(parseInt(ipInterfaceOctets[i], 10) | parseInt(subnetMaskOctets[i], 10) ^ 255);\n                i++;\n            }\n\n            return new this(octets);\n        } catch (e) {\n            throw new Error('ipaddr: the address does not have IPv4 CIDR format');\n        }\n    };\n\n    // Checks if a given string is formatted like IPv4 address.\n    ipaddr.IPv4.isIPv4 = function (string) {\n        return this.parser(string) !== null;\n    };\n\n    // Checks if a given string is a valid IPv4 address.\n    ipaddr.IPv4.isValid = function (string) {\n        try {\n            new this(this.parser(string));\n            return true;\n        } catch (e) {\n            return false;\n        }\n    };\n\n    // Checks if a given string is a full four-part IPv4 Address.\n    ipaddr.IPv4.isValidFourPartDecimal = function (string) {\n        if (ipaddr.IPv4.isValid(string) && string.match(/^(0|[1-9]\\d*)(\\.(0|[1-9]\\d*)){3}$/)) {\n            return true;\n        } else {\n            return false;\n        }\n    };\n\n    // A utility function to return network address given the IPv4 interface and prefix length in CIDR notation\n    ipaddr.IPv4.networkAddressFromCIDR = function (string) {\n        let cidr, i, ipInterfaceOctets, octets, subnetMaskOctets;\n\n        try {\n            cidr = this.parseCIDR(string);\n            ipInterfaceOctets = cidr[0].toByteArray();\n            subnetMaskOctets = this.subnetMaskFromPrefixLength(cidr[1]).toByteArray();\n            octets = [];\n            i = 0;\n            while (i < 4) {\n                // Network address is bitwise AND between ip interface and mask\n                octets.push(parseInt(ipInterfaceOctets[i], 10) & parseInt(subnetMaskOctets[i], 10));\n                i++;\n            }\n\n            return new this(octets);\n        } catch (e) {\n            throw new Error('ipaddr: the address does not have IPv4 CIDR format');\n        }\n    };\n\n    // Tries to parse and validate a string with IPv4 address.\n    // Throws an error if it fails.\n    ipaddr.IPv4.parse = function (string) {\n        const parts = this.parser(string);\n\n        if (parts === null) {\n            throw new Error('ipaddr: string is not formatted like an IPv4 Address');\n        }\n\n        return new this(parts);\n    };\n\n    // Parses the string as an IPv4 Address with CIDR Notation.\n    ipaddr.IPv4.parseCIDR = function (string) {\n        let match;\n\n        if ((match = string.match(/^(.+)\\/(\\d+)$/))) {\n            const maskLength = parseInt(match[2]);\n            if (maskLength >= 0 && maskLength <= 32) {\n                const parsed = [this.parse(match[1]), maskLength];\n                Object.defineProperty(parsed, 'toString', {\n                    value: function () {\n                        return this.join('/');\n                    }\n                });\n                return parsed;\n            }\n        }\n\n        throw new Error('ipaddr: string is not formatted like an IPv4 CIDR range');\n    };\n\n    // Classful variants (like a.b, where a is an octet, and b is a 24-bit\n    // value representing last three octets; this corresponds to a class C\n    // address) are omitted due to classless nature of modern Internet.\n    ipaddr.IPv4.parser = function (string) {\n        let match, part, value;\n\n        // parseInt recognizes all that octal & hexadecimal weirdness for us\n        if ((match = string.match(ipv4Regexes.fourOctet))) {\n            return (function () {\n                const ref = match.slice(1, 6);\n                const results = [];\n\n                for (let i = 0; i < ref.length; i++) {\n                    part = ref[i];\n                    results.push(parseIntAuto(part));\n                }\n\n                return results;\n            })();\n        } else if ((match = string.match(ipv4Regexes.longValue))) {\n            value = parseIntAuto(match[1]);\n            if (value > 0xffffffff || value < 0) {\n                throw new Error('ipaddr: address outside defined range');\n            }\n\n            return ((function () {\n                const results = [];\n                let shift;\n\n                for (shift = 0; shift <= 24; shift += 8) {\n                    results.push((value >> shift) & 0xff);\n                }\n\n                return results;\n            })()).reverse();\n        } else if ((match = string.match(ipv4Regexes.twoOctet))) {\n            return (function () {\n                const ref = match.slice(1, 4);\n                const results = [];\n\n                value = parseIntAuto(ref[1]);\n                if (value > 0xffffff || value < 0) {\n                    throw new Error('ipaddr: address outside defined range');\n                }\n\n                results.push(parseIntAuto(ref[0]));\n                results.push((value >> 16) & 0xff);\n                results.push((value >>  8) & 0xff);\n                results.push( value        & 0xff);\n\n                return results;\n            })();\n        } else if ((match = string.match(ipv4Regexes.threeOctet))) {\n            return (function () {\n                const ref = match.slice(1, 5);\n                const results = [];\n\n                value = parseIntAuto(ref[2]);\n                if (value > 0xffff || value < 0) {\n                    throw new Error('ipaddr: address outside defined range');\n                }\n\n                results.push(parseIntAuto(ref[0]));\n                results.push(parseIntAuto(ref[1]));\n                results.push((value >> 8) & 0xff);\n                results.push( value       & 0xff);\n\n                return results;\n            })();\n        } else {\n            return null;\n        }\n    };\n\n    // A utility function to return subnet mask in IPv4 format given the prefix length\n    ipaddr.IPv4.subnetMaskFromPrefixLength = function (prefix) {\n        prefix = parseInt(prefix);\n        if (prefix < 0 || prefix > 32) {\n            throw new Error('ipaddr: invalid IPv4 prefix length');\n        }\n\n        const octets = [0, 0, 0, 0];\n        let j = 0;\n        const filledOctetCount = Math.floor(prefix / 8);\n\n        while (j < filledOctetCount) {\n            octets[j] = 255;\n            j++;\n        }\n\n        if (filledOctetCount < 4) {\n            octets[filledOctetCount] = Math.pow(2, prefix % 8) - 1 << 8 - (prefix % 8);\n        }\n\n        return new this(octets);\n    };\n\n    // An IPv6 address (RFC2460)\n    ipaddr.IPv6 = (function () {\n        // Constructs an IPv6 address from an array of eight 16 - bit parts\n        // or sixteen 8 - bit parts in network order(MSB first).\n        // Throws an error if the input is invalid.\n        function IPv6 (parts, zoneId) {\n            let i, part;\n\n            if (parts.length === 16) {\n                this.parts = [];\n                for (i = 0; i <= 14; i += 2) {\n                    this.parts.push((parts[i] << 8) | parts[i + 1]);\n                }\n            } else if (parts.length === 8) {\n                this.parts = parts;\n            } else {\n                throw new Error('ipaddr: ipv6 part count should be 8 or 16');\n            }\n\n            for (i = 0; i < this.parts.length; i++) {\n                part = this.parts[i];\n                if (!((0 <= part && part <= 0xffff))) {\n                    throw new Error('ipaddr: ipv6 part should fit in 16 bits');\n                }\n            }\n\n            if (zoneId) {\n                this.zoneId = zoneId;\n            }\n        }\n\n        // Special IPv6 ranges\n        IPv6.prototype.SpecialRanges = {\n            // RFC4291, here and after\n            unspecified: [new IPv6([0, 0, 0, 0, 0, 0, 0, 0]), 128],\n            linkLocal: [new IPv6([0xfe80, 0, 0, 0, 0, 0, 0, 0]), 10],\n            multicast: [new IPv6([0xff00, 0, 0, 0, 0, 0, 0, 0]), 8],\n            loopback: [new IPv6([0, 0, 0, 0, 0, 0, 0, 1]), 128],\n            uniqueLocal: [new IPv6([0xfc00, 0, 0, 0, 0, 0, 0, 0]), 7],\n            ipv4Mapped: [new IPv6([0, 0, 0, 0, 0, 0xffff, 0, 0]), 96],\n            // RFC6145\n            rfc6145: [new IPv6([0, 0, 0, 0, 0xffff, 0, 0, 0]), 96],\n            // RFC6052\n            rfc6052: [new IPv6([0x64, 0xff9b, 0, 0, 0, 0, 0, 0]), 96],\n            // RFC3056\n            '6to4': [new IPv6([0x2002, 0, 0, 0, 0, 0, 0, 0]), 16],\n            // RFC6052, RFC6146\n            teredo: [new IPv6([0x2001, 0, 0, 0, 0, 0, 0, 0]), 32],\n            // RFC4291\n            reserved: [[new IPv6([0x2001, 0xdb8, 0, 0, 0, 0, 0, 0]), 32]]\n        };\n\n        // Checks if this address is an IPv4-mapped IPv6 address.\n        IPv6.prototype.isIPv4MappedAddress = function () {\n            return this.range() === 'ipv4Mapped';\n        };\n\n        // The 'kind' method exists on both IPv4 and IPv6 classes.\n        IPv6.prototype.kind = function () {\n            return 'ipv6';\n        };\n\n        // Checks if this address matches other one within given CIDR range.\n        IPv6.prototype.match = function (other, cidrRange) {\n            let ref;\n\n            if (cidrRange === undefined) {\n                ref = other;\n                other = ref[0];\n                cidrRange = ref[1];\n            }\n\n            if (other.kind() !== 'ipv6') {\n                throw new Error('ipaddr: cannot match ipv6 address with non-ipv6 one');\n            }\n\n            return matchCIDR(this.parts, other.parts, 16, cidrRange);\n        };\n\n        // returns a number of leading ones in IPv6 address, making sure that\n        // the rest is a solid sequence of 0's (valid netmask)\n        // returns either the CIDR length or null if mask is not valid\n        IPv6.prototype.prefixLengthFromSubnetMask = function () {\n            let cidr = 0;\n            // non-zero encountered stop scanning for zeroes\n            let stop = false;\n            // number of zeroes in octet\n            const zerotable = {\n                0: 16,\n                32768: 15,\n                49152: 14,\n                57344: 13,\n                61440: 12,\n                63488: 11,\n                64512: 10,\n                65024: 9,\n                65280: 8,\n                65408: 7,\n                65472: 6,\n                65504: 5,\n                65520: 4,\n                65528: 3,\n                65532: 2,\n                65534: 1,\n                65535: 0\n            };\n            let part, zeros;\n\n            for (let i = 7; i >= 0; i -= 1) {\n                part = this.parts[i];\n                if (part in zerotable) {\n                    zeros = zerotable[part];\n                    if (stop && zeros !== 0) {\n                        return null;\n                    }\n\n                    if (zeros !== 16) {\n                        stop = true;\n                    }\n\n                    cidr += zeros;\n                } else {\n                    return null;\n                }\n            }\n\n            return 128 - cidr;\n        };\n\n\n        // Checks if the address corresponds to one of the special ranges.\n        IPv6.prototype.range = function () {\n            return ipaddr.subnetMatch(this, this.SpecialRanges);\n        };\n\n        // Returns an array of byte-sized values in network order (MSB first)\n        IPv6.prototype.toByteArray = function () {\n            let part;\n            const bytes = [];\n            const ref = this.parts;\n            for (let i = 0; i < ref.length; i++) {\n                part = ref[i];\n                bytes.push(part >> 8);\n                bytes.push(part & 0xff);\n            }\n\n            return bytes;\n        };\n\n        // Returns the address in expanded format with all zeroes included, like\n        // 2001:0db8:0008:0066:0000:0000:0000:0001\n        IPv6.prototype.toFixedLengthString = function () {\n            const addr = ((function () {\n                const results = [];\n                for (let i = 0; i < this.parts.length; i++) {\n                    results.push(padPart(this.parts[i].toString(16), 4));\n                }\n\n                return results;\n            }).call(this)).join(':');\n\n            let suffix = '';\n\n            if (this.zoneId) {\n                suffix = `%${this.zoneId}`;\n            }\n\n            return addr + suffix;\n        };\n\n        // Converts this address to IPv4 address if it is an IPv4-mapped IPv6 address.\n        // Throws an error otherwise.\n        IPv6.prototype.toIPv4Address = function () {\n            if (!this.isIPv4MappedAddress()) {\n                throw new Error('ipaddr: trying to convert a generic ipv6 address to ipv4');\n            }\n\n            const ref = this.parts.slice(-2);\n            const high = ref[0];\n            const low = ref[1];\n\n            return new ipaddr.IPv4([high >> 8, high & 0xff, low >> 8, low & 0xff]);\n        };\n\n        // Returns the address in expanded format with all zeroes included, like\n        // 2001:db8:8:66:0:0:0:1\n        //\n        // Deprecated: use toFixedLengthString() instead.\n        IPv6.prototype.toNormalizedString = function () {\n            const addr = ((function () {\n                const results = [];\n\n                for (let i = 0; i < this.parts.length; i++) {\n                    results.push(this.parts[i].toString(16));\n                }\n\n                return results;\n            }).call(this)).join(':');\n\n            let suffix = '';\n\n            if (this.zoneId) {\n                suffix = `%${this.zoneId}`;\n            }\n\n            return addr + suffix;\n        };\n\n        // Returns the address in compact, human-readable format like\n        // 2001:db8:8:66::1\n        // in line with RFC 5952 (see https://tools.ietf.org/html/rfc5952#section-4)\n        IPv6.prototype.toRFC5952String = function () {\n            const regex = /((^|:)(0(:|$)){2,})/g;\n            const string = this.toNormalizedString();\n            let bestMatchIndex = 0;\n            let bestMatchLength = -1;\n            let match;\n\n            while ((match = regex.exec(string))) {\n                if (match[0].length > bestMatchLength) {\n                    bestMatchIndex = match.index;\n                    bestMatchLength = match[0].length;\n                }\n            }\n\n            if (bestMatchLength < 0) {\n                return string;\n            }\n\n            return `${string.substring(0, bestMatchIndex)}::${string.substring(bestMatchIndex + bestMatchLength)}`;\n        };\n\n        // Returns the address in compact, human-readable format like\n        // 2001:db8:8:66::1\n        //\n        // Deprecated: use toRFC5952String() instead.\n        IPv6.prototype.toString = function () {\n            // Replace the first sequence of 1 or more '0' parts with '::'\n            return this.toNormalizedString().replace(/((^|:)(0(:|$))+)/, '::');\n        };\n\n        return IPv6;\n\n    })();\n\n    // A utility function to return broadcast address given the IPv6 interface and prefix length in CIDR notation\n    ipaddr.IPv6.broadcastAddressFromCIDR = function (string) {\n        try {\n            const cidr = this.parseCIDR(string);\n            const ipInterfaceOctets = cidr[0].toByteArray();\n            const subnetMaskOctets = this.subnetMaskFromPrefixLength(cidr[1]).toByteArray();\n            const octets = [];\n            let i = 0;\n            while (i < 16) {\n                // Broadcast address is bitwise OR between ip interface and inverted mask\n                octets.push(parseInt(ipInterfaceOctets[i], 10) | parseInt(subnetMaskOctets[i], 10) ^ 255);\n                i++;\n            }\n\n            return new this(octets);\n        } catch (e) {\n            throw new Error(`ipaddr: the address does not have IPv6 CIDR format (${e})`);\n        }\n    };\n\n    // Checks if a given string is formatted like IPv6 address.\n    ipaddr.IPv6.isIPv6 = function (string) {\n        return this.parser(string) !== null;\n    };\n\n    // Checks to see if string is a valid IPv6 Address\n    ipaddr.IPv6.isValid = function (string) {\n\n        // Since IPv6.isValid is always called first, this shortcut\n        // provides a substantial performance gain.\n        if (typeof string === 'string' && string.indexOf(':') === -1) {\n            return false;\n        }\n\n        try {\n            const addr = this.parser(string);\n            new this(addr.parts, addr.zoneId);\n            return true;\n        } catch (e) {\n            return false;\n        }\n    };\n\n    // A utility function to return network address given the IPv6 interface and prefix length in CIDR notation\n    ipaddr.IPv6.networkAddressFromCIDR = function (string) {\n        let cidr, i, ipInterfaceOctets, octets, subnetMaskOctets;\n\n        try {\n            cidr = this.parseCIDR(string);\n            ipInterfaceOctets = cidr[0].toByteArray();\n            subnetMaskOctets = this.subnetMaskFromPrefixLength(cidr[1]).toByteArray();\n            octets = [];\n            i = 0;\n            while (i < 16) {\n                // Network address is bitwise AND between ip interface and mask\n                octets.push(parseInt(ipInterfaceOctets[i], 10) & parseInt(subnetMaskOctets[i], 10));\n                i++;\n            }\n\n            return new this(octets);\n        } catch (e) {\n            throw new Error(`ipaddr: the address does not have IPv6 CIDR format (${e})`);\n        }\n    };\n\n    // Tries to parse and validate a string with IPv6 address.\n    // Throws an error if it fails.\n    ipaddr.IPv6.parse = function (string) {\n        const addr = this.parser(string);\n\n        if (addr.parts === null) {\n            throw new Error('ipaddr: string is not formatted like an IPv6 Address');\n        }\n\n        return new this(addr.parts, addr.zoneId);\n    };\n\n    ipaddr.IPv6.parseCIDR = function (string) {\n        let maskLength, match, parsed;\n\n        if ((match = string.match(/^(.+)\\/(\\d+)$/))) {\n            maskLength = parseInt(match[2]);\n            if (maskLength >= 0 && maskLength <= 128) {\n                parsed = [this.parse(match[1]), maskLength];\n                Object.defineProperty(parsed, 'toString', {\n                    value: function () {\n                        return this.join('/');\n                    }\n                });\n                return parsed;\n            }\n        }\n\n        throw new Error('ipaddr: string is not formatted like an IPv6 CIDR range');\n    };\n\n    // Parse an IPv6 address.\n    ipaddr.IPv6.parser = function (string) {\n        let addr, i, match, octet, octets, zoneId;\n\n        if ((match = string.match(ipv6Regexes.deprecatedTransitional))) {\n            return this.parser(`::ffff:${match[1]}`);\n        }\n        if (ipv6Regexes.native.test(string)) {\n            return expandIPv6(string, 8);\n        }\n        if ((match = string.match(ipv6Regexes.transitional))) {\n            zoneId = match[6] || '';\n            addr = expandIPv6(match[1].slice(0, -1) + zoneId, 6);\n            if (addr.parts) {\n                octets = [\n                    parseInt(match[2]),\n                    parseInt(match[3]),\n                    parseInt(match[4]),\n                    parseInt(match[5])\n                ];\n                for (i = 0; i < octets.length; i++) {\n                    octet = octets[i];\n                    if (!((0 <= octet && octet <= 255))) {\n                        return null;\n                    }\n                }\n\n                addr.parts.push(octets[0] << 8 | octets[1]);\n                addr.parts.push(octets[2] << 8 | octets[3]);\n                return {\n                    parts: addr.parts,\n                    zoneId: addr.zoneId\n                };\n            }\n        }\n\n        return null;\n    };\n\n    // A utility function to return subnet mask in IPv6 format given the prefix length\n    ipaddr.IPv6.subnetMaskFromPrefixLength = function (prefix) {\n        prefix = parseInt(prefix);\n        if (prefix < 0 || prefix > 128) {\n            throw new Error('ipaddr: invalid IPv6 prefix length');\n        }\n\n        const octets = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n        let j = 0;\n        const filledOctetCount = Math.floor(prefix / 8);\n\n        while (j < filledOctetCount) {\n            octets[j] = 255;\n            j++;\n        }\n\n        if (filledOctetCount < 16) {\n            octets[filledOctetCount] = Math.pow(2, prefix % 8) - 1 << 8 - (prefix % 8);\n        }\n\n        return new this(octets);\n    };\n\n    // Try to parse an array in network order (MSB first) for IPv4 and IPv6\n    ipaddr.fromByteArray = function (bytes) {\n        const length = bytes.length;\n\n        if (length === 4) {\n            return new ipaddr.IPv4(bytes);\n        } else if (length === 16) {\n            return new ipaddr.IPv6(bytes);\n        } else {\n            throw new Error('ipaddr: the binary input is neither an IPv6 nor IPv4 address');\n        }\n    };\n\n    // Checks if the address is valid IP address\n    ipaddr.isValid = function (string) {\n        return ipaddr.IPv6.isValid(string) || ipaddr.IPv4.isValid(string);\n    };\n\n\n    // Attempts to parse an IP Address, first through IPv6 then IPv4.\n    // Throws an error if it could not be parsed.\n    ipaddr.parse = function (string) {\n        if (ipaddr.IPv6.isValid(string)) {\n            return ipaddr.IPv6.parse(string);\n        } else if (ipaddr.IPv4.isValid(string)) {\n            return ipaddr.IPv4.parse(string);\n        } else {\n            throw new Error('ipaddr: the address has neither IPv6 nor IPv4 format');\n        }\n    };\n\n    // Attempt to parse CIDR notation, first through IPv6 then IPv4.\n    // Throws an error if it could not be parsed.\n    ipaddr.parseCIDR = function (string) {\n        try {\n            return ipaddr.IPv6.parseCIDR(string);\n        } catch (e) {\n            try {\n                return ipaddr.IPv4.parseCIDR(string);\n            } catch (e2) {\n                throw new Error('ipaddr: the address has neither IPv6 nor IPv4 CIDR format');\n            }\n        }\n    };\n\n    // Parse an address and return plain IPv4 address if it is an IPv4-mapped address\n    ipaddr.process = function (string) {\n        const addr = this.parse(string);\n\n        if (addr.kind() === 'ipv6' && addr.isIPv4MappedAddress()) {\n            return addr.toIPv4Address();\n        } else {\n            return addr;\n        }\n    };\n\n    // An utility function to ease named range matching. See examples below.\n    // rangeList can contain both IPv4 and IPv6 subnet entries and will not throw errors\n    // on matching IPv4 addresses to IPv6 ranges or vice versa.\n    ipaddr.subnetMatch = function (address, rangeList, defaultName) {\n        let i, rangeName, rangeSubnets, subnet;\n\n        if (defaultName === undefined || defaultName === null) {\n            defaultName = 'unicast';\n        }\n\n        for (rangeName in rangeList) {\n            if (Object.prototype.hasOwnProperty.call(rangeList, rangeName)) {\n                rangeSubnets = rangeList[rangeName];\n                // ECMA5 Array.isArray isn't available everywhere\n                if (rangeSubnets[0] && !(rangeSubnets[0] instanceof Array)) {\n                    rangeSubnets = [rangeSubnets];\n                }\n\n                for (i = 0; i < rangeSubnets.length; i++) {\n                    subnet = rangeSubnets[i];\n                    if (address.kind() === subnet[0].kind() && address.match.apply(address, subnet)) {\n                        return rangeName;\n                    }\n                }\n            }\n        }\n\n        return defaultName;\n    };\n\n    // Export for both the CommonJS and browser-like environment\n    if (typeof module !== 'undefined' && module.exports) {\n        module.exports = ipaddr;\n\n    } else {\n        root.ipaddr = ipaddr;\n    }\n\n}(this));\n","/*!\n * is-plain-object <https://github.com/jonschlinkert/is-plain-object>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nvar isObject = require('isobject');\n\nfunction isObjectObject(o) {\n  return isObject(o) === true\n    && Object.prototype.toString.call(o) === '[object Object]';\n}\n\nmodule.exports = function isPlainObject(o) {\n  var ctor,prot;\n\n  if (isObjectObject(o) === false) return false;\n\n  // If has modified constructor\n  ctor = o.constructor;\n  if (typeof ctor !== 'function') return false;\n\n  // If has modified prototype\n  prot = ctor.prototype;\n  if (isObjectObject(prot) === false) return false;\n\n  // If constructor does not have an Object-specific method\n  if (prot.hasOwnProperty('isPrototypeOf') === false) {\n    return false;\n  }\n\n  // Most likely a plain Object\n  return true;\n};\n","\"use strict\"\nfunction isProperty(str) {\n  return /^[$A-Z\\_a-z\\xaa\\xb5\\xba\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02c1\\u02c6-\\u02d1\\u02e0-\\u02e4\\u02ec\\u02ee\\u0370-\\u0374\\u0376\\u0377\\u037a-\\u037d\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0481\\u048a-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05d0-\\u05ea\\u05f0-\\u05f2\\u0620-\\u064a\\u066e\\u066f\\u0671-\\u06d3\\u06d5\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u06fc\\u06ff\\u0710\\u0712-\\u072f\\u074d-\\u07a5\\u07b1\\u07ca-\\u07ea\\u07f4\\u07f5\\u07fa\\u0800-\\u0815\\u081a\\u0824\\u0828\\u0840-\\u0858\\u08a0\\u08a2-\\u08ac\\u0904-\\u0939\\u093d\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097f\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bd\\u09ce\\u09dc\\u09dd\\u09df-\\u09e1\\u09f0\\u09f1\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a59-\\u0a5c\\u0a5e\\u0a72-\\u0a74\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abd\\u0ad0\\u0ae0\\u0ae1\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3d\\u0b5c\\u0b5d\\u0b5f-\\u0b61\\u0b71\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bd0\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c33\\u0c35-\\u0c39\\u0c3d\\u0c58\\u0c59\\u0c60\\u0c61\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbd\\u0cde\\u0ce0\\u0ce1\\u0cf1\\u0cf2\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d\\u0d4e\\u0d60\\u0d61\\u0d7a-\\u0d7f\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0e01-\\u0e30\\u0e32\\u0e33\\u0e40-\\u0e46\\u0e81\\u0e82\\u0e84\\u0e87\\u0e88\\u0e8a\\u0e8d\\u0e94-\\u0e97\\u0e99-\\u0e9f\\u0ea1-\\u0ea3\\u0ea5\\u0ea7\\u0eaa\\u0eab\\u0ead-\\u0eb0\\u0eb2\\u0eb3\\u0ebd\\u0ec0-\\u0ec4\\u0ec6\\u0edc-\\u0edf\\u0f00\\u0f40-\\u0f47\\u0f49-\\u0f6c\\u0f88-\\u0f8c\\u1000-\\u102a\\u103f\\u1050-\\u1055\\u105a-\\u105d\\u1061\\u1065\\u1066\\u106e-\\u1070\\u1075-\\u1081\\u108e\\u10a0-\\u10c5\\u10c7\\u10cd\\u10d0-\\u10fa\\u10fc-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u1380-\\u138f\\u13a0-\\u13f4\\u1401-\\u166c\\u166f-\\u167f\\u1681-\\u169a\\u16a0-\\u16ea\\u16ee-\\u16f0\\u1700-\\u170c\\u170e-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176c\\u176e-\\u1770\\u1780-\\u17b3\\u17d7\\u17dc\\u1820-\\u1877\\u1880-\\u18a8\\u18aa\\u18b0-\\u18f5\\u1900-\\u191c\\u1950-\\u196d\\u1970-\\u1974\\u1980-\\u19ab\\u19c1-\\u19c7\\u1a00-\\u1a16\\u1a20-\\u1a54\\u1aa7\\u1b05-\\u1b33\\u1b45-\\u1b4b\\u1b83-\\u1ba0\\u1bae\\u1baf\\u1bba-\\u1be5\\u1c00-\\u1c23\\u1c4d-\\u1c4f\\u1c5a-\\u1c7d\\u1ce9-\\u1cec\\u1cee-\\u1cf1\\u1cf5\\u1cf6\\u1d00-\\u1dbf\\u1e00-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u2071\\u207f\\u2090-\\u209c\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2119-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u212d\\u212f-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u2160-\\u2188\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cee\\u2cf2\\u2cf3\\u2d00-\\u2d25\\u2d27\\u2d2d\\u2d30-\\u2d67\\u2d6f\\u2d80-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u2e2f\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303c\\u3041-\\u3096\\u309d-\\u309f\\u30a1-\\u30fa\\u30fc-\\u30ff\\u3105-\\u312d\\u3131-\\u318e\\u31a0-\\u31ba\\u31f0-\\u31ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\ua000-\\ua48c\\ua4d0-\\ua4fd\\ua500-\\ua60c\\ua610-\\ua61f\\ua62a\\ua62b\\ua640-\\ua66e\\ua67f-\\ua697\\ua6a0-\\ua6ef\\ua717-\\ua71f\\ua722-\\ua788\\ua78b-\\ua78e\\ua790-\\ua793\\ua7a0-\\ua7aa\\ua7f8-\\ua801\\ua803-\\ua805\\ua807-\\ua80a\\ua80c-\\ua822\\ua840-\\ua873\\ua882-\\ua8b3\\ua8f2-\\ua8f7\\ua8fb\\ua90a-\\ua925\\ua930-\\ua946\\ua960-\\ua97c\\ua984-\\ua9b2\\ua9cf\\uaa00-\\uaa28\\uaa40-\\uaa42\\uaa44-\\uaa4b\\uaa60-\\uaa76\\uaa7a\\uaa80-\\uaaaf\\uaab1\\uaab5\\uaab6\\uaab9-\\uaabd\\uaac0\\uaac2\\uaadb-\\uaadd\\uaae0-\\uaaea\\uaaf2-\\uaaf4\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uabc0-\\uabe2\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\uf900-\\ufa6d\\ufa70-\\ufad9\\ufb00-\\ufb06\\ufb13-\\ufb17\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40\\ufb41\\ufb43\\ufb44\\ufb46-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc][$A-Z\\_a-z\\xaa\\xb5\\xba\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02c1\\u02c6-\\u02d1\\u02e0-\\u02e4\\u02ec\\u02ee\\u0370-\\u0374\\u0376\\u0377\\u037a-\\u037d\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0481\\u048a-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05d0-\\u05ea\\u05f0-\\u05f2\\u0620-\\u064a\\u066e\\u066f\\u0671-\\u06d3\\u06d5\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u06fc\\u06ff\\u0710\\u0712-\\u072f\\u074d-\\u07a5\\u07b1\\u07ca-\\u07ea\\u07f4\\u07f5\\u07fa\\u0800-\\u0815\\u081a\\u0824\\u0828\\u0840-\\u0858\\u08a0\\u08a2-\\u08ac\\u0904-\\u0939\\u093d\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097f\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bd\\u09ce\\u09dc\\u09dd\\u09df-\\u09e1\\u09f0\\u09f1\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a59-\\u0a5c\\u0a5e\\u0a72-\\u0a74\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abd\\u0ad0\\u0ae0\\u0ae1\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3d\\u0b5c\\u0b5d\\u0b5f-\\u0b61\\u0b71\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bd0\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c33\\u0c35-\\u0c39\\u0c3d\\u0c58\\u0c59\\u0c60\\u0c61\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbd\\u0cde\\u0ce0\\u0ce1\\u0cf1\\u0cf2\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d\\u0d4e\\u0d60\\u0d61\\u0d7a-\\u0d7f\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0e01-\\u0e30\\u0e32\\u0e33\\u0e40-\\u0e46\\u0e81\\u0e82\\u0e84\\u0e87\\u0e88\\u0e8a\\u0e8d\\u0e94-\\u0e97\\u0e99-\\u0e9f\\u0ea1-\\u0ea3\\u0ea5\\u0ea7\\u0eaa\\u0eab\\u0ead-\\u0eb0\\u0eb2\\u0eb3\\u0ebd\\u0ec0-\\u0ec4\\u0ec6\\u0edc-\\u0edf\\u0f00\\u0f40-\\u0f47\\u0f49-\\u0f6c\\u0f88-\\u0f8c\\u1000-\\u102a\\u103f\\u1050-\\u1055\\u105a-\\u105d\\u1061\\u1065\\u1066\\u106e-\\u1070\\u1075-\\u1081\\u108e\\u10a0-\\u10c5\\u10c7\\u10cd\\u10d0-\\u10fa\\u10fc-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u1380-\\u138f\\u13a0-\\u13f4\\u1401-\\u166c\\u166f-\\u167f\\u1681-\\u169a\\u16a0-\\u16ea\\u16ee-\\u16f0\\u1700-\\u170c\\u170e-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176c\\u176e-\\u1770\\u1780-\\u17b3\\u17d7\\u17dc\\u1820-\\u1877\\u1880-\\u18a8\\u18aa\\u18b0-\\u18f5\\u1900-\\u191c\\u1950-\\u196d\\u1970-\\u1974\\u1980-\\u19ab\\u19c1-\\u19c7\\u1a00-\\u1a16\\u1a20-\\u1a54\\u1aa7\\u1b05-\\u1b33\\u1b45-\\u1b4b\\u1b83-\\u1ba0\\u1bae\\u1baf\\u1bba-\\u1be5\\u1c00-\\u1c23\\u1c4d-\\u1c4f\\u1c5a-\\u1c7d\\u1ce9-\\u1cec\\u1cee-\\u1cf1\\u1cf5\\u1cf6\\u1d00-\\u1dbf\\u1e00-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u2071\\u207f\\u2090-\\u209c\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2119-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u212d\\u212f-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u2160-\\u2188\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cee\\u2cf2\\u2cf3\\u2d00-\\u2d25\\u2d27\\u2d2d\\u2d30-\\u2d67\\u2d6f\\u2d80-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u2e2f\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303c\\u3041-\\u3096\\u309d-\\u309f\\u30a1-\\u30fa\\u30fc-\\u30ff\\u3105-\\u312d\\u3131-\\u318e\\u31a0-\\u31ba\\u31f0-\\u31ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\ua000-\\ua48c\\ua4d0-\\ua4fd\\ua500-\\ua60c\\ua610-\\ua61f\\ua62a\\ua62b\\ua640-\\ua66e\\ua67f-\\ua697\\ua6a0-\\ua6ef\\ua717-\\ua71f\\ua722-\\ua788\\ua78b-\\ua78e\\ua790-\\ua793\\ua7a0-\\ua7aa\\ua7f8-\\ua801\\ua803-\\ua805\\ua807-\\ua80a\\ua80c-\\ua822\\ua840-\\ua873\\ua882-\\ua8b3\\ua8f2-\\ua8f7\\ua8fb\\ua90a-\\ua925\\ua930-\\ua946\\ua960-\\ua97c\\ua984-\\ua9b2\\ua9cf\\uaa00-\\uaa28\\uaa40-\\uaa42\\uaa44-\\uaa4b\\uaa60-\\uaa76\\uaa7a\\uaa80-\\uaaaf\\uaab1\\uaab5\\uaab6\\uaab9-\\uaabd\\uaac0\\uaac2\\uaadb-\\uaadd\\uaae0-\\uaaea\\uaaf2-\\uaaf4\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uabc0-\\uabe2\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\uf900-\\ufa6d\\ufa70-\\ufad9\\ufb00-\\ufb06\\ufb13-\\ufb17\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40\\ufb41\\ufb43\\ufb44\\ufb46-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc0-9\\u0300-\\u036f\\u0483-\\u0487\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u064b-\\u0669\\u0670\\u06d6-\\u06dc\\u06df-\\u06e4\\u06e7\\u06e8\\u06ea-\\u06ed\\u06f0-\\u06f9\\u0711\\u0730-\\u074a\\u07a6-\\u07b0\\u07c0-\\u07c9\\u07eb-\\u07f3\\u0816-\\u0819\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0859-\\u085b\\u08e4-\\u08fe\\u0900-\\u0903\\u093a-\\u093c\\u093e-\\u094f\\u0951-\\u0957\\u0962\\u0963\\u0966-\\u096f\\u0981-\\u0983\\u09bc\\u09be-\\u09c4\\u09c7\\u09c8\\u09cb-\\u09cd\\u09d7\\u09e2\\u09e3\\u09e6-\\u09ef\\u0a01-\\u0a03\\u0a3c\\u0a3e-\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a66-\\u0a71\\u0a75\\u0a81-\\u0a83\\u0abc\\u0abe-\\u0ac5\\u0ac7-\\u0ac9\\u0acb-\\u0acd\\u0ae2\\u0ae3\\u0ae6-\\u0aef\\u0b01-\\u0b03\\u0b3c\\u0b3e-\\u0b44\\u0b47\\u0b48\\u0b4b-\\u0b4d\\u0b56\\u0b57\\u0b62\\u0b63\\u0b66-\\u0b6f\\u0b82\\u0bbe-\\u0bc2\\u0bc6-\\u0bc8\\u0bca-\\u0bcd\\u0bd7\\u0be6-\\u0bef\\u0c01-\\u0c03\\u0c3e-\\u0c44\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62\\u0c63\\u0c66-\\u0c6f\\u0c82\\u0c83\\u0cbc\\u0cbe-\\u0cc4\\u0cc6-\\u0cc8\\u0cca-\\u0ccd\\u0cd5\\u0cd6\\u0ce2\\u0ce3\\u0ce6-\\u0cef\\u0d02\\u0d03\\u0d3e-\\u0d44\\u0d46-\\u0d48\\u0d4a-\\u0d4d\\u0d57\\u0d62\\u0d63\\u0d66-\\u0d6f\\u0d82\\u0d83\\u0dca\\u0dcf-\\u0dd4\\u0dd6\\u0dd8-\\u0ddf\\u0df2\\u0df3\\u0e31\\u0e34-\\u0e3a\\u0e47-\\u0e4e\\u0e50-\\u0e59\\u0eb1\\u0eb4-\\u0eb9\\u0ebb\\u0ebc\\u0ec8-\\u0ecd\\u0ed0-\\u0ed9\\u0f18\\u0f19\\u0f20-\\u0f29\\u0f35\\u0f37\\u0f39\\u0f3e\\u0f3f\\u0f71-\\u0f84\\u0f86\\u0f87\\u0f8d-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u102b-\\u103e\\u1040-\\u1049\\u1056-\\u1059\\u105e-\\u1060\\u1062-\\u1064\\u1067-\\u106d\\u1071-\\u1074\\u1082-\\u108d\\u108f-\\u109d\\u135d-\\u135f\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17b4-\\u17d3\\u17dd\\u17e0-\\u17e9\\u180b-\\u180d\\u1810-\\u1819\\u18a9\\u1920-\\u192b\\u1930-\\u193b\\u1946-\\u194f\\u19b0-\\u19c0\\u19c8\\u19c9\\u19d0-\\u19d9\\u1a17-\\u1a1b\\u1a55-\\u1a5e\\u1a60-\\u1a7c\\u1a7f-\\u1a89\\u1a90-\\u1a99\\u1b00-\\u1b04\\u1b34-\\u1b44\\u1b50-\\u1b59\\u1b6b-\\u1b73\\u1b80-\\u1b82\\u1ba1-\\u1bad\\u1bb0-\\u1bb9\\u1be6-\\u1bf3\\u1c24-\\u1c37\\u1c40-\\u1c49\\u1c50-\\u1c59\\u1cd0-\\u1cd2\\u1cd4-\\u1ce8\\u1ced\\u1cf2-\\u1cf4\\u1dc0-\\u1de6\\u1dfc-\\u1dff\\u200c\\u200d\\u203f\\u2040\\u2054\\u20d0-\\u20dc\\u20e1\\u20e5-\\u20f0\\u2cef-\\u2cf1\\u2d7f\\u2de0-\\u2dff\\u302a-\\u302f\\u3099\\u309a\\ua620-\\ua629\\ua66f\\ua674-\\ua67d\\ua69f\\ua6f0\\ua6f1\\ua802\\ua806\\ua80b\\ua823-\\ua827\\ua880\\ua881\\ua8b4-\\ua8c4\\ua8d0-\\ua8d9\\ua8e0-\\ua8f1\\ua900-\\ua909\\ua926-\\ua92d\\ua947-\\ua953\\ua980-\\ua983\\ua9b3-\\ua9c0\\ua9d0-\\ua9d9\\uaa29-\\uaa36\\uaa43\\uaa4c\\uaa4d\\uaa50-\\uaa59\\uaa7b\\uaab0\\uaab2-\\uaab4\\uaab7\\uaab8\\uaabe\\uaabf\\uaac1\\uaaeb-\\uaaef\\uaaf5\\uaaf6\\uabe3-\\uabea\\uabec\\uabed\\uabf0-\\uabf9\\ufb1e\\ufe00-\\ufe0f\\ufe20-\\ufe26\\ufe33\\ufe34\\ufe4d-\\ufe4f\\uff10-\\uff19\\uff3f]*$/.test(str)\n}\nmodule.exports = isProperty","/*!\n * isobject <https://github.com/jonschlinkert/isobject>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nmodule.exports = function isObject(val) {\n  return val != null && typeof val === 'object' && Array.isArray(val) === false;\n};\n","/*!\n *  Copyright © 2008 Fair Oaks Labs, Inc.\n *  All rights reserved.\n */\n\n// Utility object:  Encode/Decode C-style binary primitives to/from octet arrays\nfunction JSPack()\n{\n\t// Module-level (private) variables\n\tvar el,  bBE = false, m = this;\n\n\n\t// Raw byte arrays\n\tm._DeArray = function (a, p, l)\n\t{\n\t\treturn [a.slice(p,p+l)];\n\t};\n\tm._EnArray = function (a, p, l, v)\n\t{\n\t\tfor (var i = 0; i < l; a[p+i] = v[i]?v[i]:0, i++);\n\t};\n\n\t// ASCII characters\n\tm._DeChar = function (a, p)\n\t{\n\t\treturn String.fromCharCode(a[p]);\n\t};\n\tm._EnChar = function (a, p, v)\n\t{\n\t\ta[p] = v.charCodeAt(0);\n\t};\n\n\t// Little-endian (un)signed N-byte integers\n\tm._DeInt = function (a, p)\n\t{\n\t\tvar lsb = bBE?(el.len-1):0, nsb = bBE?-1:1, stop = lsb+nsb*el.len, rv, i, f;\n\t\tfor (rv = 0, i = lsb, f = 1; i != stop; rv+=(a[p+i]*f), i+=nsb, f*=256);\n\t\tif (el.bSigned && (rv & Math.pow(2, el.len*8-1))) { rv -= Math.pow(2, el.len*8); }\n\t\treturn rv;\n\t};\n\tm._EnInt = function (a, p, v)\n\t{\n\t\tvar lsb = bBE?(el.len-1):0, nsb = bBE?-1:1, stop = lsb+nsb*el.len, i;\n\t\tv = (v<el.min)?el.min:(v>el.max)?el.max:v;\n\t\tfor (i = lsb; i != stop; a[p+i]=v&0xff, i+=nsb, v>>=8);\n\t};\n\n\t// ASCII character strings\n\tm._DeString = function (a, p, l)\n\t{\n\t\tfor (var rv = new Array(l), i = 0; i < l; rv[i] = String.fromCharCode(a[p+i]), i++);\n\t\treturn rv.join('');\n\t};\n\tm._EnString = function (a, p, l, v)\n\t{\n\t\tfor (var t, i = 0; i < l; a[p+i] = (t=v.charCodeAt(i))?t:0, i++);\n\t};\n\n\t// Little-endian N-bit IEEE 754 floating point\n\tm._De754 = function (a, p)\n\t{\n\t\tvar s, e, m, i, d, nBits, mLen, eLen, eBias, eMax;\n\t\tmLen = el.mLen, eLen = el.len*8-el.mLen-1, eMax = (1<<eLen)-1, eBias = eMax>>1;\n\n\t\ti = bBE?0:(el.len-1); d = bBE?1:-1; s = a[p+i]; i+=d; nBits = -7;\n\t\tfor (e = s&((1<<(-nBits))-1), s>>=(-nBits), nBits += eLen; nBits > 0; e=e*256+a[p+i], i+=d, nBits-=8);\n\t\tfor (m = e&((1<<(-nBits))-1), e>>=(-nBits), nBits += mLen; nBits > 0; m=m*256+a[p+i], i+=d, nBits-=8);\n\n\t\tswitch (e)\n\t\t{\n\t\t\tcase 0:\n\t\t\t\t// Zero, or denormalized number\n\t\t\t\te = 1-eBias;\n\t\t\t\tbreak;\n\t\t\tcase eMax:\n\t\t\t\t// NaN, or +/-Infinity\n\t\t\t\treturn m?NaN:((s?-1:1)*Infinity);\n\t\t\tdefault:\n\t\t\t\t// Normalized number\n\t\t\t\tm = m + Math.pow(2, mLen);\n\t\t\t\te = e - eBias;\n\t\t\t\tbreak;\n\t\t}\n\t\treturn (s?-1:1) * m * Math.pow(2, e-mLen);\n\t};\n\tm._En754 = function (a, p, v)\n\t{\n\t\tvar s, e, m, i, d, c, mLen, eLen, eBias, eMax;\n\t\tmLen = el.mLen, eLen = el.len*8-el.mLen-1, eMax = (1<<eLen)-1, eBias = eMax>>1;\n\n\t\ts = v<0?1:0;\n\t\tv = Math.abs(v);\n\t\tif (isNaN(v) || (v == Infinity))\n\t\t{\n\t\t\tm = isNaN(v)?1:0;\n\t\t\te = eMax;\n\t\t}\n\t\telse\n\t\t{\n\t\t\te = Math.floor(Math.log(v)/Math.LN2);\t\t\t// Calculate log2 of the value\n\t\t\tif (v*(c = Math.pow(2, -e)) < 1) { e--; c*=2; }\t\t// Math.log() isn't 100% reliable\n\n\t\t\t// Round by adding 1/2 the significand's LSD\n\t\t\tif (e+eBias >= 1) { v += el.rt/c; }\t\t\t// Normalized:  mLen significand digits\n\t\t\telse { v += el.rt*Math.pow(2, 1-eBias); } \t\t// Denormalized:  <= mLen significand digits\n\t\t\tif (v*c >= 2) { e++; c/=2; }\t\t\t\t// Rounding can increment the exponent\n\n\t\t\tif (e+eBias >= eMax)\n\t\t\t{\n\t\t\t\t// Overflow\n\t\t\t\tm = 0;\n\t\t\t\te = eMax;\n\t\t\t}\n\t\t\telse if (e+eBias >= 1)\n\t\t\t{\n\t\t\t\t// Normalized - term order matters, as Math.pow(2, 52-e) and v*Math.pow(2, 52) can overflow\n\t\t\t\tm = (v*c-1)*Math.pow(2, mLen);\n\t\t\t\te = e + eBias;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t// Denormalized - also catches the '0' case, somewhat by chance\n\t\t\t\tm = v*Math.pow(2, eBias-1)*Math.pow(2, mLen);\n\t\t\t\te = 0;\n\t\t\t}\n\t\t}\n\n\t\tfor (i = bBE?(el.len-1):0, d=bBE?-1:1; mLen >= 8; a[p+i]=m&0xff, i+=d, m/=256, mLen-=8);\n\t\tfor (e=(e<<mLen)|m, eLen+=mLen; eLen > 0; a[p+i]=e&0xff, i+=d, e/=256, eLen-=8);\n\t\ta[p+i-d] |= s*128;\n\t};\n\n\t// Convert int64 to array with 3 elements: [lowBits, highBits, unsignedFlag]\n\t// '>>>' trick to convert signed 32bit int to unsigned int (because << always results in a signed 32bit int)\n\tm._DeInt64 = function (a, p) {\n\t\tvar start = bBE ? 0 : 7, nsb = bBE ? 1 : -1, stop = start + nsb * 8, rv = [0,0, !el.bSigned], i, f, rvi;\n\t\tfor (i = start, rvi = 1, f = 0;\n\t\t\ti != stop;\n\t\t\trv[rvi] = (((rv[rvi]<<8)>>>0) + a[p + i]), i += nsb, f++, rvi = (f < 4 ? 1 : 0));\n\t\treturn rv;\n\t};\n\tm._EnInt64 = function (a, p, v) {\n\t\tvar start = bBE ? 0 : 7, nsb = bBE ? 1 : -1, stop = start + nsb * 8, i, f, rvi, s;\n\t\tfor (i = start, rvi = 1, f = 0, s = 24;\n\t\t\ti != stop;\n\t\t\ta[p + i] = v[rvi]>>s & 0xff, i += nsb, f++, rvi = (f < 4 ? 1 : 0), s = 24 - (8 * (f % 4)));\n\t};\n\t\n\n\t// Class data\n\tm._sPattern\t= '(\\\\d+)?([AxcbBhHsfdiIlLqQ])';\n\tm._lenLut\t= {'A':1, 'x':1, 'c':1, 'b':1, 'B':1, 'h':2, 'H':2, 's':1, 'f':4, 'd':8, 'i':4, 'I':4, 'l':4, 'L':4, 'q':8, 'Q':8};\n\tm._elLut\t= {\t'A': {en:m._EnArray, de:m._DeArray},\n\t\t\t\t's': {en:m._EnString, de:m._DeString},\n\t\t\t\t'c': {en:m._EnChar, de:m._DeChar},\n\t\t\t\t'b': {en:m._EnInt, de:m._DeInt, len:1, bSigned:true, min:-Math.pow(2, 7), max:Math.pow(2, 7)-1},\n\t\t\t\t'B': {en:m._EnInt, de:m._DeInt, len:1, bSigned:false, min:0, max:Math.pow(2, 8)-1},\n\t\t\t\t'h': {en:m._EnInt, de:m._DeInt, len:2, bSigned:true, min:-Math.pow(2, 15), max:Math.pow(2, 15)-1},\n\t\t\t\t'H': {en:m._EnInt, de:m._DeInt, len:2, bSigned:false, min:0, max:Math.pow(2, 16)-1},\n\t\t\t\t'i': {en:m._EnInt, de:m._DeInt, len:4, bSigned:true, min:-Math.pow(2, 31), max:Math.pow(2, 31)-1},\n\t\t\t\t'I': {en:m._EnInt, de:m._DeInt, len:4, bSigned:false, min:0, max:Math.pow(2, 32)-1},\n\t\t\t\t'l': {en:m._EnInt, de:m._DeInt, len:4, bSigned:true, min:-Math.pow(2, 31), max:Math.pow(2, 31)-1},\n\t\t\t\t'L': {en:m._EnInt, de:m._DeInt, len:4, bSigned:false, min:0, max:Math.pow(2, 32)-1},\n\t\t\t\t'f': {en:m._En754, de:m._De754, len:4, mLen:23, rt:Math.pow(2, -24)-Math.pow(2, -77)},\n\t\t\t\t'd': {en:m._En754, de:m._De754, len:8, mLen:52, rt:0},\n\t\t\t\t'q': {en:m._EnInt64, de:m._DeInt64, bSigned:true},\n\t\t\t\t'Q': {en:m._EnInt64, de:m._DeInt64, bSigned:false}};\n\n\t// Unpack a series of n elements of size s from array a at offset p with fxn\n\tm._UnpackSeries = function (n, s, a, p)\n\t{\n\t\tfor (var fxn = el.de, rv = [], i = 0; i < n; rv.push(fxn(a, p+i*s)), i++);\n\t\treturn rv;\n\t};\n\n\t// Pack a series of n elements of size s from array v at offset i to array a at offset p with fxn\n\tm._PackSeries = function (n, s, a, p, v, i)\n\t{\n\t\tfor (var fxn = el.en, o = 0; o < n; fxn(a, p+o*s, v[i+o]), o++);\n\t};\n\n\t// Unpack the octet array a, beginning at offset p, according to the fmt string\n\tm.Unpack = function (fmt, a, p)\n\t{\n\t\t// Set the private bBE flag based on the format string - assume big-endianness\n\t\tbBE = (fmt.charAt(0) != '<');\n\n\t\tp = p?p:0;\n\t\tvar re = new RegExp(this._sPattern, 'g'), m, n, s, rv = [];\n\t\twhile (m = re.exec(fmt))\n\t\t{\n\t\t\tn = ((m[1]==undefined)||(m[1]==''))?1:parseInt(m[1]);\n\t\t\ts = this._lenLut[m[2]];\n\t\t\tif ((p + n*s) > a.length)\n\t\t\t{\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t\tswitch (m[2])\n\t\t\t{\n\t\t\t\tcase 'A': case 's':\n\t\t\t\t\trv.push(this._elLut[m[2]].de(a, p, n));\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'c': case 'b': case 'B': case 'h': case 'H':\n\t\t\t\tcase 'i': case 'I': case 'l': case 'L': case 'f': case 'd': case 'q': case 'Q':\n\t\t\t\t\tel = this._elLut[m[2]];\n\t\t\t\t\trv.push(this._UnpackSeries(n, s, a, p));\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tp += n*s;\n\t\t}\n\t\treturn Array.prototype.concat.apply([], rv);\n\t};\n\n\t// Pack the supplied values into the octet array a, beginning at offset p, according to the fmt string\n\tm.PackTo = function (fmt, a, p, values)\n\t{\n\t\t// Set the private bBE flag based on the format string - assume big-endianness\n\t\tbBE = (fmt.charAt(0) != '<');\n\n\t\tvar re = new RegExp(this._sPattern, 'g'), m, n, s, i = 0, j;\n\t\twhile (m = re.exec(fmt))\n\t\t{\n\t\t\tn = ((m[1]==undefined)||(m[1]==''))?1:parseInt(m[1]);\n\t\t\ts = this._lenLut[m[2]];\n\t\t\tif ((p + n*s) > a.length)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tswitch (m[2])\n\t\t\t{\n\t\t\t\tcase 'A': case 's':\n\t\t\t\t\tif ((i + 1) > values.length) { return false; }\n\t\t\t\t\tthis._elLut[m[2]].en(a, p, n, values[i]);\n\t\t\t\t\ti += 1;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'c': case 'b': case 'B': case 'h': case 'H':\n\t\t\t\tcase 'i': case 'I': case 'l': case 'L': case 'f': case 'd': case 'q': case 'Q':\n\t\t\t\t\tel = this._elLut[m[2]];\n\t\t\t\t\tif ((i + n) > values.length) { return false; }\n\t\t\t\t\tthis._PackSeries(n, s, a, p, values, i);\n\t\t\t\t\ti += n;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'x':\n\t\t\t\t\tfor (j = 0; j < n; j++) { a[p+j] = 0; }\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tp += n*s;\n\t\t}\n\t\treturn a;\n\t};\n\n\t// Pack the supplied values into a new octet array, according to the fmt string\n\tm.Pack = function (fmt, values)\n\t{\n\t\treturn this.PackTo(fmt, new Array(this.CalcLength(fmt)), 0, values);\n\t};\n\n\t// Determine the number of bytes represented by the format string\n\tm.CalcLength = function (fmt)\n\t{\n\t\tvar re = new RegExp(this._sPattern, 'g'), m, sum = 0;\n\t\twhile (m = re.exec(fmt))\n\t\t{\n\t\t\tsum += (((m[1]==undefined)||(m[1]==''))?1:parseInt(m[1])) * this._lenLut[m[2]];\n\t\t}\n\t\treturn sum;\n\t};\n};\n\nexports.jspack = new JSPack();\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView');\n\nmodule.exports = DataView;\n","var hashClear = require('./_hashClear'),\n    hashDelete = require('./_hashDelete'),\n    hashGet = require('./_hashGet'),\n    hashHas = require('./_hashHas'),\n    hashSet = require('./_hashSet');\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\nmodule.exports = Hash;\n","var listCacheClear = require('./_listCacheClear'),\n    listCacheDelete = require('./_listCacheDelete'),\n    listCacheGet = require('./_listCacheGet'),\n    listCacheHas = require('./_listCacheHas'),\n    listCacheSet = require('./_listCacheSet');\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\nmodule.exports = ListCache;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map');\n\nmodule.exports = Map;\n","var mapCacheClear = require('./_mapCacheClear'),\n    mapCacheDelete = require('./_mapCacheDelete'),\n    mapCacheGet = require('./_mapCacheGet'),\n    mapCacheHas = require('./_mapCacheHas'),\n    mapCacheSet = require('./_mapCacheSet');\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\nmodule.exports = MapCache;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Promise = getNative(root, 'Promise');\n\nmodule.exports = Promise;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Set = getNative(root, 'Set');\n\nmodule.exports = Set;\n","var MapCache = require('./_MapCache'),\n    setCacheAdd = require('./_setCacheAdd'),\n    setCacheHas = require('./_setCacheHas');\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values == null ? 0 : values.length;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\nmodule.exports = SetCache;\n","var ListCache = require('./_ListCache'),\n    stackClear = require('./_stackClear'),\n    stackDelete = require('./_stackDelete'),\n    stackGet = require('./_stackGet'),\n    stackHas = require('./_stackHas'),\n    stackSet = require('./_stackSet');\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\nmodule.exports = Stack;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Uint8Array = root.Uint8Array;\n\nmodule.exports = Uint8Array;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar WeakMap = getNative(root, 'WeakMap');\n\nmodule.exports = WeakMap;\n","/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\nmodule.exports = apply;\n","/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\nmodule.exports = arrayEach;\n","/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = arrayFilter;\n","var baseTimes = require('./_baseTimes'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isIndex = require('./_isIndex'),\n    isTypedArray = require('./isTypedArray');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = arrayLikeKeys;\n","/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\nmodule.exports = arrayPush;\n","/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nmodule.exports = arraySome;\n","var baseAssignValue = require('./_baseAssignValue'),\n    eq = require('./eq');\n\n/**\n * This function is like `assignValue` except that it doesn't assign\n * `undefined` values.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignMergeValue(object, key, value) {\n  if ((value !== undefined && !eq(object[key], value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nmodule.exports = assignMergeValue;\n","var baseAssignValue = require('./_baseAssignValue'),\n    eq = require('./eq');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nmodule.exports = assignValue;\n","var eq = require('./eq');\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = assocIndexOf;\n","var copyObject = require('./_copyObject'),\n    keys = require('./keys');\n\n/**\n * The base implementation of `_.assign` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return object && copyObject(source, keys(source), object);\n}\n\nmodule.exports = baseAssign;\n","var copyObject = require('./_copyObject'),\n    keysIn = require('./keysIn');\n\n/**\n * The base implementation of `_.assignIn` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssignIn(object, source) {\n  return object && copyObject(source, keysIn(source), object);\n}\n\nmodule.exports = baseAssignIn;\n","var defineProperty = require('./_defineProperty');\n\n/**\n * The base implementation of `assignValue` and `assignMergeValue` without\n * value checks.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction baseAssignValue(object, key, value) {\n  if (key == '__proto__' && defineProperty) {\n    defineProperty(object, key, {\n      'configurable': true,\n      'enumerable': true,\n      'value': value,\n      'writable': true\n    });\n  } else {\n    object[key] = value;\n  }\n}\n\nmodule.exports = baseAssignValue;\n","var Stack = require('./_Stack'),\n    arrayEach = require('./_arrayEach'),\n    assignValue = require('./_assignValue'),\n    baseAssign = require('./_baseAssign'),\n    baseAssignIn = require('./_baseAssignIn'),\n    cloneBuffer = require('./_cloneBuffer'),\n    copyArray = require('./_copyArray'),\n    copySymbols = require('./_copySymbols'),\n    copySymbolsIn = require('./_copySymbolsIn'),\n    getAllKeys = require('./_getAllKeys'),\n    getAllKeysIn = require('./_getAllKeysIn'),\n    getTag = require('./_getTag'),\n    initCloneArray = require('./_initCloneArray'),\n    initCloneByTag = require('./_initCloneByTag'),\n    initCloneObject = require('./_initCloneObject'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isMap = require('./isMap'),\n    isObject = require('./isObject'),\n    isSet = require('./isSet'),\n    keys = require('./keys'),\n    keysIn = require('./keysIn');\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_FLAT_FLAG = 2,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\ncloneableTags[boolTag] = cloneableTags[dateTag] =\ncloneableTags[float32Tag] = cloneableTags[float64Tag] =\ncloneableTags[int8Tag] = cloneableTags[int16Tag] =\ncloneableTags[int32Tag] = cloneableTags[mapTag] =\ncloneableTags[numberTag] = cloneableTags[objectTag] =\ncloneableTags[regexpTag] = cloneableTags[setTag] =\ncloneableTags[stringTag] = cloneableTags[symbolTag] =\ncloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\ncloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n * traversed objects.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Deep clone\n *  2 - Flatten inherited properties\n *  4 - Clone symbols\n * @param {Function} [customizer] The function to customize cloning.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The parent object of `value`.\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, bitmask, customizer, key, object, stack) {\n  var result,\n      isDeep = bitmask & CLONE_DEEP_FLAG,\n      isFlat = bitmask & CLONE_FLAT_FLAG,\n      isFull = bitmask & CLONE_SYMBOLS_FLAG;\n\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    var tag = getTag(value),\n        isFunc = tag == funcTag || tag == genTag;\n\n    if (isBuffer(value)) {\n      return cloneBuffer(value, isDeep);\n    }\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      result = (isFlat || isFunc) ? {} : initCloneObject(value);\n      if (!isDeep) {\n        return isFlat\n          ? copySymbolsIn(value, baseAssignIn(result, value))\n          : copySymbols(value, baseAssign(result, value));\n      }\n    } else {\n      if (!cloneableTags[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, isDeep);\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stack || (stack = new Stack);\n  var stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n\n  if (isSet(value)) {\n    value.forEach(function(subValue) {\n      result.add(baseClone(subValue, bitmask, customizer, subValue, value, stack));\n    });\n  } else if (isMap(value)) {\n    value.forEach(function(subValue, key) {\n      result.set(key, baseClone(subValue, bitmask, customizer, key, value, stack));\n    });\n  }\n\n  var keysFunc = isFull\n    ? (isFlat ? getAllKeysIn : getAllKeys)\n    : (isFlat ? keysIn : keys);\n\n  var props = isArr ? undefined : keysFunc(value);\n  arrayEach(props || value, function(subValue, key) {\n    if (props) {\n      key = subValue;\n      subValue = value[key];\n    }\n    // Recursively populate clone (susceptible to call stack limits).\n    assignValue(result, key, baseClone(subValue, bitmask, customizer, key, value, stack));\n  });\n  return result;\n}\n\nmodule.exports = baseClone;\n","var isObject = require('./isObject');\n\n/** Built-in value references. */\nvar objectCreate = Object.create;\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} proto The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nvar baseCreate = (function() {\n  function object() {}\n  return function(proto) {\n    if (!isObject(proto)) {\n      return {};\n    }\n    if (objectCreate) {\n      return objectCreate(proto);\n    }\n    object.prototype = proto;\n    var result = new object;\n    object.prototype = undefined;\n    return result;\n  };\n}());\n\nmodule.exports = baseCreate;\n","var createBaseFor = require('./_createBaseFor');\n\n/**\n * The base implementation of `baseForOwn` which iterates over `object`\n * properties returned by `keysFunc` and invokes `iteratee` for each property.\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @returns {Object} Returns `object`.\n */\nvar baseFor = createBaseFor();\n\nmodule.exports = baseFor;\n","var arrayPush = require('./_arrayPush'),\n    isArray = require('./isArray');\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\nmodule.exports = baseGetAllKeys;\n","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\nmodule.exports = baseIsArguments;\n","var baseIsEqualDeep = require('./_baseIsEqualDeep'),\n    isObjectLike = require('./isObjectLike');\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Unordered comparison\n *  2 - Partial comparison\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, bitmask, customizer, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n}\n\nmodule.exports = baseIsEqual;\n","var Stack = require('./_Stack'),\n    equalArrays = require('./_equalArrays'),\n    equalByTag = require('./_equalByTag'),\n    equalObjects = require('./_equalObjects'),\n    getTag = require('./_getTag'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isTypedArray = require('./isTypedArray');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = objIsArr ? arrayTag : getTag(object),\n      othTag = othIsArr ? arrayTag : getTag(other);\n\n  objTag = objTag == argsTag ? objectTag : objTag;\n  othTag = othTag == argsTag ? objectTag : othTag;\n\n  var objIsObj = objTag == objectTag,\n      othIsObj = othTag == objectTag,\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && isBuffer(object)) {\n    if (!isBuffer(other)) {\n      return false;\n    }\n    objIsArr = true;\n    objIsObj = false;\n  }\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n      : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n  }\n  if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object,\n          othUnwrapped = othIsWrapped ? other.value() : other;\n\n      stack || (stack = new Stack);\n      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n}\n\nmodule.exports = baseIsEqualDeep;\n","var getTag = require('./_getTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]';\n\n/**\n * The base implementation of `_.isMap` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n */\nfunction baseIsMap(value) {\n  return isObjectLike(value) && getTag(value) == mapTag;\n}\n\nmodule.exports = baseIsMap;\n","var isFunction = require('./isFunction'),\n    isMasked = require('./_isMasked'),\n    isObject = require('./isObject'),\n    toSource = require('./_toSource');\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\nmodule.exports = baseIsNative;\n","var getTag = require('./_getTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar setTag = '[object Set]';\n\n/**\n * The base implementation of `_.isSet` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n */\nfunction baseIsSet(value) {\n  return isObjectLike(value) && getTag(value) == setTag;\n}\n\nmodule.exports = baseIsSet;\n","var baseGetTag = require('./_baseGetTag'),\n    isLength = require('./isLength'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\nmodule.exports = baseIsTypedArray;\n","var isPrototype = require('./_isPrototype'),\n    nativeKeys = require('./_nativeKeys');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseKeys;\n","var isObject = require('./isObject'),\n    isPrototype = require('./_isPrototype'),\n    nativeKeysIn = require('./_nativeKeysIn');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeysIn(object) {\n  if (!isObject(object)) {\n    return nativeKeysIn(object);\n  }\n  var isProto = isPrototype(object),\n      result = [];\n\n  for (var key in object) {\n    if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseKeysIn;\n","var Stack = require('./_Stack'),\n    assignMergeValue = require('./_assignMergeValue'),\n    baseFor = require('./_baseFor'),\n    baseMergeDeep = require('./_baseMergeDeep'),\n    isObject = require('./isObject'),\n    keysIn = require('./keysIn'),\n    safeGet = require('./_safeGet');\n\n/**\n * The base implementation of `_.merge` without support for multiple sources.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} [customizer] The function to customize merged values.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n */\nfunction baseMerge(object, source, srcIndex, customizer, stack) {\n  if (object === source) {\n    return;\n  }\n  baseFor(source, function(srcValue, key) {\n    stack || (stack = new Stack);\n    if (isObject(srcValue)) {\n      baseMergeDeep(object, source, key, srcIndex, baseMerge, customizer, stack);\n    }\n    else {\n      var newValue = customizer\n        ? customizer(safeGet(object, key), srcValue, (key + ''), object, source, stack)\n        : undefined;\n\n      if (newValue === undefined) {\n        newValue = srcValue;\n      }\n      assignMergeValue(object, key, newValue);\n    }\n  }, keysIn);\n}\n\nmodule.exports = baseMerge;\n","var assignMergeValue = require('./_assignMergeValue'),\n    cloneBuffer = require('./_cloneBuffer'),\n    cloneTypedArray = require('./_cloneTypedArray'),\n    copyArray = require('./_copyArray'),\n    initCloneObject = require('./_initCloneObject'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isArrayLikeObject = require('./isArrayLikeObject'),\n    isBuffer = require('./isBuffer'),\n    isFunction = require('./isFunction'),\n    isObject = require('./isObject'),\n    isPlainObject = require('./isPlainObject'),\n    isTypedArray = require('./isTypedArray'),\n    safeGet = require('./_safeGet'),\n    toPlainObject = require('./toPlainObject');\n\n/**\n * A specialized version of `baseMerge` for arrays and objects which performs\n * deep merges and tracks traversed objects enabling objects with circular\n * references to be merged.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {string} key The key of the value to merge.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} mergeFunc The function to merge values.\n * @param {Function} [customizer] The function to customize assigned values.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n */\nfunction baseMergeDeep(object, source, key, srcIndex, mergeFunc, customizer, stack) {\n  var objValue = safeGet(object, key),\n      srcValue = safeGet(source, key),\n      stacked = stack.get(srcValue);\n\n  if (stacked) {\n    assignMergeValue(object, key, stacked);\n    return;\n  }\n  var newValue = customizer\n    ? customizer(objValue, srcValue, (key + ''), object, source, stack)\n    : undefined;\n\n  var isCommon = newValue === undefined;\n\n  if (isCommon) {\n    var isArr = isArray(srcValue),\n        isBuff = !isArr && isBuffer(srcValue),\n        isTyped = !isArr && !isBuff && isTypedArray(srcValue);\n\n    newValue = srcValue;\n    if (isArr || isBuff || isTyped) {\n      if (isArray(objValue)) {\n        newValue = objValue;\n      }\n      else if (isArrayLikeObject(objValue)) {\n        newValue = copyArray(objValue);\n      }\n      else if (isBuff) {\n        isCommon = false;\n        newValue = cloneBuffer(srcValue, true);\n      }\n      else if (isTyped) {\n        isCommon = false;\n        newValue = cloneTypedArray(srcValue, true);\n      }\n      else {\n        newValue = [];\n      }\n    }\n    else if (isPlainObject(srcValue) || isArguments(srcValue)) {\n      newValue = objValue;\n      if (isArguments(objValue)) {\n        newValue = toPlainObject(objValue);\n      }\n      else if (!isObject(objValue) || isFunction(objValue)) {\n        newValue = initCloneObject(srcValue);\n      }\n    }\n    else {\n      isCommon = false;\n    }\n  }\n  if (isCommon) {\n    // Recursively merge objects and arrays (susceptible to call stack limits).\n    stack.set(srcValue, newValue);\n    mergeFunc(newValue, srcValue, srcIndex, customizer, stack);\n    stack['delete'](srcValue);\n  }\n  assignMergeValue(object, key, newValue);\n}\n\nmodule.exports = baseMergeDeep;\n","/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeCeil = Math.ceil,\n    nativeMax = Math.max;\n\n/**\n * The base implementation of `_.range` and `_.rangeRight` which doesn't\n * coerce arguments.\n *\n * @private\n * @param {number} start The start of the range.\n * @param {number} end The end of the range.\n * @param {number} step The value to increment or decrement by.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Array} Returns the range of numbers.\n */\nfunction baseRange(start, end, step, fromRight) {\n  var index = -1,\n      length = nativeMax(nativeCeil((end - start) / (step || 1)), 0),\n      result = Array(length);\n\n  while (length--) {\n    result[fromRight ? length : ++index] = start;\n    start += step;\n  }\n  return result;\n}\n\nmodule.exports = baseRange;\n","var identity = require('./identity'),\n    overRest = require('./_overRest'),\n    setToString = require('./_setToString');\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  return setToString(overRest(func, start, identity), func + '');\n}\n\nmodule.exports = baseRest;\n","var constant = require('./constant'),\n    defineProperty = require('./_defineProperty'),\n    identity = require('./identity');\n\n/**\n * The base implementation of `setToString` without support for hot loop shorting.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar baseSetToString = !defineProperty ? identity : function(func, string) {\n  return defineProperty(func, 'toString', {\n    'configurable': true,\n    'enumerable': false,\n    'value': constant(string),\n    'writable': true\n  });\n};\n\nmodule.exports = baseSetToString;\n","/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\nmodule.exports = baseTimes;\n","var trimmedEndIndex = require('./_trimmedEndIndex');\n\n/** Used to match leading whitespace. */\nvar reTrimStart = /^\\s+/;\n\n/**\n * The base implementation of `_.trim`.\n *\n * @private\n * @param {string} string The string to trim.\n * @returns {string} Returns the trimmed string.\n */\nfunction baseTrim(string) {\n  return string\n    ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '')\n    : string;\n}\n\nmodule.exports = baseTrim;\n","/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\nmodule.exports = baseUnary;\n","/**\n * Checks if a `cache` value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\nmodule.exports = cacheHas;\n","var identity = require('./identity');\n\n/**\n * Casts `value` to `identity` if it's not a function.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {Function} Returns cast function.\n */\nfunction castFunction(value) {\n  return typeof value == 'function' ? value : identity;\n}\n\nmodule.exports = castFunction;\n","var Uint8Array = require('./_Uint8Array');\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\nmodule.exports = cloneArrayBuffer;\n","var root = require('./_root');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    allocUnsafe = Buffer ? Buffer.allocUnsafe : undefined;\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var length = buffer.length,\n      result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);\n\n  buffer.copy(result);\n  return result;\n}\n\nmodule.exports = cloneBuffer;\n","var cloneArrayBuffer = require('./_cloneArrayBuffer');\n\n/**\n * Creates a clone of `dataView`.\n *\n * @private\n * @param {Object} dataView The data view to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned data view.\n */\nfunction cloneDataView(dataView, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n}\n\nmodule.exports = cloneDataView;\n","/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/**\n * Creates a clone of `regexp`.\n *\n * @private\n * @param {Object} regexp The regexp to clone.\n * @returns {Object} Returns the cloned regexp.\n */\nfunction cloneRegExp(regexp) {\n  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n  result.lastIndex = regexp.lastIndex;\n  return result;\n}\n\nmodule.exports = cloneRegExp;\n","var Symbol = require('./_Symbol');\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a clone of the `symbol` object.\n *\n * @private\n * @param {Object} symbol The symbol object to clone.\n * @returns {Object} Returns the cloned symbol object.\n */\nfunction cloneSymbol(symbol) {\n  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n}\n\nmodule.exports = cloneSymbol;\n","var cloneArrayBuffer = require('./_cloneArrayBuffer');\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\nmodule.exports = cloneTypedArray;\n","/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\nmodule.exports = copyArray;\n","var assignValue = require('./_assignValue'),\n    baseAssignValue = require('./_baseAssignValue');\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  var isNew = !object;\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    if (newValue === undefined) {\n      newValue = source[key];\n    }\n    if (isNew) {\n      baseAssignValue(object, key, newValue);\n    } else {\n      assignValue(object, key, newValue);\n    }\n  }\n  return object;\n}\n\nmodule.exports = copyObject;\n","var copyObject = require('./_copyObject'),\n    getSymbols = require('./_getSymbols');\n\n/**\n * Copies own symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbols(source, object) {\n  return copyObject(source, getSymbols(source), object);\n}\n\nmodule.exports = copySymbols;\n","var copyObject = require('./_copyObject'),\n    getSymbolsIn = require('./_getSymbolsIn');\n\n/**\n * Copies own and inherited symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbolsIn(source, object) {\n  return copyObject(source, getSymbolsIn(source), object);\n}\n\nmodule.exports = copySymbolsIn;\n","var root = require('./_root');\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\nmodule.exports = coreJsData;\n","var baseRest = require('./_baseRest'),\n    isIterateeCall = require('./_isIterateeCall');\n\n/**\n * Creates a function like `_.assign`.\n *\n * @private\n * @param {Function} assigner The function to assign values.\n * @returns {Function} Returns the new assigner function.\n */\nfunction createAssigner(assigner) {\n  return baseRest(function(object, sources) {\n    var index = -1,\n        length = sources.length,\n        customizer = length > 1 ? sources[length - 1] : undefined,\n        guard = length > 2 ? sources[2] : undefined;\n\n    customizer = (assigner.length > 3 && typeof customizer == 'function')\n      ? (length--, customizer)\n      : undefined;\n\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n      customizer = length < 3 ? undefined : customizer;\n      length = 1;\n    }\n    object = Object(object);\n    while (++index < length) {\n      var source = sources[index];\n      if (source) {\n        assigner(object, source, index, customizer);\n      }\n    }\n    return object;\n  });\n}\n\nmodule.exports = createAssigner;\n","/**\n * Creates a base function for methods like `_.forIn` and `_.forOwn`.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseFor(fromRight) {\n  return function(object, iteratee, keysFunc) {\n    var index = -1,\n        iterable = Object(object),\n        props = keysFunc(object),\n        length = props.length;\n\n    while (length--) {\n      var key = props[fromRight ? length : ++index];\n      if (iteratee(iterable[key], key, iterable) === false) {\n        break;\n      }\n    }\n    return object;\n  };\n}\n\nmodule.exports = createBaseFor;\n","var baseRange = require('./_baseRange'),\n    isIterateeCall = require('./_isIterateeCall'),\n    toFinite = require('./toFinite');\n\n/**\n * Creates a `_.range` or `_.rangeRight` function.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new range function.\n */\nfunction createRange(fromRight) {\n  return function(start, end, step) {\n    if (step && typeof step != 'number' && isIterateeCall(start, end, step)) {\n      end = step = undefined;\n    }\n    // Ensure the sign of `-0` is preserved.\n    start = toFinite(start);\n    if (end === undefined) {\n      end = start;\n      start = 0;\n    } else {\n      end = toFinite(end);\n    }\n    step = step === undefined ? (start < end ? 1 : -1) : toFinite(step);\n    return baseRange(start, end, step, fromRight);\n  };\n}\n\nmodule.exports = createRange;\n","var getNative = require('./_getNative');\n\nvar defineProperty = (function() {\n  try {\n    var func = getNative(Object, 'defineProperty');\n    func({}, '', {});\n    return func;\n  } catch (e) {}\n}());\n\nmodule.exports = defineProperty;\n","var SetCache = require('./_SetCache'),\n    arraySome = require('./_arraySome'),\n    cacheHas = require('./_cacheHas');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Check that cyclic values are equal.\n  var arrStacked = stack.get(array);\n  var othStacked = stack.get(other);\n  if (arrStacked && othStacked) {\n    return arrStacked == other && othStacked == array;\n  }\n  var index = -1,\n      result = true,\n      seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n  stack.set(array, other);\n  stack.set(other, array);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (seen) {\n      if (!arraySome(other, function(othValue, othIndex) {\n            if (!cacheHas(seen, othIndex) &&\n                (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n              return seen.push(othIndex);\n            }\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(\n          arrValue === othValue ||\n            equalFunc(arrValue, othValue, bitmask, customizer, stack)\n        )) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  stack['delete'](other);\n  return result;\n}\n\nmodule.exports = equalArrays;\n","var Symbol = require('./_Symbol'),\n    Uint8Array = require('./_Uint8Array'),\n    eq = require('./eq'),\n    equalArrays = require('./_equalArrays'),\n    mapToArray = require('./_mapToArray'),\n    setToArray = require('./_setToArray');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]';\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n  switch (tag) {\n    case dataViewTag:\n      if ((object.byteLength != other.byteLength) ||\n          (object.byteOffset != other.byteOffset)) {\n        return false;\n      }\n      object = object.buffer;\n      other = other.buffer;\n\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag:\n    case dateTag:\n    case numberTag:\n      // Coerce booleans to `1` or `0` and dates to milliseconds.\n      // Invalid dates are coerced to `NaN`.\n      return eq(+object, +other);\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings, primitives and objects,\n      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n      // for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n      convert || (convert = setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      bitmask |= COMPARE_UNORDERED_FLAG;\n\n      // Recursively compare objects (susceptible to call stack limits).\n      stack.set(object, other);\n      var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n      stack['delete'](object);\n      return result;\n\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\nmodule.exports = equalByTag;\n","var getAllKeys = require('./_getAllKeys');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      objProps = getAllKeys(object),\n      objLength = objProps.length,\n      othProps = getAllKeys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n      return false;\n    }\n  }\n  // Check that cyclic values are equal.\n  var objStacked = stack.get(object);\n  var othStacked = stack.get(other);\n  if (objStacked && othStacked) {\n    return objStacked == other && othStacked == object;\n  }\n  var result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  stack['delete'](other);\n  return result;\n}\n\nmodule.exports = equalObjects;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","var baseGetAllKeys = require('./_baseGetAllKeys'),\n    getSymbols = require('./_getSymbols'),\n    keys = require('./keys');\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\nmodule.exports = getAllKeys;\n","var baseGetAllKeys = require('./_baseGetAllKeys'),\n    getSymbolsIn = require('./_getSymbolsIn'),\n    keysIn = require('./keysIn');\n\n/**\n * Creates an array of own and inherited enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeysIn(object) {\n  return baseGetAllKeys(object, keysIn, getSymbolsIn);\n}\n\nmodule.exports = getAllKeysIn;\n","var isKeyable = require('./_isKeyable');\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\nmodule.exports = getMapData;\n","var baseIsNative = require('./_baseIsNative'),\n    getValue = require('./_getValue');\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\nmodule.exports = getNative;\n","var overArg = require('./_overArg');\n\n/** Built-in value references. */\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\n\nmodule.exports = getPrototype;\n","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","var arrayFilter = require('./_arrayFilter'),\n    stubArray = require('./stubArray');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\nmodule.exports = getSymbols;\n","var arrayPush = require('./_arrayPush'),\n    getPrototype = require('./_getPrototype'),\n    getSymbols = require('./_getSymbols'),\n    stubArray = require('./stubArray');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own and inherited enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbolsIn = !nativeGetSymbols ? stubArray : function(object) {\n  var result = [];\n  while (object) {\n    arrayPush(result, getSymbols(object));\n    object = getPrototype(object);\n  }\n  return result;\n};\n\nmodule.exports = getSymbolsIn;\n","var DataView = require('./_DataView'),\n    Map = require('./_Map'),\n    Promise = require('./_Promise'),\n    Set = require('./_Set'),\n    WeakMap = require('./_WeakMap'),\n    baseGetTag = require('./_baseGetTag'),\n    toSource = require('./_toSource');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    setTag = '[object Set]',\n    weakMapTag = '[object WeakMap]';\n\nvar dataViewTag = '[object DataView]';\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\nmodule.exports = getTag;\n","/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nmodule.exports = getValue;\n","var nativeCreate = require('./_nativeCreate');\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\nmodule.exports = hashClear;\n","/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nmodule.exports = hashDelete;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\nmodule.exports = hashGet;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\nmodule.exports = hashHas;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\nmodule.exports = hashSet;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = new array.constructor(length);\n\n  // Add properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\nmodule.exports = initCloneArray;\n","var cloneArrayBuffer = require('./_cloneArrayBuffer'),\n    cloneDataView = require('./_cloneDataView'),\n    cloneRegExp = require('./_cloneRegExp'),\n    cloneSymbol = require('./_cloneSymbol'),\n    cloneTypedArray = require('./_cloneTypedArray');\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Map`, `Number`, `RegExp`, `Set`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return cloneArrayBuffer(object);\n\n    case boolTag:\n    case dateTag:\n      return new Ctor(+object);\n\n    case dataViewTag:\n      return cloneDataView(object, isDeep);\n\n    case float32Tag: case float64Tag:\n    case int8Tag: case int16Tag: case int32Tag:\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n      return cloneTypedArray(object, isDeep);\n\n    case mapTag:\n      return new Ctor;\n\n    case numberTag:\n    case stringTag:\n      return new Ctor(object);\n\n    case regexpTag:\n      return cloneRegExp(object);\n\n    case setTag:\n      return new Ctor;\n\n    case symbolTag:\n      return cloneSymbol(object);\n  }\n}\n\nmodule.exports = initCloneByTag;\n","var baseCreate = require('./_baseCreate'),\n    getPrototype = require('./_getPrototype'),\n    isPrototype = require('./_isPrototype');\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\nmodule.exports = initCloneObject;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n\n  return !!length &&\n    (type == 'number' ||\n      (type != 'symbol' && reIsUint.test(value))) &&\n        (value > -1 && value % 1 == 0 && value < length);\n}\n\nmodule.exports = isIndex;\n","var eq = require('./eq'),\n    isArrayLike = require('./isArrayLike'),\n    isIndex = require('./_isIndex'),\n    isObject = require('./isObject');\n\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n *  else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n        ? (isArrayLike(object) && isIndex(index, object.length))\n        : (type == 'string' && index in object)\n      ) {\n    return eq(object[index], value);\n  }\n  return false;\n}\n\nmodule.exports = isIterateeCall;\n","/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\nmodule.exports = isKeyable;\n","var coreJsData = require('./_coreJsData');\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nmodule.exports = isMasked;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\nmodule.exports = isPrototype;\n","/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\nmodule.exports = listCacheClear;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\nmodule.exports = listCacheDelete;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\nmodule.exports = listCacheGet;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\nmodule.exports = listCacheHas;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\nmodule.exports = listCacheSet;\n","var Hash = require('./_Hash'),\n    ListCache = require('./_ListCache'),\n    Map = require('./_Map');\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\nmodule.exports = mapCacheClear;\n","var getMapData = require('./_getMapData');\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nmodule.exports = mapCacheDelete;\n","var getMapData = require('./_getMapData');\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\nmodule.exports = mapCacheGet;\n","var getMapData = require('./_getMapData');\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\nmodule.exports = mapCacheHas;\n","var getMapData = require('./_getMapData');\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\nmodule.exports = mapCacheSet;\n","/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\nmodule.exports = mapToArray;\n","var getNative = require('./_getNative');\n\n/* Built-in method references that are verified to be native. */\nvar nativeCreate = getNative(Object, 'create');\n\nmodule.exports = nativeCreate;\n","var overArg = require('./_overArg');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object);\n\nmodule.exports = nativeKeys;\n","/**\n * This function is like\n * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * except that it includes inherited enumerable properties.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction nativeKeysIn(object) {\n  var result = [];\n  if (object != null) {\n    for (var key in Object(object)) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = nativeKeysIn;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    // Use `util.types` for Node.js 10+.\n    var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n    if (types) {\n      return types;\n    }\n\n    // Legacy `process.binding('util')` for Node.js < 10.\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\nmodule.exports = nodeUtil;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nmodule.exports = overArg;\n","var apply = require('./_apply');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * A specialized version of `baseRest` which transforms the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @param {Function} transform The rest array transform.\n * @returns {Function} Returns the new function.\n */\nfunction overRest(func, start, transform) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = transform(array);\n    return apply(func, this, otherArgs);\n  };\n}\n\nmodule.exports = overRest;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","/**\n * Gets the value at `key`, unless `key` is \"__proto__\" or \"constructor\".\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction safeGet(object, key) {\n  if (key === 'constructor' && typeof object[key] === 'function') {\n    return;\n  }\n\n  if (key == '__proto__') {\n    return;\n  }\n\n  return object[key];\n}\n\nmodule.exports = safeGet;\n","/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\nmodule.exports = setCacheAdd;\n","/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\nmodule.exports = setCacheHas;\n","/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\nmodule.exports = setToArray;\n","var baseSetToString = require('./_baseSetToString'),\n    shortOut = require('./_shortOut');\n\n/**\n * Sets the `toString` method of `func` to return `string`.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar setToString = shortOut(baseSetToString);\n\nmodule.exports = setToString;\n","/** Used to detect hot functions by number of calls within a span of milliseconds. */\nvar HOT_COUNT = 800,\n    HOT_SPAN = 16;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeNow = Date.now;\n\n/**\n * Creates a function that'll short out and invoke `identity` instead\n * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`\n * milliseconds.\n *\n * @private\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new shortable function.\n */\nfunction shortOut(func) {\n  var count = 0,\n      lastCalled = 0;\n\n  return function() {\n    var stamp = nativeNow(),\n        remaining = HOT_SPAN - (stamp - lastCalled);\n\n    lastCalled = stamp;\n    if (remaining > 0) {\n      if (++count >= HOT_COUNT) {\n        return arguments[0];\n      }\n    } else {\n      count = 0;\n    }\n    return func.apply(undefined, arguments);\n  };\n}\n\nmodule.exports = shortOut;\n","var ListCache = require('./_ListCache');\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\nmodule.exports = stackClear;\n","/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\nmodule.exports = stackDelete;\n","/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\nmodule.exports = stackGet;\n","/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\nmodule.exports = stackHas;\n","var ListCache = require('./_ListCache'),\n    Map = require('./_Map'),\n    MapCache = require('./_MapCache');\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\nmodule.exports = stackSet;\n","/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nmodule.exports = toSource;\n","/** Used to match a single whitespace character. */\nvar reWhitespace = /\\s/;\n\n/**\n * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace\n * character of `string`.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {number} Returns the index of the last non-whitespace character.\n */\nfunction trimmedEndIndex(string) {\n  var index = string.length;\n\n  while (index-- && reWhitespace.test(string.charAt(index))) {}\n  return index;\n}\n\nmodule.exports = trimmedEndIndex;\n","var baseClone = require('./_baseClone');\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * This method is like `_.clone` except that it recursively clones `value`.\n *\n * @static\n * @memberOf _\n * @since 1.0.0\n * @category Lang\n * @param {*} value The value to recursively clone.\n * @returns {*} Returns the deep cloned value.\n * @see _.clone\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var deep = _.cloneDeep(objects);\n * console.log(deep[0] === objects[0]);\n * // => false\n */\nfunction cloneDeep(value) {\n  return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG);\n}\n\nmodule.exports = cloneDeep;\n","/**\n * Creates a function that returns `value`.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {*} value The value to return from the new function.\n * @returns {Function} Returns the new constant function.\n * @example\n *\n * var objects = _.times(2, _.constant({ 'a': 1 }));\n *\n * console.log(objects);\n * // => [{ 'a': 1 }, { 'a': 1 }]\n *\n * console.log(objects[0] === objects[1]);\n * // => true\n */\nfunction constant(value) {\n  return function() {\n    return value;\n  };\n}\n\nmodule.exports = constant;\n","/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nmodule.exports = eq;\n","/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nmodule.exports = identity;\n","var baseIsArguments = require('./_baseIsArguments'),\n    isObjectLike = require('./isObjectLike');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\nmodule.exports = isArguments;\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nmodule.exports = isArray;\n","var isFunction = require('./isFunction'),\n    isLength = require('./isLength');\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\nmodule.exports = isArrayLike;\n","var isArrayLike = require('./isArrayLike'),\n    isObjectLike = require('./isObjectLike');\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\nmodule.exports = isArrayLikeObject;\n","var root = require('./_root'),\n    stubFalse = require('./stubFalse');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\nmodule.exports = isBuffer;\n","var baseIsEqual = require('./_baseIsEqual');\n\n/**\n * Performs a deep comparison between two values to determine if they are\n * equivalent.\n *\n * **Note:** This method supports comparing arrays, array buffers, booleans,\n * date objects, error objects, maps, numbers, `Object` objects, regexes,\n * sets, strings, symbols, and typed arrays. `Object` objects are compared\n * by their own, not inherited, enumerable properties. Functions and DOM\n * nodes are compared by strict equality, i.e. `===`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.isEqual(object, other);\n * // => true\n *\n * object === other;\n * // => false\n */\nfunction isEqual(value, other) {\n  return baseIsEqual(value, other);\n}\n\nmodule.exports = isEqual;\n","var baseGetTag = require('./_baseGetTag'),\n    isObject = require('./isObject');\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nmodule.exports = isFunction;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nmodule.exports = isLength;\n","var baseIsMap = require('./_baseIsMap'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsMap = nodeUtil && nodeUtil.isMap;\n\n/**\n * Checks if `value` is classified as a `Map` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n * @example\n *\n * _.isMap(new Map);\n * // => true\n *\n * _.isMap(new WeakMap);\n * // => false\n */\nvar isMap = nodeIsMap ? baseUnary(nodeIsMap) : baseIsMap;\n\nmodule.exports = isMap;\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n","var baseGetTag = require('./_baseGetTag'),\n    getPrototype = require('./_getPrototype'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to infer the `Object` constructor. */\nvar objectCtorString = funcToString.call(Object);\n\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @since 0.8.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) || baseGetTag(value) != objectTag) {\n    return false;\n  }\n  var proto = getPrototype(value);\n  if (proto === null) {\n    return true;\n  }\n  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n  return typeof Ctor == 'function' && Ctor instanceof Ctor &&\n    funcToString.call(Ctor) == objectCtorString;\n}\n\nmodule.exports = isPlainObject;\n","var baseIsSet = require('./_baseIsSet'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsSet = nodeUtil && nodeUtil.isSet;\n\n/**\n * Checks if `value` is classified as a `Set` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n * @example\n *\n * _.isSet(new Set);\n * // => true\n *\n * _.isSet(new WeakSet);\n * // => false\n */\nvar isSet = nodeIsSet ? baseUnary(nodeIsSet) : baseIsSet;\n\nmodule.exports = isSet;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n","var baseIsTypedArray = require('./_baseIsTypedArray'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\nmodule.exports = isTypedArray;\n","var arrayLikeKeys = require('./_arrayLikeKeys'),\n    baseKeys = require('./_baseKeys'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\nmodule.exports = keys;\n","var arrayLikeKeys = require('./_arrayLikeKeys'),\n    baseKeysIn = require('./_baseKeysIn'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n}\n\nmodule.exports = keysIn;\n","var MapCache = require('./_MapCache');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a function that memoizes the result of `func`. If `resolver` is\n * provided, it determines the cache key for storing the result based on the\n * arguments provided to the memoized function. By default, the first argument\n * provided to the memoized function is used as the map cache key. The `func`\n * is invoked with the `this` binding of the memoized function.\n *\n * **Note:** The cache is exposed as the `cache` property on the memoized\n * function. Its creation may be customized by replacing the `_.memoize.Cache`\n * constructor with one whose instances implement the\n * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n * method interface of `clear`, `delete`, `get`, `has`, and `set`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to have its output memoized.\n * @param {Function} [resolver] The function to resolve the cache key.\n * @returns {Function} Returns the new memoized function.\n * @example\n *\n * var object = { 'a': 1, 'b': 2 };\n * var other = { 'c': 3, 'd': 4 };\n *\n * var values = _.memoize(_.values);\n * values(object);\n * // => [1, 2]\n *\n * values(other);\n * // => [3, 4]\n *\n * object.a = 2;\n * values(object);\n * // => [1, 2]\n *\n * // Modify the result cache.\n * values.cache.set(object, ['a', 'b']);\n * values(object);\n * // => ['a', 'b']\n *\n * // Replace `_.memoize.Cache`.\n * _.memoize.Cache = WeakMap;\n */\nfunction memoize(func, resolver) {\n  if (typeof func != 'function' || (resolver != null && typeof resolver != 'function')) {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var memoized = function() {\n    var args = arguments,\n        key = resolver ? resolver.apply(this, args) : args[0],\n        cache = memoized.cache;\n\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result) || cache;\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || MapCache);\n  return memoized;\n}\n\n// Expose `MapCache`.\nmemoize.Cache = MapCache;\n\nmodule.exports = memoize;\n","var baseMerge = require('./_baseMerge'),\n    createAssigner = require('./_createAssigner');\n\n/**\n * This method is like `_.merge` except that it accepts `customizer` which\n * is invoked to produce the merged values of the destination and source\n * properties. If `customizer` returns `undefined`, merging is handled by the\n * method instead. The `customizer` is invoked with six arguments:\n * (objValue, srcValue, key, object, source, stack).\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} sources The source objects.\n * @param {Function} customizer The function to customize assigned values.\n * @returns {Object} Returns `object`.\n * @example\n *\n * function customizer(objValue, srcValue) {\n *   if (_.isArray(objValue)) {\n *     return objValue.concat(srcValue);\n *   }\n * }\n *\n * var object = { 'a': [1], 'b': [2] };\n * var other = { 'a': [3], 'b': [4] };\n *\n * _.mergeWith(object, other, customizer);\n * // => { 'a': [1, 3], 'b': [2, 4] }\n */\nvar mergeWith = createAssigner(function(object, source, srcIndex, customizer) {\n  baseMerge(object, source, srcIndex, customizer);\n});\n\nmodule.exports = mergeWith;\n","var createRange = require('./_createRange');\n\n/**\n * Creates an array of numbers (positive and/or negative) progressing from\n * `start` up to, but not including, `end`. A step of `-1` is used if a negative\n * `start` is specified without an `end` or `step`. If `end` is not specified,\n * it's set to `start` with `start` then set to `0`.\n *\n * **Note:** JavaScript follows the IEEE-754 standard for resolving\n * floating-point values which can produce unexpected results.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {number} [start=0] The start of the range.\n * @param {number} end The end of the range.\n * @param {number} [step=1] The value to increment or decrement by.\n * @returns {Array} Returns the range of numbers.\n * @see _.inRange, _.rangeRight\n * @example\n *\n * _.range(4);\n * // => [0, 1, 2, 3]\n *\n * _.range(-4);\n * // => [0, -1, -2, -3]\n *\n * _.range(1, 5);\n * // => [1, 2, 3, 4]\n *\n * _.range(0, 20, 5);\n * // => [0, 5, 10, 15]\n *\n * _.range(0, -4, -1);\n * // => [0, -1, -2, -3]\n *\n * _.range(1, 4, 0);\n * // => [1, 1, 1]\n *\n * _.range(0);\n * // => []\n */\nvar range = createRange();\n\nmodule.exports = range;\n","/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\nmodule.exports = stubArray;\n","/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = stubFalse;\n","var baseTimes = require('./_baseTimes'),\n    castFunction = require('./_castFunction'),\n    toInteger = require('./toInteger');\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used as references for the maximum length and index of an array. */\nvar MAX_ARRAY_LENGTH = 4294967295;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMin = Math.min;\n\n/**\n * Invokes the iteratee `n` times, returning an array of the results of\n * each invocation. The iteratee is invoked with one argument; (index).\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n * @example\n *\n * _.times(3, String);\n * // => ['0', '1', '2']\n *\n *  _.times(4, _.constant(0));\n * // => [0, 0, 0, 0]\n */\nfunction times(n, iteratee) {\n  n = toInteger(n);\n  if (n < 1 || n > MAX_SAFE_INTEGER) {\n    return [];\n  }\n  var index = MAX_ARRAY_LENGTH,\n      length = nativeMin(n, MAX_ARRAY_LENGTH);\n\n  iteratee = castFunction(iteratee);\n  n -= MAX_ARRAY_LENGTH;\n\n  var result = baseTimes(length, iteratee);\n  while (++index < n) {\n    iteratee(index);\n  }\n  return result;\n}\n\nmodule.exports = times;\n","var toNumber = require('./toNumber');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_INTEGER = 1.7976931348623157e+308;\n\n/**\n * Converts `value` to a finite number.\n *\n * @static\n * @memberOf _\n * @since 4.12.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted number.\n * @example\n *\n * _.toFinite(3.2);\n * // => 3.2\n *\n * _.toFinite(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toFinite(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toFinite('3.2');\n * // => 3.2\n */\nfunction toFinite(value) {\n  if (!value) {\n    return value === 0 ? value : 0;\n  }\n  value = toNumber(value);\n  if (value === INFINITY || value === -INFINITY) {\n    var sign = (value < 0 ? -1 : 1);\n    return sign * MAX_INTEGER;\n  }\n  return value === value ? value : 0;\n}\n\nmodule.exports = toFinite;\n","var toFinite = require('./toFinite');\n\n/**\n * Converts `value` to an integer.\n *\n * **Note:** This method is loosely based on\n * [`ToInteger`](http://www.ecma-international.org/ecma-262/7.0/#sec-tointeger).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted integer.\n * @example\n *\n * _.toInteger(3.2);\n * // => 3\n *\n * _.toInteger(Number.MIN_VALUE);\n * // => 0\n *\n * _.toInteger(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toInteger('3.2');\n * // => 3\n */\nfunction toInteger(value) {\n  var result = toFinite(value),\n      remainder = result % 1;\n\n  return result === result ? (remainder ? result - remainder : result) : 0;\n}\n\nmodule.exports = toInteger;\n","var baseTrim = require('./_baseTrim'),\n    isObject = require('./isObject'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = baseTrim(value);\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = toNumber;\n","var copyObject = require('./_copyObject'),\n    keysIn = require('./keysIn');\n\n/**\n * Converts `value` to a plain object flattening inherited enumerable string\n * keyed properties of `value` to own properties of the plain object.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {Object} Returns the converted plain object.\n * @example\n *\n * function Foo() {\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.assign({ 'a': 1 }, new Foo);\n * // => { 'a': 1, 'b': 2 }\n *\n * _.assign({ 'a': 1 }, _.toPlainObject(new Foo));\n * // => { 'a': 1, 'b': 2, 'c': 3 }\n */\nfunction toPlainObject(value) {\n  return copyObject(value, keysIn(value));\n}\n\nmodule.exports = toPlainObject;\n","module.exports = assert;\n\nfunction assert(val, msg) {\n  if (!val)\n    throw new Error(msg || 'Assertion failed');\n}\n\nassert.equal = function assertEqual(l, r, msg) {\n  if (l != r)\n    throw new Error(msg || ('Assertion failed: ' + l + ' != ' + r));\n};\n","'use strict';\n\nvar utils = exports;\n\nfunction toArray(msg, enc) {\n  if (Array.isArray(msg))\n    return msg.slice();\n  if (!msg)\n    return [];\n  var res = [];\n  if (typeof msg !== 'string') {\n    for (var i = 0; i < msg.length; i++)\n      res[i] = msg[i] | 0;\n    return res;\n  }\n  if (enc === 'hex') {\n    msg = msg.replace(/[^a-z0-9]+/ig, '');\n    if (msg.length % 2 !== 0)\n      msg = '0' + msg;\n    for (var i = 0; i < msg.length; i += 2)\n      res.push(parseInt(msg[i] + msg[i + 1], 16));\n  } else {\n    for (var i = 0; i < msg.length; i++) {\n      var c = msg.charCodeAt(i);\n      var hi = c >> 8;\n      var lo = c & 0xff;\n      if (hi)\n        res.push(hi, lo);\n      else\n        res.push(lo);\n    }\n  }\n  return res;\n}\nutils.toArray = toArray;\n\nfunction zero2(word) {\n  if (word.length === 1)\n    return '0' + word;\n  else\n    return word;\n}\nutils.zero2 = zero2;\n\nfunction toHex(msg) {\n  var res = '';\n  for (var i = 0; i < msg.length; i++)\n    res += zero2(msg[i].toString(16));\n  return res;\n}\nutils.toHex = toHex;\n\nutils.encode = function encode(arr, enc) {\n  if (enc === 'hex')\n    return toHex(arr);\n  else\n    return arr;\n};\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar w = d * 7;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isFinite(val)) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'weeks':\n    case 'week':\n    case 'w':\n      return n * w;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (msAbs >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (msAbs >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (msAbs >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return plural(ms, msAbs, d, 'day');\n  }\n  if (msAbs >= h) {\n    return plural(ms, msAbs, h, 'hour');\n  }\n  if (msAbs >= m) {\n    return plural(ms, msAbs, m, 'minute');\n  }\n  if (msAbs >= s) {\n    return plural(ms, msAbs, s, 'second');\n  }\n  return ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, msAbs, n, name) {\n  var isPlural = msAbs >= n * 1.5;\n  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\n}\n","'use strict';\n\nconst BigInt = require('big-integer');\n\nconst loadNs = process.hrtime();\nconst loadMs = new Date().getTime();\n\nfunction nanoseconds() {\n  let diffNs = process.hrtime(loadNs);\n  return BigInt(loadMs).times(1e6).add(BigInt(diffNs[0]).times(1e9).plus(diffNs[1])).toString();\n}\n\nfunction microseconds() {\n  return BigInt(nanoseconds()).divide(1e3).toString();\n}\n\nmodule.exports = nanoseconds;\nmodule.exports.microseconds = module.exports.micro = microseconds;","/*!\n * MIT License\n * \n * Copyright (c) 2017-2022 Peculiar Ventures, LLC\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * \n */\n\nconst ARRAY_BUFFER_NAME = \"[object ArrayBuffer]\";\r\nclass BufferSourceConverter {\r\n    static isArrayBuffer(data) {\r\n        return Object.prototype.toString.call(data) === ARRAY_BUFFER_NAME;\r\n    }\r\n    static toArrayBuffer(data) {\r\n        if (this.isArrayBuffer(data)) {\r\n            return data;\r\n        }\r\n        if (data.byteLength === data.buffer.byteLength) {\r\n            return data.buffer;\r\n        }\r\n        return this.toUint8Array(data).slice().buffer;\r\n    }\r\n    static toUint8Array(data) {\r\n        return this.toView(data, Uint8Array);\r\n    }\r\n    static toView(data, type) {\r\n        if (data.constructor === type) {\r\n            return data;\r\n        }\r\n        if (this.isArrayBuffer(data)) {\r\n            return new type(data);\r\n        }\r\n        if (this.isArrayBufferView(data)) {\r\n            return new type(data.buffer, data.byteOffset, data.byteLength);\r\n        }\r\n        throw new TypeError(\"The provided value is not of type '(ArrayBuffer or ArrayBufferView)'\");\r\n    }\r\n    static isBufferSource(data) {\r\n        return this.isArrayBufferView(data)\r\n            || this.isArrayBuffer(data);\r\n    }\r\n    static isArrayBufferView(data) {\r\n        return ArrayBuffer.isView(data)\r\n            || (data && this.isArrayBuffer(data.buffer));\r\n    }\r\n    static isEqual(a, b) {\r\n        const aView = BufferSourceConverter.toUint8Array(a);\r\n        const bView = BufferSourceConverter.toUint8Array(b);\r\n        if (aView.length !== bView.byteLength) {\r\n            return false;\r\n        }\r\n        for (let i = 0; i < aView.length; i++) {\r\n            if (aView[i] !== bView[i]) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n    static concat(...args) {\r\n        if (Array.isArray(args[0])) {\r\n            const buffers = args[0];\r\n            let size = 0;\r\n            for (const buffer of buffers) {\r\n                size += buffer.byteLength;\r\n            }\r\n            const res = new Uint8Array(size);\r\n            let offset = 0;\r\n            for (const buffer of buffers) {\r\n                const view = this.toUint8Array(buffer);\r\n                res.set(view, offset);\r\n                offset += view.length;\r\n            }\r\n            if (args[1]) {\r\n                return this.toView(res, args[1]);\r\n            }\r\n            return res.buffer;\r\n        }\r\n        else {\r\n            return this.concat(args);\r\n        }\r\n    }\r\n}\n\nclass Utf8Converter {\r\n    static fromString(text) {\r\n        const s = unescape(encodeURIComponent(text));\r\n        const uintArray = new Uint8Array(s.length);\r\n        for (let i = 0; i < s.length; i++) {\r\n            uintArray[i] = s.charCodeAt(i);\r\n        }\r\n        return uintArray.buffer;\r\n    }\r\n    static toString(buffer) {\r\n        const buf = BufferSourceConverter.toUint8Array(buffer);\r\n        let encodedString = \"\";\r\n        for (let i = 0; i < buf.length; i++) {\r\n            encodedString += String.fromCharCode(buf[i]);\r\n        }\r\n        const decodedString = decodeURIComponent(escape(encodedString));\r\n        return decodedString;\r\n    }\r\n}\r\nclass Utf16Converter {\r\n    static toString(buffer, littleEndian = false) {\r\n        const arrayBuffer = BufferSourceConverter.toArrayBuffer(buffer);\r\n        const dataView = new DataView(arrayBuffer);\r\n        let res = \"\";\r\n        for (let i = 0; i < arrayBuffer.byteLength; i += 2) {\r\n            const code = dataView.getUint16(i, littleEndian);\r\n            res += String.fromCharCode(code);\r\n        }\r\n        return res;\r\n    }\r\n    static fromString(text, littleEndian = false) {\r\n        const res = new ArrayBuffer(text.length * 2);\r\n        const dataView = new DataView(res);\r\n        for (let i = 0; i < text.length; i++) {\r\n            dataView.setUint16(i * 2, text.charCodeAt(i), littleEndian);\r\n        }\r\n        return res;\r\n    }\r\n}\r\nclass Convert {\r\n    static isHex(data) {\r\n        return typeof data === \"string\"\r\n            && /^[a-z0-9]+$/i.test(data);\r\n    }\r\n    static isBase64(data) {\r\n        return typeof data === \"string\"\r\n            && /^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(data);\r\n    }\r\n    static isBase64Url(data) {\r\n        return typeof data === \"string\"\r\n            && /^[a-zA-Z0-9-_]+$/i.test(data);\r\n    }\r\n    static ToString(buffer, enc = \"utf8\") {\r\n        const buf = BufferSourceConverter.toUint8Array(buffer);\r\n        switch (enc.toLowerCase()) {\r\n            case \"utf8\":\r\n                return this.ToUtf8String(buf);\r\n            case \"binary\":\r\n                return this.ToBinary(buf);\r\n            case \"hex\":\r\n                return this.ToHex(buf);\r\n            case \"base64\":\r\n                return this.ToBase64(buf);\r\n            case \"base64url\":\r\n                return this.ToBase64Url(buf);\r\n            case \"utf16le\":\r\n                return Utf16Converter.toString(buf, true);\r\n            case \"utf16\":\r\n            case \"utf16be\":\r\n                return Utf16Converter.toString(buf);\r\n            default:\r\n                throw new Error(`Unknown type of encoding '${enc}'`);\r\n        }\r\n    }\r\n    static FromString(str, enc = \"utf8\") {\r\n        if (!str) {\r\n            return new ArrayBuffer(0);\r\n        }\r\n        switch (enc.toLowerCase()) {\r\n            case \"utf8\":\r\n                return this.FromUtf8String(str);\r\n            case \"binary\":\r\n                return this.FromBinary(str);\r\n            case \"hex\":\r\n                return this.FromHex(str);\r\n            case \"base64\":\r\n                return this.FromBase64(str);\r\n            case \"base64url\":\r\n                return this.FromBase64Url(str);\r\n            case \"utf16le\":\r\n                return Utf16Converter.fromString(str, true);\r\n            case \"utf16\":\r\n            case \"utf16be\":\r\n                return Utf16Converter.fromString(str);\r\n            default:\r\n                throw new Error(`Unknown type of encoding '${enc}'`);\r\n        }\r\n    }\r\n    static ToBase64(buffer) {\r\n        const buf = BufferSourceConverter.toUint8Array(buffer);\r\n        if (typeof btoa !== \"undefined\") {\r\n            const binary = this.ToString(buf, \"binary\");\r\n            return btoa(binary);\r\n        }\r\n        else {\r\n            return Buffer.from(buf).toString(\"base64\");\r\n        }\r\n    }\r\n    static FromBase64(base64) {\r\n        const formatted = this.formatString(base64);\r\n        if (!formatted) {\r\n            return new ArrayBuffer(0);\r\n        }\r\n        if (!Convert.isBase64(formatted)) {\r\n            throw new TypeError(\"Argument 'base64Text' is not Base64 encoded\");\r\n        }\r\n        if (typeof atob !== \"undefined\") {\r\n            return this.FromBinary(atob(formatted));\r\n        }\r\n        else {\r\n            return new Uint8Array(Buffer.from(formatted, \"base64\")).buffer;\r\n        }\r\n    }\r\n    static FromBase64Url(base64url) {\r\n        const formatted = this.formatString(base64url);\r\n        if (!formatted) {\r\n            return new ArrayBuffer(0);\r\n        }\r\n        if (!Convert.isBase64Url(formatted)) {\r\n            throw new TypeError(\"Argument 'base64url' is not Base64Url encoded\");\r\n        }\r\n        return this.FromBase64(this.Base64Padding(formatted.replace(/\\-/g, \"+\").replace(/\\_/g, \"/\")));\r\n    }\r\n    static ToBase64Url(data) {\r\n        return this.ToBase64(data).replace(/\\+/g, \"-\").replace(/\\//g, \"_\").replace(/\\=/g, \"\");\r\n    }\r\n    static FromUtf8String(text, encoding = Convert.DEFAULT_UTF8_ENCODING) {\r\n        switch (encoding) {\r\n            case \"ascii\":\r\n                return this.FromBinary(text);\r\n            case \"utf8\":\r\n                return Utf8Converter.fromString(text);\r\n            case \"utf16\":\r\n            case \"utf16be\":\r\n                return Utf16Converter.fromString(text);\r\n            case \"utf16le\":\r\n            case \"usc2\":\r\n                return Utf16Converter.fromString(text, true);\r\n            default:\r\n                throw new Error(`Unknown type of encoding '${encoding}'`);\r\n        }\r\n    }\r\n    static ToUtf8String(buffer, encoding = Convert.DEFAULT_UTF8_ENCODING) {\r\n        switch (encoding) {\r\n            case \"ascii\":\r\n                return this.ToBinary(buffer);\r\n            case \"utf8\":\r\n                return Utf8Converter.toString(buffer);\r\n            case \"utf16\":\r\n            case \"utf16be\":\r\n                return Utf16Converter.toString(buffer);\r\n            case \"utf16le\":\r\n            case \"usc2\":\r\n                return Utf16Converter.toString(buffer, true);\r\n            default:\r\n                throw new Error(`Unknown type of encoding '${encoding}'`);\r\n        }\r\n    }\r\n    static FromBinary(text) {\r\n        const stringLength = text.length;\r\n        const resultView = new Uint8Array(stringLength);\r\n        for (let i = 0; i < stringLength; i++) {\r\n            resultView[i] = text.charCodeAt(i);\r\n        }\r\n        return resultView.buffer;\r\n    }\r\n    static ToBinary(buffer) {\r\n        const buf = BufferSourceConverter.toUint8Array(buffer);\r\n        let res = \"\";\r\n        for (let i = 0; i < buf.length; i++) {\r\n            res += String.fromCharCode(buf[i]);\r\n        }\r\n        return res;\r\n    }\r\n    static ToHex(buffer) {\r\n        const buf = BufferSourceConverter.toUint8Array(buffer);\r\n        const splitter = \"\";\r\n        const res = [];\r\n        const len = buf.length;\r\n        for (let i = 0; i < len; i++) {\r\n            const char = buf[i].toString(16).padStart(2, \"0\");\r\n            res.push(char);\r\n        }\r\n        return res.join(splitter);\r\n    }\r\n    static FromHex(hexString) {\r\n        let formatted = this.formatString(hexString);\r\n        if (!formatted) {\r\n            return new ArrayBuffer(0);\r\n        }\r\n        if (!Convert.isHex(formatted)) {\r\n            throw new TypeError(\"Argument 'hexString' is not HEX encoded\");\r\n        }\r\n        if (formatted.length % 2) {\r\n            formatted = `0${formatted}`;\r\n        }\r\n        const res = new Uint8Array(formatted.length / 2);\r\n        for (let i = 0; i < formatted.length; i = i + 2) {\r\n            const c = formatted.slice(i, i + 2);\r\n            res[i / 2] = parseInt(c, 16);\r\n        }\r\n        return res.buffer;\r\n    }\r\n    static ToUtf16String(buffer, littleEndian = false) {\r\n        return Utf16Converter.toString(buffer, littleEndian);\r\n    }\r\n    static FromUtf16String(text, littleEndian = false) {\r\n        return Utf16Converter.fromString(text, littleEndian);\r\n    }\r\n    static Base64Padding(base64) {\r\n        const padCount = 4 - (base64.length % 4);\r\n        if (padCount < 4) {\r\n            for (let i = 0; i < padCount; i++) {\r\n                base64 += \"=\";\r\n            }\r\n        }\r\n        return base64;\r\n    }\r\n    static formatString(data) {\r\n        return (data === null || data === void 0 ? void 0 : data.replace(/[\\n\\r\\t ]/g, \"\")) || \"\";\r\n    }\r\n}\r\nConvert.DEFAULT_UTF8_ENCODING = \"utf8\";\n\nfunction assign(target, ...sources) {\r\n    const res = arguments[0];\r\n    for (let i = 1; i < arguments.length; i++) {\r\n        const obj = arguments[i];\r\n        for (const prop in obj) {\r\n            res[prop] = obj[prop];\r\n        }\r\n    }\r\n    return res;\r\n}\r\nfunction combine(...buf) {\r\n    const totalByteLength = buf.map((item) => item.byteLength).reduce((prev, cur) => prev + cur);\r\n    const res = new Uint8Array(totalByteLength);\r\n    let currentPos = 0;\r\n    buf.map((item) => new Uint8Array(item)).forEach((arr) => {\r\n        for (const item2 of arr) {\r\n            res[currentPos++] = item2;\r\n        }\r\n    });\r\n    return res.buffer;\r\n}\r\nfunction isEqual(bytes1, bytes2) {\r\n    if (!(bytes1 && bytes2)) {\r\n        return false;\r\n    }\r\n    if (bytes1.byteLength !== bytes2.byteLength) {\r\n        return false;\r\n    }\r\n    const b1 = new Uint8Array(bytes1);\r\n    const b2 = new Uint8Array(bytes2);\r\n    for (let i = 0; i < bytes1.byteLength; i++) {\r\n        if (b1[i] !== b2[i]) {\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\n\nexport { BufferSourceConverter, Convert, assign, combine, isEqual };\n","/*! *****************************************************************************\nCopyright (C) Microsoft. All rights reserved.\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\nthis file except in compliance with the License. You may obtain a copy of the\nLicense at http://www.apache.org/licenses/LICENSE-2.0\n\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\nMERCHANTABLITY OR NON-INFRINGEMENT.\n\nSee the Apache Version 2.0 License for specific language governing permissions\nand limitations under the License.\n***************************************************************************** */\nvar Reflect;\n(function (Reflect) {\n    // Metadata Proposal\n    // https://rbuckton.github.io/reflect-metadata/\n    (function (factory) {\n        var root = typeof global === \"object\" ? global :\n            typeof self === \"object\" ? self :\n                typeof this === \"object\" ? this :\n                    Function(\"return this;\")();\n        var exporter = makeExporter(Reflect);\n        if (typeof root.Reflect === \"undefined\") {\n            root.Reflect = Reflect;\n        }\n        else {\n            exporter = makeExporter(root.Reflect, exporter);\n        }\n        factory(exporter);\n        function makeExporter(target, previous) {\n            return function (key, value) {\n                if (typeof target[key] !== \"function\") {\n                    Object.defineProperty(target, key, { configurable: true, writable: true, value: value });\n                }\n                if (previous)\n                    previous(key, value);\n            };\n        }\n    })(function (exporter) {\n        var hasOwn = Object.prototype.hasOwnProperty;\n        // feature test for Symbol support\n        var supportsSymbol = typeof Symbol === \"function\";\n        var toPrimitiveSymbol = supportsSymbol && typeof Symbol.toPrimitive !== \"undefined\" ? Symbol.toPrimitive : \"@@toPrimitive\";\n        var iteratorSymbol = supportsSymbol && typeof Symbol.iterator !== \"undefined\" ? Symbol.iterator : \"@@iterator\";\n        var supportsCreate = typeof Object.create === \"function\"; // feature test for Object.create support\n        var supportsProto = { __proto__: [] } instanceof Array; // feature test for __proto__ support\n        var downLevel = !supportsCreate && !supportsProto;\n        var HashMap = {\n            // create an object in dictionary mode (a.k.a. \"slow\" mode in v8)\n            create: supportsCreate\n                ? function () { return MakeDictionary(Object.create(null)); }\n                : supportsProto\n                    ? function () { return MakeDictionary({ __proto__: null }); }\n                    : function () { return MakeDictionary({}); },\n            has: downLevel\n                ? function (map, key) { return hasOwn.call(map, key); }\n                : function (map, key) { return key in map; },\n            get: downLevel\n                ? function (map, key) { return hasOwn.call(map, key) ? map[key] : undefined; }\n                : function (map, key) { return map[key]; },\n        };\n        // Load global or shim versions of Map, Set, and WeakMap\n        var functionPrototype = Object.getPrototypeOf(Function);\n        var usePolyfill = typeof process === \"object\" && process.env && process.env[\"REFLECT_METADATA_USE_MAP_POLYFILL\"] === \"true\";\n        var _Map = !usePolyfill && typeof Map === \"function\" && typeof Map.prototype.entries === \"function\" ? Map : CreateMapPolyfill();\n        var _Set = !usePolyfill && typeof Set === \"function\" && typeof Set.prototype.entries === \"function\" ? Set : CreateSetPolyfill();\n        var _WeakMap = !usePolyfill && typeof WeakMap === \"function\" ? WeakMap : CreateWeakMapPolyfill();\n        // [[Metadata]] internal slot\n        // https://rbuckton.github.io/reflect-metadata/#ordinary-object-internal-methods-and-internal-slots\n        var Metadata = new _WeakMap();\n        /**\n         * Applies a set of decorators to a property of a target object.\n         * @param decorators An array of decorators.\n         * @param target The target object.\n         * @param propertyKey (Optional) The property key to decorate.\n         * @param attributes (Optional) The property descriptor for the target key.\n         * @remarks Decorators are applied in reverse order.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     Example = Reflect.decorate(decoratorsArray, Example);\n         *\n         *     // property (on constructor)\n         *     Reflect.decorate(decoratorsArray, Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     Reflect.decorate(decoratorsArray, Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     Object.defineProperty(Example, \"staticMethod\",\n         *         Reflect.decorate(decoratorsArray, Example, \"staticMethod\",\n         *             Object.getOwnPropertyDescriptor(Example, \"staticMethod\")));\n         *\n         *     // method (on prototype)\n         *     Object.defineProperty(Example.prototype, \"method\",\n         *         Reflect.decorate(decoratorsArray, Example.prototype, \"method\",\n         *             Object.getOwnPropertyDescriptor(Example.prototype, \"method\")));\n         *\n         */\n        function decorate(decorators, target, propertyKey, attributes) {\n            if (!IsUndefined(propertyKey)) {\n                if (!IsArray(decorators))\n                    throw new TypeError();\n                if (!IsObject(target))\n                    throw new TypeError();\n                if (!IsObject(attributes) && !IsUndefined(attributes) && !IsNull(attributes))\n                    throw new TypeError();\n                if (IsNull(attributes))\n                    attributes = undefined;\n                propertyKey = ToPropertyKey(propertyKey);\n                return DecorateProperty(decorators, target, propertyKey, attributes);\n            }\n            else {\n                if (!IsArray(decorators))\n                    throw new TypeError();\n                if (!IsConstructor(target))\n                    throw new TypeError();\n                return DecorateConstructor(decorators, target);\n            }\n        }\n        exporter(\"decorate\", decorate);\n        // 4.1.2 Reflect.metadata(metadataKey, metadataValue)\n        // https://rbuckton.github.io/reflect-metadata/#reflect.metadata\n        /**\n         * A default metadata decorator factory that can be used on a class, class member, or parameter.\n         * @param metadataKey The key for the metadata entry.\n         * @param metadataValue The value for the metadata entry.\n         * @returns A decorator function.\n         * @remarks\n         * If `metadataKey` is already defined for the target and target key, the\n         * metadataValue for that key will be overwritten.\n         * @example\n         *\n         *     // constructor\n         *     @Reflect.metadata(key, value)\n         *     class Example {\n         *     }\n         *\n         *     // property (on constructor, TypeScript only)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         static staticProperty;\n         *     }\n         *\n         *     // property (on prototype, TypeScript only)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         property;\n         *     }\n         *\n         *     // method (on constructor)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         static staticMethod() { }\n         *     }\n         *\n         *     // method (on prototype)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         method() { }\n         *     }\n         *\n         */\n        function metadata(metadataKey, metadataValue) {\n            function decorator(target, propertyKey) {\n                if (!IsObject(target))\n                    throw new TypeError();\n                if (!IsUndefined(propertyKey) && !IsPropertyKey(propertyKey))\n                    throw new TypeError();\n                OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, propertyKey);\n            }\n            return decorator;\n        }\n        exporter(\"metadata\", metadata);\n        /**\n         * Define a unique metadata entry on the target.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param metadataValue A value that contains attached metadata.\n         * @param target The target object on which to define metadata.\n         * @param propertyKey (Optional) The property key for the target.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example);\n         *\n         *     // property (on constructor)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example.prototype, \"method\");\n         *\n         *     // decorator factory as metadata-producing annotation.\n         *     function MyAnnotation(options): Decorator {\n         *         return (target, key?) => Reflect.defineMetadata(\"custom:annotation\", options, target, key);\n         *     }\n         *\n         */\n        function defineMetadata(metadataKey, metadataValue, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, propertyKey);\n        }\n        exporter(\"defineMetadata\", defineMetadata);\n        /**\n         * Gets a value indicating whether the target object or its prototype chain has the provided metadata key defined.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns `true` if the metadata key was defined on the target object or its prototype chain; otherwise, `false`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function hasMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryHasMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"hasMetadata\", hasMetadata);\n        /**\n         * Gets a value indicating whether the target object has the provided metadata key defined.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns `true` if the metadata key was defined on the target object; otherwise, `false`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function hasOwnMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryHasOwnMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"hasOwnMetadata\", hasOwnMetadata);\n        /**\n         * Gets the metadata value for the provided metadata key on the target object or its prototype chain.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns The metadata value for the metadata key if found; otherwise, `undefined`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function getMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryGetMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"getMetadata\", getMetadata);\n        /**\n         * Gets the metadata value for the provided metadata key on the target object.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns The metadata value for the metadata key if found; otherwise, `undefined`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function getOwnMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryGetOwnMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"getOwnMetadata\", getOwnMetadata);\n        /**\n         * Gets the metadata keys defined on the target object or its prototype chain.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns An array of unique metadata keys.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getMetadataKeys(Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getMetadataKeys(Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getMetadataKeys(Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getMetadataKeys(Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getMetadataKeys(Example.prototype, \"method\");\n         *\n         */\n        function getMetadataKeys(target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryMetadataKeys(target, propertyKey);\n        }\n        exporter(\"getMetadataKeys\", getMetadataKeys);\n        /**\n         * Gets the unique metadata keys defined on the target object.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns An array of unique metadata keys.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getOwnMetadataKeys(Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getOwnMetadataKeys(Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getOwnMetadataKeys(Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getOwnMetadataKeys(Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getOwnMetadataKeys(Example.prototype, \"method\");\n         *\n         */\n        function getOwnMetadataKeys(target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryOwnMetadataKeys(target, propertyKey);\n        }\n        exporter(\"getOwnMetadataKeys\", getOwnMetadataKeys);\n        /**\n         * Deletes the metadata entry from the target object with the provided key.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns `true` if the metadata entry was found and deleted; otherwise, false.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function deleteMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            var metadataMap = GetOrCreateMetadataMap(target, propertyKey, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return false;\n            if (!metadataMap.delete(metadataKey))\n                return false;\n            if (metadataMap.size > 0)\n                return true;\n            var targetMetadata = Metadata.get(target);\n            targetMetadata.delete(propertyKey);\n            if (targetMetadata.size > 0)\n                return true;\n            Metadata.delete(target);\n            return true;\n        }\n        exporter(\"deleteMetadata\", deleteMetadata);\n        function DecorateConstructor(decorators, target) {\n            for (var i = decorators.length - 1; i >= 0; --i) {\n                var decorator = decorators[i];\n                var decorated = decorator(target);\n                if (!IsUndefined(decorated) && !IsNull(decorated)) {\n                    if (!IsConstructor(decorated))\n                        throw new TypeError();\n                    target = decorated;\n                }\n            }\n            return target;\n        }\n        function DecorateProperty(decorators, target, propertyKey, descriptor) {\n            for (var i = decorators.length - 1; i >= 0; --i) {\n                var decorator = decorators[i];\n                var decorated = decorator(target, propertyKey, descriptor);\n                if (!IsUndefined(decorated) && !IsNull(decorated)) {\n                    if (!IsObject(decorated))\n                        throw new TypeError();\n                    descriptor = decorated;\n                }\n            }\n            return descriptor;\n        }\n        function GetOrCreateMetadataMap(O, P, Create) {\n            var targetMetadata = Metadata.get(O);\n            if (IsUndefined(targetMetadata)) {\n                if (!Create)\n                    return undefined;\n                targetMetadata = new _Map();\n                Metadata.set(O, targetMetadata);\n            }\n            var metadataMap = targetMetadata.get(P);\n            if (IsUndefined(metadataMap)) {\n                if (!Create)\n                    return undefined;\n                metadataMap = new _Map();\n                targetMetadata.set(P, metadataMap);\n            }\n            return metadataMap;\n        }\n        // 3.1.1.1 OrdinaryHasMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryhasmetadata\n        function OrdinaryHasMetadata(MetadataKey, O, P) {\n            var hasOwn = OrdinaryHasOwnMetadata(MetadataKey, O, P);\n            if (hasOwn)\n                return true;\n            var parent = OrdinaryGetPrototypeOf(O);\n            if (!IsNull(parent))\n                return OrdinaryHasMetadata(MetadataKey, parent, P);\n            return false;\n        }\n        // 3.1.2.1 OrdinaryHasOwnMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryhasownmetadata\n        function OrdinaryHasOwnMetadata(MetadataKey, O, P) {\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return false;\n            return ToBoolean(metadataMap.has(MetadataKey));\n        }\n        // 3.1.3.1 OrdinaryGetMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarygetmetadata\n        function OrdinaryGetMetadata(MetadataKey, O, P) {\n            var hasOwn = OrdinaryHasOwnMetadata(MetadataKey, O, P);\n            if (hasOwn)\n                return OrdinaryGetOwnMetadata(MetadataKey, O, P);\n            var parent = OrdinaryGetPrototypeOf(O);\n            if (!IsNull(parent))\n                return OrdinaryGetMetadata(MetadataKey, parent, P);\n            return undefined;\n        }\n        // 3.1.4.1 OrdinaryGetOwnMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarygetownmetadata\n        function OrdinaryGetOwnMetadata(MetadataKey, O, P) {\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return undefined;\n            return metadataMap.get(MetadataKey);\n        }\n        // 3.1.5.1 OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarydefineownmetadata\n        function OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P) {\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ true);\n            metadataMap.set(MetadataKey, MetadataValue);\n        }\n        // 3.1.6.1 OrdinaryMetadataKeys(O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarymetadatakeys\n        function OrdinaryMetadataKeys(O, P) {\n            var ownKeys = OrdinaryOwnMetadataKeys(O, P);\n            var parent = OrdinaryGetPrototypeOf(O);\n            if (parent === null)\n                return ownKeys;\n            var parentKeys = OrdinaryMetadataKeys(parent, P);\n            if (parentKeys.length <= 0)\n                return ownKeys;\n            if (ownKeys.length <= 0)\n                return parentKeys;\n            var set = new _Set();\n            var keys = [];\n            for (var _i = 0, ownKeys_1 = ownKeys; _i < ownKeys_1.length; _i++) {\n                var key = ownKeys_1[_i];\n                var hasKey = set.has(key);\n                if (!hasKey) {\n                    set.add(key);\n                    keys.push(key);\n                }\n            }\n            for (var _a = 0, parentKeys_1 = parentKeys; _a < parentKeys_1.length; _a++) {\n                var key = parentKeys_1[_a];\n                var hasKey = set.has(key);\n                if (!hasKey) {\n                    set.add(key);\n                    keys.push(key);\n                }\n            }\n            return keys;\n        }\n        // 3.1.7.1 OrdinaryOwnMetadataKeys(O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryownmetadatakeys\n        function OrdinaryOwnMetadataKeys(O, P) {\n            var keys = [];\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return keys;\n            var keysObj = metadataMap.keys();\n            var iterator = GetIterator(keysObj);\n            var k = 0;\n            while (true) {\n                var next = IteratorStep(iterator);\n                if (!next) {\n                    keys.length = k;\n                    return keys;\n                }\n                var nextValue = IteratorValue(next);\n                try {\n                    keys[k] = nextValue;\n                }\n                catch (e) {\n                    try {\n                        IteratorClose(iterator);\n                    }\n                    finally {\n                        throw e;\n                    }\n                }\n                k++;\n            }\n        }\n        // 6 ECMAScript Data Typ0es and Values\n        // https://tc39.github.io/ecma262/#sec-ecmascript-data-types-and-values\n        function Type(x) {\n            if (x === null)\n                return 1 /* Null */;\n            switch (typeof x) {\n                case \"undefined\": return 0 /* Undefined */;\n                case \"boolean\": return 2 /* Boolean */;\n                case \"string\": return 3 /* String */;\n                case \"symbol\": return 4 /* Symbol */;\n                case \"number\": return 5 /* Number */;\n                case \"object\": return x === null ? 1 /* Null */ : 6 /* Object */;\n                default: return 6 /* Object */;\n            }\n        }\n        // 6.1.1 The Undefined Type\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-undefined-type\n        function IsUndefined(x) {\n            return x === undefined;\n        }\n        // 6.1.2 The Null Type\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-null-type\n        function IsNull(x) {\n            return x === null;\n        }\n        // 6.1.5 The Symbol Type\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-symbol-type\n        function IsSymbol(x) {\n            return typeof x === \"symbol\";\n        }\n        // 6.1.7 The Object Type\n        // https://tc39.github.io/ecma262/#sec-object-type\n        function IsObject(x) {\n            return typeof x === \"object\" ? x !== null : typeof x === \"function\";\n        }\n        // 7.1 Type Conversion\n        // https://tc39.github.io/ecma262/#sec-type-conversion\n        // 7.1.1 ToPrimitive(input [, PreferredType])\n        // https://tc39.github.io/ecma262/#sec-toprimitive\n        function ToPrimitive(input, PreferredType) {\n            switch (Type(input)) {\n                case 0 /* Undefined */: return input;\n                case 1 /* Null */: return input;\n                case 2 /* Boolean */: return input;\n                case 3 /* String */: return input;\n                case 4 /* Symbol */: return input;\n                case 5 /* Number */: return input;\n            }\n            var hint = PreferredType === 3 /* String */ ? \"string\" : PreferredType === 5 /* Number */ ? \"number\" : \"default\";\n            var exoticToPrim = GetMethod(input, toPrimitiveSymbol);\n            if (exoticToPrim !== undefined) {\n                var result = exoticToPrim.call(input, hint);\n                if (IsObject(result))\n                    throw new TypeError();\n                return result;\n            }\n            return OrdinaryToPrimitive(input, hint === \"default\" ? \"number\" : hint);\n        }\n        // 7.1.1.1 OrdinaryToPrimitive(O, hint)\n        // https://tc39.github.io/ecma262/#sec-ordinarytoprimitive\n        function OrdinaryToPrimitive(O, hint) {\n            if (hint === \"string\") {\n                var toString_1 = O.toString;\n                if (IsCallable(toString_1)) {\n                    var result = toString_1.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n                var valueOf = O.valueOf;\n                if (IsCallable(valueOf)) {\n                    var result = valueOf.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n            }\n            else {\n                var valueOf = O.valueOf;\n                if (IsCallable(valueOf)) {\n                    var result = valueOf.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n                var toString_2 = O.toString;\n                if (IsCallable(toString_2)) {\n                    var result = toString_2.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n            }\n            throw new TypeError();\n        }\n        // 7.1.2 ToBoolean(argument)\n        // https://tc39.github.io/ecma262/2016/#sec-toboolean\n        function ToBoolean(argument) {\n            return !!argument;\n        }\n        // 7.1.12 ToString(argument)\n        // https://tc39.github.io/ecma262/#sec-tostring\n        function ToString(argument) {\n            return \"\" + argument;\n        }\n        // 7.1.14 ToPropertyKey(argument)\n        // https://tc39.github.io/ecma262/#sec-topropertykey\n        function ToPropertyKey(argument) {\n            var key = ToPrimitive(argument, 3 /* String */);\n            if (IsSymbol(key))\n                return key;\n            return ToString(key);\n        }\n        // 7.2 Testing and Comparison Operations\n        // https://tc39.github.io/ecma262/#sec-testing-and-comparison-operations\n        // 7.2.2 IsArray(argument)\n        // https://tc39.github.io/ecma262/#sec-isarray\n        function IsArray(argument) {\n            return Array.isArray\n                ? Array.isArray(argument)\n                : argument instanceof Object\n                    ? argument instanceof Array\n                    : Object.prototype.toString.call(argument) === \"[object Array]\";\n        }\n        // 7.2.3 IsCallable(argument)\n        // https://tc39.github.io/ecma262/#sec-iscallable\n        function IsCallable(argument) {\n            // NOTE: This is an approximation as we cannot check for [[Call]] internal method.\n            return typeof argument === \"function\";\n        }\n        // 7.2.4 IsConstructor(argument)\n        // https://tc39.github.io/ecma262/#sec-isconstructor\n        function IsConstructor(argument) {\n            // NOTE: This is an approximation as we cannot check for [[Construct]] internal method.\n            return typeof argument === \"function\";\n        }\n        // 7.2.7 IsPropertyKey(argument)\n        // https://tc39.github.io/ecma262/#sec-ispropertykey\n        function IsPropertyKey(argument) {\n            switch (Type(argument)) {\n                case 3 /* String */: return true;\n                case 4 /* Symbol */: return true;\n                default: return false;\n            }\n        }\n        // 7.3 Operations on Objects\n        // https://tc39.github.io/ecma262/#sec-operations-on-objects\n        // 7.3.9 GetMethod(V, P)\n        // https://tc39.github.io/ecma262/#sec-getmethod\n        function GetMethod(V, P) {\n            var func = V[P];\n            if (func === undefined || func === null)\n                return undefined;\n            if (!IsCallable(func))\n                throw new TypeError();\n            return func;\n        }\n        // 7.4 Operations on Iterator Objects\n        // https://tc39.github.io/ecma262/#sec-operations-on-iterator-objects\n        function GetIterator(obj) {\n            var method = GetMethod(obj, iteratorSymbol);\n            if (!IsCallable(method))\n                throw new TypeError(); // from Call\n            var iterator = method.call(obj);\n            if (!IsObject(iterator))\n                throw new TypeError();\n            return iterator;\n        }\n        // 7.4.4 IteratorValue(iterResult)\n        // https://tc39.github.io/ecma262/2016/#sec-iteratorvalue\n        function IteratorValue(iterResult) {\n            return iterResult.value;\n        }\n        // 7.4.5 IteratorStep(iterator)\n        // https://tc39.github.io/ecma262/#sec-iteratorstep\n        function IteratorStep(iterator) {\n            var result = iterator.next();\n            return result.done ? false : result;\n        }\n        // 7.4.6 IteratorClose(iterator, completion)\n        // https://tc39.github.io/ecma262/#sec-iteratorclose\n        function IteratorClose(iterator) {\n            var f = iterator[\"return\"];\n            if (f)\n                f.call(iterator);\n        }\n        // 9.1 Ordinary Object Internal Methods and Internal Slots\n        // https://tc39.github.io/ecma262/#sec-ordinary-object-internal-methods-and-internal-slots\n        // 9.1.1.1 OrdinaryGetPrototypeOf(O)\n        // https://tc39.github.io/ecma262/#sec-ordinarygetprototypeof\n        function OrdinaryGetPrototypeOf(O) {\n            var proto = Object.getPrototypeOf(O);\n            if (typeof O !== \"function\" || O === functionPrototype)\n                return proto;\n            // TypeScript doesn't set __proto__ in ES5, as it's non-standard.\n            // Try to determine the superclass constructor. Compatible implementations\n            // must either set __proto__ on a subclass constructor to the superclass constructor,\n            // or ensure each class has a valid `constructor` property on its prototype that\n            // points back to the constructor.\n            // If this is not the same as Function.[[Prototype]], then this is definately inherited.\n            // This is the case when in ES6 or when using __proto__ in a compatible browser.\n            if (proto !== functionPrototype)\n                return proto;\n            // If the super prototype is Object.prototype, null, or undefined, then we cannot determine the heritage.\n            var prototype = O.prototype;\n            var prototypeProto = prototype && Object.getPrototypeOf(prototype);\n            if (prototypeProto == null || prototypeProto === Object.prototype)\n                return proto;\n            // If the constructor was not a function, then we cannot determine the heritage.\n            var constructor = prototypeProto.constructor;\n            if (typeof constructor !== \"function\")\n                return proto;\n            // If we have some kind of self-reference, then we cannot determine the heritage.\n            if (constructor === O)\n                return proto;\n            // we have a pretty good guess at the heritage.\n            return constructor;\n        }\n        // naive Map shim\n        function CreateMapPolyfill() {\n            var cacheSentinel = {};\n            var arraySentinel = [];\n            var MapIterator = /** @class */ (function () {\n                function MapIterator(keys, values, selector) {\n                    this._index = 0;\n                    this._keys = keys;\n                    this._values = values;\n                    this._selector = selector;\n                }\n                MapIterator.prototype[\"@@iterator\"] = function () { return this; };\n                MapIterator.prototype[iteratorSymbol] = function () { return this; };\n                MapIterator.prototype.next = function () {\n                    var index = this._index;\n                    if (index >= 0 && index < this._keys.length) {\n                        var result = this._selector(this._keys[index], this._values[index]);\n                        if (index + 1 >= this._keys.length) {\n                            this._index = -1;\n                            this._keys = arraySentinel;\n                            this._values = arraySentinel;\n                        }\n                        else {\n                            this._index++;\n                        }\n                        return { value: result, done: false };\n                    }\n                    return { value: undefined, done: true };\n                };\n                MapIterator.prototype.throw = function (error) {\n                    if (this._index >= 0) {\n                        this._index = -1;\n                        this._keys = arraySentinel;\n                        this._values = arraySentinel;\n                    }\n                    throw error;\n                };\n                MapIterator.prototype.return = function (value) {\n                    if (this._index >= 0) {\n                        this._index = -1;\n                        this._keys = arraySentinel;\n                        this._values = arraySentinel;\n                    }\n                    return { value: value, done: true };\n                };\n                return MapIterator;\n            }());\n            return /** @class */ (function () {\n                function Map() {\n                    this._keys = [];\n                    this._values = [];\n                    this._cacheKey = cacheSentinel;\n                    this._cacheIndex = -2;\n                }\n                Object.defineProperty(Map.prototype, \"size\", {\n                    get: function () { return this._keys.length; },\n                    enumerable: true,\n                    configurable: true\n                });\n                Map.prototype.has = function (key) { return this._find(key, /*insert*/ false) >= 0; };\n                Map.prototype.get = function (key) {\n                    var index = this._find(key, /*insert*/ false);\n                    return index >= 0 ? this._values[index] : undefined;\n                };\n                Map.prototype.set = function (key, value) {\n                    var index = this._find(key, /*insert*/ true);\n                    this._values[index] = value;\n                    return this;\n                };\n                Map.prototype.delete = function (key) {\n                    var index = this._find(key, /*insert*/ false);\n                    if (index >= 0) {\n                        var size = this._keys.length;\n                        for (var i = index + 1; i < size; i++) {\n                            this._keys[i - 1] = this._keys[i];\n                            this._values[i - 1] = this._values[i];\n                        }\n                        this._keys.length--;\n                        this._values.length--;\n                        if (key === this._cacheKey) {\n                            this._cacheKey = cacheSentinel;\n                            this._cacheIndex = -2;\n                        }\n                        return true;\n                    }\n                    return false;\n                };\n                Map.prototype.clear = function () {\n                    this._keys.length = 0;\n                    this._values.length = 0;\n                    this._cacheKey = cacheSentinel;\n                    this._cacheIndex = -2;\n                };\n                Map.prototype.keys = function () { return new MapIterator(this._keys, this._values, getKey); };\n                Map.prototype.values = function () { return new MapIterator(this._keys, this._values, getValue); };\n                Map.prototype.entries = function () { return new MapIterator(this._keys, this._values, getEntry); };\n                Map.prototype[\"@@iterator\"] = function () { return this.entries(); };\n                Map.prototype[iteratorSymbol] = function () { return this.entries(); };\n                Map.prototype._find = function (key, insert) {\n                    if (this._cacheKey !== key) {\n                        this._cacheIndex = this._keys.indexOf(this._cacheKey = key);\n                    }\n                    if (this._cacheIndex < 0 && insert) {\n                        this._cacheIndex = this._keys.length;\n                        this._keys.push(key);\n                        this._values.push(undefined);\n                    }\n                    return this._cacheIndex;\n                };\n                return Map;\n            }());\n            function getKey(key, _) {\n                return key;\n            }\n            function getValue(_, value) {\n                return value;\n            }\n            function getEntry(key, value) {\n                return [key, value];\n            }\n        }\n        // naive Set shim\n        function CreateSetPolyfill() {\n            return /** @class */ (function () {\n                function Set() {\n                    this._map = new _Map();\n                }\n                Object.defineProperty(Set.prototype, \"size\", {\n                    get: function () { return this._map.size; },\n                    enumerable: true,\n                    configurable: true\n                });\n                Set.prototype.has = function (value) { return this._map.has(value); };\n                Set.prototype.add = function (value) { return this._map.set(value, value), this; };\n                Set.prototype.delete = function (value) { return this._map.delete(value); };\n                Set.prototype.clear = function () { this._map.clear(); };\n                Set.prototype.keys = function () { return this._map.keys(); };\n                Set.prototype.values = function () { return this._map.values(); };\n                Set.prototype.entries = function () { return this._map.entries(); };\n                Set.prototype[\"@@iterator\"] = function () { return this.keys(); };\n                Set.prototype[iteratorSymbol] = function () { return this.keys(); };\n                return Set;\n            }());\n        }\n        // naive WeakMap shim\n        function CreateWeakMapPolyfill() {\n            var UUID_SIZE = 16;\n            var keys = HashMap.create();\n            var rootKey = CreateUniqueKey();\n            return /** @class */ (function () {\n                function WeakMap() {\n                    this._key = CreateUniqueKey();\n                }\n                WeakMap.prototype.has = function (target) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\n                    return table !== undefined ? HashMap.has(table, this._key) : false;\n                };\n                WeakMap.prototype.get = function (target) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\n                    return table !== undefined ? HashMap.get(table, this._key) : undefined;\n                };\n                WeakMap.prototype.set = function (target, value) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ true);\n                    table[this._key] = value;\n                    return this;\n                };\n                WeakMap.prototype.delete = function (target) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\n                    return table !== undefined ? delete table[this._key] : false;\n                };\n                WeakMap.prototype.clear = function () {\n                    // NOTE: not a real clear, just makes the previous data unreachable\n                    this._key = CreateUniqueKey();\n                };\n                return WeakMap;\n            }());\n            function CreateUniqueKey() {\n                var key;\n                do\n                    key = \"@@WeakMap@@\" + CreateUUID();\n                while (HashMap.has(keys, key));\n                keys[key] = true;\n                return key;\n            }\n            function GetOrCreateWeakMapTable(target, create) {\n                if (!hasOwn.call(target, rootKey)) {\n                    if (!create)\n                        return undefined;\n                    Object.defineProperty(target, rootKey, { value: HashMap.create() });\n                }\n                return target[rootKey];\n            }\n            function FillRandomBytes(buffer, size) {\n                for (var i = 0; i < size; ++i)\n                    buffer[i] = Math.random() * 0xff | 0;\n                return buffer;\n            }\n            function GenRandomBytes(size) {\n                if (typeof Uint8Array === \"function\") {\n                    if (typeof crypto !== \"undefined\")\n                        return crypto.getRandomValues(new Uint8Array(size));\n                    if (typeof msCrypto !== \"undefined\")\n                        return msCrypto.getRandomValues(new Uint8Array(size));\n                    return FillRandomBytes(new Uint8Array(size), size);\n                }\n                return FillRandomBytes(new Array(size), size);\n            }\n            function CreateUUID() {\n                var data = GenRandomBytes(UUID_SIZE);\n                // mark as random - RFC 4122 § 4.4\n                data[6] = data[6] & 0x4f | 0x40;\n                data[8] = data[8] & 0xbf | 0x80;\n                var result = \"\";\n                for (var offset = 0; offset < UUID_SIZE; ++offset) {\n                    var byte = data[offset];\n                    if (offset === 4 || offset === 6 || offset === 8)\n                        result += \"-\";\n                    if (byte < 16)\n                        result += \"0\";\n                    result += byte.toString(16).toLowerCase();\n                }\n                return result;\n            }\n        }\n        // uses a heuristic used by v8 and chakra to force an object into dictionary mode.\n        function MakeDictionary(obj) {\n            obj.__ = undefined;\n            delete obj.__;\n            return obj;\n        }\n    });\n})(Reflect || (Reflect = {}));\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EventDisposer = exports.Event = void 0;\nvar Event = /** @class */ (function () {\n    function Event() {\n        var _this = this;\n        this.event = { stack: [], index: 0 };\n        this.ended = false;\n        this.execute = function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            if (_this.ended)\n                throw new Error(\"event completed\");\n            for (var _a = 0, _b = _this.event.stack; _a < _b.length; _a++) {\n                var item = _b[_a];\n                item.execute.apply(item, args);\n            }\n        };\n        this.complete = function () {\n            if (_this.ended)\n                throw new Error(\"event completed\");\n            for (var _i = 0, _a = _this.event.stack; _i < _a.length; _i++) {\n                var item = _a[_i];\n                if (item.complete)\n                    item.complete();\n            }\n            _this.allUnsubscribe();\n            _this.ended = true;\n        };\n        this.error = function (e) {\n            if (_this.ended)\n                throw new Error(\"event completed\");\n            for (var _i = 0, _a = _this.event.stack; _i < _a.length; _i++) {\n                var item = _a[_i];\n                if (item.error)\n                    item.error(e);\n            }\n            _this.allUnsubscribe();\n        };\n        this.allUnsubscribe = function () {\n            if (_this.ended)\n                throw new Error(\"event completed\");\n            _this.event = { stack: [], index: 0 };\n        };\n        this.subscribe = function (execute, complete, error) {\n            if (_this.ended)\n                throw new Error(\"event completed\");\n            var id = _this.event.index;\n            _this.event.stack.push({ execute: execute, id: id, complete: complete, error: error });\n            _this.event.index++;\n            var unSubscribe = function () {\n                _this.event.stack = _this.event.stack.filter(function (item) { return item.id !== id && item; });\n            };\n            var disposer = function (disposer) {\n                disposer.push(unSubscribe);\n            };\n            return { unSubscribe: unSubscribe, disposer: disposer };\n        };\n        this.once = function (execute, complete, error) {\n            var off = _this.subscribe(function () {\n                var args = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    args[_i] = arguments[_i];\n                }\n                off.unSubscribe();\n                execute.apply(void 0, args);\n            }, complete, error);\n        };\n        this.watch = function (cb, timeLimit) {\n            return new Promise(function (resolve, reject) {\n                var timeout = timeLimit &&\n                    setTimeout(function () {\n                        reject(\"Event watch timeout\");\n                    }, timeLimit);\n                var unSubscribe = _this.subscribe(function () {\n                    var args = [];\n                    for (var _i = 0; _i < arguments.length; _i++) {\n                        args[_i] = arguments[_i];\n                    }\n                    var done = cb.apply(void 0, args);\n                    if (done) {\n                        if (timeout)\n                            clearTimeout(timeout);\n                        unSubscribe();\n                        resolve(args);\n                    }\n                }).unSubscribe;\n            });\n        };\n        this.asPromise = function (timeLimit) {\n            return new Promise(function (resolve, reject) {\n                var timeout = timeLimit &&\n                    setTimeout(function () {\n                        reject(\"Event asPromise timeout\");\n                    }, timeLimit);\n                _this.once(function () {\n                    var args = [];\n                    for (var _i = 0; _i < arguments.length; _i++) {\n                        args[_i] = arguments[_i];\n                    }\n                    if (timeout)\n                        clearTimeout(timeout);\n                    resolve(args);\n                }, function () {\n                    if (timeout)\n                        clearTimeout(timeout);\n                    resolve([]);\n                }, function (err) {\n                    if (timeout)\n                        clearTimeout(timeout);\n                    reject(err);\n                });\n            });\n        };\n    }\n    Object.defineProperty(Event.prototype, \"returnTrigger\", {\n        get: function () {\n            var _a = this, execute = _a.execute, error = _a.error, complete = _a.complete;\n            return { execute: execute, error: error, complete: complete };\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Event.prototype, \"returnListener\", {\n        get: function () {\n            var _a = this, subscribe = _a.subscribe, once = _a.once, asPromise = _a.asPromise;\n            return { subscribe: subscribe, once: once, asPromise: asPromise };\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Event.prototype, \"length\", {\n        get: function () {\n            return this.event.stack.length;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return Event;\n}());\nexports.Event = Event;\nvar EventDisposer = /** @class */ (function () {\n    function EventDisposer() {\n        this._disposer = [];\n    }\n    EventDisposer.prototype.push = function (disposer) {\n        this._disposer.push(disposer);\n    };\n    EventDisposer.prototype.dispose = function () {\n        this._disposer.forEach(function (d) { return d(); });\n        this._disposer = [];\n    };\n    return EventDisposer;\n}());\nexports.EventDisposer = EventDisposer;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Buffer = void 0;\nvar core_1 = require(\"../../core\");\nfunction Buffer(length, event) {\n    var observable = new core_1.Event();\n    var pool = [];\n    var fulled = false;\n    event.subscribe(function () {\n        var e = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            e[_i] = arguments[_i];\n        }\n        if (!fulled && pool.length === length) {\n            pool.forEach(function (e) { return observable.execute.apply(observable, e); });\n            fulled = true;\n        }\n        if (fulled) {\n            observable.execute.apply(observable, e);\n        }\n        else {\n            pool.push(e);\n        }\n    });\n    var subscribe = observable.subscribe, asPromise = observable.asPromise, once = observable.once;\n    return { subscribe: subscribe, asPromise: asPromise, once: once };\n}\nexports.Buffer = Buffer;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar core_1 = require(\"../../core\");\nfunction Pack() {\n    var events = [];\n    var event = function () {\n        var e = new core_1.Event();\n        events.push(e);\n        return e;\n    };\n    var finishAll = function () {\n        events.forEach(function (e) { return e.allUnsubscribe(); });\n        events = [];\n    };\n    return { event: event, finishAll: finishAll };\n}\nexports.default = Pack;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar __1 = tslib_1.__importDefault(require(\"../../\"));\nvar Wait = /** @class */ (function () {\n    function Wait() {\n        this.candidates = {};\n    }\n    Wait.prototype.exist = function (id) {\n        return Object.keys(this.candidates).includes(id);\n    };\n    Wait.prototype.delete = function (kid) {\n        delete this.candidates[kid];\n    };\n    Wait.prototype.create = function (id, job) {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var event_1, result;\n            return tslib_1.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!this.exist(id)) return [3 /*break*/, 1];\n                        return [2 /*return*/, { exist: this.candidates[id] }];\n                    case 1:\n                        event_1 = new __1.default();\n                        this.candidates[id] = event_1;\n                        return [4 /*yield*/, job()];\n                    case 2:\n                        result = _a.sent();\n                        event_1.execute.apply(event_1, result);\n                        this.delete(id);\n                        return [2 /*return*/, { result: result }];\n                }\n            });\n        });\n    };\n    return Wait;\n}());\nexports.default = Wait;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar core_1 = require(\"./core\");\nexports.default = core_1.Event;\ntslib_1.__exportStar(require(\"./core\"), exports);\ntslib_1.__exportStar(require(\"./extensions/pack\"), exports);\ntslib_1.__exportStar(require(\"./extensions/wait\"), exports);\ntslib_1.__exportStar(require(\"./extensions/buffer\"), exports);\n//# sourceMappingURL=index.js.map","'use strict';\nconst os = require('os');\nconst tty = require('tty');\nconst hasFlag = require('has-flag');\n\nconst {env} = process;\n\nlet forceColor;\nif (hasFlag('no-color') ||\n\thasFlag('no-colors') ||\n\thasFlag('color=false') ||\n\thasFlag('color=never')) {\n\tforceColor = 0;\n} else if (hasFlag('color') ||\n\thasFlag('colors') ||\n\thasFlag('color=true') ||\n\thasFlag('color=always')) {\n\tforceColor = 1;\n}\n\nif ('FORCE_COLOR' in env) {\n\tif (env.FORCE_COLOR === 'true') {\n\t\tforceColor = 1;\n\t} else if (env.FORCE_COLOR === 'false') {\n\t\tforceColor = 0;\n\t} else {\n\t\tforceColor = env.FORCE_COLOR.length === 0 ? 1 : Math.min(parseInt(env.FORCE_COLOR, 10), 3);\n\t}\n}\n\nfunction translateLevel(level) {\n\tif (level === 0) {\n\t\treturn false;\n\t}\n\n\treturn {\n\t\tlevel,\n\t\thasBasic: true,\n\t\thas256: level >= 2,\n\t\thas16m: level >= 3\n\t};\n}\n\nfunction supportsColor(haveStream, streamIsTTY) {\n\tif (forceColor === 0) {\n\t\treturn 0;\n\t}\n\n\tif (hasFlag('color=16m') ||\n\t\thasFlag('color=full') ||\n\t\thasFlag('color=truecolor')) {\n\t\treturn 3;\n\t}\n\n\tif (hasFlag('color=256')) {\n\t\treturn 2;\n\t}\n\n\tif (haveStream && !streamIsTTY && forceColor === undefined) {\n\t\treturn 0;\n\t}\n\n\tconst min = forceColor || 0;\n\n\tif (env.TERM === 'dumb') {\n\t\treturn min;\n\t}\n\n\tif (process.platform === 'win32') {\n\t\t// Windows 10 build 10586 is the first Windows release that supports 256 colors.\n\t\t// Windows 10 build 14931 is the first release that supports 16m/TrueColor.\n\t\tconst osRelease = os.release().split('.');\n\t\tif (\n\t\t\tNumber(osRelease[0]) >= 10 &&\n\t\t\tNumber(osRelease[2]) >= 10586\n\t\t) {\n\t\t\treturn Number(osRelease[2]) >= 14931 ? 3 : 2;\n\t\t}\n\n\t\treturn 1;\n\t}\n\n\tif ('CI' in env) {\n\t\tif (['TRAVIS', 'CIRCLECI', 'APPVEYOR', 'GITLAB_CI', 'GITHUB_ACTIONS', 'BUILDKITE'].some(sign => sign in env) || env.CI_NAME === 'codeship') {\n\t\t\treturn 1;\n\t\t}\n\n\t\treturn min;\n\t}\n\n\tif ('TEAMCITY_VERSION' in env) {\n\t\treturn /^(9\\.(0*[1-9]\\d*)\\.|\\d{2,}\\.)/.test(env.TEAMCITY_VERSION) ? 1 : 0;\n\t}\n\n\tif (env.COLORTERM === 'truecolor') {\n\t\treturn 3;\n\t}\n\n\tif ('TERM_PROGRAM' in env) {\n\t\tconst version = parseInt((env.TERM_PROGRAM_VERSION || '').split('.')[0], 10);\n\n\t\tswitch (env.TERM_PROGRAM) {\n\t\t\tcase 'iTerm.app':\n\t\t\t\treturn version >= 3 ? 3 : 2;\n\t\t\tcase 'Apple_Terminal':\n\t\t\t\treturn 2;\n\t\t\t// No default\n\t\t}\n\t}\n\n\tif (/-256(color)?$/i.test(env.TERM)) {\n\t\treturn 2;\n\t}\n\n\tif (/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(env.TERM)) {\n\t\treturn 1;\n\t}\n\n\tif ('COLORTERM' in env) {\n\t\treturn 1;\n\t}\n\n\treturn min;\n}\n\nfunction getSupportLevel(stream) {\n\tconst level = supportsColor(stream, stream && stream.isTTY);\n\treturn translateLevel(level);\n}\n\nmodule.exports = {\n\tsupportsColor: getSupportLevel,\n\tstdout: translateLevel(supportsColor(true, tty.isatty(1))),\n\tstderr: translateLevel(supportsColor(true, tty.isatty(2)))\n};\n","/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n        desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n    if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n    return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n","'use strict';\n\nconst { createSlicedTable } = require('./src/create-table');\nconst crc32By8 = require('./src/crc32-by-8');\n\nconst CRC32C_LOOKUP = createSlicedTable(0x82f63b78);\n\nmodule.exports = crc32c;\n\n/**\n * Compute CRC32C using slicing-by-n algorithm.\n * @param {Buffer|string} source\n * @returns {number}\n */\nfunction crc32c(source) {\n  const buf = Buffer.isBuffer(source) ? source : Buffer.from(source);\n\n  return (crc32By8(CRC32C_LOOKUP, buf, 0xffffffff, 0) ^ 0xffffffff) >>> 0;\n}\n","'use strict';\n\nmodule.exports = crc32;\n\n/**\n * @param {Array<number[]>} table Lookup table.\n * @param {Buffer} buf\n * @param {number} input Source CRC code.\n * @param {number} offset\n * @returns {number}\n */\nfunction crc32(table, buf, input, offset) {\n  let crc = input;\n\n  for (let index = offset; index < buf.length; index += 1) {\n    const byte = buf[index];\n    crc = table[0][(crc ^ byte) & 0xff] ^ (crc >>> 8);\n  }\n\n  return crc;\n}\n","'use strict';\n\nconst crc32By1 = require('./crc32-by-1');\n\nmodule.exports = crc32;\n\n/**\n * @private\n * @param {Array<number[]>} table Lookup table.\n * @param {Buffer} buf Source data.\n * @param {number} input\n * @param {number} offset\n * @returns {number}\n */\nfunction crc32(table, buf, input, offset) {\n  let pointer = offset;\n  let crc = input;\n\n  for (let i = pointer; i + 4 < buf.length; i += 4) {\n    const byte = buf.readUInt32LE(i) ^ crc;\n\n    crc =\n      table[0][(byte >>> 24) & 0xff] ^\n      table[1][(byte >>> 16) & 0xff] ^\n      table[2][(byte >>> 8) & 0xff] ^\n      table[3][byte & 0xff];\n    pointer += 4;\n  }\n\n  return crc32By1(table, buf, crc, pointer);\n}\n","'use strict';\n\nconst crc32By4 = require('./crc32-by-4');\n\nmodule.exports = crc32;\n\n/**\n * @private\n * @param {Array<number[]>} table Lookup table.\n * @param {Buffer} buf Source data.\n * @param {number} input\n * @param {number} offset\n * @returns {number}\n */\nfunction crc32(table, buf, input, offset) {\n  let pointer = offset;\n  let crc = input;\n\n  for (let i = pointer; i + 8 < buf.length; i += 8) {\n    const byte1 = buf.readUInt32LE(i) ^ crc;\n    const byte2 = buf.readUInt32LE(i + 4);\n\n    crc =\n      table[0][(byte2 >>> 24) & 0xff] ^\n      table[1][(byte2 >>> 16) & 0xff] ^\n      table[2][(byte2 >>> 8) & 0xff] ^\n      table[3][byte2 & 0xff] ^\n      table[4][(byte1 >>> 24) & 0xff] ^\n      table[5][(byte1 >>> 16) & 0xff] ^\n      table[6][(byte1 >>> 8) & 0xff] ^\n      table[7][byte1 & 0xff];\n    pointer += 8;\n  }\n\n  return crc32By4(table, buf, crc, pointer);\n}\n","'use strict';\n\nmodule.exports = {\n  createTable,\n  createSlicedTable,\n};\n\n/**\n * Create classic lookup table for provided CRC polynom.\n * @param {number} polynom\n * @returns {number[]}\n */\nfunction createTable(polynom) {\n  const table = new Uint32Array(256);\n\n  for (let i = 0; i < table.length; i += 1) {\n    let crc = i;\n\n    for (let j = 0; j < 8; j += 1) {\n      // eslint-disable-next-line no-bitwise\n      crc = crc & 1 ? (crc >>> 1) ^ polynom : crc >>> 1;\n    }\n\n    table[i] = crc;\n  }\n\n  return table;\n}\n\n/**\n * Create lookup table for Slicing By N algorithm.\n * @param {number} polynom\n * @returns {Array<number[]>}\n */\nfunction createSlicedTable(polynom) {\n  const lookup = new Array(8);\n  const table = createTable(polynom);\n\n  lookup[0] = table;\n\n  for (let slice = 1; slice < lookup.length; slice += 1) {\n    lookup[slice] = new Uint32Array(256);\n\n    for (let i = 0; i < 256; i += 1) {\n      lookup[slice][i] =\n        // eslint-disable-next-line no-bitwise\n        (lookup[slice - 1][i] >>> 8) ^ lookup[0][lookup[slice - 1][i] & 0xff];\n    }\n  }\n\n  return lookup;\n}\n","(function(nacl) {\n'use strict';\n\n// Ported in 2014 by Dmitry Chestnykh and Devi Mandiri.\n// Public domain.\n//\n// Implementation derived from TweetNaCl version 20140427.\n// See for details: http://tweetnacl.cr.yp.to/\n\nvar gf = function(init) {\n  var i, r = new Float64Array(16);\n  if (init) for (i = 0; i < init.length; i++) r[i] = init[i];\n  return r;\n};\n\n//  Pluggable, initialized in high-level API below.\nvar randombytes = function(/* x, n */) { throw new Error('no PRNG'); };\n\nvar _0 = new Uint8Array(16);\nvar _9 = new Uint8Array(32); _9[0] = 9;\n\nvar gf0 = gf(),\n    gf1 = gf([1]),\n    _121665 = gf([0xdb41, 1]),\n    D = gf([0x78a3, 0x1359, 0x4dca, 0x75eb, 0xd8ab, 0x4141, 0x0a4d, 0x0070, 0xe898, 0x7779, 0x4079, 0x8cc7, 0xfe73, 0x2b6f, 0x6cee, 0x5203]),\n    D2 = gf([0xf159, 0x26b2, 0x9b94, 0xebd6, 0xb156, 0x8283, 0x149a, 0x00e0, 0xd130, 0xeef3, 0x80f2, 0x198e, 0xfce7, 0x56df, 0xd9dc, 0x2406]),\n    X = gf([0xd51a, 0x8f25, 0x2d60, 0xc956, 0xa7b2, 0x9525, 0xc760, 0x692c, 0xdc5c, 0xfdd6, 0xe231, 0xc0a4, 0x53fe, 0xcd6e, 0x36d3, 0x2169]),\n    Y = gf([0x6658, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666, 0x6666]),\n    I = gf([0xa0b0, 0x4a0e, 0x1b27, 0xc4ee, 0xe478, 0xad2f, 0x1806, 0x2f43, 0xd7a7, 0x3dfb, 0x0099, 0x2b4d, 0xdf0b, 0x4fc1, 0x2480, 0x2b83]);\n\nfunction ts64(x, i, h, l) {\n  x[i]   = (h >> 24) & 0xff;\n  x[i+1] = (h >> 16) & 0xff;\n  x[i+2] = (h >>  8) & 0xff;\n  x[i+3] = h & 0xff;\n  x[i+4] = (l >> 24)  & 0xff;\n  x[i+5] = (l >> 16)  & 0xff;\n  x[i+6] = (l >>  8)  & 0xff;\n  x[i+7] = l & 0xff;\n}\n\nfunction vn(x, xi, y, yi, n) {\n  var i,d = 0;\n  for (i = 0; i < n; i++) d |= x[xi+i]^y[yi+i];\n  return (1 & ((d - 1) >>> 8)) - 1;\n}\n\nfunction crypto_verify_16(x, xi, y, yi) {\n  return vn(x,xi,y,yi,16);\n}\n\nfunction crypto_verify_32(x, xi, y, yi) {\n  return vn(x,xi,y,yi,32);\n}\n\nfunction core_salsa20(o, p, k, c) {\n  var j0  = c[ 0] & 0xff | (c[ 1] & 0xff)<<8 | (c[ 2] & 0xff)<<16 | (c[ 3] & 0xff)<<24,\n      j1  = k[ 0] & 0xff | (k[ 1] & 0xff)<<8 | (k[ 2] & 0xff)<<16 | (k[ 3] & 0xff)<<24,\n      j2  = k[ 4] & 0xff | (k[ 5] & 0xff)<<8 | (k[ 6] & 0xff)<<16 | (k[ 7] & 0xff)<<24,\n      j3  = k[ 8] & 0xff | (k[ 9] & 0xff)<<8 | (k[10] & 0xff)<<16 | (k[11] & 0xff)<<24,\n      j4  = k[12] & 0xff | (k[13] & 0xff)<<8 | (k[14] & 0xff)<<16 | (k[15] & 0xff)<<24,\n      j5  = c[ 4] & 0xff | (c[ 5] & 0xff)<<8 | (c[ 6] & 0xff)<<16 | (c[ 7] & 0xff)<<24,\n      j6  = p[ 0] & 0xff | (p[ 1] & 0xff)<<8 | (p[ 2] & 0xff)<<16 | (p[ 3] & 0xff)<<24,\n      j7  = p[ 4] & 0xff | (p[ 5] & 0xff)<<8 | (p[ 6] & 0xff)<<16 | (p[ 7] & 0xff)<<24,\n      j8  = p[ 8] & 0xff | (p[ 9] & 0xff)<<8 | (p[10] & 0xff)<<16 | (p[11] & 0xff)<<24,\n      j9  = p[12] & 0xff | (p[13] & 0xff)<<8 | (p[14] & 0xff)<<16 | (p[15] & 0xff)<<24,\n      j10 = c[ 8] & 0xff | (c[ 9] & 0xff)<<8 | (c[10] & 0xff)<<16 | (c[11] & 0xff)<<24,\n      j11 = k[16] & 0xff | (k[17] & 0xff)<<8 | (k[18] & 0xff)<<16 | (k[19] & 0xff)<<24,\n      j12 = k[20] & 0xff | (k[21] & 0xff)<<8 | (k[22] & 0xff)<<16 | (k[23] & 0xff)<<24,\n      j13 = k[24] & 0xff | (k[25] & 0xff)<<8 | (k[26] & 0xff)<<16 | (k[27] & 0xff)<<24,\n      j14 = k[28] & 0xff | (k[29] & 0xff)<<8 | (k[30] & 0xff)<<16 | (k[31] & 0xff)<<24,\n      j15 = c[12] & 0xff | (c[13] & 0xff)<<8 | (c[14] & 0xff)<<16 | (c[15] & 0xff)<<24;\n\n  var x0 = j0, x1 = j1, x2 = j2, x3 = j3, x4 = j4, x5 = j5, x6 = j6, x7 = j7,\n      x8 = j8, x9 = j9, x10 = j10, x11 = j11, x12 = j12, x13 = j13, x14 = j14,\n      x15 = j15, u;\n\n  for (var i = 0; i < 20; i += 2) {\n    u = x0 + x12 | 0;\n    x4 ^= u<<7 | u>>>(32-7);\n    u = x4 + x0 | 0;\n    x8 ^= u<<9 | u>>>(32-9);\n    u = x8 + x4 | 0;\n    x12 ^= u<<13 | u>>>(32-13);\n    u = x12 + x8 | 0;\n    x0 ^= u<<18 | u>>>(32-18);\n\n    u = x5 + x1 | 0;\n    x9 ^= u<<7 | u>>>(32-7);\n    u = x9 + x5 | 0;\n    x13 ^= u<<9 | u>>>(32-9);\n    u = x13 + x9 | 0;\n    x1 ^= u<<13 | u>>>(32-13);\n    u = x1 + x13 | 0;\n    x5 ^= u<<18 | u>>>(32-18);\n\n    u = x10 + x6 | 0;\n    x14 ^= u<<7 | u>>>(32-7);\n    u = x14 + x10 | 0;\n    x2 ^= u<<9 | u>>>(32-9);\n    u = x2 + x14 | 0;\n    x6 ^= u<<13 | u>>>(32-13);\n    u = x6 + x2 | 0;\n    x10 ^= u<<18 | u>>>(32-18);\n\n    u = x15 + x11 | 0;\n    x3 ^= u<<7 | u>>>(32-7);\n    u = x3 + x15 | 0;\n    x7 ^= u<<9 | u>>>(32-9);\n    u = x7 + x3 | 0;\n    x11 ^= u<<13 | u>>>(32-13);\n    u = x11 + x7 | 0;\n    x15 ^= u<<18 | u>>>(32-18);\n\n    u = x0 + x3 | 0;\n    x1 ^= u<<7 | u>>>(32-7);\n    u = x1 + x0 | 0;\n    x2 ^= u<<9 | u>>>(32-9);\n    u = x2 + x1 | 0;\n    x3 ^= u<<13 | u>>>(32-13);\n    u = x3 + x2 | 0;\n    x0 ^= u<<18 | u>>>(32-18);\n\n    u = x5 + x4 | 0;\n    x6 ^= u<<7 | u>>>(32-7);\n    u = x6 + x5 | 0;\n    x7 ^= u<<9 | u>>>(32-9);\n    u = x7 + x6 | 0;\n    x4 ^= u<<13 | u>>>(32-13);\n    u = x4 + x7 | 0;\n    x5 ^= u<<18 | u>>>(32-18);\n\n    u = x10 + x9 | 0;\n    x11 ^= u<<7 | u>>>(32-7);\n    u = x11 + x10 | 0;\n    x8 ^= u<<9 | u>>>(32-9);\n    u = x8 + x11 | 0;\n    x9 ^= u<<13 | u>>>(32-13);\n    u = x9 + x8 | 0;\n    x10 ^= u<<18 | u>>>(32-18);\n\n    u = x15 + x14 | 0;\n    x12 ^= u<<7 | u>>>(32-7);\n    u = x12 + x15 | 0;\n    x13 ^= u<<9 | u>>>(32-9);\n    u = x13 + x12 | 0;\n    x14 ^= u<<13 | u>>>(32-13);\n    u = x14 + x13 | 0;\n    x15 ^= u<<18 | u>>>(32-18);\n  }\n   x0 =  x0 +  j0 | 0;\n   x1 =  x1 +  j1 | 0;\n   x2 =  x2 +  j2 | 0;\n   x3 =  x3 +  j3 | 0;\n   x4 =  x4 +  j4 | 0;\n   x5 =  x5 +  j5 | 0;\n   x6 =  x6 +  j6 | 0;\n   x7 =  x7 +  j7 | 0;\n   x8 =  x8 +  j8 | 0;\n   x9 =  x9 +  j9 | 0;\n  x10 = x10 + j10 | 0;\n  x11 = x11 + j11 | 0;\n  x12 = x12 + j12 | 0;\n  x13 = x13 + j13 | 0;\n  x14 = x14 + j14 | 0;\n  x15 = x15 + j15 | 0;\n\n  o[ 0] = x0 >>>  0 & 0xff;\n  o[ 1] = x0 >>>  8 & 0xff;\n  o[ 2] = x0 >>> 16 & 0xff;\n  o[ 3] = x0 >>> 24 & 0xff;\n\n  o[ 4] = x1 >>>  0 & 0xff;\n  o[ 5] = x1 >>>  8 & 0xff;\n  o[ 6] = x1 >>> 16 & 0xff;\n  o[ 7] = x1 >>> 24 & 0xff;\n\n  o[ 8] = x2 >>>  0 & 0xff;\n  o[ 9] = x2 >>>  8 & 0xff;\n  o[10] = x2 >>> 16 & 0xff;\n  o[11] = x2 >>> 24 & 0xff;\n\n  o[12] = x3 >>>  0 & 0xff;\n  o[13] = x3 >>>  8 & 0xff;\n  o[14] = x3 >>> 16 & 0xff;\n  o[15] = x3 >>> 24 & 0xff;\n\n  o[16] = x4 >>>  0 & 0xff;\n  o[17] = x4 >>>  8 & 0xff;\n  o[18] = x4 >>> 16 & 0xff;\n  o[19] = x4 >>> 24 & 0xff;\n\n  o[20] = x5 >>>  0 & 0xff;\n  o[21] = x5 >>>  8 & 0xff;\n  o[22] = x5 >>> 16 & 0xff;\n  o[23] = x5 >>> 24 & 0xff;\n\n  o[24] = x6 >>>  0 & 0xff;\n  o[25] = x6 >>>  8 & 0xff;\n  o[26] = x6 >>> 16 & 0xff;\n  o[27] = x6 >>> 24 & 0xff;\n\n  o[28] = x7 >>>  0 & 0xff;\n  o[29] = x7 >>>  8 & 0xff;\n  o[30] = x7 >>> 16 & 0xff;\n  o[31] = x7 >>> 24 & 0xff;\n\n  o[32] = x8 >>>  0 & 0xff;\n  o[33] = x8 >>>  8 & 0xff;\n  o[34] = x8 >>> 16 & 0xff;\n  o[35] = x8 >>> 24 & 0xff;\n\n  o[36] = x9 >>>  0 & 0xff;\n  o[37] = x9 >>>  8 & 0xff;\n  o[38] = x9 >>> 16 & 0xff;\n  o[39] = x9 >>> 24 & 0xff;\n\n  o[40] = x10 >>>  0 & 0xff;\n  o[41] = x10 >>>  8 & 0xff;\n  o[42] = x10 >>> 16 & 0xff;\n  o[43] = x10 >>> 24 & 0xff;\n\n  o[44] = x11 >>>  0 & 0xff;\n  o[45] = x11 >>>  8 & 0xff;\n  o[46] = x11 >>> 16 & 0xff;\n  o[47] = x11 >>> 24 & 0xff;\n\n  o[48] = x12 >>>  0 & 0xff;\n  o[49] = x12 >>>  8 & 0xff;\n  o[50] = x12 >>> 16 & 0xff;\n  o[51] = x12 >>> 24 & 0xff;\n\n  o[52] = x13 >>>  0 & 0xff;\n  o[53] = x13 >>>  8 & 0xff;\n  o[54] = x13 >>> 16 & 0xff;\n  o[55] = x13 >>> 24 & 0xff;\n\n  o[56] = x14 >>>  0 & 0xff;\n  o[57] = x14 >>>  8 & 0xff;\n  o[58] = x14 >>> 16 & 0xff;\n  o[59] = x14 >>> 24 & 0xff;\n\n  o[60] = x15 >>>  0 & 0xff;\n  o[61] = x15 >>>  8 & 0xff;\n  o[62] = x15 >>> 16 & 0xff;\n  o[63] = x15 >>> 24 & 0xff;\n}\n\nfunction core_hsalsa20(o,p,k,c) {\n  var j0  = c[ 0] & 0xff | (c[ 1] & 0xff)<<8 | (c[ 2] & 0xff)<<16 | (c[ 3] & 0xff)<<24,\n      j1  = k[ 0] & 0xff | (k[ 1] & 0xff)<<8 | (k[ 2] & 0xff)<<16 | (k[ 3] & 0xff)<<24,\n      j2  = k[ 4] & 0xff | (k[ 5] & 0xff)<<8 | (k[ 6] & 0xff)<<16 | (k[ 7] & 0xff)<<24,\n      j3  = k[ 8] & 0xff | (k[ 9] & 0xff)<<8 | (k[10] & 0xff)<<16 | (k[11] & 0xff)<<24,\n      j4  = k[12] & 0xff | (k[13] & 0xff)<<8 | (k[14] & 0xff)<<16 | (k[15] & 0xff)<<24,\n      j5  = c[ 4] & 0xff | (c[ 5] & 0xff)<<8 | (c[ 6] & 0xff)<<16 | (c[ 7] & 0xff)<<24,\n      j6  = p[ 0] & 0xff | (p[ 1] & 0xff)<<8 | (p[ 2] & 0xff)<<16 | (p[ 3] & 0xff)<<24,\n      j7  = p[ 4] & 0xff | (p[ 5] & 0xff)<<8 | (p[ 6] & 0xff)<<16 | (p[ 7] & 0xff)<<24,\n      j8  = p[ 8] & 0xff | (p[ 9] & 0xff)<<8 | (p[10] & 0xff)<<16 | (p[11] & 0xff)<<24,\n      j9  = p[12] & 0xff | (p[13] & 0xff)<<8 | (p[14] & 0xff)<<16 | (p[15] & 0xff)<<24,\n      j10 = c[ 8] & 0xff | (c[ 9] & 0xff)<<8 | (c[10] & 0xff)<<16 | (c[11] & 0xff)<<24,\n      j11 = k[16] & 0xff | (k[17] & 0xff)<<8 | (k[18] & 0xff)<<16 | (k[19] & 0xff)<<24,\n      j12 = k[20] & 0xff | (k[21] & 0xff)<<8 | (k[22] & 0xff)<<16 | (k[23] & 0xff)<<24,\n      j13 = k[24] & 0xff | (k[25] & 0xff)<<8 | (k[26] & 0xff)<<16 | (k[27] & 0xff)<<24,\n      j14 = k[28] & 0xff | (k[29] & 0xff)<<8 | (k[30] & 0xff)<<16 | (k[31] & 0xff)<<24,\n      j15 = c[12] & 0xff | (c[13] & 0xff)<<8 | (c[14] & 0xff)<<16 | (c[15] & 0xff)<<24;\n\n  var x0 = j0, x1 = j1, x2 = j2, x3 = j3, x4 = j4, x5 = j5, x6 = j6, x7 = j7,\n      x8 = j8, x9 = j9, x10 = j10, x11 = j11, x12 = j12, x13 = j13, x14 = j14,\n      x15 = j15, u;\n\n  for (var i = 0; i < 20; i += 2) {\n    u = x0 + x12 | 0;\n    x4 ^= u<<7 | u>>>(32-7);\n    u = x4 + x0 | 0;\n    x8 ^= u<<9 | u>>>(32-9);\n    u = x8 + x4 | 0;\n    x12 ^= u<<13 | u>>>(32-13);\n    u = x12 + x8 | 0;\n    x0 ^= u<<18 | u>>>(32-18);\n\n    u = x5 + x1 | 0;\n    x9 ^= u<<7 | u>>>(32-7);\n    u = x9 + x5 | 0;\n    x13 ^= u<<9 | u>>>(32-9);\n    u = x13 + x9 | 0;\n    x1 ^= u<<13 | u>>>(32-13);\n    u = x1 + x13 | 0;\n    x5 ^= u<<18 | u>>>(32-18);\n\n    u = x10 + x6 | 0;\n    x14 ^= u<<7 | u>>>(32-7);\n    u = x14 + x10 | 0;\n    x2 ^= u<<9 | u>>>(32-9);\n    u = x2 + x14 | 0;\n    x6 ^= u<<13 | u>>>(32-13);\n    u = x6 + x2 | 0;\n    x10 ^= u<<18 | u>>>(32-18);\n\n    u = x15 + x11 | 0;\n    x3 ^= u<<7 | u>>>(32-7);\n    u = x3 + x15 | 0;\n    x7 ^= u<<9 | u>>>(32-9);\n    u = x7 + x3 | 0;\n    x11 ^= u<<13 | u>>>(32-13);\n    u = x11 + x7 | 0;\n    x15 ^= u<<18 | u>>>(32-18);\n\n    u = x0 + x3 | 0;\n    x1 ^= u<<7 | u>>>(32-7);\n    u = x1 + x0 | 0;\n    x2 ^= u<<9 | u>>>(32-9);\n    u = x2 + x1 | 0;\n    x3 ^= u<<13 | u>>>(32-13);\n    u = x3 + x2 | 0;\n    x0 ^= u<<18 | u>>>(32-18);\n\n    u = x5 + x4 | 0;\n    x6 ^= u<<7 | u>>>(32-7);\n    u = x6 + x5 | 0;\n    x7 ^= u<<9 | u>>>(32-9);\n    u = x7 + x6 | 0;\n    x4 ^= u<<13 | u>>>(32-13);\n    u = x4 + x7 | 0;\n    x5 ^= u<<18 | u>>>(32-18);\n\n    u = x10 + x9 | 0;\n    x11 ^= u<<7 | u>>>(32-7);\n    u = x11 + x10 | 0;\n    x8 ^= u<<9 | u>>>(32-9);\n    u = x8 + x11 | 0;\n    x9 ^= u<<13 | u>>>(32-13);\n    u = x9 + x8 | 0;\n    x10 ^= u<<18 | u>>>(32-18);\n\n    u = x15 + x14 | 0;\n    x12 ^= u<<7 | u>>>(32-7);\n    u = x12 + x15 | 0;\n    x13 ^= u<<9 | u>>>(32-9);\n    u = x13 + x12 | 0;\n    x14 ^= u<<13 | u>>>(32-13);\n    u = x14 + x13 | 0;\n    x15 ^= u<<18 | u>>>(32-18);\n  }\n\n  o[ 0] = x0 >>>  0 & 0xff;\n  o[ 1] = x0 >>>  8 & 0xff;\n  o[ 2] = x0 >>> 16 & 0xff;\n  o[ 3] = x0 >>> 24 & 0xff;\n\n  o[ 4] = x5 >>>  0 & 0xff;\n  o[ 5] = x5 >>>  8 & 0xff;\n  o[ 6] = x5 >>> 16 & 0xff;\n  o[ 7] = x5 >>> 24 & 0xff;\n\n  o[ 8] = x10 >>>  0 & 0xff;\n  o[ 9] = x10 >>>  8 & 0xff;\n  o[10] = x10 >>> 16 & 0xff;\n  o[11] = x10 >>> 24 & 0xff;\n\n  o[12] = x15 >>>  0 & 0xff;\n  o[13] = x15 >>>  8 & 0xff;\n  o[14] = x15 >>> 16 & 0xff;\n  o[15] = x15 >>> 24 & 0xff;\n\n  o[16] = x6 >>>  0 & 0xff;\n  o[17] = x6 >>>  8 & 0xff;\n  o[18] = x6 >>> 16 & 0xff;\n  o[19] = x6 >>> 24 & 0xff;\n\n  o[20] = x7 >>>  0 & 0xff;\n  o[21] = x7 >>>  8 & 0xff;\n  o[22] = x7 >>> 16 & 0xff;\n  o[23] = x7 >>> 24 & 0xff;\n\n  o[24] = x8 >>>  0 & 0xff;\n  o[25] = x8 >>>  8 & 0xff;\n  o[26] = x8 >>> 16 & 0xff;\n  o[27] = x8 >>> 24 & 0xff;\n\n  o[28] = x9 >>>  0 & 0xff;\n  o[29] = x9 >>>  8 & 0xff;\n  o[30] = x9 >>> 16 & 0xff;\n  o[31] = x9 >>> 24 & 0xff;\n}\n\nfunction crypto_core_salsa20(out,inp,k,c) {\n  core_salsa20(out,inp,k,c);\n}\n\nfunction crypto_core_hsalsa20(out,inp,k,c) {\n  core_hsalsa20(out,inp,k,c);\n}\n\nvar sigma = new Uint8Array([101, 120, 112, 97, 110, 100, 32, 51, 50, 45, 98, 121, 116, 101, 32, 107]);\n            // \"expand 32-byte k\"\n\nfunction crypto_stream_salsa20_xor(c,cpos,m,mpos,b,n,k) {\n  var z = new Uint8Array(16), x = new Uint8Array(64);\n  var u, i;\n  for (i = 0; i < 16; i++) z[i] = 0;\n  for (i = 0; i < 8; i++) z[i] = n[i];\n  while (b >= 64) {\n    crypto_core_salsa20(x,z,k,sigma);\n    for (i = 0; i < 64; i++) c[cpos+i] = m[mpos+i] ^ x[i];\n    u = 1;\n    for (i = 8; i < 16; i++) {\n      u = u + (z[i] & 0xff) | 0;\n      z[i] = u & 0xff;\n      u >>>= 8;\n    }\n    b -= 64;\n    cpos += 64;\n    mpos += 64;\n  }\n  if (b > 0) {\n    crypto_core_salsa20(x,z,k,sigma);\n    for (i = 0; i < b; i++) c[cpos+i] = m[mpos+i] ^ x[i];\n  }\n  return 0;\n}\n\nfunction crypto_stream_salsa20(c,cpos,b,n,k) {\n  var z = new Uint8Array(16), x = new Uint8Array(64);\n  var u, i;\n  for (i = 0; i < 16; i++) z[i] = 0;\n  for (i = 0; i < 8; i++) z[i] = n[i];\n  while (b >= 64) {\n    crypto_core_salsa20(x,z,k,sigma);\n    for (i = 0; i < 64; i++) c[cpos+i] = x[i];\n    u = 1;\n    for (i = 8; i < 16; i++) {\n      u = u + (z[i] & 0xff) | 0;\n      z[i] = u & 0xff;\n      u >>>= 8;\n    }\n    b -= 64;\n    cpos += 64;\n  }\n  if (b > 0) {\n    crypto_core_salsa20(x,z,k,sigma);\n    for (i = 0; i < b; i++) c[cpos+i] = x[i];\n  }\n  return 0;\n}\n\nfunction crypto_stream(c,cpos,d,n,k) {\n  var s = new Uint8Array(32);\n  crypto_core_hsalsa20(s,n,k,sigma);\n  var sn = new Uint8Array(8);\n  for (var i = 0; i < 8; i++) sn[i] = n[i+16];\n  return crypto_stream_salsa20(c,cpos,d,sn,s);\n}\n\nfunction crypto_stream_xor(c,cpos,m,mpos,d,n,k) {\n  var s = new Uint8Array(32);\n  crypto_core_hsalsa20(s,n,k,sigma);\n  var sn = new Uint8Array(8);\n  for (var i = 0; i < 8; i++) sn[i] = n[i+16];\n  return crypto_stream_salsa20_xor(c,cpos,m,mpos,d,sn,s);\n}\n\n/*\n* Port of Andrew Moon's Poly1305-donna-16. Public domain.\n* https://github.com/floodyberry/poly1305-donna\n*/\n\nvar poly1305 = function(key) {\n  this.buffer = new Uint8Array(16);\n  this.r = new Uint16Array(10);\n  this.h = new Uint16Array(10);\n  this.pad = new Uint16Array(8);\n  this.leftover = 0;\n  this.fin = 0;\n\n  var t0, t1, t2, t3, t4, t5, t6, t7;\n\n  t0 = key[ 0] & 0xff | (key[ 1] & 0xff) << 8; this.r[0] = ( t0                     ) & 0x1fff;\n  t1 = key[ 2] & 0xff | (key[ 3] & 0xff) << 8; this.r[1] = ((t0 >>> 13) | (t1 <<  3)) & 0x1fff;\n  t2 = key[ 4] & 0xff | (key[ 5] & 0xff) << 8; this.r[2] = ((t1 >>> 10) | (t2 <<  6)) & 0x1f03;\n  t3 = key[ 6] & 0xff | (key[ 7] & 0xff) << 8; this.r[3] = ((t2 >>>  7) | (t3 <<  9)) & 0x1fff;\n  t4 = key[ 8] & 0xff | (key[ 9] & 0xff) << 8; this.r[4] = ((t3 >>>  4) | (t4 << 12)) & 0x00ff;\n  this.r[5] = ((t4 >>>  1)) & 0x1ffe;\n  t5 = key[10] & 0xff | (key[11] & 0xff) << 8; this.r[6] = ((t4 >>> 14) | (t5 <<  2)) & 0x1fff;\n  t6 = key[12] & 0xff | (key[13] & 0xff) << 8; this.r[7] = ((t5 >>> 11) | (t6 <<  5)) & 0x1f81;\n  t7 = key[14] & 0xff | (key[15] & 0xff) << 8; this.r[8] = ((t6 >>>  8) | (t7 <<  8)) & 0x1fff;\n  this.r[9] = ((t7 >>>  5)) & 0x007f;\n\n  this.pad[0] = key[16] & 0xff | (key[17] & 0xff) << 8;\n  this.pad[1] = key[18] & 0xff | (key[19] & 0xff) << 8;\n  this.pad[2] = key[20] & 0xff | (key[21] & 0xff) << 8;\n  this.pad[3] = key[22] & 0xff | (key[23] & 0xff) << 8;\n  this.pad[4] = key[24] & 0xff | (key[25] & 0xff) << 8;\n  this.pad[5] = key[26] & 0xff | (key[27] & 0xff) << 8;\n  this.pad[6] = key[28] & 0xff | (key[29] & 0xff) << 8;\n  this.pad[7] = key[30] & 0xff | (key[31] & 0xff) << 8;\n};\n\npoly1305.prototype.blocks = function(m, mpos, bytes) {\n  var hibit = this.fin ? 0 : (1 << 11);\n  var t0, t1, t2, t3, t4, t5, t6, t7, c;\n  var d0, d1, d2, d3, d4, d5, d6, d7, d8, d9;\n\n  var h0 = this.h[0],\n      h1 = this.h[1],\n      h2 = this.h[2],\n      h3 = this.h[3],\n      h4 = this.h[4],\n      h5 = this.h[5],\n      h6 = this.h[6],\n      h7 = this.h[7],\n      h8 = this.h[8],\n      h9 = this.h[9];\n\n  var r0 = this.r[0],\n      r1 = this.r[1],\n      r2 = this.r[2],\n      r3 = this.r[3],\n      r4 = this.r[4],\n      r5 = this.r[5],\n      r6 = this.r[6],\n      r7 = this.r[7],\n      r8 = this.r[8],\n      r9 = this.r[9];\n\n  while (bytes >= 16) {\n    t0 = m[mpos+ 0] & 0xff | (m[mpos+ 1] & 0xff) << 8; h0 += ( t0                     ) & 0x1fff;\n    t1 = m[mpos+ 2] & 0xff | (m[mpos+ 3] & 0xff) << 8; h1 += ((t0 >>> 13) | (t1 <<  3)) & 0x1fff;\n    t2 = m[mpos+ 4] & 0xff | (m[mpos+ 5] & 0xff) << 8; h2 += ((t1 >>> 10) | (t2 <<  6)) & 0x1fff;\n    t3 = m[mpos+ 6] & 0xff | (m[mpos+ 7] & 0xff) << 8; h3 += ((t2 >>>  7) | (t3 <<  9)) & 0x1fff;\n    t4 = m[mpos+ 8] & 0xff | (m[mpos+ 9] & 0xff) << 8; h4 += ((t3 >>>  4) | (t4 << 12)) & 0x1fff;\n    h5 += ((t4 >>>  1)) & 0x1fff;\n    t5 = m[mpos+10] & 0xff | (m[mpos+11] & 0xff) << 8; h6 += ((t4 >>> 14) | (t5 <<  2)) & 0x1fff;\n    t6 = m[mpos+12] & 0xff | (m[mpos+13] & 0xff) << 8; h7 += ((t5 >>> 11) | (t6 <<  5)) & 0x1fff;\n    t7 = m[mpos+14] & 0xff | (m[mpos+15] & 0xff) << 8; h8 += ((t6 >>>  8) | (t7 <<  8)) & 0x1fff;\n    h9 += ((t7 >>> 5)) | hibit;\n\n    c = 0;\n\n    d0 = c;\n    d0 += h0 * r0;\n    d0 += h1 * (5 * r9);\n    d0 += h2 * (5 * r8);\n    d0 += h3 * (5 * r7);\n    d0 += h4 * (5 * r6);\n    c = (d0 >>> 13); d0 &= 0x1fff;\n    d0 += h5 * (5 * r5);\n    d0 += h6 * (5 * r4);\n    d0 += h7 * (5 * r3);\n    d0 += h8 * (5 * r2);\n    d0 += h9 * (5 * r1);\n    c += (d0 >>> 13); d0 &= 0x1fff;\n\n    d1 = c;\n    d1 += h0 * r1;\n    d1 += h1 * r0;\n    d1 += h2 * (5 * r9);\n    d1 += h3 * (5 * r8);\n    d1 += h4 * (5 * r7);\n    c = (d1 >>> 13); d1 &= 0x1fff;\n    d1 += h5 * (5 * r6);\n    d1 += h6 * (5 * r5);\n    d1 += h7 * (5 * r4);\n    d1 += h8 * (5 * r3);\n    d1 += h9 * (5 * r2);\n    c += (d1 >>> 13); d1 &= 0x1fff;\n\n    d2 = c;\n    d2 += h0 * r2;\n    d2 += h1 * r1;\n    d2 += h2 * r0;\n    d2 += h3 * (5 * r9);\n    d2 += h4 * (5 * r8);\n    c = (d2 >>> 13); d2 &= 0x1fff;\n    d2 += h5 * (5 * r7);\n    d2 += h6 * (5 * r6);\n    d2 += h7 * (5 * r5);\n    d2 += h8 * (5 * r4);\n    d2 += h9 * (5 * r3);\n    c += (d2 >>> 13); d2 &= 0x1fff;\n\n    d3 = c;\n    d3 += h0 * r3;\n    d3 += h1 * r2;\n    d3 += h2 * r1;\n    d3 += h3 * r0;\n    d3 += h4 * (5 * r9);\n    c = (d3 >>> 13); d3 &= 0x1fff;\n    d3 += h5 * (5 * r8);\n    d3 += h6 * (5 * r7);\n    d3 += h7 * (5 * r6);\n    d3 += h8 * (5 * r5);\n    d3 += h9 * (5 * r4);\n    c += (d3 >>> 13); d3 &= 0x1fff;\n\n    d4 = c;\n    d4 += h0 * r4;\n    d4 += h1 * r3;\n    d4 += h2 * r2;\n    d4 += h3 * r1;\n    d4 += h4 * r0;\n    c = (d4 >>> 13); d4 &= 0x1fff;\n    d4 += h5 * (5 * r9);\n    d4 += h6 * (5 * r8);\n    d4 += h7 * (5 * r7);\n    d4 += h8 * (5 * r6);\n    d4 += h9 * (5 * r5);\n    c += (d4 >>> 13); d4 &= 0x1fff;\n\n    d5 = c;\n    d5 += h0 * r5;\n    d5 += h1 * r4;\n    d5 += h2 * r3;\n    d5 += h3 * r2;\n    d5 += h4 * r1;\n    c = (d5 >>> 13); d5 &= 0x1fff;\n    d5 += h5 * r0;\n    d5 += h6 * (5 * r9);\n    d5 += h7 * (5 * r8);\n    d5 += h8 * (5 * r7);\n    d5 += h9 * (5 * r6);\n    c += (d5 >>> 13); d5 &= 0x1fff;\n\n    d6 = c;\n    d6 += h0 * r6;\n    d6 += h1 * r5;\n    d6 += h2 * r4;\n    d6 += h3 * r3;\n    d6 += h4 * r2;\n    c = (d6 >>> 13); d6 &= 0x1fff;\n    d6 += h5 * r1;\n    d6 += h6 * r0;\n    d6 += h7 * (5 * r9);\n    d6 += h8 * (5 * r8);\n    d6 += h9 * (5 * r7);\n    c += (d6 >>> 13); d6 &= 0x1fff;\n\n    d7 = c;\n    d7 += h0 * r7;\n    d7 += h1 * r6;\n    d7 += h2 * r5;\n    d7 += h3 * r4;\n    d7 += h4 * r3;\n    c = (d7 >>> 13); d7 &= 0x1fff;\n    d7 += h5 * r2;\n    d7 += h6 * r1;\n    d7 += h7 * r0;\n    d7 += h8 * (5 * r9);\n    d7 += h9 * (5 * r8);\n    c += (d7 >>> 13); d7 &= 0x1fff;\n\n    d8 = c;\n    d8 += h0 * r8;\n    d8 += h1 * r7;\n    d8 += h2 * r6;\n    d8 += h3 * r5;\n    d8 += h4 * r4;\n    c = (d8 >>> 13); d8 &= 0x1fff;\n    d8 += h5 * r3;\n    d8 += h6 * r2;\n    d8 += h7 * r1;\n    d8 += h8 * r0;\n    d8 += h9 * (5 * r9);\n    c += (d8 >>> 13); d8 &= 0x1fff;\n\n    d9 = c;\n    d9 += h0 * r9;\n    d9 += h1 * r8;\n    d9 += h2 * r7;\n    d9 += h3 * r6;\n    d9 += h4 * r5;\n    c = (d9 >>> 13); d9 &= 0x1fff;\n    d9 += h5 * r4;\n    d9 += h6 * r3;\n    d9 += h7 * r2;\n    d9 += h8 * r1;\n    d9 += h9 * r0;\n    c += (d9 >>> 13); d9 &= 0x1fff;\n\n    c = (((c << 2) + c)) | 0;\n    c = (c + d0) | 0;\n    d0 = c & 0x1fff;\n    c = (c >>> 13);\n    d1 += c;\n\n    h0 = d0;\n    h1 = d1;\n    h2 = d2;\n    h3 = d3;\n    h4 = d4;\n    h5 = d5;\n    h6 = d6;\n    h7 = d7;\n    h8 = d8;\n    h9 = d9;\n\n    mpos += 16;\n    bytes -= 16;\n  }\n  this.h[0] = h0;\n  this.h[1] = h1;\n  this.h[2] = h2;\n  this.h[3] = h3;\n  this.h[4] = h4;\n  this.h[5] = h5;\n  this.h[6] = h6;\n  this.h[7] = h7;\n  this.h[8] = h8;\n  this.h[9] = h9;\n};\n\npoly1305.prototype.finish = function(mac, macpos) {\n  var g = new Uint16Array(10);\n  var c, mask, f, i;\n\n  if (this.leftover) {\n    i = this.leftover;\n    this.buffer[i++] = 1;\n    for (; i < 16; i++) this.buffer[i] = 0;\n    this.fin = 1;\n    this.blocks(this.buffer, 0, 16);\n  }\n\n  c = this.h[1] >>> 13;\n  this.h[1] &= 0x1fff;\n  for (i = 2; i < 10; i++) {\n    this.h[i] += c;\n    c = this.h[i] >>> 13;\n    this.h[i] &= 0x1fff;\n  }\n  this.h[0] += (c * 5);\n  c = this.h[0] >>> 13;\n  this.h[0] &= 0x1fff;\n  this.h[1] += c;\n  c = this.h[1] >>> 13;\n  this.h[1] &= 0x1fff;\n  this.h[2] += c;\n\n  g[0] = this.h[0] + 5;\n  c = g[0] >>> 13;\n  g[0] &= 0x1fff;\n  for (i = 1; i < 10; i++) {\n    g[i] = this.h[i] + c;\n    c = g[i] >>> 13;\n    g[i] &= 0x1fff;\n  }\n  g[9] -= (1 << 13);\n\n  mask = (c ^ 1) - 1;\n  for (i = 0; i < 10; i++) g[i] &= mask;\n  mask = ~mask;\n  for (i = 0; i < 10; i++) this.h[i] = (this.h[i] & mask) | g[i];\n\n  this.h[0] = ((this.h[0]       ) | (this.h[1] << 13)                    ) & 0xffff;\n  this.h[1] = ((this.h[1] >>>  3) | (this.h[2] << 10)                    ) & 0xffff;\n  this.h[2] = ((this.h[2] >>>  6) | (this.h[3] <<  7)                    ) & 0xffff;\n  this.h[3] = ((this.h[3] >>>  9) | (this.h[4] <<  4)                    ) & 0xffff;\n  this.h[4] = ((this.h[4] >>> 12) | (this.h[5] <<  1) | (this.h[6] << 14)) & 0xffff;\n  this.h[5] = ((this.h[6] >>>  2) | (this.h[7] << 11)                    ) & 0xffff;\n  this.h[6] = ((this.h[7] >>>  5) | (this.h[8] <<  8)                    ) & 0xffff;\n  this.h[7] = ((this.h[8] >>>  8) | (this.h[9] <<  5)                    ) & 0xffff;\n\n  f = this.h[0] + this.pad[0];\n  this.h[0] = f & 0xffff;\n  for (i = 1; i < 8; i++) {\n    f = (((this.h[i] + this.pad[i]) | 0) + (f >>> 16)) | 0;\n    this.h[i] = f & 0xffff;\n  }\n\n  mac[macpos+ 0] = (this.h[0] >>> 0) & 0xff;\n  mac[macpos+ 1] = (this.h[0] >>> 8) & 0xff;\n  mac[macpos+ 2] = (this.h[1] >>> 0) & 0xff;\n  mac[macpos+ 3] = (this.h[1] >>> 8) & 0xff;\n  mac[macpos+ 4] = (this.h[2] >>> 0) & 0xff;\n  mac[macpos+ 5] = (this.h[2] >>> 8) & 0xff;\n  mac[macpos+ 6] = (this.h[3] >>> 0) & 0xff;\n  mac[macpos+ 7] = (this.h[3] >>> 8) & 0xff;\n  mac[macpos+ 8] = (this.h[4] >>> 0) & 0xff;\n  mac[macpos+ 9] = (this.h[4] >>> 8) & 0xff;\n  mac[macpos+10] = (this.h[5] >>> 0) & 0xff;\n  mac[macpos+11] = (this.h[5] >>> 8) & 0xff;\n  mac[macpos+12] = (this.h[6] >>> 0) & 0xff;\n  mac[macpos+13] = (this.h[6] >>> 8) & 0xff;\n  mac[macpos+14] = (this.h[7] >>> 0) & 0xff;\n  mac[macpos+15] = (this.h[7] >>> 8) & 0xff;\n};\n\npoly1305.prototype.update = function(m, mpos, bytes) {\n  var i, want;\n\n  if (this.leftover) {\n    want = (16 - this.leftover);\n    if (want > bytes)\n      want = bytes;\n    for (i = 0; i < want; i++)\n      this.buffer[this.leftover + i] = m[mpos+i];\n    bytes -= want;\n    mpos += want;\n    this.leftover += want;\n    if (this.leftover < 16)\n      return;\n    this.blocks(this.buffer, 0, 16);\n    this.leftover = 0;\n  }\n\n  if (bytes >= 16) {\n    want = bytes - (bytes % 16);\n    this.blocks(m, mpos, want);\n    mpos += want;\n    bytes -= want;\n  }\n\n  if (bytes) {\n    for (i = 0; i < bytes; i++)\n      this.buffer[this.leftover + i] = m[mpos+i];\n    this.leftover += bytes;\n  }\n};\n\nfunction crypto_onetimeauth(out, outpos, m, mpos, n, k) {\n  var s = new poly1305(k);\n  s.update(m, mpos, n);\n  s.finish(out, outpos);\n  return 0;\n}\n\nfunction crypto_onetimeauth_verify(h, hpos, m, mpos, n, k) {\n  var x = new Uint8Array(16);\n  crypto_onetimeauth(x,0,m,mpos,n,k);\n  return crypto_verify_16(h,hpos,x,0);\n}\n\nfunction crypto_secretbox(c,m,d,n,k) {\n  var i;\n  if (d < 32) return -1;\n  crypto_stream_xor(c,0,m,0,d,n,k);\n  crypto_onetimeauth(c, 16, c, 32, d - 32, c);\n  for (i = 0; i < 16; i++) c[i] = 0;\n  return 0;\n}\n\nfunction crypto_secretbox_open(m,c,d,n,k) {\n  var i;\n  var x = new Uint8Array(32);\n  if (d < 32) return -1;\n  crypto_stream(x,0,32,n,k);\n  if (crypto_onetimeauth_verify(c, 16,c, 32,d - 32,x) !== 0) return -1;\n  crypto_stream_xor(m,0,c,0,d,n,k);\n  for (i = 0; i < 32; i++) m[i] = 0;\n  return 0;\n}\n\nfunction set25519(r, a) {\n  var i;\n  for (i = 0; i < 16; i++) r[i] = a[i]|0;\n}\n\nfunction car25519(o) {\n  var i, v, c = 1;\n  for (i = 0; i < 16; i++) {\n    v = o[i] + c + 65535;\n    c = Math.floor(v / 65536);\n    o[i] = v - c * 65536;\n  }\n  o[0] += c-1 + 37 * (c-1);\n}\n\nfunction sel25519(p, q, b) {\n  var t, c = ~(b-1);\n  for (var i = 0; i < 16; i++) {\n    t = c & (p[i] ^ q[i]);\n    p[i] ^= t;\n    q[i] ^= t;\n  }\n}\n\nfunction pack25519(o, n) {\n  var i, j, b;\n  var m = gf(), t = gf();\n  for (i = 0; i < 16; i++) t[i] = n[i];\n  car25519(t);\n  car25519(t);\n  car25519(t);\n  for (j = 0; j < 2; j++) {\n    m[0] = t[0] - 0xffed;\n    for (i = 1; i < 15; i++) {\n      m[i] = t[i] - 0xffff - ((m[i-1]>>16) & 1);\n      m[i-1] &= 0xffff;\n    }\n    m[15] = t[15] - 0x7fff - ((m[14]>>16) & 1);\n    b = (m[15]>>16) & 1;\n    m[14] &= 0xffff;\n    sel25519(t, m, 1-b);\n  }\n  for (i = 0; i < 16; i++) {\n    o[2*i] = t[i] & 0xff;\n    o[2*i+1] = t[i]>>8;\n  }\n}\n\nfunction neq25519(a, b) {\n  var c = new Uint8Array(32), d = new Uint8Array(32);\n  pack25519(c, a);\n  pack25519(d, b);\n  return crypto_verify_32(c, 0, d, 0);\n}\n\nfunction par25519(a) {\n  var d = new Uint8Array(32);\n  pack25519(d, a);\n  return d[0] & 1;\n}\n\nfunction unpack25519(o, n) {\n  var i;\n  for (i = 0; i < 16; i++) o[i] = n[2*i] + (n[2*i+1] << 8);\n  o[15] &= 0x7fff;\n}\n\nfunction A(o, a, b) {\n  for (var i = 0; i < 16; i++) o[i] = a[i] + b[i];\n}\n\nfunction Z(o, a, b) {\n  for (var i = 0; i < 16; i++) o[i] = a[i] - b[i];\n}\n\nfunction M(o, a, b) {\n  var v, c,\n     t0 = 0,  t1 = 0,  t2 = 0,  t3 = 0,  t4 = 0,  t5 = 0,  t6 = 0,  t7 = 0,\n     t8 = 0,  t9 = 0, t10 = 0, t11 = 0, t12 = 0, t13 = 0, t14 = 0, t15 = 0,\n    t16 = 0, t17 = 0, t18 = 0, t19 = 0, t20 = 0, t21 = 0, t22 = 0, t23 = 0,\n    t24 = 0, t25 = 0, t26 = 0, t27 = 0, t28 = 0, t29 = 0, t30 = 0,\n    b0 = b[0],\n    b1 = b[1],\n    b2 = b[2],\n    b3 = b[3],\n    b4 = b[4],\n    b5 = b[5],\n    b6 = b[6],\n    b7 = b[7],\n    b8 = b[8],\n    b9 = b[9],\n    b10 = b[10],\n    b11 = b[11],\n    b12 = b[12],\n    b13 = b[13],\n    b14 = b[14],\n    b15 = b[15];\n\n  v = a[0];\n  t0 += v * b0;\n  t1 += v * b1;\n  t2 += v * b2;\n  t3 += v * b3;\n  t4 += v * b4;\n  t5 += v * b5;\n  t6 += v * b6;\n  t7 += v * b7;\n  t8 += v * b8;\n  t9 += v * b9;\n  t10 += v * b10;\n  t11 += v * b11;\n  t12 += v * b12;\n  t13 += v * b13;\n  t14 += v * b14;\n  t15 += v * b15;\n  v = a[1];\n  t1 += v * b0;\n  t2 += v * b1;\n  t3 += v * b2;\n  t4 += v * b3;\n  t5 += v * b4;\n  t6 += v * b5;\n  t7 += v * b6;\n  t8 += v * b7;\n  t9 += v * b8;\n  t10 += v * b9;\n  t11 += v * b10;\n  t12 += v * b11;\n  t13 += v * b12;\n  t14 += v * b13;\n  t15 += v * b14;\n  t16 += v * b15;\n  v = a[2];\n  t2 += v * b0;\n  t3 += v * b1;\n  t4 += v * b2;\n  t5 += v * b3;\n  t6 += v * b4;\n  t7 += v * b5;\n  t8 += v * b6;\n  t9 += v * b7;\n  t10 += v * b8;\n  t11 += v * b9;\n  t12 += v * b10;\n  t13 += v * b11;\n  t14 += v * b12;\n  t15 += v * b13;\n  t16 += v * b14;\n  t17 += v * b15;\n  v = a[3];\n  t3 += v * b0;\n  t4 += v * b1;\n  t5 += v * b2;\n  t6 += v * b3;\n  t7 += v * b4;\n  t8 += v * b5;\n  t9 += v * b6;\n  t10 += v * b7;\n  t11 += v * b8;\n  t12 += v * b9;\n  t13 += v * b10;\n  t14 += v * b11;\n  t15 += v * b12;\n  t16 += v * b13;\n  t17 += v * b14;\n  t18 += v * b15;\n  v = a[4];\n  t4 += v * b0;\n  t5 += v * b1;\n  t6 += v * b2;\n  t7 += v * b3;\n  t8 += v * b4;\n  t9 += v * b5;\n  t10 += v * b6;\n  t11 += v * b7;\n  t12 += v * b8;\n  t13 += v * b9;\n  t14 += v * b10;\n  t15 += v * b11;\n  t16 += v * b12;\n  t17 += v * b13;\n  t18 += v * b14;\n  t19 += v * b15;\n  v = a[5];\n  t5 += v * b0;\n  t6 += v * b1;\n  t7 += v * b2;\n  t8 += v * b3;\n  t9 += v * b4;\n  t10 += v * b5;\n  t11 += v * b6;\n  t12 += v * b7;\n  t13 += v * b8;\n  t14 += v * b9;\n  t15 += v * b10;\n  t16 += v * b11;\n  t17 += v * b12;\n  t18 += v * b13;\n  t19 += v * b14;\n  t20 += v * b15;\n  v = a[6];\n  t6 += v * b0;\n  t7 += v * b1;\n  t8 += v * b2;\n  t9 += v * b3;\n  t10 += v * b4;\n  t11 += v * b5;\n  t12 += v * b6;\n  t13 += v * b7;\n  t14 += v * b8;\n  t15 += v * b9;\n  t16 += v * b10;\n  t17 += v * b11;\n  t18 += v * b12;\n  t19 += v * b13;\n  t20 += v * b14;\n  t21 += v * b15;\n  v = a[7];\n  t7 += v * b0;\n  t8 += v * b1;\n  t9 += v * b2;\n  t10 += v * b3;\n  t11 += v * b4;\n  t12 += v * b5;\n  t13 += v * b6;\n  t14 += v * b7;\n  t15 += v * b8;\n  t16 += v * b9;\n  t17 += v * b10;\n  t18 += v * b11;\n  t19 += v * b12;\n  t20 += v * b13;\n  t21 += v * b14;\n  t22 += v * b15;\n  v = a[8];\n  t8 += v * b0;\n  t9 += v * b1;\n  t10 += v * b2;\n  t11 += v * b3;\n  t12 += v * b4;\n  t13 += v * b5;\n  t14 += v * b6;\n  t15 += v * b7;\n  t16 += v * b8;\n  t17 += v * b9;\n  t18 += v * b10;\n  t19 += v * b11;\n  t20 += v * b12;\n  t21 += v * b13;\n  t22 += v * b14;\n  t23 += v * b15;\n  v = a[9];\n  t9 += v * b0;\n  t10 += v * b1;\n  t11 += v * b2;\n  t12 += v * b3;\n  t13 += v * b4;\n  t14 += v * b5;\n  t15 += v * b6;\n  t16 += v * b7;\n  t17 += v * b8;\n  t18 += v * b9;\n  t19 += v * b10;\n  t20 += v * b11;\n  t21 += v * b12;\n  t22 += v * b13;\n  t23 += v * b14;\n  t24 += v * b15;\n  v = a[10];\n  t10 += v * b0;\n  t11 += v * b1;\n  t12 += v * b2;\n  t13 += v * b3;\n  t14 += v * b4;\n  t15 += v * b5;\n  t16 += v * b6;\n  t17 += v * b7;\n  t18 += v * b8;\n  t19 += v * b9;\n  t20 += v * b10;\n  t21 += v * b11;\n  t22 += v * b12;\n  t23 += v * b13;\n  t24 += v * b14;\n  t25 += v * b15;\n  v = a[11];\n  t11 += v * b0;\n  t12 += v * b1;\n  t13 += v * b2;\n  t14 += v * b3;\n  t15 += v * b4;\n  t16 += v * b5;\n  t17 += v * b6;\n  t18 += v * b7;\n  t19 += v * b8;\n  t20 += v * b9;\n  t21 += v * b10;\n  t22 += v * b11;\n  t23 += v * b12;\n  t24 += v * b13;\n  t25 += v * b14;\n  t26 += v * b15;\n  v = a[12];\n  t12 += v * b0;\n  t13 += v * b1;\n  t14 += v * b2;\n  t15 += v * b3;\n  t16 += v * b4;\n  t17 += v * b5;\n  t18 += v * b6;\n  t19 += v * b7;\n  t20 += v * b8;\n  t21 += v * b9;\n  t22 += v * b10;\n  t23 += v * b11;\n  t24 += v * b12;\n  t25 += v * b13;\n  t26 += v * b14;\n  t27 += v * b15;\n  v = a[13];\n  t13 += v * b0;\n  t14 += v * b1;\n  t15 += v * b2;\n  t16 += v * b3;\n  t17 += v * b4;\n  t18 += v * b5;\n  t19 += v * b6;\n  t20 += v * b7;\n  t21 += v * b8;\n  t22 += v * b9;\n  t23 += v * b10;\n  t24 += v * b11;\n  t25 += v * b12;\n  t26 += v * b13;\n  t27 += v * b14;\n  t28 += v * b15;\n  v = a[14];\n  t14 += v * b0;\n  t15 += v * b1;\n  t16 += v * b2;\n  t17 += v * b3;\n  t18 += v * b4;\n  t19 += v * b5;\n  t20 += v * b6;\n  t21 += v * b7;\n  t22 += v * b8;\n  t23 += v * b9;\n  t24 += v * b10;\n  t25 += v * b11;\n  t26 += v * b12;\n  t27 += v * b13;\n  t28 += v * b14;\n  t29 += v * b15;\n  v = a[15];\n  t15 += v * b0;\n  t16 += v * b1;\n  t17 += v * b2;\n  t18 += v * b3;\n  t19 += v * b4;\n  t20 += v * b5;\n  t21 += v * b6;\n  t22 += v * b7;\n  t23 += v * b8;\n  t24 += v * b9;\n  t25 += v * b10;\n  t26 += v * b11;\n  t27 += v * b12;\n  t28 += v * b13;\n  t29 += v * b14;\n  t30 += v * b15;\n\n  t0  += 38 * t16;\n  t1  += 38 * t17;\n  t2  += 38 * t18;\n  t3  += 38 * t19;\n  t4  += 38 * t20;\n  t5  += 38 * t21;\n  t6  += 38 * t22;\n  t7  += 38 * t23;\n  t8  += 38 * t24;\n  t9  += 38 * t25;\n  t10 += 38 * t26;\n  t11 += 38 * t27;\n  t12 += 38 * t28;\n  t13 += 38 * t29;\n  t14 += 38 * t30;\n  // t15 left as is\n\n  // first car\n  c = 1;\n  v =  t0 + c + 65535; c = Math.floor(v / 65536);  t0 = v - c * 65536;\n  v =  t1 + c + 65535; c = Math.floor(v / 65536);  t1 = v - c * 65536;\n  v =  t2 + c + 65535; c = Math.floor(v / 65536);  t2 = v - c * 65536;\n  v =  t3 + c + 65535; c = Math.floor(v / 65536);  t3 = v - c * 65536;\n  v =  t4 + c + 65535; c = Math.floor(v / 65536);  t4 = v - c * 65536;\n  v =  t5 + c + 65535; c = Math.floor(v / 65536);  t5 = v - c * 65536;\n  v =  t6 + c + 65535; c = Math.floor(v / 65536);  t6 = v - c * 65536;\n  v =  t7 + c + 65535; c = Math.floor(v / 65536);  t7 = v - c * 65536;\n  v =  t8 + c + 65535; c = Math.floor(v / 65536);  t8 = v - c * 65536;\n  v =  t9 + c + 65535; c = Math.floor(v / 65536);  t9 = v - c * 65536;\n  v = t10 + c + 65535; c = Math.floor(v / 65536); t10 = v - c * 65536;\n  v = t11 + c + 65535; c = Math.floor(v / 65536); t11 = v - c * 65536;\n  v = t12 + c + 65535; c = Math.floor(v / 65536); t12 = v - c * 65536;\n  v = t13 + c + 65535; c = Math.floor(v / 65536); t13 = v - c * 65536;\n  v = t14 + c + 65535; c = Math.floor(v / 65536); t14 = v - c * 65536;\n  v = t15 + c + 65535; c = Math.floor(v / 65536); t15 = v - c * 65536;\n  t0 += c-1 + 37 * (c-1);\n\n  // second car\n  c = 1;\n  v =  t0 + c + 65535; c = Math.floor(v / 65536);  t0 = v - c * 65536;\n  v =  t1 + c + 65535; c = Math.floor(v / 65536);  t1 = v - c * 65536;\n  v =  t2 + c + 65535; c = Math.floor(v / 65536);  t2 = v - c * 65536;\n  v =  t3 + c + 65535; c = Math.floor(v / 65536);  t3 = v - c * 65536;\n  v =  t4 + c + 65535; c = Math.floor(v / 65536);  t4 = v - c * 65536;\n  v =  t5 + c + 65535; c = Math.floor(v / 65536);  t5 = v - c * 65536;\n  v =  t6 + c + 65535; c = Math.floor(v / 65536);  t6 = v - c * 65536;\n  v =  t7 + c + 65535; c = Math.floor(v / 65536);  t7 = v - c * 65536;\n  v =  t8 + c + 65535; c = Math.floor(v / 65536);  t8 = v - c * 65536;\n  v =  t9 + c + 65535; c = Math.floor(v / 65536);  t9 = v - c * 65536;\n  v = t10 + c + 65535; c = Math.floor(v / 65536); t10 = v - c * 65536;\n  v = t11 + c + 65535; c = Math.floor(v / 65536); t11 = v - c * 65536;\n  v = t12 + c + 65535; c = Math.floor(v / 65536); t12 = v - c * 65536;\n  v = t13 + c + 65535; c = Math.floor(v / 65536); t13 = v - c * 65536;\n  v = t14 + c + 65535; c = Math.floor(v / 65536); t14 = v - c * 65536;\n  v = t15 + c + 65535; c = Math.floor(v / 65536); t15 = v - c * 65536;\n  t0 += c-1 + 37 * (c-1);\n\n  o[ 0] = t0;\n  o[ 1] = t1;\n  o[ 2] = t2;\n  o[ 3] = t3;\n  o[ 4] = t4;\n  o[ 5] = t5;\n  o[ 6] = t6;\n  o[ 7] = t7;\n  o[ 8] = t8;\n  o[ 9] = t9;\n  o[10] = t10;\n  o[11] = t11;\n  o[12] = t12;\n  o[13] = t13;\n  o[14] = t14;\n  o[15] = t15;\n}\n\nfunction S(o, a) {\n  M(o, a, a);\n}\n\nfunction inv25519(o, i) {\n  var c = gf();\n  var a;\n  for (a = 0; a < 16; a++) c[a] = i[a];\n  for (a = 253; a >= 0; a--) {\n    S(c, c);\n    if(a !== 2 && a !== 4) M(c, c, i);\n  }\n  for (a = 0; a < 16; a++) o[a] = c[a];\n}\n\nfunction pow2523(o, i) {\n  var c = gf();\n  var a;\n  for (a = 0; a < 16; a++) c[a] = i[a];\n  for (a = 250; a >= 0; a--) {\n      S(c, c);\n      if(a !== 1) M(c, c, i);\n  }\n  for (a = 0; a < 16; a++) o[a] = c[a];\n}\n\nfunction crypto_scalarmult(q, n, p) {\n  var z = new Uint8Array(32);\n  var x = new Float64Array(80), r, i;\n  var a = gf(), b = gf(), c = gf(),\n      d = gf(), e = gf(), f = gf();\n  for (i = 0; i < 31; i++) z[i] = n[i];\n  z[31]=(n[31]&127)|64;\n  z[0]&=248;\n  unpack25519(x,p);\n  for (i = 0; i < 16; i++) {\n    b[i]=x[i];\n    d[i]=a[i]=c[i]=0;\n  }\n  a[0]=d[0]=1;\n  for (i=254; i>=0; --i) {\n    r=(z[i>>>3]>>>(i&7))&1;\n    sel25519(a,b,r);\n    sel25519(c,d,r);\n    A(e,a,c);\n    Z(a,a,c);\n    A(c,b,d);\n    Z(b,b,d);\n    S(d,e);\n    S(f,a);\n    M(a,c,a);\n    M(c,b,e);\n    A(e,a,c);\n    Z(a,a,c);\n    S(b,a);\n    Z(c,d,f);\n    M(a,c,_121665);\n    A(a,a,d);\n    M(c,c,a);\n    M(a,d,f);\n    M(d,b,x);\n    S(b,e);\n    sel25519(a,b,r);\n    sel25519(c,d,r);\n  }\n  for (i = 0; i < 16; i++) {\n    x[i+16]=a[i];\n    x[i+32]=c[i];\n    x[i+48]=b[i];\n    x[i+64]=d[i];\n  }\n  var x32 = x.subarray(32);\n  var x16 = x.subarray(16);\n  inv25519(x32,x32);\n  M(x16,x16,x32);\n  pack25519(q,x16);\n  return 0;\n}\n\nfunction crypto_scalarmult_base(q, n) {\n  return crypto_scalarmult(q, n, _9);\n}\n\nfunction crypto_box_keypair(y, x) {\n  randombytes(x, 32);\n  return crypto_scalarmult_base(y, x);\n}\n\nfunction crypto_box_beforenm(k, y, x) {\n  var s = new Uint8Array(32);\n  crypto_scalarmult(s, x, y);\n  return crypto_core_hsalsa20(k, _0, s, sigma);\n}\n\nvar crypto_box_afternm = crypto_secretbox;\nvar crypto_box_open_afternm = crypto_secretbox_open;\n\nfunction crypto_box(c, m, d, n, y, x) {\n  var k = new Uint8Array(32);\n  crypto_box_beforenm(k, y, x);\n  return crypto_box_afternm(c, m, d, n, k);\n}\n\nfunction crypto_box_open(m, c, d, n, y, x) {\n  var k = new Uint8Array(32);\n  crypto_box_beforenm(k, y, x);\n  return crypto_box_open_afternm(m, c, d, n, k);\n}\n\nvar K = [\n  0x428a2f98, 0xd728ae22, 0x71374491, 0x23ef65cd,\n  0xb5c0fbcf, 0xec4d3b2f, 0xe9b5dba5, 0x8189dbbc,\n  0x3956c25b, 0xf348b538, 0x59f111f1, 0xb605d019,\n  0x923f82a4, 0xaf194f9b, 0xab1c5ed5, 0xda6d8118,\n  0xd807aa98, 0xa3030242, 0x12835b01, 0x45706fbe,\n  0x243185be, 0x4ee4b28c, 0x550c7dc3, 0xd5ffb4e2,\n  0x72be5d74, 0xf27b896f, 0x80deb1fe, 0x3b1696b1,\n  0x9bdc06a7, 0x25c71235, 0xc19bf174, 0xcf692694,\n  0xe49b69c1, 0x9ef14ad2, 0xefbe4786, 0x384f25e3,\n  0x0fc19dc6, 0x8b8cd5b5, 0x240ca1cc, 0x77ac9c65,\n  0x2de92c6f, 0x592b0275, 0x4a7484aa, 0x6ea6e483,\n  0x5cb0a9dc, 0xbd41fbd4, 0x76f988da, 0x831153b5,\n  0x983e5152, 0xee66dfab, 0xa831c66d, 0x2db43210,\n  0xb00327c8, 0x98fb213f, 0xbf597fc7, 0xbeef0ee4,\n  0xc6e00bf3, 0x3da88fc2, 0xd5a79147, 0x930aa725,\n  0x06ca6351, 0xe003826f, 0x14292967, 0x0a0e6e70,\n  0x27b70a85, 0x46d22ffc, 0x2e1b2138, 0x5c26c926,\n  0x4d2c6dfc, 0x5ac42aed, 0x53380d13, 0x9d95b3df,\n  0x650a7354, 0x8baf63de, 0x766a0abb, 0x3c77b2a8,\n  0x81c2c92e, 0x47edaee6, 0x92722c85, 0x1482353b,\n  0xa2bfe8a1, 0x4cf10364, 0xa81a664b, 0xbc423001,\n  0xc24b8b70, 0xd0f89791, 0xc76c51a3, 0x0654be30,\n  0xd192e819, 0xd6ef5218, 0xd6990624, 0x5565a910,\n  0xf40e3585, 0x5771202a, 0x106aa070, 0x32bbd1b8,\n  0x19a4c116, 0xb8d2d0c8, 0x1e376c08, 0x5141ab53,\n  0x2748774c, 0xdf8eeb99, 0x34b0bcb5, 0xe19b48a8,\n  0x391c0cb3, 0xc5c95a63, 0x4ed8aa4a, 0xe3418acb,\n  0x5b9cca4f, 0x7763e373, 0x682e6ff3, 0xd6b2b8a3,\n  0x748f82ee, 0x5defb2fc, 0x78a5636f, 0x43172f60,\n  0x84c87814, 0xa1f0ab72, 0x8cc70208, 0x1a6439ec,\n  0x90befffa, 0x23631e28, 0xa4506ceb, 0xde82bde9,\n  0xbef9a3f7, 0xb2c67915, 0xc67178f2, 0xe372532b,\n  0xca273ece, 0xea26619c, 0xd186b8c7, 0x21c0c207,\n  0xeada7dd6, 0xcde0eb1e, 0xf57d4f7f, 0xee6ed178,\n  0x06f067aa, 0x72176fba, 0x0a637dc5, 0xa2c898a6,\n  0x113f9804, 0xbef90dae, 0x1b710b35, 0x131c471b,\n  0x28db77f5, 0x23047d84, 0x32caab7b, 0x40c72493,\n  0x3c9ebe0a, 0x15c9bebc, 0x431d67c4, 0x9c100d4c,\n  0x4cc5d4be, 0xcb3e42b6, 0x597f299c, 0xfc657e2a,\n  0x5fcb6fab, 0x3ad6faec, 0x6c44198c, 0x4a475817\n];\n\nfunction crypto_hashblocks_hl(hh, hl, m, n) {\n  var wh = new Int32Array(16), wl = new Int32Array(16),\n      bh0, bh1, bh2, bh3, bh4, bh5, bh6, bh7,\n      bl0, bl1, bl2, bl3, bl4, bl5, bl6, bl7,\n      th, tl, i, j, h, l, a, b, c, d;\n\n  var ah0 = hh[0],\n      ah1 = hh[1],\n      ah2 = hh[2],\n      ah3 = hh[3],\n      ah4 = hh[4],\n      ah5 = hh[5],\n      ah6 = hh[6],\n      ah7 = hh[7],\n\n      al0 = hl[0],\n      al1 = hl[1],\n      al2 = hl[2],\n      al3 = hl[3],\n      al4 = hl[4],\n      al5 = hl[5],\n      al6 = hl[6],\n      al7 = hl[7];\n\n  var pos = 0;\n  while (n >= 128) {\n    for (i = 0; i < 16; i++) {\n      j = 8 * i + pos;\n      wh[i] = (m[j+0] << 24) | (m[j+1] << 16) | (m[j+2] << 8) | m[j+3];\n      wl[i] = (m[j+4] << 24) | (m[j+5] << 16) | (m[j+6] << 8) | m[j+7];\n    }\n    for (i = 0; i < 80; i++) {\n      bh0 = ah0;\n      bh1 = ah1;\n      bh2 = ah2;\n      bh3 = ah3;\n      bh4 = ah4;\n      bh5 = ah5;\n      bh6 = ah6;\n      bh7 = ah7;\n\n      bl0 = al0;\n      bl1 = al1;\n      bl2 = al2;\n      bl3 = al3;\n      bl4 = al4;\n      bl5 = al5;\n      bl6 = al6;\n      bl7 = al7;\n\n      // add\n      h = ah7;\n      l = al7;\n\n      a = l & 0xffff; b = l >>> 16;\n      c = h & 0xffff; d = h >>> 16;\n\n      // Sigma1\n      h = ((ah4 >>> 14) | (al4 << (32-14))) ^ ((ah4 >>> 18) | (al4 << (32-18))) ^ ((al4 >>> (41-32)) | (ah4 << (32-(41-32))));\n      l = ((al4 >>> 14) | (ah4 << (32-14))) ^ ((al4 >>> 18) | (ah4 << (32-18))) ^ ((ah4 >>> (41-32)) | (al4 << (32-(41-32))));\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      // Ch\n      h = (ah4 & ah5) ^ (~ah4 & ah6);\n      l = (al4 & al5) ^ (~al4 & al6);\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      // K\n      h = K[i*2];\n      l = K[i*2+1];\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      // w\n      h = wh[i%16];\n      l = wl[i%16];\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      b += a >>> 16;\n      c += b >>> 16;\n      d += c >>> 16;\n\n      th = c & 0xffff | d << 16;\n      tl = a & 0xffff | b << 16;\n\n      // add\n      h = th;\n      l = tl;\n\n      a = l & 0xffff; b = l >>> 16;\n      c = h & 0xffff; d = h >>> 16;\n\n      // Sigma0\n      h = ((ah0 >>> 28) | (al0 << (32-28))) ^ ((al0 >>> (34-32)) | (ah0 << (32-(34-32)))) ^ ((al0 >>> (39-32)) | (ah0 << (32-(39-32))));\n      l = ((al0 >>> 28) | (ah0 << (32-28))) ^ ((ah0 >>> (34-32)) | (al0 << (32-(34-32)))) ^ ((ah0 >>> (39-32)) | (al0 << (32-(39-32))));\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      // Maj\n      h = (ah0 & ah1) ^ (ah0 & ah2) ^ (ah1 & ah2);\n      l = (al0 & al1) ^ (al0 & al2) ^ (al1 & al2);\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      b += a >>> 16;\n      c += b >>> 16;\n      d += c >>> 16;\n\n      bh7 = (c & 0xffff) | (d << 16);\n      bl7 = (a & 0xffff) | (b << 16);\n\n      // add\n      h = bh3;\n      l = bl3;\n\n      a = l & 0xffff; b = l >>> 16;\n      c = h & 0xffff; d = h >>> 16;\n\n      h = th;\n      l = tl;\n\n      a += l & 0xffff; b += l >>> 16;\n      c += h & 0xffff; d += h >>> 16;\n\n      b += a >>> 16;\n      c += b >>> 16;\n      d += c >>> 16;\n\n      bh3 = (c & 0xffff) | (d << 16);\n      bl3 = (a & 0xffff) | (b << 16);\n\n      ah1 = bh0;\n      ah2 = bh1;\n      ah3 = bh2;\n      ah4 = bh3;\n      ah5 = bh4;\n      ah6 = bh5;\n      ah7 = bh6;\n      ah0 = bh7;\n\n      al1 = bl0;\n      al2 = bl1;\n      al3 = bl2;\n      al4 = bl3;\n      al5 = bl4;\n      al6 = bl5;\n      al7 = bl6;\n      al0 = bl7;\n\n      if (i%16 === 15) {\n        for (j = 0; j < 16; j++) {\n          // add\n          h = wh[j];\n          l = wl[j];\n\n          a = l & 0xffff; b = l >>> 16;\n          c = h & 0xffff; d = h >>> 16;\n\n          h = wh[(j+9)%16];\n          l = wl[(j+9)%16];\n\n          a += l & 0xffff; b += l >>> 16;\n          c += h & 0xffff; d += h >>> 16;\n\n          // sigma0\n          th = wh[(j+1)%16];\n          tl = wl[(j+1)%16];\n          h = ((th >>> 1) | (tl << (32-1))) ^ ((th >>> 8) | (tl << (32-8))) ^ (th >>> 7);\n          l = ((tl >>> 1) | (th << (32-1))) ^ ((tl >>> 8) | (th << (32-8))) ^ ((tl >>> 7) | (th << (32-7)));\n\n          a += l & 0xffff; b += l >>> 16;\n          c += h & 0xffff; d += h >>> 16;\n\n          // sigma1\n          th = wh[(j+14)%16];\n          tl = wl[(j+14)%16];\n          h = ((th >>> 19) | (tl << (32-19))) ^ ((tl >>> (61-32)) | (th << (32-(61-32)))) ^ (th >>> 6);\n          l = ((tl >>> 19) | (th << (32-19))) ^ ((th >>> (61-32)) | (tl << (32-(61-32)))) ^ ((tl >>> 6) | (th << (32-6)));\n\n          a += l & 0xffff; b += l >>> 16;\n          c += h & 0xffff; d += h >>> 16;\n\n          b += a >>> 16;\n          c += b >>> 16;\n          d += c >>> 16;\n\n          wh[j] = (c & 0xffff) | (d << 16);\n          wl[j] = (a & 0xffff) | (b << 16);\n        }\n      }\n    }\n\n    // add\n    h = ah0;\n    l = al0;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[0];\n    l = hl[0];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[0] = ah0 = (c & 0xffff) | (d << 16);\n    hl[0] = al0 = (a & 0xffff) | (b << 16);\n\n    h = ah1;\n    l = al1;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[1];\n    l = hl[1];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[1] = ah1 = (c & 0xffff) | (d << 16);\n    hl[1] = al1 = (a & 0xffff) | (b << 16);\n\n    h = ah2;\n    l = al2;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[2];\n    l = hl[2];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[2] = ah2 = (c & 0xffff) | (d << 16);\n    hl[2] = al2 = (a & 0xffff) | (b << 16);\n\n    h = ah3;\n    l = al3;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[3];\n    l = hl[3];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[3] = ah3 = (c & 0xffff) | (d << 16);\n    hl[3] = al3 = (a & 0xffff) | (b << 16);\n\n    h = ah4;\n    l = al4;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[4];\n    l = hl[4];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[4] = ah4 = (c & 0xffff) | (d << 16);\n    hl[4] = al4 = (a & 0xffff) | (b << 16);\n\n    h = ah5;\n    l = al5;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[5];\n    l = hl[5];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[5] = ah5 = (c & 0xffff) | (d << 16);\n    hl[5] = al5 = (a & 0xffff) | (b << 16);\n\n    h = ah6;\n    l = al6;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[6];\n    l = hl[6];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[6] = ah6 = (c & 0xffff) | (d << 16);\n    hl[6] = al6 = (a & 0xffff) | (b << 16);\n\n    h = ah7;\n    l = al7;\n\n    a = l & 0xffff; b = l >>> 16;\n    c = h & 0xffff; d = h >>> 16;\n\n    h = hh[7];\n    l = hl[7];\n\n    a += l & 0xffff; b += l >>> 16;\n    c += h & 0xffff; d += h >>> 16;\n\n    b += a >>> 16;\n    c += b >>> 16;\n    d += c >>> 16;\n\n    hh[7] = ah7 = (c & 0xffff) | (d << 16);\n    hl[7] = al7 = (a & 0xffff) | (b << 16);\n\n    pos += 128;\n    n -= 128;\n  }\n\n  return n;\n}\n\nfunction crypto_hash(out, m, n) {\n  var hh = new Int32Array(8),\n      hl = new Int32Array(8),\n      x = new Uint8Array(256),\n      i, b = n;\n\n  hh[0] = 0x6a09e667;\n  hh[1] = 0xbb67ae85;\n  hh[2] = 0x3c6ef372;\n  hh[3] = 0xa54ff53a;\n  hh[4] = 0x510e527f;\n  hh[5] = 0x9b05688c;\n  hh[6] = 0x1f83d9ab;\n  hh[7] = 0x5be0cd19;\n\n  hl[0] = 0xf3bcc908;\n  hl[1] = 0x84caa73b;\n  hl[2] = 0xfe94f82b;\n  hl[3] = 0x5f1d36f1;\n  hl[4] = 0xade682d1;\n  hl[5] = 0x2b3e6c1f;\n  hl[6] = 0xfb41bd6b;\n  hl[7] = 0x137e2179;\n\n  crypto_hashblocks_hl(hh, hl, m, n);\n  n %= 128;\n\n  for (i = 0; i < n; i++) x[i] = m[b-n+i];\n  x[n] = 128;\n\n  n = 256-128*(n<112?1:0);\n  x[n-9] = 0;\n  ts64(x, n-8,  (b / 0x20000000) | 0, b << 3);\n  crypto_hashblocks_hl(hh, hl, x, n);\n\n  for (i = 0; i < 8; i++) ts64(out, 8*i, hh[i], hl[i]);\n\n  return 0;\n}\n\nfunction add(p, q) {\n  var a = gf(), b = gf(), c = gf(),\n      d = gf(), e = gf(), f = gf(),\n      g = gf(), h = gf(), t = gf();\n\n  Z(a, p[1], p[0]);\n  Z(t, q[1], q[0]);\n  M(a, a, t);\n  A(b, p[0], p[1]);\n  A(t, q[0], q[1]);\n  M(b, b, t);\n  M(c, p[3], q[3]);\n  M(c, c, D2);\n  M(d, p[2], q[2]);\n  A(d, d, d);\n  Z(e, b, a);\n  Z(f, d, c);\n  A(g, d, c);\n  A(h, b, a);\n\n  M(p[0], e, f);\n  M(p[1], h, g);\n  M(p[2], g, f);\n  M(p[3], e, h);\n}\n\nfunction cswap(p, q, b) {\n  var i;\n  for (i = 0; i < 4; i++) {\n    sel25519(p[i], q[i], b);\n  }\n}\n\nfunction pack(r, p) {\n  var tx = gf(), ty = gf(), zi = gf();\n  inv25519(zi, p[2]);\n  M(tx, p[0], zi);\n  M(ty, p[1], zi);\n  pack25519(r, ty);\n  r[31] ^= par25519(tx) << 7;\n}\n\nfunction scalarmult(p, q, s) {\n  var b, i;\n  set25519(p[0], gf0);\n  set25519(p[1], gf1);\n  set25519(p[2], gf1);\n  set25519(p[3], gf0);\n  for (i = 255; i >= 0; --i) {\n    b = (s[(i/8)|0] >> (i&7)) & 1;\n    cswap(p, q, b);\n    add(q, p);\n    add(p, p);\n    cswap(p, q, b);\n  }\n}\n\nfunction scalarbase(p, s) {\n  var q = [gf(), gf(), gf(), gf()];\n  set25519(q[0], X);\n  set25519(q[1], Y);\n  set25519(q[2], gf1);\n  M(q[3], X, Y);\n  scalarmult(p, q, s);\n}\n\nfunction crypto_sign_keypair(pk, sk, seeded) {\n  var d = new Uint8Array(64);\n  var p = [gf(), gf(), gf(), gf()];\n  var i;\n\n  if (!seeded) randombytes(sk, 32);\n  crypto_hash(d, sk, 32);\n  d[0] &= 248;\n  d[31] &= 127;\n  d[31] |= 64;\n\n  scalarbase(p, d);\n  pack(pk, p);\n\n  for (i = 0; i < 32; i++) sk[i+32] = pk[i];\n  return 0;\n}\n\nvar L = new Float64Array([0xed, 0xd3, 0xf5, 0x5c, 0x1a, 0x63, 0x12, 0x58, 0xd6, 0x9c, 0xf7, 0xa2, 0xde, 0xf9, 0xde, 0x14, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0x10]);\n\nfunction modL(r, x) {\n  var carry, i, j, k;\n  for (i = 63; i >= 32; --i) {\n    carry = 0;\n    for (j = i - 32, k = i - 12; j < k; ++j) {\n      x[j] += carry - 16 * x[i] * L[j - (i - 32)];\n      carry = Math.floor((x[j] + 128) / 256);\n      x[j] -= carry * 256;\n    }\n    x[j] += carry;\n    x[i] = 0;\n  }\n  carry = 0;\n  for (j = 0; j < 32; j++) {\n    x[j] += carry - (x[31] >> 4) * L[j];\n    carry = x[j] >> 8;\n    x[j] &= 255;\n  }\n  for (j = 0; j < 32; j++) x[j] -= carry * L[j];\n  for (i = 0; i < 32; i++) {\n    x[i+1] += x[i] >> 8;\n    r[i] = x[i] & 255;\n  }\n}\n\nfunction reduce(r) {\n  var x = new Float64Array(64), i;\n  for (i = 0; i < 64; i++) x[i] = r[i];\n  for (i = 0; i < 64; i++) r[i] = 0;\n  modL(r, x);\n}\n\n// Note: difference from C - smlen returned, not passed as argument.\nfunction crypto_sign(sm, m, n, sk) {\n  var d = new Uint8Array(64), h = new Uint8Array(64), r = new Uint8Array(64);\n  var i, j, x = new Float64Array(64);\n  var p = [gf(), gf(), gf(), gf()];\n\n  crypto_hash(d, sk, 32);\n  d[0] &= 248;\n  d[31] &= 127;\n  d[31] |= 64;\n\n  var smlen = n + 64;\n  for (i = 0; i < n; i++) sm[64 + i] = m[i];\n  for (i = 0; i < 32; i++) sm[32 + i] = d[32 + i];\n\n  crypto_hash(r, sm.subarray(32), n+32);\n  reduce(r);\n  scalarbase(p, r);\n  pack(sm, p);\n\n  for (i = 32; i < 64; i++) sm[i] = sk[i];\n  crypto_hash(h, sm, n + 64);\n  reduce(h);\n\n  for (i = 0; i < 64; i++) x[i] = 0;\n  for (i = 0; i < 32; i++) x[i] = r[i];\n  for (i = 0; i < 32; i++) {\n    for (j = 0; j < 32; j++) {\n      x[i+j] += h[i] * d[j];\n    }\n  }\n\n  modL(sm.subarray(32), x);\n  return smlen;\n}\n\nfunction unpackneg(r, p) {\n  var t = gf(), chk = gf(), num = gf(),\n      den = gf(), den2 = gf(), den4 = gf(),\n      den6 = gf();\n\n  set25519(r[2], gf1);\n  unpack25519(r[1], p);\n  S(num, r[1]);\n  M(den, num, D);\n  Z(num, num, r[2]);\n  A(den, r[2], den);\n\n  S(den2, den);\n  S(den4, den2);\n  M(den6, den4, den2);\n  M(t, den6, num);\n  M(t, t, den);\n\n  pow2523(t, t);\n  M(t, t, num);\n  M(t, t, den);\n  M(t, t, den);\n  M(r[0], t, den);\n\n  S(chk, r[0]);\n  M(chk, chk, den);\n  if (neq25519(chk, num)) M(r[0], r[0], I);\n\n  S(chk, r[0]);\n  M(chk, chk, den);\n  if (neq25519(chk, num)) return -1;\n\n  if (par25519(r[0]) === (p[31]>>7)) Z(r[0], gf0, r[0]);\n\n  M(r[3], r[0], r[1]);\n  return 0;\n}\n\nfunction crypto_sign_open(m, sm, n, pk) {\n  var i;\n  var t = new Uint8Array(32), h = new Uint8Array(64);\n  var p = [gf(), gf(), gf(), gf()],\n      q = [gf(), gf(), gf(), gf()];\n\n  if (n < 64) return -1;\n\n  if (unpackneg(q, pk)) return -1;\n\n  for (i = 0; i < n; i++) m[i] = sm[i];\n  for (i = 0; i < 32; i++) m[i+32] = pk[i];\n  crypto_hash(h, m, n);\n  reduce(h);\n  scalarmult(p, q, h);\n\n  scalarbase(q, sm.subarray(32));\n  add(p, q);\n  pack(t, p);\n\n  n -= 64;\n  if (crypto_verify_32(sm, 0, t, 0)) {\n    for (i = 0; i < n; i++) m[i] = 0;\n    return -1;\n  }\n\n  for (i = 0; i < n; i++) m[i] = sm[i + 64];\n  return n;\n}\n\nvar crypto_secretbox_KEYBYTES = 32,\n    crypto_secretbox_NONCEBYTES = 24,\n    crypto_secretbox_ZEROBYTES = 32,\n    crypto_secretbox_BOXZEROBYTES = 16,\n    crypto_scalarmult_BYTES = 32,\n    crypto_scalarmult_SCALARBYTES = 32,\n    crypto_box_PUBLICKEYBYTES = 32,\n    crypto_box_SECRETKEYBYTES = 32,\n    crypto_box_BEFORENMBYTES = 32,\n    crypto_box_NONCEBYTES = crypto_secretbox_NONCEBYTES,\n    crypto_box_ZEROBYTES = crypto_secretbox_ZEROBYTES,\n    crypto_box_BOXZEROBYTES = crypto_secretbox_BOXZEROBYTES,\n    crypto_sign_BYTES = 64,\n    crypto_sign_PUBLICKEYBYTES = 32,\n    crypto_sign_SECRETKEYBYTES = 64,\n    crypto_sign_SEEDBYTES = 32,\n    crypto_hash_BYTES = 64;\n\nnacl.lowlevel = {\n  crypto_core_hsalsa20: crypto_core_hsalsa20,\n  crypto_stream_xor: crypto_stream_xor,\n  crypto_stream: crypto_stream,\n  crypto_stream_salsa20_xor: crypto_stream_salsa20_xor,\n  crypto_stream_salsa20: crypto_stream_salsa20,\n  crypto_onetimeauth: crypto_onetimeauth,\n  crypto_onetimeauth_verify: crypto_onetimeauth_verify,\n  crypto_verify_16: crypto_verify_16,\n  crypto_verify_32: crypto_verify_32,\n  crypto_secretbox: crypto_secretbox,\n  crypto_secretbox_open: crypto_secretbox_open,\n  crypto_scalarmult: crypto_scalarmult,\n  crypto_scalarmult_base: crypto_scalarmult_base,\n  crypto_box_beforenm: crypto_box_beforenm,\n  crypto_box_afternm: crypto_box_afternm,\n  crypto_box: crypto_box,\n  crypto_box_open: crypto_box_open,\n  crypto_box_keypair: crypto_box_keypair,\n  crypto_hash: crypto_hash,\n  crypto_sign: crypto_sign,\n  crypto_sign_keypair: crypto_sign_keypair,\n  crypto_sign_open: crypto_sign_open,\n\n  crypto_secretbox_KEYBYTES: crypto_secretbox_KEYBYTES,\n  crypto_secretbox_NONCEBYTES: crypto_secretbox_NONCEBYTES,\n  crypto_secretbox_ZEROBYTES: crypto_secretbox_ZEROBYTES,\n  crypto_secretbox_BOXZEROBYTES: crypto_secretbox_BOXZEROBYTES,\n  crypto_scalarmult_BYTES: crypto_scalarmult_BYTES,\n  crypto_scalarmult_SCALARBYTES: crypto_scalarmult_SCALARBYTES,\n  crypto_box_PUBLICKEYBYTES: crypto_box_PUBLICKEYBYTES,\n  crypto_box_SECRETKEYBYTES: crypto_box_SECRETKEYBYTES,\n  crypto_box_BEFORENMBYTES: crypto_box_BEFORENMBYTES,\n  crypto_box_NONCEBYTES: crypto_box_NONCEBYTES,\n  crypto_box_ZEROBYTES: crypto_box_ZEROBYTES,\n  crypto_box_BOXZEROBYTES: crypto_box_BOXZEROBYTES,\n  crypto_sign_BYTES: crypto_sign_BYTES,\n  crypto_sign_PUBLICKEYBYTES: crypto_sign_PUBLICKEYBYTES,\n  crypto_sign_SECRETKEYBYTES: crypto_sign_SECRETKEYBYTES,\n  crypto_sign_SEEDBYTES: crypto_sign_SEEDBYTES,\n  crypto_hash_BYTES: crypto_hash_BYTES,\n\n  gf: gf,\n  D: D,\n  L: L,\n  pack25519: pack25519,\n  unpack25519: unpack25519,\n  M: M,\n  A: A,\n  S: S,\n  Z: Z,\n  pow2523: pow2523,\n  add: add,\n  set25519: set25519,\n  modL: modL,\n  scalarmult: scalarmult,\n  scalarbase: scalarbase,\n};\n\n/* High-level API */\n\nfunction checkLengths(k, n) {\n  if (k.length !== crypto_secretbox_KEYBYTES) throw new Error('bad key size');\n  if (n.length !== crypto_secretbox_NONCEBYTES) throw new Error('bad nonce size');\n}\n\nfunction checkBoxLengths(pk, sk) {\n  if (pk.length !== crypto_box_PUBLICKEYBYTES) throw new Error('bad public key size');\n  if (sk.length !== crypto_box_SECRETKEYBYTES) throw new Error('bad secret key size');\n}\n\nfunction checkArrayTypes() {\n  for (var i = 0; i < arguments.length; i++) {\n    if (!(arguments[i] instanceof Uint8Array))\n      throw new TypeError('unexpected type, use Uint8Array');\n  }\n}\n\nfunction cleanup(arr) {\n  for (var i = 0; i < arr.length; i++) arr[i] = 0;\n}\n\nnacl.randomBytes = function(n) {\n  var b = new Uint8Array(n);\n  randombytes(b, n);\n  return b;\n};\n\nnacl.secretbox = function(msg, nonce, key) {\n  checkArrayTypes(msg, nonce, key);\n  checkLengths(key, nonce);\n  var m = new Uint8Array(crypto_secretbox_ZEROBYTES + msg.length);\n  var c = new Uint8Array(m.length);\n  for (var i = 0; i < msg.length; i++) m[i+crypto_secretbox_ZEROBYTES] = msg[i];\n  crypto_secretbox(c, m, m.length, nonce, key);\n  return c.subarray(crypto_secretbox_BOXZEROBYTES);\n};\n\nnacl.secretbox.open = function(box, nonce, key) {\n  checkArrayTypes(box, nonce, key);\n  checkLengths(key, nonce);\n  var c = new Uint8Array(crypto_secretbox_BOXZEROBYTES + box.length);\n  var m = new Uint8Array(c.length);\n  for (var i = 0; i < box.length; i++) c[i+crypto_secretbox_BOXZEROBYTES] = box[i];\n  if (c.length < 32) return null;\n  if (crypto_secretbox_open(m, c, c.length, nonce, key) !== 0) return null;\n  return m.subarray(crypto_secretbox_ZEROBYTES);\n};\n\nnacl.secretbox.keyLength = crypto_secretbox_KEYBYTES;\nnacl.secretbox.nonceLength = crypto_secretbox_NONCEBYTES;\nnacl.secretbox.overheadLength = crypto_secretbox_BOXZEROBYTES;\n\nnacl.scalarMult = function(n, p) {\n  checkArrayTypes(n, p);\n  if (n.length !== crypto_scalarmult_SCALARBYTES) throw new Error('bad n size');\n  if (p.length !== crypto_scalarmult_BYTES) throw new Error('bad p size');\n  var q = new Uint8Array(crypto_scalarmult_BYTES);\n  crypto_scalarmult(q, n, p);\n  return q;\n};\n\nnacl.scalarMult.base = function(n) {\n  checkArrayTypes(n);\n  if (n.length !== crypto_scalarmult_SCALARBYTES) throw new Error('bad n size');\n  var q = new Uint8Array(crypto_scalarmult_BYTES);\n  crypto_scalarmult_base(q, n);\n  return q;\n};\n\nnacl.scalarMult.scalarLength = crypto_scalarmult_SCALARBYTES;\nnacl.scalarMult.groupElementLength = crypto_scalarmult_BYTES;\n\nnacl.box = function(msg, nonce, publicKey, secretKey) {\n  var k = nacl.box.before(publicKey, secretKey);\n  return nacl.secretbox(msg, nonce, k);\n};\n\nnacl.box.before = function(publicKey, secretKey) {\n  checkArrayTypes(publicKey, secretKey);\n  checkBoxLengths(publicKey, secretKey);\n  var k = new Uint8Array(crypto_box_BEFORENMBYTES);\n  crypto_box_beforenm(k, publicKey, secretKey);\n  return k;\n};\n\nnacl.box.after = nacl.secretbox;\n\nnacl.box.open = function(msg, nonce, publicKey, secretKey) {\n  var k = nacl.box.before(publicKey, secretKey);\n  return nacl.secretbox.open(msg, nonce, k);\n};\n\nnacl.box.open.after = nacl.secretbox.open;\n\nnacl.box.keyPair = function() {\n  var pk = new Uint8Array(crypto_box_PUBLICKEYBYTES);\n  var sk = new Uint8Array(crypto_box_SECRETKEYBYTES);\n  crypto_box_keypair(pk, sk);\n  return {publicKey: pk, secretKey: sk};\n};\n\nnacl.box.keyPair.fromSecretKey = function(secretKey) {\n  checkArrayTypes(secretKey);\n  if (secretKey.length !== crypto_box_SECRETKEYBYTES)\n    throw new Error('bad secret key size');\n  var pk = new Uint8Array(crypto_box_PUBLICKEYBYTES);\n  crypto_scalarmult_base(pk, secretKey);\n  return {publicKey: pk, secretKey: new Uint8Array(secretKey)};\n};\n\nnacl.box.publicKeyLength = crypto_box_PUBLICKEYBYTES;\nnacl.box.secretKeyLength = crypto_box_SECRETKEYBYTES;\nnacl.box.sharedKeyLength = crypto_box_BEFORENMBYTES;\nnacl.box.nonceLength = crypto_box_NONCEBYTES;\nnacl.box.overheadLength = nacl.secretbox.overheadLength;\n\nnacl.sign = function(msg, secretKey) {\n  checkArrayTypes(msg, secretKey);\n  if (secretKey.length !== crypto_sign_SECRETKEYBYTES)\n    throw new Error('bad secret key size');\n  var signedMsg = new Uint8Array(crypto_sign_BYTES+msg.length);\n  crypto_sign(signedMsg, msg, msg.length, secretKey);\n  return signedMsg;\n};\n\nnacl.sign.open = function(signedMsg, publicKey) {\n  checkArrayTypes(signedMsg, publicKey);\n  if (publicKey.length !== crypto_sign_PUBLICKEYBYTES)\n    throw new Error('bad public key size');\n  var tmp = new Uint8Array(signedMsg.length);\n  var mlen = crypto_sign_open(tmp, signedMsg, signedMsg.length, publicKey);\n  if (mlen < 0) return null;\n  var m = new Uint8Array(mlen);\n  for (var i = 0; i < m.length; i++) m[i] = tmp[i];\n  return m;\n};\n\nnacl.sign.detached = function(msg, secretKey) {\n  var signedMsg = nacl.sign(msg, secretKey);\n  var sig = new Uint8Array(crypto_sign_BYTES);\n  for (var i = 0; i < sig.length; i++) sig[i] = signedMsg[i];\n  return sig;\n};\n\nnacl.sign.detached.verify = function(msg, sig, publicKey) {\n  checkArrayTypes(msg, sig, publicKey);\n  if (sig.length !== crypto_sign_BYTES)\n    throw new Error('bad signature size');\n  if (publicKey.length !== crypto_sign_PUBLICKEYBYTES)\n    throw new Error('bad public key size');\n  var sm = new Uint8Array(crypto_sign_BYTES + msg.length);\n  var m = new Uint8Array(crypto_sign_BYTES + msg.length);\n  var i;\n  for (i = 0; i < crypto_sign_BYTES; i++) sm[i] = sig[i];\n  for (i = 0; i < msg.length; i++) sm[i+crypto_sign_BYTES] = msg[i];\n  return (crypto_sign_open(m, sm, sm.length, publicKey) >= 0);\n};\n\nnacl.sign.keyPair = function() {\n  var pk = new Uint8Array(crypto_sign_PUBLICKEYBYTES);\n  var sk = new Uint8Array(crypto_sign_SECRETKEYBYTES);\n  crypto_sign_keypair(pk, sk);\n  return {publicKey: pk, secretKey: sk};\n};\n\nnacl.sign.keyPair.fromSecretKey = function(secretKey) {\n  checkArrayTypes(secretKey);\n  if (secretKey.length !== crypto_sign_SECRETKEYBYTES)\n    throw new Error('bad secret key size');\n  var pk = new Uint8Array(crypto_sign_PUBLICKEYBYTES);\n  for (var i = 0; i < pk.length; i++) pk[i] = secretKey[32+i];\n  return {publicKey: pk, secretKey: new Uint8Array(secretKey)};\n};\n\nnacl.sign.keyPair.fromSeed = function(seed) {\n  checkArrayTypes(seed);\n  if (seed.length !== crypto_sign_SEEDBYTES)\n    throw new Error('bad seed size');\n  var pk = new Uint8Array(crypto_sign_PUBLICKEYBYTES);\n  var sk = new Uint8Array(crypto_sign_SECRETKEYBYTES);\n  for (var i = 0; i < 32; i++) sk[i] = seed[i];\n  crypto_sign_keypair(pk, sk, true);\n  return {publicKey: pk, secretKey: sk};\n};\n\nnacl.sign.publicKeyLength = crypto_sign_PUBLICKEYBYTES;\nnacl.sign.secretKeyLength = crypto_sign_SECRETKEYBYTES;\nnacl.sign.seedLength = crypto_sign_SEEDBYTES;\nnacl.sign.signatureLength = crypto_sign_BYTES;\n\nnacl.hash = function(msg) {\n  checkArrayTypes(msg);\n  var h = new Uint8Array(crypto_hash_BYTES);\n  crypto_hash(h, msg, msg.length);\n  return h;\n};\n\nnacl.hash.hashLength = crypto_hash_BYTES;\n\nnacl.verify = function(x, y) {\n  checkArrayTypes(x, y);\n  // Zero length arguments are considered not equal.\n  if (x.length === 0 || y.length === 0) return false;\n  if (x.length !== y.length) return false;\n  return (vn(x, 0, y, 0, x.length) === 0) ? true : false;\n};\n\nnacl.setPRNG = function(fn) {\n  randombytes = fn;\n};\n\n(function() {\n  // Initialize PRNG if environment provides CSPRNG.\n  // If not, methods calling randombytes will throw.\n  var crypto = typeof self !== 'undefined' ? (self.crypto || self.msCrypto) : null;\n  if (crypto && crypto.getRandomValues) {\n    // Browsers.\n    var QUOTA = 65536;\n    nacl.setPRNG(function(x, n) {\n      var i, v = new Uint8Array(n);\n      for (i = 0; i < n; i += QUOTA) {\n        crypto.getRandomValues(v.subarray(i, i + Math.min(n - i, QUOTA)));\n      }\n      for (i = 0; i < n; i++) x[i] = v[i];\n      cleanup(v);\n    });\n  } else if (typeof require !== 'undefined') {\n    // Node.js.\n    crypto = require('crypto');\n    if (crypto && crypto.randomBytes) {\n      nacl.setPRNG(function(x, n) {\n        var i, v = crypto.randomBytes(n);\n        for (i = 0; i < n; i++) x[i] = v[i];\n        cleanup(v);\n      });\n    }\n  }\n})();\n\n})(typeof module !== 'undefined' && module.exports ? module.exports : (self.nacl = self.nacl || {}));\n","import crypto from 'crypto';\nconst rnds8Pool = new Uint8Array(256); // # of random values to pre-allocate\n\nlet poolPtr = rnds8Pool.length;\nexport default function rng() {\n  if (poolPtr > rnds8Pool.length - 16) {\n    crypto.randomFillSync(rnds8Pool);\n    poolPtr = 0;\n  }\n\n  return rnds8Pool.slice(poolPtr, poolPtr += 16);\n}","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;","import REGEX from './regex.js';\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nconst byteToHex = [];\n\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).slice(1));\n}\n\nexport function unsafeStringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  return (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase();\n}\n\nfunction stringify(arr, offset = 0) {\n  const uuid = unsafeStringify(arr, offset); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import rng from './rng.js';\nimport { unsafeStringify } from './stringify.js'; // **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\nlet _nodeId;\n\nlet _clockseq; // Previous uuid creation time\n\n\nlet _lastMSecs = 0;\nlet _lastNSecs = 0; // See https://github.com/uuidjs/uuid for API details\n\nfunction v1(options, buf, offset) {\n  let i = buf && offset || 0;\n  const b = buf || new Array(16);\n  options = options || {};\n  let node = options.node || _nodeId;\n  let clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq; // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n\n  if (node == null || clockseq == null) {\n    const seedBytes = options.random || (options.rng || rng)();\n\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [seedBytes[0] | 0x01, seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]];\n    }\n\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n    }\n  } // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n\n\n  let msecs = options.msecs !== undefined ? options.msecs : Date.now(); // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n\n  let nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1; // Time since last uuid creation (in msecs)\n\n  const dt = msecs - _lastMSecs + (nsecs - _lastNSecs) / 10000; // Per 4.2.1.2, Bump clockseq on clock regression\n\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  } // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n\n\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  } // Per 4.2.1.2 Throw error if too many uuids are requested\n\n\n  if (nsecs >= 10000) {\n    throw new Error(\"uuid.v1(): Can't create more than 10M uuids/sec\");\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq; // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n\n  msecs += 12219292800000; // `time_low`\n\n  const tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff; // `time_mid`\n\n  const tmh = msecs / 0x100000000 * 10000 & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff; // `time_high_and_version`\n\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n\n  b[i++] = tmh >>> 16 & 0xff; // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n\n  b[i++] = clockseq >>> 8 | 0x80; // `clock_seq_low`\n\n  b[i++] = clockseq & 0xff; // `node`\n\n  for (let n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf || unsafeStringify(b);\n}\n\nexport default v1;","import validate from './validate.js';\n\nfunction parse(uuid) {\n  if (!validate(uuid)) {\n    throw TypeError('Invalid UUID');\n  }\n\n  let v;\n  const arr = new Uint8Array(16); // Parse ########-....-....-....-............\n\n  arr[0] = (v = parseInt(uuid.slice(0, 8), 16)) >>> 24;\n  arr[1] = v >>> 16 & 0xff;\n  arr[2] = v >>> 8 & 0xff;\n  arr[3] = v & 0xff; // Parse ........-####-....-....-............\n\n  arr[4] = (v = parseInt(uuid.slice(9, 13), 16)) >>> 8;\n  arr[5] = v & 0xff; // Parse ........-....-####-....-............\n\n  arr[6] = (v = parseInt(uuid.slice(14, 18), 16)) >>> 8;\n  arr[7] = v & 0xff; // Parse ........-....-....-####-............\n\n  arr[8] = (v = parseInt(uuid.slice(19, 23), 16)) >>> 8;\n  arr[9] = v & 0xff; // Parse ........-....-....-....-############\n  // (Use \"/\" to avoid 32-bit truncation when bit-shifting high-order bytes)\n\n  arr[10] = (v = parseInt(uuid.slice(24, 36), 16)) / 0x10000000000 & 0xff;\n  arr[11] = v / 0x100000000 & 0xff;\n  arr[12] = v >>> 24 & 0xff;\n  arr[13] = v >>> 16 & 0xff;\n  arr[14] = v >>> 8 & 0xff;\n  arr[15] = v & 0xff;\n  return arr;\n}\n\nexport default parse;","import { unsafeStringify } from './stringify.js';\nimport parse from './parse.js';\n\nfunction stringToBytes(str) {\n  str = unescape(encodeURIComponent(str)); // UTF8 escape\n\n  const bytes = [];\n\n  for (let i = 0; i < str.length; ++i) {\n    bytes.push(str.charCodeAt(i));\n  }\n\n  return bytes;\n}\n\nexport const DNS = '6ba7b810-9dad-11d1-80b4-00c04fd430c8';\nexport const URL = '6ba7b811-9dad-11d1-80b4-00c04fd430c8';\nexport default function v35(name, version, hashfunc) {\n  function generateUUID(value, namespace, buf, offset) {\n    var _namespace;\n\n    if (typeof value === 'string') {\n      value = stringToBytes(value);\n    }\n\n    if (typeof namespace === 'string') {\n      namespace = parse(namespace);\n    }\n\n    if (((_namespace = namespace) === null || _namespace === void 0 ? void 0 : _namespace.length) !== 16) {\n      throw TypeError('Namespace must be array-like (16 iterable integer values, 0-255)');\n    } // Compute hash of namespace and value, Per 4.3\n    // Future: Use spread syntax when supported on all platforms, e.g. `bytes =\n    // hashfunc([...namespace, ... value])`\n\n\n    let bytes = new Uint8Array(16 + value.length);\n    bytes.set(namespace);\n    bytes.set(value, namespace.length);\n    bytes = hashfunc(bytes);\n    bytes[6] = bytes[6] & 0x0f | version;\n    bytes[8] = bytes[8] & 0x3f | 0x80;\n\n    if (buf) {\n      offset = offset || 0;\n\n      for (let i = 0; i < 16; ++i) {\n        buf[offset + i] = bytes[i];\n      }\n\n      return buf;\n    }\n\n    return unsafeStringify(bytes);\n  } // Function#name is not settable on some platforms (#270)\n\n\n  try {\n    generateUUID.name = name; // eslint-disable-next-line no-empty\n  } catch (err) {} // For CommonJS default export support\n\n\n  generateUUID.DNS = DNS;\n  generateUUID.URL = URL;\n  return generateUUID;\n}","import crypto from 'crypto';\n\nfunction md5(bytes) {\n  if (Array.isArray(bytes)) {\n    bytes = Buffer.from(bytes);\n  } else if (typeof bytes === 'string') {\n    bytes = Buffer.from(bytes, 'utf8');\n  }\n\n  return crypto.createHash('md5').update(bytes).digest();\n}\n\nexport default md5;","import v35 from './v35.js';\nimport md5 from './md5.js';\nconst v3 = v35('v3', 0x30, md5);\nexport default v3;","import crypto from 'crypto';\nexport default {\n  randomUUID: crypto.randomUUID\n};","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  if (native.randomUUID && !buf && !options) {\n    return native.randomUUID();\n  }\n\n  options = options || {};\n  const rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (let i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return unsafeStringify(rnds);\n}\n\nexport default v4;","import crypto from 'crypto';\n\nfunction sha1(bytes) {\n  if (Array.isArray(bytes)) {\n    bytes = Buffer.from(bytes);\n  } else if (typeof bytes === 'string') {\n    bytes = Buffer.from(bytes, 'utf8');\n  }\n\n  return crypto.createHash('sha1').update(bytes).digest();\n}\n\nexport default sha1;","import v35 from './v35.js';\nimport sha1 from './sha1.js';\nconst v5 = v35('v5', 0x50, sha1);\nexport default v5;","export default '00000000-0000-0000-0000-000000000000';","import validate from './validate.js';\n\nfunction version(uuid) {\n  if (!validate(uuid)) {\n    throw TypeError('Invalid UUID');\n  }\n\n  return parseInt(uuid.slice(14, 15), 16);\n}\n\nexport default version;","var ip = exports;\nvar { Buffer } = require('buffer');\nvar os = require('os');\n\nip.toBuffer = function (ip, buff, offset) {\n  offset = ~~offset;\n\n  var result;\n\n  if (this.isV4Format(ip)) {\n    result = buff || new Buffer(offset + 4);\n    ip.split(/\\./g).map((byte) => {\n      result[offset++] = parseInt(byte, 10) & 0xff;\n    });\n  } else if (this.isV6Format(ip)) {\n    var sections = ip.split(':', 8);\n\n    var i;\n    for (i = 0; i < sections.length; i++) {\n      var isv4 = this.isV4Format(sections[i]);\n      var v4Buffer;\n\n      if (isv4) {\n        v4Buffer = this.toBuffer(sections[i]);\n        sections[i] = v4Buffer.slice(0, 2).toString('hex');\n      }\n\n      if (v4Buffer && ++i < 8) {\n        sections.splice(i, 0, v4Buffer.slice(2, 4).toString('hex'));\n      }\n    }\n\n    if (sections[0] === '') {\n      while (sections.length < 8) sections.unshift('0');\n    } else if (sections[sections.length - 1] === '') {\n      while (sections.length < 8) sections.push('0');\n    } else if (sections.length < 8) {\n      for (i = 0; i < sections.length && sections[i] !== ''; i++);\n      var argv = [i, 1];\n      for (i = 9 - sections.length; i > 0; i--) {\n        argv.push('0');\n      }\n      sections.splice.apply(sections, argv);\n    }\n\n    result = buff || new Buffer(offset + 16);\n    for (i = 0; i < sections.length; i++) {\n      var word = parseInt(sections[i], 16);\n      result[offset++] = (word >> 8) & 0xff;\n      result[offset++] = word & 0xff;\n    }\n  }\n\n  if (!result) {\n    throw Error(`Invalid ip address: ${ip}`);\n  }\n\n  return result;\n};\n\nip.toString = function (buff, offset, length) {\n  offset = ~~offset;\n  length = length || (buff.length - offset);\n\n  var result = [];\n  var i;\n  if (length === 4) {\n    // IPv4\n    for (i = 0; i < length; i++) {\n      result.push(buff[offset + i]);\n    }\n    result = result.join('.');\n  } else if (length === 16) {\n    // IPv6\n    for (i = 0; i < length; i += 2) {\n      result.push(buff.readUInt16BE(offset + i).toString(16));\n    }\n    result = result.join(':');\n    result = result.replace(/(^|:)0(:0)*:0(:|$)/, '$1::$3');\n    result = result.replace(/:{3,4}/, '::');\n  }\n\n  return result;\n};\n\nvar ipv4Regex = /^(\\d{1,3}\\.){3,3}\\d{1,3}$/;\nvar ipv6Regex = /^(::)?(((\\d{1,3}\\.){3}(\\d{1,3}){1})?([0-9a-f]){0,4}:{0,2}){1,8}(::)?$/i;\n\nip.isV4Format = function (ip) {\n  return ipv4Regex.test(ip);\n};\n\nip.isV6Format = function (ip) {\n  return ipv6Regex.test(ip);\n};\n\nfunction _normalizeFamily(family) {\n  if (family === 4) {\n    return 'ipv4';\n  }\n  if (family === 6) {\n    return 'ipv6';\n  }\n  return family ? family.toLowerCase() : 'ipv4';\n}\n\nip.fromPrefixLen = function (prefixlen, family) {\n  if (prefixlen > 32) {\n    family = 'ipv6';\n  } else {\n    family = _normalizeFamily(family);\n  }\n\n  var len = 4;\n  if (family === 'ipv6') {\n    len = 16;\n  }\n  var buff = new Buffer(len);\n\n  for (var i = 0, n = buff.length; i < n; ++i) {\n    var bits = 8;\n    if (prefixlen < 8) {\n      bits = prefixlen;\n    }\n    prefixlen -= bits;\n\n    buff[i] = ~(0xff >> bits) & 0xff;\n  }\n\n  return ip.toString(buff);\n};\n\nip.mask = function (addr, mask) {\n  addr = ip.toBuffer(addr);\n  mask = ip.toBuffer(mask);\n\n  var result = new Buffer(Math.max(addr.length, mask.length));\n\n  // Same protocol - do bitwise and\n  var i;\n  if (addr.length === mask.length) {\n    for (i = 0; i < addr.length; i++) {\n      result[i] = addr[i] & mask[i];\n    }\n  } else if (mask.length === 4) {\n    // IPv6 address and IPv4 mask\n    // (Mask low bits)\n    for (i = 0; i < mask.length; i++) {\n      result[i] = addr[addr.length - 4 + i] & mask[i];\n    }\n  } else {\n    // IPv6 mask and IPv4 addr\n    for (i = 0; i < result.length - 6; i++) {\n      result[i] = 0;\n    }\n\n    // ::ffff:ipv4\n    result[10] = 0xff;\n    result[11] = 0xff;\n    for (i = 0; i < addr.length; i++) {\n      result[i + 12] = addr[i] & mask[i + 12];\n    }\n    i += 12;\n  }\n  for (; i < result.length; i++) {\n    result[i] = 0;\n  }\n\n  return ip.toString(result);\n};\n\nip.cidr = function (cidrString) {\n  var cidrParts = cidrString.split('/');\n\n  var addr = cidrParts[0];\n  if (cidrParts.length !== 2) {\n    throw new Error(`invalid CIDR subnet: ${addr}`);\n  }\n\n  var mask = ip.fromPrefixLen(parseInt(cidrParts[1], 10));\n\n  return ip.mask(addr, mask);\n};\n\nip.subnet = function (addr, mask) {\n  var networkAddress = ip.toLong(ip.mask(addr, mask));\n\n  // Calculate the mask's length.\n  var maskBuffer = ip.toBuffer(mask);\n  var maskLength = 0;\n\n  for (var i = 0; i < maskBuffer.length; i++) {\n    if (maskBuffer[i] === 0xff) {\n      maskLength += 8;\n    } else {\n      var octet = maskBuffer[i] & 0xff;\n      while (octet) {\n        octet = (octet << 1) & 0xff;\n        maskLength++;\n      }\n    }\n  }\n\n  var numberOfAddresses = Math.pow(2, 32 - maskLength);\n\n  return {\n    networkAddress: ip.fromLong(networkAddress),\n    firstAddress: numberOfAddresses <= 2\n      ? ip.fromLong(networkAddress)\n      : ip.fromLong(networkAddress + 1),\n    lastAddress: numberOfAddresses <= 2\n      ? ip.fromLong(networkAddress + numberOfAddresses - 1)\n      : ip.fromLong(networkAddress + numberOfAddresses - 2),\n    broadcastAddress: ip.fromLong(networkAddress + numberOfAddresses - 1),\n    subnetMask: mask,\n    subnetMaskLength: maskLength,\n    numHosts: numberOfAddresses <= 2\n      ? numberOfAddresses : numberOfAddresses - 2,\n    length: numberOfAddresses,\n    contains(other) {\n      return networkAddress === ip.toLong(ip.mask(other, mask));\n    },\n  };\n};\n\nip.cidrSubnet = function (cidrString) {\n  var cidrParts = cidrString.split('/');\n\n  var addr = cidrParts[0];\n  if (cidrParts.length !== 2) {\n    throw new Error(`invalid CIDR subnet: ${addr}`);\n  }\n\n  var mask = ip.fromPrefixLen(parseInt(cidrParts[1], 10));\n\n  return ip.subnet(addr, mask);\n};\n\nip.not = function (addr) {\n  var buff = ip.toBuffer(addr);\n  for (var i = 0; i < buff.length; i++) {\n    buff[i] = 0xff ^ buff[i];\n  }\n  return ip.toString(buff);\n};\n\nip.or = function (a, b) {\n  var i;\n\n  a = ip.toBuffer(a);\n  b = ip.toBuffer(b);\n\n  // same protocol\n  if (a.length === b.length) {\n    for (i = 0; i < a.length; ++i) {\n      a[i] |= b[i];\n    }\n    return ip.toString(a);\n\n  // mixed protocols\n  }\n  var buff = a;\n  var other = b;\n  if (b.length > a.length) {\n    buff = b;\n    other = a;\n  }\n\n  var offset = buff.length - other.length;\n  for (i = offset; i < buff.length; ++i) {\n    buff[i] |= other[i - offset];\n  }\n\n  return ip.toString(buff);\n};\n\nip.isEqual = function (a, b) {\n  var i;\n\n  a = ip.toBuffer(a);\n  b = ip.toBuffer(b);\n\n  // Same protocol\n  if (a.length === b.length) {\n    for (i = 0; i < a.length; i++) {\n      if (a[i] !== b[i]) return false;\n    }\n    return true;\n  }\n\n  // Swap\n  if (b.length === 4) {\n    var t = b;\n    b = a;\n    a = t;\n  }\n\n  // a - IPv4, b - IPv6\n  for (i = 0; i < 10; i++) {\n    if (b[i] !== 0) return false;\n  }\n\n  var word = b.readUInt16BE(10);\n  if (word !== 0 && word !== 0xffff) return false;\n\n  for (i = 0; i < 4; i++) {\n    if (a[i] !== b[i + 12]) return false;\n  }\n\n  return true;\n};\n\nip.isPrivate = function (addr) {\n  return /^(::f{4}:)?10\\.([0-9]{1,3})\\.([0-9]{1,3})\\.([0-9]{1,3})$/i\n    .test(addr)\n    || /^(::f{4}:)?192\\.168\\.([0-9]{1,3})\\.([0-9]{1,3})$/i.test(addr)\n    || /^(::f{4}:)?172\\.(1[6-9]|2\\d|30|31)\\.([0-9]{1,3})\\.([0-9]{1,3})$/i\n      .test(addr)\n    || /^(::f{4}:)?127\\.([0-9]{1,3})\\.([0-9]{1,3})\\.([0-9]{1,3})$/i.test(addr)\n    || /^(::f{4}:)?169\\.254\\.([0-9]{1,3})\\.([0-9]{1,3})$/i.test(addr)\n    || /^f[cd][0-9a-f]{2}:/i.test(addr)\n    || /^fe80:/i.test(addr)\n    || /^::1$/.test(addr)\n    || /^::$/.test(addr);\n};\n\nip.isPublic = function (addr) {\n  return !ip.isPrivate(addr);\n};\n\nip.isLoopback = function (addr) {\n  return /^(::f{4}:)?127\\.([0-9]{1,3})\\.([0-9]{1,3})\\.([0-9]{1,3})/\n    .test(addr)\n    || /^fe80::1$/.test(addr)\n    || /^::1$/.test(addr)\n    || /^::$/.test(addr);\n};\n\nip.loopback = function (family) {\n  //\n  // Default to `ipv4`\n  //\n  family = _normalizeFamily(family);\n\n  if (family !== 'ipv4' && family !== 'ipv6') {\n    throw new Error('family must be ipv4 or ipv6');\n  }\n\n  return family === 'ipv4' ? '127.0.0.1' : 'fe80::1';\n};\n\n//\n// ### function address (name, family)\n// #### @name {string|'public'|'private'} **Optional** Name or security\n//      of the network interface.\n// #### @family {ipv4|ipv6} **Optional** IP family of the address (defaults\n//      to ipv4).\n//\n// Returns the address for the network interface on the current system with\n// the specified `name`:\n//   * String: First `family` address of the interface.\n//             If not found see `undefined`.\n//   * 'public': the first public ip address of family.\n//   * 'private': the first private ip address of family.\n//   * undefined: First address with `ipv4` or loopback address `127.0.0.1`.\n//\nip.address = function (name, family) {\n  var interfaces = os.networkInterfaces();\n\n  //\n  // Default to `ipv4`\n  //\n  family = _normalizeFamily(family);\n\n  //\n  // If a specific network interface has been named,\n  // return the address.\n  //\n  if (name && name !== 'private' && name !== 'public') {\n    var res = interfaces[name].filter((details) => {\n      var itemFamily = _normalizeFamily(details.family);\n      return itemFamily === family;\n    });\n    if (res.length === 0) {\n      return undefined;\n    }\n    return res[0].address;\n  }\n\n  var all = Object.keys(interfaces).map((nic) => {\n    //\n    // Note: name will only be `public` or `private`\n    // when this is called.\n    //\n    var addresses = interfaces[nic].filter((details) => {\n      details.family = _normalizeFamily(details.family);\n      if (details.family !== family || ip.isLoopback(details.address)) {\n        return false;\n      } if (!name) {\n        return true;\n      }\n\n      return name === 'public' ? ip.isPrivate(details.address)\n        : ip.isPublic(details.address);\n    });\n\n    return addresses.length ? addresses[0].address : undefined;\n  }).filter(Boolean);\n\n  return !all.length ? ip.loopback(family) : all[0];\n};\n\nip.toLong = function (ip) {\n  var ipl = 0;\n  ip.split('.').forEach((octet) => {\n    ipl <<= 8;\n    ipl += parseInt(octet);\n  });\n  return (ipl >>> 0);\n};\n\nip.fromLong = function (ipl) {\n  return (`${ipl >>> 24}.${\n    ipl >> 16 & 255}.${\n    ipl >> 8 & 255}.${\n    ipl & 255}`);\n};\n","'use strict';\n\nclass CancelError extends Error {\n\tconstructor(reason) {\n\t\tsuper(reason || 'Promise was canceled');\n\t\tthis.name = 'CancelError';\n\t}\n\n\tget isCanceled() {\n\t\treturn true;\n\t}\n}\n\nclass PCancelable {\n\tstatic fn(userFn) {\n\t\treturn (...arguments_) => {\n\t\t\treturn new PCancelable((resolve, reject, onCancel) => {\n\t\t\t\targuments_.push(onCancel);\n\t\t\t\t// eslint-disable-next-line promise/prefer-await-to-then\n\t\t\t\tuserFn(...arguments_).then(resolve, reject);\n\t\t\t});\n\t\t};\n\t}\n\n\tconstructor(executor) {\n\t\tthis._cancelHandlers = [];\n\t\tthis._isPending = true;\n\t\tthis._isCanceled = false;\n\t\tthis._rejectOnCancel = true;\n\n\t\tthis._promise = new Promise((resolve, reject) => {\n\t\t\tthis._reject = reject;\n\n\t\t\tconst onResolve = value => {\n\t\t\t\tif (!this._isCanceled || !onCancel.shouldReject) {\n\t\t\t\t\tthis._isPending = false;\n\t\t\t\t\tresolve(value);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tconst onReject = error => {\n\t\t\t\tthis._isPending = false;\n\t\t\t\treject(error);\n\t\t\t};\n\n\t\t\tconst onCancel = handler => {\n\t\t\t\tif (!this._isPending) {\n\t\t\t\t\tthrow new Error('The `onCancel` handler was attached after the promise settled.');\n\t\t\t\t}\n\n\t\t\t\tthis._cancelHandlers.push(handler);\n\t\t\t};\n\n\t\t\tObject.defineProperties(onCancel, {\n\t\t\t\tshouldReject: {\n\t\t\t\t\tget: () => this._rejectOnCancel,\n\t\t\t\t\tset: boolean => {\n\t\t\t\t\t\tthis._rejectOnCancel = boolean;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn executor(onResolve, onReject, onCancel);\n\t\t});\n\t}\n\n\tthen(onFulfilled, onRejected) {\n\t\t// eslint-disable-next-line promise/prefer-await-to-then\n\t\treturn this._promise.then(onFulfilled, onRejected);\n\t}\n\n\tcatch(onRejected) {\n\t\treturn this._promise.catch(onRejected);\n\t}\n\n\tfinally(onFinally) {\n\t\treturn this._promise.finally(onFinally);\n\t}\n\n\tcancel(reason) {\n\t\tif (!this._isPending || this._isCanceled) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._isCanceled = true;\n\n\t\tif (this._cancelHandlers.length > 0) {\n\t\t\ttry {\n\t\t\t\tfor (const handler of this._cancelHandlers) {\n\t\t\t\t\thandler();\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tthis._reject(error);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tif (this._rejectOnCancel) {\n\t\t\tthis._reject(new CancelError(reason));\n\t\t}\n\t}\n\n\tget isCanceled() {\n\t\treturn this._isCanceled;\n\t}\n}\n\nObject.setPrototypeOf(PCancelable.prototype, Promise.prototype);\n\nmodule.exports = PCancelable;\nmodule.exports.CancelError = CancelError;\n","'use strict';\n\nvar ip = exports;\nvar Buffer = require('buffer').Buffer;\nvar os = require('os');\n\nip.toBuffer = function(ip, buff, offset) {\n  offset = ~~offset;\n\n  var result;\n\n  if (this.isV4Format(ip)) {\n    result = buff || new Buffer(offset + 4);\n    ip.split(/\\./g).map(function(byte) {\n      result[offset++] = parseInt(byte, 10) & 0xff;\n    });\n  } else if (this.isV6Format(ip)) {\n    var sections = ip.split(':', 8);\n\n    var i;\n    for (i = 0; i < sections.length; i++) {\n      var isv4 = this.isV4Format(sections[i]);\n      var v4Buffer;\n\n      if (isv4) {\n        v4Buffer = this.toBuffer(sections[i]);\n        sections[i] = v4Buffer.slice(0, 2).toString('hex');\n      }\n\n      if (v4Buffer && ++i < 8) {\n        sections.splice(i, 0, v4Buffer.slice(2, 4).toString('hex'));\n      }\n    }\n\n    if (sections[0] === '') {\n      while (sections.length < 8) sections.unshift('0');\n    } else if (sections[sections.length - 1] === '') {\n      while (sections.length < 8) sections.push('0');\n    } else if (sections.length < 8) {\n      for (i = 0; i < sections.length && sections[i] !== ''; i++);\n      var argv = [ i, 1 ];\n      for (i = 9 - sections.length; i > 0; i--) {\n        argv.push('0');\n      }\n      sections.splice.apply(sections, argv);\n    }\n\n    result = buff || new Buffer(offset + 16);\n    for (i = 0; i < sections.length; i++) {\n      var word = parseInt(sections[i], 16);\n      result[offset++] = (word >> 8) & 0xff;\n      result[offset++] = word & 0xff;\n    }\n  }\n\n  if (!result) {\n    throw Error('Invalid ip address: ' + ip);\n  }\n\n  return result;\n};\n\nip.toString = function(buff, offset, length) {\n  offset = ~~offset;\n  length = length || (buff.length - offset);\n\n  var result = [];\n  if (length === 4) {\n    // IPv4\n    for (var i = 0; i < length; i++) {\n      result.push(buff[offset + i]);\n    }\n    result = result.join('.');\n  } else if (length === 16) {\n    // IPv6\n    for (var i = 0; i < length; i += 2) {\n      result.push(buff.readUInt16BE(offset + i).toString(16));\n    }\n    result = result.join(':');\n    result = result.replace(/(^|:)0(:0)*:0(:|$)/, '$1::$3');\n    result = result.replace(/:{3,4}/, '::');\n  }\n\n  return result;\n};\n\nvar ipv4Regex = /^(\\d{1,3}\\.){3,3}\\d{1,3}$/;\nvar ipv6Regex =\n    /^(::)?(((\\d{1,3}\\.){3}(\\d{1,3}){1})?([0-9a-f]){0,4}:{0,2}){1,8}(::)?$/i;\n\nip.isV4Format = function(ip) {\n  return ipv4Regex.test(ip);\n};\n\nip.isV6Format = function(ip) {\n  return ipv6Regex.test(ip);\n};\nfunction _normalizeFamily(family) {\n  return family ? family.toLowerCase() : 'ipv4';\n}\n\nip.fromPrefixLen = function(prefixlen, family) {\n  if (prefixlen > 32) {\n    family = 'ipv6';\n  } else {\n    family = _normalizeFamily(family);\n  }\n\n  var len = 4;\n  if (family === 'ipv6') {\n    len = 16;\n  }\n  var buff = new Buffer(len);\n\n  for (var i = 0, n = buff.length; i < n; ++i) {\n    var bits = 8;\n    if (prefixlen < 8) {\n      bits = prefixlen;\n    }\n    prefixlen -= bits;\n\n    buff[i] = ~(0xff >> bits) & 0xff;\n  }\n\n  return ip.toString(buff);\n};\n\nip.mask = function(addr, mask) {\n  addr = ip.toBuffer(addr);\n  mask = ip.toBuffer(mask);\n\n  var result = new Buffer(Math.max(addr.length, mask.length));\n\n  var i = 0;\n  // Same protocol - do bitwise and\n  if (addr.length === mask.length) {\n    for (i = 0; i < addr.length; i++) {\n      result[i] = addr[i] & mask[i];\n    }\n  } else if (mask.length === 4) {\n    // IPv6 address and IPv4 mask\n    // (Mask low bits)\n    for (i = 0; i < mask.length; i++) {\n      result[i] = addr[addr.length - 4  + i] & mask[i];\n    }\n  } else {\n    // IPv6 mask and IPv4 addr\n    for (var i = 0; i < result.length - 6; i++) {\n      result[i] = 0;\n    }\n\n    // ::ffff:ipv4\n    result[10] = 0xff;\n    result[11] = 0xff;\n    for (i = 0; i < addr.length; i++) {\n      result[i + 12] = addr[i] & mask[i + 12];\n    }\n    i = i + 12;\n  }\n  for (; i < result.length; i++)\n    result[i] = 0;\n\n  return ip.toString(result);\n};\n\nip.cidr = function(cidrString) {\n  var cidrParts = cidrString.split('/');\n\n  var addr = cidrParts[0];\n  if (cidrParts.length !== 2)\n    throw new Error('invalid CIDR subnet: ' + addr);\n\n  var mask = ip.fromPrefixLen(parseInt(cidrParts[1], 10));\n\n  return ip.mask(addr, mask);\n};\n\nip.subnet = function(addr, mask) {\n  var networkAddress = ip.toLong(ip.mask(addr, mask));\n\n  // Calculate the mask's length.\n  var maskBuffer = ip.toBuffer(mask);\n  var maskLength = 0;\n\n  for (var i = 0; i < maskBuffer.length; i++) {\n    if (maskBuffer[i] === 0xff) {\n      maskLength += 8;\n    } else {\n      var octet = maskBuffer[i] & 0xff;\n      while (octet) {\n        octet = (octet << 1) & 0xff;\n        maskLength++;\n      }\n    }\n  }\n\n  var numberOfAddresses = Math.pow(2, 32 - maskLength);\n\n  return {\n    networkAddress: ip.fromLong(networkAddress),\n    firstAddress: numberOfAddresses <= 2 ?\n                    ip.fromLong(networkAddress) :\n                    ip.fromLong(networkAddress + 1),\n    lastAddress: numberOfAddresses <= 2 ?\n                    ip.fromLong(networkAddress + numberOfAddresses - 1) :\n                    ip.fromLong(networkAddress + numberOfAddresses - 2),\n    broadcastAddress: ip.fromLong(networkAddress + numberOfAddresses - 1),\n    subnetMask: mask,\n    subnetMaskLength: maskLength,\n    numHosts: numberOfAddresses <= 2 ?\n                numberOfAddresses : numberOfAddresses - 2,\n    length: numberOfAddresses,\n    contains: function(other) {\n      return networkAddress === ip.toLong(ip.mask(other, mask));\n    }\n  };\n};\n\nip.cidrSubnet = function(cidrString) {\n  var cidrParts = cidrString.split('/');\n\n  var addr = cidrParts[0];\n  if (cidrParts.length !== 2)\n    throw new Error('invalid CIDR subnet: ' + addr);\n\n  var mask = ip.fromPrefixLen(parseInt(cidrParts[1], 10));\n\n  return ip.subnet(addr, mask);\n};\n\nip.not = function(addr) {\n  var buff = ip.toBuffer(addr);\n  for (var i = 0; i < buff.length; i++) {\n    buff[i] = 0xff ^ buff[i];\n  }\n  return ip.toString(buff);\n};\n\nip.or = function(a, b) {\n  a = ip.toBuffer(a);\n  b = ip.toBuffer(b);\n\n  // same protocol\n  if (a.length === b.length) {\n    for (var i = 0; i < a.length; ++i) {\n      a[i] |= b[i];\n    }\n    return ip.toString(a);\n\n  // mixed protocols\n  } else {\n    var buff = a;\n    var other = b;\n    if (b.length > a.length) {\n      buff = b;\n      other = a;\n    }\n\n    var offset = buff.length - other.length;\n    for (var i = offset; i < buff.length; ++i) {\n      buff[i] |= other[i - offset];\n    }\n\n    return ip.toString(buff);\n  }\n};\n\nip.isEqual = function(a, b) {\n  a = ip.toBuffer(a);\n  b = ip.toBuffer(b);\n\n  // Same protocol\n  if (a.length === b.length) {\n    for (var i = 0; i < a.length; i++) {\n      if (a[i] !== b[i]) return false;\n    }\n    return true;\n  }\n\n  // Swap\n  if (b.length === 4) {\n    var t = b;\n    b = a;\n    a = t;\n  }\n\n  // a - IPv4, b - IPv6\n  for (var i = 0; i < 10; i++) {\n    if (b[i] !== 0) return false;\n  }\n\n  var word = b.readUInt16BE(10);\n  if (word !== 0 && word !== 0xffff) return false;\n\n  for (var i = 0; i < 4; i++) {\n    if (a[i] !== b[i + 12]) return false;\n  }\n\n  return true;\n};\n\nip.isPrivate = function(addr) {\n  return /^(::f{4}:)?10\\.([0-9]{1,3})\\.([0-9]{1,3})\\.([0-9]{1,3})$/i\n      .test(addr) ||\n    /^(::f{4}:)?192\\.168\\.([0-9]{1,3})\\.([0-9]{1,3})$/i.test(addr) ||\n    /^(::f{4}:)?172\\.(1[6-9]|2\\d|30|31)\\.([0-9]{1,3})\\.([0-9]{1,3})$/i\n      .test(addr) ||\n    /^(::f{4}:)?127\\.([0-9]{1,3})\\.([0-9]{1,3})\\.([0-9]{1,3})$/i.test(addr) ||\n    /^(::f{4}:)?169\\.254\\.([0-9]{1,3})\\.([0-9]{1,3})$/i.test(addr) ||\n    /^f[cd][0-9a-f]{2}:/i.test(addr) ||\n    /^fe80:/i.test(addr) ||\n    /^::1$/.test(addr) ||\n    /^::$/.test(addr);\n};\n\nip.isPublic = function(addr) {\n  return !ip.isPrivate(addr);\n};\n\nip.isLoopback = function(addr) {\n  return /^(::f{4}:)?127\\.([0-9]{1,3})\\.([0-9]{1,3})\\.([0-9]{1,3})/\n      .test(addr) ||\n    /^fe80::1$/.test(addr) ||\n    /^::1$/.test(addr) ||\n    /^::$/.test(addr);\n};\n\nip.loopback = function(family) {\n  //\n  // Default to `ipv4`\n  //\n  family = _normalizeFamily(family);\n\n  if (family !== 'ipv4' && family !== 'ipv6') {\n    throw new Error('family must be ipv4 or ipv6');\n  }\n\n  return family === 'ipv4' ? '127.0.0.1' : 'fe80::1';\n};\n\n//\n// ### function address (name, family)\n// #### @name {string|'public'|'private'} **Optional** Name or security\n//      of the network interface.\n// #### @family {ipv4|ipv6} **Optional** IP family of the address (defaults\n//      to ipv4).\n//\n// Returns the address for the network interface on the current system with\n// the specified `name`:\n//   * String: First `family` address of the interface.\n//             If not found see `undefined`.\n//   * 'public': the first public ip address of family.\n//   * 'private': the first private ip address of family.\n//   * undefined: First address with `ipv4` or loopback address `127.0.0.1`.\n//\nip.address = function(name, family) {\n  var interfaces = os.networkInterfaces();\n  var all;\n\n  //\n  // Default to `ipv4`\n  //\n  family = _normalizeFamily(family);\n\n  //\n  // If a specific network interface has been named,\n  // return the address.\n  //\n  if (name && name !== 'private' && name !== 'public') {\n    var res = interfaces[name].filter(function(details) {\n      var itemFamily = details.family.toLowerCase();\n      return itemFamily === family;\n    });\n    if (res.length === 0)\n      return undefined;\n    return res[0].address;\n  }\n\n  var all = Object.keys(interfaces).map(function (nic) {\n    //\n    // Note: name will only be `public` or `private`\n    // when this is called.\n    //\n    var addresses = interfaces[nic].filter(function (details) {\n      details.family = details.family.toLowerCase();\n      if (details.family !== family || ip.isLoopback(details.address)) {\n        return false;\n      } else if (!name) {\n        return true;\n      }\n\n      return name === 'public' ? ip.isPrivate(details.address) :\n          ip.isPublic(details.address);\n    });\n\n    return addresses.length ? addresses[0].address : undefined;\n  }).filter(Boolean);\n\n  return !all.length ? ip.loopback(family) : all[0];\n};\n\nip.toLong = function(ip) {\n  var ipl = 0;\n  ip.split('.').forEach(function(octet) {\n    ipl <<= 8;\n    ipl += parseInt(octet);\n  });\n  return(ipl >>> 0);\n};\n\nip.fromLong = function(ipl) {\n  return ((ipl >>> 24) + '.' +\n      (ipl >> 16 & 255) + '.' +\n      (ipl >> 8 & 255) + '.' +\n      (ipl & 255) );\n};\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MixinDeviceBase = exports.ScryptedDeviceBase = void 0;\n__exportStar(require(\"../types/gen/index\"), exports);\nconst index_1 = require(\"../types/gen/index\");\n/**\n * @category Core Reference\n */\nclass ScryptedDeviceBase extends index_1.DeviceBase {\n    constructor(nativeId) {\n        super();\n        this.nativeId = nativeId;\n    }\n    get storage() {\n        if (!this._storage) {\n            this._storage = deviceManager.getDeviceStorage(this.nativeId);\n        }\n        return this._storage;\n    }\n    get log() {\n        if (!this._log) {\n            this._log = deviceManager.getDeviceLogger(this.nativeId);\n        }\n        return this._log;\n    }\n    get console() {\n        if (!this._console) {\n            this._console = deviceManager.getDeviceConsole(this.nativeId);\n        }\n        return this._console;\n    }\n    async createMediaObject(data, mimeType) {\n        return mediaManager.createMediaObject(data, mimeType, {\n            sourceId: this.id,\n        });\n    }\n    getMediaObjectConsole(mediaObject) {\n        if (typeof mediaObject.sourceId !== 'string')\n            return this.console;\n        return deviceManager.getMixinConsole(mediaObject.sourceId, this.nativeId);\n    }\n    _lazyLoadDeviceState() {\n        if (!this._deviceState) {\n            if (this.nativeId) {\n                this._deviceState = deviceManager.getDeviceState(this.nativeId);\n            }\n            else {\n                this._deviceState = deviceManager.getDeviceState();\n            }\n        }\n    }\n    /**\n     * Fire an event for this device.\n     */\n    onDeviceEvent(eventInterface, eventData) {\n        return deviceManager.onDeviceEvent(this.nativeId, eventInterface, eventData);\n    }\n}\nexports.ScryptedDeviceBase = ScryptedDeviceBase;\n/**\n * @category Mixin Reference\n */\nclass MixinDeviceBase extends index_1.DeviceBase {\n    constructor(options) {\n        super();\n        this._listeners = new Set();\n        this.nativeId = systemManager.getDeviceById(this.id)?.nativeId;\n        this.mixinDevice = options.mixinDevice;\n        this.mixinDeviceInterfaces = options.mixinDeviceInterfaces;\n        this.mixinStorageSuffix = options.mixinStorageSuffix;\n        this._deviceState = options.mixinDeviceState;\n        // 8-11-2022\n        // RpcProxy will trap all properties, and the following check/hack will determine\n        // if the device state came from another node worker thread.\n        // This should ultimately be removed at some point in the future.\n        if (this._deviceState.__rpcproxy_traps_all_properties && deviceManager.createDeviceState && typeof this._deviceState.id === 'string') {\n            this._deviceState = deviceManager.createDeviceState(this._deviceState.id, this._deviceState.setState);\n        }\n        this.mixinProviderNativeId = options.mixinProviderNativeId;\n    }\n    get storage() {\n        if (!this._storage) {\n            const mixinStorageSuffix = this.mixinStorageSuffix;\n            const mixinStorageKey = this.id + (mixinStorageSuffix ? ':' + mixinStorageSuffix : '');\n            this._storage = deviceManager.getMixinStorage(mixinStorageKey, this.mixinProviderNativeId);\n        }\n        return this._storage;\n    }\n    get console() {\n        if (!this._console) {\n            if (deviceManager.getMixinConsole)\n                this._console = deviceManager.getMixinConsole(this.id, this.mixinProviderNativeId);\n            else\n                this._console = deviceManager.getDeviceConsole(this.mixinProviderNativeId);\n        }\n        return this._console;\n    }\n    async createMediaObject(data, mimeType) {\n        return mediaManager.createMediaObject(data, mimeType, {\n            sourceId: this.id,\n        });\n    }\n    getMediaObjectConsole(mediaObject) {\n        if (typeof mediaObject.sourceId !== 'string')\n            return this.console;\n        return deviceManager.getMixinConsole(mediaObject.sourceId, this.mixinProviderNativeId);\n    }\n    /**\n     * Fire an event for this device.\n     */\n    onDeviceEvent(eventInterface, eventData) {\n        return deviceManager.onMixinEvent(this.id, this, eventInterface, eventData);\n    }\n    _lazyLoadDeviceState() {\n    }\n    manageListener(listener) {\n        this._listeners.add(listener);\n    }\n    release() {\n        for (const l of this._listeners) {\n            l.removeListener();\n        }\n    }\n}\nexports.MixinDeviceBase = MixinDeviceBase;\n(function () {\n    function _createGetState(state) {\n        return function () {\n            this._lazyLoadDeviceState();\n            return this._deviceState?.[state];\n        };\n    }\n    function _createSetState(state) {\n        return function (value) {\n            this._lazyLoadDeviceState();\n            if (!this._deviceState)\n                console.warn('device state is unavailable. the device must be discovered with deviceManager.onDeviceDiscovered or deviceManager.onDevicesChanged before the state can be set.');\n            else\n                this._deviceState[state] = value;\n        };\n    }\n    for (const field of Object.values(index_1.ScryptedInterfaceProperty)) {\n        if (field === index_1.ScryptedInterfaceProperty.nativeId)\n            continue;\n        Object.defineProperty(ScryptedDeviceBase.prototype, field, {\n            set: _createSetState(field),\n            get: _createGetState(field),\n        });\n        Object.defineProperty(MixinDeviceBase.prototype, field, {\n            set: _createSetState(field),\n            get: _createGetState(field),\n        });\n    }\n})();\nlet sdk = {};\ntry {\n    let runtimeAPI;\n    try {\n        runtimeAPI = pluginRuntimeAPI;\n    }\n    catch (e) {\n    }\n    sdk = Object.assign(sdk, {\n        log: deviceManager.getDeviceLogger(undefined),\n        deviceManager,\n        endpointManager,\n        mediaManager,\n        systemManager,\n        pluginHostAPI,\n        ...runtimeAPI,\n    });\n    try {\n        systemManager.setScryptedInterfaceDescriptors?.(index_1.TYPES_VERSION, index_1.ScryptedInterfaceDescriptors)?.catch(() => { });\n    }\n    catch (e) {\n    }\n}\ncatch (e) {\n    console.error('sdk initialization error, import @scrypted/types or use @scrypted/client instead', e);\n}\nexports.default = sdk;\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.StorageSettings = void 0;\nconst _1 = __importStar(require(\".\"));\nconst { systemManager } = _1.default;\nfunction parseValue(value, setting, readDefaultValue, rawDevice) {\n    const type = setting.multiple ? 'array' : setting.type;\n    if (type === 'boolean') {\n        if (value === 'true')\n            return true;\n        if (value === 'false')\n            return false;\n        return readDefaultValue() || false;\n    }\n    if (type === 'number') {\n        return parseFloat(value) || readDefaultValue() || 0;\n    }\n    if (type === 'integer') {\n        return parseInt(value) || readDefaultValue() || 0;\n    }\n    if (type === 'array') {\n        try {\n            return JSON.parse(value);\n        }\n        catch (e) {\n            return readDefaultValue() || [];\n        }\n    }\n    if (type === 'device') {\n        if (rawDevice)\n            return value;\n        return systemManager.getDeviceById(value) || systemManager.getDeviceById(readDefaultValue());\n    }\n    // string type, so check if it is json.\n    if (value && setting.json) {\n        try {\n            return JSON.parse(value);\n        }\n        catch (e) {\n            return readDefaultValue();\n        }\n    }\n    return value || readDefaultValue();\n}\nclass StorageSettings {\n    constructor(device, settings) {\n        this.device = device;\n        this.settings = settings;\n        this.values = {};\n        this.hasValue = {};\n        for (const key of Object.keys(settings)) {\n            const setting = settings[key];\n            const rawGet = () => this.getItem(key);\n            let get;\n            if (setting.type !== 'clippath') {\n                get = rawGet;\n            }\n            else {\n                // maybe need a mapPut. clippath is the only complex type at the moment.\n                get = () => {\n                    try {\n                        return JSON.parse(rawGet());\n                    }\n                    catch (e) {\n                    }\n                };\n            }\n            Object.defineProperty(this.values, key, {\n                get,\n                set: value => this.putSetting(key, value),\n                enumerable: true,\n            });\n            Object.defineProperty(this.hasValue, key, {\n                get: () => this.device.storage.getItem(key) != null,\n                enumerable: true,\n            });\n        }\n    }\n    get keys() {\n        const ret = {};\n        for (const key of Object.keys(this.settings)) {\n            ret[key] = key;\n        }\n        return ret;\n    }\n    async getSettings() {\n        const onGet = await this.options?.onGet?.();\n        const ret = [];\n        for (const [key, setting] of Object.entries(this.settings)) {\n            let s = Object.assign({}, setting);\n            if (onGet?.[key])\n                s = Object.assign(s, onGet[key]);\n            if (s.onGet)\n                s = Object.assign(s, await s.onGet());\n            if (s.hide || await this.options?.hide?.[key]?.())\n                continue;\n            s.key = key;\n            s.value = this.getItemInternal(key, s, true);\n            ret.push(s);\n            delete s.onPut;\n            delete s.onGet;\n            delete s.mapPut;\n            delete s.mapGet;\n        }\n        return ret;\n    }\n    async putSetting(key, value) {\n        const setting = this.settings[key];\n        let oldValue;\n        if (setting)\n            oldValue = this.getItemInternal(key, setting);\n        return this.putSettingInternal(setting, oldValue, key, value);\n    }\n    putSettingInternal(setting, oldValue, key, value) {\n        if (!setting?.noStore) {\n            if (setting?.mapPut)\n                value = setting.mapPut(oldValue, value);\n            // nullish values should be removed, since Storage can't persist them correctly.\n            if (typeof value === 'object')\n                this.device.storage.setItem(key, JSON.stringify(value));\n            else if (value == null)\n                this.device.storage.removeItem(key);\n            else\n                this.device.storage.setItem(key, value?.toString());\n        }\n        setting?.onPut?.(oldValue, value);\n        this.device.onDeviceEvent(_1.ScryptedInterface.Settings, undefined);\n    }\n    getItemInternal(key, setting, rawDevice) {\n        if (!setting)\n            return this.device.storage.getItem(key);\n        const readDefaultValue = () => {\n            if (setting.persistedDefaultValue) {\n                this.putSettingInternal(setting, undefined, key, setting.persistedDefaultValue);\n                return setting.persistedDefaultValue;\n            }\n            return setting.defaultValue;\n        };\n        const ret = parseValue(this.device.storage.getItem(key), setting, readDefaultValue, rawDevice);\n        return setting.mapGet ? setting.mapGet(ret) : ret;\n    }\n    getItem(key) {\n        return this.getItemInternal(key, this.settings[key]);\n    }\n}\nexports.StorageSettings = StorageSettings;\n//# sourceMappingURL=storage-settings.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ScryptedMimeTypes = exports.ScryptedInterface = exports.MediaPlayerState = exports.SecuritySystemObstruction = exports.SecuritySystemMode = exports.AirQuality = exports.ChargeState = exports.LockState = exports.PanTiltZoomMovement = exports.ThermostatMode = exports.TemperatureUnit = exports.FanMode = exports.HumidityMode = exports.ScryptedDeviceType = exports.ScryptedInterfaceDescriptors = exports.ScryptedInterfaceMethod = exports.ScryptedInterfaceProperty = exports.DeviceBase = exports.TYPES_VERSION = void 0;\nexports.TYPES_VERSION = \"0.2.79\";\nclass DeviceBase {\n}\nexports.DeviceBase = DeviceBase;\nvar ScryptedInterfaceProperty;\n(function (ScryptedInterfaceProperty) {\n    ScryptedInterfaceProperty[\"id\"] = \"id\";\n    ScryptedInterfaceProperty[\"info\"] = \"info\";\n    ScryptedInterfaceProperty[\"interfaces\"] = \"interfaces\";\n    ScryptedInterfaceProperty[\"mixins\"] = \"mixins\";\n    ScryptedInterfaceProperty[\"name\"] = \"name\";\n    ScryptedInterfaceProperty[\"nativeId\"] = \"nativeId\";\n    ScryptedInterfaceProperty[\"pluginId\"] = \"pluginId\";\n    ScryptedInterfaceProperty[\"providedInterfaces\"] = \"providedInterfaces\";\n    ScryptedInterfaceProperty[\"providedName\"] = \"providedName\";\n    ScryptedInterfaceProperty[\"providedRoom\"] = \"providedRoom\";\n    ScryptedInterfaceProperty[\"providedType\"] = \"providedType\";\n    ScryptedInterfaceProperty[\"providerId\"] = \"providerId\";\n    ScryptedInterfaceProperty[\"room\"] = \"room\";\n    ScryptedInterfaceProperty[\"type\"] = \"type\";\n    ScryptedInterfaceProperty[\"on\"] = \"on\";\n    ScryptedInterfaceProperty[\"brightness\"] = \"brightness\";\n    ScryptedInterfaceProperty[\"colorTemperature\"] = \"colorTemperature\";\n    ScryptedInterfaceProperty[\"rgb\"] = \"rgb\";\n    ScryptedInterfaceProperty[\"hsv\"] = \"hsv\";\n    ScryptedInterfaceProperty[\"running\"] = \"running\";\n    ScryptedInterfaceProperty[\"paused\"] = \"paused\";\n    ScryptedInterfaceProperty[\"docked\"] = \"docked\";\n    ScryptedInterfaceProperty[\"temperatureSetting\"] = \"temperatureSetting\";\n    ScryptedInterfaceProperty[\"thermostatActiveMode\"] = \"thermostatActiveMode\";\n    ScryptedInterfaceProperty[\"thermostatAvailableModes\"] = \"thermostatAvailableModes\";\n    ScryptedInterfaceProperty[\"thermostatMode\"] = \"thermostatMode\";\n    ScryptedInterfaceProperty[\"thermostatSetpoint\"] = \"thermostatSetpoint\";\n    ScryptedInterfaceProperty[\"thermostatSetpointHigh\"] = \"thermostatSetpointHigh\";\n    ScryptedInterfaceProperty[\"thermostatSetpointLow\"] = \"thermostatSetpointLow\";\n    ScryptedInterfaceProperty[\"temperature\"] = \"temperature\";\n    ScryptedInterfaceProperty[\"temperatureUnit\"] = \"temperatureUnit\";\n    ScryptedInterfaceProperty[\"humidity\"] = \"humidity\";\n    ScryptedInterfaceProperty[\"ptzCapabilities\"] = \"ptzCapabilities\";\n    ScryptedInterfaceProperty[\"lockState\"] = \"lockState\";\n    ScryptedInterfaceProperty[\"entryOpen\"] = \"entryOpen\";\n    ScryptedInterfaceProperty[\"batteryLevel\"] = \"batteryLevel\";\n    ScryptedInterfaceProperty[\"chargeState\"] = \"chargeState\";\n    ScryptedInterfaceProperty[\"online\"] = \"online\";\n    ScryptedInterfaceProperty[\"fromMimeType\"] = \"fromMimeType\";\n    ScryptedInterfaceProperty[\"toMimeType\"] = \"toMimeType\";\n    ScryptedInterfaceProperty[\"binaryState\"] = \"binaryState\";\n    ScryptedInterfaceProperty[\"tampered\"] = \"tampered\";\n    ScryptedInterfaceProperty[\"powerDetected\"] = \"powerDetected\";\n    ScryptedInterfaceProperty[\"audioDetected\"] = \"audioDetected\";\n    ScryptedInterfaceProperty[\"motionDetected\"] = \"motionDetected\";\n    ScryptedInterfaceProperty[\"ambientLight\"] = \"ambientLight\";\n    ScryptedInterfaceProperty[\"occupied\"] = \"occupied\";\n    ScryptedInterfaceProperty[\"flooded\"] = \"flooded\";\n    ScryptedInterfaceProperty[\"ultraviolet\"] = \"ultraviolet\";\n    ScryptedInterfaceProperty[\"luminance\"] = \"luminance\";\n    ScryptedInterfaceProperty[\"position\"] = \"position\";\n    ScryptedInterfaceProperty[\"securitySystemState\"] = \"securitySystemState\";\n    ScryptedInterfaceProperty[\"pm10Density\"] = \"pm10Density\";\n    ScryptedInterfaceProperty[\"pm25Density\"] = \"pm25Density\";\n    ScryptedInterfaceProperty[\"vocDensity\"] = \"vocDensity\";\n    ScryptedInterfaceProperty[\"noxDensity\"] = \"noxDensity\";\n    ScryptedInterfaceProperty[\"co2ppm\"] = \"co2ppm\";\n    ScryptedInterfaceProperty[\"airQuality\"] = \"airQuality\";\n    ScryptedInterfaceProperty[\"humiditySetting\"] = \"humiditySetting\";\n    ScryptedInterfaceProperty[\"fan\"] = \"fan\";\n    ScryptedInterfaceProperty[\"applicationInfo\"] = \"applicationInfo\";\n})(ScryptedInterfaceProperty = exports.ScryptedInterfaceProperty || (exports.ScryptedInterfaceProperty = {}));\nvar ScryptedInterfaceMethod;\n(function (ScryptedInterfaceMethod) {\n    ScryptedInterfaceMethod[\"listen\"] = \"listen\";\n    ScryptedInterfaceMethod[\"probe\"] = \"probe\";\n    ScryptedInterfaceMethod[\"setMixins\"] = \"setMixins\";\n    ScryptedInterfaceMethod[\"setName\"] = \"setName\";\n    ScryptedInterfaceMethod[\"setRoom\"] = \"setRoom\";\n    ScryptedInterfaceMethod[\"setType\"] = \"setType\";\n    ScryptedInterfaceMethod[\"getPluginJson\"] = \"getPluginJson\";\n    ScryptedInterfaceMethod[\"turnOff\"] = \"turnOff\";\n    ScryptedInterfaceMethod[\"turnOn\"] = \"turnOn\";\n    ScryptedInterfaceMethod[\"setBrightness\"] = \"setBrightness\";\n    ScryptedInterfaceMethod[\"getTemperatureMaxK\"] = \"getTemperatureMaxK\";\n    ScryptedInterfaceMethod[\"getTemperatureMinK\"] = \"getTemperatureMinK\";\n    ScryptedInterfaceMethod[\"setColorTemperature\"] = \"setColorTemperature\";\n    ScryptedInterfaceMethod[\"setRgb\"] = \"setRgb\";\n    ScryptedInterfaceMethod[\"setHsv\"] = \"setHsv\";\n    ScryptedInterfaceMethod[\"sendNotification\"] = \"sendNotification\";\n    ScryptedInterfaceMethod[\"start\"] = \"start\";\n    ScryptedInterfaceMethod[\"stop\"] = \"stop\";\n    ScryptedInterfaceMethod[\"pause\"] = \"pause\";\n    ScryptedInterfaceMethod[\"resume\"] = \"resume\";\n    ScryptedInterfaceMethod[\"dock\"] = \"dock\";\n    ScryptedInterfaceMethod[\"setTemperature\"] = \"setTemperature\";\n    ScryptedInterfaceMethod[\"setThermostatMode\"] = \"setThermostatMode\";\n    ScryptedInterfaceMethod[\"setThermostatSetpoint\"] = \"setThermostatSetpoint\";\n    ScryptedInterfaceMethod[\"setThermostatSetpointHigh\"] = \"setThermostatSetpointHigh\";\n    ScryptedInterfaceMethod[\"setThermostatSetpointLow\"] = \"setThermostatSetpointLow\";\n    ScryptedInterfaceMethod[\"setTemperatureUnit\"] = \"setTemperatureUnit\";\n    ScryptedInterfaceMethod[\"getPictureOptions\"] = \"getPictureOptions\";\n    ScryptedInterfaceMethod[\"takePicture\"] = \"takePicture\";\n    ScryptedInterfaceMethod[\"getAudioStream\"] = \"getAudioStream\";\n    ScryptedInterfaceMethod[\"startDisplay\"] = \"startDisplay\";\n    ScryptedInterfaceMethod[\"stopDisplay\"] = \"stopDisplay\";\n    ScryptedInterfaceMethod[\"getVideoStream\"] = \"getVideoStream\";\n    ScryptedInterfaceMethod[\"getVideoStreamOptions\"] = \"getVideoStreamOptions\";\n    ScryptedInterfaceMethod[\"getRecordingStream\"] = \"getRecordingStream\";\n    ScryptedInterfaceMethod[\"getRecordingStreamCurrentTime\"] = \"getRecordingStreamCurrentTime\";\n    ScryptedInterfaceMethod[\"getRecordingStreamOptions\"] = \"getRecordingStreamOptions\";\n    ScryptedInterfaceMethod[\"getRecordingStreamThumbnail\"] = \"getRecordingStreamThumbnail\";\n    ScryptedInterfaceMethod[\"ptzCommand\"] = \"ptzCommand\";\n    ScryptedInterfaceMethod[\"getRecordedEvents\"] = \"getRecordedEvents\";\n    ScryptedInterfaceMethod[\"getVideoClip\"] = \"getVideoClip\";\n    ScryptedInterfaceMethod[\"getVideoClipThumbnail\"] = \"getVideoClipThumbnail\";\n    ScryptedInterfaceMethod[\"getVideoClips\"] = \"getVideoClips\";\n    ScryptedInterfaceMethod[\"removeVideoClips\"] = \"removeVideoClips\";\n    ScryptedInterfaceMethod[\"setVideoStreamOptions\"] = \"setVideoStreamOptions\";\n    ScryptedInterfaceMethod[\"startIntercom\"] = \"startIntercom\";\n    ScryptedInterfaceMethod[\"stopIntercom\"] = \"stopIntercom\";\n    ScryptedInterfaceMethod[\"lock\"] = \"lock\";\n    ScryptedInterfaceMethod[\"unlock\"] = \"unlock\";\n    ScryptedInterfaceMethod[\"addPassword\"] = \"addPassword\";\n    ScryptedInterfaceMethod[\"getPasswords\"] = \"getPasswords\";\n    ScryptedInterfaceMethod[\"removePassword\"] = \"removePassword\";\n    ScryptedInterfaceMethod[\"activate\"] = \"activate\";\n    ScryptedInterfaceMethod[\"deactivate\"] = \"deactivate\";\n    ScryptedInterfaceMethod[\"isReversible\"] = \"isReversible\";\n    ScryptedInterfaceMethod[\"closeEntry\"] = \"closeEntry\";\n    ScryptedInterfaceMethod[\"openEntry\"] = \"openEntry\";\n    ScryptedInterfaceMethod[\"getDevice\"] = \"getDevice\";\n    ScryptedInterfaceMethod[\"releaseDevice\"] = \"releaseDevice\";\n    ScryptedInterfaceMethod[\"adoptDevice\"] = \"adoptDevice\";\n    ScryptedInterfaceMethod[\"discoverDevices\"] = \"discoverDevices\";\n    ScryptedInterfaceMethod[\"createDevice\"] = \"createDevice\";\n    ScryptedInterfaceMethod[\"getCreateDeviceSettings\"] = \"getCreateDeviceSettings\";\n    ScryptedInterfaceMethod[\"getRefreshFrequency\"] = \"getRefreshFrequency\";\n    ScryptedInterfaceMethod[\"refresh\"] = \"refresh\";\n    ScryptedInterfaceMethod[\"getMediaStatus\"] = \"getMediaStatus\";\n    ScryptedInterfaceMethod[\"load\"] = \"load\";\n    ScryptedInterfaceMethod[\"seek\"] = \"seek\";\n    ScryptedInterfaceMethod[\"skipNext\"] = \"skipNext\";\n    ScryptedInterfaceMethod[\"skipPrevious\"] = \"skipPrevious\";\n    ScryptedInterfaceMethod[\"convert\"] = \"convert\";\n    ScryptedInterfaceMethod[\"getSettings\"] = \"getSettings\";\n    ScryptedInterfaceMethod[\"putSetting\"] = \"putSetting\";\n    ScryptedInterfaceMethod[\"armSecuritySystem\"] = \"armSecuritySystem\";\n    ScryptedInterfaceMethod[\"disarmSecuritySystem\"] = \"disarmSecuritySystem\";\n    ScryptedInterfaceMethod[\"getReadmeMarkdown\"] = \"getReadmeMarkdown\";\n    ScryptedInterfaceMethod[\"getOauthUrl\"] = \"getOauthUrl\";\n    ScryptedInterfaceMethod[\"onOauthCallback\"] = \"onOauthCallback\";\n    ScryptedInterfaceMethod[\"canMixin\"] = \"canMixin\";\n    ScryptedInterfaceMethod[\"getMixin\"] = \"getMixin\";\n    ScryptedInterfaceMethod[\"releaseMixin\"] = \"releaseMixin\";\n    ScryptedInterfaceMethod[\"onRequest\"] = \"onRequest\";\n    ScryptedInterfaceMethod[\"onConnection\"] = \"onConnection\";\n    ScryptedInterfaceMethod[\"onPush\"] = \"onPush\";\n    ScryptedInterfaceMethod[\"run\"] = \"run\";\n    ScryptedInterfaceMethod[\"eval\"] = \"eval\";\n    ScryptedInterfaceMethod[\"loadScripts\"] = \"loadScripts\";\n    ScryptedInterfaceMethod[\"saveScript\"] = \"saveScript\";\n    ScryptedInterfaceMethod[\"trackObjects\"] = \"trackObjects\";\n    ScryptedInterfaceMethod[\"getDetectionInput\"] = \"getDetectionInput\";\n    ScryptedInterfaceMethod[\"getObjectTypes\"] = \"getObjectTypes\";\n    ScryptedInterfaceMethod[\"detectObjects\"] = \"detectObjects\";\n    ScryptedInterfaceMethod[\"generateObjectDetections\"] = \"generateObjectDetections\";\n    ScryptedInterfaceMethod[\"getDetectionModel\"] = \"getDetectionModel\";\n    ScryptedInterfaceMethod[\"setHumidity\"] = \"setHumidity\";\n    ScryptedInterfaceMethod[\"setFan\"] = \"setFan\";\n    ScryptedInterfaceMethod[\"startRTCSignalingSession\"] = \"startRTCSignalingSession\";\n    ScryptedInterfaceMethod[\"createRTCSignalingSession\"] = \"createRTCSignalingSession\";\n    ScryptedInterfaceMethod[\"getScryptedUserAccessControl\"] = \"getScryptedUserAccessControl\";\n    ScryptedInterfaceMethod[\"generateVideoFrames\"] = \"generateVideoFrames\";\n})(ScryptedInterfaceMethod = exports.ScryptedInterfaceMethod || (exports.ScryptedInterfaceMethod = {}));\nexports.ScryptedInterfaceDescriptors = {\n    ScryptedDevice: {\n        name: 'ScryptedDevice',\n        methods: [\n            'listen',\n            'probe',\n            'setMixins',\n            'setName',\n            'setRoom',\n            'setType'\n        ],\n        properties: [\n            'id',\n            'info',\n            'interfaces',\n            'mixins',\n            'name',\n            'nativeId',\n            'pluginId',\n            'providedInterfaces',\n            'providedName',\n            'providedRoom',\n            'providedType',\n            'providerId',\n            'room',\n            'type'\n        ]\n    },\n    ScryptedPlugin: {\n        name: 'ScryptedPlugin',\n        methods: [\n            'getPluginJson'\n        ],\n        properties: []\n    },\n    OnOff: {\n        name: 'OnOff',\n        methods: [\n            'turnOff',\n            'turnOn'\n        ],\n        properties: [\n            'on'\n        ]\n    },\n    Brightness: {\n        name: 'Brightness',\n        methods: [\n            'setBrightness'\n        ],\n        properties: [\n            'brightness'\n        ]\n    },\n    ColorSettingTemperature: {\n        name: 'ColorSettingTemperature',\n        methods: [\n            'getTemperatureMaxK',\n            'getTemperatureMinK',\n            'setColorTemperature'\n        ],\n        properties: [\n            'colorTemperature'\n        ]\n    },\n    ColorSettingRgb: {\n        name: 'ColorSettingRgb',\n        methods: [\n            'setRgb'\n        ],\n        properties: [\n            'rgb'\n        ]\n    },\n    ColorSettingHsv: {\n        name: 'ColorSettingHsv',\n        methods: [\n            'setHsv'\n        ],\n        properties: [\n            'hsv'\n        ]\n    },\n    Notifier: {\n        name: 'Notifier',\n        methods: [\n            'sendNotification'\n        ],\n        properties: []\n    },\n    StartStop: {\n        name: 'StartStop',\n        methods: [\n            'start',\n            'stop'\n        ],\n        properties: [\n            'running'\n        ]\n    },\n    Pause: {\n        name: 'Pause',\n        methods: [\n            'pause',\n            'resume'\n        ],\n        properties: [\n            'paused'\n        ]\n    },\n    Dock: {\n        name: 'Dock',\n        methods: [\n            'dock'\n        ],\n        properties: [\n            'docked'\n        ]\n    },\n    TemperatureSetting: {\n        name: 'TemperatureSetting',\n        methods: [\n            'setTemperature',\n            'setThermostatMode',\n            'setThermostatSetpoint',\n            'setThermostatSetpointHigh',\n            'setThermostatSetpointLow'\n        ],\n        properties: [\n            'temperatureSetting',\n            'thermostatActiveMode',\n            'thermostatAvailableModes',\n            'thermostatMode',\n            'thermostatSetpoint',\n            'thermostatSetpointHigh',\n            'thermostatSetpointLow'\n        ]\n    },\n    Thermometer: {\n        name: 'Thermometer',\n        methods: [\n            'setTemperatureUnit'\n        ],\n        properties: [\n            'temperature',\n            'temperatureUnit'\n        ]\n    },\n    HumiditySensor: {\n        name: 'HumiditySensor',\n        methods: [],\n        properties: [\n            'humidity'\n        ]\n    },\n    Camera: {\n        name: 'Camera',\n        methods: [\n            'getPictureOptions',\n            'takePicture'\n        ],\n        properties: []\n    },\n    Microphone: {\n        name: 'Microphone',\n        methods: [\n            'getAudioStream'\n        ],\n        properties: []\n    },\n    Display: {\n        name: 'Display',\n        methods: [\n            'startDisplay',\n            'stopDisplay'\n        ],\n        properties: []\n    },\n    VideoCamera: {\n        name: 'VideoCamera',\n        methods: [\n            'getVideoStream',\n            'getVideoStreamOptions'\n        ],\n        properties: []\n    },\n    VideoRecorder: {\n        name: 'VideoRecorder',\n        methods: [\n            'getRecordingStream',\n            'getRecordingStreamCurrentTime',\n            'getRecordingStreamOptions',\n            'getRecordingStreamThumbnail'\n        ],\n        properties: []\n    },\n    PanTiltZoom: {\n        name: 'PanTiltZoom',\n        methods: [\n            'ptzCommand'\n        ],\n        properties: [\n            'ptzCapabilities'\n        ]\n    },\n    EventRecorder: {\n        name: 'EventRecorder',\n        methods: [\n            'getRecordedEvents'\n        ],\n        properties: []\n    },\n    VideoClips: {\n        name: 'VideoClips',\n        methods: [\n            'getVideoClip',\n            'getVideoClipThumbnail',\n            'getVideoClips',\n            'removeVideoClips'\n        ],\n        properties: []\n    },\n    VideoCameraConfiguration: {\n        name: 'VideoCameraConfiguration',\n        methods: [\n            'setVideoStreamOptions'\n        ],\n        properties: []\n    },\n    Intercom: {\n        name: 'Intercom',\n        methods: [\n            'startIntercom',\n            'stopIntercom'\n        ],\n        properties: []\n    },\n    Lock: {\n        name: 'Lock',\n        methods: [\n            'lock',\n            'unlock'\n        ],\n        properties: [\n            'lockState'\n        ]\n    },\n    PasswordStore: {\n        name: 'PasswordStore',\n        methods: [\n            'addPassword',\n            'getPasswords',\n            'removePassword'\n        ],\n        properties: []\n    },\n    Scene: {\n        name: 'Scene',\n        methods: [\n            'activate',\n            'deactivate',\n            'isReversible'\n        ],\n        properties: []\n    },\n    Entry: {\n        name: 'Entry',\n        methods: [\n            'closeEntry',\n            'openEntry'\n        ],\n        properties: []\n    },\n    EntrySensor: {\n        name: 'EntrySensor',\n        methods: [],\n        properties: [\n            'entryOpen'\n        ]\n    },\n    DeviceProvider: {\n        name: 'DeviceProvider',\n        methods: [\n            'getDevice',\n            'releaseDevice'\n        ],\n        properties: []\n    },\n    DeviceDiscovery: {\n        name: 'DeviceDiscovery',\n        methods: [\n            'adoptDevice',\n            'discoverDevices'\n        ],\n        properties: []\n    },\n    DeviceCreator: {\n        name: 'DeviceCreator',\n        methods: [\n            'createDevice',\n            'getCreateDeviceSettings'\n        ],\n        properties: []\n    },\n    Battery: {\n        name: 'Battery',\n        methods: [],\n        properties: [\n            'batteryLevel'\n        ]\n    },\n    Charger: {\n        name: 'Charger',\n        methods: [],\n        properties: [\n            'chargeState'\n        ]\n    },\n    Refresh: {\n        name: 'Refresh',\n        methods: [\n            'getRefreshFrequency',\n            'refresh'\n        ],\n        properties: []\n    },\n    MediaPlayer: {\n        name: 'MediaPlayer',\n        methods: [\n            'getMediaStatus',\n            'load',\n            'seek',\n            'skipNext',\n            'skipPrevious'\n        ],\n        properties: []\n    },\n    Online: {\n        name: 'Online',\n        methods: [],\n        properties: [\n            'online'\n        ]\n    },\n    BufferConverter: {\n        name: 'BufferConverter',\n        methods: [\n            'convert'\n        ],\n        properties: [\n            'fromMimeType',\n            'toMimeType'\n        ]\n    },\n    Settings: {\n        name: 'Settings',\n        methods: [\n            'getSettings',\n            'putSetting'\n        ],\n        properties: []\n    },\n    BinarySensor: {\n        name: 'BinarySensor',\n        methods: [],\n        properties: [\n            'binaryState'\n        ]\n    },\n    TamperSensor: {\n        name: 'TamperSensor',\n        methods: [],\n        properties: [\n            'tampered'\n        ]\n    },\n    PowerSensor: {\n        name: 'PowerSensor',\n        methods: [],\n        properties: [\n            'powerDetected'\n        ]\n    },\n    AudioSensor: {\n        name: 'AudioSensor',\n        methods: [],\n        properties: [\n            'audioDetected'\n        ]\n    },\n    MotionSensor: {\n        name: 'MotionSensor',\n        methods: [],\n        properties: [\n            'motionDetected'\n        ]\n    },\n    AmbientLightSensor: {\n        name: 'AmbientLightSensor',\n        methods: [],\n        properties: [\n            'ambientLight'\n        ]\n    },\n    OccupancySensor: {\n        name: 'OccupancySensor',\n        methods: [],\n        properties: [\n            'occupied'\n        ]\n    },\n    FloodSensor: {\n        name: 'FloodSensor',\n        methods: [],\n        properties: [\n            'flooded'\n        ]\n    },\n    UltravioletSensor: {\n        name: 'UltravioletSensor',\n        methods: [],\n        properties: [\n            'ultraviolet'\n        ]\n    },\n    LuminanceSensor: {\n        name: 'LuminanceSensor',\n        methods: [],\n        properties: [\n            'luminance'\n        ]\n    },\n    PositionSensor: {\n        name: 'PositionSensor',\n        methods: [],\n        properties: [\n            'position'\n        ]\n    },\n    SecuritySystem: {\n        name: 'SecuritySystem',\n        methods: [\n            'armSecuritySystem',\n            'disarmSecuritySystem'\n        ],\n        properties: [\n            'securitySystemState'\n        ]\n    },\n    PM10Sensor: {\n        name: 'PM10Sensor',\n        methods: [],\n        properties: [\n            'pm10Density'\n        ]\n    },\n    PM25Sensor: {\n        name: 'PM25Sensor',\n        methods: [],\n        properties: [\n            'pm25Density'\n        ]\n    },\n    VOCSensor: {\n        name: 'VOCSensor',\n        methods: [],\n        properties: [\n            'vocDensity'\n        ]\n    },\n    NOXSensor: {\n        name: 'NOXSensor',\n        methods: [],\n        properties: [\n            'noxDensity'\n        ]\n    },\n    CO2Sensor: {\n        name: 'CO2Sensor',\n        methods: [],\n        properties: [\n            'co2ppm'\n        ]\n    },\n    AirQualitySensor: {\n        name: 'AirQualitySensor',\n        methods: [],\n        properties: [\n            'airQuality'\n        ]\n    },\n    Readme: {\n        name: 'Readme',\n        methods: [\n            'getReadmeMarkdown'\n        ],\n        properties: []\n    },\n    OauthClient: {\n        name: 'OauthClient',\n        methods: [\n            'getOauthUrl',\n            'onOauthCallback'\n        ],\n        properties: []\n    },\n    MixinProvider: {\n        name: 'MixinProvider',\n        methods: [\n            'canMixin',\n            'getMixin',\n            'releaseMixin'\n        ],\n        properties: []\n    },\n    HttpRequestHandler: {\n        name: 'HttpRequestHandler',\n        methods: [\n            'onRequest'\n        ],\n        properties: []\n    },\n    EngineIOHandler: {\n        name: 'EngineIOHandler',\n        methods: [\n            'onConnection'\n        ],\n        properties: []\n    },\n    PushHandler: {\n        name: 'PushHandler',\n        methods: [\n            'onPush'\n        ],\n        properties: []\n    },\n    Program: {\n        name: 'Program',\n        methods: [\n            'run'\n        ],\n        properties: []\n    },\n    Scriptable: {\n        name: 'Scriptable',\n        methods: [\n            'eval',\n            'loadScripts',\n            'saveScript'\n        ],\n        properties: []\n    },\n    ObjectTracker: {\n        name: 'ObjectTracker',\n        methods: [\n            'trackObjects'\n        ],\n        properties: []\n    },\n    ObjectDetector: {\n        name: 'ObjectDetector',\n        methods: [\n            'getDetectionInput',\n            'getObjectTypes'\n        ],\n        properties: []\n    },\n    ObjectDetection: {\n        name: 'ObjectDetection',\n        methods: [\n            'detectObjects',\n            'generateObjectDetections',\n            'getDetectionModel'\n        ],\n        properties: []\n    },\n    HumiditySetting: {\n        name: 'HumiditySetting',\n        methods: [\n            'setHumidity'\n        ],\n        properties: [\n            'humiditySetting'\n        ]\n    },\n    Fan: {\n        name: 'Fan',\n        methods: [\n            'setFan'\n        ],\n        properties: [\n            'fan'\n        ]\n    },\n    RTCSignalingChannel: {\n        name: 'RTCSignalingChannel',\n        methods: [\n            'startRTCSignalingSession'\n        ],\n        properties: []\n    },\n    RTCSignalingClient: {\n        name: 'RTCSignalingClient',\n        methods: [\n            'createRTCSignalingSession'\n        ],\n        properties: []\n    },\n    LauncherApplication: {\n        name: 'LauncherApplication',\n        methods: [],\n        properties: [\n            'applicationInfo'\n        ]\n    },\n    ScryptedUser: {\n        name: 'ScryptedUser',\n        methods: [\n            'getScryptedUserAccessControl'\n        ],\n        properties: []\n    },\n    VideoFrameGenerator: {\n        name: 'VideoFrameGenerator',\n        methods: [\n            'generateVideoFrames'\n        ],\n        properties: []\n    }\n};\n/**\n * @category Core Reference\n */\nvar ScryptedDeviceType;\n(function (ScryptedDeviceType) {\n    ScryptedDeviceType[\"Builtin\"] = \"Builtin\";\n    ScryptedDeviceType[\"Camera\"] = \"Camera\";\n    ScryptedDeviceType[\"Fan\"] = \"Fan\";\n    ScryptedDeviceType[\"Light\"] = \"Light\";\n    ScryptedDeviceType[\"Switch\"] = \"Switch\";\n    ScryptedDeviceType[\"Outlet\"] = \"Outlet\";\n    ScryptedDeviceType[\"Sensor\"] = \"Sensor\";\n    ScryptedDeviceType[\"Scene\"] = \"Scene\";\n    ScryptedDeviceType[\"Program\"] = \"Program\";\n    ScryptedDeviceType[\"Automation\"] = \"Automation\";\n    ScryptedDeviceType[\"Vacuum\"] = \"Vacuum\";\n    ScryptedDeviceType[\"Notifier\"] = \"Notifier\";\n    ScryptedDeviceType[\"Thermostat\"] = \"Thermostat\";\n    ScryptedDeviceType[\"Lock\"] = \"Lock\";\n    ScryptedDeviceType[\"PasswordControl\"] = \"PasswordControl\";\n    /**\n     * Displays have audio and video output.\n     */\n    ScryptedDeviceType[\"Display\"] = \"Display\";\n    /**\n     * Smart Displays have two way audio and video.\n     */\n    ScryptedDeviceType[\"SmartDisplay\"] = \"SmartDisplay\";\n    ScryptedDeviceType[\"Speaker\"] = \"Speaker\";\n    /**\n     * Smart Speakers have two way audio.\n     */\n    ScryptedDeviceType[\"SmartSpeaker\"] = \"SmartSpeaker\";\n    ScryptedDeviceType[\"Event\"] = \"Event\";\n    ScryptedDeviceType[\"Entry\"] = \"Entry\";\n    ScryptedDeviceType[\"Garage\"] = \"Garage\";\n    ScryptedDeviceType[\"DeviceProvider\"] = \"DeviceProvider\";\n    ScryptedDeviceType[\"DataSource\"] = \"DataSource\";\n    ScryptedDeviceType[\"API\"] = \"API\";\n    ScryptedDeviceType[\"Doorbell\"] = \"Doorbell\";\n    ScryptedDeviceType[\"Irrigation\"] = \"Irrigation\";\n    ScryptedDeviceType[\"Valve\"] = \"Valve\";\n    ScryptedDeviceType[\"Person\"] = \"Person\";\n    ScryptedDeviceType[\"SecuritySystem\"] = \"SecuritySystem\";\n    ScryptedDeviceType[\"WindowCovering\"] = \"WindowCovering\";\n    ScryptedDeviceType[\"Siren\"] = \"Siren\";\n    ScryptedDeviceType[\"Unknown\"] = \"Unknown\";\n})(ScryptedDeviceType = exports.ScryptedDeviceType || (exports.ScryptedDeviceType = {}));\nvar HumidityMode;\n(function (HumidityMode) {\n    HumidityMode[\"Humidify\"] = \"Humidify\";\n    HumidityMode[\"Dehumidify\"] = \"Dehumidify\";\n    HumidityMode[\"Auto\"] = \"Auto\";\n    HumidityMode[\"Off\"] = \"Off\";\n})(HumidityMode = exports.HumidityMode || (exports.HumidityMode = {}));\nvar FanMode;\n(function (FanMode) {\n    FanMode[\"Auto\"] = \"Auto\";\n    FanMode[\"Manual\"] = \"Manual\";\n})(FanMode = exports.FanMode || (exports.FanMode = {}));\nvar TemperatureUnit;\n(function (TemperatureUnit) {\n    TemperatureUnit[\"C\"] = \"C\";\n    TemperatureUnit[\"F\"] = \"F\";\n})(TemperatureUnit = exports.TemperatureUnit || (exports.TemperatureUnit = {}));\nvar ThermostatMode;\n(function (ThermostatMode) {\n    ThermostatMode[\"Off\"] = \"Off\";\n    ThermostatMode[\"Cool\"] = \"Cool\";\n    ThermostatMode[\"Heat\"] = \"Heat\";\n    ThermostatMode[\"HeatCool\"] = \"HeatCool\";\n    ThermostatMode[\"Auto\"] = \"Auto\";\n    ThermostatMode[\"FanOnly\"] = \"FanOnly\";\n    ThermostatMode[\"Purifier\"] = \"Purifier\";\n    ThermostatMode[\"Eco\"] = \"Eco\";\n    ThermostatMode[\"Dry\"] = \"Dry\";\n    ThermostatMode[\"On\"] = \"On\";\n})(ThermostatMode = exports.ThermostatMode || (exports.ThermostatMode = {}));\nvar PanTiltZoomMovement;\n(function (PanTiltZoomMovement) {\n    PanTiltZoomMovement[\"Absolute\"] = \"Absolute\";\n    PanTiltZoomMovement[\"Relative\"] = \"Relative\";\n})(PanTiltZoomMovement = exports.PanTiltZoomMovement || (exports.PanTiltZoomMovement = {}));\nvar LockState;\n(function (LockState) {\n    LockState[\"Locked\"] = \"Locked\";\n    LockState[\"Unlocked\"] = \"Unlocked\";\n    LockState[\"Jammed\"] = \"Jammed\";\n})(LockState = exports.LockState || (exports.LockState = {}));\nvar ChargeState;\n(function (ChargeState) {\n    ChargeState[\"Trickle\"] = \"trickle\";\n    ChargeState[\"Charging\"] = \"charging\";\n    ChargeState[\"NotCharging\"] = \"not-charging\";\n})(ChargeState = exports.ChargeState || (exports.ChargeState = {}));\nvar AirQuality;\n(function (AirQuality) {\n    AirQuality[\"Unknown\"] = \"Unknown\";\n    AirQuality[\"Excellent\"] = \"Excellent\";\n    AirQuality[\"Good\"] = \"Good\";\n    AirQuality[\"Fair\"] = \"Fair\";\n    AirQuality[\"Inferior\"] = \"Inferior\";\n    AirQuality[\"Poor\"] = \"Poor\";\n})(AirQuality = exports.AirQuality || (exports.AirQuality = {}));\nvar SecuritySystemMode;\n(function (SecuritySystemMode) {\n    SecuritySystemMode[\"Disarmed\"] = \"Disarmed\";\n    SecuritySystemMode[\"HomeArmed\"] = \"HomeArmed\";\n    SecuritySystemMode[\"AwayArmed\"] = \"AwayArmed\";\n    SecuritySystemMode[\"NightArmed\"] = \"NightArmed\";\n})(SecuritySystemMode = exports.SecuritySystemMode || (exports.SecuritySystemMode = {}));\nvar SecuritySystemObstruction;\n(function (SecuritySystemObstruction) {\n    SecuritySystemObstruction[\"Sensor\"] = \"Sensor\";\n    SecuritySystemObstruction[\"Occupied\"] = \"Occupied\";\n    SecuritySystemObstruction[\"Time\"] = \"Time\";\n    SecuritySystemObstruction[\"Error\"] = \"Error\";\n})(SecuritySystemObstruction = exports.SecuritySystemObstruction || (exports.SecuritySystemObstruction = {}));\nvar MediaPlayerState;\n(function (MediaPlayerState) {\n    MediaPlayerState[\"Idle\"] = \"Idle\";\n    MediaPlayerState[\"Playing\"] = \"Playing\";\n    MediaPlayerState[\"Paused\"] = \"Paused\";\n    MediaPlayerState[\"Buffering\"] = \"Buffering\";\n})(MediaPlayerState = exports.MediaPlayerState || (exports.MediaPlayerState = {}));\nvar ScryptedInterface;\n(function (ScryptedInterface) {\n    ScryptedInterface[\"ScryptedDevice\"] = \"ScryptedDevice\";\n    ScryptedInterface[\"ScryptedPlugin\"] = \"ScryptedPlugin\";\n    ScryptedInterface[\"OnOff\"] = \"OnOff\";\n    ScryptedInterface[\"Brightness\"] = \"Brightness\";\n    ScryptedInterface[\"ColorSettingTemperature\"] = \"ColorSettingTemperature\";\n    ScryptedInterface[\"ColorSettingRgb\"] = \"ColorSettingRgb\";\n    ScryptedInterface[\"ColorSettingHsv\"] = \"ColorSettingHsv\";\n    ScryptedInterface[\"Notifier\"] = \"Notifier\";\n    ScryptedInterface[\"StartStop\"] = \"StartStop\";\n    ScryptedInterface[\"Pause\"] = \"Pause\";\n    ScryptedInterface[\"Dock\"] = \"Dock\";\n    ScryptedInterface[\"TemperatureSetting\"] = \"TemperatureSetting\";\n    ScryptedInterface[\"Thermometer\"] = \"Thermometer\";\n    ScryptedInterface[\"HumiditySensor\"] = \"HumiditySensor\";\n    ScryptedInterface[\"Camera\"] = \"Camera\";\n    ScryptedInterface[\"Microphone\"] = \"Microphone\";\n    ScryptedInterface[\"Display\"] = \"Display\";\n    ScryptedInterface[\"VideoCamera\"] = \"VideoCamera\";\n    ScryptedInterface[\"VideoRecorder\"] = \"VideoRecorder\";\n    ScryptedInterface[\"PanTiltZoom\"] = \"PanTiltZoom\";\n    ScryptedInterface[\"EventRecorder\"] = \"EventRecorder\";\n    ScryptedInterface[\"VideoClips\"] = \"VideoClips\";\n    ScryptedInterface[\"VideoCameraConfiguration\"] = \"VideoCameraConfiguration\";\n    ScryptedInterface[\"Intercom\"] = \"Intercom\";\n    ScryptedInterface[\"Lock\"] = \"Lock\";\n    ScryptedInterface[\"PasswordStore\"] = \"PasswordStore\";\n    ScryptedInterface[\"Scene\"] = \"Scene\";\n    ScryptedInterface[\"Entry\"] = \"Entry\";\n    ScryptedInterface[\"EntrySensor\"] = \"EntrySensor\";\n    ScryptedInterface[\"DeviceProvider\"] = \"DeviceProvider\";\n    ScryptedInterface[\"DeviceDiscovery\"] = \"DeviceDiscovery\";\n    ScryptedInterface[\"DeviceCreator\"] = \"DeviceCreator\";\n    ScryptedInterface[\"Battery\"] = \"Battery\";\n    ScryptedInterface[\"Charger\"] = \"Charger\";\n    ScryptedInterface[\"Refresh\"] = \"Refresh\";\n    ScryptedInterface[\"MediaPlayer\"] = \"MediaPlayer\";\n    ScryptedInterface[\"Online\"] = \"Online\";\n    ScryptedInterface[\"BufferConverter\"] = \"BufferConverter\";\n    ScryptedInterface[\"Settings\"] = \"Settings\";\n    ScryptedInterface[\"BinarySensor\"] = \"BinarySensor\";\n    ScryptedInterface[\"TamperSensor\"] = \"TamperSensor\";\n    ScryptedInterface[\"PowerSensor\"] = \"PowerSensor\";\n    ScryptedInterface[\"AudioSensor\"] = \"AudioSensor\";\n    ScryptedInterface[\"MotionSensor\"] = \"MotionSensor\";\n    ScryptedInterface[\"AmbientLightSensor\"] = \"AmbientLightSensor\";\n    ScryptedInterface[\"OccupancySensor\"] = \"OccupancySensor\";\n    ScryptedInterface[\"FloodSensor\"] = \"FloodSensor\";\n    ScryptedInterface[\"UltravioletSensor\"] = \"UltravioletSensor\";\n    ScryptedInterface[\"LuminanceSensor\"] = \"LuminanceSensor\";\n    ScryptedInterface[\"PositionSensor\"] = \"PositionSensor\";\n    ScryptedInterface[\"SecuritySystem\"] = \"SecuritySystem\";\n    ScryptedInterface[\"PM10Sensor\"] = \"PM10Sensor\";\n    ScryptedInterface[\"PM25Sensor\"] = \"PM25Sensor\";\n    ScryptedInterface[\"VOCSensor\"] = \"VOCSensor\";\n    ScryptedInterface[\"NOXSensor\"] = \"NOXSensor\";\n    ScryptedInterface[\"CO2Sensor\"] = \"CO2Sensor\";\n    ScryptedInterface[\"AirQualitySensor\"] = \"AirQualitySensor\";\n    ScryptedInterface[\"Readme\"] = \"Readme\";\n    ScryptedInterface[\"OauthClient\"] = \"OauthClient\";\n    ScryptedInterface[\"MixinProvider\"] = \"MixinProvider\";\n    ScryptedInterface[\"HttpRequestHandler\"] = \"HttpRequestHandler\";\n    ScryptedInterface[\"EngineIOHandler\"] = \"EngineIOHandler\";\n    ScryptedInterface[\"PushHandler\"] = \"PushHandler\";\n    ScryptedInterface[\"Program\"] = \"Program\";\n    ScryptedInterface[\"Scriptable\"] = \"Scriptable\";\n    ScryptedInterface[\"ObjectTracker\"] = \"ObjectTracker\";\n    ScryptedInterface[\"ObjectDetector\"] = \"ObjectDetector\";\n    ScryptedInterface[\"ObjectDetection\"] = \"ObjectDetection\";\n    ScryptedInterface[\"HumiditySetting\"] = \"HumiditySetting\";\n    ScryptedInterface[\"Fan\"] = \"Fan\";\n    ScryptedInterface[\"RTCSignalingChannel\"] = \"RTCSignalingChannel\";\n    ScryptedInterface[\"RTCSignalingClient\"] = \"RTCSignalingClient\";\n    ScryptedInterface[\"LauncherApplication\"] = \"LauncherApplication\";\n    ScryptedInterface[\"ScryptedUser\"] = \"ScryptedUser\";\n    ScryptedInterface[\"VideoFrameGenerator\"] = \"VideoFrameGenerator\";\n})(ScryptedInterface = exports.ScryptedInterface || (exports.ScryptedInterface = {}));\nvar ScryptedMimeTypes;\n(function (ScryptedMimeTypes) {\n    ScryptedMimeTypes[\"Url\"] = \"text/x-uri\";\n    ScryptedMimeTypes[\"InsecureLocalUrl\"] = \"text/x-insecure-local-uri\";\n    ScryptedMimeTypes[\"LocalUrl\"] = \"text/x-local-uri\";\n    ScryptedMimeTypes[\"PushEndpoint\"] = \"text/x-push-endpoint\";\n    ScryptedMimeTypes[\"SchemePrefix\"] = \"x-scrypted/x-scrypted-scheme-\";\n    ScryptedMimeTypes[\"MediaStreamUrl\"] = \"text/x-media-url\";\n    ScryptedMimeTypes[\"MediaObject\"] = \"x-scrypted/x-scrypted-media-object\";\n    ScryptedMimeTypes[\"RequestMediaObject\"] = \"x-scrypted/x-scrypted-request-media-object\";\n    ScryptedMimeTypes[\"RequestMediaStream\"] = \"x-scrypted/x-scrypted-request-stream\";\n    ScryptedMimeTypes[\"MediaStreamFeedback\"] = \"x-scrypted/x-media-stream-feedback\";\n    ScryptedMimeTypes[\"FFmpegInput\"] = \"x-scrypted/x-ffmpeg-input\";\n    ScryptedMimeTypes[\"FFmpegTranscodeStream\"] = \"x-scrypted/x-ffmpeg-transcode-stream\";\n    ScryptedMimeTypes[\"RTCSignalingChannel\"] = \"x-scrypted/x-scrypted-rtc-signaling-channel\";\n    ScryptedMimeTypes[\"RTCSignalingSession\"] = \"x-scrypted/x-scrypted-rtc-signaling-session\";\n    ScryptedMimeTypes[\"RTCConnectionManagement\"] = \"x-scrypted/x-scrypted-rtc-connection-management\";\n    ScryptedMimeTypes[\"Image\"] = \"x-scrypted/x-scrypted-image\";\n})(ScryptedMimeTypes = exports.ScryptedMimeTypes || (exports.ScryptedMimeTypes = {}));\n//# sourceMappingURL=index.js.map","import { ScryptedDevice, ScryptedDeviceBase, ScryptedDeviceType, ScryptedInterface } from \"@scrypted/sdk\";\nimport sdk from \"@scrypted/sdk\";\n\nconst { systemManager } = sdk;\n\nconst autoIncludeToken = 'v4';\n\nexport abstract class AutoenableMixinProvider extends ScryptedDeviceBase {\n    hasEnabledMixin: { [id: string]: string } = {};\n    pluginsComponent: Promise<any>;\n    unshiftMixin = false;\n\n    constructor(nativeId?: string) {\n        super(nativeId);\n\n        try {\n            this.hasEnabledMixin = JSON.parse(this.storage.getItem('hasEnabledMixin'));\n        }\n        catch (e) {\n            this.hasEnabledMixin = {};\n        }\n\n        this.pluginsComponent = systemManager.getComponent('plugins');\n\n        // watch for descriptor changes.\n        systemManager.listen(async (eventSource, eventDetails, eventData) => {\n            if (eventDetails.eventInterface !== ScryptedInterface.ScryptedDevice || eventDetails.property)\n                return;\n\n            this.maybeEnableMixin(eventSource);\n        });\n\n        for (const id of Object.keys(systemManager.getSystemState())) {\n            const device = systemManager.getDeviceById(id);\n            this.maybeEnableMixin(device);\n        }\n    }\n\n    async shouldEnableMixin(device: ScryptedDevice) {\n        return true;\n    }\n\n    async maybeEnableMixin(device: ScryptedDevice) {\n        if (!device || device.mixins?.includes(this.id))\n            return;\n\n        if (this.hasEnabledMixin[device.id] === autoIncludeToken)\n            return;\n\n        const match = await this.canMixin(device.type, device.interfaces);\n        if (!match)\n            return;\n\n        if (!await this.shouldEnableMixin(device))\n            return;\n\n        this.log.i('auto enabling mixin for ' + device.name)\n        const mixins = (device.mixins || []).slice();\n        if (this.unshiftMixin)\n            mixins.unshift(this.id);\n        else\n            mixins.push(this.id);\n        const plugins = await this.pluginsComponent;\n        await plugins.setMixins(device.id, mixins);\n        this.setHasEnabledMixin(device.id);\n    }\n\n    setHasEnabledMixin(id: string) {\n        if (this.hasEnabledMixin[id] === autoIncludeToken)\n            return;\n        this.hasEnabledMixin[id] = autoIncludeToken;\n        this.storage.setItem('hasEnabledMixin', JSON.stringify(this.hasEnabledMixin));\n    }\n\n    abstract canMixin(type: ScryptedDeviceType, interfaces: string[]): Promise<string[]>;\n}\n","export class Deferred<T> {\n    finished = false;\n    resolve!: (value: T|PromiseLike<T>) => this;\n    reject!: (error: Error) => this;\n    promise: Promise<T> = new Promise((resolve, reject) => {\n        this.resolve = v => {\n            this.finished = true;\n            resolve(v);\n            return this;\n        };\n        this.reject = e => {\n            this.finished = true;\n            reject(e);\n            return this;\n        };\n    });\n}\n","export function addVideoFilterArguments(videoArgs: string[], videoFilter: string, filterName = 'unfilteredRecording') {\n    const filterIndex = videoArgs.findIndex(f => f === '-filter_complex');\n    if (filterIndex !== undefined && filterIndex !== -1)\n        videoArgs[filterIndex + 1] = videoArgs[filterIndex + 1] + `[${filterName}] ; [${filterName}] ${videoFilter}`;\n    else\n        videoArgs.push('-filter_complex', videoFilter);\n}\n","import net from 'net';\nimport { once } from 'events';\nimport dgram, { SocketType } from 'dgram';\n\nexport async function closeQuiet(socket: dgram.Socket | net.Server) {\n    if (!socket)\n        return;\n    try {\n        await new Promise((r, f) => {\n            try {\n                socket.close(r);\n            }\n            catch (e) {\n                f(e);\n            }\n        });\n    }\n    catch (e) {\n    }\n}\n\nexport async function bindUdp(server: dgram.Socket, usePort: number, address?: string) {\n    server.bind(usePort, address);\n    await once(server, 'listening');\n    const port = server.address().port;\n    return {\n        port,\n        url: `udp://127.0.0.1:${port}`,\n    }\n}\n\nexport async function bindZero(server: dgram.Socket) {\n    return bindUdp(server, 0);\n}\n\nexport async function createBindZero(socketType?: SocketType) {\n    return createBindUdp(0, socketType);\n}\n\nexport async function reserveUdpPort() {\n    const udp = await createBindZero();\n    await new Promise(resolve => udp.server.close(() => resolve(undefined)));\n    return udp.port;\n}\n\nexport async function createBindUdp(usePort: number, socketType?: SocketType) {\n    const server = dgram.createSocket(socketType || 'udp4');\n    const { port, url } = await bindUdp(server, usePort);\n    return {\n        server,\n        port,\n        url,\n    };\n}\n\nexport async function bind(server: dgram.Socket, port: number) {\n    server.bind(port);\n    await once(server, 'listening');\n    return {\n        port,\n        url: `udp://127.0.0.1:${port}`,\n    }\n}\n\nexport { listenZero, listenZeroSingleClient, ListenZeroSingleClientTimeoutError } from \"@scrypted/server/src/listen-zero\";\n","export * from '@scrypted/server/src/media-helpers';\n","export interface RefreshPromise<T> {\n    promise: Promise<T>;\n    cacheDuration: number;\n}\n\nexport function singletonPromise<T>(rp: undefined | RefreshPromise<T>, method: () => Promise<T>, cacheDuration = 0) {\n    if (rp?.promise)\n        return rp;\n\n    const promise = method();\n    if (!rp) {\n        rp = {\n            promise,\n            cacheDuration,\n        }\n    }\n    else {\n        rp.promise = promise;\n    }\n    promise.finally(() => setTimeout(() => rp.promise = undefined, rp.cacheDuration));\n    return rp;\n}\n\nexport class TimeoutError<T> extends Error {\n    constructor(public promise: Promise<T>) {\n        super('Operation Timed Out');\n    }\n}\n\nexport function timeoutPromise<T>(timeout: number, promise: Promise<T>): Promise<T> {\n    return new Promise<T>((resolve, reject) => {\n        const t = setTimeout(() => reject(new TimeoutError(promise)), timeout);\n\n        promise\n            .then(v => {\n                clearTimeout(t);\n                resolve(v);\n            })\n            .catch(e => {\n                clearTimeout(t);\n                reject(e);\n            });\n    })\n}\n\nexport function timeoutFunction<T>(timeout: number, f: (isTimedOut: () => boolean) => Promise<T>): Promise<T> {\n    return new Promise<T>((resolve, reject) => {\n        let isTimedOut = false;\n        const promise = f(() => isTimedOut);\n\n        const t = setTimeout(() => {\n            isTimedOut = true;\n            reject(new TimeoutError(promise));\n        }, timeout);\n\n        promise\n            .then(v => {\n                clearTimeout(t);\n                resolve(v);\n            })\n            .catch(e => {\n                clearTimeout(t);\n                reject(e);\n            });\n    })\n}\n\nexport function createPromiseDebouncer<T>() {\n    let current: Promise<T>;\n\n    return (func: () => Promise<T>): Promise<T> => {\n        if (!current)\n            current = func().finally(() => current = undefined);\n        return current;\n    }\n}\n\nexport function createMapPromiseDebouncer<T>() {\n    const map = new Map<string, Promise<T>>();\n\n    return (key: any, func: () => Promise<T>): Promise<T> => {\n        const keyStr = JSON.stringify(key);\n        let value = map.get(keyStr);\n        if (!value) {\n            value = func().finally(() => map.delete(keyStr));\n            map.set(keyStr, value);\n        }\n        return value;\n    }\n}\n","import { Readable } from 'stream';\nimport { once } from 'events';\n\nexport async function read16BELengthLoop(readable: Readable, options: {\n  headerLength: number;\n  offset?: number;\n  // optionally skip a header, and pause loop parsing until calee resumes.\n  skipHeader?: (header: Buffer, resumeRead: () => void) => boolean;\n  callback: (header: Buffer, data: Buffer) => void;\n}) {\n  let error: Error;\n  const { skipHeader, callback } = options;\n  const offset = options.offset || 0;\n  const headerLength = options.headerLength || 2;\n\n  readable.on('error', e => error = e);\n\n  let header: Buffer;\n  let length: number;\n  let skipCount = 0;\n  let readCount = 0;\n  \n  const resumeRead = () => {\n    readCount++;\n    read();\n  }\n\n  const read = () => {\n    while (true) {\n      if (skipCount !== readCount)\n        return;\n      if (!header) {\n        header = readable.read(headerLength);\n        if (!header)\n          return;\n        if (skipHeader?.(header, resumeRead)) {\n          skipCount++;\n          header = undefined;\n          continue;\n        }\n        length = header.readUInt16BE(offset);\n      }\n      else {\n        const data = readable.read(length);\n        if (!data)\n          return;\n        callback(header, data);\n        header = undefined;\n      }\n    }\n  };\n\n  read();\n  readable.on('readable', read);\n\n  await once(readable, 'end');\n  throw new Error('stream ended');\n}\n\nexport class StreamEndError extends Error {\n  constructor() {\n    super()\n  }\n}\n\nexport async function readLength(readable: Readable, length: number): Promise<Buffer> {\n  if (readable.readableEnded || readable.destroyed)\n    throw new Error(\"stream ended\");\n\n  if (!length) {\n    return Buffer.alloc(0);\n  }\n\n  {\n    const ret = readable.read(length);\n    if (ret) {\n      return ret;\n    }\n  }\n\n  return new Promise((resolve, reject) => {\n    const r = () => {\n      const ret = readable.read(length);\n      if (ret) {\n        cleanup();\n        resolve(ret);\n        return;\n      }\n\n      if (readable.readableEnded || readable.destroyed)\n        reject(new Error(\"stream ended during read\"));\n    };\n\n    const e = () => {\n      cleanup();\n      reject(new StreamEndError())\n    };\n\n    const cleanup = () => {\n      readable.removeListener('readable', r);\n      readable.removeListener('end', e);\n    }\n\n    readable.on('readable', r);\n    readable.on('end', e);\n  });\n}\n\nconst CHARCODE_NEWLINE = '\\n'.charCodeAt(0);\n\nexport async function readUntil(readable: Readable, charCode: number) {\n  const data = [];\n  let count = 0;\n  while (true) {\n    const buffer = await readLength(readable, 1);\n    if (!buffer)\n      throw new Error(\"end of stream\");\n    if (buffer[0] === charCode)\n      break;\n    data[count++] = buffer[0];\n  }\n  return Buffer.from(data).toString();\n}\n\nexport async function readLine(readable: Readable) {\n  return readUntil(readable, CHARCODE_NEWLINE);\n}\n\nexport async function readString(readable: Readable | Promise<Readable>) {\n  let data = '';\n  readable = await readable;\n  readable.on('data', buffer => {\n    data += buffer.toString();\n  });\n  readable.resume();\n  await once(readable, 'end')\n  return data;\n}\n","import { RpcPeer } from \"@scrypted/server/src/rpc\";\nimport { createRpcSerializer } from \"@scrypted/server/src/rpc-serializer\";\nimport type { RTCSignalingSession } from \"@scrypted/sdk\";\n\nexport async function createBrowserSignalingSession(ws: WebSocket, localName: string, remoteName: string) {\n    const serializer = createRpcSerializer({\n        sendMessageBuffer: buffer => ws.send(buffer),\n        sendMessageFinish: message => ws.send(JSON.stringify(message)),\n    });\n\n    const rpcPeer = new RpcPeer(localName, remoteName, (message, reject, serializationContext) => {\n        try {\n            serializer.sendMessage(message, reject, serializationContext);\n        }\n        catch (e) {\n            reject?.(e);\n        }\n    });\n    ws.addEventListener('close', () => rpcPeer.kill('WebSocket closed'));\n\n    ws.onmessage = message => {\n        const data = message.data;\n        if (data.constructor === Buffer || data.constructor === ArrayBuffer) {\n            serializer.onMessageBuffer(Buffer.from(data));\n        }\n        else {\n            serializer.onMessageFinish(JSON.parse(data as string));\n        }\n    };\n\n    serializer.setupRpcPeer(rpcPeer);\n\n    const session: RTCSignalingSession = await rpcPeer.getParam('session');\n    return session;\n}\n","import type { RTCAVSignalingSetup, RTCSignalingOptions, RTCSignalingSendIceCandidate, RTCSignalingSession } from \"../../sdk/types/src/types.input\";\nimport { Deferred } from \"./deferred\";\n\nfunction getUserAgent() {\n    try {\n        return navigator.userAgent;\n    }\n    catch (e) {\n    }\n}\n\n// connectionState is not implemented in firefox? so watch iceConnectionState instead...\nexport function waitPeerConnectionIceConnected(pc: RTCPeerConnection) {\n    return new Promise((resolve, reject) => {\n        if (pc.iceConnectionState === 'connected') {\n            resolve(undefined);\n            return;\n        }\n        pc.addEventListener('iceconnectionstatechange', () => {\n            if (pc.iceConnectionState === 'connected')\n                resolve(undefined);\n        });\n\n        waitPeerIceConnectionClosed(pc).then(reason => reject(new Error(reason)));\n    });\n}\n\nexport function waitPeerIceConnectionClosed(pc: RTCPeerConnection): Promise<string> {\n    return new Promise(resolve => {\n        pc.addEventListener('iceconnectionstatechange', () => {\n            if (isPeerConnectionClosed(pc)) {\n                resolve(pc.iceConnectionState);\n            }\n        });\n    });\n}\n\nexport function isPeerConnectionClosed(pc: RTCPeerConnection) {\n    return pc.iceConnectionState === 'disconnected'\n        || pc.iceConnectionState === 'failed'\n        || pc.iceConnectionState === 'closed';\n}\n\nfunction silence() {\n    let ctx = new AudioContext(), oscillator = ctx.createOscillator();\n    const dest = ctx.createMediaStreamDestination();\n    oscillator.connect(dest);\n    oscillator.start();\n    const ret = dest.stream.getAudioTracks()[0];\n    ret.enabled = false;\n    return ret;\n}\n\nexport class BrowserSignalingSession implements RTCSignalingSession {\n    private pc: RTCPeerConnection;\n    pcDeferred = new Deferred<RTCPeerConnection>();\n    dcDeferred = new Deferred<RTCDataChannel>();\n    microphone: RTCRtpSender;\n    micEnabled = false;\n    onPeerConnection: (pc: RTCPeerConnection) => Promise<void>;\n    options: RTCSignalingOptions = {\n        userAgent: getUserAgent(),\n        capabilities: {\n            audio: RTCRtpReceiver.getCapabilities?.('audio') || {\n                codecs: undefined,\n                headerExtensions: undefined,\n            },\n            video: RTCRtpReceiver.getCapabilities?.('video') || {\n                codecs: undefined,\n                headerExtensions: undefined,\n            },\n        },\n        screen: {\n            devicePixelRatio: window.devicePixelRatio,\n            width: screen.width,\n            height: screen.height,\n        },\n    };\n\n    constructor() {\n    }\n\n    async getOptions(): Promise<RTCSignalingOptions> {\n        return this.options;\n    }\n\n    async setMicrophone(enabled: boolean) {\n        if (this.microphone && enabled && !this.micEnabled) {\n            this.micEnabled = true;\n            // doing sendrecv on safari requires a mic be attached, or it fails to connect.\n            const mic = await navigator.mediaDevices.getUserMedia({ video: false, audio: true });\n            await this.microphone.replaceTrack(mic.getTracks()[0]);\n        }\n\n        this.microphone.track.enabled = enabled;\n    }\n\n    close() {\n        this.pcDeferred.promise.then(pc => {\n            for (const t of pc.getTransceivers() || []) {\n                try {\n                    t.sender?.track?.stop?.();\n                }\n                catch (e) {\n                }\n            }\n            pc.close();\n        })\n            .catch(() => { });\n        this.pcDeferred.reject(new Error('iceConnectionState ' + this.pc?.iceConnectionState));\n    }\n\n    async createPeerConnection(setup: RTCAVSignalingSetup) {\n        if (this.pc)\n            return;\n\n        const checkConn = () => {\n            console.log('iceConnectionState', pc.iceConnectionState);\n            console.log('connectionState', pc.connectionState);\n            if (isPeerConnectionClosed(pc))\n                this.close();\n        }\n\n        const pc = this.pc = new RTCPeerConnection(setup.configuration);\n        this.pcDeferred.resolve(pc);\n        await this.onPeerConnection?.(pc)\n\n        // pc.addEventListener('connectionstatechange', checkConn);\n        pc.addEventListener('iceconnectionstatechange', checkConn);\n        // pc.addEventListener('icegatheringstatechange', ev => console.log('iceGatheringState', pc.iceGatheringState))\n        // pc.addEventListener('signalingstatechange', ev => console.log('signalingState', pc.signalingState))\n        // pc.addEventListener('icecandidateerror', ev => console.log('icecandidateerror'))\n\n        if (setup.datachannel) {\n            const dc = pc.createDataChannel(setup.datachannel.label, setup.datachannel.dict);\n            dc.binaryType = 'arraybuffer';\n            this.dcDeferred.resolve(dc);\n        }\n\n        if (setup.audio) {\n            let audio: RTCRtpTransceiver;\n            if (setup.getUserMediaSafariHack && navigator.userAgent.includes('Safari') && !navigator.userAgent.includes('Chrome')) {\n                // offering a sendrecv on safari requires a mic be attached for ring webrtc, or it fails to stream?\n                // even if a silent track is used...\n                audio = pc.addTransceiver('audio', {\n                    ...setup.audio,\n                    streams: [\n                        await navigator.mediaDevices.getUserMedia({ audio: true })\n                    ],\n                });\n            }\n            else {\n                audio = pc.addTransceiver('audio', setup.audio);\n            }\n\n            if (setup.audio.direction === 'sendrecv' || setup.audio.direction === 'sendonly') {\n                this.microphone = audio.sender;\n            }\n        }\n\n        if (setup.video) {\n            if (setup.video.direction === 'sendrecv' || setup.video.direction === 'sendonly') {\n                try {\n                    const camera = await navigator.mediaDevices.getUserMedia({ video: true })\n                    for (const track of camera.getTracks()) {\n                        pc.addTrack(track);\n                    }\n                }\n                catch (e) {\n                    // what now\n                }\n            }\n            else {\n                pc.addTransceiver('video', setup.video);\n            }\n        }\n    }\n\n    async createLocalDescription(type: \"offer\" | \"answer\", setup: RTCAVSignalingSetup, sendIceCandidate: RTCSignalingSendIceCandidate) {\n        await this.createPeerConnection(setup);\n\n        const gatheringPromise = new Promise(resolve => {\n            this.pc.onicecandidate = ev => {\n                if (ev.candidate) {\n                    // console.log(\"local candidate\", ev.candidate);\n                    sendIceCandidate?.(JSON.parse(JSON.stringify(ev.candidate)));\n                }\n                else {\n                    resolve(undefined);\n                }\n            }\n\n            this.pc.onicegatheringstatechange = () => {\n                if (this.pc.iceGatheringState === 'complete')\n                    resolve(undefined);\n            }\n        });\n\n        const toDescription = (init: RTCSessionDescriptionInit) => {\n            // console.log('local description', init.sdp);\n            return {\n                type: init.type,\n                sdp: init.sdp,\n            }\n        }\n\n        if (type === 'offer') {\n            let offer = await this.pc.createOffer({\n                offerToReceiveAudio: !!setup.audio,\n                offerToReceiveVideo: !!setup.video,\n            });\n            const set = this.pc.setLocalDescription(offer);\n            if (sendIceCandidate)\n                return toDescription(offer);\n            await set;\n            await gatheringPromise;\n            offer = await this.pc.createOffer({\n                offerToReceiveAudio: !!setup.audio,\n                offerToReceiveVideo: !!setup.video,\n            });\n            return toDescription(offer);\n        }\n        else {\n            let answer = await this.pc.createAnswer();\n            const set = this.pc.setLocalDescription(answer);\n            if (sendIceCandidate)\n                return toDescription(answer);\n            await set;\n            await gatheringPromise;\n            answer = this.pc.currentLocalDescription || answer;\n            return toDescription(answer);\n        }\n    }\n\n    async setRemoteDescription(description: RTCSessionDescriptionInit, setup: RTCAVSignalingSetup) {\n        await this.createPeerConnection(setup);\n        await this.pc.setRemoteDescription(description);\n        // console.log('remote description', description.sdp);\n    }\n\n    async addIceCandidate(candidate: RTCIceCandidateInit) {\n        await this.pc.addIceCandidate(candidate);\n        // console.log(\"remote candidate\", candidate);\n    }\n\n    async endSession() {\n    }\n}\n\nfunction logSendCandidate(console: Console, type: string, session: RTCSignalingSession): RTCSignalingSendIceCandidate {\n    return async (candidate) => {\n        try {\n            if (localStorage.getItem('debugLog') === 'true')\n                console.log(`${type} trickled candidate:`, candidate.sdpMLineIndex, candidate.candidate);\n            await session.addIceCandidate(candidate);\n        }\n        catch (e) {\n            console.error('addIceCandidate error', e);\n            throw e;\n        }\n    }\n}\n\nfunction createCandidateQueue(console: Console, type: string, session: RTCSignalingSession) {\n    let ready = false;\n    let candidateQueue: RTCIceCandidateInit[] = [];\n    const ls = logSendCandidate(console, type, session);\n    const queueSendCandidate: RTCSignalingSendIceCandidate = async (candidate: RTCIceCandidateInit) => {\n        if (!ready)\n            candidateQueue.push(candidate)\n        else\n            ls(candidate);\n    }\n\n    return {\n        flush() {\n            ready = true;\n            for (const candidate of candidateQueue) {\n                ls(candidate);\n            }\n            candidateQueue = [];\n        },\n        queueSendCandidate,\n    }\n}\n\nexport async function connectRTCSignalingClients(\n    console: Console,\n    offerClient: RTCSignalingSession,\n    offerSetup: Partial<RTCAVSignalingSetup>,\n    answerClient: RTCSignalingSession,\n    answerSetup: Partial<RTCAVSignalingSetup>\n) {\n    const offerOptions = await offerClient.getOptions();\n    const answerOptions = await answerClient.getOptions();\n    const disableTrickle = offerOptions?.disableTrickle || answerOptions?.disableTrickle;\n\n    if (offerOptions?.offer && answerOptions?.offer)\n        throw new Error('Both RTC clients have offers and can not negotiate. Consider implementing this in @scrypted/webrtc.');\n\n    if (offerOptions?.requiresOffer && answerOptions?.requiresOffer)\n        throw new Error('Both RTC clients require offers and can not negotiate.');\n\n    offerSetup.type = 'offer';\n    answerSetup.type = 'answer';\n\n    const answerQueue = createCandidateQueue(console, 'offer', answerClient);\n    const offerQueue = createCandidateQueue(console, 'answer', offerClient);\n\n    const offer = await offerClient.createLocalDescription('offer', offerSetup as RTCAVSignalingSetup,\n        disableTrickle ? undefined : answerQueue.queueSendCandidate);\n    if (localStorage.getItem('debugLog') === 'true')\n        console.log('offer sdp', offer.sdp);\n    await answerClient.setRemoteDescription(offer, answerSetup as RTCAVSignalingSetup);\n    const answer = await answerClient.createLocalDescription('answer', answerSetup as RTCAVSignalingSetup,\n        disableTrickle ? undefined : offerQueue.queueSendCandidate);\n    if (localStorage.getItem('debugLog') === 'true')\n        console.log('answer sdp', answer.sdp);\n    await offerClient.setRemoteDescription(answer, offerSetup as RTCAVSignalingSetup);\n    offerQueue.flush();\n    answerQueue.flush();\n}\n","import crypto, { randomBytes } from 'crypto';\nimport dgram from 'dgram';\nimport { once } from 'events';\nimport { BASIC } from 'http-auth-utils/dist/index';\nimport { parseHTTPHeadersQuotedKeyValueSet } from 'http-auth-utils/dist/utils';\nimport net from 'net';\nimport { Duplex, Readable, Writable } from 'stream';\nimport tls from 'tls';\nimport { Deferred } from './deferred';\nimport { closeQuiet, createBindUdp, createBindZero, listenZeroSingleClient } from './listen-cluster';\nimport { timeoutPromise } from './promise-utils';\nimport { readLength, readLine } from './read-stream';\nimport { MSection, parseSdp } from './sdp-utils';\nimport { sleep } from './sleep';\nimport { StreamChunk, StreamParser, StreamParserOptions } from './stream-parser';\nimport { URL } from 'url';\n\nconst REQUIRED_WWW_AUTHENTICATE_KEYS = ['realm', 'nonce'];\n\ntype DigestWWWAuthenticateData = {\n    realm: string;\n    domain?: string;\n    nonce: string;\n    opaque?: string;\n    stale?: 'true' | 'false';\n    algorithm?: 'MD5' | 'MD5-sess' | 'token';\n    qop?: 'auth' | 'auth-int' | string;\n};\n\nexport const RTSP_FRAME_MAGIC = 36;\n\nexport interface Headers {\n    [header: string]: string\n}\n\nexport interface RtspStreamParser extends StreamParser {\n    sdp: Promise<string>;\n}\n\nexport async function readMessage(client: Readable): Promise<string[]> {\n    let currentHeaders: string[] = [];\n    while (true) {\n        let line = await readLine(client);\n        line = line.trim();\n        if (!line)\n            return currentHeaders;\n        currentHeaders.push(line);\n    }\n}\n\n\nexport async function readBody(client: Readable, response: Headers) {\n    const cl = parseInt(response['content-length']);\n    if (cl)\n        return readLength(client, cl)\n}\n\n\nexport function writeMessage(client: Writable, messageLine: string, body: Buffer, headers: Headers, console?: Console) {\n    let message = messageLine !== undefined ? `${messageLine}\\r\\n` : '';\n    if (body)\n        headers['Content-Length'] = body.length.toString();\n    for (const [key, value] of Object.entries(headers)) {\n        message += `${key}: ${value}\\r\\n`;\n    }\n    message += '\\r\\n';\n    client.write(message);\n    console?.log('rtsp outgoing message\\n', message);\n    console?.log();\n    if (body)\n        client.write(body);\n}\n\n// https://yumichan.net/video-processing/video-compression/introduction-to-h264-nal-unit/\n\nexport const H264_NAL_TYPE_RESERVED0 = 0;\nexport const H264_NAL_TYPE_RESERVED30 = 30;\nexport const H264_NAL_TYPE_RESERVED31 = 31;\n\nexport const H264_NAL_TYPE_IDR = 5;\nexport const H264_NAL_TYPE_SEI = 6;\nexport const H264_NAL_TYPE_SPS = 7;\nexport const H264_NAL_TYPE_PPS = 8;\n// aggregate NAL Unit\nexport const H264_NAL_TYPE_STAP_A = 24;\nexport const H264_NAL_TYPE_STAP_B = 25;\n// fragmented NAL Unit (need to match against first)\nexport const H264_NAL_TYPE_FU_A = 28;\nexport const H264_NAL_TYPE_FU_B = 29;\n\nexport const H264_NAL_TYPE_MTAP16 = 26;\nexport const H264_NAL_TYPE_MTAP32 = 27;\n\nexport function findH264NaluType(streamChunk: StreamChunk, naluType: number) {\n    if (streamChunk.type !== 'h264')\n        return;\n    return findH264NaluTypeInNalu(streamChunk.chunks[streamChunk.chunks.length - 1].subarray(12), naluType);\n}\n\nexport function findH264NaluTypeInNalu(nalu: Buffer, naluType: number) {\n    const checkNaluType = nalu[0] & 0x1f;\n    if (checkNaluType === H264_NAL_TYPE_STAP_A) {\n        let pos = 1;\n        while (pos < nalu.length) {\n            const naluLength = nalu.readUInt16BE(pos);\n            pos += 2;\n            const stapaType = nalu[pos] & 0x1f;\n            if (stapaType === naluType)\n                return nalu.subarray(pos, pos + naluLength);\n            pos += naluLength;\n        }\n    }\n    else if (checkNaluType === H264_NAL_TYPE_FU_A) {\n        const fuaType = nalu[1] & 0x1f;\n        const isFuStart = !!(nalu[1] & 0x80);\n\n        if (fuaType === naluType && isFuStart)\n            return nalu.subarray(1);\n    }\n    else if (checkNaluType === naluType) {\n        return nalu;\n    }\n    return;\n}\n\nexport function getNaluTypes(streamChunk: StreamChunk) {\n    if (streamChunk.type !== 'h264')\n        return new Set<number>();\n    return getNaluTypesInNalu(streamChunk.chunks[streamChunk.chunks.length - 1].subarray(12))\n}\n\nexport function getNaluFragmentInformation(nalu: Buffer) {\n    const naluType = nalu[0] & 0x1f;\n    const fua = naluType === H264_NAL_TYPE_FU_A;\n    return {\n        fua,\n        fuaStart: fua && !!(nalu[1] & 0x80),\n        fuaEnd: fua && !!(nalu[1] & 0x40),\n    }\n}\n\nexport function getNaluTypesInNalu(nalu: Buffer, fuaRequireStart = false, fuaRequireEnd = false) {\n    const ret = new Set<number>();\n    const naluType = nalu[0] & 0x1f;\n    if (naluType === H264_NAL_TYPE_STAP_A) {\n        ret.add(H264_NAL_TYPE_STAP_A);\n        let pos = 1;\n        while (pos < nalu.length) {\n            const naluLength = nalu.readUInt16BE(pos);\n            pos += 2;\n            const stapaType = nalu[pos] & 0x1f;\n            ret.add(stapaType);\n            pos += naluLength;\n        }\n    }\n    else if (naluType === H264_NAL_TYPE_FU_A) {\n        ret.add(H264_NAL_TYPE_FU_A);\n        const fuaType = nalu[1] & 0x1f;\n        if (fuaRequireStart) {\n            const isFuStart = !!(nalu[1] & 0x80);\n            if (isFuStart)\n                ret.add(fuaType);\n        }\n        else if (fuaRequireEnd) {\n            const isFuEnd = !!(nalu[1] & 0x40);\n            if (isFuEnd)\n                ret.add(fuaType);\n        }\n        else {\n            ret.add(fuaType);\n        }\n    }\n    else {\n        ret.add(naluType);\n    }\n\n    return ret;\n}\n\nexport function createRtspParser(options?: StreamParserOptions): RtspStreamParser {\n    let resolve: any;\n\n    return {\n        container: 'rtsp',\n        tcpProtocol: 'rtsp://127.0.0.1/' + randomBytes(8).toString('hex'),\n        inputArguments: [\n            '-rtsp_transport',\n            'tcp',\n        ],\n        outputArguments: [\n            '-rtsp_transport',\n            'tcp',\n            ...(options?.vcodec || []),\n            ...(options?.acodec || []),\n            '-f', 'rtsp',\n        ],\n        findSyncFrame(streamChunks: StreamChunk[]) {\n            let foundIndex: number;\n            let nonVideo: {\n                [codec: string]: StreamChunk,\n            } = {};\n\n            const createSyncFrame = () => {\n                const ret = streamChunks.slice(foundIndex);\n                // for (const nv of Object.values(nonVideo)) {\n                //     ret.unshift(nv);\n                // }\n                return ret;\n            }\n\n            for (let prebufferIndex = 0; prebufferIndex < streamChunks.length; prebufferIndex++) {\n                const streamChunk = streamChunks[prebufferIndex];\n                if (streamChunk.type !== 'h264') {\n                    nonVideo[streamChunk.type] = streamChunk;\n                    continue;\n                }\n\n                if (findH264NaluType(streamChunk, H264_NAL_TYPE_SPS))\n                    foundIndex = prebufferIndex;\n            }\n\n            if (foundIndex !== undefined)\n                return createSyncFrame();\n\n            nonVideo = {};\n            // some streams don't contain codec info, so find an idr frame instead.\n            for (let prebufferIndex = 0; prebufferIndex < streamChunks.length; prebufferIndex++) {\n                const streamChunk = streamChunks[prebufferIndex];\n                if (streamChunk.type !== 'h264') {\n                    nonVideo[streamChunk.type] = streamChunk;\n                    continue;\n                }\n                if (findH264NaluType(streamChunk, H264_NAL_TYPE_IDR))\n                    foundIndex = prebufferIndex;\n            }\n\n            if (foundIndex !== undefined)\n                return createSyncFrame();\n\n            // oh well!\n        },\n        sdp: new Promise<string>(r => resolve = r),\n        async *parse(duplex, width, height) {\n            const server = new RtspServer(duplex);\n            await server.handleSetup();\n            resolve(server.sdp);\n            for await (const { type, rtcp, header, packet } of server.handleRecord()) {\n                yield {\n                    chunks: [header, packet],\n                    type: `${rtcp ? 'rtcp-' : ''}${type}`,\n                    width,\n                    height,\n                }\n            }\n        }\n    }\n}\n\nexport function parseHeaders(headers: string[]): Headers {\n    const ret: any = {};\n    for (const header of headers.slice(1)) {\n        const index = header.indexOf(':');\n        let value = '';\n        if (index !== -1)\n            value = header.substring(index + 1).trim();\n        const key = header.substring(0, index).toLowerCase();\n        ret[key] = value;\n    }\n    return ret;\n}\n\nexport function getFirstAuthenticateHeader(headers: string[]): string {\n    for (const header of headers.slice(1)) {\n        const index = header.indexOf(':');\n        let value = '';\n        if (index !== -1)\n            value = header.substring(index + 1).trim();\n        const key = header.substring(0, index).toLowerCase();\n        if (key === 'www-authenticate')\n            return value;\n    }\n}\n\nexport function parseSemicolonDelimited(value: string) {\n    const dict: { [key: string]: string } = {};\n    for (const part of value.split(';')) {\n        const [key, value] = part.split('=', 2);\n        dict[key] = value;\n    }\n\n    return dict;\n}\n\nexport interface RtspStatus {\n    line: string,\n    code: number,\n    version: string,\n    reason: string,\n}\n\nexport interface RtspServerResponse {\n    headers: Headers;\n    body: Buffer;\n    status: RtspStatus;\n}\n\nexport class RtspStatusError extends Error {\n    constructor(public status: RtspStatus) {\n        super(`RTSP Error: ${status.line}`);\n    }\n}\n\nexport class RtspBase {\n    client: net.Socket;\n    console?: Console;\n\n    constructor() {\n    }\n\n    write(messageLine: string, headers: Headers, body?: Buffer) {\n        writeMessage(this.client, messageLine, body, headers, this.console);\n    }\n\n    async readMessage(): Promise<string[]> {\n        const message = await readMessage(this.client);\n        this.console?.log('rtsp incoming message\\n', message.join('\\n'));\n        this.console?.log();\n        return message;\n    }\n}\n\nconst quote = (str: string): string => `\"${str.replace(/\"/g, '\\\\\"')}\"`;\n\nexport interface RtspClientSetupOptions {\n    type: 'tcp' | 'udp';\n    path?: string;\n    onRtp: (rtspHeader: Buffer, rtp: Buffer) => void;\n}\n\nexport interface RtspClientTcpSetupOptions extends RtspClientSetupOptions {\n    type: 'tcp';\n    port: number;\n}\n\nexport interface RtspClientUdpSetupOptions extends RtspClientSetupOptions {\n    type: 'udp';\n    dgram?: dgram.Socket;\n}\n\n// probably only works with scrypted rtsp server.\nexport class RtspClient extends RtspBase {\n    cseq = 0;\n    session: string;\n    wwwAuthenticate: string;\n    requestTimeout: number;\n    needKeepAlive = false;\n    setupOptions = new Map<number, RtspClientTcpSetupOptions>();\n    issuedTeardown = false;\n    hasGetParameter = true;\n\n    constructor(public url: string) {\n        super();\n        const u = new URL(url);\n        const port = parseInt(u.port) || 554;\n        if (url.startsWith('rtsps')) {\n            this.client = tls.connect({\n                rejectUnauthorized: false,\n                port,\n                host: u.hostname,\n            })\n        }\n        else {\n            this.client = net.connect(port, u.hostname);\n        }\n        this.client.on('error', e => {\n            this.console?.log('client error', e);\n        });\n    }\n\n    async safeTeardown() {\n        // issue a teardown to upstream to close gracefully\n        if (this.issuedTeardown)\n            return;\n        this.issuedTeardown = true;\n        try {\n            this.writeTeardown();\n            await sleep(500);\n        }\n        catch (e) {\n        }\n        finally {\n            // will trigger after teardown returns\n            this.client.destroy();\n        }\n    }\n\n    writeRequest(method: string, headers?: Headers, path?: string, body?: Buffer) {\n        headers = headers || {};\n\n        let fullUrl = this.url;\n        if (path) {\n            // a=control may be a full or \"relative\" url.\n            if (path.includes('rtsp://') || path.includes('rtsps://')) {\n                fullUrl = path;\n            }\n            else {\n                // strangely, relative RTSP urls do not behave like expected from an HTTP-ish server.\n                // ffmpeg will happily suffix path segments after query strings:\n                // SETUP rtsp://localhost:5554/cam/realmonitor?channel=1&subtype=0/trackID=0 RTSP/1.0\n                fullUrl += (fullUrl.endsWith('/') ? '' : '/') + path;\n            }\n        }\n\n        const sanitized = new URL(fullUrl);\n        sanitized.username = '';\n        sanitized.password = '';\n\n        const line = `${method} ${sanitized} RTSP/1.0`;\n        const cseq = this.cseq++;\n        headers['CSeq'] = cseq.toString();\n        headers['User-Agent'] = 'Scrypted';\n\n        if (this.wwwAuthenticate)\n            headers['Authorization'] = this.createAuthorizationHeader(method, new URL(fullUrl));\n\n        if (this.session)\n            headers['Session'] = this.session;\n\n        this.write(line, headers, body);\n    }\n\n    async handleDataPayload(header: Buffer) {\n        // todo: fix this, because calling teardown outside of the read loop causes this.\n        if (header[0] !== RTSP_FRAME_MAGIC)\n            throw new Error('RTSP Client received invalid frame magic. This may be a bug in your camera firmware. If this error persists, switch your RTSP Parser to FFmpeg or Scrypted (UDP): ' + header.toString());\n\n        const channel = header.readUInt8(1);\n        const length = header.readUInt16BE(2);\n        const data = await readLength(this.client, length);\n\n        const options = this.setupOptions.get(channel);\n        options?.onRtp?.(header, data);\n    }\n\n    async readDataPayload() {\n        const header = await readLength(this.client, 4);\n        return this.handleDataPayload(header);\n    }\n\n    createBadHeader(header: Buffer) {\n        return new Error('RTSP Client received invalid frame magic. This may be a bug in your camera firmware. If this error persists, switch your RTSP Parser to FFmpeg or Scrypted (UDP): ' + header.toString());\n    }\n\n    async readLoopLegacy() {\n        try {\n            while (true) {\n                if (this.needKeepAlive) {\n                    this.needKeepAlive = false;\n                    if (this.hasGetParameter)\n                        await this.getParameter();\n                    else\n                        await this.options();\n                }\n                await this.readDataPayload();\n            }\n        }\n        catch (e) {\n            this.client.destroy(e);\n            throw e;\n        }\n    }\n\n    async readLoop() {\n        const deferred = new Deferred<void>();\n\n        let header: Buffer;\n        let channel: number;\n        let length: number;\n\n        const read = async () => {\n            if (this.needKeepAlive) {\n                this.needKeepAlive = false;\n                if (this.hasGetParameter)\n                    this.writeGetParameter();\n                else\n                    this.writeOptions();\n            }\n\n            try {\n                while (true) {\n                    // get header if needed\n                    if (!header) {\n                        header = this.client.read(4);\n\n                        if (!header)\n                            return;\n\n                        // validate header once.\n                        if (header[0] !== RTSP_FRAME_MAGIC) {\n                            if (header.toString() !== 'RTSP')\n                                throw this.createBadHeader(header);\n\n                            this.client.unshift(header);\n                            header = undefined;\n\n                            // remove the listener to operate in pull mode.\n                            this.client.removeListener('readable', read);\n\n                            // do what with this?\n                            const message = await super.readMessage();\n                            const body = await this.readBody(parseHeaders(message));\n\n                            // readd the listener to operate in streaming mode.\n                            this.client.on('readable', read);\n\n                            continue;\n                        }\n\n                        channel = header.readUInt8(1);\n                        length = header.readUInt16BE(2);\n                    }\n\n                    const data = this.client.read(length);\n                    if (!data)\n                        return;\n\n                    const h = header;\n                    header = undefined;\n                    const options = this.setupOptions.get(channel);\n                    options?.onRtp?.(h, data);\n                }\n            }\n            catch (e) {\n                deferred.reject(e);\n                this.client.destroy();\n            }\n        };\n\n        read();\n        this.client.on('readable', read);\n\n        await Promise.all([once(this.client, 'end')]);\n    }\n\n    // rtsp over tcp will actually interleave RTSP request/responses\n    // within the RTSP data stream. The only way to tell if it's a request/response\n    // is to see if the header + data starts with RTSP/1.0 message line.\n    // Or RTSP, if looking at only the header bytes. Then grab the response out.\n    async readMessage(): Promise<string[]> {\n        while (true) {\n            const header = await readLength(this.client, 4);\n            if (header[0] !== RTSP_FRAME_MAGIC) {\n                if (header.toString() === 'RTSP') {\n                    this.client.unshift(header);\n                    const message = await super.readMessage();\n                    return message;\n                }\n                throw this.createBadHeader(header);\n            }\n\n            await this.handleDataPayload(header);\n        }\n    }\n\n    createAuthorizationHeader(method: string, url: URL) {\n        if (!this.wwwAuthenticate)\n            throw new Error('no WWW-Authenticate found');\n\n        if (this.wwwAuthenticate.includes('Basic')) {\n            const hash = BASIC.computeHash(url);\n            return `Basic ${hash}`;\n        }\n\n        // hikvision sends out of spec 'random' name and value parameter,\n        // which causes the digest auth lib to fail. so, need to parse the header\n        // manually with a relax set of authorized parameters.\n        // https://github.com/koush/scrypted/issues/344#issuecomment-1223627956\n        // https://github.com/nfroidure/http-auth-utils/blob/7532d21a419ad098d1240c9e1b55855020df5d7f/src/mechanisms/digest.ts#L97\n        // const wwwAuth = DIGEST.parseWWWAuthenticateRest(this.wwwAuthenticate);\n        const wwwAuth = parseHTTPHeadersQuotedKeyValueSet(\n            this.wwwAuthenticate,\n            // the parser will call indexOf to see if the key is authorized. monkey patch this call.\n            // https://github.com/nfroidure/http-auth-utils/blob/17186d3eefb86535916d044c7f59a340bc765603/src/utils.ts#L43\n            {\n                indexOf: () => 0,\n            } as any,\n            REQUIRED_WWW_AUTHENTICATE_KEYS,\n        ) as DigestWWWAuthenticateData;\n\n        const authedUrl = new URL(this.url);\n        const username = decodeURIComponent(authedUrl.username);\n        const password = decodeURIComponent(authedUrl.password);\n\n        const strippedUrl = new URL(url.toString());\n        strippedUrl.username = '';\n        strippedUrl.password = '';\n\n        const ha1 = crypto.createHash('md5').update(`${username}:${wwwAuth.realm}:${password}`).digest('hex');\n        const ha2 = crypto.createHash('md5').update(`${method}:${strippedUrl}`).digest('hex');\n        const hash = crypto.createHash('md5').update(`${ha1}:${wwwAuth.nonce}:${ha2}`).digest('hex');\n\n        const params = {\n            username,\n            realm: wwwAuth.realm,\n            nonce: wwwAuth.nonce,\n            uri: strippedUrl.toString(),\n            algorithm: 'MD5',\n            response: hash,\n        };\n\n        const paramsString = Object.entries(params).map(([key, value]) => `${key}=${value && quote(value)}`).join(', ');\n        return `Digest ${paramsString}`;\n    }\n\n    async readBody(response: Headers) {\n        return readBody(this.client, response);\n    }\n\n    async request(method: string, headers?: Headers, path?: string, body?: Buffer, authenticating?: boolean): Promise<RtspServerResponse> {\n        this.writeRequest(method, headers, path, body);\n\n        const message = this.requestTimeout ? await timeoutPromise(this.requestTimeout, this.readMessage()) : await this.readMessage();\n        const statusLine = message[0];\n        const [version, codeString, reason] = statusLine.split(' ', 3);\n        const code = parseInt(codeString);\n        const response = parseHeaders(message);\n\n        const status = {\n            line: statusLine,\n            code,\n            version,\n            reason,\n        };\n\n        if (code !== 200 && !response['www-authenticate'])\n            throw new RtspStatusError(status);\n\n        // it seems that the first www-authenticate header should be used, as latter ones that are\n        // offered are not actually valid? weird issue seen on tp-link that offers both DIGEST and BASIC.\n        const wwwAuthenticate = getFirstAuthenticateHeader(message) || response['www-authenticate']\n        if (wwwAuthenticate) {\n            if (authenticating)\n                throw new Error('auth failed');\n\n            this.wwwAuthenticate = wwwAuthenticate;\n\n            return this.request(method, headers, path, body, true);\n        }\n        return {\n            headers: response,\n            body: await this.readBody(response),\n            status,\n        }\n    }\n\n    async options() {\n        const headers: Headers = {};\n        const ret = await this.request('OPTIONS', headers);\n        const publicHeader = ret.headers['public'];\n        if (publicHeader)\n            this.hasGetParameter = publicHeader.toLowerCase().includes('get_parameter');\n        return ret;\n    }\n\n    writeOptions() {\n        return this.writeRequest('OPTIONS');\n    }\n\n    async getParameter() {\n        return this.request('GET_PARAMETER');\n    }\n\n    writeGetParameter() {\n        return this.writeRequest('GET_PARAMETER');\n    }\n\n    async describe(headers?: Headers) {\n        return this.request('DESCRIBE', {\n            ...(headers || {}),\n            Accept: 'application/sdp',\n        });\n    }\n\n    async setup(options: RtspClientTcpSetupOptions | RtspClientUdpSetupOptions, headers?: Headers) {\n        const protocol = options.type === 'udp' ? '' : '/TCP';\n        const client = options.type === 'udp' ? 'client_port' : 'interleaved';\n        let port: number;\n        if (options.type === 'tcp') {\n            port = options.port;\n        }\n        else {\n            if (!options.dgram) {\n                const udp = await createBindZero();\n                options.dgram = udp.server;\n                this.client.on('close', () => closeQuiet(udp.server));\n            }\n            port = options.dgram.address().port;\n            options.dgram.on('message', data => options.onRtp(undefined, data));\n        }\n        headers = Object.assign({\n            Transport: `RTP/AVP${protocol};unicast;${client}=${port}-${port + 1}`,\n        }, headers);\n        const response = await this.request('SETUP', headers, options.path);\n        let interleaved: {\n            begin: number;\n            end: number;\n        };\n        if (response.headers.session) {\n            const sessionDict = parseSemicolonDelimited(response.headers.session);\n            let timeout = parseInt(sessionDict['timeout']);\n            if (timeout) {\n                // if a timeout is requested, need to keep the session alive with periodic refresh.\n                // one suggestion is calling OPTIONS, but apparently GET_PARAMETER is more reliable.\n                // https://stackoverflow.com/a/39818378\n                let interval = (timeout - 5) * 1000;\n                let timer = setInterval(() => this.needKeepAlive = true, interval);\n                this.client.once('close', () => clearInterval(timer));\n            }\n\n            this.session = response.headers.session.split(';')[0];\n        }\n        if (response.headers.transport) {\n            const match = response.headers.transport.match(/.*?interleaved=([0-9]+)-([0-9]+)/);\n            if (match) {\n                const [_, begin, end] = match;\n                if (begin && end) {\n                    interleaved = {\n                        begin: parseInt(begin),\n                        end: parseInt(end),\n                    };\n                }\n            }\n        }\n        if (options.type === 'tcp')\n            this.setupOptions.set(interleaved ? interleaved.begin : port, options);\n        return Object.assign({ interleaved, options }, response);\n    }\n\n    async play(headers: Headers = {}, start = '0.000') {\n        headers['Range'] = `npt=${start}-`;\n        return this.request('PLAY', headers);\n    }\n\n    writePlay(start: string = '0.000') {\n        const headers: any = {\n            Range: `npt=${start}-`,\n        };\n        return this.writeRequest('PLAY', headers);\n    }\n\n    writeRtpPayload(header: Buffer, rtp: Buffer) {\n        this.client.write(header);\n        return this.client.write(Buffer.from(rtp));\n    }\n\n    send(rtp: Buffer, channel: number) {\n        const header = Buffer.alloc(4);\n        header.writeUInt8(RTSP_FRAME_MAGIC, 0);\n        header.writeUInt8(channel, 1);\n        header.writeUInt16BE(rtp.length, 2);\n\n        return this.writeRtpPayload(header, rtp);\n    }\n\n    async pause() {\n        return this.request('PAUSE');\n    }\n\n    async teardown() {\n        try {\n            // todo: fix this, because calling teardown outside of the read loop causes this.\n            return await this.request('TEARDOWN');\n        }\n        finally {\n            this.client.destroy();\n        }\n    }\n\n    writeTeardown() {\n        this.writeRequest('TEARDOWN');\n    }\n}\n\nexport interface RtspTrack {\n    protocol: 'tcp' | 'udp';\n    destination: number;\n    codec: string;\n    control: string;\n    rtp?: dgram.Socket;\n    rtcp?: dgram.Socket;\n}\n\nexport class RtspServer {\n    session: string;\n    console: Console;\n    setupTracks: {\n        [trackId: string]: RtspTrack;\n    } = {};\n\n    constructor(public client: Duplex, public sdp?: string, public udp?: boolean, public checkRequest?: (method: string, url: string, headers: Headers, rawMessage: string[]) => Promise<boolean>) {\n        this.session = randomBytes(4).toString('hex');\n        if (sdp)\n            sdp = sdp.trim();\n\n        if (client instanceof net.Socket)\n            client.setNoDelay(true);\n    }\n\n    async handleSetup(methods = ['play', 'record', 'teardown']) {\n        let currentHeaders: string[] = [];\n        while (true) {\n            let line = await readLine(this.client);\n            line = line.trim();\n            if (!line) {\n                const method = await this.headers(currentHeaders);\n                if (methods.includes(method))\n                    return method;\n                currentHeaders = [];\n                continue;\n            }\n            currentHeaders.push(line);\n        }\n    }\n\n    async handlePlayback() {\n        return this.handleSetup();\n    }\n\n    async handleTeardown() {\n        return this.handleSetup();\n    }\n\n    async *handleRecord(): AsyncGenerator<{\n        type: string,\n        rtcp: boolean,\n        header: Buffer,\n        packet: Buffer,\n    }> {\n        while (true) {\n            const header = await readLength(this.client, 4);\n            // can this even happen? since the RTSP request method isn't a fixed\n            // value like the \"RTSP\" in the RTSP response, I don't think so?\n            if (header[0] !== RTSP_FRAME_MAGIC)\n                throw new Error('RTSP Server expected frame magic but received: ' + header.toString());\n            const length = header.readUInt16BE(2);\n            const packet = await readLength(this.client, length);\n            const id = header.readUInt8(1);\n            const destination = id - (id % 2);\n            const track = Object.values(this.setupTracks).find(track => track.destination === destination);\n            if (!track)\n                throw new Error('RSTP Server received unknown channel: ' + id);\n\n            yield {\n                type: track.codec,\n                rtcp: id % 2 === 1,\n                header,\n                packet,\n            }\n        }\n    }\n\n    writeRtpPayload(header: Buffer, rtp: Buffer) {\n        this.client.write(header);\n        return this.client.write(Buffer.from(rtp));\n    }\n\n    send(rtp: Buffer, channel: number) {\n        const header = Buffer.alloc(4);\n        header.writeUInt8(36, 0);\n        header.writeUInt8(channel, 1);\n        header.writeUInt16BE(rtp.length, 2);\n\n        return this.writeRtpPayload(header, rtp);\n    }\n\n    sendUdp(udp: dgram.Socket, port: number, packet: Buffer) {\n        // todo: support non local host?\n        udp.send(packet, port, '127.0.0.1');\n    }\n\n    sendTrack(trackId: string, packet: Buffer, rtcp: boolean) {\n        const track = this.setupTracks[trackId];\n        if (!track) {\n            this.console?.warn('RTSP Server track not found:', trackId);\n            return true;\n        }\n\n        if (track.protocol === 'udp') {\n            if (!this.udp)\n                this.console?.warn('RTSP Server UDP socket not available.');\n            else\n                this.sendUdp(rtcp ? track.rtcp : track.rtp, track.destination, packet);\n            return true;\n        }\n\n        return this.send(packet, rtcp ? track.destination + 1 : track.destination);\n    }\n\n    availableOptions = ['DESCRIBE', 'OPTIONS', 'PAUSE', 'PLAY', 'SETUP', 'TEARDOWN', 'ANNOUNCE', 'RECORD', 'GET_PARAMETER'];\n    options(url: string, requestHeaders: Headers) {\n        const headers: Headers = {};\n        headers['Public'] = this.availableOptions.join(', ');\n\n        this.respond(200, 'OK', requestHeaders, headers);\n    }\n\n    async get_parameter(url: string, requestHeaders: Headers) {\n        const headers: Headers = {};\n        this.respond(200, 'OK', requestHeaders, headers);\n    }\n\n    describe(url: string, requestHeaders: Headers) {\n        const headers: Headers = {};\n        headers['Content-Base'] = url;\n        headers['Content-Type'] = 'application/sdp';\n        this.respond(200, 'OK', requestHeaders, headers, Buffer.from(this.sdp))\n    }\n\n    setupInterleaved(msection: MSection, low: number, high: number) {\n        this.setupTracks[msection.control] = {\n            control: msection.control,\n            protocol: 'tcp',\n            destination: low,\n            codec: msection.codec,\n        }\n    }\n\n\n    resolveInterleaved?: (msection: MSection) => [number, number];\n\n    // todo: use the sdp itself to determine the audio/video track ids so\n    // rewriting is not necessary.\n    async setup(url: string, requestHeaders: Headers) {\n        const headers: Headers = {};\n        let transport = requestHeaders['transport'];\n        headers['Session'] = this.session;\n        const parsedSdp = parseSdp(this.sdp);\n        const msection = parsedSdp.msections.find(msection => url.endsWith(msection.control));\n        if (!msection) {\n            this.respond(404, 'Not Found', requestHeaders, headers);\n            return;\n        }\n\n        if (transport.includes('TCP')) {\n            if (this.resolveInterleaved) {\n                const [low, high] = this.resolveInterleaved(msection);\n                this.setupInterleaved(msection, low, high);\n                transport = `RTP/AVP/TCP;unicast;interleaved=${low}-${high}`;\n            }\n            else {\n                const match = transport.match(/.*?interleaved=([0-9]+)-([0-9]+)/);\n                if (match) {\n                    const low = parseInt(match[1]);\n                    const high = parseInt(match[2]);\n                    this.setupInterleaved(msection, low, high);\n                }\n            }\n        }\n        else {\n            if (!this.udp) {\n                this.respond(461, 'Unsupported Transport', requestHeaders, {});\n                return;\n            }\n            const match = transport.match(/.*?client_port=([0-9]+)-([0-9]+)/);\n            const [_, rtp, rtcp] = match;\n\n            const rtpServer = await createBindZero();\n            const rtcpServer = await createBindUdp(rtpServer.port + 1);\n            this.client.on('close', () => closeQuiet(rtpServer.server));\n            this.client.on('close', () => closeQuiet(rtcpServer.server));\n            this.setupTracks[msection.control] = {\n                control: msection.control,\n                protocol: 'udp',\n                destination: parseInt(rtp),\n                codec: msection.codec,\n                rtp: rtpServer.server,\n                rtcp: rtcpServer.server,\n            }\n            transport = transport.replace('RTP/AVP/UDP', 'RTP/AVP').replace('RTP/AVP', 'RTP/AVP/UDP');\n            transport += `;server_port=${rtpServer.port}-${rtcpServer.port}`;\n        }\n        headers['Transport'] = transport;\n        this.respond(200, 'OK', requestHeaders, headers)\n    }\n\n    play(url: string, requestHeaders: Headers) {\n        const headers: Headers = {};\n        const rtpInfos = Object.values(this.setupTracks).map(track => `url=${url}/${track.control}`);\n        // seq/rtptime was causing issues with gstreamer. commented out.\n        const rtpInfo = rtpInfos.join(','); // + ';seq=0;rtptime=0';\n        headers['RTP-Info'] = rtpInfo;\n        headers['Range'] = 'npt=now-';\n        headers['Session'] = this.session;\n        this.respond(200, 'OK', requestHeaders, headers);\n    }\n\n    async announce(url: string, requestHeaders: Headers) {\n        const contentLength = parseInt(requestHeaders['content-length']);\n        const sdpBuffer = await readLength(this.client, contentLength);\n        this.sdp = sdpBuffer.toString();\n        const headers: Headers = {};\n        headers['Session'] = this.session;\n\n        this.respond(200, 'OK', requestHeaders, headers);\n    }\n\n    async record(url: string, requestHeaders: Headers) {\n        const headers: Headers = {};\n        headers['Session'] = this.session;\n        this.respond(200, 'OK', requestHeaders, headers);\n    }\n\n    async teardown(url: string, requestHeaders: Headers) {\n        const headers: Headers = {};\n        headers['Session'] = this.session;\n        this.respond(200, 'OK', requestHeaders, headers);\n        this.client.destroy();\n    }\n\n    async headers(headers: string[]) {\n        this.console?.log('request headers', headers.join('\\n'));\n\n        let [method, url] = headers[0].split(' ', 2);\n        method = method.toLowerCase();\n        const requestHeaders = parseHeaders(headers);\n        if (this.checkRequest) {\n            let allow: boolean;\n            try {\n                allow = await this.checkRequest(method, url, requestHeaders, headers)\n            }\n            catch (e) {\n                this.console?.error('error checking request', e);\n            }\n            if (!allow) {\n                this.respond(400, 'Bad Request', requestHeaders, {});\n                this.client.destroy();\n                throw new Error('check request failed');\n            }\n        }\n\n        const thisAny = this as any;\n        if (!thisAny[method] || !this.availableOptions.includes(method.toUpperCase())) {\n            this.respond(400, 'Bad Request', requestHeaders, {});\n            return;\n        }\n\n        await thisAny[method](url, requestHeaders);\n        return method;\n    }\n\n    respond(code: number, message: string, requestHeaders: Headers, headers: Headers, buffer?: Buffer) {\n        let response = `RTSP/1.0 ${code} ${message}\\r\\n`;\n        if (requestHeaders['cseq'])\n            headers['CSeq'] = requestHeaders['cseq'];\n        if (buffer)\n            headers['Content-Length'] = buffer.length.toString();\n        for (const [key, value] of Object.entries(headers)) {\n            response += `${key}: ${value}\\r\\n`;\n        }\n        this.console?.log('response headers', response);\n        response += '\\r\\n';\n        this.client.write(response);\n        if (buffer) {\n            this.client.write(buffer);\n            this.console?.log('response body', buffer.toString());\n        }\n    }\n\n    destroy() {\n        this.client.destroy();\n        for (const track of Object.values(this.setupTracks)) {\n            closeQuiet(track.rtp);\n            closeQuiet(track.rtcp);\n        }\n    }\n}\n\nexport async function listenSingleRtspClient<T extends RtspServer>(options?: {\n    hostname?: string,\n    pathToken?: string,\n    createServer?(duplex: Duplex): T,\n}) {\n    const pathToken = options?.pathToken || crypto.randomBytes(8).toString('hex');\n    let { url, clientPromise, server } = await listenZeroSingleClient(options?.hostname);\n\n    const rtspServerPath = '/' + pathToken;\n    url = url.replace('tcp:', 'rtsp:') + rtspServerPath;\n\n    const rtspServerPromise = clientPromise.then(client => {\n        const createServer = options?.createServer || (duplex => new RtspServer(duplex));\n\n        const rtspServer = createServer(client);\n        rtspServer.checkRequest = async (method, url, headers, message) => {\n            rtspServer.checkRequest = undefined;\n            const u = new URL(url);\n            return u.pathname === rtspServerPath;\n        };\n        return rtspServer as T;\n    });\n\n    return {\n        url,\n        rtspServerPromise,\n        server,\n    }\n}\n","// todo: move this to ring.\nexport function replacePorts(sdp: string, audioPort: number, videoPort: number) {\n    let outputSdp = sdp\n        .replace(/c=IN .*/, `c=IN IP4 127.0.0.1`)\n        .replace(/m=audio \\d+/, `m=audio ${audioPort}`)\n        .replace(/m=video \\d+/, `m=video ${videoPort}`);\n    return outputSdp;\n}\n\nexport function replaceSectionPort(sdp: string, section: string, port: number) {\n    const regex = new RegExp(`m=${section} \\\\d+`)\n    let outputSdp = sdp\n        .replace(/c=IN .*/, `c=IN IP4 127.0.0.1`)\n        .replace(regex, `m=${section} ${port}`);\n    return outputSdp;\n}\n\nexport function addTrackControls(sdp: string) {\n    let lines = sdp.split('\\n').map(line => line.trim());\n    lines = lines.filter(line => !line.includes('a=control:'));\n    let trackCount = 0;\n    for (let i = 0; i < lines.length; i++) {\n        const line = lines[i];\n        if (!line.startsWith('m='))\n            continue;\n        lines.splice(i + 1, 0, 'a=control:trackID=' + trackCount);\n        trackCount++;\n    }\n    return lines.join('\\r\\n')\n}\n\n// todo: move this to webrtc\n// this is an sdp corresponding to what is requested from webrtc.\n// h264 baseline and opus are required codecs that all webrtc implementations must provide.\nexport function createSdpInput(audioPort: number, videoPort: number, sdp: string) {\n    // replace all IPs\n    let outputSdp = sdp\n        .replace(/c=IN .*/, `c=IN IP4 127.0.0.1`)\n        .replace(/m=audio \\d+/, `m=audio ${audioPort}`)\n        .replace(/m=video \\d+/, `m=video ${videoPort}`);\n\n    // filter all ice and rtcp mux info\n    let lines = outputSdp.split('\\n').map(line => line.trim());\n    lines = lines\n        .filter(line => !line.includes('a=rtcp-mux'))\n        .filter(line => !line.includes('a=candidate'))\n        .filter(line => !line.includes('a=ice'));\n\n    outputSdp = lines.join('\\r\\n');\n\n    outputSdp = addTrackControls(outputSdp);\n\n    // only include the m sections.\n    outputSdp = outputSdp.split('m=')\n        .slice(1)\n        .map(line => 'm=' + line)\n        .join('');\n    return outputSdp;\n}\n\n// todo: move this to webrtc\nexport function findFmtp(sdp: string, codec: string) {\n    let lines = sdp.split('\\n').map(line => line.trim());\n\n    const re = new RegExp(`a=rtpmap:(\\\\d+) ${codec}`);\n    const rtpmaps = lines.map(line => line.match(re)).filter(match => !!match);\n    return rtpmaps.map(match => {\n        const payloadType = parseInt(match[1]);\n        const fmtpPrefix = `a=fmtp:${payloadType} `;\n        const fmtp = lines.find(line => line.startsWith(fmtpPrefix))?.substring(fmtpPrefix.length);\n        return {\n            payloadType,\n            fmtp,\n        }\n    })\n}\n\nfunction getSections(sdp: string) {\n    const sections = ('\\n' + sdp).split('\\nm=');\n    return sections;\n}\n\nexport function findTrackByType(sdp: string, type: string, directions: TrackDirection[] = ['recvonly', 'sendrecv']) {\n    const sections = getSections(sdp).filter(track => track.startsWith(type));\n\n    for (const section of sections) {\n        const returnTrack = () => {\n            const lines = section.split('\\n').map(line => line.trim());\n            const controlString = 'a=control:';\n            const control = lines.find(line => line.startsWith(controlString));\n            return {\n                section: 'm=' + section,\n                trackId: control.substring(controlString.length),\n            };\n        }\n\n        for (const dir of directions) {\n            if (section.includes(`a=${dir}`)) {\n                return returnTrack();\n            }\n        }\n\n        // some sdp do not advertise a media flow direction. i think recvonly is the default?\n        if ((directions.includes('recvonly'))\n            && !section.includes('sendonly')\n            && !section.includes('inactive')) {\n            return returnTrack();\n        }\n    }\n}\n\ntype TrackDirection = 'sendonly' | 'sendrecv' | 'recvonly' | 'inactive';\n\nexport function findTracksByType(sdp: string, directions: TrackDirection[] = ['recvonly', 'sendrecv']) {\n    return {\n        audio: findTrackByType(sdp, 'audio', directions)?.trackId,\n        video: findTrackByType(sdp, 'video', directions)?.trackId,\n    };\n}\n\nexport function parseMLinePayloadTypes(mline: string) {\n    const payloadTypes: number[] = [];\n    for (const pt of mline.split(' ').slice(3) || []) {\n        payloadTypes.push(parseInt(pt));\n    }\n    return payloadTypes;\n}\n\nexport function parseMLine(mline: string) {\n    // 'm=audio 0 RTP/AVP 96'\n    const split = mline.split(' ');\n    const type = split[0].substring(2);\n    return {\n        type,\n        port: parseInt(split[1]),\n        protocol: split[2],\n        payloadTypes: parseMLinePayloadTypes(mline),\n    }\n}\n\nconst afmtp = 'a=fmtp';\nexport function parseFmtp(msection: string[]) {\n    return msection.filter(line => line.startsWith(afmtp))\n        .map(fmtpLine => {\n            const firstSpace = fmtpLine.indexOf(' ');\n            if (firstSpace === -1)\n                return;\n            const fmtp = fmtpLine.substring(0, firstSpace);\n            const paramLine = fmtpLine.substring(firstSpace + 1);\n            const payloadType = parseInt(fmtp.split(':')[1]);\n\n            if (!fmtp || !paramLine || Number.isNaN( payloadType )) {\n                return;\n            }\n\n            const parameters: {\n                [key: string]: string;\n            } = {};\n\n            paramLine.split(';').map(param => param.trim()).forEach(param => {\n                const [key, ...value] = param.split('=');\n                parameters[key] = value.join('=');\n            });\n            return {\n                payloadType,\n                parameters,\n            }\n        })\n        .filter(fmtp => !!fmtp);\n}\n\nexport type MSection = ReturnType<typeof parseMSection>;\n\nexport function parseRtpMap(mlineType: string, rtpmap: string) {\n    const match = rtpmap?.match(/a=rtpmap:([\\d]+) (.*?)\\/([\\d]+)/);\n\n    rtpmap = rtpmap?.toLowerCase();\n\n    let codec: string;\n    if (rtpmap?.includes('mpeg4')) {\n        codec = 'aac';\n    }\n    else if (rtpmap?.includes('opus')) {\n        codec = 'opus';\n    }\n    else if (rtpmap?.includes('pcma')) {\n        codec = 'pcm_alaw';\n    }\n    else if (rtpmap?.includes('pcmu')) {\n        codec = 'pcm_ulaw';\n    }\n    else if (rtpmap?.includes('pcm')) {\n        codec = 'pcm';\n    }\n    else if (rtpmap?.includes('h264')) {\n        codec = 'h264';\n    }\n    else if (rtpmap?.includes('h265')) {\n        codec = 'h265';\n    }\n    else if (!rtpmap && mlineType === 'audio') {\n        // ffmpeg seems to omit the rtpmap type for pcm alaw when creating sdp?\n        // is this the default?\n        codec = 'pcm_alaw';\n    }\n\n    return {\n        line: rtpmap,\n        codec,\n        rawCodec: match?.[2],\n        clock: parseInt(match?.[3]),\n        payloadType: parseInt(match?.[1]),\n    }\n}\n\nconst acontrol = 'a=control:';\nconst artpmap = 'a=rtpmap:';\nexport function parseMSection(msection: string[]) {\n    const control = msection.find(line => line.startsWith(acontrol))?.substring(acontrol.length);\n    const rtpmapFirst = msection.find(line => line.startsWith(artpmap));\n    const mline = parseMLine(msection[0]);\n\n    let codec = parseRtpMap(mline.type, rtpmapFirst).codec;\n\n    const rtpmaps = msection.filter(line => line.startsWith(artpmap)).map(line => parseRtpMap(mline.type, line));\n\n    let direction: string;\n    for (const checkDirection of ['sendonly', 'sendrecv', 'recvonly', 'inactive']) {\n        const found = msection.find(line => line === 'a=' + checkDirection);\n        if (found) {\n            direction = checkDirection;\n            break;\n        }\n    }\n\n    const ret = {\n        ...mline,\n        fmtp: parseFmtp(msection),\n        lines: msection,\n        rtpmaps,\n        contents: msection.join('\\r\\n'),\n        control,\n        codec,\n        direction,\n        toSdp: () => {\n            return ret.lines.join('\\r\\n');\n        }\n    }\n\n    return ret;\n}\n\nexport type ParsedSdp = ReturnType<typeof parseSdp>;\n\nexport function parseSdp(sdp: string) {\n    const lines = sdp.split('\\n').map(line => line.trim());\n    const header: string[] = [];\n    const msections: string[][] = [];\n    let msection: string[];\n\n    for (const line of lines) {\n        if (line.startsWith('m=')) {\n            if (msection) {\n                msections.push(msection);\n            }\n            msection = [];\n        }\n\n        if (msection) {\n            msection.push(line);\n        }\n        else {\n            header.push(line);\n        }\n    }\n\n    if (msection)\n        msections.push(msection);\n\n    const ret = {\n        header: {\n            lines: header,\n            contents: header.join('\\r\\n'),\n        },\n        msections: msections.map(parseMSection),\n        toSdp: () => {\n            return [...ret.header.lines, ...ret.msections.map(msection => msection.lines).flat()].join('\\r\\n');\n        }\n    }\n\n    return ret;\n}\n\nexport function getSpsPps(\n    section: {\n        fmtp: {\n            payloadType: number;\n            parameters: {\n                [key: string]: string;\n            };\n        }[]\n    }\n) {\n    const spspps = section?.fmtp?.[0]?.parameters?.['sprop-parameter-sets']?.split(',');\n    // empty sprop-parameter-sets is apparently a thing:\n    //     a=fmtp:96 profile-level-id=420029; packetization-mode=1; sprop-parameter-sets=\n    if (spspps?.length !== 2) {\n        return {\n            sps: undefined,\n            pps: undefined,\n        };\n    }\n\n    const [sps, pps] = spspps;\n\n    return {\n        sps: Buffer.from(sps, 'base64'),\n        pps: Buffer.from(pps, 'base64'),\n    }\n}\n","import { Settings, Setting, MixinDeviceBase, ScryptedInterface, SettingValue, MixinDeviceOptions } from \"@scrypted/sdk\";\nimport sdk from \"@scrypted/sdk\";\n\nconst { deviceManager } = sdk;\n\nexport interface SettingsMixinDeviceOptions<T> extends MixinDeviceOptions<T & Settings> {\n    group: string;\n    groupKey: string;\n}\n\nexport abstract class SettingsMixinDeviceBase<T> extends MixinDeviceBase<T & Settings> implements Settings {\n    settingsGroup: string;\n    settingsGroupKey: string;\n\n    constructor(options: SettingsMixinDeviceOptions<T>) {\n        super(options);\n\n        this.settingsGroup = options.group;\n        this.settingsGroupKey = options.groupKey;\n        process.nextTick(() => deviceManager.onMixinEvent(this.id, this, ScryptedInterface.Settings, null));\n    }\n\n    abstract getMixinSettings(): Promise<Setting[]>;\n    abstract putMixinSetting(key: string, value: SettingValue): Promise<boolean|void>;\n\n    async getSettings(): Promise<Setting[]> {\n        const settingsPromise = this.mixinDeviceInterfaces.includes(ScryptedInterface.Settings) ? this.mixinDevice.getSettings() : undefined;\n        const mixinSettingsPromise = this.getMixinSettings();\n        const allSettings: Setting[] = [];\n\n        try {\n            const settings = (await settingsPromise) || [];\n            allSettings.push(...settings);\n        }\n        catch (e) {\n            const name = this.name;\n            const description = `${name} Extension settings failed to load.`;\n            this.console.error(description, e)\n            allSettings.push({\n                key: Math.random().toString(),\n                title: name,\n                value: 'Settings Error',\n                group: 'Errors',\n                description,\n                readonly: true,\n            });\n        }\n\n        try {\n            const mixinSettings = (await mixinSettingsPromise) || [];\n            for (const setting of mixinSettings) {\n                setting.group = setting.group || this.settingsGroup;\n                setting.key = this.settingsGroupKey + ':' + setting.key;\n            }\n            allSettings.push(...mixinSettings);\n        }\n        catch (e) {\n            const name = deviceManager.getDeviceState(this.mixinProviderNativeId).name;\n            const description = `${name} Extension settings failed to load.`;\n            this.console.error(description, e)\n            allSettings.push({\n                key: Math.random().toString(),\n                title: name,\n                value: 'Settings Error',\n                group: 'Errors',\n                description,\n                readonly: true,\n            });\n        }\n\n        return allSettings;\n    }\n\n    async putSetting(key: string, value: SettingValue) {\n        const prefix = this.settingsGroupKey + ':';\n        if (!key?.startsWith(prefix)) {\n            return this.mixinDevice.putSetting(key, value);\n        }\n\n        if (!await this.putMixinSetting(key.substring(prefix.length), value))\n            deviceManager.onMixinEvent(this.id, this, ScryptedInterface.Settings, null);\n    }\n\n    async release() {\n        await deviceManager.onMixinEvent(this.id, this, ScryptedInterface.Settings, null);\n    }\n}\n","export * from \"@scrypted/server/src/sleep\"","import mergeWith from \"lodash/mergeWith\";\n\nexport const deepMerge = <T>(dst: T, src: T) =>\n  mergeWith(dst, src, (obj, src) => {\n    if (!(src == undefined)) {\n      return src;\n    }\n    return obj;\n  });\n","import { randomBytes } from \"crypto\";\nimport { jspack } from \"jspack\";\n\nexport function random16() {\n  return jspack.Unpack(\"!H\", randomBytes(2))[0];\n}\n\nexport function random32() {\n  return jspack.Unpack(\"!L\", randomBytes(4))[0];\n}\n\nexport function bufferXor(a: Buffer, b: Buffer): Buffer {\n  if (a.length !== b.length) {\n    throw new TypeError(\n      \"[webrtc-stun] You can not XOR buffers which length are different\"\n    );\n  }\n\n  const length = a.length;\n  const buffer = Buffer.allocUnsafe(length);\n\n  for (let i = 0; i < length; i++) {\n    buffer[i] = a[i] ^ b[i];\n  }\n\n  return buffer;\n}\n\nexport function bufferArrayXor(arr: Buffer[]): Buffer {\n  const length = [...arr]\n    .sort((a, b) => a.length - b.length)\n    .reverse()[0].length;\n  const xored = Buffer.allocUnsafe(length);\n\n  for (let i = 0; i < length; i++) {\n    xored[i] = 0;\n    arr.forEach((buffer) => {\n      xored[i] ^= buffer[i] ?? 0;\n    });\n  }\n\n  return xored;\n}\n\nexport class BitWriter {\n  value = 0;\n\n  constructor(private bitLength: number) {}\n\n  set(size: number, startIndex: number, value: number) {\n    value &= (1 << size) - 1;\n    this.value |= value << (this.bitLength - size - startIndex);\n\n    return this;\n  }\n\n  get buffer() {\n    const length = Math.ceil(this.bitLength / 8);\n    const buf = Buffer.alloc(length);\n    buf.writeUIntBE(this.value, 0, length);\n    return buf;\n  }\n}\n\nexport class BitWriter2 {\n  private _value = 0n;\n  offset = 0n;\n\n  /**\n   * 各valueがオクテットを跨いではならない\n   */\n  constructor(\n    /**Max 32bit */\n    private bitLength: number\n  ) {\n    if (bitLength > 32) {\n      throw new Error();\n    }\n  }\n\n  set(value: number, size: number = 1) {\n    let value_b = BigInt(value);\n    const size_b = BigInt(size);\n\n    value_b &= (1n << size_b) - 1n;\n    this._value |= value_b << (BigInt(this.bitLength) - size_b - this.offset);\n    this.offset += size_b;\n    return this;\n  }\n\n  get value() {\n    return Number(this._value);\n  }\n\n  get buffer() {\n    const length = Math.ceil(this.bitLength / 8);\n    const buf = Buffer.alloc(length);\n    buf.writeUIntBE(this.value, 0, length);\n    return buf;\n  }\n}\n\nexport function getBit(bits: number, startIndex: number, length: number = 1) {\n  let bin = bits.toString(2).split(\"\");\n  bin = [...Array(8 - bin.length).fill(\"0\"), ...bin];\n  const s = bin.slice(startIndex, startIndex + length).join(\"\");\n  const v = parseInt(s, 2);\n  return v;\n}\n\nexport function paddingByte(bits: number) {\n  const dec = bits.toString(2).split(\"\");\n  return [...[...Array(8 - dec.length)].map(() => \"0\"), ...dec].join(\"\");\n}\n\nexport function paddingBits(bits: number, expectLength: number) {\n  const dec = bits.toString(2);\n  return [...[...Array(expectLength - dec.length)].map(() => \"0\"), ...dec].join(\n    \"\"\n  );\n}\n\nexport function bufferWriter(bytes: number[], values: (number | bigint)[]) {\n  return createBufferWriter(bytes)(values);\n}\n\nexport function createBufferWriter(bytes: number[], singleBuffer?: boolean) {\n  const length = bytes.reduce((acc, cur) => acc + cur, 0);\n  const reuseBuffer = singleBuffer ? Buffer.alloc(length) : undefined;\n\n  return (values: (number | bigint)[]) => {\n    const buf = reuseBuffer || Buffer.alloc(length);\n    let offset = 0;\n\n    values.forEach((v, i) => {\n      const size = bytes[i];\n      if (size === 8) buf.writeBigUInt64BE(v as bigint, offset);\n      else buf.writeUIntBE(v as number, offset, size);\n      offset += size;\n    });\n    return buf;\n  };\n}\n\nexport function bufferWriterLE(bytes: number[], values: (number | bigint)[]) {\n  const length = bytes.reduce((acc, cur) => acc + cur, 0);\n  const buf = Buffer.alloc(length);\n  let offset = 0;\n\n  values.forEach((v, i) => {\n    const size = bytes[i];\n    if (size === 8) buf.writeBigUInt64LE(v as bigint, offset);\n    else buf.writeUIntLE(v as number, offset, size);\n\n    offset += size;\n  });\n  return buf;\n}\n\nexport function bufferReader(buf: Buffer, bytes: number[]) {\n  let offset = 0;\n  return bytes.map((v) => {\n    let read: number | bigint;\n    if (v === 8) {\n      read = buf.readBigUInt64BE(offset);\n    } else {\n      read = buf.readUIntBE(offset, v);\n    }\n\n    offset += v;\n\n    return read as any;\n  });\n}\n\nexport class BufferChain {\n  buffer: Buffer;\n\n  constructor(size: number) {\n    this.buffer = Buffer.alloc(size);\n  }\n\n  writeInt16BE(value: number, offset?: number | undefined) {\n    this.buffer.writeInt16BE(value, offset);\n    return this;\n  }\n\n  writeUInt8(value: number, offset?: number | undefined) {\n    this.buffer.writeUInt8(value, offset);\n    return this;\n  }\n}\n\nexport const dumpBuffer = (data: Buffer) =>\n  \"0x\" +\n  data\n    .toString(\"hex\")\n    .replace(/(.)(.)/g, \"$1$2 \")\n    .split(\" \")\n    .filter((s) => s != undefined && s.length > 0)\n    .join(\",0x\");\n\nexport function buffer2ArrayBuffer(buf: Buffer) {\n  return buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);\n}\n\nexport class BitStream {\n  private position = 0;\n  private bitsPending = 0;\n\n  constructor(public uint8Array: Buffer) {}\n\n  writeBits(bits: number, value: number): BitStream {\n    if (bits == 0) {\n      return this;\n    }\n    value &= 0xffffffff >>> (32 - bits);\n    let bitsConsumed;\n    if (this.bitsPending > 0) {\n      if (this.bitsPending > bits) {\n        this.uint8Array[this.position - 1] |=\n          value << (this.bitsPending - bits);\n        bitsConsumed = bits;\n        this.bitsPending -= bits;\n      } else if (this.bitsPending == bits) {\n        this.uint8Array[this.position - 1] |= value;\n        bitsConsumed = bits;\n        this.bitsPending = 0;\n      } else {\n        this.uint8Array[this.position - 1] |=\n          value >> (bits - this.bitsPending);\n        // ???\n        bitsConsumed = this.bitsPending;\n        this.bitsPending = 0;\n      }\n    } else {\n      bitsConsumed = Math.min(8, bits);\n      this.bitsPending = 8 - bitsConsumed;\n      this.uint8Array[this.position++] =\n        (value >> (bits - bitsConsumed)) << this.bitsPending;\n    }\n    bits -= bitsConsumed;\n    if (bits > 0) {\n      this.writeBits(bits, value);\n    }\n\n    return this;\n  }\n\n  readBits(bits: number, bitBuffer?: number): any {\n    if (typeof bitBuffer == \"undefined\") {\n      bitBuffer = 0;\n    }\n    if (bits == 0) {\n      return bitBuffer;\n    }\n    let partial: number;\n    let bitsConsumed: number;\n    if (this.bitsPending > 0) {\n      const byte =\n        this.uint8Array[this.position - 1] & (0xff >> (8 - this.bitsPending));\n      bitsConsumed = Math.min(this.bitsPending, bits);\n      this.bitsPending -= bitsConsumed;\n      partial = byte >> this.bitsPending;\n    } else {\n      bitsConsumed = Math.min(8, bits);\n      this.bitsPending = 8 - bitsConsumed;\n      partial = this.uint8Array[this.position++] >> this.bitsPending;\n    }\n    bits -= bitsConsumed;\n    bitBuffer = (bitBuffer << bitsConsumed) | partial;\n    return bits > 0 ? this.readBits(bits, bitBuffer) : bitBuffer;\n  }\n\n  seekTo(bitPos: number) {\n    this.position = (bitPos / 8) | 0;\n    this.bitsPending = bitPos % 8;\n    if (this.bitsPending > 0) {\n      this.bitsPending = 8 - this.bitsPending;\n      this.position++;\n    }\n  }\n}\n","export * from \"./binary\";\nexport * from \"./number\";\nexport * from \"./promise\";\nexport * from \"./network\";\nexport * from \"./array\";\nexport * from \"./type\";\nexport * from \"./log\";\n","export class WeriftError extends Error {\n  message!: string;\n  payload?: object;\n  path?: string;\n\n  constructor(props: Pick<WeriftError, \"message\" | \"payload\" | \"path\">) {\n    super(props.message);\n  }\n\n  toJSON() {\n    return {\n      message: this.message,\n      payload: JSON.parse(JSON.stringify(this.payload)),\n      path: this.path,\n    };\n  }\n}\n","import { createSocket, SocketType } from \"dgram\";\n\nexport type InterfaceAddresses = {\n  [K in SocketType]?: string;\n};\n\nexport const interfaceAddress = (\n  type: SocketType,\n  interfaceAddresses: InterfaceAddresses | undefined\n) => (interfaceAddresses ? interfaceAddresses[type] : undefined);\n\nexport async function randomPort(\n  protocol: SocketType = \"udp4\",\n  interfaceAddresses?: InterfaceAddresses\n) {\n  const socket = createSocket(protocol);\n\n  setImmediate(() =>\n    socket.bind({\n      port: 0,\n      address: interfaceAddress(protocol, interfaceAddresses),\n    })\n  );\n\n  await new Promise<void>((r) => {\n    socket.once(\"error\", r);\n    socket.once(\"listening\", r);\n  });\n\n  const port = socket.address()?.port;\n  await new Promise<void>((r) => socket.close(() => r()));\n  return port;\n}\n\nexport async function randomPorts(\n  num: number,\n  protocol: SocketType = \"udp4\",\n  interfaceAddresses?: InterfaceAddresses\n) {\n  return Promise.all(\n    [...Array(num)].map(() => randomPort(protocol, interfaceAddresses))\n  );\n}\n\nexport async function findPort(\n  min: number,\n  max: number,\n  protocol: SocketType = \"udp4\",\n  interfaceAddresses?: InterfaceAddresses\n) {\n  let port: number | undefined;\n\n  for (let i = min; i <= max; i++) {\n    const socket = createSocket(protocol);\n\n    setImmediate(() =>\n      socket.bind({\n        port: i,\n        address: interfaceAddress(protocol, interfaceAddresses),\n      })\n    );\n\n    const err = await new Promise<Error | void>((r) => {\n      socket.once(\"error\", (e) => r(e));\n      socket.once(\"listening\", () => r());\n    });\n    if (err) {\n      await new Promise<void>((r) => socket.close(() => r()));\n      continue;\n    }\n\n    port = socket.address()?.port;\n    await new Promise<void>((r) => socket.close(() => r()));\n    if (min <= port && port <= max) {\n      break;\n    }\n  }\n\n  if (!port) throw new Error(\"port not found\");\n\n  return port;\n}\n","export function uint8Add(a: number, b: number) {\n  return (a + b) & 0xff;\n}\n\nexport function uint16Add(a: number, b: number) {\n  return (a + b) & 0xffff;\n}\n\nexport function uint32Add(a: number, b: number) {\n  return Number((BigInt(a) + BigInt(b)) & 0xffffffffn);\n}\n\nexport function uint24(v: number) {\n  return v & 0xffffff;\n}\n\n/**Return a > b */\nexport function uint16Gt(a: number, b: number) {\n  const halfMod = 0x8000;\n  return (a < b && b - a > halfMod) || (a > b && a - b < halfMod);\n}\n\n/**Return a >= b */\nexport function uint16Gte(a: number, b: number) {\n  return a === b || uint16Gt(a, b);\n}\n\n/**Return a > b */\nexport function uint32Gt(a: number, b: number) {\n  const halfMod = 0x80000000;\n  return (a < b && b - a > halfMod) || (a > b && a - b < halfMod);\n}\n\n/**Return a >= b */\nexport function uint32Gte(a: number, b: number) {\n  return a === b || uint32Gt(a, b);\n}\n\nexport const int = (n: number) => parseInt(n as any, 10);\n","export class PromiseQueue {\n  queue: {\n    promise: () => Promise<unknown>;\n    done: (...args: any[]) => void;\n    failed: (...args: any[]) => void;\n  }[] = [];\n  running = false;\n\n  push = <T>(promise: () => Promise<T>) =>\n    new Promise<T>((r, f) => {\n      this.queue.push({ promise, done: r, failed: f });\n      if (!this.running) {\n        this.run();\n      }\n    });\n\n  private async run() {\n    const task = this.queue.shift();\n    if (task) {\n      this.running = true;\n\n      try {\n        const res = await task.promise();\n        task.done(res);\n      } catch (error) {\n        task.failed(error);\n      }\n\n      this.run();\n    } else {\n      this.running = false;\n    }\n  }\n}\n","export const SignatureAlgorithm = {\n  rsa_1: 1,\n  ecdsa_3: 3,\n} as const;\nexport type SignatureAlgorithms =\n  typeof SignatureAlgorithm[keyof typeof SignatureAlgorithm];\n\nexport const HashAlgorithm = {\n  sha256_4: 4,\n} as const;\nexport type HashAlgorithms = typeof HashAlgorithm[keyof typeof HashAlgorithm];\n\nexport type SignatureHash = {\n  hash: HashAlgorithms;\n  signature: SignatureAlgorithms;\n};\n\nexport const CipherSuite = {\n  TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256_49195: 0xc02b, //49195,\n  TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256_49199: 0xc02f, //49199\n} as const;\nexport type CipherSuites = typeof CipherSuite[keyof typeof CipherSuite];\nexport const CipherSuiteList: CipherSuites[] = Object.values(CipherSuite);\n\nexport const NamedCurveAlgorithm = {\n  x25519_29: 29,\n  secp256r1_23: 23,\n} as const;\nexport type NamedCurveAlgorithms =\n  typeof NamedCurveAlgorithm[keyof typeof NamedCurveAlgorithm];\nexport const NamedCurveAlgorithmList: NamedCurveAlgorithms[] =\n  Object.values(NamedCurveAlgorithm);\n\nexport const CurveType = { named_curve_3: 3 } as const;\nexport type CurveTypes = typeof CurveType[keyof typeof CurveType];\n\nexport const SignatureScheme = {\n  rsa_pkcs1_sha256: 0x0401,\n  ecdsa_secp256r1_sha256: 0x0403,\n} as const;\nexport type SignatureSchemes =\n  typeof SignatureScheme[keyof typeof SignatureScheme];\n","import {\n  createECDHEECDSAKeyExchange,\n  createECDHEPSKKeyExchange,\n  createECDHERSAKeyExchange,\n  createPSKKeyExchange,\n  createRSAKeyExchange,\n  KeyExchange,\n} from \"./key-exchange\";\nimport AEADCipher from \"./suites/aead\";\n\nconst cipherSuites = {\n  TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256: 0xc02b,\n  TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384: 0xc02c,\n  TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256: 0xc02f,\n  TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384: 0xc030,\n  TLS_RSA_WITH_AES_128_GCM_SHA256: 0x009c,\n  TLS_RSA_WITH_AES_256_GCM_SHA384: 0x009d,\n  TLS_PSK_WITH_AES_128_GCM_SHA256: 0x00a8,\n  TLS_PSK_WITH_AES_256_GCM_SHA384: 0x00a9,\n  TLS_ECDHE_PSK_WITH_AES_128_GCM_SHA256: 0xd001,\n  TLS_ECDHE_PSK_WITH_AES_256_GCM_SHA384: 0xd002,\n  TLS_ECDHE_PSK_WITH_CHACHA20_POLY1305_SHA256: 0xccac,\n  TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256: 0xcca9,\n  TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256: 0xcca8,\n  TLS_PSK_WITH_CHACHA20_POLY1305_SHA256: 0xccab,\n};\n\nconst AEAD_AES_128_GCM = {\n  K_LEN: 16, // Length of a key.\n  N_MIN: 12, // Min nonce length.\n  N_MAX: 12, // Max nonce length.\n  P_MAX: 2 ** 36 - 31, // Max length of a plaintext.\n\n  // Max safe int in js is 2 ** 53. So, use this value\n  // instead of 2 ** 61 as described in rfc5116.\n  A_MAX: 2 ** 53 - 1, // Max length of an additional data.\n  C_MAX: 2 ** 36 - 15, // Cipher text length.\n};\n\nconst AEAD_AES_256_GCM = {\n  K_LEN: 32, // Length of a key.\n  N_MIN: 12, // Min nonce length.\n  N_MAX: 12, // Max nonce length.\n  P_MAX: 2 ** 36 - 31, // Max length of a plaintext.\n\n  // Note: see above.\n  A_MAX: 2 ** 53 - 1, // Max length of an additional data.\n  C_MAX: 2 ** 36 - 15, // Cipher text length.\n};\n\nconst RSA_KEY_EXCHANGE = createRSAKeyExchange();\nconst ECDHE_RSA_KEY_EXCHANGE = createECDHERSAKeyExchange();\nconst ECDHE_ECDSA_KEY_EXCHANGE = createECDHEECDSAKeyExchange();\nconst PSK_KEY_EXCHANGE = createPSKKeyExchange();\nconst ECDHE_PSK_KEY_EXCHANGE = createECDHEPSKKeyExchange();\n\n/**\n * Convert cipher value to cipher instance.\n * @param {number} cipher\n */\nexport function createCipher(cipher: number) {\n  switch (cipher) {\n    case cipherSuites.TLS_RSA_WITH_AES_128_GCM_SHA256:\n      return createAEADCipher(\n        cipherSuites.TLS_RSA_WITH_AES_128_GCM_SHA256,\n        \"TLS_RSA_WITH_AES_128_GCM_SHA256\",\n        \"aes-128-gcm\",\n        RSA_KEY_EXCHANGE,\n        AEAD_AES_128_GCM\n      );\n    case cipherSuites.TLS_RSA_WITH_AES_256_GCM_SHA384:\n      return createAEADCipher(\n        cipherSuites.TLS_RSA_WITH_AES_256_GCM_SHA384,\n        \"TLS_RSA_WITH_AES_256_GCM_SHA384\",\n        \"aes-256-gcm\",\n        RSA_KEY_EXCHANGE,\n        AEAD_AES_256_GCM,\n        \"sha384\"\n      );\n    case cipherSuites.TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256:\n      return createAEADCipher(\n        cipherSuites.TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,\n        \"TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256\",\n        \"aes-128-gcm\",\n        ECDHE_RSA_KEY_EXCHANGE,\n        AEAD_AES_128_GCM\n      );\n    case cipherSuites.TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384:\n      return createAEADCipher(\n        cipherSuites.TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,\n        \"TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384\",\n        \"aes-256-gcm\",\n        ECDHE_RSA_KEY_EXCHANGE,\n        AEAD_AES_256_GCM,\n        \"sha384\"\n      );\n    case cipherSuites.TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256:\n      return createAEADCipher(\n        cipherSuites.TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,\n        \"TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256\",\n        \"aes-128-gcm\",\n        ECDHE_ECDSA_KEY_EXCHANGE,\n        AEAD_AES_128_GCM\n      );\n    case cipherSuites.TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384:\n      return createAEADCipher(\n        cipherSuites.TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,\n        \"TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384\",\n        \"aes-256-gcm\",\n        ECDHE_ECDSA_KEY_EXCHANGE,\n        AEAD_AES_256_GCM,\n        \"sha384\"\n      );\n    case cipherSuites.TLS_PSK_WITH_AES_128_GCM_SHA256:\n      return createAEADCipher(\n        cipherSuites.TLS_PSK_WITH_AES_128_GCM_SHA256,\n        \"TLS_PSK_WITH_AES_128_GCM_SHA256\",\n        \"aes-128-gcm\",\n        PSK_KEY_EXCHANGE,\n        AEAD_AES_128_GCM,\n        \"sha256\"\n      );\n    case cipherSuites.TLS_PSK_WITH_AES_256_GCM_SHA384:\n      return createAEADCipher(\n        cipherSuites.TLS_PSK_WITH_AES_256_GCM_SHA384,\n        \"TLS_PSK_WITH_AES_256_GCM_SHA384\",\n        \"aes-256-gcm\",\n        PSK_KEY_EXCHANGE,\n        AEAD_AES_256_GCM,\n        \"sha384\"\n      );\n    case cipherSuites.TLS_ECDHE_PSK_WITH_AES_128_GCM_SHA256:\n      return createAEADCipher(\n        cipherSuites.TLS_ECDHE_PSK_WITH_AES_128_GCM_SHA256,\n        \"TLS_ECDHE_PSK_WITH_AES_128_GCM_SHA256\",\n        \"aes-128-gcm\",\n        ECDHE_PSK_KEY_EXCHANGE,\n        AEAD_AES_128_GCM,\n        \"sha256\"\n      );\n    case cipherSuites.TLS_ECDHE_PSK_WITH_AES_256_GCM_SHA384:\n      return createAEADCipher(\n        cipherSuites.TLS_ECDHE_PSK_WITH_AES_256_GCM_SHA384,\n        \"TLS_ECDHE_PSK_WITH_AES_256_GCM_SHA384\",\n        \"aes-256-gcm\",\n        ECDHE_PSK_KEY_EXCHANGE,\n        AEAD_AES_256_GCM,\n        \"sha384\"\n      );\n    default:\n      break;\n  }\n\n  return null as any as AEADCipher;\n}\n\n/**\n * @param {number} id An internal id of cipher suite.\n * @param {string} name A valid cipher suite name.\n * @param {string} block A valid nodejs cipher name.\n * @param {KeyExchange} kx Key exchange type.\n * @param {Object} constants Cipher specific constants.\n * @param {string} hash\n * @returns {AEADCipher}\n */\nexport function createAEADCipher(\n  id: number,\n  name: string,\n  block: string,\n  kx: KeyExchange,\n  constants: { K_LEN: number; N_MAX: number },\n  hash = \"sha256\"\n) {\n  const cipher = new AEADCipher();\n\n  cipher.id = id;\n  cipher.name = name;\n  cipher.blockAlgorithm = block;\n  cipher.kx = kx;\n  cipher.hashAlgorithm = hash;\n\n  cipher.keyLength = constants.K_LEN;\n  cipher.nonceLength = constants.N_MAX;\n\n  // RFC5288, sec. 3\n  cipher.nonceImplicitLength = 4;\n  cipher.nonceExplicitLength = 8;\n\n  cipher.ivLength = cipher.nonceImplicitLength;\n\n  cipher.authTagLength = 16;\n\n  return cipher;\n}\n","const signTypes = {\n  NULL: 0,\n  ECDHE: 1,\n};\n\nconst keyTypes = {\n  NULL: 0,\n  RSA: 1,\n  ECDSA: 2,\n  PSK: 3,\n};\n\nconst kxTypes = {\n  NULL: 0,\n  RSA: 1,\n  ECDHE_RSA: 2,\n  ECDHE_ECDSA: 3,\n  PSK: 4,\n  ECDHE_PSK: 5,\n};\n\n/**\n * This class represent type of key exchange mechanism.\n */\nexport class KeyExchange {\n  id = 0;\n  name?: string;\n  signType?: number;\n  keyType?: number;\n\n  /**\n   * @returns {string}\n   */\n  toString() {\n    return this.name;\n  }\n}\n\n/**\n * Creates `RSA` key exchange.\n * @returns {KeyExchange}\n */\nexport function createRSAKeyExchange() {\n  const exchange = new KeyExchange();\n\n  exchange.id = kxTypes.RSA;\n  exchange.name = \"RSA\";\n\n  exchange.keyType = keyTypes.RSA;\n\n  return exchange;\n}\n\n/**\n * Creates `ECDHE_RSA` key exchange.\n * @returns {KeyExchange}\n */\nexport function createECDHERSAKeyExchange() {\n  const exchange = new KeyExchange();\n\n  exchange.id = kxTypes.ECDHE_RSA;\n  exchange.name = \"ECDHE_RSA\";\n\n  exchange.signType = signTypes.ECDHE;\n  exchange.keyType = keyTypes.RSA;\n\n  return exchange;\n}\n\n/**\n * Creates `ECDHE_ECDSA` key exchange.\n * @returns {KeyExchange}\n */\nexport function createECDHEECDSAKeyExchange() {\n  const exchange = new KeyExchange();\n\n  exchange.id = kxTypes.ECDHE_ECDSA;\n  exchange.name = \"ECDHE_ECDSA\";\n\n  exchange.signType = signTypes.ECDHE;\n  exchange.keyType = keyTypes.ECDSA;\n\n  return exchange;\n}\n\n/**\n * Creates `NULL` key exchange.\n * @returns {KeyExchange}\n */\nexport function createNULLKeyExchange() {\n  const exchange = new KeyExchange();\n\n  exchange.id = kxTypes.NULL;\n  exchange.name = \"NULL\";\n\n  exchange.signType = signTypes.NULL;\n  exchange.keyType = keyTypes.NULL;\n\n  return exchange;\n}\n\n/**\n * Creates `PSK` key exchange.\n * @returns {KeyExchange}\n */\nexport function createPSKKeyExchange() {\n  const exchange = new KeyExchange();\n\n  exchange.id = kxTypes.PSK;\n  exchange.name = \"PSK\";\n\n  exchange.signType = signTypes.NULL;\n  exchange.keyType = keyTypes.PSK;\n\n  return exchange;\n}\n\n/**\n * Creates `ECDHE_PSK` key exchange.\n * @returns {KeyExchange}\n */\nexport function createECDHEPSKKeyExchange() {\n  const exchange = new KeyExchange();\n\n  exchange.id = kxTypes.ECDHE_PSK;\n  exchange.name = \"ECDHE_PSK\";\n\n  exchange.signType = signTypes.ECDHE;\n  exchange.keyType = keyTypes.PSK;\n\n  return exchange;\n}\n","import { ec } from \"elliptic\";\nimport * as nacl from \"tweetnacl\";\n\nimport { NamedCurveAlgorithm, NamedCurveAlgorithms } from \"./const\";\n\nexport interface NamedCurveKeyPair {\n  curve: NamedCurveAlgorithms;\n  publicKey: Buffer;\n  privateKey: Buffer;\n}\n\nexport function generateKeyPair(\n  namedCurve: NamedCurveAlgorithms\n): NamedCurveKeyPair {\n  switch (namedCurve) {\n    case NamedCurveAlgorithm.secp256r1_23: {\n      const elliptic = new ec(\"p256\");\n      const key = elliptic.genKeyPair();\n      const privateKey = key.getPrivate().toBuffer(\"be\");\n      const publicKey = Buffer.from(key.getPublic().encode(\"array\", false));\n\n      return {\n        curve: namedCurve,\n        privateKey,\n        publicKey,\n      };\n    }\n    case NamedCurveAlgorithm.x25519_29: {\n      const keys = nacl.box.keyPair();\n\n      return {\n        curve: namedCurve,\n        privateKey: Buffer.from(keys.secretKey.buffer),\n        publicKey: Buffer.from(keys.publicKey.buffer),\n      };\n    }\n    default:\n      throw new Error();\n  }\n}\n","import { createDecode } from \"binary-data\";\nimport { createHash, createHmac } from \"crypto\";\nimport { ec } from \"elliptic\";\nimport * as nacl from \"tweetnacl\";\n\nimport { NamedCurveAlgorithm, NamedCurveAlgorithms } from \"./const\";\n\nexport function prfPreMasterSecret(\n  publicKey: Buffer,\n  privateKey: Buffer,\n  curve: NamedCurveAlgorithms\n) {\n  switch (curve) {\n    case NamedCurveAlgorithm.secp256r1_23:\n      const elliptic = new ec(\"p256\"); // aka secp256r1\n      const pub = elliptic.keyFromPublic(publicKey).getPublic();\n      const priv = elliptic.keyFromPrivate(privateKey).getPrivate();\n      const res = pub.mul(priv);\n      const secret = Buffer.from(res.encode(\"array\", false)).slice(1, 33);\n      return secret;\n    case NamedCurveAlgorithm.x25519_29:\n      return Buffer.from(nacl.scalarMult(privateKey, publicKey));\n    default:\n      throw new Error();\n  }\n}\n\nexport function hmac(algorithm: string, secret: Buffer, data: Buffer) {\n  const hash = createHmac(algorithm, secret);\n  hash.update(data);\n  return hash.digest();\n}\n\nexport function prfPHash(\n  secret: Buffer,\n  seed: Buffer,\n  requestedLegth: number,\n  algorithm = \"sha256\"\n) {\n  const totalLength = requestedLegth;\n  const bufs: Buffer[] = [];\n  let Ai = seed; // A0\n\n  do {\n    Ai = hmac(algorithm, secret, Ai); // A(i) = HMAC(secret, A(i-1))\n    const output = hmac(algorithm, secret, Buffer.concat([Ai, seed]));\n\n    bufs.push(output);\n    requestedLegth -= output.length; // eslint-disable-line no-param-reassign\n  } while (requestedLegth > 0);\n\n  return Buffer.concat(bufs, totalLength);\n}\n\nexport function prfMasterSecret(\n  preMasterSecret: Buffer,\n  clientRandom: Buffer,\n  serverRandom: Buffer\n) {\n  const seed = Buffer.concat([\n    Buffer.from(\"master secret\"),\n    clientRandom,\n    serverRandom,\n  ]);\n  return prfPHash(preMasterSecret, seed, 48);\n}\n\nexport function prfExtendedMasterSecret(\n  preMasterSecret: Buffer,\n  handshakes: Buffer\n) {\n  const sessionHash = hash(\"sha256\", handshakes);\n  const label = \"extended master secret\";\n  return prfPHash(\n    preMasterSecret,\n    Buffer.concat([Buffer.from(label), sessionHash]),\n    48\n  );\n}\n\nexport function exportKeyingMaterial(\n  label: string,\n  length: number,\n  masterSecret: Buffer,\n  localRandom: Buffer,\n  remoteRandom: Buffer,\n  isClient: boolean\n) {\n  const clientRandom = isClient ? localRandom : remoteRandom;\n  const serverRandom = isClient ? remoteRandom : localRandom;\n  const seed = Buffer.concat([Buffer.from(label), clientRandom, serverRandom]);\n  return prfPHash(masterSecret, seed, length);\n}\n\nexport function hash(algorithm: string, data: Buffer) {\n  return createHash(algorithm).update(data).digest();\n}\n\nexport function prfVerifyData(\n  masterSecret: Buffer,\n  handshakes: Buffer,\n  label: string,\n  size = 12\n) {\n  const bytes = hash(\"sha256\", handshakes);\n  return prfPHash(\n    masterSecret,\n    Buffer.concat([Buffer.from(label), bytes]),\n    size\n  );\n}\n\nexport function prfVerifyDataClient(masterSecret: Buffer, handshakes: Buffer) {\n  return prfVerifyData(masterSecret, handshakes, \"client finished\");\n}\n\nexport function prfVerifyDataServer(masterSecret: Buffer, handshakes: Buffer) {\n  return prfVerifyData(masterSecret, handshakes, \"server finished\");\n}\n\nexport function prfEncryptionKeys(\n  masterSecret: Buffer,\n  clientRandom: Buffer,\n  serverRandom: Buffer,\n  prfKeyLen: number,\n  prfIvLen: number,\n  prfNonceLen: number,\n  algorithm = \"sha256\"\n) {\n  const size = prfKeyLen * 2 + prfIvLen * 2;\n  const secret = masterSecret;\n  const seed = Buffer.concat([serverRandom, clientRandom]);\n  const keyBlock = prfPHash(\n    secret,\n    Buffer.concat([Buffer.from(\"key expansion\"), seed]),\n    size,\n    algorithm\n  );\n  const stream = createDecode(keyBlock);\n\n  const clientWriteKey = stream.readBuffer(prfKeyLen);\n  const serverWriteKey = stream.readBuffer(prfKeyLen);\n\n  const clientNonceImplicit = stream.readBuffer(prfIvLen);\n  const serverNonceImplicit = stream.readBuffer(prfIvLen);\n\n  const clientNonce = Buffer.alloc(prfNonceLen, 0);\n  const serverNonce = Buffer.alloc(prfNonceLen, 0);\n\n  clientNonceImplicit.copy(clientNonce, 0);\n  serverNonceImplicit.copy(serverNonce, 0);\n\n  return { clientWriteKey, serverWriteKey, clientNonce, serverNonce };\n}\n","import { KeyExchange } from \"../key-exchange\";\n\nexport type CipherHeader = {\n  type: number;\n  version: number;\n  epoch: number;\n  sequenceNumber: number;\n};\n\nexport const SessionType = {\n  CLIENT: 1,\n  SERVER: 2,\n} as const;\nexport type SessionTypes = typeof SessionType[keyof typeof SessionType];\n\nexport default abstract class AbstractCipher {\n  id = 0;\n  name?: string;\n  hashAlgorithm?: string;\n  verifyDataLength = 12;\n\n  blockAlgorithm?: string;\n  kx?: KeyExchange;\n\n  /**\n   * Init cipher.\n   * @abstract\n   */\n  init(...args: any) {\n    throw new Error(\"not implemented\");\n  }\n\n  /**\n   * Encrypts data.\n   * @abstract\n   */\n  encrypt(...args: any): Buffer {\n    throw new Error(\"not implemented\");\n  }\n\n  /**\n   * Decrypts data.\n   * @abstract\n   */\n  decrypt(...args: any): Buffer {\n    throw new Error(\"not implemented\");\n  }\n\n  /**\n   * @returns {string}\n   */\n  toString() {\n    return this.name;\n  }\n}\n","import * as crypto from \"crypto\";\nimport debug from \"debug\";\n\nimport { dumpBuffer, getObjectSummary } from \"../../helper\";\nimport { prfEncryptionKeys } from \"../prf\";\nimport Cipher, { CipherHeader, SessionType, SessionTypes } from \"./abstract\";\nconst {\n  createDecode,\n  encode,\n  types: { uint8, uint16be, uint48be },\n} = require(\"binary-data\");\n\nconst ContentType = uint8;\nconst ProtocolVersion = uint16be;\n\nconst AEADAdditionalData = {\n  epoch: uint16be,\n  sequence: uint48be,\n  type: ContentType,\n  version: ProtocolVersion,\n  length: uint16be,\n};\n\nconst err = debug(\n  \"werift-dtls : packages/dtls/src/cipher/suites/aead.ts : err\"\n);\n\n/**\n * This class implements AEAD cipher family.\n */\nexport default class AEADCipher extends Cipher {\n  keyLength = 0;\n  nonceLength = 0;\n  ivLength = 0;\n  authTagLength = 0;\n\n  nonceImplicitLength = 0;\n  nonceExplicitLength = 0;\n\n  clientWriteKey?: Buffer;\n  serverWriteKey?: Buffer;\n\n  clientNonce?: Buffer;\n  serverNonce?: Buffer;\n\n  constructor() {\n    super();\n  }\n\n  get summary() {\n    return getObjectSummary(this);\n  }\n\n  init(masterSecret: Buffer, serverRandom: Buffer, clientRandom: Buffer) {\n    const keys = prfEncryptionKeys(\n      masterSecret,\n      clientRandom,\n      serverRandom,\n      this.keyLength,\n      this.ivLength,\n      this.nonceLength,\n      this.hashAlgorithm\n    );\n\n    this.clientWriteKey = keys.clientWriteKey;\n    this.serverWriteKey = keys.serverWriteKey;\n    this.clientNonce = keys.clientNonce;\n    this.serverNonce = keys.serverNonce;\n  }\n\n  /**\n   * Encrypt message.\n   */\n  encrypt(type: SessionTypes, data: Buffer, header: CipherHeader) {\n    const isClient = type === SessionType.CLIENT;\n    const iv = isClient ? this.clientNonce : this.serverNonce;\n    const writeKey = isClient ? this.clientWriteKey : this.serverWriteKey;\n    if (!iv || !writeKey) throw new Error();\n\n    iv.writeUInt16BE(header.epoch, this.nonceImplicitLength);\n    iv.writeUIntBE(header.sequenceNumber, this.nonceImplicitLength + 2, 6);\n\n    const explicitNonce = iv.slice(this.nonceImplicitLength);\n\n    const additionalData = {\n      epoch: header.epoch,\n      sequence: header.sequenceNumber,\n      type: header.type,\n      version: header.version,\n      length: data.length,\n    };\n\n    const additionalBuffer = encode(additionalData, AEADAdditionalData).slice();\n\n    const cipher = crypto.createCipheriv(\n      this.blockAlgorithm as crypto.CipherCCMTypes,\n      writeKey,\n      iv,\n      {\n        authTagLength: this.authTagLength,\n      }\n    );\n\n    cipher.setAAD(additionalBuffer, {\n      plaintextLength: data.length,\n    });\n\n    const headPart = cipher.update(data);\n    const finalPart = cipher.final();\n    const authTag = cipher.getAuthTag();\n\n    return Buffer.concat([explicitNonce, headPart, finalPart, authTag]);\n  }\n\n  /**\n   * Decrypt message.\n   */\n  decrypt(type: SessionTypes, data: Buffer, header: CipherHeader) {\n    const isClient = type === SessionType.CLIENT;\n    const iv = isClient ? this.serverNonce : this.clientNonce;\n    const writeKey = isClient ? this.serverWriteKey : this.clientWriteKey;\n    if (!iv || !writeKey) throw new Error();\n\n    const final = createDecode(data);\n\n    const explicitNonce = final.readBuffer(this.nonceExplicitLength);\n    explicitNonce.copy(iv, this.nonceImplicitLength);\n\n    const encrypted = final.readBuffer(final.length - this.authTagLength);\n    const authTag = final.readBuffer(this.authTagLength);\n\n    const additionalData = {\n      epoch: header.epoch,\n      sequence: header.sequenceNumber,\n      type: header.type,\n      version: header.version,\n      length: encrypted.length,\n    };\n\n    const additionalBuffer = encode(additionalData, AEADAdditionalData).slice();\n\n    const decipher = crypto.createDecipheriv(\n      this.blockAlgorithm as crypto.CipherCCMTypes,\n      writeKey,\n      iv,\n      {\n        authTagLength: this.authTagLength,\n      }\n    );\n\n    decipher.setAuthTag(authTag);\n    decipher.setAAD(additionalBuffer, {\n      plaintextLength: encrypted.length,\n    });\n\n    const headPart = decipher.update(encrypted);\n    try {\n      const finalPart = decipher.final();\n      return finalPart.length > 0\n        ? Buffer.concat([headPart, finalPart])\n        : headPart;\n    } catch (error) {\n      err(\n        \"decrypt failed\",\n        error,\n        type,\n        dumpBuffer(data),\n        header,\n        this.summary\n      );\n      throw error;\n    }\n  }\n}\n","import debug from \"debug\";\n\nimport { SessionType } from \"./cipher/suites/abstract\";\nimport { Flight1 } from \"./flight/client/flight1\";\nimport { Flight3 } from \"./flight/client/flight3\";\nimport { Flight5 } from \"./flight/client/flight5\";\nimport { HandshakeType } from \"./handshake/const\";\nimport { ServerHelloVerifyRequest } from \"./handshake/message/server/helloVerifyRequest\";\nimport { FragmentedHandshake } from \"./record/message/fragment\";\nimport { DtlsSocket, Options } from \"./socket\";\n\nconst log = debug(\"werift-dtls : packages/dtls/src/client.ts : log\");\n\nexport class DtlsClient extends DtlsSocket {\n  constructor(options: Options) {\n    super(options, SessionType.CLIENT);\n    this.onHandleHandshakes = this.handleHandshakes;\n    log(this.dtls.sessionId, \"start client\");\n  }\n\n  async connect() {\n    await new Flight1(this.transport, this.dtls, this.cipher).exec(\n      this.extensions\n    );\n  }\n\n  private flight5?: Flight5;\n  private handleHandshakes = async (assembled: FragmentedHandshake[]) => {\n    log(\n      this.dtls.sessionId,\n      \"handleHandshakes\",\n      assembled.map((a) => a.msg_type)\n    );\n\n    for (const handshake of assembled) {\n      switch (handshake.msg_type) {\n        // flight2\n        case HandshakeType.hello_verify_request_3:\n          {\n            const verifyReq = ServerHelloVerifyRequest.deSerialize(\n              handshake.fragment\n            );\n            await new Flight3(this.transport, this.dtls).exec(verifyReq);\n          }\n          break;\n        // flight 4\n        case HandshakeType.server_hello_2:\n          {\n            if (this.connected) return;\n            this.flight5 = new Flight5(\n              this.transport,\n              this.dtls,\n              this.cipher,\n              this.srtp\n            );\n            this.flight5.handleHandshake(handshake);\n          }\n          break;\n        case HandshakeType.certificate_11:\n        case HandshakeType.server_key_exchange_12:\n        case HandshakeType.certificate_request_13:\n          {\n            await this.waitForReady(() => !!this.flight5);\n            this.flight5?.handleHandshake(handshake);\n          }\n          break;\n        case HandshakeType.server_hello_done_14:\n          {\n            await this.waitForReady(() => !!this.flight5);\n            this.flight5?.handleHandshake(handshake);\n\n            const targets = [\n              11,\n              12,\n              this.options.certificateRequest && 13,\n            ].filter((n): n is number => typeof n === \"number\");\n            await this.waitForReady(() =>\n              this.dtls.checkHandshakesExist(targets)\n            );\n            await this.flight5?.exec();\n          }\n          break;\n        // flight 6\n        case HandshakeType.finished_20:\n          {\n            this.dtls.flight = 7;\n            this.connected = true;\n            this.onConnect.execute();\n            log(this.dtls.sessionId, \"dtls connected\");\n          }\n          break;\n      }\n    }\n  };\n}\n","import { Certificate, PrivateKey } from \"@fidm/x509\";\nimport { Crypto } from \"@peculiar/webcrypto\";\nimport * as x509 from \"@peculiar/x509\";\nimport { decode, encode, types } from \"binary-data\";\nimport nodeCrypto, { createSign } from \"crypto\";\nimport addYears from \"date-fns/addYears\";\n\nimport {\n  CipherSuites,\n  CurveType,\n  HashAlgorithm,\n  NamedCurveAlgorithm,\n  NamedCurveAlgorithms,\n  SignatureAlgorithm,\n  SignatureHash,\n} from \"../cipher/const\";\nimport { NamedCurveKeyPair } from \"../cipher/namedCurve\";\nimport { prfVerifyDataClient, prfVerifyDataServer } from \"../cipher/prf\";\nimport { SessionType, SessionTypes } from \"../cipher/suites/abstract\";\nimport AEADCipher from \"../cipher/suites/aead\";\nimport { ProtocolVersion } from \"../handshake/binary\";\nimport { DtlsRandom } from \"../handshake/random\";\nimport { DtlsPlaintext } from \"../record/message/plaintext\";\n\nconst crypto = new Crypto();\nx509.cryptoProvider.set(crypto as any);\n\nexport class CipherContext {\n  localRandom!: DtlsRandom;\n  remoteRandom!: DtlsRandom;\n  cipherSuite!: CipherSuites;\n  remoteCertificate?: Buffer;\n  remoteKeyPair!: Partial<NamedCurveKeyPair>;\n  localKeyPair!: NamedCurveKeyPair;\n  masterSecret!: Buffer;\n  cipher!: AEADCipher;\n  namedCurve!: NamedCurveAlgorithms;\n  signatureHashAlgorithm?: SignatureHash;\n  localCert!: Buffer;\n  localPrivateKey!: PrivateKey;\n\n  constructor(\n    public sessionType: SessionTypes,\n    public certPem?: string,\n    public keyPem?: string,\n    signatureHashAlgorithm?: SignatureHash\n  ) {\n    if (certPem && keyPem && signatureHashAlgorithm) {\n      this.parseX509(certPem, keyPem, signatureHashAlgorithm);\n    }\n  }\n\n  /**\n   *\n   * @param signatureHash\n   * @param namedCurveAlgorithm necessary when use ecdsa\n   */\n  static createSelfSignedCertificateWithKey = async (\n    signatureHash: SignatureHash,\n    namedCurveAlgorithm?: NamedCurveAlgorithms\n  ) => {\n    const signatureAlgorithmName = (() => {\n      switch (signatureHash.signature) {\n        case SignatureAlgorithm.rsa_1:\n          return \"RSASSA-PKCS1-v1_5\";\n        case SignatureAlgorithm.ecdsa_3:\n          return \"ECDSA\";\n      }\n    })();\n    const hash = (() => {\n      switch (signatureHash.hash) {\n        case HashAlgorithm.sha256_4:\n          return \"SHA-256\";\n      }\n    })();\n    const namedCurve = (() => {\n      switch (namedCurveAlgorithm) {\n        case NamedCurveAlgorithm.secp256r1_23:\n          return \"P-256\";\n        case NamedCurveAlgorithm.x25519_29:\n          // todo fix (X25519 not supported with ECDSA)\n          if (signatureAlgorithmName === \"ECDSA\") {\n            return \"P-256\";\n          }\n          return \"X25519\";\n        default: {\n          if (signatureAlgorithmName === \"ECDSA\") return \"P-256\";\n          if (signatureAlgorithmName === \"RSASSA-PKCS1-v1_5\") return \"X25519\";\n        }\n      }\n    })();\n    const alg = (() => {\n      switch (signatureAlgorithmName) {\n        case \"ECDSA\":\n          return { name: signatureAlgorithmName, hash, namedCurve };\n        case \"RSASSA-PKCS1-v1_5\":\n          return {\n            name: signatureAlgorithmName,\n            hash,\n            publicExponent: new Uint8Array([1, 0, 1]),\n            modulusLength: 2048,\n          };\n      }\n    })();\n\n    const keys = await crypto.subtle.generateKey(alg, true, [\"sign\", \"verify\"]);\n\n    const cert = await x509.X509CertificateGenerator.createSelfSigned({\n      serialNumber: nodeCrypto.randomBytes(8).toString(\"hex\"),\n      name: \"C=AU, ST=Some-State, O=Internet Widgits Pty Ltd\",\n      notBefore: new Date(),\n      notAfter: addYears(Date.now(), 10),\n      signingAlgorithm: alg,\n      keys,\n    });\n\n    const certPem = cert.toString(\"pem\");\n    const keyPem = x509.PemConverter.encode(\n      await crypto.subtle.exportKey(\"pkcs8\", keys.privateKey as any),\n      \"private key\"\n    );\n\n    return { certPem, keyPem, signatureHash };\n  };\n\n  encryptPacket(pkt: DtlsPlaintext) {\n    const header = pkt.recordLayerHeader;\n    const enc = this.cipher.encrypt(this.sessionType, pkt.fragment, {\n      type: header.contentType,\n      version: decode(\n        Buffer.from(encode(header.protocolVersion, ProtocolVersion).slice()),\n        { version: types.uint16be }\n      ).version,\n      epoch: header.epoch,\n      sequenceNumber: header.sequenceNumber,\n    });\n    pkt.fragment = enc;\n    pkt.recordLayerHeader.contentLen = enc.length;\n    return pkt;\n  }\n\n  decryptPacket(pkt: DtlsPlaintext) {\n    const header = pkt.recordLayerHeader;\n    const dec = this.cipher.decrypt(this.sessionType, pkt.fragment, {\n      type: header.contentType,\n      version: decode(\n        Buffer.from(encode(header.protocolVersion, ProtocolVersion).slice()),\n        { version: types.uint16be }\n      ).version,\n      epoch: header.epoch,\n      sequenceNumber: header.sequenceNumber,\n    });\n    return dec;\n  }\n\n  verifyData(buf: Buffer) {\n    if (this.sessionType === SessionType.CLIENT)\n      return prfVerifyDataClient(this.masterSecret, buf);\n    else return prfVerifyDataServer(this.masterSecret, buf);\n  }\n\n  signatureData(data: Buffer, hash: string) {\n    const signature = createSign(hash).update(data);\n    const key = this.localPrivateKey.toPEM().toString();\n    const signed = signature.sign(key);\n    return signed;\n  }\n\n  generateKeySignature(hashAlgorithm: string) {\n    const clientRandom =\n      this.sessionType === SessionType.CLIENT\n        ? this.localRandom\n        : this.remoteRandom;\n    const serverRandom =\n      this.sessionType === SessionType.SERVER\n        ? this.localRandom\n        : this.remoteRandom;\n\n    const sig = this.valueKeySignature(\n      clientRandom.serialize(),\n      serverRandom.serialize(),\n      this.localKeyPair.publicKey,\n      this.namedCurve\n    );\n\n    const enc = this.localPrivateKey.sign(sig, hashAlgorithm);\n    return enc;\n  }\n\n  parseX509(certPem: string, keyPem: string, signatureHash: SignatureHash) {\n    const cert = Certificate.fromPEM(Buffer.from(certPem));\n    const sec = PrivateKey.fromPEM(Buffer.from(keyPem));\n    this.localCert = cert.raw;\n    this.localPrivateKey = sec;\n    this.signatureHashAlgorithm = signatureHash;\n  }\n\n  private valueKeySignature(\n    clientRandom: Buffer,\n    serverRandom: Buffer,\n    publicKey: Buffer,\n    namedCurve: number\n  ) {\n    const serverParams = Buffer.from(\n      encode(\n        {\n          type: CurveType.named_curve_3,\n          curve: namedCurve,\n          len: publicKey.length,\n        },\n        { type: types.uint8, curve: types.uint16be, len: types.uint8 }\n      ).slice()\n    );\n    return Buffer.concat([clientRandom, serverRandom, serverParams, publicKey]);\n  }\n}\n","import { debug } from \"debug\";\n\nimport { HashAlgorithms, SignatureAlgorithms } from \"../cipher/const\";\nimport { SessionTypes } from \"../cipher/suites/abstract\";\nimport { FragmentedHandshake } from \"../record/message/fragment\";\nimport { Options } from \"../socket\";\nimport { Handshake } from \"../typings/domain\";\n\nconst log = debug(\"werift-dtls : packages/dtls/src/context/dtls.ts : log\");\n\nexport class DtlsContext {\n  version = { major: 255 - 1, minor: 255 - 2 };\n\n  lastFlight: Handshake[] = [];\n  lastMessage: Buffer[] = [];\n  recordSequenceNumber = 0;\n  sequenceNumber = 0;\n  epoch = 0;\n  flight = 0;\n  handshakeCache: {\n    [flight: number]: {\n      isLocal: boolean;\n      data: FragmentedHandshake[];\n      flight: number;\n    };\n  } = {};\n  cookie?: Buffer;\n  requestedCertificateTypes: number[] = [];\n  requestedSignatureAlgorithms: {\n    hash: HashAlgorithms;\n    signature: SignatureAlgorithms;\n  }[] = [];\n  remoteExtendedMasterSecret = false;\n\n  constructor(public options: Options, public sessionType: SessionTypes) {}\n\n  get sessionId() {\n    return this.cookie ? this.cookie.toString(\"hex\").slice(0, 10) : \"\";\n  }\n\n  get sortedHandshakeCache() {\n    return Object.entries(this.handshakeCache)\n      .sort(([a], [b]) => Number(a) - Number(b))\n      .map(([, { data }]) => data.sort((a, b) => a.message_seq - b.message_seq))\n      .flatMap((v) => v);\n  }\n\n  checkHandshakesExist = (handshakes: number[]) =>\n    !handshakes.find(\n      (type) =>\n        this.sortedHandshakeCache.find((h) => h.msg_type === type) == undefined\n    );\n\n  bufferHandshakeCache(\n    handshakes: FragmentedHandshake[],\n    isLocal: boolean,\n    flight: number\n  ) {\n    if (!this.handshakeCache[flight]) {\n      this.handshakeCache[flight] = { data: [], isLocal, flight };\n    }\n\n    const filtered = handshakes.filter((h) => {\n      const exist = this.handshakeCache[flight].data.find(\n        (t) => t.msg_type === h.msg_type\n      );\n      if (exist) {\n        log(this.sessionId, \"exist\", exist.summary, isLocal, flight);\n        return false;\n      }\n      return true;\n    });\n\n    this.handshakeCache[flight].data = [\n      ...this.handshakeCache[flight].data,\n      ...filtered,\n    ];\n  }\n}\n","export class SrtpContext {\n  srtpProfile?: Profile;\n\n  static findMatchingSRTPProfile(remote: Profile[], local: Profile[]) {\n    for (const v of local) {\n      if (remote.includes(v)) return v;\n    }\n  }\n}\n\nexport const ProtectionProfileAes128CmHmacSha1_80 = 0x0001 as const;\nexport const ProtectionProfileAeadAes128Gcm = 0x0007 as const;\n\nexport const Profiles = [\n  ProtectionProfileAes128CmHmacSha1_80,\n  ProtectionProfileAeadAes128Gcm,\n] as const;\n\nexport type Profile = typeof Profiles[number];\n","import { Transport } from \"../transport\";\n\nexport class TransportContext {\n  constructor(public socket: Transport) {}\n\n  readonly send = (buf: Buffer) => {\n    return this.socket.send(buf);\n  };\n}\n","import { CipherSuiteList } from \"../../cipher/const\";\nimport { CipherContext } from \"../../context/cipher\";\nimport { DtlsContext } from \"../../context/dtls\";\nimport { TransportContext } from \"../../context/transport\";\nimport { ClientHello } from \"../../handshake/message/client/hello\";\nimport { DtlsRandom } from \"../../handshake/random\";\nimport { Extension } from \"../../typings/domain\";\nimport { Flight } from \"../flight\";\n\nexport class Flight1 extends Flight {\n  constructor(\n    udp: TransportContext,\n    dtls: DtlsContext,\n    private cipher: CipherContext\n  ) {\n    super(udp, dtls, 1, 3);\n  }\n\n  async exec(extensions: Extension[]) {\n    if (this.dtls.flight === 1) throw new Error();\n    this.dtls.flight = 1;\n\n    const hello = new ClientHello(\n      { major: 255 - 1, minor: 255 - 2 },\n      new DtlsRandom(),\n      Buffer.from([]),\n      Buffer.from([]),\n      CipherSuiteList,\n      [0], // don't compress\n      extensions\n    );\n    this.dtls.version = hello.clientVersion;\n    this.cipher.localRandom = DtlsRandom.from(hello.random);\n\n    const packets = this.createPacket([hello]);\n    const buf = Buffer.concat(packets.map((v) => v.serialize()));\n    await this.transmit([buf]);\n  }\n}\n","import { DtlsContext } from \"../../context/dtls\";\nimport { TransportContext } from \"../../context/transport\";\nimport { ClientHello } from \"../../handshake/message/client/hello\";\nimport { ServerHelloVerifyRequest } from \"../../handshake/message/server/helloVerifyRequest\";\nimport { Flight } from \"../flight\";\n\nexport class Flight3 extends Flight {\n  constructor(udp: TransportContext, dtls: DtlsContext) {\n    super(udp, dtls, 3, 5);\n  }\n\n  async exec(verifyReq: ServerHelloVerifyRequest) {\n    if (this.dtls.flight === 3) throw new Error();\n    this.dtls.flight = 3;\n\n    this.dtls.handshakeCache = [];\n\n    const [clientHello] = this.dtls.lastFlight as [ClientHello];\n    clientHello.cookie = verifyReq.cookie;\n    this.dtls.cookie = verifyReq.cookie;\n\n    const packets = this.createPacket([clientHello]);\n\n    const buf = Buffer.concat(packets.map((v) => v.serialize()));\n    await this.transmit([buf]);\n  }\n}\n","import debug from \"debug\";\n\nimport { SignatureAlgorithm, SignatureScheme } from \"../../cipher/const\";\nimport { createCipher } from \"../../cipher/create\";\nimport { generateKeyPair } from \"../../cipher/namedCurve\";\nimport {\n  prfExtendedMasterSecret,\n  prfMasterSecret,\n  prfPreMasterSecret,\n} from \"../../cipher/prf\";\nimport { CipherContext } from \"../../context/cipher\";\nimport { DtlsContext } from \"../../context/dtls\";\nimport { Profile, SrtpContext } from \"../../context/srtp\";\nimport { TransportContext } from \"../../context/transport\";\nimport { HandshakeType } from \"../../handshake/const\";\nimport { ExtendedMasterSecret } from \"../../handshake/extensions/extendedMasterSecret\";\nimport { RenegotiationIndication } from \"../../handshake/extensions/renegotiationIndication\";\nimport { UseSRTP } from \"../../handshake/extensions/useSrtp\";\nimport { Certificate } from \"../../handshake/message/certificate\";\nimport { ChangeCipherSpec } from \"../../handshake/message/changeCipherSpec\";\nimport { CertificateVerify } from \"../../handshake/message/client/certificateVerify\";\nimport { ClientKeyExchange } from \"../../handshake/message/client/keyExchange\";\nimport { Finished } from \"../../handshake/message/finished\";\nimport { ServerCertificateRequest } from \"../../handshake/message/server/certificateRequest\";\nimport { ServerHello } from \"../../handshake/message/server/hello\";\nimport { ServerHelloDone } from \"../../handshake/message/server/helloDone\";\nimport { ServerKeyExchange } from \"../../handshake/message/server/keyExchange\";\nimport { DtlsRandom } from \"../../handshake/random\";\nimport { dumpBuffer } from \"../../helper\";\nimport { createPlaintext } from \"../../record/builder\";\nimport { ContentType } from \"../../record/const\";\nimport { FragmentedHandshake } from \"../../record/message/fragment\";\nimport { Flight } from \"../flight\";\n\nconst log = debug(\n  \"werift-dtls : packages/dtls/src/flight/client/flight5.ts : log\"\n);\n\nexport class Flight5 extends Flight {\n  constructor(\n    udp: TransportContext,\n    dtls: DtlsContext,\n    private cipher: CipherContext,\n    private srtp: SrtpContext\n  ) {\n    super(udp, dtls, 5, 7);\n  }\n\n  handleHandshake(handshake: FragmentedHandshake) {\n    this.dtls.bufferHandshakeCache([handshake], false, 4);\n    const message = (() => {\n      switch (handshake.msg_type) {\n        case HandshakeType.server_hello_2:\n          return ServerHello.deSerialize(handshake.fragment);\n        case HandshakeType.certificate_11:\n          return Certificate.deSerialize(handshake.fragment);\n        case HandshakeType.server_key_exchange_12:\n          return ServerKeyExchange.deSerialize(handshake.fragment);\n        case HandshakeType.certificate_request_13:\n          return ServerCertificateRequest.deSerialize(handshake.fragment);\n        case HandshakeType.server_hello_done_14:\n          return ServerHelloDone.deSerialize(handshake.fragment);\n      }\n    })();\n\n    if (message) {\n      handlers[message.msgType]({\n        dtls: this.dtls,\n        cipher: this.cipher,\n        srtp: this.srtp,\n      })(message);\n    }\n  }\n\n  async exec() {\n    if (this.dtls.flight === 5) {\n      log(this.dtls.sessionId, \"flight5 twice\");\n      this.send(this.dtls.lastMessage);\n      return;\n    }\n    this.dtls.flight = 5;\n\n    const needCertificate = this.dtls.requestedCertificateTypes.length > 0;\n    log(this.dtls.sessionId, \"send flight5\", needCertificate);\n\n    const messages = [\n      needCertificate && this.sendCertificate(),\n      this.sendClientKeyExchange(),\n      needCertificate && this.sendCertificateVerify(),\n      this.sendChangeCipherSpec(),\n      this.sendFinished(),\n    ].filter((v) => v) as Buffer[];\n\n    this.dtls.lastMessage = messages;\n    await this.transmit(messages);\n  }\n\n  private sendCertificate() {\n    const certificate = new Certificate([Buffer.from(this.cipher.localCert)]);\n\n    const packets = this.createPacket([certificate]);\n\n    const buf = Buffer.concat(packets.map((v) => v.serialize()));\n    return buf;\n  }\n\n  private sendClientKeyExchange() {\n    if (!this.cipher.localKeyPair) throw new Error();\n\n    const clientKeyExchange = new ClientKeyExchange(\n      this.cipher.localKeyPair.publicKey\n    );\n    const packets = this.createPacket([clientKeyExchange]);\n    const buf = Buffer.concat(packets.map((v) => v.serialize()));\n\n    const localKeyPair = this.cipher.localKeyPair;\n    const remoteKeyPair = this.cipher.remoteKeyPair;\n\n    if (!remoteKeyPair.publicKey) throw new Error(\"not exist\");\n\n    const preMasterSecret = prfPreMasterSecret(\n      remoteKeyPair.publicKey,\n      localKeyPair.privateKey,\n      localKeyPair.curve\n    );\n\n    log(\n      this.dtls.sessionId,\n      \"extendedMasterSecret\",\n      this.dtls.options.extendedMasterSecret,\n      this.dtls.remoteExtendedMasterSecret\n    );\n\n    const handshakes = Buffer.concat(\n      this.dtls.sortedHandshakeCache.map((v) => v.serialize())\n    );\n    this.cipher.masterSecret =\n      this.dtls.options.extendedMasterSecret &&\n      this.dtls.remoteExtendedMasterSecret\n        ? prfExtendedMasterSecret(preMasterSecret, handshakes)\n        : prfMasterSecret(\n            preMasterSecret,\n            this.cipher.localRandom.serialize(),\n            this.cipher.remoteRandom.serialize()\n          );\n\n    this.cipher.cipher = createCipher(this.cipher.cipherSuite);\n    this.cipher.cipher.init(\n      this.cipher.masterSecret,\n      this.cipher.remoteRandom.serialize(),\n      this.cipher.localRandom.serialize()\n    );\n    log(this.dtls.sessionId, \"cipher\", this.cipher.cipher.summary);\n\n    return buf;\n  }\n\n  private sendCertificateVerify() {\n    const cache = Buffer.concat(\n      this.dtls.sortedHandshakeCache.map((v) => v.serialize())\n    );\n    const signed = this.cipher.signatureData(cache, \"sha256\");\n    const signatureScheme = (() => {\n      switch (this.cipher.signatureHashAlgorithm?.signature) {\n        case SignatureAlgorithm.ecdsa_3:\n          return SignatureScheme.ecdsa_secp256r1_sha256;\n        case SignatureAlgorithm.rsa_1:\n          return SignatureScheme.rsa_pkcs1_sha256;\n      }\n    })();\n    if (!signatureScheme) throw new Error();\n    log(\n      this.dtls.sessionId,\n      \"signatureScheme\",\n      this.cipher.signatureHashAlgorithm?.signature,\n      signatureScheme\n    );\n\n    const certificateVerify = new CertificateVerify(signatureScheme, signed);\n    const packets = this.createPacket([certificateVerify]);\n    const buf = Buffer.concat(packets.map((v) => v.serialize()));\n    return buf;\n  }\n\n  private sendChangeCipherSpec() {\n    const changeCipherSpec = ChangeCipherSpec.createEmpty().serialize();\n    const packets = createPlaintext(this.dtls)(\n      [{ type: ContentType.changeCipherSpec, fragment: changeCipherSpec }],\n      ++this.dtls.recordSequenceNumber\n    );\n    const buf = Buffer.concat(packets.map((v) => v.serialize()));\n    return buf;\n  }\n\n  private sendFinished() {\n    const cache = Buffer.concat(\n      this.dtls.sortedHandshakeCache.map((v) => v.serialize())\n    );\n    const localVerifyData = this.cipher.verifyData(cache);\n\n    const finish = new Finished(localVerifyData);\n    this.dtls.epoch = 1;\n    const [packet] = this.createPacket([finish]);\n    log(\n      this.dtls.sessionId,\n      \"raw finish packet\",\n      packet.summary,\n      this.dtls.sortedHandshakeCache.map((h) => h.summary)\n    );\n\n    this.dtls.recordSequenceNumber = 0;\n\n    const buf = this.cipher.encryptPacket(packet).serialize();\n    log(this.dtls.sessionId, \"finished\", this.cipher.cipher.summary);\n    return buf;\n  }\n}\n\nconst handlers: {\n  [key: number]: (contexts: {\n    dtls: DtlsContext;\n    cipher: CipherContext;\n    srtp: SrtpContext;\n  }) => (message: any) => void;\n} = {};\n\nhandlers[HandshakeType.server_hello_2] =\n  ({ cipher, srtp, dtls }) =>\n  (message: ServerHello) => {\n    log(dtls.sessionId, \"serverHello\", message.cipherSuite);\n    cipher.remoteRandom = DtlsRandom.from(message.random);\n    cipher.cipherSuite = message.cipherSuite;\n    log(dtls.sessionId, \"selected cipherSuite\", cipher.cipherSuite);\n\n    if (message.extensions) {\n      message.extensions.forEach((extension) => {\n        switch (extension.type) {\n          case UseSRTP.type:\n            const useSrtp = UseSRTP.fromData(extension.data);\n            const profile = SrtpContext.findMatchingSRTPProfile(\n              useSrtp.profiles as Profile[],\n              dtls.options.srtpProfiles || []\n            );\n            log(dtls.sessionId, \"selected srtp profile\", profile);\n            if (profile == undefined) return;\n            srtp.srtpProfile = profile;\n            break;\n          case ExtendedMasterSecret.type:\n            dtls.remoteExtendedMasterSecret = true;\n            break;\n          case RenegotiationIndication.type:\n            log(dtls.sessionId, \"RenegotiationIndication\");\n            break;\n        }\n      });\n    }\n  };\n\nhandlers[HandshakeType.certificate_11] =\n  ({ cipher, dtls }) =>\n  (message: Certificate) => {\n    log(dtls.sessionId, \"handshake certificate\", message);\n    cipher.remoteCertificate = message.certificateList[0];\n  };\n\nhandlers[HandshakeType.server_key_exchange_12] =\n  ({ cipher, dtls }) =>\n  (message: ServerKeyExchange) => {\n    if (!cipher.localRandom || !cipher.remoteRandom) throw new Error();\n    log(dtls.sessionId, \"ServerKeyExchange\", message);\n\n    log(dtls.sessionId, \"selected curve\", message.namedCurve);\n    cipher.remoteKeyPair = {\n      curve: message.namedCurve,\n      publicKey: message.publicKey,\n    };\n    cipher.localKeyPair = generateKeyPair(message.namedCurve);\n  };\n\nhandlers[HandshakeType.certificate_request_13] =\n  ({ dtls }) =>\n  (message: ServerCertificateRequest) => {\n    log(dtls.sessionId, \"certificate_request\", message);\n    dtls.requestedCertificateTypes = message.certificateTypes;\n    dtls.requestedSignatureAlgorithms = message.signatures;\n  };\n\nhandlers[HandshakeType.server_hello_done_14] =\n  ({ dtls }) =>\n  (msg) => {\n    log(dtls.sessionId, \"server_hello_done\", msg);\n  };\n","import debug from \"debug\";\nimport { setTimeout } from \"timers/promises\";\n\nimport { DtlsContext } from \"../context/dtls\";\nimport { TransportContext } from \"../context/transport\";\nimport { createFragments, createPlaintext } from \"../record/builder\";\nimport { ContentType } from \"../record/const\";\nimport { Handshake } from \"../typings/domain\";\n\nconst warn = debug(\"werift-dtls : packages/dtls/src/flight/flight.ts : warn\");\nconst err = debug(\"werift-dtls : packages/dtls/src/flight/flight.ts : err\");\n\nconst flightTypes = [\"PREPARING\", \"SENDING\", \"WAITING\", \"FINISHED\"] as const;\n\ntype FlightType = typeof flightTypes[number];\n\nexport abstract class Flight {\n  state: FlightType = \"PREPARING\";\n  static RetransmitCount = 10;\n\n  constructor(\n    private transport: TransportContext,\n    public dtls: DtlsContext,\n    private flight: number,\n    private nextFlight?: number\n  ) {}\n\n  protected createPacket(handshakes: Handshake[]) {\n    const fragments = createFragments(this.dtls)(handshakes);\n    this.dtls.bufferHandshakeCache(fragments, true, this.flight);\n    const packets = createPlaintext(this.dtls)(\n      fragments.map((fragment) => ({\n        type: ContentType.handshake,\n        fragment: fragment.serialize(),\n      })),\n      ++this.dtls.recordSequenceNumber\n    );\n    return packets;\n  }\n\n  protected async transmit(buffers: Buffer[]) {\n    let retransmitCount = 0;\n    for (; retransmitCount <= Flight.RetransmitCount; retransmitCount++) {\n      this.setState(\"SENDING\");\n      this.send(buffers).catch((e) => {\n        err(\"fail to send\", err);\n      });\n      this.setState(\"WAITING\");\n\n      if (this.nextFlight === undefined) {\n        this.setState(\"FINISHED\");\n        break;\n      }\n\n      await setTimeout(1000 * ((retransmitCount + 1) / 2));\n\n      if (this.dtls.flight >= this.nextFlight) {\n        this.setState(\"FINISHED\");\n        break;\n      } else {\n        warn(\n          this.dtls.sessionId,\n          \"retransmit\",\n          retransmitCount,\n          this.dtls.flight\n        );\n      }\n    }\n\n    if (retransmitCount > Flight.RetransmitCount) {\n      err(this.dtls.sessionId, \"retransmit failed\", retransmitCount);\n      throw new Error(\n        `over retransmitCount : ${this.flight} ${this.nextFlight}`\n      );\n    }\n  }\n\n  protected send = (buf: Buffer[]) =>\n    Promise.all(buf.map((v) => this.transport.send(v)));\n\n  private setState(state: FlightType) {\n    this.state = state;\n  }\n}\n","import { randomBytes } from \"crypto\";\nimport debug from \"debug\";\n\nimport {\n  CipherSuite,\n  NamedCurveAlgorithmList,\n  NamedCurveAlgorithms,\n  SignatureAlgorithm,\n} from \"../../cipher/const\";\nimport { generateKeyPair } from \"../../cipher/namedCurve\";\nimport { CipherContext } from \"../../context/cipher\";\nimport { DtlsContext } from \"../../context/dtls\";\nimport { Profile, SrtpContext } from \"../../context/srtp\";\nimport { TransportContext } from \"../../context/transport\";\nimport { EllipticCurves } from \"../../handshake/extensions/ellipticCurves\";\nimport { ExtendedMasterSecret } from \"../../handshake/extensions/extendedMasterSecret\";\nimport { RenegotiationIndication } from \"../../handshake/extensions/renegotiationIndication\";\nimport { Signature } from \"../../handshake/extensions/signature\";\nimport { UseSRTP } from \"../../handshake/extensions/useSrtp\";\nimport { ClientHello } from \"../../handshake/message/client/hello\";\nimport { ServerHelloVerifyRequest } from \"../../handshake/message/server/helloVerifyRequest\";\nimport { DtlsRandom } from \"../../handshake/random\";\nimport { createFragments, createPlaintext } from \"../../record/builder\";\nimport { ContentType } from \"../../record/const\";\n\nconst log = debug(\"werift-dtls : packages/dtls/flight/server/flight2.ts : log\");\n\n// HelloVerifyRequest do not retransmit\n\nexport const flight2 =\n  (\n    udp: TransportContext,\n    dtls: DtlsContext,\n    cipher: CipherContext,\n    srtp: SrtpContext\n  ) =>\n  (clientHello: ClientHello) => {\n    dtls.flight = 2;\n\n    // if flight 2 restarts due to packet loss, sequence numbers are reused from the top:\n    // https://datatracker.ietf.org/doc/html/rfc6347#section-4.2.2\n    // The first message each side transmits in each handshake always has\n    // message_seq = 0.  Whenever each new message is generated, the\n    // message_seq value is incremented by one.  Note that in the case of a\n    // rehandshake, this implies that the HelloRequest will have message_seq = 0\n    // and the ServerHello will have message_seq = 1.  When a message is\n    // retransmitted, the same message_seq value is used.\n    dtls.recordSequenceNumber = 0;\n    dtls.sequenceNumber = 0;\n\n    clientHello.extensions.forEach((extension) => {\n      switch (extension.type) {\n        case EllipticCurves.type:\n          {\n            const curves = EllipticCurves.fromData(extension.data).data;\n            log(dtls.sessionId, \"curves\", curves);\n            const curve = curves.find((curve) =>\n              NamedCurveAlgorithmList.includes(curve as any)\n            ) as NamedCurveAlgorithms;\n            cipher.namedCurve = curve;\n            log(dtls.sessionId, \"curve selected\", cipher.namedCurve);\n          }\n          break;\n        case Signature.type:\n          {\n            if (!cipher.signatureHashAlgorithm)\n              throw new Error(\"need to set certificate\");\n\n            const signatureHash = Signature.fromData(extension.data).data;\n            log(dtls.sessionId, \"hash,signature\", signatureHash);\n            const signature = signatureHash.find(\n              (v) => v.signature === cipher.signatureHashAlgorithm?.signature\n            )?.signature;\n            const hash = signatureHash.find(\n              (v) => v.hash === cipher.signatureHashAlgorithm?.hash\n            )?.hash;\n            if (signature == undefined || hash == undefined) {\n              throw new Error(\"invalid signatureHash\");\n            }\n          }\n          break;\n        case UseSRTP.type:\n          {\n            if (!dtls.options?.srtpProfiles) return;\n            if (dtls.options.srtpProfiles.length === 0) return;\n\n            const useSrtp = UseSRTP.fromData(extension.data);\n            log(dtls.sessionId, \"srtp profiles\", useSrtp.profiles);\n            const profile = SrtpContext.findMatchingSRTPProfile(\n              useSrtp.profiles as Profile[],\n              dtls.options?.srtpProfiles\n            );\n            if (!profile) {\n              throw new Error();\n            }\n            srtp.srtpProfile = profile;\n            log(dtls.sessionId, \"srtp profile selected\", srtp.srtpProfile);\n          }\n          break;\n        case ExtendedMasterSecret.type:\n          {\n            dtls.remoteExtendedMasterSecret = true;\n          }\n          break;\n        case RenegotiationIndication.type:\n          {\n            log(dtls.sessionId, \"RenegotiationIndication\", extension.data);\n          }\n          break;\n      }\n    });\n\n    cipher.localRandom = new DtlsRandom();\n    cipher.remoteRandom = DtlsRandom.from(clientHello.random);\n\n    const suites = clientHello.cipherSuites;\n    log(dtls.sessionId, \"cipher suites\", suites);\n    const suite = (() => {\n      switch (cipher.signatureHashAlgorithm?.signature) {\n        case SignatureAlgorithm.ecdsa_3:\n          return CipherSuite.TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256_49195;\n        case SignatureAlgorithm.rsa_1:\n          return CipherSuite.TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256_49199;\n      }\n    })();\n    if (suite === undefined || !suites.includes(suite)) {\n      throw new Error(\"dtls cipher suite negotiation failed\");\n    }\n    cipher.cipherSuite = suite;\n    log(dtls.sessionId, \"selected cipherSuite\", cipher.cipherSuite);\n\n    cipher.localKeyPair = generateKeyPair(cipher.namedCurve);\n\n    dtls.cookie = randomBytes(20);\n    const helloVerifyReq = new ServerHelloVerifyRequest(\n      {\n        major: 255 - 1,\n        minor: 255 - 2,\n      },\n      dtls.cookie\n    );\n    const fragments = createFragments(dtls)([helloVerifyReq]);\n    const packets = createPlaintext(dtls)(\n      fragments.map((fragment) => ({\n        type: ContentType.handshake,\n        fragment: fragment.serialize(),\n      })),\n      ++dtls.recordSequenceNumber\n    );\n\n    const chunk = packets.map((v) => v.serialize());\n    for (const buf of chunk) {\n      udp.send(buf);\n    }\n  };\n","import debug from \"debug\";\n\nimport {\n  CurveType,\n  HashAlgorithm,\n  SignatureAlgorithm,\n} from \"../../cipher/const\";\nimport { CipherContext } from \"../../context/cipher\";\nimport { DtlsContext } from \"../../context/dtls\";\nimport { SrtpContext } from \"../../context/srtp\";\nimport { TransportContext } from \"../../context/transport\";\nimport { ExtendedMasterSecret } from \"../../handshake/extensions/extendedMasterSecret\";\nimport { RenegotiationIndication } from \"../../handshake/extensions/renegotiationIndication\";\nimport { UseSRTP } from \"../../handshake/extensions/useSrtp\";\nimport { Certificate } from \"../../handshake/message/certificate\";\nimport { ServerCertificateRequest } from \"../../handshake/message/server/certificateRequest\";\nimport { ServerHello } from \"../../handshake/message/server/hello\";\nimport { ServerHelloDone } from \"../../handshake/message/server/helloDone\";\nimport { ServerKeyExchange } from \"../../handshake/message/server/keyExchange\";\nimport { FragmentedHandshake } from \"../../record/message/fragment\";\nimport { Extension } from \"../../typings/domain\";\nimport { Flight } from \"../flight\";\n\nconst log = debug(\"werift-dtls : packages/dtls/flight/server/flight4.ts : log\");\n\nexport class Flight4 extends Flight {\n  constructor(\n    udp: TransportContext,\n    dtls: DtlsContext,\n    private cipher: CipherContext,\n    private srtp: SrtpContext\n  ) {\n    super(udp, dtls, 4, 6);\n  }\n\n  async exec(\n    clientHello: FragmentedHandshake,\n    certificateRequest: boolean = false\n  ) {\n    if (this.dtls.flight === 4) {\n      log(this.dtls.sessionId, \"flight4 twice\");\n      this.send(this.dtls.lastMessage);\n      return;\n    }\n    this.dtls.flight = 4;\n    this.dtls.sequenceNumber = 1;\n    this.dtls.bufferHandshakeCache([clientHello], false, 4);\n\n    const messages = [\n      this.sendServerHello(),\n      this.sendCertificate(),\n      this.sendServerKeyExchange(),\n      certificateRequest && this.sendCertificateRequest(),\n      this.sendServerHelloDone(),\n    ].filter((v) => v) as Buffer[];\n\n    this.dtls.lastMessage = messages;\n    await this.transmit(messages);\n  }\n\n  private sendServerHello() {\n    // todo fix; should use socket.extensions\n    const extensions: Extension[] = [];\n    if (this.srtp.srtpProfile) {\n      extensions.push(\n        UseSRTP.create([this.srtp.srtpProfile], Buffer.from([0x00])).extension\n      );\n    }\n    if (this.dtls.options.extendedMasterSecret) {\n      extensions.push({\n        type: ExtendedMasterSecret.type,\n        data: Buffer.alloc(0),\n      });\n    }\n    const renegotiationIndication = RenegotiationIndication.createEmpty();\n    extensions.push(renegotiationIndication.extension);\n\n    const serverHello = new ServerHello(\n      this.dtls.version,\n      this.cipher.localRandom,\n      Buffer.from([0x00]),\n      this.cipher.cipherSuite,\n      0, // do not compression\n      extensions\n    );\n    const packets = this.createPacket([serverHello]);\n    return Buffer.concat(packets.map((v) => v.serialize()));\n  }\n\n  // 7.4.2 Server Certificate\n  private sendCertificate() {\n    const certificate = new Certificate([Buffer.from(this.cipher.localCert)]);\n\n    const packets = this.createPacket([certificate]);\n    return Buffer.concat(packets.map((v) => v.serialize()));\n  }\n\n  private sendServerKeyExchange() {\n    const signature = this.cipher.generateKeySignature(\"sha256\");\n    if (!this.cipher.signatureHashAlgorithm) throw new Error(\"not exist\");\n\n    const keyExchange = new ServerKeyExchange(\n      CurveType.named_curve_3,\n      this.cipher.namedCurve,\n      this.cipher.localKeyPair.publicKey.length,\n      this.cipher.localKeyPair.publicKey,\n      this.cipher.signatureHashAlgorithm.hash,\n      this.cipher.signatureHashAlgorithm.signature,\n      signature.length,\n      signature\n    );\n\n    const packets = this.createPacket([keyExchange]);\n    return Buffer.concat(packets.map((v) => v.serialize()));\n  }\n\n  // 7.4.4.  Certificate Request\n  private sendCertificateRequest() {\n    const handshake = new ServerCertificateRequest(\n      [\n        1, // clientCertificateTypeRSASign\n        64, // clientCertificateTypeECDSASign\n      ],\n      [\n        { hash: HashAlgorithm.sha256_4, signature: SignatureAlgorithm.rsa_1 },\n        { hash: HashAlgorithm.sha256_4, signature: SignatureAlgorithm.ecdsa_3 },\n      ],\n      []\n    );\n    log(this.dtls.sessionId, \"sendCertificateRequest\", handshake);\n    const packets = this.createPacket([handshake]);\n    return Buffer.concat(packets.map((v) => v.serialize()));\n  }\n\n  private sendServerHelloDone() {\n    const handshake = new ServerHelloDone();\n\n    const packets = this.createPacket([handshake]);\n    return Buffer.concat(packets.map((v) => v.serialize()));\n  }\n}\n","import debug from \"debug\";\n\nimport { createCipher } from \"../../cipher/create\";\nimport {\n  prfExtendedMasterSecret,\n  prfMasterSecret,\n  prfPreMasterSecret,\n} from \"../../cipher/prf\";\nimport { CipherContext } from \"../../context/cipher\";\nimport { DtlsContext } from \"../../context/dtls\";\nimport { TransportContext } from \"../../context/transport\";\nimport { HandshakeType } from \"../../handshake/const\";\nimport { Certificate } from \"../../handshake/message/certificate\";\nimport { ChangeCipherSpec } from \"../../handshake/message/changeCipherSpec\";\nimport { CertificateVerify } from \"../../handshake/message/client/certificateVerify\";\nimport { ClientKeyExchange } from \"../../handshake/message/client/keyExchange\";\nimport { Finished } from \"../../handshake/message/finished\";\nimport { createPlaintext } from \"../../record/builder\";\nimport { ContentType } from \"../../record/const\";\nimport { FragmentedHandshake } from \"../../record/message/fragment\";\nimport { Flight } from \"../flight\";\n\nconst log = debug(\"werift-dtls : packages/dtls/flight/server/flight6.ts\");\n\nexport class Flight6 extends Flight {\n  constructor(\n    udp: TransportContext,\n    dtls: DtlsContext,\n    private cipher: CipherContext\n  ) {\n    super(udp, dtls, 6);\n  }\n\n  handleHandshake(handshake: FragmentedHandshake) {\n    this.dtls.bufferHandshakeCache([handshake], false, 5);\n\n    const message = (() => {\n      switch (handshake.msg_type) {\n        case HandshakeType.certificate_11:\n          return Certificate.deSerialize(handshake.fragment);\n        case HandshakeType.certificate_verify_15:\n          return CertificateVerify.deSerialize(handshake.fragment);\n        case HandshakeType.client_key_exchange_16:\n          return ClientKeyExchange.deSerialize(handshake.fragment);\n        case HandshakeType.finished_20:\n          return Finished.deSerialize(handshake.fragment);\n      }\n    })();\n\n    if (message) {\n      const handler = handlers[message.msgType];\n      if (!handler) {\n        // todo handle certificate_11\n        // todo handle certificate_verify_15\n        return;\n      }\n      handler({ dtls: this.dtls, cipher: this.cipher })(message);\n    }\n  }\n\n  async exec() {\n    if (this.dtls.flight === 6) {\n      log(this.dtls.sessionId, \"flight6 twice\");\n      this.send(this.dtls.lastMessage);\n      return;\n    }\n    this.dtls.flight = 6;\n\n    const messages = [this.sendChangeCipherSpec(), this.sendFinished()];\n    this.dtls.lastMessage = messages;\n    await this.transmit(messages);\n  }\n\n  private sendChangeCipherSpec() {\n    const changeCipherSpec = ChangeCipherSpec.createEmpty().serialize();\n    const packets = createPlaintext(this.dtls)(\n      [{ type: ContentType.changeCipherSpec, fragment: changeCipherSpec }],\n      ++this.dtls.recordSequenceNumber\n    );\n    const buf = Buffer.concat(packets.map((v) => v.serialize()));\n    return buf;\n  }\n\n  private sendFinished() {\n    const cache = Buffer.concat(\n      this.dtls.sortedHandshakeCache.map((v) => v.serialize())\n    );\n\n    const localVerifyData = this.cipher.verifyData(cache);\n    const finish = new Finished(localVerifyData);\n\n    this.dtls.epoch = 1;\n    const [packet] = this.createPacket([finish]);\n    this.dtls.recordSequenceNumber = 0;\n\n    const buf = this.cipher.encryptPacket(packet).serialize();\n    return buf;\n  }\n}\n\nconst handlers: {\n  [key: number]: (contexts: {\n    dtls: DtlsContext;\n    cipher: CipherContext;\n  }) => (message: any) => void;\n} = {};\n\nhandlers[HandshakeType.client_key_exchange_16] =\n  ({ cipher, dtls }) =>\n  (message: ClientKeyExchange) => {\n    cipher.remoteKeyPair = {\n      curve: cipher.namedCurve,\n      publicKey: message.publicKey,\n    };\n    if (\n      !cipher.remoteKeyPair.publicKey ||\n      !cipher.localKeyPair ||\n      !cipher.remoteRandom ||\n      !cipher.localRandom\n    )\n      throw new Error(\"not exist\");\n\n    const preMasterSecret = prfPreMasterSecret(\n      cipher.remoteKeyPair.publicKey,\n      cipher.localKeyPair.privateKey,\n      cipher.localKeyPair.curve\n    );\n\n    log(\n      dtls.sessionId,\n      \"extendedMasterSecret\",\n      dtls.options.extendedMasterSecret,\n      dtls.remoteExtendedMasterSecret\n    );\n\n    const handshakes = Buffer.concat(\n      dtls.sortedHandshakeCache.map((v) => v.serialize())\n    );\n    cipher.masterSecret =\n      dtls.options.extendedMasterSecret && dtls.remoteExtendedMasterSecret\n        ? prfExtendedMasterSecret(preMasterSecret, handshakes)\n        : prfMasterSecret(\n            preMasterSecret,\n            cipher.remoteRandom.serialize(),\n            cipher.localRandom.serialize()\n          );\n\n    cipher.cipher = createCipher(cipher.cipherSuite!);\n    cipher.cipher.init(\n      cipher.masterSecret,\n      cipher.localRandom.serialize(),\n      cipher.remoteRandom.serialize()\n    );\n    log(dtls.sessionId, \"setup cipher\", cipher.cipher.summary);\n  };\n\nhandlers[HandshakeType.finished_20] =\n  ({ dtls }) =>\n  (message: Finished) => {\n    log(dtls.sessionId, \"finished\", message);\n  };\n","import { types } from \"binary-data\";\nconst { uint16be, uint24be, buffer, array, uint8, string } = types;\n\n// export const Random = {\n//   gmt_unix_time: uint32be,\n//   random_bytes: buffer(28),\n// };\n\nconst Extension = {\n  type: uint16be,\n  data: buffer(uint16be),\n};\n\nexport const ExtensionList = array(Extension, uint16be, \"bytes\");\n\nexport const ASN11Cert = buffer(uint24be);\n\nexport const ClientCertificateType = uint8;\nexport const DistinguishedName = string(uint16be);\n\nexport const SignatureHashAlgorithm = { hash: uint8, signature: uint8 };\n\nexport const ProtocolVersion = { major: uint8, minor: uint8 };\n","export enum HandshakeType {\n  hello_request_0 = 0,\n  client_hello_1 = 1,\n  server_hello_2 = 2,\n  hello_verify_request_3 = 3,\n  certificate_11 = 11,\n  server_key_exchange_12 = 12,\n  certificate_request_13 = 13,\n  server_hello_done_14 = 14,\n  certificate_verify_15 = 15,\n  client_key_exchange_16 = 16,\n  finished_20 = 20,\n}\n","import { decode, encode, types } from \"binary-data\";\n\nimport { Extension } from \"../../typings/domain\";\n\n// rfc4492\nexport class EllipticCurves {\n  static type = 10;\n  static readonly spec = {\n    type: types.uint16be,\n    data: types.array(types.uint16be, types.uint16be, \"bytes\"),\n  };\n\n  public type: number = EllipticCurves.type;\n  public data: number[] = [];\n\n  constructor(props: Partial<EllipticCurves> = {}) {\n    Object.assign(this, props);\n  }\n\n  static createEmpty() {\n    return new EllipticCurves();\n  }\n\n  static fromData(buf: Buffer) {\n    return new EllipticCurves({\n      type: EllipticCurves.type,\n      data: decode(buf, EllipticCurves.spec.data),\n    });\n  }\n\n  static deSerialize(buf: Buffer) {\n    return new EllipticCurves(decode(buf, EllipticCurves.spec));\n  }\n\n  serialize() {\n    return Buffer.from(encode(this, EllipticCurves.spec).slice());\n  }\n\n  get extension(): Extension {\n    return {\n      type: this.type,\n      data: this.serialize().slice(2),\n    };\n  }\n}\n","export class ExtendedMasterSecret {\n  static type = 23;\n}\n","import { decode, encode, types } from \"binary-data\";\n\nexport class RenegotiationIndication {\n  static type = 65281;\n  static readonly spec = {\n    type: types.uint16be,\n    data: types.uint8,\n  };\n\n  public type: number = RenegotiationIndication.type;\n  public data: number = 0;\n\n  constructor(props: Partial<RenegotiationIndication> = {}) {\n    Object.assign(this, props);\n  }\n\n  static createEmpty() {\n    const v = new RenegotiationIndication();\n    return v;\n  }\n\n  static deSerialize(buf: Buffer) {\n    return new RenegotiationIndication(\n      decode(buf, RenegotiationIndication.spec)\n    );\n  }\n\n  serialize() {\n    const res = encode(this, RenegotiationIndication.spec).slice();\n    return Buffer.from(res);\n  }\n\n  get extension() {\n    return {\n      type: this.type,\n      data: this.serialize().slice(2),\n    };\n  }\n}\n","import { decode, encode, types } from \"binary-data\";\n\nimport { HashAlgorithms, SignatureAlgorithms } from \"../../cipher/const\";\n\nexport class Signature {\n  static type = 13;\n  static readonly spec = {\n    type: types.uint16be,\n    data: types.array(\n      { hash: types.uint8, signature: types.uint8 },\n      types.uint16be,\n      \"bytes\"\n    ),\n  };\n\n  public type: number = Signature.type;\n  public data: { hash: HashAlgorithms; signature: SignatureAlgorithms }[] = [];\n\n  constructor(props: Partial<Signature> = {}) {\n    Object.assign(this, props);\n  }\n\n  static createEmpty() {\n    const v = new Signature();\n    return v;\n  }\n\n  static deSerialize(buf: Buffer) {\n    return new Signature(decode(buf, Signature.spec));\n  }\n\n  serialize() {\n    const res = encode(this, Signature.spec).slice();\n    return Buffer.from(res);\n  }\n\n  static fromData(buf: Buffer) {\n    const type = Buffer.alloc(2);\n    type.writeUInt16BE(Signature.type);\n    return Signature.deSerialize(Buffer.concat([type, buf]));\n  }\n\n  get extension() {\n    return {\n      type: this.type,\n      data: this.serialize().slice(2),\n    };\n  }\n}\n","import { decode, encode, types } from \"binary-data\";\nimport times from \"lodash/times\";\n\nimport { Extension } from \"../../typings/domain\";\n\nexport class UseSRTP {\n  static type = 14; // 9.  IANA Considerations\n  static readonly spec = {\n    type: types.uint16be,\n    data: types.buffer(types.uint16be),\n  };\n\n  type: number = UseSRTP.type;\n  data: Buffer = Buffer.from([]);\n  profiles: number[] = [];\n  mki: Buffer = Buffer.from([0x00]);\n\n  constructor(props: Partial<UseSRTP> = {}) {\n    Object.assign(this, props);\n  }\n\n  static create(profiles: number[], mki: Buffer) {\n    const v = new UseSRTP({\n      profiles,\n      mki,\n    });\n    return v;\n  }\n\n  static deSerialize(buf: Buffer) {\n    const useSrtp = new UseSRTP(decode(buf, UseSRTP.spec));\n    const profileLength = useSrtp.data.readUInt16BE();\n    const profiles = times(profileLength / 2).map((i) => {\n      return useSrtp.data.readUInt16BE(i * 2 + 2);\n    });\n    useSrtp.profiles = profiles;\n    useSrtp.mki = useSrtp.data.slice(profileLength + 2);\n    return useSrtp;\n  }\n\n  serialize() {\n    const profileLength = Buffer.alloc(2);\n    profileLength.writeUInt16BE(this.profiles.length * 2);\n    const data = Buffer.concat([\n      profileLength,\n      ...this.profiles.map((profile) => {\n        const buf = Buffer.alloc(2);\n        buf.writeUInt16BE(profile);\n        return buf;\n      }),\n      this.mki,\n    ]);\n    this.data = data;\n    const res = encode(this, UseSRTP.spec).slice();\n    return Buffer.from(res);\n  }\n\n  static fromData(buf: Buffer) {\n    const head = Buffer.alloc(4);\n    head.writeUInt16BE(UseSRTP.type);\n    head.writeUInt16BE(buf.length, 2);\n    return UseSRTP.deSerialize(Buffer.concat([head, buf]));\n  }\n\n  get extension(): Extension {\n    return {\n      type: this.type,\n      data: this.serialize().slice(4),\n    };\n  }\n}\n","import { decode, encode, types } from \"binary-data\";\n\nexport class Alert {\n  static readonly spec = {\n    level: types.uint8,\n    description: types.uint8,\n  };\n\n  constructor(public level: number, public description: number) {}\n\n  static deSerialize(buf: Buffer) {\n    return new Alert(\n      //@ts-ignore\n      ...Object.values(decode(buf, Alert.spec))\n    );\n  }\n\n  serialize() {\n    const res = encode(this, Alert.spec).slice();\n    return Buffer.from(res);\n  }\n}\n","import { decode, encode, types } from \"binary-data\";\n\nimport { FragmentedHandshake } from \"../../record/message/fragment\";\nimport { Handshake } from \"../../typings/domain\";\nimport { ASN11Cert } from \"../binary\";\nimport { HandshakeType } from \"../const\";\n\n// 7.4.2.  Server Certificate\n// 7.4.6.  Client Certificate\n\nexport class Certificate implements Handshake {\n  msgType = HandshakeType.certificate_11;\n  messageSeq?: number;\n  static readonly spec = {\n    certificateList: types.array(ASN11Cert, types.uint24be, \"bytes\"),\n  };\n\n  constructor(public certificateList: Buffer[]) {}\n\n  static createEmpty() {\n    return new Certificate(undefined as any);\n  }\n\n  static deSerialize(buf: Buffer) {\n    return new Certificate(\n      //@ts-ignore\n      ...Object.values(decode(buf, Certificate.spec))\n    );\n  }\n\n  serialize() {\n    const res = encode(this, Certificate.spec).slice();\n    return Buffer.from(res);\n  }\n\n  toFragment() {\n    const body = this.serialize();\n    return new FragmentedHandshake(\n      this.msgType,\n      body.length,\n      this.messageSeq!,\n      0,\n      body.length,\n      body\n    );\n  }\n}\n","import { decode, encode, types } from \"binary-data\";\n\n// 7.1.  Change Cipher Spec Protocol\n\nexport class ChangeCipherSpec {\n  static readonly spec = {\n    type: types.uint8,\n  };\n\n  constructor(public type = 1) {}\n\n  static createEmpty() {\n    return new ChangeCipherSpec();\n  }\n\n  static deSerialize(buf: Buffer) {\n    return new ChangeCipherSpec(\n      //@ts-ignore\n      ...Object.values(decode(buf, ChangeCipherSpec.spec))\n    );\n  }\n\n  serialize() {\n    const res = encode(this, ChangeCipherSpec.spec).slice();\n    return Buffer.from(res);\n  }\n}\n","import { decode, encode, types } from \"binary-data\";\n\nimport { SignatureSchemes } from \"../../../cipher/const\";\nimport { FragmentedHandshake } from \"../../../record/message/fragment\";\nimport { Handshake } from \"../../../typings/domain\";\nimport { HandshakeType } from \"../../const\";\n\nexport class CertificateVerify implements Handshake {\n  msgType = HandshakeType.certificate_verify_15;\n  messageSeq?: number;\n\n  static readonly spec = {\n    algorithm: types.uint16be,\n    signature: types.buffer(types.uint16be),\n  };\n\n  constructor(public algorithm: SignatureSchemes, public signature: Buffer) {}\n\n  static createEmpty() {\n    return new CertificateVerify(undefined as any, undefined as any);\n  }\n\n  static deSerialize(buf: Buffer) {\n    const res = decode(buf, CertificateVerify.spec);\n    return new CertificateVerify(\n      //@ts-ignore\n      ...Object.values(res)\n    );\n  }\n\n  serialize() {\n    const res = encode(this, CertificateVerify.spec).slice();\n    return Buffer.from(res);\n  }\n\n  toFragment() {\n    const body = this.serialize();\n    return new FragmentedHandshake(\n      this.msgType,\n      body.length,\n      this.messageSeq!,\n      0,\n      body.length,\n      body\n    );\n  }\n}\n","import { decode, encode, types } from \"binary-data\";\n\nimport { FragmentedHandshake } from \"../../../record/message/fragment\";\nimport { Extension } from \"../../../typings/domain\";\nimport { ExtensionList } from \"../../binary\";\nimport { HandshakeType } from \"../../const\";\nimport { DtlsRandom } from \"../../random\";\n\n// 7.4.1.2.  Client Hello\n\nexport class ClientHello {\n  msgType = HandshakeType.client_hello_1;\n  messageSeq: number = 0;\n  static readonly spec = {\n    clientVersion: { major: types.uint8, minor: types.uint8 },\n    random: DtlsRandom.spec,\n    sessionId: types.buffer(types.uint8),\n    cookie: types.buffer(types.uint8),\n    cipherSuites: types.array(types.uint16be, types.uint16be, \"bytes\"),\n    compressionMethods: types.array(types.uint8, types.uint8, \"bytes\"),\n    extensions: ExtensionList,\n  };\n\n  constructor(\n    public clientVersion: { major: number; minor: number },\n    public random: { gmt_unix_time: number; random_bytes: Buffer },\n    public sessionId: Buffer,\n    public cookie: Buffer,\n    public cipherSuites: number[],\n    public compressionMethods: number[],\n    public extensions: Extension[]\n  ) {}\n\n  static createEmpty() {\n    return new ClientHello(\n      undefined as any,\n      undefined as any,\n      undefined as any,\n      undefined as any,\n      undefined as any,\n      undefined as any,\n      undefined as any\n    );\n  }\n\n  static deSerialize(buf: Buffer) {\n    return new ClientHello(\n      //@ts-ignore\n      ...Object.values(decode(buf, ClientHello.spec))\n    );\n  }\n\n  serialize() {\n    const res = encode(this, ClientHello.spec).slice();\n    return Buffer.from(res);\n  }\n\n  toFragment() {\n    const body = this.serialize();\n    return new FragmentedHandshake(\n      this.msgType,\n      body.length,\n      this.messageSeq,\n      0,\n      body.length,\n      body\n    );\n  }\n}\n","import { decode, encode, types } from \"binary-data\";\n\nimport { FragmentedHandshake } from \"../../../record/message/fragment\";\nimport { Handshake } from \"../../../typings/domain\";\nimport { HandshakeType } from \"../../const\";\n\nexport class ClientKeyExchange implements Handshake {\n  msgType = HandshakeType.client_key_exchange_16;\n  messageSeq?: number;\n\n  static readonly spec = {\n    publicKey: types.buffer(types.uint8),\n  };\n\n  constructor(public publicKey: Buffer) {}\n\n  static createEmpty() {\n    return new ClientKeyExchange(undefined as any);\n  }\n\n  static deSerialize(buf: Buffer) {\n    const res = decode(buf, ClientKeyExchange.spec);\n    return new ClientKeyExchange(\n      //@ts-ignore\n      ...Object.values(res)\n    );\n  }\n\n  serialize() {\n    const res = encode(this, ClientKeyExchange.spec).slice();\n    return Buffer.from(res);\n  }\n\n  toFragment() {\n    const body = this.serialize();\n    return new FragmentedHandshake(\n      this.msgType,\n      body.length,\n      this.messageSeq!,\n      0,\n      body.length,\n      body\n    );\n  }\n}\n","import { FragmentedHandshake } from \"../../record/message/fragment\";\nimport { Handshake } from \"../../typings/domain\";\nimport { HandshakeType } from \"../const\";\n\n// 7.4.9.  Finished\n\nexport class Finished implements Handshake {\n  msgType = HandshakeType.finished_20;\n  messageSeq?: number;\n\n  constructor(public verifyData: Buffer) {}\n\n  static createEmpty() {\n    return new Finished(undefined as any);\n  }\n\n  static deSerialize(buf: Buffer) {\n    return new Finished(buf);\n  }\n\n  serialize() {\n    return this.verifyData;\n  }\n\n  toFragment() {\n    const body = this.serialize();\n    return new FragmentedHandshake(\n      this.msgType,\n      body.length,\n      this.messageSeq!,\n      0,\n      body.length,\n      body\n    );\n  }\n}\n","import { decode, encode, types } from \"binary-data\";\n\nimport { HashAlgorithms, SignatureAlgorithms } from \"../../../cipher/const\";\nimport { FragmentedHandshake } from \"../../../record/message/fragment\";\nimport { Handshake } from \"../../../typings/domain\";\nimport {\n  ClientCertificateType,\n  DistinguishedName,\n  SignatureHashAlgorithm,\n} from \"../../binary\";\nimport { HandshakeType } from \"../../const\";\n\n// 7.4.4.  Certificate Request\n\nexport class ServerCertificateRequest implements Handshake {\n  msgType = HandshakeType.certificate_request_13;\n  messageSeq?: number;\n  static readonly spec = {\n    certificateTypes: types.array(ClientCertificateType, types.uint8, \"bytes\"),\n    signatures: types.array(SignatureHashAlgorithm, types.uint16be, \"bytes\"),\n    authorities: types.array(DistinguishedName, types.uint16be, \"bytes\"),\n  };\n\n  constructor(\n    public certificateTypes: number[],\n    public signatures: {\n      hash: HashAlgorithms;\n      signature: SignatureAlgorithms;\n    }[],\n    public authorities: number[]\n  ) {}\n\n  static createEmpty() {\n    return new ServerCertificateRequest(\n      undefined as any,\n      undefined as any,\n      undefined as any\n    );\n  }\n\n  static deSerialize(buf: Buffer) {\n    return new ServerCertificateRequest(\n      //@ts-ignore\n      ...Object.values(decode(buf, ServerCertificateRequest.spec))\n    );\n  }\n\n  serialize() {\n    const res = encode(this, ServerCertificateRequest.spec).slice();\n    return Buffer.from(res);\n  }\n\n  toFragment() {\n    const body = this.serialize();\n    return new FragmentedHandshake(\n      this.msgType,\n      body.length,\n      this.messageSeq!,\n      0,\n      body.length,\n      body\n    );\n  }\n}\n","import { decode, encode, types } from \"binary-data\";\n\nimport { CipherSuites } from \"../../../cipher/const\";\nimport { FragmentedHandshake } from \"../../../record/message/fragment\";\nimport { Extension, Handshake, Random, Version } from \"../../../typings/domain\";\nimport { ExtensionList, ProtocolVersion } from \"../../binary\";\nimport { HandshakeType } from \"../../const\";\nimport { DtlsRandom } from \"../../random\";\n\n// 7.4.1.3.  Server Hello\n\nexport class ServerHello implements Handshake {\n  msgType = HandshakeType.server_hello_2;\n  messageSeq?: number;\n  static readonly spec = {\n    serverVersion: ProtocolVersion,\n    random: DtlsRandom.spec,\n    sessionId: types.buffer(types.uint8),\n    cipherSuite: types.uint16be,\n    compressionMethod: types.uint8,\n  };\n\n  constructor(\n    public serverVersion: Version,\n    public random: Random,\n    public sessionId: Buffer,\n    public cipherSuite: CipherSuites,\n    public compressionMethod: number,\n    public extensions: Extension[]\n  ) {}\n\n  static createEmpty() {\n    return new ServerHello(\n      undefined as any,\n      undefined as any,\n      undefined as any,\n      undefined as any,\n      undefined as any,\n      undefined as any\n    );\n  }\n\n  static deSerialize(buf: Buffer) {\n    const res = decode(buf, ServerHello.spec);\n    const cls = new ServerHello(\n      //@ts-ignore\n      ...Object.values(res)\n    );\n    const expect = cls.serialize();\n    if (expect.length < buf.length) {\n      return new ServerHello(\n        //@ts-ignore\n        ...Object.values(\n          decode(buf, { ...ServerHello.spec, extensions: ExtensionList })\n        )\n      );\n    }\n    return cls;\n  }\n\n  serialize() {\n    const res =\n      this.extensions === undefined\n        ? encode(this, ServerHello.spec).slice()\n        : encode(this, {\n            ...ServerHello.spec,\n            extensions: ExtensionList,\n          }).slice();\n    return Buffer.from(res);\n  }\n\n  toFragment() {\n    const body = this.serialize();\n    return new FragmentedHandshake(\n      this.msgType,\n      body.length,\n      this.messageSeq!,\n      0,\n      body.length,\n      body\n    );\n  }\n}\n","import { decode, encode } from \"binary-data\";\n\nimport { FragmentedHandshake } from \"../../../record/message/fragment\";\nimport { Handshake } from \"../../../typings/domain\";\nimport { HandshakeType } from \"../../const\";\n\n// 7.4.5.  Server Hello Done\n\nexport class ServerHelloDone implements Handshake {\n  msgType = HandshakeType.server_hello_done_14;\n  messageSeq?: number;\n  static readonly spec = {};\n\n  static createEmpty() {\n    return new ServerHelloDone();\n  }\n\n  static deSerialize(buf: Buffer) {\n    return new ServerHelloDone(\n      //@ts-ignore\n      ...Object.values(decode(buf, ServerHelloDone.spec))\n    );\n  }\n\n  serialize() {\n    const res = encode(this, ServerHelloDone.spec).slice();\n    return Buffer.from(res);\n  }\n\n  toFragment() {\n    const body = this.serialize();\n    return new FragmentedHandshake(\n      this.msgType,\n      body.length,\n      this.messageSeq!,\n      0,\n      body.length,\n      body\n    );\n  }\n}\n","import { decode, encode, types } from \"binary-data\";\n\nimport { FragmentedHandshake } from \"../../../record/message/fragment\";\nimport { Handshake } from \"../../../typings/domain\";\nimport { ProtocolVersion } from \"../../binary\";\nimport { HandshakeType } from \"../../const\";\n\n// 4.2.1.  Denial-of-Service Countermeasures\n\nexport class ServerHelloVerifyRequest implements Handshake {\n  msgType = HandshakeType.hello_verify_request_3;\n  messageSeq?: number;\n  static readonly spec = {\n    serverVersion: ProtocolVersion,\n    cookie: types.buffer(types.uint8),\n  };\n\n  constructor(\n    public serverVersion: { major: number; minor: number },\n    public cookie: Buffer\n  ) {}\n\n  static createEmpty() {\n    return new ServerHelloVerifyRequest(undefined as any, undefined as any);\n  }\n\n  static deSerialize(buf: Buffer) {\n    return new ServerHelloVerifyRequest(\n      //@ts-ignore\n      ...Object.values(decode(buf, ServerHelloVerifyRequest.spec))\n    );\n  }\n\n  serialize() {\n    const res = encode(this, ServerHelloVerifyRequest.spec).slice();\n    return Buffer.from(res);\n  }\n\n  get version() {\n    return {\n      major: 255 - this.serverVersion.major,\n      minor: 255 - this.serverVersion.minor,\n    };\n  }\n\n  toFragment() {\n    const body = this.serialize();\n    return new FragmentedHandshake(\n      this.msgType,\n      body.length,\n      this.messageSeq!,\n      0,\n      body.length,\n      body\n    );\n  }\n}\n","import { decode, types } from \"binary-data\";\n\nimport { CurveTypes, NamedCurveAlgorithms } from \"../../../cipher/const\";\nimport { FragmentedHandshake } from \"../../../record/message/fragment\";\nimport { Handshake } from \"../../../typings/domain\";\nimport { encodeBuffer } from \"../../../util/binary\";\nimport { HandshakeType } from \"../../const\";\n\nexport class ServerKeyExchange implements Handshake {\n  msgType = HandshakeType.server_key_exchange_12;\n  messageSeq?: number;\n\n  static readonly spec = {\n    ellipticCurveType: types.uint8,\n    namedCurve: types.uint16be,\n    publicKeyLength: types.uint8,\n    publicKey: types.buffer((ctx: any) => ctx.current.publicKeyLength),\n    hashAlgorithm: types.uint8,\n    signatureAlgorithm: types.uint8,\n    signatureLength: types.uint16be,\n    signature: types.buffer((ctx: any) => ctx.current.signatureLength),\n  };\n\n  constructor(\n    public ellipticCurveType: CurveTypes,\n    public namedCurve: NamedCurveAlgorithms,\n    public publicKeyLength: number,\n    public publicKey: Buffer,\n    public hashAlgorithm: number,\n    public signatureAlgorithm: number,\n    public signatureLength: number,\n    public signature: Buffer\n  ) {}\n\n  static createEmpty() {\n    return new ServerKeyExchange(\n      undefined as any,\n      undefined as any,\n      undefined as any,\n      undefined as any,\n      undefined as any,\n      undefined as any,\n      undefined as any,\n      undefined as any\n    );\n  }\n\n  static deSerialize(buf: Buffer) {\n    const res = decode(buf, ServerKeyExchange.spec);\n    return new ServerKeyExchange(\n      //@ts-ignore\n      ...Object.values(res)\n    );\n  }\n\n  serialize() {\n    const res = encodeBuffer(this, ServerKeyExchange.spec);\n    return res;\n  }\n\n  toFragment() {\n    const body = this.serialize();\n    return new FragmentedHandshake(\n      this.msgType,\n      body.length,\n      this.messageSeq!,\n      0,\n      body.length,\n      body\n    );\n  }\n}\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\nimport { decode, encode, types } from \"binary-data\";\nimport { randomBytes } from \"crypto\";\n\nexport class DtlsRandom {\n  static readonly spec = {\n    gmt_unix_time: types.uint32be,\n    random_bytes: types.buffer(28),\n  };\n\n  constructor(\n    public gmt_unix_time = Math.floor(Date.now() / 1000),\n    public random_bytes = randomBytes(28)\n  ) {}\n\n  static deSerialize(buf: Buffer) {\n    return new DtlsRandom(\n      //@ts-ignore\n      ...Object.values(decode(buf, DtlsRandom.spec))\n    );\n  }\n\n  static from(spec: typeof DtlsRandom.spec) {\n    //@ts-ignore\n    return new DtlsRandom(...Object.values(spec));\n  }\n\n  serialize() {\n    const res = encode(this, DtlsRandom.spec).slice();\n    return Buffer.from(res);\n  }\n}\n","export function enumerate<T>(arr: T[]): [number, T][] {\n  return arr.map((v, i) => [i, v]);\n}\n\nexport function divide(from: string, split: string): [string, string] {\n  const arr = from.split(split);\n  return [arr[0], arr.slice(1).join(split)];\n}\n\nexport const dumpBuffer = (data: Buffer) =>\n  \"0x\" +\n  data\n    .toString(\"hex\")\n    .replace(/(.)(.)/g, \"$1$2 \")\n    .split(\" \")\n    .filter((s) => s != undefined && s.length > 0)\n    .join(\",0x\");\n\nexport const getObjectSummary = (obj: any) =>\n  Object.entries({ ...obj }).reduce((acc: {}, [key, value]) => {\n    if (typeof value === \"number\" || typeof value === \"string\") {\n      acc[key] = value;\n    }\n    if (Buffer.isBuffer(value)) {\n      acc[key] = dumpBuffer(value);\n    }\n    return acc;\n  }, {});\n","export { DtlsClient } from \"./client\";\nexport { DtlsServer } from \"./server\";\nexport { DtlsSocket } from \"./socket\";\nexport { createUdpTransport, Transport, UdpTransport } from \"./transport\";\n\n/* Client                                          Server\n   ------                                          ------\n\n   ClientHello             -------->                           Flight 1\n\n\t\t\t\t\t\t   <-------    HelloVerifyRequest      Flight 2\n\n   ClientHello             -------->                           Flight 3\n\n\t\t\t\t\t\t\t\t\t\t\t  ServerHello    \\\n\t\t\t\t\t\t\t\t\t\t\t Certificate*     \\\n\t\t\t\t\t\t\t\t\t   ServerKeyExchange*      Flight 4\n\t\t\t\t\t\t\t\t\t  CertificateRequest*     /\n\t\t\t\t\t\t   <--------      ServerHelloDone    /\n\n   Certificate*                                              \\\n   ClientKeyExchange                                          \\\n   CertificateVerify*                                          Flight 5\n   [ChangeCipherSpec]                                         /\n   Finished                -------->                         /\n\n\t\t\t\t\t\t\t\t\t   [ChangeCipherSpec]    \\ Flight 6\n\t\t\t\t\t\t   <--------             Finished    /\n\n\t\t\t   Figure 1. Message Flights for Full Handshake\n\n=======================================================================\n\n   Client                                           Server\n   ------                                           ------\n\n   ClientHello             -------->                          Flight 1\n\n\t\t\t\t\t\t\t\t\t\t\t  ServerHello    \\\n\t\t\t\t\t\t\t\t\t   [ChangeCipherSpec]     Flight 2\n\t\t\t\t\t\t\t<--------             Finished    /\n\n   [ChangeCipherSpec]                                         \\Flight 3\n   Finished                 -------->                         /\n\n\t\t Figure 2. Message Flights for Session-Resuming Handshake\n\t\t\t\t\t\t   (No Cookie Exchange)\n*/\n\n// enum HandshakeType {\n//   hello_request = 0,\n//   client_hello = 1,\n//   server_hello = 2,\n//   hello_verify_request = 3,\n//   certificate = 11,\n//   server_key_exchange = 12,\n//   certificate_request = 13,\n//   server_hello_done = 14,\n//   certificate_verify = 15,\n//   client_key_exchange = 16,\n//   finished = 20,\n// }\n\n// enum ContentType {\n//   changeCipherSpec = 20,\n//   alert = 21,\n//   handshake = 22,\n//   applicationData = 23,\n// }\n\n// enum {\n//   close_notify(0),\n//   unexpected_message(10),\n//   bad_record_mac(20),\n//   decryption_failed_RESERVED(21),\n//   record_overflow(22),\n//   decompression_failure(30),\n//   handshake_failure(40),\n//   no_certificate_RESERVED(41),\n//   bad_certificate(42),\n//   unsupported_certificate(43),\n//   certificate_revoked(44),\n//   certificate_expired(45),\n//   certificate_unknown(46),\n//   illegal_parameter(47),\n//   unknown_ca(48),\n//   access_denied(49),\n//   decode_error(50),\n//   decrypt_error(51),\n//   export_restriction_RESERVED(60),\n//   protocol_version(70),\n//   insufficient_security(71),\n//   internal_error(80),\n//   user_canceled(90),\n//   no_renegotiation(100),\n//   unsupported_extension(110),\n//   (255)\n// } AlertDescription;\n","import { DtlsContext } from \"../context/dtls\";\nimport { Handshake } from \"../typings/domain\";\nimport { DtlsPlaintext } from \"./message/plaintext\";\n\nexport type Message = { type: number; fragment: Buffer };\n\nexport const createFragments =\n  (dtls: DtlsContext) => (handshakes: Handshake[]) => {\n    dtls.lastFlight = handshakes;\n\n    return handshakes\n      .map((handshake) => {\n        handshake.messageSeq = dtls.sequenceNumber++;\n        const fragment = handshake.toFragment();\n        const fragments = fragment.chunk();\n        return fragments;\n      })\n      .flatMap((v) => v);\n  };\n\nexport const createPlaintext =\n  (dtls: DtlsContext) =>\n  (fragments: Message[], recordSequenceNumber: number) => {\n    return fragments.map((msg) => {\n      const plaintext = new DtlsPlaintext(\n        {\n          contentType: msg.type,\n          protocolVersion: dtls.version,\n          epoch: dtls.epoch,\n          sequenceNumber: recordSequenceNumber,\n          contentLen: msg.fragment.length,\n        },\n        msg.fragment\n      );\n      return plaintext;\n    });\n  };\n","export enum ContentType {\n  changeCipherSpec = 20,\n  alert = 21,\n  handshake = 22,\n  applicationData = 23,\n}\n\nexport enum AlertDesc {\n  CloseNotify = 0,\n  UnexpectedMessage = 10,\n  BadRecordMac = 20,\n  DecryptionFailed = 21,\n  RecordOverflow = 22,\n  DecompressionFailure = 30,\n  HandshakeFailure = 40,\n  NoCertificate = 41,\n  BadCertificate = 42,\n  UnsupportedCertificate = 43,\n  CertificateRevoked = 44,\n  CertificateExpired = 45,\n  CertificateUnknown = 46,\n  IllegalParameter = 47,\n  UnknownCa = 48,\n  AccessDenied = 49,\n  DecodeError = 50,\n  DecryptError = 51,\n  ExportRestriction = 60,\n  ProtocolVersion = 70,\n  InsufficientSecurity = 71,\n  InternalError = 80,\n  UserCanceled = 90,\n  NoRenegotiation = 100,\n  UnsupportedExtension = 110,\n}\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\nimport { decode, encode, types } from \"binary-data\";\n\nimport { HandshakeType } from \"../../handshake/const\";\nimport { getObjectSummary } from \"../../helper\";\n\nexport class FragmentedHandshake {\n  static readonly spec = {\n    msg_type: types.uint8,\n    length: types.uint24be,\n    message_seq: types.uint16be,\n    fragment_offset: types.uint24be,\n    fragment_length: types.uint24be,\n    fragment: types.buffer((context: any) => context.current.fragment_length),\n  };\n\n  constructor(\n    public msg_type: number,\n    public length: number,\n    public message_seq: number,\n    public fragment_offset: number,\n    public fragment_length: number,\n    public fragment: Buffer\n  ) {}\n\n  get summary() {\n    return getObjectSummary(this);\n  }\n\n  static createEmpty() {\n    return new FragmentedHandshake(\n      undefined as any,\n      undefined as any,\n      undefined as any,\n      undefined as any,\n      undefined as any,\n      undefined as any\n    );\n  }\n\n  static deSerialize(buf: Buffer) {\n    return new FragmentedHandshake(\n      //@ts-ignore\n      ...Object.values(decode(buf, FragmentedHandshake.spec))\n    );\n  }\n\n  serialize() {\n    const res = encode(this, FragmentedHandshake.spec).slice();\n    return Buffer.from(res);\n  }\n\n  chunk(maxFragmentLength?: number): FragmentedHandshake[] {\n    let start = 0;\n    const totalLength = this.fragment.length;\n\n    if (totalLength === 0)\n      return [\n        new FragmentedHandshake(\n          this.msg_type,\n          totalLength,\n          this.message_seq,\n          start,\n          0,\n          this.fragment\n        ),\n      ];\n\n    const fragments: FragmentedHandshake[] = [];\n    if (!maxFragmentLength) {\n      maxFragmentLength = 1280 - (20 + 8) - (1 + 3 + 2 + 3 + 3);\n    }\n    // loop through the message and fragment it\n    while (start < totalLength) {\n      // calculate maximum length, limited by MTU - IP/UDP headers - handshake overhead\n      const fragmentLength = Math.min(maxFragmentLength, totalLength - start);\n      // slice and dice\n      const data = Buffer.from(\n        this.fragment.slice(start, start + fragmentLength)\n      );\n      if (data.length <= 0) {\n        // this shouldn't happen, but we don't want to introduce an infinite loop\n        throw new Error(\n          `Zero or less bytes processed while fragmenting handshake message.`\n        );\n      }\n      // create the message\n      fragments.push(\n        new FragmentedHandshake(\n          this.msg_type,\n          totalLength,\n          this.message_seq,\n          start,\n          data.length,\n          data\n        )\n      );\n      // step forward by the actual fragment length\n      start += data.length;\n    }\n\n    return fragments;\n  }\n\n  static assemble(messages: FragmentedHandshake[]): FragmentedHandshake {\n    // cannot reassemble empty arrays\n    if (!(messages && messages.length)) {\n      throw new Error(\"cannot reassemble handshake from empty array\");\n    }\n\n    // sort by fragment start\n    messages = messages.sort((a, b) => a.fragment_offset - b.fragment_offset);\n    // combine into a single buffer\n    const combined = Buffer.alloc(messages[0].length);\n    for (const msg of messages) {\n      msg.fragment.copy(combined, msg.fragment_offset);\n    }\n\n    // and return the complete message\n    return new FragmentedHandshake(\n      messages[0].msg_type,\n      messages[0].length,\n      messages[0].message_seq,\n      0,\n      combined.length,\n      combined\n    );\n  }\n\n  static findAllFragments(\n    fragments: FragmentedHandshake[],\n    type: HandshakeType\n  ): FragmentedHandshake[] {\n    const reference = fragments.find((v) => v.msg_type === type);\n    if (!reference) return [];\n\n    // ignore empty arrays\n    if (!(fragments && fragments.length)) return [];\n\n    // return all fragments with matching msg_type, message_seq and total length\n    return fragments.filter((f) => {\n      return (\n        f.msg_type === reference.msg_type &&\n        f.message_seq === reference.message_seq &&\n        f.length === reference.length\n      );\n    });\n  }\n}\n","import { decode, encode, types } from \"binary-data\";\n\nimport { ProtocolVersion } from \"../../handshake/binary\";\n\nexport class DtlsPlaintextHeader {\n  static readonly spec = {\n    contentType: types.uint8,\n    protocolVersion: ProtocolVersion,\n    epoch: types.uint16be,\n    sequenceNumber: types.uint48be,\n    contentLen: types.uint16be,\n  };\n\n  constructor(\n    public contentType: number,\n    public protocolVersion: { major: number; minor: number },\n    public epoch: number,\n    public sequenceNumber: number,\n    public contentLen: number\n  ) {}\n\n  static createEmpty() {\n    return new DtlsPlaintextHeader(\n      undefined as any,\n      undefined as any,\n      undefined as any,\n      undefined as any,\n      undefined as any\n    );\n  }\n\n  static deSerialize(buf: Buffer) {\n    return new DtlsPlaintextHeader(\n      //@ts-ignore\n      ...Object.values(decode(buf, DtlsPlaintextHeader.spec))\n    );\n  }\n\n  serialize() {\n    const res = encode(this, DtlsPlaintextHeader.spec).slice();\n    return Buffer.from(res);\n  }\n}\n\nexport class MACHeader {\n  static readonly spec = {\n    epoch: types.uint16be,\n    sequenceNumber: types.uint48be,\n    contentType: types.uint8,\n    protocolVersion: ProtocolVersion,\n    contentLen: types.uint16be,\n  };\n\n  constructor(\n    public epoch: number,\n    public sequenceNumber: number,\n    public contentType: number,\n    public protocolVersion: { major: number; minor: number },\n    public contentLen: number\n  ) {}\n\n  static createEmpty() {\n    return new MACHeader(\n      undefined as any,\n      undefined as any,\n      undefined as any,\n      undefined as any,\n      undefined as any\n    );\n  }\n\n  static deSerialize(buf: Buffer) {\n    return new MACHeader(\n      //@ts-ignore\n      ...Object.values(decode(buf, MACHeader.spec))\n    );\n  }\n\n  serialize() {\n    const res = encode(this, MACHeader.spec).slice();\n    return Buffer.from(res);\n  }\n}\n","/* eslint-disable @typescript-eslint/ban-ts-comment */\nimport { decode, encode, types } from \"binary-data\";\n\nimport { dumpBuffer } from \"../../helper\";\nimport { DtlsPlaintextHeader, MACHeader } from \"./header\";\n\nexport class DtlsPlaintext {\n  static readonly spec = {\n    recordLayerHeader: DtlsPlaintextHeader.spec,\n    fragment: types.buffer(\n      (context: any) => context.current.recordLayerHeader.contentLen\n    ),\n  };\n\n  constructor(\n    public recordLayerHeader: typeof DtlsPlaintext.spec.recordLayerHeader,\n    public fragment: Buffer\n  ) {}\n\n  get summary() {\n    return {\n      header: this.recordLayerHeader,\n      fragment: dumpBuffer(this.fragment),\n    };\n  }\n\n  static createEmpty() {\n    return new DtlsPlaintext(undefined as any, undefined as any);\n  }\n\n  static deSerialize(buf: Buffer) {\n    const r = new DtlsPlaintext(\n      //@ts-ignore\n      ...Object.values(decode(buf, DtlsPlaintext.spec))\n    );\n    return r;\n  }\n\n  serialize() {\n    const res = encode(this, DtlsPlaintext.spec).slice();\n    return Buffer.from(res);\n  }\n\n  computeMACHeader() {\n    return new MACHeader(\n      this.recordLayerHeader.epoch,\n      this.recordLayerHeader.sequenceNumber,\n      this.recordLayerHeader.contentType,\n      this.recordLayerHeader.protocolVersion,\n      this.recordLayerHeader.contentLen\n    ).serialize();\n  }\n}\n","import debug from \"debug\";\n\nimport { CipherContext } from \"../context/cipher\";\nimport { DtlsContext } from \"../context/dtls\";\nimport { Alert } from \"../handshake/message/alert\";\nimport { AlertDesc, ContentType } from \"./const\";\nimport { FragmentedHandshake } from \"./message/fragment\";\nimport { DtlsPlaintext } from \"./message/plaintext\";\n\nconst log = debug(\"werift-dtls : packages/dtls/record/receive.ts : log\");\nconst err = debug(\"werift-dtls : packages/dtls/record/receive.ts : err\");\n\nexport const parsePacket = (data: Buffer) => {\n  let start = 0;\n  const packets: DtlsPlaintext[] = [];\n  while (data.length > start) {\n    const fragmentLength = data.readUInt16BE(start + 11);\n    if (data.length < start + (12 + fragmentLength)) break;\n    const packet = DtlsPlaintext.deSerialize(data.slice(start));\n    packets.push(packet);\n\n    start += 13 + fragmentLength;\n  }\n\n  return packets;\n};\n\nexport const parsePlainText =\n  (dtls: DtlsContext, cipher: CipherContext) => (plain: DtlsPlaintext) => {\n    const contentType = plain.recordLayerHeader.contentType;\n\n    switch (contentType) {\n      case ContentType.changeCipherSpec: {\n        log(dtls.sessionId, \"change cipher spec\");\n        return {\n          type: ContentType.changeCipherSpec,\n          data: undefined,\n        };\n      }\n      case ContentType.handshake: {\n        let raw = plain.fragment;\n        try {\n          if (plain.recordLayerHeader.epoch > 0) {\n            log(dtls.sessionId, \"decrypt handshake\");\n            raw = cipher.decryptPacket(plain);\n          }\n        } catch (error) {\n          err(dtls.sessionId, \"decrypt failed\", error);\n          throw error;\n        }\n        try {\n          return {\n            type: ContentType.handshake,\n            data: FragmentedHandshake.deSerialize(raw),\n          };\n        } catch (error) {\n          err(dtls.sessionId, \"decSerialize failed\", error, raw);\n          throw error;\n        }\n      }\n      case ContentType.applicationData: {\n        return {\n          type: ContentType.applicationData,\n          data: cipher.decryptPacket(plain),\n        };\n      }\n      case ContentType.alert: {\n        let alert = Alert.deSerialize(plain.fragment);\n\n        // TODO impl more better about handle encrypted alert\n        if (AlertDesc[alert.description] == undefined) {\n          const dec = cipher.decryptPacket(plain);\n          alert = Alert.deSerialize(dec);\n        }\n        err(\n          dtls.sessionId,\n          \"ContentType.alert\",\n          alert,\n          AlertDesc[alert.description],\n          \"flight\",\n          dtls.flight,\n          \"lastFlight\",\n          dtls.lastFlight\n        );\n        if (alert.level > 1) {\n          throw new Error(\"alert fatal error\");\n        }\n      }\n      // eslint-disable-next-line no-fallthrough\n      default: {\n        return { type: ContentType.alert, data: undefined };\n      }\n    }\n  };\n","import debug from \"debug\";\n\nimport { SessionType } from \"./cipher/suites/abstract\";\nimport { flight2 } from \"./flight/server/flight2\";\nimport { Flight4 } from \"./flight/server/flight4\";\nimport { Flight6 } from \"./flight/server/flight6\";\nimport { HandshakeType } from \"./handshake/const\";\nimport { ClientHello } from \"./handshake/message/client/hello\";\nimport { FragmentedHandshake } from \"./record/message/fragment\";\nimport { DtlsSocket, Options } from \"./socket\";\n\nconst log = debug(\"werift-dtls : packages/dtls/src/server.ts : log\");\n\nexport class DtlsServer extends DtlsSocket {\n  constructor(options: Options) {\n    super(options, SessionType.SERVER);\n    this.onHandleHandshakes = this.handleHandshakes;\n    log(this.dtls.sessionId, \"start server\");\n  }\n\n  private flight6?: Flight6;\n  private handleHandshakes = async (assembled: FragmentedHandshake[]) => {\n    log(\n      this.dtls.sessionId,\n      \"handleHandshakes\",\n      assembled.map((a) => a.msg_type)\n    );\n\n    for (const handshake of assembled) {\n      switch (handshake.msg_type) {\n        // flight1,3\n        case HandshakeType.client_hello_1:\n          {\n            if (this.connected) {\n              this.renegotiation();\n            }\n            const clientHello = ClientHello.deSerialize(handshake.fragment);\n\n            if (clientHello.cookie.length === 0) {\n              log(this.dtls.sessionId, \"send flight2\");\n              flight2(\n                this.transport,\n                this.dtls,\n                this.cipher,\n                this.srtp\n              )(clientHello);\n            } else if (\n              this.dtls.cookie &&\n              clientHello.cookie.equals(this.dtls.cookie)\n            ) {\n              log(this.dtls.sessionId, \"send flight4\");\n              await new Flight4(\n                this.transport,\n                this.dtls,\n                this.cipher,\n                this.srtp\n              ).exec(handshake, this.options.certificateRequest);\n            } else {\n              log(\"wrong state\", {\n                dtlsCookie: this.dtls.cookie?.toString(\"hex\").slice(10),\n                helloCookie: clientHello.cookie.toString(\"hex\").slice(10),\n              });\n            }\n          }\n          break;\n        // flight 5\n        case HandshakeType.certificate_11:\n        case HandshakeType.certificate_verify_15:\n        case HandshakeType.client_key_exchange_16:\n          {\n            if (this.connected) return;\n            this.flight6 = new Flight6(this.transport, this.dtls, this.cipher);\n            this.flight6.handleHandshake(handshake);\n          }\n          break;\n        case HandshakeType.finished_20:\n          {\n            await this.waitForReady(() => !!this.flight6);\n            this.flight6?.handleHandshake(handshake);\n\n            await this.waitForReady(() => this.dtls.checkHandshakesExist([16]));\n            await this.flight6?.exec();\n\n            this.connected = true;\n            this.onConnect.execute();\n            log(this.dtls.sessionId, \"dtls connected\");\n          }\n          break;\n      }\n    }\n  };\n}\n","import { decode, types } from \"binary-data\";\nimport debug from \"debug\";\nimport { Event } from \"rx.mini\";\nimport { setTimeout } from \"timers/promises\";\n\nimport {\n  HashAlgorithm,\n  NamedCurveAlgorithmList,\n  SignatureAlgorithm,\n  SignatureHash,\n} from \"./cipher/const\";\nimport { exportKeyingMaterial } from \"./cipher/prf\";\nimport { SessionType, SessionTypes } from \"./cipher/suites/abstract\";\nimport { CipherContext } from \"./context/cipher\";\nimport { DtlsContext } from \"./context/dtls\";\nimport { Profile, SrtpContext } from \"./context/srtp\";\nimport { TransportContext } from \"./context/transport\";\nimport { EllipticCurves } from \"./handshake/extensions/ellipticCurves\";\nimport { ExtendedMasterSecret } from \"./handshake/extensions/extendedMasterSecret\";\nimport { RenegotiationIndication } from \"./handshake/extensions/renegotiationIndication\";\nimport { Signature } from \"./handshake/extensions/signature\";\nimport { UseSRTP } from \"./handshake/extensions/useSrtp\";\nimport { createPlaintext } from \"./record/builder\";\nimport { ContentType } from \"./record/const\";\nimport { FragmentedHandshake } from \"./record/message/fragment\";\nimport { parsePacket, parsePlainText } from \"./record/receive\";\nimport { Transport } from \"./transport\";\nimport { Extension } from \"./typings/domain\";\n\nconst log = debug(\"werift-dtls : packages/dtls/src/socket.ts : log\");\nconst err = debug(\"werift-dtls : packages/dtls/src/socket.ts : err\");\n\nexport class DtlsSocket {\n  readonly onConnect = new Event();\n  readonly onData = new Event<[Buffer]>();\n  readonly onError = new Event<[Error]>();\n  readonly onClose = new Event();\n  readonly transport: TransportContext;\n  cipher: CipherContext;\n  dtls: DtlsContext;\n  srtp: SrtpContext = new SrtpContext();\n\n  connected = false;\n  extensions: Extension[] = [];\n  onHandleHandshakes!: (assembled: FragmentedHandshake[]) => Promise<void>;\n\n  private bufferFragmentedHandshakes: FragmentedHandshake[] = [];\n\n  constructor(public options: Options, public sessionType: SessionTypes) {\n    this.dtls = new DtlsContext(this.options, this.sessionType);\n    this.cipher = new CipherContext(\n      this.sessionType,\n      this.options.cert,\n      this.options.key,\n      this.options.signatureHash\n    );\n    this.transport = new TransportContext(this.options.transport);\n    this.setupExtensions();\n    this.transport.socket.onData = this.udpOnMessage;\n  }\n\n  renegotiation() {\n    log(\"renegotiation\", this.sessionType);\n    this.connected = false;\n    this.cipher = new CipherContext(\n      this.sessionType,\n      this.options.cert,\n      this.options.key,\n      this.options.signatureHash\n    );\n    this.dtls = new DtlsContext(this.options, this.sessionType);\n    this.srtp = new SrtpContext();\n    this.extensions = [];\n    this.bufferFragmentedHandshakes = [];\n  }\n\n  private udpOnMessage = (data: Buffer) => {\n    const packets = parsePacket(data);\n\n    for (const packet of packets) {\n      try {\n        const message = parsePlainText(this.dtls, this.cipher)(packet);\n        switch (message.type) {\n          case ContentType.handshake:\n            {\n              const handshake = message.data as FragmentedHandshake;\n              const handshakes = this.handleFragmentHandshake([handshake]);\n              const assembled = Object.values(\n                handshakes.reduce(\n                  (acc: { [type: string]: FragmentedHandshake[] }, cur) => {\n                    if (!acc[cur.msg_type]) acc[cur.msg_type] = [];\n                    acc[cur.msg_type].push(cur);\n                    return acc;\n                  },\n                  {}\n                )\n              )\n                .map((v) => FragmentedHandshake.assemble(v))\n                .sort((a, b) => a.msg_type - b.msg_type);\n\n              this.onHandleHandshakes(assembled).catch((error) => {\n                err(this.dtls.sessionId, \"onHandleHandshakes error\", error);\n                this.onError.execute(error);\n              });\n            }\n            break;\n          case ContentType.applicationData:\n            {\n              this.onData.execute(message.data as Buffer);\n            }\n            break;\n          case ContentType.alert:\n            this.onClose.execute();\n            break;\n        }\n      } catch (error) {\n        err(this.dtls.sessionId, \"catch udpOnMessage error\", error);\n      }\n    }\n  };\n\n  private setupExtensions() {\n    {\n      log(\n        this.dtls.sessionId,\n        \"support srtpProfiles\",\n        this.options.srtpProfiles\n      );\n      if (this.options.srtpProfiles && this.options.srtpProfiles.length > 0) {\n        const useSrtp = UseSRTP.create(\n          this.options.srtpProfiles,\n          Buffer.from([0x00])\n        );\n        this.extensions.push(useSrtp.extension);\n      }\n    }\n\n    {\n      const curve = EllipticCurves.createEmpty();\n      curve.data = NamedCurveAlgorithmList;\n      this.extensions.push(curve.extension);\n    }\n\n    {\n      const signature = Signature.createEmpty();\n      // libwebrtc/OpenSSL require 4=1 , 4=3 signatureHash\n      signature.data = [\n        { hash: HashAlgorithm.sha256_4, signature: SignatureAlgorithm.rsa_1 },\n        { hash: HashAlgorithm.sha256_4, signature: SignatureAlgorithm.ecdsa_3 },\n      ];\n      this.extensions.push(signature.extension);\n    }\n\n    {\n      if (this.options.extendedMasterSecret) {\n        this.extensions.push({\n          type: ExtendedMasterSecret.type,\n          data: Buffer.alloc(0),\n        });\n      }\n    }\n\n    {\n      const renegotiationIndication = RenegotiationIndication.createEmpty();\n      this.extensions.push(renegotiationIndication.extension);\n    }\n  }\n\n  protected waitForReady = (condition: () => boolean) =>\n    new Promise<void>(async (r, f) => {\n      {\n        for (let i = 0; i < 10; i++) {\n          if (condition()) {\n            r();\n            break;\n          } else {\n            await setTimeout(100 * i);\n          }\n        }\n        f(\"waitForReady timeout\");\n      }\n    });\n\n  handleFragmentHandshake(messages: FragmentedHandshake[]) {\n    let handshakes = messages.filter((v) => {\n      // find fragmented\n      if (v.fragment_length !== v.length) {\n        this.bufferFragmentedHandshakes.push(v);\n        return false;\n      }\n      return true;\n    });\n\n    if (this.bufferFragmentedHandshakes.length > 1) {\n      const [last] = this.bufferFragmentedHandshakes.slice(-1);\n      if (last.fragment_offset + last.fragment_length === last.length) {\n        handshakes = [...this.bufferFragmentedHandshakes, ...handshakes];\n        this.bufferFragmentedHandshakes = [];\n      }\n    }\n    return handshakes; // return un fragmented handshakes\n  }\n\n  /**send application data */\n  send = async (buf: Buffer) => {\n    const pkt = createPlaintext(this.dtls)(\n      [{ type: ContentType.applicationData, fragment: buf }],\n      ++this.dtls.recordSequenceNumber\n    )[0];\n    await this.transport.send(this.cipher.encryptPacket(pkt).serialize());\n  };\n\n  close() {\n    this.transport.socket.close();\n  }\n\n  extractSessionKeys(keyLength: number, saltLength: number) {\n    const keyingMaterial = this.exportKeyingMaterial(\n      \"EXTRACTOR-dtls_srtp\",\n      keyLength * 2 + saltLength * 2\n    );\n\n    const { clientKey, serverKey, clientSalt, serverSalt } = decode(\n      keyingMaterial,\n      {\n        clientKey: types.buffer(keyLength),\n        serverKey: types.buffer(keyLength),\n        clientSalt: types.buffer(saltLength),\n        serverSalt: types.buffer(saltLength),\n      }\n    );\n\n    if (this.sessionType === SessionType.CLIENT) {\n      return {\n        localKey: clientKey,\n        localSalt: clientSalt,\n        remoteKey: serverKey,\n        remoteSalt: serverSalt,\n      };\n    } else {\n      return {\n        localKey: serverKey,\n        localSalt: serverSalt,\n        remoteKey: clientKey,\n        remoteSalt: clientSalt,\n      };\n    }\n  }\n\n  exportKeyingMaterial(label: string, length: number) {\n    return exportKeyingMaterial(\n      label,\n      length,\n      this.cipher.masterSecret,\n      this.cipher.localRandom.serialize(),\n      this.cipher.remoteRandom.serialize(),\n      this.sessionType === SessionType.CLIENT\n    );\n  }\n}\n\nexport interface Options {\n  transport: Transport;\n  srtpProfiles?: Profile[];\n  cert?: string;\n  key?: string;\n  signatureHash?: SignatureHash;\n  certificateRequest?: boolean;\n  extendedMasterSecret?: boolean;\n}\n","import debug from \"debug\";\nimport { RemoteInfo, Socket } from \"dgram\";\n\nconst log = debug(\"werift-dtls : packages/dtls/src/transport.ts\");\n\nexport interface Transport {\n  onData?: (buf: Buffer) => void;\n  send: (buf: Buffer) => Promise<void>;\n  close: () => void;\n}\n\nexport class UdpTransport implements Transport {\n  constructor(private upd: Socket, private rinfo: Partial<RemoteInfo>) {\n    upd.on(\"message\", (buf, target) => {\n      this.rinfo = target;\n      if (this.onData) this.onData(buf);\n    });\n  }\n  onData?: (buf: Buffer) => void;\n\n  send = (buf: Buffer) =>\n    new Promise<void>((r, f) => {\n      log(\"this.rinfo\", this.rinfo);\n      this.upd.send(buf, this.rinfo.port, this.rinfo.address, (err) => {\n        if (err) {\n          f(err);\n        } else {\n          r();\n        }\n      });\n    });\n\n  close() {\n    try {\n      this.upd.close();\n    } catch (error) {}\n  }\n}\n\nexport const createUdpTransport = (\n  socket: Socket,\n  rinfo: Partial<RemoteInfo> = {}\n) => new UdpTransport(socket, rinfo);\n","import { encode } from \"binary-data\";\n\nexport function encodeBuffer(obj: object, spec: object) {\n  return Buffer.from(encode(obj, spec).slice());\n}\n","import { createHash } from \"crypto\";\nimport range from \"lodash/range\";\nimport { isIPv4 } from \"net\";\n\nexport class Candidate {\n  // An ICE candidate.\n\n  constructor(\n    public foundation: string,\n    public component: number,\n    public transport: string,\n    public priority: number,\n    public host: string,\n    public port: number,\n    public type: string,\n    public relatedAddress?: string,\n    public relatedPort?: number,\n    public tcptype?: string,\n    public generation?: number\n  ) {}\n\n  static fromSdp(sdp: string) {\n    // Parse a :class:`Candidate` from SDP.\n    // .. code-block:: python\n    //    Candidate.from_sdp(\n    //     '6815297761 1 udp 659136 1.2.3.4 31102 typ host generation 0')\n\n    const bits = sdp.split(\" \");\n    if (bits.length < 8) throw new Error(\"SDP does not have enough properties\");\n\n    const kwargs = {\n      foundation: bits[0],\n      component: Number(bits[1]),\n      transport: bits[2],\n      priority: Number(bits[3]),\n      host: bits[4],\n      port: Number(bits[5]),\n      type: bits[7],\n    };\n\n    for (const i of range(8, bits.length - 1, 2)) {\n      if (bits[i] === \"raddr\") {\n        (kwargs as any)[\"related_address\"] = bits[i + 1];\n      } else if (bits[i] === \"rport\") {\n        (kwargs as any)[\"related_port\"] = Number(bits[i + 1]);\n      } else if (bits[i] === \"tcptype\") {\n        (kwargs as any)[\"tcptype\"] = bits[i + 1];\n      } else if (bits[i] === \"generation\") {\n        (kwargs as any)[\"generation\"] = Number(bits[i + 1]);\n      }\n    }\n    const { foundation, component, transport, priority, host, port, type } =\n      kwargs;\n\n    return new Candidate(\n      foundation,\n      component,\n      transport,\n      priority,\n      host,\n      port,\n      type,\n      (kwargs as any)[\"related_address\"],\n      (kwargs as any)[\"related_port\"],\n      (kwargs as any)[\"tcptype\"],\n      (kwargs as any)[\"generation\"]\n    );\n  }\n\n  canPairWith(other: Candidate) {\n    // \"\"\"\n    // A local candidate is paired with a remote candidate if and only if\n    // the two candidates have the same component ID and have the same IP\n    // address version.\n    // \"\"\"\n    const a = isIPv4(this.host);\n    const b = isIPv4(other.host);\n    return (\n      this.component === other.component &&\n      this.transport.toLowerCase() === other.transport.toLowerCase() &&\n      a === b\n    );\n  }\n\n  toSdp() {\n    let sdp = `${this.foundation} ${this.component} ${this.transport} ${this.priority} ${this.host} ${this.port} typ ${this.type}`;\n\n    if (this.relatedAddress) sdp += ` raddr ${this.relatedAddress}`;\n    if (this.relatedPort != undefined) sdp += ` rport ${this.relatedPort}`;\n    if (this.tcptype) sdp += ` tcptype ${this.tcptype}`;\n    if (this.generation != undefined) sdp += ` generation ${this.generation}`;\n\n    return sdp;\n  }\n}\n\nexport function candidateFoundation(\n  candidateType: string,\n  candidateTransport: string,\n  baseAddress: string\n) {\n  // \"\"\"\n  // See RFC 5245 - 4.1.1.3. Computing Foundations\n  // \"\"\"\n  const key = `${candidateType}|${candidateTransport}|${baseAddress}`;\n\n  return createHash(\"md5\").update(key, \"ascii\").digest(\"hex\").slice(7);\n}\n\n// priorityを決める\nexport function candidatePriority(\n  candidateComponent: number,\n  candidateType: string,\n  localPref = 65535\n) {\n  // See RFC 5245 - 4.1.2.1. Recommended Formula\n  let typePref = 0;\n  if (candidateType === \"host\") {\n    typePref = 126;\n  } else if (candidateType === \"prflx\") {\n    typePref = 110;\n  } else if (candidateType === \"srflx\") {\n    typePref = 100;\n  } else {\n    typePref = 0;\n  }\n  return (\n    (1 << 24) * typePref + (1 << 8) * localPref + (256 - candidateComponent)\n  );\n}\n","import worker_thread from \"worker_threads\";\n\ninterface DnsLookupRequest {\n  host: string;\n}\n\ninterface DnsLookupResult extends DnsLookupRequest {\n  err?: string;\n  address?: string;\n  family?: number;\n}\n\nexport class DnsLookup {\n  thread: worker_thread.Worker;\n  cache = new Map<string, Promise<string>>();\n\n  constructor() {\n    const lookupWorkerFunction = () => {\n      const worker_thread = global.require(\"worker_threads\");\n      const { lookup } = global.require(\"dns\");\n\n      const dnsLookup = (host: string) =>\n        lookup(host, (err: Error, address: string, family: number) => {\n          const res: DnsLookupResult = {\n            err: err?.message,\n            address,\n            family,\n            host,\n          };\n          worker_thread.parentPort?.postMessage(res);\n          process.exit();\n        });\n\n      worker_thread.parentPort?.on(\"message\", (message: DnsLookupRequest) => {\n        const { host } = message;\n        dnsLookup(host);\n      });\n    };\n\n    const lookupEval = `(${lookupWorkerFunction})()`;\n\n    this.thread = new worker_thread.Worker(lookupEval, {\n      eval: true,\n    });\n\n    this.thread.setMaxListeners(100);\n  }\n\n  async lookup(host: string): Promise<string> {\n    let cached = this.cache.get(host);\n    if (cached) {\n      return cached;\n    }\n    cached = new Promise((r, f) => {\n      const exitListener = (exitCode: number) =>\n        f(new Error(`dns.lookup thread exited unexpectedly: ${exitCode}`));\n\n      const threadMessageListener = (result: DnsLookupResult) => {\n        if (result.host !== host) {\n          return;\n        }\n\n        this.thread.removeListener(\"message\", threadMessageListener);\n        this.thread.removeListener(\"exit\", exitListener);\n\n        if (!result.address)\n          return f(new Error(result.err || \"dns.lookup thread unknown error\"));\n        r(result.address);\n      };\n\n      this.thread.on(\"message\", threadMessageListener);\n      this.thread.on(\"exit\", exitListener);\n\n      this.thread.postMessage({\n        host,\n      } as DnsLookupRequest);\n    });\n\n    this.cache.set(host, cached);\n    return cached;\n  }\n\n  close() {\n    return this.thread.terminate();\n  }\n}\n","import { Message } from \"./stun/message\";\nimport { Address } from \"./types/model\";\n\nexport class TransactionError extends Error {\n  response?: Message;\n  addr?: Address;\n}\n\nexport class TransactionFailed extends TransactionError {\n  constructor(public response: Message, public addr: Address) {\n    super();\n  }\n\n  get str() {\n    let out = \"STUN transaction failed\";\n    const attribute = this.response.getAttributeValue(\"ERROR-CODE\");\n    if (attribute) {\n      const [code, msg] = attribute;\n      out += ` (${code} - ${msg})`;\n    }\n    return out;\n  }\n}\n\nexport class TransactionTimeout extends TransactionError {\n  get str() {\n    return \"STUN transaction timed out\";\n  }\n}\n","import { randomBytes } from \"crypto\";\nimport debug from \"debug\";\nimport PCancelable from \"p-cancelable\";\nimport { Event } from \"rx.mini\";\n\nconst log = debug(\"werift-ice:packages/ice/src/helper.ts\");\n\nexport function randomString(length: number) {\n  return randomBytes(length).toString(\"hex\").substring(0, length);\n}\n\nexport function randomTransactionId() {\n  return randomBytes(12);\n}\n\nexport function bufferXor(a: Buffer, b: Buffer): Buffer {\n  if (a.length !== b.length) {\n    throw new TypeError(\n      \"[webrtc-stun] You can not XOR buffers which length are different\"\n    );\n  }\n\n  const length = a.length;\n  const buffer = Buffer.allocUnsafe(length);\n\n  for (let i = 0; i < length; i++) {\n    buffer[i] = a[i] ^ b[i];\n  }\n\n  return buffer;\n}\n\nexport function difference<T>(x: Set<T>, y: Set<T>) {\n  return new Set([...x].filter((e) => !y.has(e)));\n}\n\n// infinite size queue\nexport class PQueue<T> {\n  private queue: Promise<T>[] = [];\n  private wait = new Event<[Promise<T>]>();\n\n  put(v: Promise<T>) {\n    this.queue.push(v);\n    if (this.queue.length === 1) {\n      this.wait.execute(v);\n    }\n  }\n\n  get(): Promise<T> {\n    const v = this.queue.shift();\n    if (!v) {\n      return new Promise((r) => {\n        this.wait.subscribe((v) => {\n          this.queue.shift();\n          r(v);\n        });\n      });\n    }\n    return v!;\n  }\n}\n\nexport const future = (pCancel: PCancelable<any>) => {\n  const state = { done: false };\n\n  const cancel = () => pCancel.cancel();\n\n  const done = () => state.done;\n\n  pCancel\n    .then(() => {\n      state.done = true;\n    })\n    .catch((error) => {\n      if (error !== \"cancel\") {\n        log(\"future\", error);\n      }\n    });\n\n  return { cancel, promise: pCancel, done };\n};\n\nexport type Future = ReturnType<typeof future>;\n","import { randomBytes } from \"crypto\";\nimport debug from \"debug\";\nimport { Uint64BE } from \"int64-buffer\";\nimport * as nodeIp from \"ip\";\nimport isEqual from \"lodash/isEqual\";\nimport range from \"lodash/range\";\nimport { isIPv4 } from \"net\";\nimport os from \"os\";\nimport PCancelable from \"p-cancelable\";\nimport { Event } from \"rx.mini\";\nimport timers from \"timers/promises\";\n\nimport { InterfaceAddresses } from \"../../common/src/network\";\nimport { Candidate, candidateFoundation, candidatePriority } from \"./candidate\";\nimport { DnsLookup } from \"./dns/lookup\";\nimport { TransactionError } from \"./exceptions\";\nimport { difference, Future, future, PQueue, randomString } from \"./helper\";\nimport { classes, methods } from \"./stun/const\";\nimport { Message, parseMessage } from \"./stun/message\";\nimport { StunProtocol } from \"./stun/protocol\";\nimport { createTurnEndpoint } from \"./turn/protocol\";\nimport { Address, Protocol } from \"./types/model\";\nimport { normalizeFamilyNodeV18 } from \"./utils\";\n\nconst log = debug(\"werift-ice : packages/ice/src/ice.ts : log\");\n\nexport class Connection {\n  localUserName = randomString(4);\n  localPassword = randomString(22);\n  remotePassword: string = \"\";\n  remoteUsername: string = \"\";\n  remoteIsLite = false;\n  checkList: CandidatePair[] = [];\n  localCandidates: Candidate[] = [];\n  stunServer?: Address;\n  turnServer?: Address;\n  useIpv4: boolean;\n  useIpv6: boolean;\n  options: IceOptions;\n  remoteCandidatesEnd = false;\n  /**コンポーネントはデータストリームの一部です. データストリームには複数のコンポーネントが必要な場合があり、\n   * データストリーム全体が機能するには、それぞれが機能する必要があります.\n   *  RTP / RTCPデータストリームの場合、RTPとRTCPが同じポートで多重化されていない限り、データストリームごとに2つのコンポーネントがあります.\n   * 1つはRTP用、もう1つはRTCP用です. コンポーネントには候補ペアがあり、他のコンポーネントでは使用できません.  */\n  _components: Set<number>;\n  _localCandidatesEnd = false;\n  _tieBreaker: BigInt = BigInt(new Uint64BE(randomBytes(64)).toString());\n  state: IceState = \"new\";\n  dnsLookup?: DnsLookup;\n\n  readonly onData = new Event<[Buffer, number]>();\n  readonly stateChanged = new Event<[IceState]>();\n\n  private _remoteCandidates: Candidate[] = [];\n  // P2P接続完了したソケット\n  private nominated: { [componentId: number]: CandidatePair } = {};\n  get nominatedKeys() {\n    return Object.keys(this.nominated).map((v) => v.toString());\n  }\n  private nominating = new Set<number>();\n  private checkListDone = false;\n  private checkListState = new PQueue<number>();\n  private earlyChecks: [Message, Address, Protocol][] = [];\n  private localCandidatesStart = false;\n  private protocols: Protocol[] = [];\n  private queryConsentHandle?: Future;\n  private promiseGatherCandidates?: Event<[]>;\n\n  constructor(public iceControlling: boolean, options?: Partial<IceOptions>) {\n    this.options = {\n      ...defaultOptions,\n      ...options,\n    };\n    const { components, stunServer, turnServer, useIpv4, useIpv6 } =\n      this.options;\n    this.stunServer = validateAddress(stunServer);\n    this.turnServer = validateAddress(turnServer);\n    this.useIpv4 = useIpv4;\n    this.useIpv6 = useIpv6;\n    this._components = new Set(range(1, components + 1));\n  }\n\n  setRemoteParams({\n    iceLite,\n    usernameFragment,\n    password,\n  }: {\n    iceLite: boolean;\n    usernameFragment: string;\n    password: string;\n  }) {\n    log(\"setRemoteParams\", { iceLite, usernameFragment, password });\n    this.remoteIsLite = iceLite;\n    this.remoteUsername = usernameFragment;\n    this.remotePassword = password;\n  }\n\n  // 4.1.1 Gathering Candidates\n  async gatherCandidates(cb?: (candidate: Candidate) => void) {\n    if (!this.localCandidatesStart) {\n      this.localCandidatesStart = true;\n      this.promiseGatherCandidates = new Event();\n\n      let address = getHostAddresses(this.useIpv4, this.useIpv6);\n      const { interfaceAddresses } = this.options;\n      if (interfaceAddresses) {\n        const filteredAddresses = address.filter((check) =>\n          Object.values(interfaceAddresses).includes(check)\n        );\n        if (filteredAddresses.length) {\n          address = filteredAddresses;\n        }\n      }\n      if (this.options.additionalHostAddresses) {\n        address = Array.from(\n          new Set([...this.options.additionalHostAddresses, ...address])\n        );\n      }\n\n      for (const component of this._components) {\n        const candidates = await this.getComponentCandidates(\n          component,\n          address,\n          5,\n          cb\n        );\n        this.localCandidates = [...this.localCandidates, ...candidates];\n      }\n\n      this._localCandidatesEnd = true;\n      this.promiseGatherCandidates.execute();\n    }\n    this.setState(\"completed\");\n  }\n\n  private async getComponentCandidates(\n    component: number,\n    addresses: string[],\n    timeout = 5,\n    cb?: (candidate: Candidate) => void\n  ) {\n    let candidates: Candidate[] = [];\n\n    await Promise.all(\n      addresses.map(async (address) => {\n        // # create transport\n        const protocol = new StunProtocol(this);\n        try {\n          await protocol.connectionMade(\n            isIPv4(address),\n            this.options.portRange,\n            this.options.interfaceAddresses\n          );\n        } catch (error) {\n          log(\"protocol STUN\", error);\n          return;\n        }\n\n        protocol.localAddress = address;\n        this.protocols.push(protocol);\n\n        // # add host candidate\n        const candidateAddress: Address = [address, protocol.getExtraInfo()[1]];\n\n        protocol.localCandidate = new Candidate(\n          candidateFoundation(\"host\", \"udp\", candidateAddress[0]),\n          component,\n          \"udp\",\n          candidatePriority(component, \"host\"),\n          candidateAddress[0],\n          candidateAddress[1],\n          \"host\"\n        );\n\n        candidates.push(protocol.localCandidate);\n        if (cb) {\n          cb(protocol.localCandidate);\n        }\n      })\n    );\n\n    let candidatePromises: Promise<Candidate | void>[] = [];\n\n    // # query STUN server for server-reflexive candidates (IPv4 only)\n    const { stunServer, turnServer } = this;\n    if (stunServer) {\n      const stunPromises = this.protocols.map((protocol) =>\n        new Promise<Candidate | void>(async (r, f) => {\n          const timer = setTimeout(f, timeout * 1000);\n          if (\n            protocol.localCandidate?.host &&\n            isIPv4(protocol.localCandidate?.host)\n          ) {\n            const candidate = await serverReflexiveCandidate(\n              protocol,\n              stunServer\n            ).catch((error) => log(\"error\", error));\n            if (candidate && cb) cb(candidate);\n\n            clearTimeout(timer);\n            r(candidate);\n          } else {\n            clearTimeout(timer);\n            r();\n          }\n        }).catch((error) => {\n          log(\"query STUN server\", error);\n        })\n      );\n      candidatePromises.push(...stunPromises);\n    }\n\n    const { turnUsername, turnPassword } = this.options;\n    if (turnServer && turnUsername && turnPassword) {\n      const turnCandidate = (async () => {\n        const protocol = await createTurnEndpoint(\n          turnServer,\n          turnUsername,\n          turnPassword,\n          {\n            portRange: this.options.portRange,\n            interfaceAddresses: this.options.interfaceAddresses,\n          }\n        );\n        this.protocols.push(protocol);\n\n        const candidateAddress = protocol.turn.relayedAddress;\n        const relatedAddress = protocol.turn.mappedAddress;\n\n        log(\"turn candidateAddress\", candidateAddress);\n\n        protocol.localCandidate = new Candidate(\n          candidateFoundation(\"relay\", \"udp\", candidateAddress[0]),\n          component,\n          \"udp\",\n          candidatePriority(component, \"relay\"),\n          candidateAddress[0],\n          candidateAddress[1],\n          \"relay\",\n          relatedAddress[0],\n          relatedAddress[1]\n        );\n        if (cb) {\n          cb(protocol.localCandidate);\n        }\n        protocol.receiver = this;\n        return protocol.localCandidate;\n      })().catch((error) => {\n        log(\"query TURN server\", error);\n      });\n\n      if (this.options.forceTurn) {\n        candidates = [];\n        candidatePromises = [];\n      }\n\n      candidatePromises.push(turnCandidate);\n    }\n\n    const extraCandidates = (await Promise.all(candidatePromises)).filter(\n      (v): v is Candidate => typeof v !== \"undefined\"\n    );\n\n    candidates.push(...extraCandidates);\n\n    return candidates;\n  }\n\n  async connect() {\n    // \"\"\"\n    // Perform ICE handshake.\n    //\n    // This coroutine returns if a candidate pair was successfully nominated\n    // and raises an exception otherwise.\n    // \"\"\"\n    log(\"start connect ice\", this.localCandidates);\n    if (!this._localCandidatesEnd) {\n      if (!this.localCandidatesStart)\n        throw new Error(\"Local candidates gathering was not performed\");\n      if (this.promiseGatherCandidates)\n        // wait for GatherCandidates finish\n        await this.promiseGatherCandidates.asPromise();\n    }\n    if (!this.remoteUsername || !this.remotePassword)\n      throw new Error(\"Remote username or password is missing\");\n\n    // # 5.7.1. Forming Candidate Pairs\n    this.remoteCandidates.forEach(this.pairRemoteCandidate);\n    this.sortCheckList();\n\n    this.unfreezeInitial();\n\n    // # handle early checks\n    this.earlyChecks.forEach((earlyCheck) => this.checkIncoming(...earlyCheck));\n    this.earlyChecks = [];\n\n    // # perform checks\n    // 5.8.  Scheduling Checks\n    for (;;) {\n      if (this.state === \"closed\") break;\n      if (!this.schedulingChecks()) break;\n      await timers.setTimeout(20);\n    }\n\n    // # wait for completion\n    let res: number = ICE_FAILED;\n    while (this.checkList.length > 0 && res === ICE_FAILED) {\n      res = await this.checkListState.get();\n    }\n\n    // # cancel remaining checks\n    this.checkList.forEach((check) => check.handle?.cancel());\n\n    if (res !== ICE_COMPLETED) {\n      throw new Error(\"ICE negotiation failed\");\n    }\n\n    // # start consent freshness tests\n    this.queryConsentHandle = future(this.queryConsent());\n\n    this.setState(\"connected\");\n  }\n\n  private unfreezeInitial() {\n    // # unfreeze first pair for the first component\n    const firstPair = this.checkList.find(\n      (pair) => pair.component === Math.min(...[...this._components])\n    );\n    if (!firstPair) return;\n    if (firstPair.state === CandidatePairState.FROZEN) {\n      this.setPairState(firstPair, CandidatePairState.WAITING);\n    }\n\n    // # unfreeze pairs with same component but different foundations\n    const seenFoundations = new Set(firstPair.localCandidate.foundation);\n    for (const pair of this.checkList) {\n      if (\n        pair.component === firstPair.component &&\n        !seenFoundations.has(pair.localCandidate.foundation) &&\n        pair.state === CandidatePairState.FROZEN\n      ) {\n        this.setPairState(pair, CandidatePairState.WAITING);\n        seenFoundations.add(pair.localCandidate.foundation);\n      }\n    }\n  }\n\n  // 5.8 Scheduling Checks\n  private schedulingChecks() {\n    // Ordinary Check\n    {\n      // # find the highest-priority pair that is in the waiting state\n      const pair = this.checkList\n        .filter((pair) => {\n          if (this.options.forceTurn && pair.protocol.type === \"stun\")\n            return false;\n          return true;\n        })\n        .find((pair) => pair.state === CandidatePairState.WAITING);\n      if (pair) {\n        pair.handle = future(this.checkStart(pair));\n        return true;\n      }\n    }\n\n    {\n      // # find the highest-priority pair that is in the frozen state\n      const pair = this.checkList.find(\n        (pair) => pair.state === CandidatePairState.FROZEN\n      );\n      if (pair) {\n        pair.handle = future(this.checkStart(pair));\n        return true;\n      }\n    }\n\n    // # if we expect more candidates, keep going\n    if (!this.remoteCandidatesEnd) {\n      return !this.checkListDone;\n    }\n\n    return false;\n  }\n\n  // 4.1.1.4 ? 生存確認 life check\n  private queryConsent = () =>\n    new PCancelable(async (r, f, onCancel) => {\n      let failures = 0;\n\n      const cancelEvent = new AbortController();\n      onCancel(() => {\n        failures += CONSENT_FAILURES;\n        cancelEvent.abort();\n        f(\"cancel\");\n      });\n\n      // \"\"\"\n      // Periodically check consent (RFC 7675).\n      // \"\"\"\n\n      try {\n        while (!this.remoteIsLite && this.state !== \"closed\") {\n          // # randomize between 0.8 and 1.2 times CONSENT_INTERVAL\n          await timers.setTimeout(\n            CONSENT_INTERVAL * (0.8 + 0.4 * Math.random()) * 1000,\n            undefined,\n            { signal: cancelEvent.signal }\n          );\n\n          for (const key of this.nominatedKeys) {\n            const pair = this.nominated[Number(key)];\n            const request = this.buildRequest(pair, false);\n            try {\n              const [msg, addr] = await pair.protocol.request(\n                request,\n                pair.remoteAddr,\n                Buffer.from(this.remotePassword, \"utf8\"),\n                0\n              );\n              failures = 0;\n              if (this.state === \"disconnected\") {\n                this.setState(\"connected\");\n              }\n            } catch (error) {\n              log(\"no stun response\");\n              failures++;\n              this.setState(\"disconnected\");\n            }\n            if (failures >= CONSENT_FAILURES) {\n              log(\"Consent to send expired\");\n              this.queryConsentHandle = undefined;\n              // 切断検知\n              r(await this.close());\n              return;\n            }\n          }\n        }\n      } catch (error) {}\n    });\n\n  async close() {\n    // \"\"\"\n    // Close the connection.\n    // \"\"\"\n\n    this.setState(\"closed\");\n\n    // # stop consent freshness tests\n    if (this.queryConsentHandle && !this.queryConsentHandle.done()) {\n      this.queryConsentHandle.cancel();\n      try {\n        await this.queryConsentHandle.promise;\n      } catch (error) {\n        // pass\n      }\n    }\n\n    // # stop check list\n    if (this.checkList && !this.checkListDone) {\n      this.checkListState.put(\n        new Promise((r) => {\n          r(ICE_FAILED);\n        })\n      );\n    }\n\n    this.nominated = {};\n    for (const protocol of this.protocols) {\n      if (protocol.close) {\n        await protocol.close();\n      }\n    }\n\n    this.protocols = [];\n    this.localCandidates = [];\n\n    await this.dnsLookup?.close();\n  }\n\n  private setState(state: IceState) {\n    this.state = state;\n    this.stateChanged.execute(state);\n  }\n\n  async addRemoteCandidate(remoteCandidate: Candidate | undefined) {\n    // \"\"\"\n    // Add a remote candidate or signal end-of-candidates.\n\n    // To signal end-of-candidates, pass `None`.\n\n    // :param remote_candidate: A :class:`Candidate` instance or `None`.\n    // \"\"\"\n\n    if (!remoteCandidate) {\n      this.pruneComponents();\n      this.remoteCandidatesEnd = true;\n      return;\n    }\n\n    if (remoteCandidate.host.includes(\".local\")) {\n      try {\n        if (this.state === \"closed\") return;\n        if (!this.dnsLookup) {\n          this.dnsLookup = new DnsLookup();\n        }\n        const host = await this.dnsLookup.lookup(remoteCandidate.host);\n        remoteCandidate.host = host;\n      } catch (error) {\n        return;\n      }\n    }\n\n    try {\n      validateRemoteCandidate(remoteCandidate);\n    } catch (error) {\n      return;\n    }\n\n    log(\"addRemoteCandidate\", remoteCandidate);\n    this.remoteCandidates.push(remoteCandidate);\n\n    this.pairRemoteCandidate(remoteCandidate);\n    this.sortCheckList();\n  }\n\n  send = async (data: Buffer) => {\n    // \"\"\"\n    // Send a datagram on the first component.\n\n    // If the connection is not established, a `ConnectionError` is raised.\n\n    // :param data: The data to be sent.\n    // \"\"\"\n    await this.sendTo(data, 1);\n  };\n\n  private async sendTo(data: Buffer, component: number) {\n    // \"\"\"\n    // Send a datagram on the specified component.\n\n    // If the connection is not established, a `ConnectionError` is raised.\n\n    // :param data: The data to be sent.\n    // :param component: The component on which to send the data.\n    // \"\"\"\n    const activePair = this.nominated[component];\n    if (activePair) {\n      await activePair.protocol.sendData(data, activePair.remoteAddr);\n    } else {\n      // log(\"Cannot send data, ice not connected\");\n      return;\n    }\n  }\n\n  getDefaultCandidate(component: number) {\n    const candidates = this.localCandidates.sort(\n      (a, b) => a.priority - b.priority\n    );\n    const candidate = candidates.find(\n      (candidate) => candidate.component === component\n    );\n    return candidate;\n  }\n\n  requestReceived(\n    message: Message,\n    addr: Address,\n    protocol: Protocol,\n    rawData: Buffer\n  ) {\n    if (message.messageMethod !== methods.BINDING) {\n      this.respondError(message, addr, protocol, [400, \"Bad Request\"]);\n      return;\n    }\n\n    // # authenticate request\n    try {\n      parseMessage(rawData, Buffer.from(this.localPassword, \"utf8\"));\n      if (!this.remoteUsername) {\n        const rxUsername = `${this.localUserName}:${this.remoteUsername}`;\n        if (message.getAttributeValue(\"USERNAME\") != rxUsername) {\n          throw new Error(\"Wrong username\");\n        }\n      }\n    } catch (error) {\n      this.respondError(message, addr, protocol, [400, \"Bad Request\"]);\n      return;\n    }\n\n    const { iceControlling } = this;\n\n    // 7.2.1.1.  Detecting and Repairing Role Conflicts\n    if (iceControlling && message.attributesKeys.includes(\"ICE-CONTROLLING\")) {\n      if (this._tieBreaker >= message.getAttributeValue(\"ICE-CONTROLLING\")) {\n        this.respondError(message, addr, protocol, [487, \"Role Conflict\"]);\n        return;\n      } else {\n        this.switchRole(false);\n      }\n    } else if (\n      !iceControlling &&\n      message.attributesKeys.includes(\"ICE-CONTROLLED\")\n    ) {\n      if (this._tieBreaker < message.getAttributeValue(\"ICE-CONTROLLED\")) {\n        this.respondError(message, addr, protocol, [487, \"Role Conflict\"]);\n      } else {\n        this.switchRole(true);\n        return;\n      }\n    }\n\n    if (\n      this.options.filterStunResponse &&\n      !this.options.filterStunResponse(message, addr, protocol)\n    ) {\n      return;\n    }\n\n    // # send binding response\n    const response = new Message(\n      methods.BINDING,\n      classes.RESPONSE,\n      message.transactionId\n    );\n    response\n      .setAttribute(\"XOR-MAPPED-ADDRESS\", addr)\n      .addMessageIntegrity(Buffer.from(this.localPassword, \"utf8\"))\n      .addFingerprint();\n    protocol.sendStun(response, addr);\n\n    // todo fix\n    // if (this.checkList.length === 0) {\n    //   this.earlyChecks.push([message, addr, protocol]);\n    // } else {\n    this.checkIncoming(message, addr, protocol);\n    // }\n  }\n\n  dataReceived(data: Buffer, component: number) {\n    try {\n      this.onData.execute(data, component);\n    } catch (error) {\n      log(\"dataReceived\", error);\n    }\n  }\n\n  // for test only\n  set remoteCandidates(value: Candidate[]) {\n    if (this.remoteCandidatesEnd)\n      throw new Error(\"Cannot set remote candidates after end-of-candidates.\");\n    this._remoteCandidates = [];\n    for (const remoteCandidate of value) {\n      try {\n        validateRemoteCandidate(remoteCandidate);\n      } catch (error) {\n        continue;\n      }\n      this.remoteCandidates.push(remoteCandidate);\n    }\n    this.pruneComponents();\n    this.remoteCandidatesEnd = true;\n  }\n  get remoteCandidates() {\n    return this._remoteCandidates;\n  }\n\n  private pruneComponents() {\n    const seenComponents = new Set(\n      this.remoteCandidates.map((v) => v.component)\n    );\n    const missingComponents = [...difference(this._components, seenComponents)];\n    if (missingComponents.length > 0) {\n      this._components = seenComponents;\n    }\n  }\n\n  private sortCheckList() {\n    sortCandidatePairs(this.checkList, this.iceControlling);\n  }\n\n  private findPair(protocol: Protocol, remoteCandidate: Candidate) {\n    const pair = this.checkList.find(\n      (pair) =>\n        isEqual(pair.protocol, protocol) &&\n        isEqual(pair.remoteCandidate, remoteCandidate)\n    );\n    return pair;\n  }\n\n  private setPairState(pair: CandidatePair, state: CandidatePairState) {\n    log(\"setPairState\", pair.toJSON(), CandidatePairState[state]);\n    pair.updateState(state);\n  }\n\n  private switchRole(iceControlling: boolean) {\n    log(\"switch role\", iceControlling);\n    this.iceControlling = iceControlling;\n    this.sortCheckList();\n  }\n\n  resetNominatedPair() {\n    log(\"resetNominatedPair\");\n    this.nominated = {};\n    this.nominating.clear();\n  }\n\n  private checkComplete(pair: CandidatePair) {\n    pair.handle = undefined;\n    if (pair.state === CandidatePairState.SUCCEEDED) {\n      // Updating the Nominated Flag\n\n      // https://www.rfc-editor.org/rfc/rfc8445#section-7.3.1.5,\n      // Once the nominated flag is set for a component of a data stream, it\n      // concludes the ICE processing for that component.  See Section 8.\n      // So disallow overwriting of the pair nominated for that component\n      if (pair.nominated && this.nominated[pair.component] == undefined) {\n        log(\"nominated\", pair.toJSON());\n        this.nominated[pair.component] = pair;\n        this.nominating.delete(pair.component);\n\n        // 8.1.2.  Updating States\n\n        // The agent MUST remove all Waiting and Frozen pairs in the check\n        // list and triggered check queue for the same component as the\n        // nominated pairs for that media stream.\n        for (const p of this.checkList) {\n          if (\n            p.component === pair.component &&\n            [CandidatePairState.WAITING, CandidatePairState.FROZEN].includes(\n              p.state\n            )\n          ) {\n            this.setPairState(p, CandidatePairState.FAILED);\n          }\n        }\n      }\n\n      // Once there is at least one nominated pair in the valid list for\n      // every component of at least one media stream and the state of the\n      // check list is Running:\n      if (this.nominatedKeys.length === this._components.size) {\n        if (!this.checkListDone) {\n          log(\"ICE completed\");\n          this.checkListState.put(new Promise((r) => r(ICE_COMPLETED)));\n          this.checkListDone = true;\n        }\n        return;\n      }\n\n      // 7.1.3.2.3.  Updating Pair States\n      for (const p of this.checkList) {\n        if (\n          p.localCandidate.foundation === pair.localCandidate.foundation &&\n          p.state === CandidatePairState.FROZEN\n        ) {\n          this.setPairState(p, CandidatePairState.WAITING);\n        }\n      }\n    }\n\n    {\n      const list = [CandidatePairState.SUCCEEDED, CandidatePairState.FAILED];\n      if (this.checkList.find(({ state }) => !list.includes(state))) {\n        return;\n      }\n    }\n\n    if (!this.iceControlling) {\n      const target = CandidatePairState.SUCCEEDED;\n      if (this.checkList.find(({ state }) => state === target)) {\n        return;\n      }\n    }\n\n    if (!this.checkListDone) {\n      log(\"ICE failed\");\n      this.checkListState.put(\n        new Promise((r) => {\n          r(ICE_FAILED);\n        })\n      );\n    }\n  }\n\n  // 3.  Terminology : Check\n  checkStart = (pair: CandidatePair) =>\n    new PCancelable(async (r, f, onCancel) => {\n      onCancel(() => f(\"cancel\"));\n\n      // \"\"\"\n      // Starts a check.\n      // \"\"\"\n\n      log(\"check start\", pair.toJSON());\n\n      this.setPairState(pair, CandidatePairState.IN_PROGRESS);\n\n      const nominate = this.iceControlling && !this.remoteIsLite;\n      const request = this.buildRequest(pair, nominate);\n\n      const result: { response?: Message; addr?: Address } = {};\n      try {\n        const [response, addr] = await pair.protocol.request(\n          request,\n          pair.remoteAddr,\n          Buffer.from(this.remotePassword, \"utf8\"),\n          4\n        );\n        log(\"response\", response, addr);\n        result.response = response;\n        result.addr = addr;\n      } catch (error: any) {\n        const exc: TransactionError = error;\n        // 7.1.3.1.  Failure Cases\n        log(\"failure case\", exc.response);\n        if (exc.response?.getAttributeValue(\"ERROR-CODE\")[0] === 487) {\n          if (request.attributesKeys.includes(\"ICE-CONTROLLED\")) {\n            this.switchRole(true);\n          } else if (request.attributesKeys.includes(\"ICE-CONTROLLING\")) {\n            this.switchRole(false);\n          }\n          await this.checkStart(pair);\n          r();\n          return;\n        } else {\n          // timeout\n          log(\"CandidatePairState.FAILED\", pair.toJSON());\n          this.setPairState(pair, CandidatePairState.FAILED);\n          this.checkComplete(pair);\n          r();\n          return;\n        }\n      }\n\n      // # check remote address matches\n      if (!isEqual(result.addr, pair.remoteAddr)) {\n        this.setPairState(pair, CandidatePairState.FAILED);\n        this.checkComplete(pair);\n        r();\n        return;\n      }\n\n      // # success\n      if (nominate || pair.remoteNominated) {\n        // # nominated by agressive nomination or the remote party\n        pair.nominated = true;\n      } else if (this.iceControlling && !this.nominating.has(pair.component)) {\n        // # perform regular nomination\n        this.nominating.add(pair.component);\n        const request = this.buildRequest(pair, true);\n        try {\n          await pair.protocol.request(\n            request,\n            pair.remoteAddr,\n            Buffer.from(this.remotePassword, \"utf8\")\n          );\n        } catch (error) {\n          this.setPairState(pair, CandidatePairState.FAILED);\n          this.checkComplete(pair);\n          return;\n        }\n        pair.nominated = true;\n      }\n\n      this.setPairState(pair, CandidatePairState.SUCCEEDED);\n      this.checkComplete(pair);\n      r();\n    });\n\n  // 7.2.  STUN Server Procedures\n  // 7.2.1.3、7.2.1.4、および7.2.1.5\n  checkIncoming(message: Message, addr: Address, protocol: Protocol) {\n    // log(\"checkIncoming\", message.toJSON(), addr);\n    // \"\"\"\n    // Handle a successful incoming check.\n    // \"\"\"\n    const component = protocol.localCandidate?.component;\n    if (component == undefined) {\n      throw new Error(\"component not exist\");\n    }\n\n    // find remote candidate\n    let remoteCandidate: Candidate | undefined;\n    const [host, port] = addr;\n    for (const c of this.remoteCandidates) {\n      if (c.host === host && c.port === port) {\n        remoteCandidate = c;\n        if (remoteCandidate.component !== component) {\n          throw new Error(\"checkIncoming\");\n        }\n        break;\n      }\n    }\n    if (!remoteCandidate) {\n      // 7.2.1.3.  Learning Peer Reflexive Candidates\n      remoteCandidate = new Candidate(\n        randomString(10),\n        component,\n        \"udp\",\n        message.getAttributeValue(\"PRIORITY\"),\n        host,\n        port,\n        \"prflx\"\n      );\n      this.remoteCandidates.push(remoteCandidate);\n    }\n\n    // find pair\n    let pair = this.findPair(protocol, remoteCandidate);\n    if (!pair) {\n      pair = new CandidatePair(protocol, remoteCandidate);\n      this.setPairState(pair, CandidatePairState.WAITING);\n      this.checkList.push(pair);\n      this.sortCheckList();\n    }\n\n    // 7.2.1.4.  Triggered Checks\n    if (\n      [CandidatePairState.WAITING, CandidatePairState.FAILED].includes(\n        pair.state\n      )\n    ) {\n      pair.handle = future(this.checkStart(pair));\n    } else {\n      pair;\n    }\n\n    // 7.2.1.5. Updating the Nominated Flag\n    if (\n      message.attributesKeys.includes(\"USE-CANDIDATE\") &&\n      !this.iceControlling\n    ) {\n      pair.remoteNominated = true;\n      if (pair.state === CandidatePairState.SUCCEEDED) {\n        pair.nominated = true;\n        this.checkComplete(pair);\n      }\n    }\n  }\n\n  private pairRemoteCandidate = (remoteCandidate: Candidate) => {\n    for (const protocol of this.protocols) {\n      if (\n        protocol.localCandidate?.canPairWith(remoteCandidate) &&\n        !this.findPair(protocol, remoteCandidate)\n      ) {\n        const pair = new CandidatePair(protocol, remoteCandidate);\n        this.checkList.push(pair);\n        this.setPairState(pair, CandidatePairState.WAITING);\n      }\n    }\n  };\n\n  private buildRequest(pair: CandidatePair, nominate: boolean) {\n    const txUsername = `${this.remoteUsername}:${this.localUserName}`;\n    const request = new Message(methods.BINDING, classes.REQUEST);\n    request\n      .setAttribute(\"USERNAME\", txUsername)\n      .setAttribute(\"PRIORITY\", candidatePriority(pair.component, \"prflx\"));\n    if (this.iceControlling) {\n      request.setAttribute(\"ICE-CONTROLLING\", this._tieBreaker);\n      if (nominate) {\n        request.setAttribute(\"USE-CANDIDATE\", null);\n      }\n    } else {\n      request.setAttribute(\"ICE-CONTROLLED\", this._tieBreaker);\n    }\n    return request;\n  }\n\n  private respondError(\n    request: Message,\n    addr: Address,\n    protocol: Protocol,\n    errorCode: [number, string]\n  ) {\n    const response = new Message(\n      request.messageMethod,\n      classes.ERROR,\n      request.transactionId\n    );\n    response\n      .setAttribute(\"ERROR-CODE\", errorCode)\n      .addMessageIntegrity(Buffer.from(this.localPassword, \"utf8\"))\n      .addFingerprint();\n    protocol.sendStun(response, addr);\n  }\n}\n\nexport class CandidatePair {\n  handle?: Future;\n  nominated = false;\n  remoteNominated = false;\n  // 5.7.4.  Computing States\n  private _state = CandidatePairState.FROZEN;\n  get state() {\n    return this._state;\n  }\n\n  toJSON() {\n    return {\n      protocol: this.protocol.type,\n      remoteAddr: this.remoteAddr,\n    };\n  }\n\n  constructor(public protocol: Protocol, public remoteCandidate: Candidate) {}\n\n  updateState(state: CandidatePairState) {\n    this._state = state;\n  }\n\n  get localCandidate() {\n    if (!this.protocol.localCandidate)\n      throw new Error(\"localCandidate not exist\");\n    return this.protocol.localCandidate;\n  }\n\n  get remoteAddr(): Address {\n    return [this.remoteCandidate.host, this.remoteCandidate.port];\n  }\n\n  get component() {\n    return this.localCandidate.component;\n  }\n}\n\nconst ICE_COMPLETED = 1 as const;\nconst ICE_FAILED = 2 as const;\n\nconst CONSENT_INTERVAL = 5;\nconst CONSENT_FAILURES = 6;\n\nexport enum CandidatePairState {\n  FROZEN = 0,\n  WAITING = 1,\n  IN_PROGRESS = 2,\n  SUCCEEDED = 3,\n  FAILED = 4,\n}\n\ntype IceState = \"disconnected\" | \"closed\" | \"completed\" | \"new\" | \"connected\";\n\nexport interface IceOptions {\n  components: number;\n  stunServer?: Address;\n  turnServer?: Address;\n  turnUsername?: string;\n  turnPassword?: string;\n  turnSsl?: boolean;\n  turnTransport?: string;\n  forceTurn?: boolean;\n  useIpv4: boolean;\n  useIpv6: boolean;\n  portRange?: [number, number];\n  interfaceAddresses?: InterfaceAddresses;\n  additionalHostAddresses?: string[];\n  filterStunResponse?: (\n    message: Message,\n    addr: Address,\n    protocol: Protocol\n  ) => boolean;\n}\n\nconst defaultOptions: IceOptions = {\n  components: 1,\n  useIpv4: true,\n  useIpv6: true,\n};\n\nexport function validateRemoteCandidate(candidate: Candidate) {\n  // \"\"\"\n  // Check the remote candidate is supported.\n  // \"\"\"\n  if (![\"host\", \"relay\", \"srflx\"].includes(candidate.type))\n    throw new Error(`Unexpected candidate type \"${candidate.type}\"`);\n\n  // ipaddress.ip_address(candidate.host)\n  return candidate;\n}\n\nexport function sortCandidatePairs(\n  pairs: CandidatePair[],\n  iceControlling: boolean\n) {\n  pairs.sort(\n    (a, b) =>\n      candidatePairPriority(\n        a.localCandidate,\n        a.remoteCandidate,\n        iceControlling\n      ) -\n      candidatePairPriority(b.localCandidate, b.remoteCandidate, iceControlling)\n  );\n}\n\n// 5.7.2.  Computing Pair Priority and Ordering Pairs\nexport function candidatePairPriority(\n  local: Candidate,\n  remote: Candidate,\n  iceControlling: boolean\n) {\n  const G = (iceControlling && local.priority) || remote.priority;\n  const D = (iceControlling && remote.priority) || local.priority;\n  return (1 << 32) * Math.min(G, D) + 2 * Math.max(G, D) + (G > D ? 1 : 0);\n}\n\nfunction isAutoconfigurationAddress(info: os.NetworkInterfaceInfo) {\n  return (\n    normalizeFamilyNodeV18(info.family) === 4 &&\n    info.address?.startsWith(\"169.254.\")\n  );\n}\n\nfunction nodeIpAddress(family: number): string[] {\n  // https://chromium.googlesource.com/external/webrtc/+/master/rtc_base/network.cc#236\n  const costlyNetworks = [\"ipsec\", \"tun\", \"utun\", \"tap\"];\n  const banNetworks = [\"vmnet\", \"veth\"];\n\n  const interfaces = os.networkInterfaces();\n\n  const all = Object.keys(interfaces)\n    .map((nic) => {\n      for (const word of [...costlyNetworks, ...banNetworks]) {\n        if (nic.startsWith(word)) {\n          return {\n            nic,\n            addresses: [],\n          };\n        }\n      }\n      const addresses = interfaces[nic]!.filter(\n        (details) =>\n          normalizeFamilyNodeV18(details.family) === family &&\n          !nodeIp.isLoopback(details.address) &&\n          !isAutoconfigurationAddress(details)\n      );\n      return {\n        nic,\n        addresses: addresses.map((address) => address.address),\n      };\n    })\n    .filter((address) => !!address);\n\n  // os.networkInterfaces doesn't actually return addresses in a good order.\n  // have seen instances where en0 (ethernet) is after en1 (wlan), etc.\n  // eth0 > eth1\n  all.sort((a, b) => a.nic.localeCompare(b.nic));\n  return Object.values(all)\n    .map((entry) => entry.addresses)\n    .flat();\n}\n\nexport function getHostAddresses(useIpv4: boolean, useIpv6: boolean) {\n  const address: string[] = [];\n  if (useIpv4) address.push(...nodeIpAddress(4));\n  if (useIpv6) address.push(...nodeIpAddress(6));\n  return address;\n}\n\nexport async function serverReflexiveCandidate(\n  protocol: Protocol,\n  stunServer: Address\n) {\n  // \"\"\"\n  // Query STUN server to obtain a server-reflexive candidate.\n  // \"\"\"\n\n  // # perform STUN query\n  const request = new Message(methods.BINDING, classes.REQUEST);\n  try {\n    const [response] = await protocol.request(request, stunServer);\n\n    const localCandidate = protocol.localCandidate;\n    if (!localCandidate) throw new Error(\"not exist\");\n\n    return new Candidate(\n      candidateFoundation(\"srflx\", \"udp\", localCandidate.host),\n      localCandidate.component,\n      localCandidate.transport,\n      candidatePriority(localCandidate.component, \"srflx\"),\n      response.getAttributeValue(\"XOR-MAPPED-ADDRESS\")[0],\n      response.getAttributeValue(\"XOR-MAPPED-ADDRESS\")[1],\n      \"srflx\",\n      localCandidate.host,\n      localCandidate.port\n    );\n  } catch (error) {\n    // todo fix\n    log(\"error serverReflexiveCandidate\", error);\n  }\n}\n\nexport function validateAddress(addr?: Address): Address | undefined {\n  if (addr && isNaN(addr[1])) {\n    return [addr[0], 443];\n  }\n  return addr;\n}\n","export { Candidate } from \"./candidate\";\nexport { Connection, IceOptions } from \"./ice\";\nexport { Address } from \"./types/model\";\nexport * from \"./utils\";\n","import { Int64BE } from \"int64-buffer\";\nimport * as nodeIp from \"ip\";\nimport { jspack } from \"jspack\";\nimport range from \"lodash/range\";\n\nimport { Address } from \"../types/model\";\nimport { AttributeKeys, COOKIE, IPV4_PROTOCOL, IPV6_PROTOCOL } from \"./const\";\n\nfunction packAddress(value: Address) {\n  const [address] = value;\n\n  const protocol = nodeIp.isV4Format(address) ? IPV4_PROTOCOL : IPV6_PROTOCOL;\n\n  return Buffer.concat([\n    Buffer.from(jspack.Pack(\"!BBH\", [0, protocol, value[1]])),\n    nodeIp.toBuffer(address),\n  ]);\n}\n\nexport function unpackErrorCode(data: Buffer): [number, string] {\n  if (data.length < 4) throw new Error(\"STUN error code is less than 4 bytes\");\n  const [, codeHigh, codeLow] = jspack.Unpack(\"!HBB\", data.slice(0, 4));\n  const reason = data.slice(4).toString(\"utf8\");\n  return [codeHigh * 100 + codeLow, reason];\n}\n\nfunction unpackAddress(data: Buffer): Address {\n  if (data.length < 4)\n    throw new Error(\"STUN address length is less than 4 bytes\");\n  const [, protocol, port] = jspack.Unpack(\"!BBH\", data.slice(0, 4));\n  const address = data.slice(4);\n  switch (protocol) {\n    case IPV4_PROTOCOL:\n      if (address.length != 4)\n        throw new Error(`STUN address has invalid length for IPv4`);\n      return [nodeIp.toString(address), port];\n    case IPV6_PROTOCOL:\n      if (address.length != 16)\n        throw new Error(\"STUN address has invalid length for IPv6\");\n      return [nodeIp.toString(address), port];\n    default:\n      throw new Error(\"STUN address has unknown protocol\");\n  }\n}\n\nfunction xorAddress(data: Buffer, transactionId: Buffer) {\n  const xPad = [\n    ...jspack.Pack(\"!HI\", [COOKIE >> 16, COOKIE]),\n    ...transactionId,\n  ];\n  let xData = data.slice(0, 2);\n\n  for (const i of range(2, data.length)) {\n    const num = data[i] ^ xPad[i - 2];\n    const buf = Buffer.alloc(1);\n    buf.writeUIntBE(num, 0, 1);\n    xData = Buffer.concat([xData, buf]);\n  }\n  return xData;\n}\n\nexport function unpackXorAddress(data: Buffer, transactionId: Buffer): Address {\n  return unpackAddress(xorAddress(data, transactionId));\n}\n\nexport function packErrorCode(value: [number, string]) {\n  const pack = Buffer.from(\n    jspack.Pack(\"!HBB\", [0, Math.floor(value[0] / 100), value[0] % 100])\n  );\n  const encode = Buffer.from(value[1], \"utf8\");\n  return Buffer.concat([pack, encode]);\n}\n\nexport function packXorAddress(value: Address, transactionId: Buffer) {\n  return xorAddress(packAddress(value), transactionId);\n}\n\nconst packUnsigned = (value: number) => Buffer.from(jspack.Pack(\"!I\", [value]));\nconst unpackUnsigned = (data: Buffer) => jspack.Unpack(\"!I\", data)[0];\n\nconst packUnsignedShort = (value: number) =>\n  Buffer.concat([\n    Buffer.from(jspack.Pack(\"!H\", [value])),\n    Buffer.from(\"\\x00\\x00\"),\n  ]);\nconst unpackUnsignedShort = (data: Buffer) =>\n  jspack.Unpack(\"!H\", data.slice(0, 2))[0];\n\nconst packUnsigned64 = (value: BigInt) => {\n  return new Int64BE(value.toString()).toBuffer();\n};\nconst unpackUnsigned64 = (data: Buffer) => {\n  const int = new Int64BE(data);\n  return BigInt(int.toString());\n};\n\nconst packString = (value: string) => Buffer.from(value, \"utf8\");\nconst unpackString = (data: Buffer) => data.toString(\"utf8\");\n\nconst packBytes = (value: Buffer) => value;\nconst unpackBytes = (data: Buffer) => data;\n\nconst packNone = (value: Buffer) => Buffer.from([]);\nconst unpackNone = (data: Buffer) => null;\n\nexport type ATTRIBUTE = [\n  number,\n  AttributeKey,\n  (...args: any) => Buffer,\n  (...args: any) => any\n];\n\nconst ATTRIBUTES: ATTRIBUTE[] = [\n  [0x0001, \"MAPPED-ADDRESS\", packAddress, unpackAddress],\n  [0x0003, \"CHANGE-REQUEST\", packUnsigned, unpackUnsigned],\n  [0x0004, \"SOURCE-ADDRESS\", packAddress, unpackAddress],\n  [0x0005, \"CHANGED-ADDRESS\", packAddress, unpackAddress],\n  [0x0006, \"USERNAME\", packString, unpackString],\n  [0x0008, \"MESSAGE-INTEGRITY\", packBytes, unpackBytes],\n  [0x0009, \"ERROR-CODE\", packErrorCode, unpackErrorCode],\n  [0x000c, \"CHANNEL-NUMBER\", packUnsignedShort, unpackUnsignedShort],\n  [0x000d, \"LIFETIME\", packUnsigned, unpackUnsigned],\n  [0x0012, \"XOR-PEER-ADDRESS\", packXorAddress, unpackXorAddress],\n  [0x0013, \"DATA\", packBytes, unpackBytes],\n  [0x0014, \"REALM\", packString, unpackString],\n  [0x0015, \"NONCE\", packBytes, unpackBytes],\n  [0x0016, \"XOR-RELAYED-ADDRESS\", packXorAddress, unpackXorAddress],\n  [0x0019, \"REQUESTED-TRANSPORT\", packUnsigned, unpackUnsigned],\n  [0x0020, \"XOR-MAPPED-ADDRESS\", packXorAddress, unpackXorAddress],\n  [0x0024, \"PRIORITY\", packUnsigned, unpackUnsigned],\n  [0x0025, \"USE-CANDIDATE\", packNone, unpackNone],\n  [0x8022, \"SOFTWARE\", packString, unpackString],\n  [0x8028, \"FINGERPRINT\", packUnsigned, unpackUnsigned],\n  [0x8029, \"ICE-CONTROLLED\", packUnsigned64, unpackUnsigned64],\n  [0x802a, \"ICE-CONTROLLING\", packUnsigned64, unpackUnsigned64],\n  [0x802b, \"RESPONSE-ORIGIN\", packAddress, unpackAddress],\n  [0x802c, \"OTHER-ADDRESS\", packAddress, unpackAddress],\n];\n\nexport class AttributeRepository {\n  constructor(protected attributes: AttributePair[] = []) {}\n\n  getAttributes() {\n    return this.attributes;\n  }\n\n  setAttribute(key: typeof AttributeKeys[number], value: any) {\n    const exist = this.attributes.find((a) => a[0] === key);\n    if (exist) {\n      exist[1] = value;\n    } else {\n      this.attributes.push([key, value]);\n    }\n    return this;\n  }\n\n  getAttributeValue(key: AttributeKey) {\n    const attribute = this.attributes.find((a) => a[0] === key);\n    if (!attribute) {\n      return undefined;\n    }\n    return attribute[1];\n  }\n\n  get attributesKeys(): typeof AttributeKeys[number][] {\n    return this.attributes.map((a) => a[0]);\n  }\n\n  clear() {\n    this.attributes = [];\n  }\n}\n\nexport type AttributeKey = typeof AttributeKeys[number];\n\nexport type AttributePair = [AttributeKey, any];\n\nexport const ATTRIBUTES_BY_TYPE = ATTRIBUTES.reduce((acc, cur) => {\n  acc[cur[0]] = cur;\n  return acc;\n}, {} as { [key: string]: ATTRIBUTE });\n\nexport const ATTRIBUTES_BY_NAME = ATTRIBUTES.reduce((acc, cur) => {\n  acc[cur[1]] = cur;\n  return acc;\n}, {} as { [key: string]: ATTRIBUTE });\n","export const COOKIE = 0x2112a442;\nexport const FINGERPRINT_LENGTH = 8;\nexport const FINGERPRINT_XOR = 0x5354554e;\nexport const HEADER_LENGTH = 20;\nexport const INTEGRITY_LENGTH = 24;\nexport const IPV4_PROTOCOL = 1;\nexport const IPV6_PROTOCOL = 2;\n\nexport const RETRY_MAX = 6;\nexport const RETRY_RTO = 50;\n\nexport const AttributeKeys = [\n  \"FINGERPRINT\",\n  \"MESSAGE-INTEGRITY\",\n  \"CHANGE-REQUEST\",\n  \"PRIORITY\",\n  \"USERNAME\",\n  \"ICE-CONTROLLING\",\n  \"SOURCE-ADDRESS\",\n  \"USE-CANDIDATE\",\n  \"ICE-CONTROLLED\",\n  \"ERROR-CODE\",\n  \"XOR-MAPPED-ADDRESS\",\n  \"CHANGED-ADDRESS\",\n  \"LIFETIME\",\n  \"REQUESTED-TRANSPORT\",\n  \"NONCE\",\n  \"REALM\",\n  \"XOR-RELAYED-ADDRESS\",\n  \"CHANNEL-NUMBER\",\n  \"XOR-PEER-ADDRESS\",\n  \"DATA\",\n  \"SOFTWARE\",\n  \"MAPPED-ADDRESS\",\n  \"RESPONSE-ORIGIN\",\n  \"OTHER-ADDRESS\",\n] as const;\n\nexport enum classes {\n  REQUEST = 0x000,\n  INDICATION = 0x010,\n  RESPONSE = 0x100, // 256\n  ERROR = 0x110, // 272\n}\n\nexport enum methods {\n  BINDING = 0x1,\n  SHARED_SECRET = 0x2,\n  ALLOCATE = 0x3,\n  REFRESH = 0x4,\n  SEND = 0x6,\n  DATA = 0x7,\n  CREATE_PERMISSION = 0x8,\n  CHANNEL_BIND = 0x9,\n}\n","import crc32 from \"buffer-crc32\";\nimport { createHmac } from \"crypto\";\nimport { jspack } from \"jspack\";\n\nimport { bufferXor, randomTransactionId } from \"../helper\";\nimport {\n  AttributeKey,\n  AttributePair,\n  AttributeRepository,\n  ATTRIBUTES_BY_NAME,\n  ATTRIBUTES_BY_TYPE,\n  packXorAddress,\n  unpackXorAddress,\n} from \"./attributes\";\nimport {\n  classes,\n  COOKIE,\n  FINGERPRINT_LENGTH,\n  FINGERPRINT_XOR,\n  HEADER_LENGTH,\n  INTEGRITY_LENGTH,\n  methods,\n} from \"./const\";\n\nexport function parseMessage(\n  data: Buffer,\n  integrityKey?: Buffer\n): Message | undefined {\n  if (data.length < HEADER_LENGTH) {\n    return undefined;\n  }\n  const [messageType, length] = jspack.Unpack(\n    \"!HHI\",\n    data.slice(0, HEADER_LENGTH)\n  );\n\n  const transactionId = Buffer.from(\n    data.slice(HEADER_LENGTH - 12, HEADER_LENGTH)\n  );\n\n  if (data.length !== HEADER_LENGTH + length) {\n    return undefined;\n  }\n\n  const attributeRepository = new AttributeRepository();\n\n  for (let pos = HEADER_LENGTH; pos <= data.length - 4; ) {\n    const [attrType, attrLen] = jspack.Unpack(\"!HH\", data.slice(pos, pos + 4));\n    const payload = data.slice(pos + 4, pos + 4 + attrLen);\n    const padLen = 4 * Math.floor((attrLen + 3) / 4) - attrLen;\n    const attributesTypes = Object.keys(ATTRIBUTES_BY_TYPE);\n    if (attributesTypes.includes(attrType.toString())) {\n      const [, attrName, , attrUnpack] = ATTRIBUTES_BY_TYPE[attrType];\n      if (attrUnpack.name === unpackXorAddress.name) {\n        attributeRepository.setAttribute(\n          attrName as AttributeKey,\n          attrUnpack(payload, transactionId)\n        );\n      } else {\n        attributeRepository.setAttribute(\n          attrName as AttributeKey,\n          attrUnpack(payload)\n        );\n      }\n\n      if (attrName === \"FINGERPRINT\") {\n        const fingerprint = messageFingerprint(data.slice(0, pos));\n        const expect = attributeRepository.getAttributeValue(\"FINGERPRINT\");\n        if (expect !== fingerprint) {\n          return undefined;\n        }\n      } else if (attrName === \"MESSAGE-INTEGRITY\") {\n        if (integrityKey) {\n          const integrity = messageIntegrity(data.slice(0, pos), integrityKey);\n          const expect =\n            attributeRepository.getAttributeValue(\"MESSAGE-INTEGRITY\");\n          if (!integrity.equals(expect)) {\n            return undefined;\n          }\n        }\n      }\n    }\n    pos += 4 + attrLen + padLen;\n  }\n\n  const attributes = attributeRepository.getAttributes();\n  attributeRepository.clear();\n\n  return new Message(\n    messageType & 0x3eef,\n    messageType & 0x0110,\n    transactionId,\n    attributes\n  );\n}\n\nexport class Message extends AttributeRepository {\n  constructor(\n    public messageMethod: methods,\n    public messageClass: classes,\n    public transactionId: Buffer = randomTransactionId(),\n    attributes: AttributePair[] = []\n  ) {\n    super(attributes);\n  }\n\n  toJSON() {\n    return {\n      messageMethod: methods[this.messageMethod],\n      messageClass: classes[this.messageClass],\n    };\n  }\n\n  get transactionIdHex() {\n    return this.transactionId.toString(\"hex\");\n  }\n\n  get bytes() {\n    let data = Buffer.from([]);\n    for (const attrName of this.attributesKeys) {\n      const attrValue = this.getAttributeValue(attrName);\n      const [attrType, , attrPack] = ATTRIBUTES_BY_NAME[attrName];\n      const v =\n        attrPack.name === packXorAddress.name\n          ? attrPack(attrValue, this.transactionId)\n          : attrPack(attrValue);\n      const attrLen = v.length;\n      const padLen = 4 * Math.floor((attrLen + 3) / 4) - attrLen;\n      data = Buffer.concat([\n        data,\n        Buffer.from(jspack.Pack(\"!HH\", [attrType, attrLen])),\n        v,\n        ...[...Array(padLen)].map(() => Buffer.from(\"\\x00\")),\n      ]);\n    }\n    const buf = Buffer.from(\n      jspack.Pack(\"!HHI\", [\n        this.messageMethod | this.messageClass,\n        data.length,\n        COOKIE,\n      ])\n    );\n\n    return Buffer.concat([buf, this.transactionId, data]);\n  }\n\n  addMessageIntegrity(key: Buffer) {\n    this.setAttribute(\"MESSAGE-INTEGRITY\", this.messageIntegrity(key));\n    return this;\n  }\n\n  messageIntegrity(key: Buffer) {\n    const checkData = setBodyLength(\n      this.bytes,\n      this.bytes.length - HEADER_LENGTH + INTEGRITY_LENGTH\n    );\n    return Buffer.from(\n      createHmac(\"sha1\", key).update(checkData).digest(\"hex\"),\n      \"hex\"\n    );\n  }\n\n  addFingerprint() {\n    this.setAttribute(\"FINGERPRINT\", messageFingerprint(this.bytes));\n  }\n}\n\nconst setBodyLength = (data: Buffer, length: number) => {\n  return Buffer.concat([\n    data.slice(0, 2),\n    Buffer.from(jspack.Pack(\"!H\", [length])),\n    data.slice(4),\n  ]);\n};\n\nfunction messageFingerprint(data: Buffer) {\n  const checkData = setBodyLength(\n    data,\n    data.length - HEADER_LENGTH + FINGERPRINT_LENGTH\n  );\n  const crc32Buf = crc32(checkData);\n  const xorBuf = Buffer.alloc(4);\n  xorBuf.writeInt32BE(FINGERPRINT_XOR, 0);\n  const fingerprint = bufferXor(crc32Buf, xorBuf);\n  return fingerprint.readUInt32BE(0);\n}\n\nfunction messageIntegrity(data: Buffer, key: Buffer) {\n  const checkData = setBodyLength(\n    data,\n    data.length - HEADER_LENGTH + INTEGRITY_LENGTH\n  );\n  return Buffer.from(\n    createHmac(\"sha1\", key).update(checkData).digest(\"hex\"),\n    \"hex\"\n  );\n}\n","import debug from \"debug\";\nimport { Event } from \"rx.mini\";\n\nimport { InterfaceAddresses } from \"../../../common/src/network\";\nimport { Candidate } from \"../candidate\";\nimport { Connection } from \"../ice\";\nimport { UdpTransport } from \"../transport\";\nimport { Address, Protocol } from \"../types/model\";\nimport { classes } from \"./const\";\nimport { Message, parseMessage } from \"./message\";\nimport { Transaction } from \"./transaction\";\n\nconst log = debug(\"packages/ice/src/stun/protocol.ts\");\n\nexport class StunProtocol implements Protocol {\n  readonly type = \"stun\";\n  transport!: UdpTransport;\n  transactions: { [key: string]: Transaction } = {};\n  get transactionsKeys() {\n    return Object.keys(this.transactions);\n  }\n  localCandidate?: Candidate;\n  sentMessage?: Message;\n  localAddress?: string;\n\n  private readonly closed = new Event();\n\n  constructor(public receiver: Connection) {}\n\n  connectionLost() {\n    this.closed.execute();\n    this.closed.complete();\n  }\n\n  connectionMade = async (\n    useIpv4: boolean,\n    portRange?: [number, number],\n    interfaceAddresses?: InterfaceAddresses\n  ) => {\n    if (useIpv4) {\n      this.transport = await UdpTransport.init(\n        \"udp4\",\n        portRange,\n        interfaceAddresses\n      );\n    } else {\n      this.transport = await UdpTransport.init(\n        \"udp6\",\n        portRange,\n        interfaceAddresses\n      );\n    }\n\n    this.transport.onData = (data, addr) => this.datagramReceived(data, addr);\n  };\n\n  private datagramReceived(data: Buffer, addr: Address) {\n    if (!this.localCandidate) throw new Error(\"not exist\");\n\n    const message = parseMessage(data);\n    if (!message) {\n      this.receiver.dataReceived(data, this.localCandidate.component);\n      return;\n    }\n    // log(\"parseMessage\", addr, message);\n    if (\n      (message.messageClass === classes.RESPONSE ||\n        message.messageClass === classes.ERROR) &&\n      this.transactionsKeys.includes(message.transactionIdHex)\n    ) {\n      const transaction = this.transactions[message.transactionIdHex];\n      transaction.responseReceived(message, addr);\n    } else if (message.messageClass === classes.REQUEST) {\n      this.receiver.requestReceived(message, addr, this, data);\n    }\n  }\n\n  getExtraInfo(): Address {\n    const { address: host, port } = this.transport.address();\n    return [host, port];\n  }\n\n  async sendStun(message: Message, addr: Address) {\n    const data = message.bytes;\n    await this.transport.send(data, addr).catch(() => {\n      log(\"sendStun failed\", addr, message);\n    });\n  }\n\n  async sendData(data: Buffer, addr: Address) {\n    await this.transport.send(data, addr);\n  }\n\n  async request(\n    request: Message,\n    addr: Address,\n    integrityKey?: Buffer,\n    retransmissions?: number\n  ) {\n    // \"\"\"\n    // Execute a STUN transaction and return the response.\n    // \"\"\"\n    if (this.transactionsKeys.includes(request.transactionIdHex))\n      throw new Error(\"already request ed\");\n\n    if (integrityKey) {\n      request.addMessageIntegrity(integrityKey);\n      request.addFingerprint();\n    }\n\n    const transaction: Transaction = new Transaction(\n      request,\n      addr,\n      this,\n      retransmissions\n    );\n    this.transactions[request.transactionIdHex] = transaction;\n\n    try {\n      return await transaction.run();\n    } finally {\n      delete this.transactions[request.transactionIdHex];\n    }\n  }\n\n  async close() {\n    Object.values(this.transactions).forEach((transaction) => {\n      transaction.cancel();\n    });\n    await this.transport.close();\n  }\n}\n","import debug from \"debug\";\nimport { Event } from \"rx.mini\";\n\nimport { TransactionFailed, TransactionTimeout } from \"../exceptions\";\nimport { Address, Protocol } from \"../types/model\";\nimport { classes, RETRY_MAX, RETRY_RTO } from \"./const\";\nimport { Message } from \"./message\";\n\nconst log = debug(\"werift-ice:packages/ice/src/stun/transaction.ts\");\n\nexport class Transaction {\n  private timeoutDelay = RETRY_RTO;\n  private timeoutHandle?: any;\n  private tries = 0;\n  private readonly triesMax: number;\n  private readonly onResponse = new Event<[Message, Address]>();\n\n  constructor(\n    private request: Message,\n    private addr: Address,\n    private protocol: Protocol,\n    private retransmissions?: number\n  ) {\n    this.triesMax =\n      1 + (this.retransmissions ? this.retransmissions : RETRY_MAX);\n  }\n\n  responseReceived = (message: Message, addr: Address) => {\n    if (this.onResponse.length > 0) {\n      if (message.messageClass === classes.RESPONSE) {\n        this.onResponse.execute(message, addr);\n        this.onResponse.complete();\n      } else {\n        this.onResponse.error(new TransactionFailed(message, addr));\n      }\n    }\n  };\n\n  run = async () => {\n    try {\n      this.retry();\n      return await this.onResponse.asPromise();\n    } finally {\n      if (this.timeoutHandle) {\n        clearTimeout(this.timeoutHandle);\n      }\n    }\n  };\n\n  private retry = () => {\n    if (this.tries >= this.triesMax) {\n      log(`retry failed times:${this.tries} maxLimit:${this.triesMax}`);\n      this.onResponse.error(new TransactionTimeout());\n      return;\n    }\n    this.protocol.sendStun(this.request, this.addr);\n    this.timeoutHandle = setTimeout(this.retry, this.timeoutDelay);\n    this.timeoutDelay *= 2;\n    this.tries++;\n  };\n\n  cancel() {\n    if (this.timeoutHandle) clearTimeout(this.timeoutHandle);\n  }\n}\n","import debug from \"debug\";\nimport { createSocket, Socket, SocketType } from \"dgram\";\n\nimport {\n  findPort,\n  interfaceAddress,\n  InterfaceAddresses,\n} from \"../../common/src\";\nimport { Address } from \"./types/model\";\nimport { normalizeFamilyNodeV18 } from \"./utils\";\n\nconst log = debug(\"werift-ice:packages/ice/src/transport.ts\");\n\nexport class UdpTransport implements Transport {\n  private socket: Socket;\n  onData: (data: Buffer, addr: Address) => void = () => {};\n\n  constructor(\n    private type: SocketType,\n    private portRange?: [number, number],\n    private interfaceAddresses?: InterfaceAddresses\n  ) {\n    this.socket = createSocket(this.type);\n    this.socket.on(\"message\", (data, info) => {\n      if (normalizeFamilyNodeV18(info.family) === 6) {\n        [info.address] = info.address.split(\"%\"); // example fe80::1d3a:8751:4ffd:eb80%wlp82s0\n      }\n      try {\n        this.onData(data, [info.address, info.port]);\n      } catch (error) {\n        log(\"onData error\", error);\n      }\n    });\n  }\n\n  static async init(\n    type: SocketType,\n    portRange?: [number, number],\n    interfaceAddresses?: InterfaceAddresses\n  ) {\n    const transport = new UdpTransport(type, portRange, interfaceAddresses);\n    await transport.init();\n    return transport;\n  }\n\n  private async init() {\n    const address = interfaceAddress(this.type, this.interfaceAddresses);\n    if (this.portRange) {\n      const port = await findPort(\n        this.portRange[0],\n        this.portRange[1],\n        this.type,\n        this.interfaceAddresses\n      );\n      this.socket.bind({ port, address });\n    } else {\n      this.socket.bind({ address });\n    }\n    await new Promise((r) => this.socket.once(\"listening\", r));\n  }\n\n  send = (data: Buffer, addr: Address) =>\n    new Promise<void>((r, f) => {\n      this.socket.send(data, addr[1], addr[0], (error) => {\n        if (error) {\n          log(\"send error\", addr, data);\n          f(error);\n        } else {\n          r();\n        }\n      });\n    });\n\n  address() {\n    return this.socket.address();\n  }\n\n  close = () =>\n    new Promise<void>((r) => {\n      this.socket.once(\"close\", r);\n      try {\n        this.socket.close();\n      } catch (error) {\n        r();\n      }\n    });\n}\n\nexport interface Transport {\n  onData: (data: Buffer, addr: Address) => void;\n  send: (data: Buffer, addr: Address) => Promise<void>;\n}\n","import { createHash } from \"crypto\";\nimport debug from \"debug\";\nimport { jspack } from \"jspack\";\nimport PCancelable from \"p-cancelable\";\nimport Event from \"rx.mini\";\nimport { setTimeout } from \"timers/promises\";\n\nimport { InterfaceAddresses } from \"../../../common/src/network\";\nimport { Candidate } from \"../candidate\";\nimport { TransactionFailed } from \"../exceptions\";\nimport { Future, future } from \"../helper\";\nimport { Connection } from \"../ice\";\nimport { classes, methods } from \"../stun/const\";\nimport { Message, parseMessage } from \"../stun/message\";\nimport { Transaction } from \"../stun/transaction\";\nimport { Transport, UdpTransport } from \"../transport\";\nimport { Address, Protocol } from \"../types/model\";\n\nconst log = debug(\"werift-ice:packages/ice/src/turn/protocol.ts\");\n\nconst TCP_TRANSPORT = 0x06000000;\nconst UDP_TRANSPORT = 0x11000000;\n\nclass TurnTransport implements Protocol {\n  readonly type = \"turn\";\n  localCandidate!: Candidate;\n  receiver?: Connection;\n\n  constructor(public turn: TurnClient) {\n    turn.onDatagramReceived = this.datagramReceived;\n  }\n\n  private datagramReceived = (data: Buffer, addr: Address) => {\n    const message = parseMessage(data);\n    if (!message) {\n      this.receiver?.dataReceived(data, this.localCandidate.component);\n      return;\n    }\n\n    if (\n      (message?.messageClass === classes.RESPONSE ||\n        message?.messageClass === classes.ERROR) &&\n      this.turn.transactions[message.transactionIdHex]\n    ) {\n      const transaction = this.turn.transactions[message.transactionIdHex];\n      transaction.responseReceived(message, addr);\n    } else if (message?.messageClass === classes.REQUEST) {\n      this.receiver?.requestReceived(message, addr, this, data);\n    }\n  };\n\n  async request(request: Message, addr: Address, integrityKey?: Buffer) {\n    if (this.turn.transactions[request.transactionIdHex])\n      throw new Error(\"exist\");\n\n    if (integrityKey) {\n      request.addMessageIntegrity(integrityKey);\n      request.addFingerprint();\n    }\n\n    const transaction = new Transaction(request, addr, this);\n    this.turn.transactions[request.transactionIdHex] = transaction;\n\n    try {\n      return await transaction.run();\n    } finally {\n      delete this.turn.transactions[request.transactionIdHex];\n    }\n  }\n  async connectionMade() {}\n  async sendData(data: Buffer, addr: Address) {\n    await this.turn.sendData(data, addr);\n  }\n  async sendStun(message: Message, addr: Address) {\n    await this.turn.sendData(message.bytes, addr);\n  }\n}\n\nclass TurnClient implements Protocol {\n  type = \"inner_turn\";\n  readonly onData = new Event<[Buffer, Address]>();\n  transactions: { [hexId: string]: Transaction } = {};\n  integrityKey?: Buffer;\n  nonce?: Buffer;\n  realm?: string;\n  relayedAddress!: Address;\n  mappedAddress!: Address;\n  refreshHandle?: Future;\n  channelNumber = 0x4000;\n  channel?: { number: number; address: Address };\n  localCandidate!: Candidate;\n\n  onDatagramReceived: (data: Buffer, addr: Address) => void = () => {};\n\n  private channelBinding?: Promise<void>;\n\n  constructor(\n    public server: Address,\n    public username: string,\n    public password: string,\n    public lifetime: number,\n    public transport: Transport\n  ) {}\n\n  async connectionMade() {\n    this.transport.onData = (data, addr) => {\n      this.datagramReceived(data, addr);\n    };\n  }\n\n  private handleChannelData(data: Buffer) {\n    const [, length] = jspack.Unpack(\"!HH\", data.slice(0, 4));\n\n    if (this.channel?.address) {\n      const payload = data.slice(4, 4 + length);\n      this.onDatagramReceived(payload, this.channel.address);\n    }\n  }\n\n  private handleSTUNMessage(data: Buffer, addr: Address) {\n    try {\n      const message = parseMessage(data);\n      if (!message) throw new Error(\"not stun message\");\n      if (\n        message.messageClass === classes.RESPONSE ||\n        message.messageClass === classes.ERROR\n      ) {\n        const transaction = this.transactions[message.transactionIdHex];\n        if (transaction) transaction.responseReceived(message, addr);\n      } else if (message.messageClass === classes.REQUEST) {\n        this.onDatagramReceived(data, addr);\n      }\n\n      if (message.getAttributeValue(\"DATA\")) {\n        const buf: Buffer = message.getAttributeValue(\"DATA\");\n        this.onDatagramReceived(buf, addr);\n      }\n    } catch (error) {\n      log(\"parse error\", data.toString());\n    }\n  }\n\n  private datagramReceived(data: Buffer, addr: Address) {\n    if (data.length >= 4 && isChannelData(data)) {\n      this.handleChannelData(data);\n    } else {\n      this.handleSTUNMessage(data, addr);\n    }\n  }\n\n  async connect() {\n    const withoutCred = new Message(methods.ALLOCATE, classes.REQUEST);\n    withoutCred\n      .setAttribute(\"LIFETIME\", this.lifetime)\n      .setAttribute(\"REQUESTED-TRANSPORT\", UDP_TRANSPORT);\n\n    const err: TransactionFailed = await this.request(\n      withoutCred,\n      this.server\n    ).catch((e) => e);\n\n    // resolve dns address\n    this.server = err.addr;\n\n    if (err.response.getAttributeValue(\"NONCE\")) {\n      this.nonce = err.response.getAttributeValue(\"NONCE\");\n    }\n    if (err.response.getAttributeValue(\"REALM\")) {\n      this.realm = err.response.getAttributeValue(\"REALM\");\n    }\n    this.integrityKey = makeIntegrityKey(\n      this.username,\n      this.realm!,\n      this.password\n    );\n\n    const request = new Message(methods.ALLOCATE, classes.REQUEST);\n    request.setAttribute(\"REQUESTED-TRANSPORT\", UDP_TRANSPORT);\n\n    const [response] = await this.request(request, this.server);\n    this.relayedAddress = response.getAttributeValue(\"XOR-RELAYED-ADDRESS\");\n    this.mappedAddress = response.getAttributeValue(\"XOR-MAPPED-ADDRESS\");\n\n    this.refreshHandle = future(this.refresh());\n  }\n\n  async createPermission(peerAddress: Address) {\n    const request = new Message(methods.CREATE_PERMISSION, classes.REQUEST);\n    request\n      .setAttribute(\"XOR-PEER-ADDRESS\", peerAddress)\n      .setAttribute(\"USERNAME\", this.username)\n      .setAttribute(\"REALM\", this.realm)\n      .setAttribute(\"NONCE\", this.nonce);\n    const [response] = await this.request(request, this.server).catch((e) => {\n      request;\n      throw e;\n    });\n    return response;\n  }\n\n  refresh = () =>\n    new PCancelable(async (r, f, onCancel) => {\n      let run = true;\n      onCancel(() => {\n        run = false;\n        f(\"cancel\");\n      });\n\n      while (run) {\n        // refresh before expire\n        await setTimeout((5 / 6) * this.lifetime * 1000);\n\n        const request = new Message(methods.REFRESH, classes.REQUEST);\n        request.setAttribute(\"LIFETIME\", this.lifetime);\n\n        await this.request(request, this.server);\n      }\n    });\n\n  async request(request: Message, addr: Address): Promise<[Message, Address]> {\n    if (this.transactions[request.transactionIdHex]) {\n      throw new Error(\"exist\");\n    }\n    if (this.integrityKey) {\n      request\n        .setAttribute(\"USERNAME\", this.username)\n        .setAttribute(\"REALM\", this.realm)\n        .setAttribute(\"NONCE\", this.nonce)\n        .addMessageIntegrity(this.integrityKey)\n        .addFingerprint();\n    }\n\n    const transaction = new Transaction(request, addr, this);\n    this.transactions[request.transactionIdHex] = transaction;\n\n    try {\n      return await transaction.run();\n    } finally {\n      delete this.transactions[request.transactionIdHex];\n    }\n  }\n\n  async sendData(data: Buffer, addr: Address) {\n    const channel = await this.getChannel(addr);\n\n    const header = jspack.Pack(\"!HH\", [channel.number, data.length]);\n    this.transport.send(\n      Buffer.concat([Buffer.from(header), data]),\n      this.server\n    );\n  }\n\n  private async getChannel(addr: Address) {\n    if (this.channelBinding) {\n      await this.channelBinding;\n    }\n    if (!this.channel) {\n      this.channel = { number: this.channelNumber++, address: addr };\n\n      this.channelBinding = this.channelBind(this.channel.number, addr);\n      await this.channelBinding;\n      this.channelBinding = undefined;\n      log(\"channelBind\", this.channel);\n    }\n    return this.channel;\n  }\n\n  private async channelBind(channelNumber: number, addr: Address) {\n    const request = new Message(methods.CHANNEL_BIND, classes.REQUEST);\n    request\n      .setAttribute(\"CHANNEL-NUMBER\", channelNumber)\n      .setAttribute(\"XOR-PEER-ADDRESS\", addr);\n    const [response] = await this.request(request, this.server);\n    if (response.messageMethod !== methods.CHANNEL_BIND) {\n      throw new Error();\n    }\n  }\n\n  sendStun(message: Message, addr: Address) {\n    this.transport.send(message.bytes, addr);\n  }\n}\n\nexport async function createTurnEndpoint(\n  serverAddr: Address,\n  username: string,\n  password: string,\n  {\n    lifetime,\n    portRange,\n    interfaceAddresses,\n  }: {\n    lifetime?: number;\n    ssl?: boolean;\n    transport?: \"udp\";\n    portRange?: [number, number];\n    interfaceAddresses?: InterfaceAddresses;\n  }\n) {\n  if (lifetime == undefined) {\n    lifetime = 600;\n  }\n\n  const transport = await UdpTransport.init(\n    \"udp4\",\n    portRange,\n    interfaceAddresses\n  );\n\n  const turnClient = new TurnClient(\n    serverAddr,\n    username,\n    password,\n    lifetime,\n    transport\n  );\n\n  await turnClient.connectionMade();\n  await turnClient.connect();\n  const turnTransport = new TurnTransport(turnClient);\n\n  return turnTransport;\n}\n\nexport function makeIntegrityKey(\n  username: string,\n  realm: string,\n  password: string\n) {\n  return createHash(\"md5\")\n    .update(Buffer.from([username, realm, password].join(\":\")))\n    .digest();\n}\n\nfunction isChannelData(data: Buffer) {\n  return (data[0] & 0xc0) == 0x40;\n}\n","import { InterfaceAddresses } from \"../../common/src/network\";\nimport { Connection, serverReflexiveCandidate } from \"./ice\";\nimport { StunProtocol } from \"./stun/protocol\";\nimport { Address } from \"./types/model\";\n\nexport async function getGlobalIp(\n  stunServer?: Address,\n  interfaceAddresses?: InterfaceAddresses\n) {\n  const connection = new Connection(true, {\n    stunServer: stunServer ?? [\"stun.l.google.com\", 19302],\n  });\n  await connection.gatherCandidates();\n\n  const protocol = new StunProtocol(connection);\n  protocol.localCandidate = connection.localCandidates[0];\n  await protocol.connectionMade(true, undefined, interfaceAddresses);\n  const candidate = await serverReflexiveCandidate(protocol, [\n    \"stun.l.google.com\",\n    19302,\n  ]);\n\n  await connection.close();\n  await protocol.close();\n\n  return candidate?.host;\n}\n\nexport function normalizeFamilyNodeV18(family: string | number): 4 | 6 {\n  if (family === \"IPv4\") return 4;\n  if (family === \"IPv6\") return 6;\n\n  return family as 4 | 6;\n}\n","// RTP Payload Format For AV1 https://aomediacodec.github.io/av1-rtp-spec/\n\nimport { LEB128 } from \"@minhducsun2002/leb128\";\nimport { debug } from \"debug\";\n\nimport { BitWriter2, getBit } from \"../../../common/src\";\nimport { RtpHeader } from \"..\";\n\nconst log = debug(\"werift-rtp : packages/rtp/src/codec/av1.ts\");\n\n// 4.4 AV1 Aggregation Header\n//  0 1 2 3 4 5 6 7\n// +-+-+-+-+-+-+-+-+\n// |Z|Y| W |N|-|-|-|\n// +-+-+-+-+-+-+-+-+\n\n// RTP payload syntax:\n// 0                   1                   2                   3\n// 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n// +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n// |Z|Y|0 0|N|-|-|-|  OBU element 1 size (leb128)  |               |\n// +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+               |\n// :                                                               :\n// :                      OBU element 1 data                       :\n// :                                                               :\n// |                                                               |\n// |                               +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n// |                               |  OBU element 2 size (leb128)  |\n// +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n// :                                                               :\n// :                       OBU element 2 data                      :\n// :                                                               :\n// |                                                               |\n// +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n// :                                                               :\n// :                              ...                              :\n// :                                                               :\n// +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n// |OBU e... N size|                                               |\n// +-+-+-+-+-+-+-+-+       OBU element N data      +-+-+-+-+-+-+-+-+\n// |                                               |\n// +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\n// OBU syntax:\n//     0 1 2 3 4 5 6 7\n//    +-+-+-+-+-+-+-+-+\n//    |0| type  |X|S|-| (REQUIRED)\n//    +-+-+-+-+-+-+-+-+\n// X: | TID |SID|-|-|-| (OPTIONAL)\n//    +-+-+-+-+-+-+-+-+\n//    |1|             |\n//    +-+ OBU payload |\n// S: |1|             | (OPTIONAL, variable length leb128 encoded)\n//    +-+    size     |\n//    |0|             |\n//    +-+-+-+-+-+-+-+-+\n//    |  OBU payload  |\n//    |     ...       |\n\nexport class AV1RtpPayload {\n  /**\n   * RtpStartsWithFragment\n   * MUST be set to 1 if the first OBU element is an OBU fragment that is a continuation of an OBU fragment from the previous packet, and MUST be set to 0 otherwise.\n   */\n  zBit_RtpStartsWithFragment!: number;\n  /**\n   * RtpEndsWithFragment\n   * MUST be set to 1 if the last OBU element is an OBU fragment that will continue in the next packet, and MUST be set to 0 otherwise.\n   */\n  yBit_RtpEndsWithFragment!: number;\n  /**\n   * RtpNumObus\n   * two bit field that describes the number of OBU elements in the packet. This field MUST be set equal to 0 or equal to the number of OBU elements contained in the packet. If set to 0, each OBU element MUST be preceded by a length field.\n   */\n  w_RtpNumObus!: number;\n  /**\n   * RtpStartsNewCodedVideoSequence\n   * MUST be set to 1 if the packet is the first packet of a coded video sequence, and MUST be set to 0 otherwise.\n   */\n  nBit_RtpStartsNewCodedVideoSequence!: number;\n  obu_or_fragment: { data: Buffer; isFragment: boolean }[] = [];\n\n  static deSerialize = (buf: Buffer) => {\n    const p = new AV1RtpPayload();\n\n    let offset = 0;\n\n    p.zBit_RtpStartsWithFragment = getBit(buf[offset], 0);\n    p.yBit_RtpEndsWithFragment = getBit(buf[offset], 1);\n    p.w_RtpNumObus = getBit(buf[offset], 2, 2);\n    p.nBit_RtpStartsNewCodedVideoSequence = getBit(buf[offset], 4);\n    offset++;\n\n    if (p.nBit_RtpStartsNewCodedVideoSequence && p.zBit_RtpStartsWithFragment) {\n      throw new Error();\n    }\n\n    [...Array(p.w_RtpNumObus - 1).keys()].forEach((i) => {\n      const [elementSize, bytes] = leb128decode(buf.subarray(offset));\n\n      const start = offset + bytes;\n      const end = start + elementSize;\n\n      let isFragment = false;\n      if (p.zBit_RtpStartsWithFragment && i === 0) {\n        isFragment = true;\n      }\n      p.obu_or_fragment.push({ data: buf.subarray(start, end), isFragment });\n\n      offset += bytes + elementSize;\n    });\n    let isFragment = false;\n    if (\n      p.yBit_RtpEndsWithFragment ||\n      (p.w_RtpNumObus === 1 && p.zBit_RtpStartsWithFragment)\n    ) {\n      isFragment = true;\n    }\n    p.obu_or_fragment.push({\n      data: buf.subarray(offset),\n      isFragment: isFragment,\n    });\n\n    return p;\n  };\n\n  static isDetectedFinalPacketInSequence(header: RtpHeader) {\n    return header.marker;\n  }\n\n  get isKeyframe() {\n    return this.nBit_RtpStartsNewCodedVideoSequence === 1;\n  }\n\n  static getFrame(payloads: AV1RtpPayload[]) {\n    const frames: Buffer[] = [];\n    const objects = payloads\n      .flatMap((p) => p.obu_or_fragment)\n      .reduce(\n        (\n          acc: Record<number, { data: Buffer; isFragment: boolean }>,\n          cur,\n          i\n        ) => {\n          acc[i] = cur;\n          return acc;\n        },\n        {}\n      );\n    const length = Object.keys(objects).length;\n\n    for (const i of Object.keys(objects).map(Number)) {\n      const exist = objects[i];\n      if (!exist) continue;\n      const { data, isFragment } = exist;\n      if (isFragment) {\n        let fragments: Buffer[] = [];\n        for (let head = i; head < length; head++) {\n          const target = objects[head];\n          if (target.isFragment) {\n            fragments.push(target.data);\n            delete objects[head];\n          } else {\n            break;\n          }\n        }\n        if (fragments.length <= 1) {\n          log(\"fragment lost, maybe packet lost\");\n          fragments = [];\n        }\n        frames.push(Buffer.concat(fragments));\n      } else {\n        frames.push(data);\n      }\n    }\n    const obus = frames.map((f) => AV1Obu.deSerialize(f));\n    const lastObu = obus.pop()!;\n    return Buffer.concat([\n      ...obus.map((o) => {\n        o.obu_has_size_field = 1;\n        return o.serialize();\n      }),\n      lastObu.serialize(),\n    ]);\n  }\n}\n\nexport class AV1Obu {\n  obu_forbidden_bit!: number;\n  obu_type!: OBU_TYPE;\n  obu_extension_flag!: number;\n  obu_has_size_field!: number;\n  obu_reserved_1bit!: number;\n  payload!: Buffer;\n\n  static deSerialize(buf: Buffer) {\n    const obu = new AV1Obu();\n    let offset = 0;\n    obu.obu_forbidden_bit = getBit(buf[offset], 0);\n    obu.obu_type =\n      OBU_TYPES[getBit(buf[offset], 1, 4) as keyof typeof OBU_TYPES];\n    obu.obu_extension_flag = getBit(buf[offset], 5);\n    obu.obu_has_size_field = getBit(buf[offset], 6);\n    obu.obu_reserved_1bit = getBit(buf[offset], 7);\n    offset++;\n\n    obu.payload = buf.subarray(offset);\n\n    return obu;\n  }\n\n  serialize() {\n    const header = new BitWriter2(8)\n      .set(this.obu_forbidden_bit)\n      .set(OBU_TYPE_IDS[this.obu_type], 4)\n      .set(this.obu_extension_flag)\n      .set(this.obu_has_size_field)\n      .set(this.obu_reserved_1bit).buffer;\n    let obuSize: Uint8Array | Buffer = Buffer.alloc(0);\n    if (this.obu_has_size_field) {\n      obuSize = LEB128.encode(this.payload.length);\n    }\n    return Buffer.concat([header, obuSize, this.payload]);\n  }\n}\n\nexport function leb128decode(buf: Buffer) {\n  let value = 0;\n  let leb128bytes = 0;\n  for (let i = 0; i < 8; i++) {\n    const leb128byte = buf.readUInt8(i);\n    value |= (leb128byte & 0x7f) << (i * 7);\n    leb128bytes++;\n    if (!(leb128byte & 0x80)) {\n      break;\n    }\n  }\n  return [value, leb128bytes];\n}\n\nconst OBU_TYPES = {\n  0: \"Reserved\",\n  1: \"OBU_SEQUENCE_HEADER\",\n  2: \"OBU_TEMPORAL_DELIMITER\",\n  3: \"OBU_FRAME_HEADER\",\n  4: \"OBU_TILE_GROUP\",\n  5: \"OBU_METADATA\",\n  6: \"OBU_FRAME\",\n  7: \"OBU_REDUNDANT_FRAME_HEADER\",\n  8: \"OBU_TILE_LIST\",\n  15: \"OBU_PADDING\",\n} as const;\ntype OBU_TYPE = typeof OBU_TYPES[keyof typeof OBU_TYPES];\nconst OBU_TYPE_IDS: Record<OBU_TYPE, number> = Object.entries(OBU_TYPES).reduce(\n  (acc: any, [key, value]) => {\n    acc[value] = Number(key);\n    return acc;\n  },\n  {}\n);\n","import { RtpHeader } from \"../rtp/rtp\";\n\nexport abstract class DePacketizerBase {\n  payload!: Buffer;\n\n  static deSerialize(buf: Buffer) {\n    return {} as unknown as DePacketizerBase;\n  }\n\n  static isDetectedFinalPacketInSequence(header: RtpHeader) {\n    return true as boolean;\n  }\n\n  get isKeyframe() {\n    return true as boolean;\n  }\n}\n","// RFC 6184 - RTP Payload Format for H.264 Video\n\nimport { getBit } from \"../../../common/src\";\nimport { RtpHeader } from \"../rtp/rtp\";\nimport { DePacketizerBase } from \"./base\";\n\n// FU indicator octet\n// +---------------+\n// |0|1|2|3|4|5|6|7|\n// +-+-+-+-+-+-+-+-+\n// |F|NRI|  Type   |\n// +---------------+\n\n// FU header\n// +---------------+\n// |0|1|2|3|4|5|6|7|\n// +-+-+-+-+-+-+-+-+\n// |S|E|R|  Type   |\n// +---------------+\n\nexport class H264RtpPayload implements DePacketizerBase {\n  /**forbidden_zero_bit */\n  f!: number;\n  /**nal_ref_idc */\n  nri!: number;\n  /**nal_unit_types */\n  nalUnitType!: number;\n  /**start of a fragmented NAL unit */\n  s!: number;\n  /**end of a fragmented NAL unit */\n  e!: number;\n  r!: number;\n  nalUnitPayloadType!: number;\n  payload!: Buffer;\n\n  static deSerialize(buf: Buffer) {\n    const h264 = new H264RtpPayload();\n\n    let offset = 0;\n\n    h264.f = getBit(buf[offset], 0);\n    h264.nri = getBit(buf[offset], 1, 2);\n    h264.nalUnitType = getBit(buf[offset], 3, 5);\n    offset++;\n\n    h264.s = getBit(buf[offset], 0);\n    h264.e = getBit(buf[offset], 1);\n    h264.r = getBit(buf[offset], 2);\n    h264.nalUnitPayloadType = getBit(buf[offset], 3, 5);\n    offset++;\n\n    // デフォルトでは packetization-mode=0\n    // packetization-mode=0だとSingle NAL Unit Packetしか来ない\n    // https://datatracker.ietf.org/doc/html/rfc6184#section-6.2\n\n    // Single NAL Unit Packet\n    if (0 < h264.nalUnitType && h264.nalUnitType < 24) {\n      h264.payload = this.packaging(buf);\n    }\n    // Single-time aggregation packet\n    else if (h264.nalUnitType === NalUnitType.stap_a) {\n      let offset = stap_aHeaderSize;\n      let result: Buffer = Buffer.alloc(0);\n      while (offset < buf.length) {\n        const naluSize = buf.readUInt16BE(offset);\n        offset += stap_aNALULengthSize;\n\n        result = Buffer.concat([\n          result,\n          this.packaging(buf.subarray(offset, offset + naluSize)),\n        ]);\n        offset += naluSize;\n      }\n      h264.payload = result;\n    }\n\n    return h264;\n  }\n\n  private static packaging(buf: Buffer) {\n    return Buffer.concat([annex_bNALUStartCode, buf]);\n  }\n\n  static isDetectedFinalPacketInSequence(header: RtpHeader) {\n    return header.marker;\n  }\n\n  get isKeyframe() {\n    return this.nalUnitType === NalUnitType.idrSlice;\n  }\n\n  get isPartitionHead() {\n    if (\n      this.nalUnitType === NalUnitType.fu_a ||\n      this.nalUnitType === NalUnitType.fu_b\n    ) {\n      return this.s !== 0;\n    }\n\n    return true;\n  }\n}\n\nexport const NalUnitType = {\n  idrSlice: 5,\n  stap_a: 24,\n  stap_b: 25,\n  mtap16: 26,\n  mtap24: 27,\n  fu_a: 28,\n  fu_b: 29,\n} as const;\n\nconst annex_bNALUStartCode = Buffer.from([0x00, 0x00, 0x00, 0x01]);\n\nconst stap_aHeaderSize = 1;\nconst stap_aNALULengthSize = 2;\n","import { RtpPacket } from \"../rtp/rtp\";\nimport { AV1RtpPayload } from \"./av1\";\nimport { DePacketizerBase } from \"./base\";\nimport { H264RtpPayload } from \"./h264\";\nimport { OpusRtpPayload } from \"./opus\";\nimport { Vp8RtpPayload } from \"./vp8\";\nimport { Vp9RtpPayload } from \"./vp9\";\n\nexport * from \"./av1\";\nexport * from \"./base\";\nexport * from \"./h264\";\nexport * from \"./opus\";\nexport * from \"./vp8\";\nexport * from \"./vp9\";\n\nexport function dePacketizeRtpPackets(codec: string, packets: RtpPacket[]) {\n  const basicCodecParser = (DePacketizer: typeof DePacketizerBase) => {\n    const partitions = packets.map((p) => DePacketizer.deSerialize(p.payload));\n    const isKeyframe = !!partitions.find((f) => f.isKeyframe);\n    const data = Buffer.concat(partitions.map((f) => f.payload));\n    return {\n      isKeyframe,\n      data,\n      sequence: packets.at(-1)?.header.sequenceNumber ?? 0,\n      timestamp: packets.at(-1)?.header.timestamp ?? 0,\n    };\n  };\n\n  switch (codec.toUpperCase()) {\n    case \"AV1\": {\n      const chunks = packets.map((p) => AV1RtpPayload.deSerialize(p.payload));\n      const isKeyframe = !!chunks.find((f) => f.isKeyframe);\n      const data = AV1RtpPayload.getFrame(chunks);\n      return {\n        isKeyframe,\n        data,\n        sequence: packets.at(-1)?.header.sequenceNumber ?? 0,\n        timestamp: packets.at(-1)?.header.timestamp ?? 0,\n      };\n    }\n    case \"MPEG4/ISO/AVC\":\n      return basicCodecParser(H264RtpPayload);\n    case \"VP8\": {\n      return basicCodecParser(Vp8RtpPayload);\n    }\n    case \"VP9\":\n      return basicCodecParser(Vp9RtpPayload);\n    case \"OPUS\":\n      return basicCodecParser(OpusRtpPayload);\n    default:\n      throw new Error();\n  }\n}\n","import { bufferWriter, bufferWriterLE } from \"../../../common/src\";\nimport { RtpHeader } from \"../rtp/rtp\";\nimport { DePacketizerBase } from \"./base\";\n\nexport class OpusRtpPayload implements DePacketizerBase {\n  payload!: Buffer;\n\n  static deSerialize(buf: Buffer) {\n    const opus = new OpusRtpPayload();\n    opus.payload = buf;\n    return opus;\n  }\n\n  static isDetectedFinalPacketInSequence(header: RtpHeader) {\n    return true;\n  }\n\n  get isKeyframe() {\n    return true;\n  }\n\n  static createCodecPrivate(samplingFrequency: number = 48000) {\n    return Buffer.concat([\n      Buffer.from(\"OpusHead\"),\n      bufferWriter([1, 1], [1, 2]),\n      bufferWriterLE([2, 4, 2, 1], [312, samplingFrequency, 0, 0]),\n    ]);\n  }\n}\n","import { getBit, paddingByte } from \"../../../common/src\";\nimport { RtpHeader } from \"../rtp/rtp\";\nimport { DePacketizerBase } from \"./base\";\n\n// RFC 7741 - RTP Payload Format for VP8 Video\n\n//        0 1 2 3 4 5 6 7                      0 1 2 3 4 5 6 7\n//       +-+-+-+-+-+-+-+-+                   +-+-+-+-+-+-+-+-+\n//       |X|R|N|S|R| PID | (REQUIRED)        |X|R|N|S|R| PID | (REQUIRED)\n//       +-+-+-+-+-+-+-+-+                   +-+-+-+-+-+-+-+-+\n//  X:   |I|L|T|K| RSV   | (OPTIONAL)   X:   |I|L|T|K| RSV   | (OPTIONAL)\n//       +-+-+-+-+-+-+-+-+                   +-+-+-+-+-+-+-+-+\n//  I:   |M| PictureID   | (OPTIONAL)   I:   |M| PictureID   | (OPTIONAL)\n//       +-+-+-+-+-+-+-+-+                   +-+-+-+-+-+-+-+-+\n//  L:   |   TL0PICIDX   | (OPTIONAL)        |   PictureID   |\n//       +-+-+-+-+-+-+-+-+                   +-+-+-+-+-+-+-+-+\n//  T/K: |TID|Y| KEYIDX  | (OPTIONAL)   L:   |   TL0PICIDX   | (OPTIONAL)\n//       +-+-+-+-+-+-+-+-+                   +-+-+-+-+-+-+-+-+\n//                                      T/K: |TID|Y| KEYIDX  | (OPTIONAL)\n//                                           +-+-+-+-+-+-+-+-+\n\n// 0 1 2 3 4 5 6 7\n// +-+-+-+-+-+-+-+-+\n// |Size0|H| VER |P|\n// +-+-+-+-+-+-+-+-+\n// |     Size1     |\n// +-+-+-+-+-+-+-+-+\n// |     Size2     |\n// +-+-+-+-+-+-+-+-+\n// | Octets 4..N of|\n// | VP8 payload   |\n// :               :\n// +-+-+-+-+-+-+-+-+\n// | OPTIONAL RTP  |\n// | padding       |\n// :               :\n// +-+-+-+-+-+-+-+-+\n\nexport class Vp8RtpPayload implements DePacketizerBase {\n  xBit!: number;\n  nBit!: number;\n  sBit!: number;\n  pid!: number;\n  iBit?: number;\n  lBit?: number;\n  tBit?: number;\n  kBit?: number;\n  mBit?: number;\n  pictureId?: number;\n  payload!: Buffer;\n  size0: number = 0;\n  hBit?: number;\n  ver?: number;\n  pBit?: number;\n  size1: number = 0;\n  size2: number = 0;\n\n  static deSerialize(buf: Buffer) {\n    const p = new Vp8RtpPayload();\n\n    let offset = 0;\n\n    p.xBit = getBit(buf[offset], 0);\n    p.nBit = getBit(buf[offset], 2);\n    p.sBit = getBit(buf[offset], 3);\n    p.pid = getBit(buf[offset], 5, 3);\n    offset++;\n\n    if (p.xBit) {\n      p.iBit = getBit(buf[offset], 0);\n      p.lBit = getBit(buf[offset], 1);\n      p.tBit = getBit(buf[offset], 2);\n      p.kBit = getBit(buf[offset], 3);\n      offset++;\n    }\n\n    if (p.iBit) {\n      p.mBit = getBit(buf[offset], 0);\n      if (p.mBit) {\n        const _7 = paddingByte(getBit(buf[offset], 1, 7));\n        const _8 = paddingByte(buf[offset + 1]);\n        p.pictureId = parseInt(_7 + _8, 2);\n        offset += 2;\n      } else {\n        p.pictureId = getBit(buf[offset], 1, 7);\n        offset++;\n      }\n    }\n\n    if (p.lBit) {\n      offset++;\n    }\n\n    if (p.lBit || p.kBit) {\n      if (p.tBit) {\n      }\n      if (p.kBit) {\n      }\n      offset++;\n    }\n\n    p.payload = buf.subarray(offset);\n\n    if (p.payloadHeaderExist) {\n      p.size0 = getBit(buf[offset], 0, 3);\n      p.hBit = getBit(buf[offset], 3);\n      p.ver = getBit(buf[offset], 4, 3);\n      p.pBit = getBit(buf[offset], 7);\n      offset++;\n      p.size1 = buf[offset];\n      offset++;\n      p.size2 = buf[offset];\n    }\n\n    return p;\n  }\n\n  static isDetectedFinalPacketInSequence(header: RtpHeader) {\n    return header.marker;\n  }\n\n  get isKeyframe() {\n    return this.pBit === 0;\n  }\n\n  get isPartitionHead() {\n    return this.sBit === 1;\n  }\n\n  get payloadHeaderExist() {\n    return this.sBit === 1 && this.pid === 0;\n  }\n\n  get size() {\n    if (this.payloadHeaderExist) {\n      const size = this.size0 + 8 * this.size1 + 2048 * this.size2;\n      return size;\n    }\n    return 0;\n  }\n}\n","// RTP Payload Format for VP9 Video draft-ietf-payload-vp9-16 https://datatracker.ietf.org/doc/html/draft-ietf-payload-vp9\n\nimport { getBit, paddingByte } from \"../../../common/src\";\nimport { RtpHeader } from \"../rtp/rtp\";\nimport { DePacketizerBase } from \"./base\";\n\n//          0 1 2 3 4 5 6 7\n//         +-+-+-+-+-+-+-+-+\n//         |I|P|L|F|B|E|V|Z| (REQUIRED)\n//         +-+-+-+-+-+-+-+-+\n//    I:   |M| PICTURE ID  | (REQUIRED)\n//         +-+-+-+-+-+-+-+-+\n//    M:   | EXTENDED PID  | (RECOMMENDED)\n//         +-+-+-+-+-+-+-+-+\n//    L:   | TID |U| SID |D| (Conditionally RECOMMENDED)\n//         +-+-+-+-+-+-+-+-+                             -\\\n//    P,F: | P_DIFF      |N| (Conditionally REQUIRED)    - up to 3 times\n//         +-+-+-+-+-+-+-+-+                             -/\n//    V:   | SS            |\n//         | ..            |\n//         +-+-+-+-+-+-+-+-+\n\n//          0 1 2 3 4 5 6 7\n//         +-+-+-+-+-+-+-+-+\n//         |I|P|L|F|B|E|V|Z| (REQUIRED)\n//         +-+-+-+-+-+-+-+-+\n//    I:   |M| PICTURE ID  | (RECOMMENDED)\n//         +-+-+-+-+-+-+-+-+\n//    M:   | EXTENDED PID  | (RECOMMENDED)\n//         +-+-+-+-+-+-+-+-+\n//    L:   | TID |U| SID |D| (Conditionally RECOMMENDED)\n//         +-+-+-+-+-+-+-+-+\n//         |   TL0PICIDX   | (Conditionally REQUIRED)\n//         +-+-+-+-+-+-+-+-+\n//    V:   | SS            |\n//         | ..            |\n//         +-+-+-+-+-+-+-+-+\n\nexport class Vp9RtpPayload implements DePacketizerBase {\n  /**Picture ID (PID) present */\n  iBit!: number;\n  /**Inter-picture predicted frame */\n  pBit!: number;\n  /**Layer indices present */\n  lBit!: number;\n  /**Flexible mode */\n  fBit!: number;\n  /**Start of a frame */\n  bBit!: number;\n  /**End of a frame */\n  eBit!: number;\n  /**Scalability structure */\n  vBit!: number;\n  zBit!: number;\n  m?: number;\n  pictureId?: number;\n  tid?: number;\n  u?: number;\n  sid?: number;\n  /**inter_layer_predicted */\n  d?: number;\n  tl0PicIdx?: number;\n  pDiff: number[] = [];\n  n_s?: number;\n  y?: number;\n  g?: number;\n  width: number[] = [];\n  height: number[] = [];\n  n_g: number = 0;\n  pgT: number[] = [];\n  pgU: number[] = [];\n  pgP_Diff: number[][] = [];\n  payload!: Buffer;\n\n  static deSerialize(buf: Buffer) {\n    const { p, offset } = this.parseRtpPayload(buf);\n    p.payload = buf.subarray(offset);\n    return p;\n  }\n\n  static parseRtpPayload(buf: Buffer) {\n    const p = new Vp9RtpPayload();\n    let offset = 0;\n\n    p.iBit = getBit(buf[offset], 0); // PictureId present .\n    p.pBit = getBit(buf[offset], 1); // Inter-picture predicted.\n    p.lBit = getBit(buf[offset], 2); // Layer indices present.\n    p.fBit = getBit(buf[offset], 3); // Flexible mode.\n    p.bBit = getBit(buf[offset], 4); // Begins frame flag.\n    p.eBit = getBit(buf[offset], 5); // Ends frame flag.\n    p.vBit = getBit(buf[offset], 6); // Scalability structure present.\n    p.zBit = getBit(buf[offset], 7); // Not used for inter-layer prediction\n    offset++;\n\n    if (p.iBit) {\n      p.m = getBit(buf[offset], 0);\n\n      if (p.m) {\n        const _7 = paddingByte(getBit(buf[offset], 1, 7));\n        const _8 = paddingByte(buf[offset + 1]);\n        p.pictureId = parseInt(_7 + _8, 2);\n        offset += 2;\n      } else {\n        p.pictureId = getBit(buf[offset], 1, 7);\n        offset++;\n      }\n    }\n\n    if (p.lBit) {\n      p.tid = getBit(buf[offset], 0, 3);\n      p.u = getBit(buf[offset], 3);\n      p.sid = getBit(buf[offset], 4, 3);\n      p.d = getBit(buf[offset], 7);\n      offset++;\n      if (p.fBit === 0) {\n        p.tl0PicIdx = buf[offset];\n        offset++;\n      }\n    }\n\n    if (p.fBit && p.pBit) {\n      for (;;) {\n        p.pDiff = [...p.pDiff, getBit(buf[offset], 0, 7)];\n        const n = getBit(buf[offset], 7);\n        offset++;\n        if (n === 0) break;\n      }\n    }\n\n    // Scalability structure (SS):\n    //\n    //      +-+-+-+-+-+-+-+-+\n    // V:   | N_S |Y|G|-|-|-|\n    //      +-+-+-+-+-+-+-+-+              -|\n    // Y:   |     WIDTH     | (OPTIONAL)    .\n    //      +               +               .\n    //      |               | (OPTIONAL)    .\n    //      +-+-+-+-+-+-+-+-+               . N_S + 1 times\n    //      |     HEIGHT    | (OPTIONAL)    .\n    //      +               +               .\n    //      |               | (OPTIONAL)    .\n    //      +-+-+-+-+-+-+-+-+              -|\n    // G:   |      N_G      | (OPTIONAL)\n    //      +-+-+-+-+-+-+-+-+                           -|\n    // N_G: |  T  |U| R |-|-| (OPTIONAL)                 .\n    //      +-+-+-+-+-+-+-+-+              -|            . N_G times\n    //      |    P_DIFF     | (OPTIONAL)    . R times    .\n    //      +-+-+-+-+-+-+-+-+              -|           -|\n    //\n    if (p.vBit) {\n      p.n_s = getBit(buf[offset], 0, 3);\n      p.y = getBit(buf[offset], 3);\n      p.g = getBit(buf[offset], 4);\n      offset++;\n\n      if (p.y) {\n        [...Array(p.n_s + 1)].forEach(() => {\n          p.width.push(buf.readUInt16BE(offset));\n          offset += 2;\n          p.height.push(buf.readUInt16BE(offset));\n          offset += 2;\n        });\n      }\n\n      if (p.g) {\n        p.n_g = buf[offset];\n        offset++;\n      }\n\n      if (p.n_g > 0) {\n        [...Array(p.n_g).keys()].forEach((i) => {\n          p.pgT.push(getBit(buf[offset], 0, 3));\n          p.pgU.push(getBit(buf[offset], 3));\n          const r = getBit(buf[offset], 4, 2);\n          offset++;\n\n          p.pgP_Diff[i] = [];\n          if (r > 0) {\n            [...Array(r)].forEach(() => {\n              p.pgP_Diff[i].push(buf[offset]);\n              offset++;\n            });\n          }\n        });\n      }\n    }\n    return { offset, p };\n  }\n\n  static isDetectedFinalPacketInSequence(header: RtpHeader) {\n    return header.marker;\n  }\n\n  get isKeyframe() {\n    return !!(!this.pBit && this.bBit && (!this.sid || !this.lBit));\n  }\n\n  get isPartitionHead() {\n    return this.bBit && (!this.lBit || !this.d);\n  }\n}\n","import memoize from \"lodash/memoize\";\n\nimport {\n  float32bit,\n  numberToByteArray,\n  stringToByteArray,\n} from \"./typedArrayUtils\";\n\nexport interface EBMLData {\n  write(buf: Uint8Array, pos: number): number;\n  countSize(): number;\n}\n\nexport class Value implements EBMLData {\n  constructor(public bytes: Uint8Array) {}\n\n  public write(buf: Uint8Array, pos: number): number {\n    buf.set(this.bytes, pos);\n    return pos + this.bytes.length;\n  }\n\n  public countSize(): number {\n    return this.bytes.length;\n  }\n}\n\nexport class Element implements EBMLData {\n  private readonly size: number;\n  private readonly sizeMetaData: Uint8Array;\n\n  constructor(\n    private id: Uint8Array,\n    private children: EBMLData[],\n    isSizeUnknown: boolean\n  ) {\n    const bodySize = this.children.reduce((p, c) => p + c.countSize(), 0);\n    this.sizeMetaData = isSizeUnknown\n      ? UNKNOWN_SIZE\n      : vintEncode(numberToByteArray(bodySize, getEBMLByteLength(bodySize)));\n    this.size = this.id.length + this.sizeMetaData.length + bodySize;\n  }\n\n  public write(buf: Uint8Array, pos: number): number {\n    buf.set(this.id, pos);\n    buf.set(this.sizeMetaData, pos + this.id.length);\n    return this.children.reduce(\n      (p, c) => c.write(buf, p),\n      pos + this.id.length + this.sizeMetaData.length\n    );\n  }\n\n  public countSize(): number {\n    return this.size;\n  }\n}\n\nexport const bytes = memoize((data: Uint8Array): Value => {\n  return new Value(data);\n});\n\nexport const number = memoize((num: number): Value => {\n  return bytes(numberToByteArray(num));\n});\n\nexport const float = memoize((num: number): Value => bytes(float32bit(num)));\n\nexport const vintEncodedNumber = memoize((num: number): Value => {\n  return bytes(vintEncode(numberToByteArray(num, getEBMLByteLength(num))));\n});\n\nexport const string = memoize((str: string): Value => {\n  return bytes(stringToByteArray(str));\n});\n\nexport const element = (\n  id: Uint8Array,\n  child: EBMLData | EBMLData[]\n): EBMLData => {\n  return new Element(id, Array.isArray(child) ? child : [child], false);\n};\n\nexport const unknownSizeElement = (\n  id: Uint8Array,\n  child: EBMLData | EBMLData[]\n): EBMLData => {\n  return new Element(id, Array.isArray(child) ? child : [child], true);\n};\n\nexport const build = (v: EBMLData): Uint8Array => {\n  const b = new Uint8Array(v.countSize());\n  v.write(b, 0);\n  return b;\n};\n\nexport const getEBMLByteLength = (num: number | bigint): number => {\n  if (num < 0x7f) {\n    return 1;\n  } else if (num < 0x3fff) {\n    return 2;\n  } else if (num < 0x1fffff) {\n    return 3;\n  } else if (num < 0xfffffff) {\n    return 4;\n  } else if (num < 0x7ffffffff) {\n    return 5;\n  } else if (num < 0x3ffffffffff) {\n    return 6;\n  } else if (num < 0x1ffffffffffff) {\n    return 7;\n  } else if (num < 0x20000000000000n) {\n    return 8;\n  } else if (num < 0xffffffffffffffn) {\n    throw new Error(\n      \"EBMLgetEBMLByteLength: number exceeds Number.MAX_SAFE_INTEGER\"\n    );\n  } else {\n    throw new Error(\n      \"EBMLgetEBMLByteLength: data size must be less than or equal to \" +\n        (Math.pow(2, 56) - 2)\n    );\n  }\n};\n\nexport const UNKNOWN_SIZE = new Uint8Array([\n  0x01, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,\n]);\n\nexport const vintEncode = (byteArray: Uint8Array): Uint8Array => {\n  byteArray[0] = getSizeMask(byteArray.length) | byteArray[0];\n  return byteArray;\n};\n\nexport const getSizeMask = (byteLength: number): number => {\n  return 0x80 >> (byteLength - 1);\n};\n","/**\n * @see https://www.matroska.org/technical/specs/index.html\n */\nexport const ID = {\n  EBML: Uint8Array.of(0x1a, 0x45, 0xdf, 0xa3),\n  EBMLVersion: Uint8Array.of(0x42, 0x86),\n  EBMLReadVersion: Uint8Array.of(0x42, 0xf7),\n  EBMLMaxIDLength: Uint8Array.of(0x42, 0xf2),\n  EBMLMaxSizeLength: Uint8Array.of(0x42, 0xf3),\n  DocType: Uint8Array.of(0x42, 0x82),\n  DocTypeVersion: Uint8Array.of(0x42, 0x87),\n  DocTypeReadVersion: Uint8Array.of(0x42, 0x85),\n  Void: Uint8Array.of(0xec),\n  CRC32: Uint8Array.of(0xbf),\n  Segment: Uint8Array.of(0x18, 0x53, 0x80, 0x67),\n  SeekHead: Uint8Array.of(0x11, 0x4d, 0x9b, 0x74),\n  Seek: Uint8Array.of(0x4d, 0xbb),\n  SeekID: Uint8Array.of(0x53, 0xab),\n  SeekPosition: Uint8Array.of(0x53, 0xac),\n  Info: Uint8Array.of(0x15, 0x49, 0xa9, 0x66),\n  SegmentUID: Uint8Array.of(0x73, 0xa4),\n  SegmentFilename: Uint8Array.of(0x73, 0x84),\n  PrevUID: Uint8Array.of(0x3c, 0xb9, 0x23),\n  PrevFilename: Uint8Array.of(0x3c, 0x83, 0xab),\n  NextUID: Uint8Array.of(0x3e, 0xb9, 0x23),\n  NextFilename: Uint8Array.of(0x3e, 0x83, 0xbb),\n  SegmentFamily: Uint8Array.of(0x44, 0x44),\n  ChapterTranslate: Uint8Array.of(0x69, 0x24),\n  ChapterTranslateEditionUID: Uint8Array.of(0x69, 0xfc),\n  ChapterTranslateCodec: Uint8Array.of(0x69, 0xbf),\n  ChapterTranslateID: Uint8Array.of(0x69, 0xa5),\n  TimecodeScale: Uint8Array.of(0x2a, 0xd7, 0xb1),\n  Duration: Uint8Array.of(0x44, 0x89),\n  DateUTC: Uint8Array.of(0x44, 0x61),\n  Title: Uint8Array.of(0x7b, 0xa9),\n  MuxingApp: Uint8Array.of(0x4d, 0x80),\n  WritingApp: Uint8Array.of(0x57, 0x41),\n  Cluster: Uint8Array.of(0x1f, 0x43, 0xb6, 0x75),\n  Timecode: Uint8Array.of(0xe7),\n  SilentTracks: Uint8Array.of(0x58, 0x54),\n  SilentTrackNumber: Uint8Array.of(0x58, 0xd7),\n  Position: Uint8Array.of(0xa7),\n  PrevSize: Uint8Array.of(0xab),\n  SimpleBlock: Uint8Array.of(0xa3),\n  BlockGroup: Uint8Array.of(0xa0),\n  Block: Uint8Array.of(0xa1),\n  BlockAdditions: Uint8Array.of(0x75, 0xa1),\n  BlockMore: Uint8Array.of(0xa6),\n  BlockAddID: Uint8Array.of(0xee),\n  BlockAdditional: Uint8Array.of(0xa5),\n  BlockDuration: Uint8Array.of(0x9b),\n  ReferencePriority: Uint8Array.of(0xfa),\n  ReferenceBlock: Uint8Array.of(0xfb),\n  CodecState: Uint8Array.of(0xa4),\n  DiscardPadding: Uint8Array.of(0x75, 0xa2),\n  Slices: Uint8Array.of(0x8e),\n  TimeSlice: Uint8Array.of(0xe8),\n  LaceNumber: Uint8Array.of(0xcc),\n  Tracks: Uint8Array.of(0x16, 0x54, 0xae, 0x6b),\n  TrackEntry: Uint8Array.of(0xae),\n  TrackNumber: Uint8Array.of(0xd7),\n  TrackUID: Uint8Array.of(0x73, 0xc5),\n  TrackType: Uint8Array.of(0x83),\n  FlagEnabled: Uint8Array.of(0xb9),\n  FlagDefault: Uint8Array.of(0x88),\n  FlagForced: Uint8Array.of(0x55, 0xaa),\n  FlagLacing: Uint8Array.of(0x9c),\n  MinCache: Uint8Array.of(0x6d, 0xe7),\n  MaxCache: Uint8Array.of(0x6d, 0xf8),\n  DefaultDuration: Uint8Array.of(0x23, 0xe3, 0x83),\n  DefaultDecodedFieldDuration: Uint8Array.of(0x23, 0x4e, 0x7a),\n  MaxBlockAdditionID: Uint8Array.of(0x55, 0xee),\n  Name: Uint8Array.of(0x53, 0x6e),\n  Language: Uint8Array.of(0x22, 0xb5, 0x9c),\n  CodecID: Uint8Array.of(0x86),\n  CodecPrivate: Uint8Array.of(0x63, 0xa2),\n  CodecName: Uint8Array.of(0x25, 0x86, 0x88),\n  AttachmentLink: Uint8Array.of(0x74, 0x46),\n  CodecDecodeAll: Uint8Array.of(0xaa),\n  TrackOverlay: Uint8Array.of(0x6f, 0xab),\n  CodecDelay: Uint8Array.of(0x56, 0xaa),\n  SeekPreRoll: Uint8Array.of(0x56, 0xbb),\n  TrackTranslate: Uint8Array.of(0x66, 0x24),\n  TrackTranslateEditionUID: Uint8Array.of(0x66, 0xfc),\n  TrackTranslateCodec: Uint8Array.of(0x66, 0xbf),\n  TrackTranslateTrackID: Uint8Array.of(0x66, 0xa5),\n  Video: Uint8Array.of(0xe0),\n  FlagInterlaced: Uint8Array.of(0x9a),\n  FieldOrder: Uint8Array.of(0x9d),\n  StereoMode: Uint8Array.of(0x53, 0xb8),\n  AlphaMode: Uint8Array.of(0x53, 0xc0),\n  PixelWidth: Uint8Array.of(0xb0),\n  PixelHeight: Uint8Array.of(0xba),\n  PixelCropBottom: Uint8Array.of(0x54, 0xaa),\n  PixelCropTop: Uint8Array.of(0x54, 0xbb),\n  PixelCropLeft: Uint8Array.of(0x54, 0xcc),\n  PixelCropRight: Uint8Array.of(0x54, 0xdd),\n  DisplayWidth: Uint8Array.of(0x54, 0xb0),\n  DisplayHeight: Uint8Array.of(0x54, 0xba),\n  DisplayUnit: Uint8Array.of(0x54, 0xb2),\n  AspectRatioType: Uint8Array.of(0x54, 0xb3),\n  ColourSpace: Uint8Array.of(0x2e, 0xb5, 0x24),\n  Colour: Uint8Array.of(0x55, 0xb0),\n  MatrixCoefficients: Uint8Array.of(0x55, 0xb1),\n  BitsPerChannel: Uint8Array.of(0x55, 0xb2),\n  ChromaSubsamplingHorz: Uint8Array.of(0x55, 0xb3),\n  ChromaSubsamplingVert: Uint8Array.of(0x55, 0xb4),\n  CbSubsamplingHorz: Uint8Array.of(0x55, 0xb5),\n  CbSubsamplingVert: Uint8Array.of(0x55, 0xb6),\n  ChromaSitingHorz: Uint8Array.of(0x55, 0xb7),\n  ChromaSitingVert: Uint8Array.of(0x55, 0xb8),\n  Range: Uint8Array.of(0x55, 0xb9),\n  TransferCharacteristics: Uint8Array.of(0x55, 0xba),\n  Primaries: Uint8Array.of(0x55, 0xbb),\n  MaxCLL: Uint8Array.of(0x55, 0xbc),\n  MaxFALL: Uint8Array.of(0x55, 0xbd),\n  MasteringMetadata: Uint8Array.of(0x55, 0xd0),\n  PrimaryRChromaticityX: Uint8Array.of(0x55, 0xd1),\n  PrimaryRChromaticityY: Uint8Array.of(0x55, 0xd2),\n  PrimaryGChromaticityX: Uint8Array.of(0x55, 0xd3),\n  PrimaryGChromaticityY: Uint8Array.of(0x55, 0xd4),\n  PrimaryBChromaticityX: Uint8Array.of(0x55, 0xd5),\n  PrimaryBChromaticityY: Uint8Array.of(0x55, 0xd6),\n  WhitePointChromaticityX: Uint8Array.of(0x55, 0xd7),\n  WhitePointChromaticityY: Uint8Array.of(0x55, 0xd8),\n  LuminanceMax: Uint8Array.of(0x55, 0xd9),\n  LuminanceMin: Uint8Array.of(0x55, 0xda),\n  Audio: Uint8Array.of(0xe1),\n  SamplingFrequency: Uint8Array.of(0xb5),\n  OutputSamplingFrequency: Uint8Array.of(0x78, 0xb5),\n  Channels: Uint8Array.of(0x9f),\n  BitDepth: Uint8Array.of(0x62, 0x64),\n  TrackOperation: Uint8Array.of(0xe2),\n  TrackCombinePlanes: Uint8Array.of(0xe3),\n  TrackPlane: Uint8Array.of(0xe4),\n  TrackPlaneUID: Uint8Array.of(0xe5),\n  TrackPlaneType: Uint8Array.of(0xe6),\n  TrackJoinBlocks: Uint8Array.of(0xe9),\n  TrackJoinUID: Uint8Array.of(0xed),\n  ContentEncodings: Uint8Array.of(0x6d, 0x80),\n  ContentEncoding: Uint8Array.of(0x62, 0x40),\n  ContentEncodingOrder: Uint8Array.of(0x50, 0x31),\n  ContentEncodingScope: Uint8Array.of(0x50, 0x32),\n  ContentEncodingType: Uint8Array.of(0x50, 0x33),\n  ContentCompression: Uint8Array.of(0x50, 0x34),\n  ContentCompAlgo: Uint8Array.of(0x42, 0x54),\n  ContentCompSettings: Uint8Array.of(0x42, 0x55),\n  ContentEncryption: Uint8Array.of(0x50, 0x35),\n  ContentEncAlgo: Uint8Array.of(0x47, 0xe1),\n  ContentEncKeyID: Uint8Array.of(0x47, 0xe2),\n  ContentSignature: Uint8Array.of(0x47, 0xe3),\n  ContentSigKeyID: Uint8Array.of(0x47, 0xe4),\n  ContentSigAlgo: Uint8Array.of(0x47, 0xe5),\n  ContentSigHashAlgo: Uint8Array.of(0x47, 0xe6),\n  Cues: Uint8Array.of(0x1c, 0x53, 0xbb, 0x6b),\n  CuePoint: Uint8Array.of(0xbb),\n  CueTime: Uint8Array.of(0xb3),\n  CueTrackPositions: Uint8Array.of(0xb7),\n  CueTrack: Uint8Array.of(0xf7),\n  CueClusterPosition: Uint8Array.of(0xf1),\n  CueRelativePosition: Uint8Array.of(0xf0),\n  CueDuration: Uint8Array.of(0xb2),\n  CueBlockNumber: Uint8Array.of(0x53, 0x78),\n  CueCodecState: Uint8Array.of(0xea),\n  CueReference: Uint8Array.of(0xdb),\n  CueRefTime: Uint8Array.of(0x96),\n  Attachments: Uint8Array.of(0x19, 0x41, 0xa4, 0x69),\n  AttachedFile: Uint8Array.of(0x61, 0xa7),\n  FileDescription: Uint8Array.of(0x46, 0x7e),\n  FileName: Uint8Array.of(0x46, 0x6e),\n  FileMimeType: Uint8Array.of(0x46, 0x60),\n  FileData: Uint8Array.of(0x46, 0x5c),\n  FileUID: Uint8Array.of(0x46, 0xae),\n  Chapters: Uint8Array.of(0x10, 0x43, 0xa7, 0x70),\n  EditionEntry: Uint8Array.of(0x45, 0xb9),\n  EditionUID: Uint8Array.of(0x45, 0xbc),\n  EditionFlagHidden: Uint8Array.of(0x45, 0xbd),\n  EditionFlagDefault: Uint8Array.of(0x45, 0xdb),\n  EditionFlagOrdered: Uint8Array.of(0x45, 0xdd),\n  EncryptionAlgorithm: Uint8Array.of(0x47, 0xe1),\n  EncryptionKeyID: Uint8Array.of(0x47, 0xe2),\n  ContentEncAESSettings: Uint8Array.of(0x47, 0xe7),\n  AESSettingsCipherMode: Uint8Array.of(0x47, 0xe8),\n  ChapterAtom: Uint8Array.of(0xb6),\n  ChapterUID: Uint8Array.of(0x73, 0xc4),\n  ChapterStringUID: Uint8Array.of(0x56, 0x54),\n  ChapterTimeStart: Uint8Array.of(0x91),\n  ChapterTimeEnd: Uint8Array.of(0x92),\n  ChapterFlagHidden: Uint8Array.of(0x98),\n  ChapterFlagEnabled: Uint8Array.of(0x45, 0x98),\n  ChapterSegmentUID: Uint8Array.of(0x6e, 0x67),\n  ChapterSegmentEditionUID: Uint8Array.of(0x6e, 0xbc),\n  ChapterPhysicalEquiv: Uint8Array.of(0x63, 0xc3),\n  ChapterTrack: Uint8Array.of(0x8f),\n  ChapterTrackNumber: Uint8Array.of(0x89),\n  ChapterDisplay: Uint8Array.of(0x80),\n  ChapString: Uint8Array.of(0x85),\n  ChapLanguage: Uint8Array.of(0x43, 0x7c),\n  ChapCountry: Uint8Array.of(0x43, 0x7e),\n  ChapProcess: Uint8Array.of(0x69, 0x44),\n  ChapProcessCodecID: Uint8Array.of(0x69, 0x55),\n  ChapProcessPrivate: Uint8Array.of(0x45, 0x0d),\n  ChapProcessCommand: Uint8Array.of(0x69, 0x11),\n  ChapProcessTime: Uint8Array.of(0x69, 0x22),\n  ChapProcessData: Uint8Array.of(0x69, 0x33),\n  Tags: Uint8Array.of(0x12, 0x54, 0xc3, 0x67),\n  Tag: Uint8Array.of(0x73, 0x73),\n  Targets: Uint8Array.of(0x63, 0xc0),\n  TargetTypeValue: Uint8Array.of(0x68, 0xca),\n  TargetType: Uint8Array.of(0x63, 0xca),\n  TagTrackUID: Uint8Array.of(0x63, 0xc5),\n  TagEditionUID: Uint8Array.of(0x63, 0xc9),\n  TagChapterUID: Uint8Array.of(0x63, 0xc4),\n  TagAttachmentUID: Uint8Array.of(0x63, 0xc6),\n  SimpleTag: Uint8Array.of(0x67, 0xc8),\n  TagName: Uint8Array.of(0x45, 0xa3),\n  TagLanguage: Uint8Array.of(0x44, 0x7a),\n  TagDefault: Uint8Array.of(0x44, 0x84),\n  TagString: Uint8Array.of(0x44, 0x87),\n  TagBinary: Uint8Array.of(0x44, 0x85),\n};\n","export * from \"./ebml\";\nexport * from \"./id\";\nexport * from \"./typedArrayUtils\";\n","import memoize from \"lodash/memoize\";\n\nexport const numberToByteArray = (\n  num: number,\n  byteLength: number = getNumberByteLength(num)\n): Uint8Array => {\n  let byteArray;\n  if (byteLength === 1) {\n    byteArray = new DataView(new ArrayBuffer(1));\n    byteArray.setUint8(0, num);\n  } else if (byteLength === 2) {\n    byteArray = new DataView(new ArrayBuffer(2));\n    byteArray.setUint16(0, num);\n  } else if (byteLength === 3) {\n    byteArray = new DataView(new ArrayBuffer(3));\n    byteArray.setUint8(0, num >> 16);\n    byteArray.setUint16(1, num & 0xffff);\n  } else if (byteLength === 4) {\n    byteArray = new DataView(new ArrayBuffer(4));\n    byteArray.setUint32(0, num);\n  } else if (/* byteLength === 5 && */ num < 0xffffffff) {\n    // 4GB (upper limit for int32) should be enough in most cases\n    byteArray = new DataView(new ArrayBuffer(5));\n    byteArray.setUint32(1, num);\n  } else if (byteLength === 5) {\n    // Naive emulations of int64 bitwise opreators\n    byteArray = new DataView(new ArrayBuffer(5));\n    byteArray.setUint8(0, (num / 0x100000000) | 0);\n    byteArray.setUint32(1, num % 0x100000000);\n  } else if (byteLength === 6) {\n    byteArray = new DataView(new ArrayBuffer(6));\n    byteArray.setUint16(0, (num / 0x100000000) | 0);\n    byteArray.setUint32(2, num % 0x100000000);\n  } else if (byteLength === 7) {\n    byteArray = new DataView(new ArrayBuffer(7));\n    byteArray.setUint8(0, (num / 0x1000000000000) | 0);\n    byteArray.setUint16(1, (num / 0x100000000) & 0xffff);\n    byteArray.setUint32(3, num % 0x100000000);\n  } else if (byteLength === 8) {\n    byteArray = new DataView(new ArrayBuffer(8));\n    byteArray.setUint32(0, (num / 0x100000000) | 0);\n    byteArray.setUint32(4, num % 0x100000000);\n  } else {\n    throw new Error(\n      \"EBML.typedArrayUtils.numberToByteArray: byte length must be less than or equal to 8\"\n    );\n  }\n  return new Uint8Array(byteArray.buffer);\n};\n\nexport const stringToByteArray = memoize((str: string): Uint8Array => {\n  return Uint8Array.from(Array.from(str).map((_) => _.codePointAt(0)!));\n});\n\nexport function getNumberByteLength(num: number | bigint): number {\n  if (num < 0) {\n    throw new Error(\n      \"EBML.typedArrayUtils.getNumberByteLength: negative number not implemented\"\n    );\n  } else if (num < 0x100) {\n    return 1;\n  } else if (num < 0x10000) {\n    return 2;\n  } else if (num < 0x1000000) {\n    return 3;\n  } else if (num < 0x100000000) {\n    return 4;\n  } else if (num < 0x10000000000) {\n    return 5;\n  } else if (num < 0x1000000000000) {\n    return 6;\n  } else if (num < 0x20000000000000n) {\n    return 7;\n  } else {\n    throw new Error(\n      \"EBML.typedArrayUtils.getNumberByteLength: number exceeds Number.MAX_SAFE_INTEGER\"\n    );\n  }\n}\n\nexport const int16Bit = memoize((num: number): Uint8Array => {\n  const ab = new ArrayBuffer(2);\n  new DataView(ab).setInt16(0, num);\n  return new Uint8Array(ab);\n});\n\nexport const float32bit = memoize((num: number): Uint8Array => {\n  const ab = new ArrayBuffer(4);\n  new DataView(ab).setFloat32(0, num);\n  return new Uint8Array(ab);\n});\n\nexport const dumpBytes = (b: ArrayBuffer): string => {\n  return Array.from(new Uint8Array(b))\n    .map((_) => `0x${_.toString(16)}`)\n    .join(\", \");\n};\n","import { createCipheriv, randomBytes, randomFillSync } from \"crypto\";\n\nimport { BitWriter2, BufferChain } from \"../../../common/src\";\nimport { OpusRtpPayload } from \"..\";\nimport * as EBML from \"./ebml\";\n\nexport class WEBMBuilder {\n  readonly ebmlHeader = EBML.build(\n    EBML.element(EBML.ID.EBML, [\n      EBML.element(EBML.ID.EBMLVersion, EBML.number(1)),\n      EBML.element(EBML.ID.EBMLReadVersion, EBML.number(1)),\n      EBML.element(EBML.ID.EBMLMaxIDLength, EBML.number(4)),\n      EBML.element(EBML.ID.EBMLMaxSizeLength, EBML.number(8)),\n      EBML.element(EBML.ID.DocType, EBML.string(\"webm\")),\n      EBML.element(EBML.ID.DocTypeVersion, EBML.number(2)),\n      EBML.element(EBML.ID.DocTypeReadVersion, EBML.number(2)),\n    ])\n  );\n  trackEntries: EBML.EBMLData[] = [];\n  private trackIvs: { [trackNumber: number]: Uint32Array } = {};\n  trackKeyIds: { [trackNumber: number]: Buffer } = {};\n  encryptionKey?: Buffer;\n  readonly encryptionKeyID = randomBytes(16);\n\n  constructor(\n    tracks: {\n      width?: number;\n      height?: number;\n      kind: \"audio\" | \"video\";\n      codec: SupportedCodec;\n      trackNumber: number;\n    }[],\n    encryptionKey?: Buffer\n  ) {\n    this.encryptionKey = encryptionKey;\n\n    this.trackEntries = tracks.map(\n      ({ width, height, kind, codec, trackNumber }) => {\n        const track = this.createTrackEntry(kind, trackNumber, codec, {\n          width,\n          height,\n        });\n        const ivCounter = new Uint32Array(2);\n        randomFillSync(ivCounter);\n        this.trackIvs[trackNumber] = ivCounter;\n\n        return track;\n      }\n    );\n  }\n\n  createTrackEntry(\n    kind: string,\n    trackNumber: number,\n    codec: string,\n    {\n      width,\n      height,\n    }: Partial<{\n      kind: string;\n      width: number;\n      height: number;\n    }> = {}\n  ) {\n    const trackElements: EBML.EBMLData[] = [];\n\n    if (kind === \"video\") {\n      if (!width || !height) {\n        throw new Error();\n      }\n      trackElements.push(\n        EBML.element(EBML.ID.Video, [\n          EBML.element(EBML.ID.PixelWidth, EBML.number(width)),\n          EBML.element(EBML.ID.PixelHeight, EBML.number(height)),\n        ])\n      );\n    } else {\n      trackElements.push(\n        EBML.element(EBML.ID.Audio, [\n          EBML.element(EBML.ID.SamplingFrequency, EBML.float(48000.0)),\n          EBML.element(EBML.ID.Channels, EBML.number(2)),\n        ])\n      );\n      // only support OPUS\n      trackElements.push(\n        EBML.element(\n          EBML.ID.CodecPrivate,\n          EBML.bytes(OpusRtpPayload.createCodecPrivate())\n        )\n      );\n    }\n\n    if (this.encryptionKey) {\n      const encryptionKeyID = this.encryptionKeyID;\n      this.trackKeyIds[trackNumber] = encryptionKeyID;\n\n      trackElements.push(\n        EBML.element(\n          EBML.ID.ContentEncodings,\n          EBML.element(EBML.ID.ContentEncoding, [\n            EBML.element(EBML.ID.ContentEncodingOrder, EBML.number(0)),\n            EBML.element(EBML.ID.ContentEncodingScope, EBML.number(1)),\n            EBML.element(EBML.ID.ContentEncodingType, EBML.number(1)),\n            EBML.element(EBML.ID.ContentEncryption, [\n              EBML.element(EBML.ID.EncryptionAlgorithm, EBML.number(5)),\n              EBML.element(\n                EBML.ID.EncryptionKeyID,\n                EBML.bytes(encryptionKeyID)\n              ),\n              EBML.element(\n                EBML.ID.ContentEncAESSettings,\n                EBML.element(EBML.ID.AESSettingsCipherMode, EBML.number(1))\n              ),\n            ]),\n          ])\n        )\n      );\n    }\n\n    const trackEntry = EBML.element(EBML.ID.TrackEntry, [\n      EBML.element(EBML.ID.TrackNumber, EBML.number(trackNumber)),\n      EBML.element(EBML.ID.TrackUID, EBML.number(trackNumber)),\n      EBML.element(EBML.ID.CodecName, EBML.string(codec)),\n      EBML.element(EBML.ID.TrackType, EBML.number(kind === \"video\" ? 1 : 2)),\n      EBML.element(\n        EBML.ID.CodecID,\n        EBML.string(`${kind === \"video\" ? \"V\" : \"A\"}_${codec}`)\n      ),\n      ...trackElements,\n    ]);\n    return trackEntry;\n  }\n\n  createSegment(\n    /**ms */\n    duration?: number\n  ) {\n    const elements = [\n      EBML.element(EBML.ID.TimecodeScale, EBML.number(millisecond)),\n      EBML.element(EBML.ID.MuxingApp, EBML.string(\"webrtc\")),\n      EBML.element(EBML.ID.WritingApp, EBML.string(\"webrtc\")),\n    ];\n    if (duration != undefined) {\n      elements.push(EBML.element(EBML.ID.Duration, EBML.float(duration)));\n    }\n    return EBML.build(\n      EBML.unknownSizeElement(EBML.ID.Segment, [\n        EBML.element(EBML.ID.SeekHead, []),\n        EBML.element(EBML.ID.Info, elements),\n        EBML.element(EBML.ID.Tracks, this.trackEntries),\n      ])\n    );\n  }\n\n  createDuration(\n    /**ms */\n    duration: number\n  ) {\n    return EBML.build(EBML.element(EBML.ID.Duration, EBML.float(duration)));\n  }\n\n  createCuePoint(\n    relativeTimestamp: number,\n    trackNumber: number,\n    clusterPosition: number,\n    blockNumber: number\n  ) {\n    return EBML.element(EBML.ID.CuePoint, [\n      EBML.element(EBML.ID.CueTime, EBML.number(relativeTimestamp)),\n      EBML.element(EBML.ID.CueTrackPositions, [\n        EBML.element(EBML.ID.CueTrack, EBML.number(trackNumber)),\n        EBML.element(EBML.ID.CueClusterPosition, EBML.number(clusterPosition)),\n        EBML.element(EBML.ID.CueBlockNumber, EBML.number(blockNumber)),\n      ]),\n    ]);\n  }\n\n  createCues(cuePoints: EBML.EBMLData[]) {\n    return EBML.build(EBML.element(EBML.ID.Cues, cuePoints));\n  }\n\n  createCluster(timecode: number) {\n    return EBML.build(\n      EBML.unknownSizeElement(EBML.ID.Cluster, [\n        EBML.element(EBML.ID.Timecode, EBML.number(timecode)),\n      ])\n    );\n  }\n\n  createSimpleBlock(\n    frame: Buffer,\n    isKeyframe: boolean,\n    trackNumber: number,\n    relativeTimestamp: number\n  ) {\n    const elementId = Buffer.from([0xa3]);\n\n    if (this.encryptionKey) {\n      // 4.7 Signal Byte Format\n      //  0 1 2 3 4 5 6 7\n      // +-+-+-+-+-+-+-+-+\n      // |X|   RSV   |P|E|\n      // +-+-+-+-+-+-+-+-+\n      const singleByte = new BitWriter2(8).set(0).set(0, 5).set(0).set(1);\n\n      const iv = Buffer.alloc(16);\n      const ivCounter = this.trackIvs[trackNumber];\n      iv.writeUInt32BE(ivCounter[0], 0);\n      iv.writeUInt32BE(ivCounter[1], 4);\n      ivCounter[1]++;\n      if (ivCounter[1] === 0) {\n        ivCounter[0]++;\n      }\n\n      const cipher = createCipheriv(\"AES-128-CTR\", this.encryptionKey, iv);\n\n      frame = Buffer.concat([\n        singleByte.buffer,\n        iv.subarray(0, 8),\n        cipher.update(frame),\n        cipher.final(),\n      ]);\n    }\n\n    const contentSize: Uint8Array = EBML.vintEncodedNumber(\n      1 + 2 + 1 + frame.length\n    ).bytes;\n\n    const keyframe = isKeyframe ? 1 : 0;\n    const flags = new BitWriter2(8)\n      .set(keyframe)\n      .set(0, 3)\n      .set(0)\n      .set(0, 2)\n      .set(0);\n\n    const simpleBlock = Buffer.concat([\n      elementId,\n      contentSize,\n      EBML.vintEncodedNumber(trackNumber).bytes,\n      new BufferChain(2).writeInt16BE(relativeTimestamp).buffer,\n      new BufferChain(1).writeUInt8(flags.value).buffer,\n      frame,\n    ]);\n    return simpleBlock;\n  }\n}\n\nconst supportedCodecs = [\"MPEG4/ISO/AVC\", \"VP8\", \"VP9\", \"AV1\", \"OPUS\"] as const;\nexport type SupportedCodec = typeof supportedCodecs[number];\nconst millisecond = 1000000;\n","export function enumerate<T>(arr: T[]): [number, T][] {\n  return arr.map((v, i) => [i, v]);\n}\n\nexport function growBufferSize(buf: Buffer, size: number) {\n  const glow = Buffer.alloc(size);\n  buf.copy(glow);\n  return glow;\n}\n\nexport function Int(v: number) {\n  return parseInt(v.toString(), 10);\n}\n","import \"buffer\";\nexport * from \"../../common/src\";\nexport * from \"./codec\";\nexport * from \"./processor\";\nexport * from \"./rtcp/header\";\nexport * from \"./rtcp/psfb\";\nexport * from \"./rtcp/psfb/pictureLossIndication\";\nexport * from \"./rtcp/psfb/remb\";\nexport * from \"./rtcp/rr\";\nexport * from \"./rtcp/rtcp\";\nexport * from \"./rtcp/rtpfb\";\nexport * from \"./rtcp/rtpfb/nack\";\nexport * from \"./rtcp/rtpfb/twcc\";\nexport * from \"./rtcp/sdes\";\nexport * from \"./rtcp/sr\";\nexport * from \"./rtp/red/encoder\";\nexport * from \"./rtp/red/handler\";\nexport * from \"./rtp/red/packet\";\nexport * from \"./rtp/rtp\";\nexport * from \"./srtp/srtcp\";\nexport * from \"./srtp/srtp\";\n","import debug from \"debug\";\nimport Event from \"rx.mini\";\n\nimport { RtpHeader, RtpPacket, uint16Add, uint16Gt } from \"..\";\nimport { dePacketizeRtpPackets } from \"../codec\";\nimport { enumerate } from \"../helper\";\nimport { Processor } from \"./interface\";\n\nconst path = `werift-rtp : packages/rtp/src/processor/depacketizer.ts`;\nconst log = debug(path);\n\nexport type DepacketizerInput = {\n  rtp?: RtpPacket;\n  /**ms */\n  time?: number;\n  eol?: boolean;\n};\n\nexport interface DepacketizerOutput {\n  frame?: CodecFrame;\n  eol?: boolean;\n}\n\nexport interface CodecFrame {\n  data: Buffer;\n  isKeyframe: boolean;\n  /**ms */\n  time: number;\n  [key: string]: any;\n}\n\nexport interface DepacketizerOptions {\n  isFinalPacketInSequence?: (header: RtpHeader) => boolean;\n  waitForKeyframe?: boolean;\n}\n\nexport class DepacketizeBase\n  implements Processor<DepacketizerInput, DepacketizerOutput>\n{\n  private buffering: DepacketizerInput[] = [];\n  private lastSeqNum?: number;\n  private frameBroken = false;\n  private keyframeReceived = false;\n  sequence = 0;\n  readonly onNeedKeyFrame = new Event();\n\n  constructor(\n    private codec: string,\n    private options: DepacketizerOptions = {}\n  ) {}\n\n  processInput(input: DepacketizerInput): DepacketizerOutput[] {\n    const output: DepacketizerOutput[] = [];\n    if (!input.rtp) {\n      if (input.eol) {\n        output.push({ eol: true });\n      }\n      return output;\n    }\n\n    if (this.options.isFinalPacketInSequence) {\n      const isFinal = this.checkFinalPacket(input);\n      if (isFinal) {\n        try {\n          const { data, isKeyframe, sequence, timestamp } =\n            dePacketizeRtpPackets(\n              this.codec,\n              this.buffering.map((b) => b.rtp!)\n            );\n\n          if (isKeyframe) {\n            this.keyframeReceived = true;\n          }\n\n          if (this.options.waitForKeyframe && this.keyframeReceived === false) {\n            this.onNeedKeyFrame.execute();\n            return [];\n          }\n\n          if (!this.frameBroken) {\n            const time = this.buffering.at(-1)?.time ?? 0;\n            output.push({\n              frame: {\n                data,\n                isKeyframe,\n                time,\n                sequence: this.sequence++,\n                rtpSeq: sequence,\n                timestamp,\n              },\n            });\n          }\n\n          if (this.frameBroken) {\n            this.frameBroken = false;\n          }\n\n          this.clearBuffer();\n\n          return output;\n        } catch (error) {\n          log(\"error\", error, input);\n          this.clearBuffer();\n        }\n      }\n    } else {\n      try {\n        const { data, isKeyframe, sequence, timestamp } = dePacketizeRtpPackets(\n          this.codec,\n          [input.rtp]\n        );\n        output.push({\n          frame: {\n            data,\n            isKeyframe,\n            time: input.time!,\n            sequence: this.sequence++,\n            rtpSeq: sequence,\n            timestamp,\n          },\n        });\n        return output;\n      } catch (error) {\n        log(\"error\", error, input);\n      }\n    }\n    return [];\n  }\n\n  private clearBuffer() {\n    this.buffering.forEach((b) => b.rtp!.clear());\n    this.buffering = [];\n  }\n\n  private checkFinalPacket({ rtp, time }: DepacketizerInput): boolean {\n    if (!this.options.isFinalPacketInSequence) {\n      throw new Error(\"isFinalPacketInSequence not exist\");\n    }\n\n    const { sequenceNumber } = rtp!.header;\n    if (this.lastSeqNum != undefined) {\n      const expect = uint16Add(this.lastSeqNum, 1);\n      if (uint16Gt(expect, sequenceNumber)) {\n        log(\"unexpect\", { expect, sequenceNumber });\n        return false;\n      }\n      if (uint16Gt(sequenceNumber, expect)) {\n        log(\"packet lost happened\", { expect, sequenceNumber });\n        this.frameBroken = true;\n        this.clearBuffer();\n      }\n    }\n\n    this.buffering.push({ rtp, time });\n    this.lastSeqNum = sequenceNumber;\n\n    let finalPacket: number | undefined;\n    for (const [i, { rtp }] of enumerate(this.buffering)) {\n      if (this.options.isFinalPacketInSequence(rtp!.header)) {\n        finalPacket = i;\n        break;\n      }\n    }\n    if (finalPacket == undefined) {\n      return false;\n    }\n\n    return true;\n  }\n}\n","import {\n  DepacketizeBase,\n  DepacketizerInput,\n  DepacketizerOptions,\n  DepacketizerOutput,\n} from \"./depacketizer\";\n\nexport class DepacketizeCallback extends DepacketizeBase {\n  private cb!: (input: DepacketizerOutput) => void;\n\n  constructor(codec: string, options: DepacketizerOptions = {}) {\n    super(codec, options);\n  }\n\n  pipe = (cb: (input: DepacketizerOutput) => void) => {\n    this.cb = cb;\n    return this;\n  };\n\n  input = (input: DepacketizerInput) => {\n    for (const output of this.processInput(input)) {\n      this.cb(output);\n    }\n  };\n}\n","import { TransformStream } from \"stream/web\";\n\nimport {\n  DepacketizeBase,\n  DepacketizerInput,\n  DepacketizerOptions,\n  DepacketizerOutput,\n} from \"./depacketizer\";\n\nexport const depacketizeTransformer = (\n  ...args: ConstructorParameters<typeof DepacketizeTransformer>\n) => new DepacketizeTransformer(...args).transform;\n\nclass DepacketizeTransformer extends DepacketizeBase {\n  transform: TransformStream<DepacketizerInput, DepacketizerOutput>;\n\n  constructor(codec: string, options: DepacketizerOptions = {}) {\n    super(codec, options);\n\n    this.transform = new TransformStream({\n      transform: (input, output) => {\n        for (const res of this.processInput(input)) {\n          output.enqueue(res);\n        }\n      },\n    });\n  }\n}\n","export * from \"./depacketizer\";\nexport * from \"./depacketizerCallback\";\nexport * from \"./depacketizerTransformer\";\nexport * from \"./jitterBuffer\";\nexport * from \"./jitterBufferCallback\";\nexport * from \"./jitterBufferTransformer\";\nexport * from \"./lipsync\";\nexport * from \"./lipsyncCallback\";\nexport * from \"./ntpTime\";\nexport * from \"./ntpTimeCallback\";\nexport * from \"./rtpTime\";\nexport * from \"./rtpTimeCallback\";\nexport * from \"./source\";\nexport * from \"./webm\";\nexport * from \"./webmCallback\";\nexport * from \"./webmStream\";\n","import debug from \"debug\";\n\nimport {\n  RequireAtLeastOne,\n  RtpPacket,\n  uint16Add,\n  uint16Gte,\n  uint32Add,\n  uint32Gt,\n} from \"..\";\nimport { Processor } from \"./interface\";\nimport { RtpOutput } from \"./source\";\n\nconst srcPath = `werift-rtp : packages/rtp/src/processor/jitterBuffer.ts`;\nconst log = debug(srcPath);\n\nexport type JitterBufferInput = RtpOutput;\n\nexport interface JitterBufferOutput extends RtpOutput {\n  isPacketLost?: { from: number; to: number };\n}\n\nexport class JitterBufferBase\n  implements Processor<JitterBufferInput, JitterBufferOutput>\n{\n  private options: JitterBufferOptions;\n  /**uint16 */\n  private presentSeqNum?: number;\n  private rtpBuffer: { [sequenceNumber: number]: RtpPacket } = {};\n  private get expectNextSeqNum() {\n    return uint16Add(this.presentSeqNum!, 1);\n  }\n\n  constructor(\n    public clockRate: number,\n    options: Partial<JitterBufferOptions> = {}\n  ) {\n    this.options = {\n      latency: options.latency ?? 200,\n      bufferSize: options.bufferSize ?? 10000,\n    };\n  }\n\n  processInput(input: JitterBufferInput): JitterBufferOutput[] {\n    const output: JitterBufferOutput[] = [];\n\n    if (!input.rtp) {\n      if (input.eol) {\n        const packets = this.sortAndClearBuffer(this.rtpBuffer);\n        for (const rtp of packets) {\n          output.push({ rtp });\n        }\n        output.push({ eol: true });\n      }\n      return output;\n    }\n\n    const { packets, timeoutSeqNum } = this.processRtp(input.rtp);\n\n    if (timeoutSeqNum != undefined) {\n      const isPacketLost = {\n        from: this.expectNextSeqNum,\n        to: timeoutSeqNum,\n      };\n      this.presentSeqNum = input.rtp.header.sequenceNumber;\n      output.push({ isPacketLost });\n      if (packets) {\n        for (const rtp of [...packets, input.rtp]) {\n          output.push({ rtp });\n        }\n      }\n      return output;\n    } else {\n      if (packets) {\n        for (const rtp of packets) {\n          output.push({ rtp });\n        }\n        return output;\n      }\n      return [];\n    }\n  }\n\n  private processRtp(rtp: RtpPacket): RequireAtLeastOne<{\n    packets: RtpPacket[];\n    timeoutSeqNum: number;\n    nothing: undefined;\n  }> {\n    const { sequenceNumber, timestamp } = rtp.header;\n\n    // init\n    if (this.presentSeqNum == undefined) {\n      this.presentSeqNum = sequenceNumber;\n      return { packets: [rtp] };\n    }\n\n    // duplicate\n    if (uint16Gte(this.presentSeqNum, sequenceNumber)) {\n      log(\"duplicate\", { sequenceNumber });\n      return { nothing: undefined };\n    }\n\n    // expect\n    if (sequenceNumber === this.expectNextSeqNum) {\n      this.presentSeqNum = sequenceNumber;\n\n      const rtpBuffer = this.resolveBuffer(uint16Add(sequenceNumber, 1));\n      this.presentSeqNum =\n        rtpBuffer.at(-1)?.header.sequenceNumber ?? this.presentSeqNum;\n\n      this.disposeTimeoutPackets(timestamp);\n\n      return { packets: [rtp, ...rtpBuffer] };\n    }\n\n    this.pushRtpBuffer(rtp);\n\n    const { latestTimeoutSeqNum, sorted } =\n      this.disposeTimeoutPackets(timestamp);\n\n    if (latestTimeoutSeqNum) {\n      return { timeoutSeqNum: latestTimeoutSeqNum, packets: sorted };\n    } else {\n      return { nothing: undefined };\n    }\n  }\n\n  private pushRtpBuffer(rtp: RtpPacket) {\n    if (Object.values(this.rtpBuffer).length > this.options.bufferSize) {\n      log(\"buffer over flow\");\n      return;\n    }\n    // log(\"pushRtpBuffer\", { seq: rtp.header.sequenceNumber });\n    this.rtpBuffer[rtp.header.sequenceNumber] = rtp;\n  }\n\n  private resolveBuffer(seqNumFrom: number) {\n    const resolve: RtpPacket[] = [];\n\n    for (let index = seqNumFrom; ; index = uint16Add(index, 1)) {\n      const rtp = this.rtpBuffer[index];\n      if (rtp) {\n        resolve.push(rtp);\n        delete this.rtpBuffer[index];\n      } else {\n        break;\n      }\n    }\n    // if (resolve.length > 0) {\n    //   log(\n    //     \"resolveBuffer\",\n    //     resolve.map((r) => r.header.sequenceNumber)\n    //   );\n    // }\n    return resolve;\n  }\n\n  private sortAndClearBuffer(rtpBuffer: {\n    [sequenceNumber: number]: RtpPacket;\n  }) {\n    const buffer: RtpPacket[] = [];\n    for (let index = this.presentSeqNum ?? 0; ; index = uint16Add(index, 1)) {\n      const rtp = rtpBuffer[index];\n      if (rtp) {\n        buffer.push(rtp);\n        delete rtpBuffer[index];\n      }\n      if (Object.values(rtpBuffer).length === 0) {\n        break;\n      }\n    }\n    return buffer;\n  }\n\n  private disposeTimeoutPackets(baseTimestamp: number) {\n    let latestTimeoutSeqNum: number | undefined;\n\n    const packets = Object.values(this.rtpBuffer)\n      .map((rtp) => {\n        const { timestamp, sequenceNumber } = rtp.header;\n\n        if (uint32Gt(timestamp, baseTimestamp)) {\n          return;\n        }\n\n        const elapsedSec =\n          uint32Add(baseTimestamp, -timestamp) / this.clockRate;\n\n        if (elapsedSec * 1000 > this.options.latency) {\n          log(\"timeout packet\", {\n            sequenceNumber,\n            elapsedSec,\n            baseTimestamp,\n            timestamp,\n          });\n\n          if (latestTimeoutSeqNum == undefined) {\n            latestTimeoutSeqNum = sequenceNumber;\n          }\n          // 現在のSeqNumとの差が最も大きいSeqNumを探す\n          if (\n            uint16Add(sequenceNumber, -this.presentSeqNum!) >\n            uint16Add(latestTimeoutSeqNum, -this.presentSeqNum!)\n          ) {\n            latestTimeoutSeqNum = sequenceNumber;\n          }\n\n          const packet = this.rtpBuffer[sequenceNumber];\n          delete this.rtpBuffer[sequenceNumber];\n          return packet;\n        }\n      })\n      .flatMap((p): RtpPacket => p as RtpPacket)\n      .filter((p) => p);\n\n    const sorted = this.sortAndClearBuffer(\n      packets.reduce((acc, cur) => {\n        acc[cur.header.sequenceNumber] = cur;\n        return acc;\n      }, {})\n    );\n\n    return { latestTimeoutSeqNum, sorted };\n  }\n}\n\nexport interface JitterBufferOptions {\n  /**milliseconds */\n  latency: number;\n  bufferSize: number;\n}\n","import {\n  JitterBufferBase,\n  JitterBufferInput,\n  JitterBufferOptions,\n  JitterBufferOutput,\n} from \"./jitterBuffer\";\n\nexport class JitterBufferCallback extends JitterBufferBase {\n  private cb!: (input: JitterBufferOutput) => void;\n  constructor(\n    public clockRate: number,\n    options: Partial<JitterBufferOptions> = {}\n  ) {\n    super(clockRate, options);\n  }\n\n  pipe = (cb: (input: JitterBufferOutput) => void) => {\n    this.cb = cb;\n    return this;\n  };\n\n  input = (input: JitterBufferInput) => {\n    for (const output of this.processInput(input)) {\n      this.cb(output);\n    }\n  };\n}\n","import { TransformStream } from \"stream/web\";\n\nimport {\n  JitterBufferBase,\n  JitterBufferInput,\n  JitterBufferOptions,\n  JitterBufferOutput,\n} from \"./jitterBuffer\";\n\nexport const jitterBufferTransformer = (\n  ...args: ConstructorParameters<typeof JitterBufferTransformer>\n) => new JitterBufferTransformer(...args).transform;\n\nexport class JitterBufferTransformer extends JitterBufferBase {\n  transform: TransformStream<JitterBufferInput, JitterBufferOutput>;\n\n  constructor(\n    public clockRate: number,\n    options: Partial<JitterBufferOptions> = {}\n  ) {\n    super(clockRate, options);\n\n    this.transform = new TransformStream({\n      transform: (input, output) => {\n        for (const res of this.processInput(input)) {\n          output.enqueue(res);\n        }\n      },\n    });\n  }\n}\n","import { int } from \"../../../common/src\";\nimport { CodecFrame } from \"./depacketizer\";\nimport { AVProcessor } from \"./interface\";\n\nexport type LipsyncInput = {\n  frame?: CodecFrame;\n  eol?: boolean;\n};\n\nexport type LipsyncOutput = {\n  frame?: CodecFrame;\n  eol?: boolean;\n};\n\nexport class LipsyncBase implements AVProcessor<LipsyncInput> {\n  bufferLength: number;\n  /**ms */\n  baseTime?: number;\n  audioBuffer: (LipsyncInput & {\n    elapsed: number;\n    kind: string;\n    [key: string]: any;\n  })[][];\n  videoBuffer: (LipsyncInput & {\n    elapsed: number;\n    kind: string;\n    [key: string]: any;\n  })[][];\n  stopped = false;\n  /**ms */\n  private interval: number;\n  private started = false;\n  /**ms */\n  lastCommited = 0;\n\n  constructor(\n    private audioOutput: (output: LipsyncOutput) => void,\n    private videoOutput: (output: LipsyncOutput) => void,\n    private options: Partial<LipSyncOptions> = {}\n  ) {\n    this.bufferLength = this.options.bufferLength ?? 50;\n    this.audioBuffer = [...new Array(this.bufferLength)].map(() => []);\n    this.videoBuffer = [...new Array(this.bufferLength)].map(() => []);\n    this.interval = this.options.interval ?? 500;\n  }\n\n  private start() {\n    // 2列目にカーソルが移ってから処理を始めることで1列目の処理を完了できる\n    if ([...this.audioBuffer[1], ...this.videoBuffer[1]].length === 0) {\n      return;\n    }\n\n    if (this.started) {\n      return;\n    }\n    this.started = true;\n\n    let index = 0;\n    setInterval(() => {\n      const joined = [\n        ...this.audioBuffer[index],\n        ...this.videoBuffer[index],\n      ].filter((b) => b.elapsed >= this.lastCommited);\n      const sorted = joined.sort((a, b) => a.frame!.time - b.frame!.time);\n      this.audioBuffer[index] = [];\n      this.videoBuffer[index] = [];\n\n      for (const output of sorted) {\n        if (output.kind === \"audio\") {\n          this.audioOutput(output);\n        } else {\n          this.videoOutput(output);\n        }\n        this.lastCommited = output.elapsed;\n      }\n\n      index++;\n      if (index === this.bufferLength) {\n        index = 0;\n      }\n    }, this.interval);\n  }\n\n  processAudioInput = ({ frame, eol }: LipsyncInput) => {\n    if (!frame) {\n      this.stopped = true;\n      this.audioOutput({ eol });\n      return;\n    }\n    if (this.stopped) {\n      return;\n    }\n\n    if (this.baseTime == undefined) {\n      this.baseTime = frame.time;\n    }\n\n    /**ms */\n    const elapsed = frame.time - this.baseTime;\n    if (elapsed < 0 || elapsed < this.lastCommited) {\n      return;\n    }\n    const index = int(elapsed / this.interval) % this.bufferLength;\n    this.audioBuffer[index].push({\n      frame,\n      elapsed,\n      kind: \"audio\",\n      seq: frame.sequence,\n    });\n\n    this.start();\n  };\n\n  processVideoInput = ({ frame, eol }: LipsyncInput) => {\n    if (!frame) {\n      this.stopped = true;\n      this.videoOutput({ eol });\n      return;\n    }\n    if (this.stopped) {\n      return;\n    }\n\n    if (this.baseTime == undefined) {\n      this.baseTime = frame.time;\n    }\n\n    /**ms */\n    const elapsed = frame.time - this.baseTime;\n    if (elapsed < 0 || elapsed < this.lastCommited) {\n      return;\n    }\n    const index = int(elapsed / this.interval) % this.bufferLength;\n    this.videoBuffer[index].push({\n      frame,\n      elapsed,\n      kind: \"video\",\n      seq: frame.sequence,\n    });\n\n    this.start();\n  };\n}\n\nexport interface LipSyncOptions {\n  interval: number;\n  bufferLength: number;\n}\n","import { LipsyncBase, LipSyncOptions, LipsyncOutput } from \"./lipsync\";\n\nexport class LipsyncCallback extends LipsyncBase {\n  private audioCb!: (input: LipsyncOutput) => void;\n  private videoCb!: (input: LipsyncOutput) => void;\n  constructor(options: Partial<LipSyncOptions> = {}) {\n    super(\n      (output) => {\n        if (this.audioCb) {\n          this.audioCb(output);\n        }\n      },\n      (output) => {\n        if (this.videoCb) {\n          this.videoCb(output);\n        }\n      },\n      options\n    );\n  }\n\n  pipeAudio = (cb: (input: LipsyncOutput) => void) => {\n    this.audioCb = cb;\n  };\n  pipeVideo = (cb: (input: LipsyncOutput) => void) => {\n    this.videoCb = cb;\n  };\n\n  inputAudio = this.processAudioInput;\n  inputVideo = this.processVideoInput;\n}\n","import debug from \"debug\";\n\nimport {\n  bufferReader,\n  bufferWriter,\n  RtcpPacket,\n  RtcpSrPacket,\n  RtpPacket,\n} from \"..\";\nimport { Max32bit } from \"../processor_old/lipsync\";\nimport { Processor } from \"./interface\";\n\nconst log = debug(\"werift-rtp : packages/rtp/src/processor/ntpTime.ts\");\n\nexport type NtpTimeInput = {\n  rtp?: RtpPacket;\n  eol?: boolean;\n  rtcp?: RtcpPacket;\n};\n\nexport interface NtpTimeOutput {\n  rtp?: RtpPacket;\n  /**ms */\n  time?: number;\n  eol?: boolean;\n}\n\nexport class syncRtpBase implements Processor<NtpTimeInput, NtpTimeOutput> {\n  ntpTimestamp?: bigint;\n  rtpTimestamp?: number;\n\n  buffer: RtpPacket[] = [];\n\n  constructor(public clockRate: number) {}\n\n  processInput({ rtcp, rtp, eol }: NtpTimeInput): NtpTimeOutput[] {\n    if (eol) {\n      return [{ eol: true }];\n    }\n\n    if (rtcp && rtcp instanceof RtcpSrPacket && !this.ntpTimestamp) {\n      const { ntpTimestamp, rtpTimestamp } = rtcp.senderInfo;\n      this.ntpTimestamp = ntpTimestamp;\n      this.rtpTimestamp = rtpTimestamp;\n    }\n\n    if (rtp) {\n      this.buffer.push(rtp);\n\n      const res: NtpTimeOutput[] = [];\n\n      this.buffer = this.buffer\n        .map((rtp) => {\n          const ntp = this.calcNtp(rtp.header.timestamp);\n          if (ntp) {\n            const ms = ntp * 1000;\n            res.push({ rtp, time: ms });\n            return undefined;\n          }\n          return rtp;\n        })\n        .filter((r): r is NonNullable<typeof r> => r != undefined);\n      return res;\n    }\n\n    return [];\n  }\n\n  /**sec */\n  private calcNtp(rtpTimestamp: number) {\n    if (this.rtpTimestamp == undefined || this.ntpTimestamp == undefined) {\n      return;\n    }\n\n    // base rtpTimestamp is rollover\n    if (rtpTimestamp - this.rtpTimestamp > Max32bit - this.clockRate * 60) {\n      this.rtpTimestamp += Max32bit;\n      log(\"base rtpTimestamp is rollover\");\n    }\n\n    // target rtpTimestamp is rollover\n    else if (\n      rtpTimestamp + (Max32bit - this.clockRate * 60) - this.rtpTimestamp <\n      0\n    ) {\n      rtpTimestamp += Max32bit;\n      log(\"target rtpTimestamp is rollover\");\n    }\n\n    const elapsed = (rtpTimestamp - this.rtpTimestamp) / this.clockRate;\n\n    const ntp = ntpTime2Time(this.ntpTimestamp) + elapsed;\n\n    return ntp;\n  }\n}\n\nexport const ntpTime2Time = (ntp: bigint) => {\n  const [ntpSec, ntpMsec] = bufferReader(bufferWriter([8], [ntp]), [4, 4]);\n\n  return Number(`${ntpSec}.${ntpMsec}`);\n};\n","import {\n  NtpTimeInput,\n  NtpTimeOutput,\n  syncRtpBase as NtpTimeBase,\n} from \"./ntpTime\";\n\nexport class NtpTimeCallback extends NtpTimeBase {\n  private cb!: (input: NtpTimeOutput) => void;\n\n  constructor(clockRate: number) {\n    super(clockRate);\n  }\n\n  pipe = (cb: (input: NtpTimeOutput) => void) => {\n    this.cb = cb;\n    return this;\n  };\n\n  input = (input: NtpTimeInput) => {\n    for (const output of this.processInput(input)) {\n      this.cb(output);\n    }\n  };\n}\n","import { int, Max32Uint, RtpPacket } from \"..\";\nimport { Processor } from \"./interface\";\n\nexport type RtpTimeInput = {\n  rtp?: RtpPacket;\n  eol?: boolean;\n};\n\nexport interface RtpTimeOutput {\n  rtp?: RtpPacket;\n  /**ms */\n  time?: number;\n  eol?: boolean;\n}\n\nexport class RtpTimeBase implements Processor<RtpTimeInput, RtpTimeOutput> {\n  baseTimestamp?: number;\n  /**ms */\n  elapsed = 0;\n\n  constructor(public clockRate: number) {}\n\n  processInput({ rtp, eol }: RtpTimeInput): RtpTimeOutput[] {\n    if (eol) {\n      return [{ eol: true }];\n    }\n\n    if (rtp) {\n      const elapsed = this.update(rtp.header.timestamp);\n      return [{ rtp, time: elapsed }];\n    }\n\n    return [];\n  }\n\n  /**ms */\n  private update(timestamp: number) {\n    if (this.baseTimestamp == undefined) {\n      this.baseTimestamp = timestamp;\n    }\n    const rotate =\n      Math.abs(timestamp - this.baseTimestamp) > (Max32Uint / 4) * 3;\n\n    const elapsed = rotate\n      ? timestamp + Max32Uint - this.baseTimestamp\n      : timestamp - this.baseTimestamp;\n\n    this.elapsed = int((elapsed / this.clockRate) * 1000);\n    return this.elapsed;\n  }\n}\n","import { RtpTimeBase, RtpTimeInput, RtpTimeOutput } from \"./rtpTime\";\n\nexport class RtpTimeCallback extends RtpTimeBase {\n  private cb!: (input: RtpTimeOutput) => void;\n\n  constructor(clockRate: number) {\n    super(clockRate);\n  }\n\n  pipe = (cb: (input: RtpTimeOutput) => void) => {\n    this.cb = cb;\n    return this;\n  };\n\n  input = (input: RtpTimeInput) => {\n    for (const output of this.processInput(input)) {\n      this.cb(output);\n    }\n  };\n}\n","export * from \"./rtcpCallback\";\nexport * from \"./rtpCallback\";\nexport * from \"./rtpStream\";\n","import Event from \"rx.mini\";\n\nimport { RtcpPacket } from \"../../rtcp/rtcp\";\n\nexport interface RtcpOutput {\n  rtcp?: RtcpPacket;\n  eol?: boolean;\n}\n\nexport class RtcpSourceCallback {\n  private cb?: (chunk: RtcpOutput) => void;\n\n  onStopped = new Event();\n\n  pipe(cb: (chunk: RtcpOutput) => void) {\n    this.cb = cb;\n  }\n\n  input = (rtcp: RtcpPacket) => {\n    if (this.cb) {\n      this.cb({ rtcp });\n    }\n  };\n\n  stop() {\n    if (this.cb) {\n      this.cb({ eol: true });\n    }\n    this.onStopped.execute();\n  }\n}\n","import Event from \"rx.mini\";\n\nimport { RtpPacket } from \"../../rtp/rtp\";\n\nexport interface RtpOutput {\n  rtp?: RtpPacket;\n  eol?: boolean;\n}\n\nexport class RtpSourceCallback {\n  private cb?: (chunk: RtpOutput) => void;\n\n  onStopped = new Event();\n\n  constructor(\n    private options: {\n      payloadType?: number;\n      clearInvalidPTPacket?: boolean;\n    } = {}\n  ) {\n    options.clearInvalidPTPacket = options.clearInvalidPTPacket ?? true;\n  }\n\n  pipe(cb: (chunk: RtpOutput) => void) {\n    this.cb = cb;\n  }\n\n  input = (packet: Buffer | RtpPacket) => {\n    const rtp =\n      packet instanceof RtpPacket ? packet : RtpPacket.deSerialize(packet);\n\n    if (\n      this.options.payloadType != undefined &&\n      this.options.payloadType !== rtp.header.payloadType\n    ) {\n      if (this.options.clearInvalidPTPacket) {\n        rtp.clear();\n      }\n      return;\n    }\n\n    if (this.cb) {\n      this.cb({ rtp });\n    }\n  };\n\n  stop() {\n    if (this.cb) {\n      this.cb({ eol: true });\n    }\n    this.onStopped.execute();\n  }\n}\n","import { ReadableStream, ReadableStreamController } from \"stream/web\";\n\nimport { RtpPacket } from \"../../rtp/rtp\";\nimport { RtpOutput } from \"./rtpCallback\";\n\nexport class RtpSourceStream {\n  readable: ReadableStream<RtpOutput>;\n  write!: (chunk: RtpOutput) => void;\n  protected controller!: ReadableStreamController<RtpOutput>;\n\n  constructor(\n    private options: {\n      payloadType?: number;\n      clearInvalidPTPacket?: boolean;\n    } = {}\n  ) {\n    options.clearInvalidPTPacket = options.clearInvalidPTPacket ?? true;\n\n    this.readable = new ReadableStream({\n      start: (controller) => {\n        this.controller = controller;\n        this.write = (chunk) => controller.enqueue(chunk);\n      },\n    });\n  }\n\n  push = (packet: Buffer | RtpPacket) => {\n    const rtp =\n      packet instanceof RtpPacket ? packet : RtpPacket.deSerialize(packet);\n\n    if (\n      this.options.payloadType != undefined &&\n      this.options.payloadType !== rtp.header.payloadType\n    ) {\n      if (this.options.clearInvalidPTPacket) {\n        rtp.clear();\n      }\n      return;\n    }\n\n    this.write({ rtp });\n  };\n\n  stop() {\n    this.controller.enqueue({ eol: true });\n  }\n}\n","import debug from \"debug\";\n\nimport {\n  getEBMLByteLength,\n  numberToByteArray,\n  vintEncode,\n} from \"../container/ebml\";\nimport { SupportedCodec, WEBMBuilder } from \"../container/webm\";\n\nconst sourcePath = `werift-rtp : packages/rtp/src/processor/webm.ts`;\nconst log = debug(sourcePath);\n\nexport type WebmInput = {\n  frame?: {\n    data: Buffer;\n    isKeyframe: boolean;\n    /**ms */\n    time: number;\n  };\n  eol?: boolean;\n};\n\nexport interface WebmOutput {\n  saveToFile?: Buffer;\n  kind?: \"initial\" | \"cluster\" | \"block\" | \"cuePoints\";\n  /**ms */\n  previousDuration?: number;\n  eol?: {\n    /**ms */\n    duration: number;\n    durationElement: Uint8Array;\n    header: Buffer;\n  };\n}\n\nexport interface WebmOption {\n  /**ms */\n  duration?: number;\n  encryptionKey?: Buffer;\n  strictTimestamp?: boolean;\n}\n\nexport class WebmBase {\n  private builder: WEBMBuilder;\n  private relativeTimestamp = 0;\n  private timestamps: { [pt: number]: ClusterTimestamp } = {};\n  private cuePoints: CuePoint[] = [];\n  private position = 0;\n  private clusterCounts = 0;\n  elapsed?: number;\n  audioStopped = false;\n  videoStopped = false;\n  stopped = false;\n  videoKeyframeReceived = false;\n\n  constructor(\n    public tracks: {\n      width?: number;\n      height?: number;\n      kind: \"audio\" | \"video\";\n      codec: SupportedCodec;\n      clockRate: number;\n      trackNumber: number;\n    }[],\n    private output: (output: WebmOutput) => void,\n    private options: WebmOption = {}\n  ) {\n    this.builder = new WEBMBuilder(tracks, options.encryptionKey);\n\n    tracks.forEach((t) => {\n      this.timestamps[t.trackNumber] = new ClusterTimestamp();\n    });\n  }\n\n  private processInput(input: WebmInput, trackNumber: number) {\n    if (this.stopped) return;\n\n    const track = this.tracks.find((t) => t.trackNumber === trackNumber);\n    if (!track) {\n      throw new Error(\"track not found\");\n    }\n\n    if (!input.frame) {\n      if (this.tracks.length === 2) {\n        if (track.kind === \"audio\") {\n          this.audioStopped = true;\n          if (this.videoStopped) {\n            this.stop();\n          }\n        } else {\n          this.videoStopped = true;\n          if (this.audioStopped) {\n            this.stop();\n          }\n        }\n      } else if (input.eol) {\n        this.stop();\n      }\n\n      return;\n    }\n\n    if (track.kind === \"audio\") {\n      this.audioStopped = false;\n    } else {\n      this.videoStopped = false;\n    }\n\n    this.onFrameReceived({ ...input.frame, trackNumber });\n  }\n\n  processAudioInput = (input: WebmInput) => {\n    const track = this.tracks.find((t) => t.kind === \"audio\");\n    if (track) {\n      this.processInput(input, track.trackNumber);\n    }\n  };\n\n  processVideoInput = (input: WebmInput) => {\n    if (input.frame?.isKeyframe) {\n      this.videoKeyframeReceived = true;\n    }\n\n    const track = this.tracks.find((t) => t.kind === \"video\");\n    if (track) {\n      this.processInput(input, track.trackNumber);\n    }\n  };\n\n  protected start() {\n    const staticPart = Buffer.concat([\n      this.builder.ebmlHeader,\n      this.builder.createSegment(this.options.duration),\n    ]);\n    this.output({ saveToFile: staticPart, kind: \"initial\" });\n    this.position += staticPart.length;\n\n    const video = this.tracks.find((t) => t.kind === \"video\");\n    if (video) {\n      this.cuePoints.push(\n        new CuePoint(this.builder, video.trackNumber, 0.0, this.position)\n      );\n    }\n  }\n\n  private onFrameReceived(frame: WebmInput[\"frame\"] & { trackNumber: number }) {\n    const track = this.tracks.find((t) => t.trackNumber === frame.trackNumber);\n    if (!track) {\n      return;\n    }\n\n    const timestampManager = this.timestamps[track.trackNumber];\n    if (timestampManager.baseTime == undefined) {\n      for (const t of Object.values(this.timestamps)) {\n        t.baseTime = frame.time;\n      }\n    }\n\n    // clusterの経過時間 ms\n    let elapsed = timestampManager.update(frame.time);\n\n    if (this.clusterCounts === 0) {\n      this.createCluster(0.0, 0);\n    } else if (\n      (track.kind === \"video\" && frame.isKeyframe) ||\n      elapsed > MaxSinged16Int\n    ) {\n      this.relativeTimestamp += elapsed;\n\n      if (elapsed !== 0) {\n        this.cuePoints.push(\n          new CuePoint(\n            this.builder,\n            track.trackNumber,\n            this.relativeTimestamp,\n            this.position\n          )\n        );\n\n        this.createCluster(this.relativeTimestamp, elapsed);\n        Object.values(this.timestamps).forEach((t) => t.shift(elapsed));\n        elapsed = timestampManager.update(frame.time);\n      }\n    }\n\n    if (elapsed >= 0) {\n      this.createSimpleBlock({\n        frame,\n        trackNumber: track.trackNumber,\n        elapsed,\n      });\n    } else {\n      log(\"delayed frame\", { elapsed });\n    }\n  }\n\n  private createCluster(\n    timestamp: number,\n    /**ms */\n    duration: number\n  ) {\n    const cluster = this.builder.createCluster(timestamp);\n    this.clusterCounts++;\n    this.output({\n      saveToFile: Buffer.from(cluster),\n      kind: \"cluster\",\n      previousDuration: duration,\n    });\n    this.position += cluster.length;\n    this.elapsed = undefined;\n  }\n\n  private createSimpleBlock({\n    frame,\n    trackNumber,\n    elapsed,\n  }: {\n    frame: NonNullable<WebmInput[\"frame\"]>;\n    trackNumber: number;\n    elapsed: number;\n  }) {\n    if (this.elapsed == undefined) {\n      this.elapsed = elapsed;\n    }\n    if (elapsed < this.elapsed && this.options.strictTimestamp) {\n      log(\"previous timestamp\", {\n        elapsed,\n        present: this.elapsed,\n        trackNumber,\n      });\n      return;\n    }\n    this.elapsed = elapsed;\n\n    const block = this.builder.createSimpleBlock(\n      frame.data,\n      frame.isKeyframe,\n      trackNumber,\n      elapsed\n    );\n    this.output({ saveToFile: block, kind: \"block\" });\n    this.position += block.length;\n    const [cuePoint] = this.cuePoints.slice(-1);\n    if (cuePoint) {\n      cuePoint.blockNumber++;\n    }\n  }\n\n  private stop() {\n    if (this.stopped) {\n      return;\n    }\n    this.stopped = true;\n\n    log(\"stop\");\n\n    const latestTimestamp = Object.values(this.timestamps)\n      .sort((a, b) => a.elapsed - b.elapsed)\n      .reverse()[0].elapsed;\n    const duration = this.relativeTimestamp + latestTimestamp;\n\n    const cues = this.builder.createCues(this.cuePoints.map((c) => c.build()));\n    this.output({\n      saveToFile: Buffer.from(cues),\n      kind: \"cuePoints\",\n      previousDuration: duration,\n    });\n\n    const durationElement = this.builder.createDuration(duration);\n    const header = Buffer.concat([\n      this.builder.ebmlHeader,\n      this.builder.createSegment(duration),\n    ]);\n\n    this.output({ eol: { duration, durationElement, header } });\n  }\n}\n\nclass ClusterTimestamp {\n  /**ms */\n  baseTime?: number;\n  /**ms */\n  elapsed = 0;\n  private offset = 0;\n\n  shift(\n    /**ms */\n    elapsed: number\n  ) {\n    this.offset += elapsed;\n  }\n\n  update(\n    /**ms */\n    time: number\n  ) {\n    if (this.baseTime == undefined) {\n      throw new Error(\"baseTime not exist\");\n    }\n\n    this.elapsed = time - this.baseTime - this.offset;\n\n    return this.elapsed;\n  }\n}\n\nclass CuePoint {\n  /**\n   * cuesの後のclusterのあるべき位置\n   * cuesはclusterの前に挿入される\n   */\n  cuesLength = 0;\n  blockNumber = 0;\n\n  constructor(\n    private readonly builder: WEBMBuilder,\n    private readonly trackNumber: number,\n    private readonly relativeTimestamp: number,\n    public position: number\n  ) {}\n\n  build() {\n    return this.builder.createCuePoint(\n      this.relativeTimestamp,\n      this.trackNumber,\n      this.position - 48 + this.cuesLength,\n      this.blockNumber\n    );\n  }\n}\n\n/**4294967295 */\nexport const Max32Uint = Number(0x01n << 32n) - 1;\n/**32767 */\nexport const MaxSinged16Int = (0x01 << 16) / 2 - 1;\n\nexport const DurationPosition = 83;\n\nexport const SegmentSizePosition = 40;\n\nexport function replaceSegmentSize(totalFileSize: number) {\n  const bodySize = totalFileSize - SegmentSizePosition;\n  const resize = [\n    ...vintEncode(numberToByteArray(bodySize, getEBMLByteLength(bodySize))),\n  ];\n  const todoFill = 8 - resize.length - 2;\n  if (todoFill > 0) {\n    resize.push(0xec);\n    if (todoFill > 1) {\n      const voidSize = vintEncode(\n        numberToByteArray(todoFill, getEBMLByteLength(todoFill))\n      );\n      [...voidSize].forEach((i) => resize.push(i));\n    }\n  }\n  return Buffer.from(resize);\n}\n","import { appendFile, open, stat } from \"fs/promises\";\n\nimport { PromiseQueue } from \"../../../common/src\";\nimport { SupportedCodec } from \"../container/webm\";\nimport {\n  DurationPosition,\n  replaceSegmentSize,\n  SegmentSizePosition,\n  WebmBase,\n  WebmOption,\n  WebmOutput,\n} from \"./webm\";\n\nexport class WebmCallback extends WebmBase {\n  private cb!: (input: WebmOutput) => Promise<void>;\n  private queue = new PromiseQueue();\n  constructor(\n    tracks: {\n      width?: number;\n      height?: number;\n      kind: \"audio\" | \"video\";\n      codec: SupportedCodec;\n      clockRate: number;\n      trackNumber: number;\n    }[],\n    options: WebmOption = {}\n  ) {\n    super(\n      tracks,\n      (output) => {\n        if (this.cb) {\n          this.queue.push(() => this.cb(output));\n        }\n      },\n      options\n    );\n  }\n\n  pipe = (cb: (input: WebmOutput) => Promise<void>) => {\n    this.cb = cb;\n    this.start();\n  };\n\n  inputAudio = this.processAudioInput;\n  inputVideo = this.processVideoInput;\n}\n\nexport const saveToFileSystem = (path: string) => async (value: WebmOutput) => {\n  if (value.saveToFile) {\n    await appendFile(path, value.saveToFile);\n  } else if (value.eol) {\n    const { durationElement } = value.eol;\n    const handler = await open(path, \"r+\");\n\n    // set duration\n    await handler.write(\n      durationElement,\n      0,\n      durationElement.length,\n      DurationPosition\n    );\n\n    // set size\n    const meta = await stat(path);\n    const resize = replaceSegmentSize(meta.size);\n    await handler.write(resize, 0, resize.length, SegmentSizePosition);\n\n    await handler.close();\n  }\n};\n","import {\n  ReadableStream,\n  ReadableStreamController,\n  WritableStream,\n} from \"stream/web\";\n\nimport { SupportedCodec } from \"../container/webm\";\nimport { WebmBase, WebmInput, WebmOption, WebmOutput } from \"./webm\";\n\nexport type WebmStreamOutput = WebmOutput;\n\nexport type WebmStreamOption = WebmOption;\n\nexport class WebmStream extends WebmBase {\n  audioStream!: WritableStream<WebmInput>;\n  videoStream!: WritableStream<WebmInput>;\n  webmStream: ReadableStream<WebmStreamOutput>;\n  private controller!: ReadableStreamController<WebmStreamOutput>;\n\n  constructor(\n    tracks: {\n      width?: number;\n      height?: number;\n      kind: \"audio\" | \"video\";\n      codec: SupportedCodec;\n      clockRate: number;\n      trackNumber: number;\n    }[],\n    options: WebmStreamOption = {}\n  ) {\n    super(\n      tracks,\n      (output) => {\n        this.controller.enqueue(output);\n      },\n      options\n    );\n\n    const audioTrack = tracks.find((t) => t.kind === \"audio\");\n    if (audioTrack) {\n      this.audioStream = new WritableStream({\n        write: (input) => {\n          this.processAudioInput(input);\n        },\n      });\n    }\n\n    const videoTrack = tracks.find((t) => t.kind === \"video\");\n    if (videoTrack) {\n      this.videoStream = new WritableStream({\n        write: (input) => {\n          this.processVideoInput(input);\n        },\n      });\n    }\n\n    this.webmStream = new ReadableStream<WebmStreamOutput>({\n      start: (controller) => {\n        this.controller = controller;\n      },\n    });\n\n    this.start();\n  }\n}\n","import Event from \"rx.mini\";\n\nimport { RtcpPacket, RtpPacket } from \"..\";\n\nexport abstract class Pipeline {\n  protected children?: Pipeline | Output;\n  private disposer?: () => void;\n\n  constructor(streams?: {\n    rtpStream?: Event<[RtpPacket]>;\n    rtcpStream?: Event<[RtcpPacket]>;\n  }) {\n    const disposers: ((() => void) | undefined)[] = [];\n    {\n      const { unSubscribe } =\n        streams?.rtpStream?.subscribe?.((packet) => {\n          this.pushRtpPackets([packet]);\n        }) ?? {};\n      disposers.push(unSubscribe);\n    }\n    {\n      const { unSubscribe } =\n        streams?.rtcpStream?.subscribe?.((packet) => {\n          this.pushRtcpPackets([packet]);\n        }) ?? {};\n      disposers.push(unSubscribe);\n    }\n    this.disposer = () => {\n      disposers.forEach((d) => d?.());\n    };\n  }\n  pipe(children: Pipeline | Output): Pipeline | Output {\n    this.children = children;\n    return this;\n  }\n  pushRtpPackets(packets: RtpPacket[]) {}\n  pushRtcpPackets(packets: RtcpPacket[]) {}\n  stop() {\n    this.disposer?.();\n  }\n}\n\nexport abstract class Output {\n  pushRtpPackets?(packets: RtpPacket[]) {}\n  pushRtcpPackets?(packets: RtcpPacket[]) {}\n}\n","import Event from \"rx.mini\";\n\nimport { bufferReader, bufferWriter } from \"../../../common/src\";\nimport { RtcpSrPacket, RtpPacket } from \"..\";\nimport { RtcpPacket } from \"../rtcp/rtcp\";\nimport { Pipeline } from \"./base\";\n\n// #### リップシンク\n// ```\n//         0                   1                   2                   3\n//         0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n//        +=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+\n// sender |              NTP timestamp, most significant word             |\n// info   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n//        |             NTP timestamp, least significant word             |\n//        +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n//        |                         RTP timestamp                         |\n//        +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n//        |                     sender's packet count                     |\n//        +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n//        |                      sender's octet count                     |\n//        +=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+\n// ```\n\n// - RTCP-SRにはNTP timestampとRTCP-SRを送った時点で最後に送ったRTPパケットのtimestampが載っている\n// - RTP timestampは開始時点の値がランダムなので、Audio,VideoのRTPパケットの同期にはそのままでは使えない\n//     - ある時点のRTP timestampのNTP timestampがRTCP-SRでわかるので、任意のRTP timestampに対応するNTP timestampを計算できる\n// - Audio,VideoのRTPパケットの同期にはRTP timestampをNTP timestampに変換して行えば良い\n\n// WIP\n// todo impl\nexport class LipSync extends Pipeline {\n  baseNtpTimestamp?: bigint;\n  baseRtpTimestamp?: number;\n  private rtpPackets: { [pt: number]: RtpPacket[] } = {};\n\n  constructor(\n    public clockRate: number,\n    public mismatch: number,\n    streams?: {\n      rtpStream?: Event<[RtpPacket]>;\n      rtcpStream?: Event<[RtcpPacket]>;\n    }\n  ) {\n    super(streams);\n  }\n\n  pushRtcpPackets(packets: RtcpPacket[]) {\n    packets.forEach((sr) => {\n      if (sr instanceof RtcpSrPacket) {\n        this.srReceived(sr);\n      }\n    });\n    this.children?.pushRtcpPackets?.(packets);\n  }\n\n  private srReceived(sr: RtcpSrPacket) {\n    const { ntpTimestamp, rtpTimestamp } = sr.senderInfo;\n    this.baseNtpTimestamp = ntpTimestamp;\n    this.baseRtpTimestamp = rtpTimestamp;\n  }\n\n  pushRtpPackets(packets: RtpPacket[]) {\n    packets.forEach((p) => {\n      this.rtpPackets[p.header.payloadType] =\n        this.rtpPackets[p.header.payloadType] ?? [];\n      this.rtpPackets[p.header.payloadType].push(p);\n    });\n    if (Object.keys(this.rtpPackets).length === 2) {\n      const [a, b] = Object.values(this.rtpPackets);\n      const lastA = this.calcNtpTime(a.at(-1)!.header.timestamp);\n      const lastB = this.calcNtpTime(b.at(-1)!.header.timestamp);\n\n      if (lastA == undefined || lastB == undefined) {\n        this.children?.pushRtpPackets?.(packets);\n      } else {\n        //\n      }\n    }\n  }\n\n  private calcNtpTime(rtpTimestamp: number) {\n    if (!this.baseRtpTimestamp || !this.baseNtpTimestamp) {\n      return;\n    }\n\n    // base rtpTimestamp is rollover\n    if (rtpTimestamp - this.baseRtpTimestamp > Max32bit - this.clockRate * 60) {\n      this.baseRtpTimestamp += Max32bit;\n    }\n    // target rtpTimestamp is rollover\n    else if (\n      rtpTimestamp + (Max32bit - this.clockRate * 60) - this.baseRtpTimestamp <\n      0\n    ) {\n      rtpTimestamp += Max32bit;\n    }\n\n    const elapsed = (rtpTimestamp - this.baseRtpTimestamp) / this.clockRate;\n\n    return ntpTime2Time(this.baseNtpTimestamp) + elapsed;\n  }\n}\n\nexport const ntpTime2Time = (ntp: bigint) => {\n  const [ntpSec, ntpMsec] = bufferReader(bufferWriter([8], [ntp]), [4, 4]);\n\n  return Number(`${ntpSec}.${ntpMsec}`);\n};\n\n/**4294967295 */\nexport const Max32bit = Number((0x01n << 32n) - 1n);\n\nexport interface BufferResolve {\n  packets: {\n    packet: RtpPacket;\n    offset: number;\n  }[];\n  /**NTP seconds */\n  startAtNtpTime: number;\n}\n","import {\n  BitWriter,\n  bufferReader,\n  bufferWriter,\n  getBit,\n} from \"../../../common/src\";\n\nexport const RTCP_HEADER_SIZE = 4;\n\n/*\n *  0                   1                   2                   3\n *  0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n * +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n * |V=2|P|    RC   |      PT       |             length            |\n * +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n */\n\nexport class RtcpHeader {\n  version: number = 2;\n  padding: boolean = false;\n  count: number = 0;\n  type: number = 0;\n  /**このパケットの長さは、ヘッダーと任意のパディングを含む32ビットワードから 1を引いたものである */\n  length: number = 0;\n\n  constructor(props: Partial<RtcpHeader> = {}) {\n    Object.assign(this, props);\n  }\n\n  serialize() {\n    const v_p_rc = new BitWriter(8);\n    v_p_rc.set(2, 0, this.version);\n    if (this.padding) v_p_rc.set(1, 2, 1);\n    v_p_rc.set(5, 3, this.count);\n    const buf = bufferWriter([1, 1, 2], [v_p_rc.value, this.type, this.length]);\n    return buf;\n  }\n\n  static deSerialize(buf: Buffer) {\n    const [v_p_rc, type, length] = bufferReader(buf, [1, 1, 2]);\n    const version = getBit(v_p_rc, 0, 2);\n    const padding = getBit(v_p_rc, 2, 1) > 0;\n    const count = getBit(v_p_rc, 3, 5);\n    return new RtcpHeader({ version, padding, count, type, length });\n  }\n}\n","import { bufferReader, bufferWriter } from \"../../../../common/src\";\n\ntype firEntry = { ssrc: number; sequenceNumber: number };\n\nexport class FullIntraRequest {\n  static count = 4;\n  count = FullIntraRequest.count;\n\n  senderSsrc!: number;\n  mediaSsrc!: number;\n  fir: firEntry[] = [];\n\n  constructor(props: Partial<FullIntraRequest> = {}) {\n    Object.assign(this, props);\n  }\n\n  get length() {\n    return Math.floor(this.serialize().length / 4 - 1);\n  }\n\n  static deSerialize(data: Buffer) {\n    const [senderSsrc, mediaSsrc] = bufferReader(data, [4, 4]);\n    const fir: firEntry[] = [];\n    for (let i = 8; i < data.length; i += 8) {\n      fir.push({ ssrc: data.readUInt32BE(i), sequenceNumber: data[i + 4] });\n    }\n\n    return new FullIntraRequest({ senderSsrc, mediaSsrc, fir });\n  }\n\n  serialize() {\n    const ssrcs = bufferWriter([4, 4], [this.senderSsrc, this.mediaSsrc]);\n\n    const fir = Buffer.alloc(this.fir.length * 8);\n    this.fir.forEach(({ ssrc, sequenceNumber }, i) => {\n      fir.writeUInt32BE(ssrc, i * 8);\n      fir[i * 8 + 4] = sequenceNumber;\n    });\n\n    return Buffer.concat([ssrcs, fir]);\n  }\n}\n","import debug from \"debug\";\n\nimport { RtcpHeader } from \"../header\";\nimport { RtcpPacketConverter } from \"../rtcp\";\nimport { FullIntraRequest } from \"./fullIntraRequest\";\nimport { PictureLossIndication } from \"./pictureLossIndication\";\nimport { ReceiverEstimatedMaxBitrate } from \"./remb\";\n\nconst log = debug(\"werift/rtp/rtcp/psfb/index\");\n\ntype Feedback =\n  | FullIntraRequest\n  | PictureLossIndication\n  | ReceiverEstimatedMaxBitrate;\n\nexport class RtcpPayloadSpecificFeedback {\n  static readonly type = 206;\n  readonly type = RtcpPayloadSpecificFeedback.type;\n\n  feedback!: Feedback;\n\n  constructor(props: Partial<RtcpPayloadSpecificFeedback> = {}) {\n    Object.assign(this, props);\n  }\n\n  serialize() {\n    const payload = this.feedback.serialize();\n    return RtcpPacketConverter.serialize(\n      this.type,\n      this.feedback.count,\n      payload,\n      this.feedback.length\n    );\n  }\n\n  static deSerialize(data: Buffer, header: RtcpHeader) {\n    let feedback: Feedback | undefined;\n\n    switch (header.count) {\n      case FullIntraRequest.count:\n        feedback = FullIntraRequest.deSerialize(data);\n        break;\n      case PictureLossIndication.count:\n        feedback = PictureLossIndication.deSerialize(data);\n        break;\n      case ReceiverEstimatedMaxBitrate.count:\n        feedback = ReceiverEstimatedMaxBitrate.deSerialize(data);\n        break;\n      default:\n        log(\"unknown psfb packet\", header.count);\n        break;\n    }\n\n    return new RtcpPayloadSpecificFeedback({ feedback });\n  }\n}\n","import { bufferReader, bufferWriter } from \"../../../../common/src\";\n\nexport class PictureLossIndication {\n  static count = 1;\n  count = PictureLossIndication.count;\n  length = 2;\n\n  senderSsrc!: number;\n  mediaSsrc!: number;\n\n  constructor(props: Partial<PictureLossIndication> = {}) {\n    Object.assign(this, props);\n  }\n\n  static deSerialize(data: Buffer) {\n    const [senderSsrc, mediaSsrc] = bufferReader(data, [4, 4]);\n    return new PictureLossIndication({ senderSsrc, mediaSsrc });\n  }\n\n  serialize() {\n    return bufferWriter([4, 4], [this.senderSsrc, this.mediaSsrc]);\n  }\n}\n","import {\n  BitWriter,\n  bufferReader,\n  bufferWriter,\n  getBit,\n} from \"../../../../common/src\";\n\nexport class ReceiverEstimatedMaxBitrate {\n  static count = 15;\n  length!: number;\n  count = ReceiverEstimatedMaxBitrate.count;\n  senderSsrc!: number;\n  mediaSsrc!: number;\n  readonly uniqueID: string = \"REMB\";\n  ssrcNum: number = 0;\n  brExp!: number;\n  brMantissa!: number;\n  bitrate!: bigint;\n  ssrcFeedbacks: number[] = [];\n\n  constructor(props: Partial<ReceiverEstimatedMaxBitrate> = {}) {\n    Object.assign(this, props);\n  }\n\n  static deSerialize(data: Buffer) {\n    const [senderSsrc, mediaSsrc, uniqueID, ssrcNum, e_m] = bufferReader(\n      data,\n      [4, 4, 4, 1, 1]\n    );\n\n    const brExp = getBit(e_m, 0, 6);\n    const brMantissa = (getBit(e_m, 6, 2) << 16) + (data[14] << 8) + data[15];\n\n    const bitrate =\n      brExp > 46 ? 18446744073709551615n : BigInt(brMantissa) << BigInt(brExp);\n\n    const ssrcFeedbacks: number[] = [];\n    for (let i = 16; i < data.length; i += 4) {\n      const feedback = data.slice(i).readUIntBE(0, 4);\n      ssrcFeedbacks.push(feedback);\n    }\n\n    return new ReceiverEstimatedMaxBitrate({\n      senderSsrc,\n      mediaSsrc,\n      uniqueID: bufferWriter([4], [uniqueID]).toString(),\n      ssrcNum,\n      brExp,\n      brMantissa,\n      ssrcFeedbacks,\n      bitrate,\n    });\n  }\n\n  serialize() {\n    const constant = Buffer.concat([\n      bufferWriter([4, 4], [this.senderSsrc, this.mediaSsrc]),\n      Buffer.from(this.uniqueID),\n      bufferWriter([1], [this.ssrcNum]),\n    ]);\n\n    const writer = new BitWriter(24);\n    writer.set(6, 0, this.brExp).set(18, 6, this.brMantissa);\n    const feedbacks = Buffer.concat(\n      this.ssrcFeedbacks.map((feedback) => bufferWriter([4], [feedback]))\n    );\n\n    const buf = Buffer.concat([\n      constant,\n      bufferWriter([3], [writer.value]),\n      feedbacks,\n    ]);\n    this.length = buf.length / 4;\n    return buf;\n  }\n}\n","import range from \"lodash/range\";\n\nimport { bufferReader, bufferWriter } from \"../../../common/src\";\nimport { RtcpPacketConverter } from \"./rtcp\";\n\nexport class RtcpRrPacket {\n  ssrc: number = 0;\n  reports: RtcpReceiverInfo[] = [];\n  static readonly type = 201;\n  readonly type = RtcpRrPacket.type;\n\n  constructor(props: Partial<RtcpRrPacket> = {}) {\n    Object.assign(this, props);\n  }\n\n  serialize() {\n    let payload = bufferWriter([4], [this.ssrc]);\n    payload = Buffer.concat([\n      payload,\n      ...this.reports.map((report) => report.serialize()),\n    ]);\n    return RtcpPacketConverter.serialize(\n      RtcpRrPacket.type,\n      this.reports.length,\n      payload,\n      Math.floor(payload.length / 4)\n    );\n  }\n\n  static deSerialize(data: Buffer, count: number) {\n    const [ssrc] = bufferReader(data, [4]);\n    let pos = 4;\n    const reports: RtcpReceiverInfo[] = [];\n    range(count).forEach(() => {\n      reports.push(RtcpReceiverInfo.deSerialize(data.slice(pos, pos + 24)));\n      pos += 24;\n    });\n    return new RtcpRrPacket({ ssrc, reports });\n  }\n}\n\nexport class RtcpReceiverInfo {\n  ssrc!: number;\n  fractionLost!: number;\n  packetsLost!: number;\n  highestSequence!: number;\n  jitter!: number;\n  /**last SR */\n  lsr!: number;\n  /**delay since last SR */\n  dlsr!: number;\n\n  constructor(props: Partial<RtcpReceiverInfo> = {}) {\n    Object.assign(this, props);\n  }\n\n  serialize() {\n    return bufferWriter(\n      [4, 1, 3, 4, 4, 4, 4],\n      [\n        this.ssrc,\n        this.fractionLost,\n        this.packetsLost,\n        this.highestSequence,\n        this.jitter,\n        this.lsr,\n        this.dlsr,\n      ]\n    );\n  }\n\n  static deSerialize(data: Buffer) {\n    const [\n      ssrc,\n      fractionLost,\n      packetsLost,\n      highestSequence,\n      jitter,\n      lsr,\n      dlsr,\n    ] = bufferReader(data, [4, 1, 3, 4, 4, 4, 4]);\n\n    return new RtcpReceiverInfo({\n      ssrc,\n      fractionLost,\n      packetsLost,\n      highestSequence,\n      jitter,\n      lsr,\n      dlsr,\n    });\n  }\n}\n","import debug from \"debug\";\n\nimport { RTCP_HEADER_SIZE, RtcpHeader } from \"./header\";\nimport { RtcpPayloadSpecificFeedback } from \"./psfb\";\nimport { RtcpRrPacket } from \"./rr\";\nimport { RtcpTransportLayerFeedback } from \"./rtpfb\";\nimport { RtcpSourceDescriptionPacket } from \"./sdes\";\nimport { RtcpSrPacket } from \"./sr\";\n\nconst log = debug(\"werift-rtp:packages/rtp/src/rtcp/rtcp.ts\");\n\nexport type RtcpPacket =\n  | RtcpRrPacket\n  | RtcpSrPacket\n  | RtcpPayloadSpecificFeedback\n  | RtcpSourceDescriptionPacket\n  | RtcpTransportLayerFeedback;\n\nexport class RtcpPacketConverter {\n  static serialize(\n    type: number,\n    count: number,\n    payload: Buffer,\n    length: number\n  ) {\n    const header = new RtcpHeader({\n      type,\n      count,\n      version: 2,\n      length,\n    });\n    const buf = header.serialize();\n    return Buffer.concat([buf, payload]);\n  }\n\n  static deSerialize(data: Buffer) {\n    let pos = 0;\n    const packets: RtcpPacket[] = [];\n\n    while (pos < data.length) {\n      const header = RtcpHeader.deSerialize(\n        data.subarray(pos, pos + RTCP_HEADER_SIZE)\n      );\n      pos += RTCP_HEADER_SIZE;\n\n      let payload = data.subarray(pos);\n      pos += header.length * 4;\n\n      if (header.padding) {\n        payload = payload.subarray(0, payload.length - payload.subarray(-1)[0]);\n      }\n\n      try {\n        switch (header.type) {\n          case RtcpSrPacket.type:\n            packets.push(RtcpSrPacket.deSerialize(payload, header.count));\n            break;\n          case RtcpRrPacket.type:\n            packets.push(RtcpRrPacket.deSerialize(payload, header.count));\n            break;\n          case RtcpSourceDescriptionPacket.type:\n            packets.push(\n              RtcpSourceDescriptionPacket.deSerialize(payload, header)\n            );\n            break;\n          case RtcpTransportLayerFeedback.type:\n            packets.push(\n              RtcpTransportLayerFeedback.deSerialize(payload, header)\n            );\n            break;\n          case RtcpPayloadSpecificFeedback.type:\n            packets.push(\n              RtcpPayloadSpecificFeedback.deSerialize(payload, header)\n            );\n            break;\n          default:\n            // log(\"unknown rtcp packet\", header.type);\n            break;\n        }\n      } catch (error) {\n        log(\"deSerialize RTCP\", error);\n      }\n    }\n\n    return packets;\n  }\n}\n\nexport function isRtcp(buf: Buffer) {\n  return buf.length >= 2 && buf[1] >= 192 && buf[1] <= 208;\n}\n","import debug from \"debug\";\n\nimport { RtcpHeader } from \"../header\";\nimport { GenericNack } from \"./nack\";\nimport { TransportWideCC } from \"./twcc\";\n\nconst log = debug(\"werift-rtp:packages/rtp/rtcp/rtpfb/index\");\n\n// 0                   1                   2                   3\n// 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n// +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n// |V=2|P|   FMT   |       PT      |          length               |\n// +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n// |                  SSRC of packet sender                        |\n// +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n// |                  SSRC of media source                         |\n// +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n// :            Feedback Control Information (FCI)                 :\n// :                                                               :\n\ntype Feedback = GenericNack | TransportWideCC;\n\nexport class RtcpTransportLayerFeedback {\n  static readonly type = 205;\n  readonly type = RtcpTransportLayerFeedback.type;\n  feedback!: Feedback;\n  header!: RtcpHeader;\n\n  constructor(props: Partial<RtcpTransportLayerFeedback> = {}) {\n    Object.assign(this, props);\n  }\n\n  serialize() {\n    const payload = this.feedback.serialize();\n    return payload;\n  }\n\n  static deSerialize(data: Buffer, header: RtcpHeader) {\n    let feedback: Feedback | undefined;\n\n    switch (header.count) {\n      case GenericNack.count:\n        feedback = GenericNack.deSerialize(data, header);\n        break;\n      case TransportWideCC.count:\n        feedback = TransportWideCC.deSerialize(data, header);\n        break;\n      default:\n        log(\"unknown rtpfb packet\", header.count);\n        break;\n    }\n\n    return new RtcpTransportLayerFeedback({ feedback, header });\n  }\n}\n","import range from \"lodash/range\";\n\nimport { bufferReader, bufferWriter } from \"../../../../common/src\";\nimport { RtcpHeader } from \"../header\";\nimport { RtcpTransportLayerFeedback } from \".\";\n\n// 0                   1                   2                   3\n// 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n// +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n// |            PID                |             BLP               |\n// +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\n// Packet ID (PID)\n// bitmask of following lost packets (BLP):\n\nexport class GenericNack {\n  static count = 1;\n  readonly count = GenericNack.count;\n  header!: RtcpHeader;\n  senderSsrc!: number;\n  mediaSourceSsrc!: number;\n  lost: number[] = [];\n\n  toJSON() {\n    return {\n      lost: this.lost,\n      senderSsrc: this.senderSsrc,\n      mediaSourceSsrc: this.mediaSourceSsrc,\n    };\n  }\n\n  constructor(props: Partial<GenericNack> = {}) {\n    Object.assign(this, props);\n    if (!this.header) {\n      this.header = new RtcpHeader({\n        type: RtcpTransportLayerFeedback.type,\n        count: this.count,\n        version: 2,\n      });\n    }\n  }\n\n  static deSerialize(data: Buffer, header: RtcpHeader) {\n    const [senderSsrc, mediaSourceSsrc] = bufferReader(data, [4, 4]);\n    const lost = range(8, data.length, 4)\n      .map((pos) => {\n        const lost: number[] = [];\n        const [pid, blp] = bufferReader(data.subarray(pos), [2, 2]);\n        lost.push(pid);\n        range(0, 16).forEach((diff) => {\n          if ((blp >> diff) & 1) {\n            lost.push(pid + diff + 1);\n          }\n        });\n        return lost;\n      })\n      .flatMap((v) => v);\n\n    return new GenericNack({\n      header,\n      senderSsrc,\n      mediaSourceSsrc,\n      lost,\n    });\n  }\n\n  serialize() {\n    const ssrcPair = bufferWriter(\n      [4, 4],\n      [this.senderSsrc, this.mediaSourceSsrc]\n    );\n\n    const fci: Buffer[] = [];\n    if (this.lost.length > 0) {\n      let headPid = this.lost[0],\n        blp = 0;\n      this.lost.slice(1).forEach((pid) => {\n        const diff = pid - headPid - 1;\n        if (diff >= 0 && diff < 16) {\n          blp |= 1 << diff;\n        } else {\n          fci.push(bufferWriter([2, 2], [headPid, blp]));\n          headPid = pid;\n          blp = 0;\n        }\n      });\n      fci.push(bufferWriter([2, 2], [headPid, blp]));\n    }\n    const buf = Buffer.concat([ssrcPair, Buffer.concat(fci)]);\n    this.header.length = buf.length / 4;\n    return Buffer.concat([this.header.serialize(), buf]);\n  }\n}\n","import debug from \"debug\";\nimport range from \"lodash/range\";\n\nimport {\n  BitWriter2,\n  bufferReader,\n  bufferWriter,\n  getBit,\n} from \"../../../../common/src\";\nimport { RtcpHeader } from \"../header\";\n\nconst log = debug(\"werift/rtp/rtcp/rtpfb/twcc\");\n\n/* RTP Extensions for Transport-wide Congestion Control\n * draft-holmer-rmcat-transport-wide-cc-extensions-01\n\n   0               1               2               3\n   0 1 2 3 4 5 6 7 0 1 2 3 4 5 6 7 0 1 2 3 4 5 6 7 0 1 2 3 4 5 6 7\n  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n  |V=2|P|  FMT=15 |    PT=205     |           length              |\n  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n  |                     SSRC of packet sender                     |\n  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n  |                      SSRC of media source                     |\n  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n  |      base sequence number     |      packet status count      |\n  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n  |                 reference time                | fb pkt. count |\n  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n  |          packet chunk         |         packet chunk          |\n  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n  .                                                               .\n  .                                                               .\n  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n  |         packet chunk          |  recv delta   |  recv delta   |\n  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n  .                                                               .\n  .                                                               .\n  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n  |           recv delta          |  recv delta   | zero padding  |\n  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n */\n\nexport class TransportWideCC {\n  static count = 15;\n  count = TransportWideCC.count;\n  length = 2;\n\n  senderSsrc!: number;\n  mediaSourceSsrc!: number;\n  baseSequenceNumber!: number;\n  packetStatusCount!: number;\n  /** 24bit multiples of 64ms */\n  referenceTime!: number;\n  fbPktCount!: number;\n  packetChunks: (RunLengthChunk | StatusVectorChunk)[] = [];\n  recvDeltas: RecvDelta[] = [];\n  header!: RtcpHeader;\n\n  constructor(props: Partial<TransportWideCC> = {}) {\n    Object.assign(this, props);\n    if (!this.header) {\n      this.header = new RtcpHeader({\n        type: 205,\n        count: this.count,\n        version: 2,\n      });\n    }\n  }\n\n  static deSerialize(data: Buffer, header: RtcpHeader) {\n    const [\n      senderSsrc,\n      mediaSsrc,\n      baseSequenceNumber,\n      packetStatusCount,\n      referenceTime,\n      fbPktCount,\n    ] = bufferReader(data, [4, 4, 2, 2, 3, 1]);\n    const packetChunks: (RunLengthChunk | StatusVectorChunk)[] = [];\n    const recvDeltas: RecvDelta[] = [];\n\n    let packetStatusPos = 16;\n    for (let processedPacketNum = 0; processedPacketNum < packetStatusCount; ) {\n      const type = getBit(\n        data.slice(packetStatusPos, packetStatusPos + 1)[0],\n        0,\n        1\n      );\n      let iPacketStatus: RunLengthChunk | StatusVectorChunk | undefined;\n      switch (type) {\n        case PacketChunk.TypeTCCRunLengthChunk:\n          {\n            const packetStatus = RunLengthChunk.deSerialize(\n              data.slice(packetStatusPos, packetStatusPos + 2)\n            );\n            iPacketStatus = packetStatus;\n            const packetNumberToProcess = Math.min(\n              packetStatusCount - processedPacketNum,\n              packetStatus.runLength\n            );\n            if (\n              packetStatus.packetStatus ===\n                PacketStatus.TypeTCCPacketReceivedSmallDelta ||\n              packetStatus.packetStatus ===\n                PacketStatus.TypeTCCPacketReceivedLargeDelta\n            ) {\n              range(packetNumberToProcess).forEach(() => {\n                recvDeltas.push(\n                  new RecvDelta({ type: packetStatus.packetStatus as any })\n                );\n              });\n            }\n            processedPacketNum += packetNumberToProcess;\n          }\n          break;\n        case PacketChunk.TypeTCCStatusVectorChunk:\n          {\n            const packetStatus = StatusVectorChunk.deSerialize(\n              data.slice(packetStatusPos, packetStatusPos + 2)\n            );\n            iPacketStatus = packetStatus;\n            if (packetStatus.symbolSize === 0) {\n              packetStatus.symbolList.forEach((v) => {\n                if (v === PacketStatus.TypeTCCPacketReceivedSmallDelta) {\n                  recvDeltas.push(\n                    new RecvDelta({\n                      type: PacketStatus.TypeTCCPacketReceivedSmallDelta,\n                    })\n                  );\n                }\n              });\n            }\n            if (packetStatus.symbolSize === 1) {\n              packetStatus.symbolList.forEach((v) => {\n                if (\n                  v === PacketStatus.TypeTCCPacketReceivedSmallDelta ||\n                  v === PacketStatus.TypeTCCPacketReceivedLargeDelta\n                ) {\n                  recvDeltas.push(\n                    new RecvDelta({\n                      type: v,\n                    })\n                  );\n                }\n              });\n            }\n            processedPacketNum += packetStatus.symbolList.length;\n          }\n          break;\n      }\n      if (!iPacketStatus) throw new Error();\n      packetStatusPos += 2;\n      packetChunks.push(iPacketStatus);\n    }\n\n    let recvDeltaPos = packetStatusPos;\n    recvDeltas.forEach((delta) => {\n      if (delta.type === PacketStatus.TypeTCCPacketReceivedSmallDelta) {\n        delta.deSerialize(data.slice(recvDeltaPos, recvDeltaPos + 1));\n        recvDeltaPos++;\n      }\n      if (delta.type === PacketStatus.TypeTCCPacketReceivedLargeDelta) {\n        delta.deSerialize(data.slice(recvDeltaPos, recvDeltaPos + 2));\n        recvDeltaPos += 2;\n      }\n    });\n\n    return new TransportWideCC({\n      senderSsrc,\n      mediaSourceSsrc: mediaSsrc,\n      baseSequenceNumber,\n      packetStatusCount,\n      referenceTime,\n      fbPktCount,\n      recvDeltas,\n      packetChunks,\n      header,\n    });\n  }\n\n  serialize() {\n    const constBuf = bufferWriter(\n      [4, 4, 2, 2, 3, 1],\n      [\n        this.senderSsrc,\n        this.mediaSourceSsrc,\n        this.baseSequenceNumber,\n        this.packetStatusCount,\n        this.referenceTime,\n        this.fbPktCount,\n      ]\n    );\n\n    const chunks = Buffer.concat(\n      this.packetChunks.map((chunk) => chunk.serialize())\n    );\n\n    const deltas = Buffer.concat(\n      this.recvDeltas\n        .map((delta) => {\n          try {\n            return delta.serialize();\n          } catch (error: any) {\n            log(error?.message);\n            return undefined;\n          }\n        })\n        .filter((v) => v) as Buffer[]\n    );\n\n    const buf = Buffer.concat([constBuf, chunks, deltas]);\n\n    if (this.header.padding && buf.length % 4 !== 0) {\n      const rest = 4 - (buf.length % 4);\n      const padding = Buffer.alloc(rest);\n      padding[padding.length - 1] = padding.length;\n\n      this.header.length = Math.floor((buf.length + padding.length) / 4);\n      return Buffer.concat([this.header.serialize(), buf, padding]);\n    }\n\n    this.header.length = Math.floor(buf.length / 4);\n    return Buffer.concat([this.header.serialize(), buf]);\n  }\n\n  get packetResults(): PacketResult[] {\n    const currentSequenceNumber = this.baseSequenceNumber - 1;\n    const results = this.packetChunks\n      .filter((v) => v instanceof RunLengthChunk)\n      .map((chunk) => (chunk as RunLengthChunk).results(currentSequenceNumber))\n      .flatMap((v) => v);\n\n    let deltaIdx = 0;\n    const referenceTime = BigInt(this.referenceTime) * 64n;\n    let currentReceivedAtMs = referenceTime;\n\n    for (const result of results) {\n      const recvDelta = this.recvDeltas[deltaIdx];\n      if (!result.received || !recvDelta) {\n        continue;\n      }\n      currentReceivedAtMs += BigInt(recvDelta.delta) / 1000n;\n      result.delta = recvDelta.delta;\n      result.receivedAtMs = Number(currentReceivedAtMs);\n      deltaIdx++;\n    }\n    return results;\n  }\n}\n\n//  0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5\n// +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n// |T| S |       Run Length        |\n// +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\nexport class RunLengthChunk {\n  type!: PacketChunk.TypeTCCRunLengthChunk;\n  packetStatus!: PacketStatus;\n  /** 13bit */\n  runLength!: number;\n\n  constructor(props: Partial<RunLengthChunk> = {}) {\n    Object.assign(this, props);\n    this.type = PacketChunk.TypeTCCRunLengthChunk;\n  }\n\n  static deSerialize(data: Buffer) {\n    const packetStatus = getBit(data[0], 1, 2);\n    const runLength = (getBit(data[0], 3, 5) << 8) + data[1];\n\n    return new RunLengthChunk({ type: 0, packetStatus, runLength });\n  }\n\n  serialize() {\n    const buf = new BitWriter2(16)\n      .set(0)\n      .set(this.packetStatus, 2)\n      .set(this.runLength, 13).buffer;\n\n    return buf;\n  }\n\n  results(currentSequenceNumber: number) {\n    const received =\n      this.packetStatus === PacketStatus.TypeTCCPacketReceivedSmallDelta ||\n      this.packetStatus === PacketStatus.TypeTCCPacketReceivedLargeDelta;\n\n    const results: PacketResult[] = [];\n    for (let i = 0; i <= this.runLength; ++i) {\n      results.push(\n        new PacketResult({ sequenceNumber: ++currentSequenceNumber, received })\n      );\n    }\n    return results;\n  }\n}\n\n//  0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5\n// +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n// |T|S|       symbol list         |\n// +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\nexport class StatusVectorChunk {\n  type!: number;\n  symbolSize!: number;\n  symbolList: number[] = [];\n\n  constructor(props: Partial<StatusVectorChunk> = {}) {\n    Object.assign(this, props);\n  }\n\n  static deSerialize(data: Buffer) {\n    const type = PacketChunk.TypeTCCStatusVectorChunk;\n    let symbolSize = getBit(data[0], 1, 1);\n    const symbolList: number[] = [];\n\n    switch (symbolSize) {\n      case 0:\n        range(6).forEach((_, i) => symbolList.push(getBit(data[0], 2 + i, 1)));\n        range(8).forEach((_, i) => symbolList.push(getBit(data[1], i, 1)));\n        break;\n      case 1:\n        range(3).forEach((i) => symbolList.push(getBit(data[0], 2 + i * 2, 2)));\n        range(4).forEach((i) => symbolList.push(getBit(data[1], i * 2, 2)));\n        break;\n      default:\n        symbolSize = (getBit(data[0], 2, 6) << 8) + data[1];\n    }\n\n    return new StatusVectorChunk({ type, symbolSize, symbolList });\n  }\n\n  serialize() {\n    const buf = Buffer.alloc(2);\n\n    const writer = new BitWriter2(16).set(1).set(this.symbolSize);\n    const bits = this.symbolSize === 0 ? 1 : 2;\n\n    this.symbolList.forEach((v) => {\n      writer.set(v, bits);\n    });\n    buf.writeUInt16BE(writer.value);\n    return buf;\n  }\n}\n\nexport class RecvDelta {\n  /**optional (If undefined, it will be set automatically.)*/\n  type?:\n    | PacketStatus.TypeTCCPacketReceivedSmallDelta\n    | PacketStatus.TypeTCCPacketReceivedLargeDelta;\n  /**micro sec */\n  delta!: number;\n\n  constructor(props: Partial<RecvDelta> = {}) {\n    Object.assign(this, props);\n  }\n\n  static deSerialize(data: Buffer) {\n    let type: number | undefined;\n    let delta: number | undefined;\n\n    if (data.length === 1) {\n      type = PacketStatus.TypeTCCPacketReceivedSmallDelta;\n      delta = 250 * data[0];\n    } else if (data.length === 2) {\n      type = PacketStatus.TypeTCCPacketReceivedLargeDelta;\n      delta = 250 * data.readInt16BE();\n    }\n\n    if (type === undefined || delta === undefined) throw new Error();\n\n    return new RecvDelta({ type, delta });\n  }\n\n  deSerialize(data: Buffer) {\n    const res = RecvDelta.deSerialize(data);\n    this.delta = res.delta;\n  }\n\n  parsed = false; // todo refactor\n  parseDelta() {\n    this.delta = Math.floor(this.delta / 250);\n\n    if (this.delta < 0 || this.delta > 255) {\n      if (this.delta > 32767) this.delta = 32767; // maxInt16\n      if (this.delta < -32768) this.delta = -32768; // minInt16\n      if (!this.type) this.type = PacketStatus.TypeTCCPacketReceivedLargeDelta;\n    } else {\n      if (!this.type) this.type = PacketStatus.TypeTCCPacketReceivedSmallDelta;\n    }\n    this.parsed = true;\n  }\n\n  serialize() {\n    if (!this.parsed) this.parseDelta();\n    if (this.type === PacketStatus.TypeTCCPacketReceivedSmallDelta) {\n      const buf = Buffer.alloc(1);\n      buf.writeUInt8(this.delta);\n      return buf;\n    } else if (this.type === PacketStatus.TypeTCCPacketReceivedLargeDelta) {\n      const buf = Buffer.alloc(2);\n      buf.writeInt16BE(this.delta);\n      return buf;\n    }\n\n    throw new Error(\"errDeltaExceedLimit \" + this.delta + \" \" + this.type);\n  }\n}\n\nexport enum PacketChunk {\n  TypeTCCRunLengthChunk,\n  TypeTCCStatusVectorChunk,\n  packetStatusChunkLength,\n}\n\nexport enum PacketStatus {\n  TypeTCCPacketNotReceived,\n  TypeTCCPacketReceivedSmallDelta,\n  TypeTCCPacketReceivedLargeDelta,\n  TypeTCCPacketReceivedWithoutDelta,\n}\n\nexport class PacketResult {\n  sequenceNumber = 0;\n  delta = 0;\n  received = false;\n  receivedAtMs = 0;\n  constructor(props: Partial<PacketResult>) {\n    Object.assign(this, props);\n  }\n}\n","import { bufferWriter } from \"../../../common/src\";\nimport { RtcpHeader } from \"./header\";\nimport { RtcpPacketConverter } from \"./rtcp\";\n\nexport class RtcpSourceDescriptionPacket {\n  static readonly type = 202;\n  readonly type = RtcpSourceDescriptionPacket.type;\n  chunks: SourceDescriptionChunk[] = [];\n\n  constructor(props: Partial<RtcpSourceDescriptionPacket>) {\n    Object.assign(this, props);\n  }\n\n  get length() {\n    let length = 0;\n    this.chunks.forEach((chunk) => (length += chunk.length));\n    return length;\n  }\n\n  serialize() {\n    let payload = Buffer.concat(this.chunks.map((chunk) => chunk.serialize()));\n    while (payload.length % 4)\n      payload = Buffer.concat([payload, Buffer.from([0])]);\n    return RtcpPacketConverter.serialize(\n      this.type,\n      this.chunks.length,\n      payload,\n      payload.length / 4\n    );\n  }\n\n  static deSerialize(payload: Buffer, header: RtcpHeader) {\n    const chunks: SourceDescriptionChunk[] = [];\n    for (let i = 0; i < payload.length; ) {\n      const chunk = SourceDescriptionChunk.deSerialize(payload.slice(i));\n      chunks.push(chunk);\n      i += chunk.length;\n    }\n\n    return new RtcpSourceDescriptionPacket({ chunks });\n  }\n}\n\nexport class SourceDescriptionChunk {\n  source!: number;\n  items: SourceDescriptionItem[] = [];\n\n  constructor(props: Partial<SourceDescriptionChunk> = {}) {\n    Object.assign(this, props);\n  }\n\n  get length() {\n    let length = 4;\n    this.items.forEach((item) => (length += item.length));\n    length += 1;\n    length += getPadding(length);\n    return length;\n  }\n\n  serialize() {\n    const data = Buffer.concat([\n      bufferWriter([4], [this.source]),\n      Buffer.concat(this.items.map((item) => item.serialize())),\n    ]);\n\n    const res = Buffer.concat([data, Buffer.alloc(getPadding(data.length))]);\n    return res;\n  }\n\n  static deSerialize(data: Buffer) {\n    const source = data.readUInt32BE();\n    const items: SourceDescriptionItem[] = [];\n    for (let i = 4; i < data.length; ) {\n      const type = data[i];\n      if (type === 0) break;\n\n      const item = SourceDescriptionItem.deSerialize(data.slice(i));\n      items.push(item);\n      i += item.length;\n    }\n\n    return new SourceDescriptionChunk({ source, items });\n  }\n}\n\nexport class SourceDescriptionItem {\n  type!: number;\n  text!: string;\n\n  constructor(props: Partial<SourceDescriptionItem>) {\n    Object.assign(this, props);\n  }\n\n  get length() {\n    return 1 + 1 + Buffer.from(this.text).length;\n  }\n\n  serialize() {\n    const text = Buffer.from(this.text);\n    return Buffer.concat([\n      bufferWriter([1, 1], [this.type, text.length]),\n      text,\n    ]);\n  }\n\n  static deSerialize(data: Buffer) {\n    const type = data[0];\n    const octetCount = data[1];\n    const text = data.slice(2, 2 + octetCount).toString();\n    return new SourceDescriptionItem({ type, text });\n  }\n}\n\nfunction getPadding(len: number) {\n  if (len % 4 == 0) {\n    return 0;\n  }\n  return 4 - (len % 4);\n}\n","import range from \"lodash/range\";\n\nimport { bufferReader, bufferWriter } from \"../../../common/src\";\nimport { RtcpReceiverInfo } from \"./rr\";\nimport { RtcpPacketConverter } from \"./rtcp\";\n\n// https://datatracker.ietf.org/doc/html/rfc3550#section-6.4.1\n//         0                   1                   2                   3\n//         0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n//        +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n// header |V=2|P|    RC   |   PT=SR=200   |             length            |\n//        +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n//        |                         SSRC of sender                        |\n//        +=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+\n// sender |              NTP timestamp, most significant word             |\n// info   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n//        |             NTP timestamp, least significant word             |\n//        +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n//        |                         RTP timestamp                         |\n//        +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n//        |                     sender's packet count                     |\n//        +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n//        |                      sender's octet count                     |\n//        +=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+\n// report |                 SSRC_1 (SSRC of first source)                 |\n// block  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n//   1    | fraction lost |       cumulative number of packets lost       |\n//        +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n//        |           extended highest sequence number received           |\n//        +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n//        |                      interarrival jitter                      |\n//        +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n//        |                         last SR (LSR)                         |\n//        +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n//        |                   delay since last SR (DLSR)                  |\n//        +=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+\n// report |                 SSRC_2 (SSRC of second source)                |\n// block  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n//   2    :                               ...                             :\n//        +=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+\n//        |                  profile-specific extensions                  |\n//        +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\nexport class RtcpSrPacket {\n  ssrc: number = 0;\n  senderInfo!: RtcpSenderInfo;\n  reports: RtcpReceiverInfo[] = [];\n  static readonly type = 200;\n  readonly type = RtcpSrPacket.type;\n\n  constructor(props: Pick<RtcpSrPacket, \"senderInfo\"> & Partial<RtcpSrPacket>) {\n    Object.assign(this, props);\n  }\n\n  serialize() {\n    let payload = Buffer.alloc(4);\n    payload.writeUInt32BE(this.ssrc);\n    payload = Buffer.concat([payload, this.senderInfo.serialize()]);\n    payload = Buffer.concat([\n      payload,\n      ...this.reports.map((report) => report.serialize()),\n    ]);\n    return RtcpPacketConverter.serialize(\n      RtcpSrPacket.type,\n      this.reports.length,\n      payload,\n      Math.floor(payload.length / 4)\n    );\n  }\n\n  static deSerialize(payload: Buffer, count: number) {\n    const ssrc = payload.readUInt32BE();\n    const senderInfo = RtcpSenderInfo.deSerialize(payload.slice(4, 24));\n    let pos = 24;\n    const reports: RtcpReceiverInfo[] = [];\n    for (const _ of range(count)) {\n      reports.push(RtcpReceiverInfo.deSerialize(payload.slice(pos, pos + 24)));\n      pos += 24;\n    }\n    const packet = new RtcpSrPacket({ ssrc, senderInfo, reports });\n    return packet;\n  }\n}\n\nexport class RtcpSenderInfo {\n  ntpTimestamp!: bigint;\n  rtpTimestamp!: number;\n  packetCount!: number;\n  octetCount!: number;\n\n  constructor(props: Partial<RtcpSenderInfo> = {}) {\n    Object.assign(this, props);\n  }\n\n  serialize() {\n    return bufferWriter(\n      [8, 4, 4, 4],\n      [this.ntpTimestamp, this.rtpTimestamp, this.packetCount, this.octetCount]\n    );\n  }\n\n  static deSerialize(data: Buffer) {\n    const [ntpTimestamp, rtpTimestamp, packetCount, octetCount] = bufferReader(\n      data,\n      [8, 4, 4, 4]\n    );\n\n    return new RtcpSenderInfo({\n      ntpTimestamp,\n      rtpTimestamp,\n      packetCount,\n      octetCount,\n    });\n  }\n}\n","import { uint32Add } from \"../../../../common/src\";\nimport { Red } from \"./packet\";\n\nexport class RedEncoder {\n  private cache: { block: Buffer; timestamp: number; blockPT: number }[] = [];\n  cacheSize = 10;\n\n  constructor(public distance = 1) {}\n\n  push(payload: { block: Buffer; timestamp: number; blockPT: number }) {\n    this.cache.push(payload);\n    if (this.cache.length > this.cacheSize) {\n      this.cache.shift();\n    }\n  }\n\n  build() {\n    const red = new Red();\n    const redundantPayloads = this.cache.slice(-(this.distance + 1));\n\n    const presentPayload = redundantPayloads.pop();\n    if (!presentPayload) {\n      return red;\n    }\n\n    redundantPayloads.forEach((redundant) => {\n      const timestampOffset = uint32Add(\n        presentPayload.timestamp,\n        -redundant.timestamp\n      );\n      if (timestampOffset > Max14Uint) {\n        return;\n      }\n      red.blocks.push({\n        block: redundant.block,\n        blockPT: redundant.blockPT,\n        timestampOffset,\n      });\n    });\n    red.blocks.push({\n      block: presentPayload.block,\n      blockPT: presentPayload.blockPT,\n    });\n    return red;\n  }\n}\n\nconst Max14Uint = (0x01 << 14) - 1;\n","import { Red, RtpHeader, RtpPacket, uint16Add, uint32Add } from \"../..\";\n\n// 0                   1                    2                   3\n// 0 1 2 3 4 5 6 7 8 9 0 1 2 3  4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n// +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n// |F|   block PT  |  timestamp offset         |   block length    |\n// +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\n// 0 1 2 3 4 5 6 7\n// +-+-+-+-+-+-+-+-+\n// |0|   Block PT  |\n// +-+-+-+-+-+-+-+-+\n\nexport class RedHandler {\n  private readonly size = 150;\n  private sequenceNumbers: number[] = [];\n\n  push(red: Red, base: RtpPacket) {\n    const packets: RtpPacket[] = [];\n\n    red.blocks.forEach(({ blockPT, timestampOffset, block }, i) => {\n      const sequenceNumber = uint16Add(\n        base.header.sequenceNumber,\n        -(red.blocks.length - (i + 1))\n      );\n      if (timestampOffset) {\n        packets.push(\n          new RtpPacket(\n            new RtpHeader({\n              timestamp: uint32Add(base.header.timestamp, -timestampOffset),\n              payloadType: blockPT,\n              ssrc: base.header.ssrc,\n              sequenceNumber,\n              marker: true,\n            }),\n            block\n          )\n        );\n      } else {\n        packets.push(\n          new RtpPacket(\n            new RtpHeader({\n              timestamp: base.header.timestamp,\n              payloadType: blockPT,\n              ssrc: base.header.ssrc,\n              sequenceNumber,\n              marker: true,\n            }),\n            block\n          )\n        );\n      }\n    });\n\n    const filtered = packets.filter((p) => {\n      // duplicate\n      if (this.sequenceNumbers.includes(p.header.sequenceNumber)) {\n        return false;\n      } else {\n        // buffer overflow\n        if (this.sequenceNumbers.length > this.size) {\n          this.sequenceNumbers.shift();\n        }\n        this.sequenceNumbers.push(p.header.sequenceNumber);\n        return true;\n      }\n    });\n    return filtered;\n  }\n}\n","// rfc2198\n\nimport { debug } from \"debug\";\n\nimport { BitStream } from \"../../../../common/src\";\n\nconst log = debug(\"packages/rtp/src/rtp/red/packet.ts\");\n\n// 0                   1                    2                   3\n// 0 1 2 3 4 5 6 7 8 9 0 1 2 3  4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n// +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n// |F|   block PT  |  timestamp offset         |   block length    |\n// +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\n// 0 1 2 3 4 5 6 7\n// +-+-+-+-+-+-+-+-+\n// |0|   Block PT  |\n// +-+-+-+-+-+-+-+-+\n\nexport class Red {\n  header!: RedHeader;\n  blocks: {\n    block: Buffer;\n    blockPT: number;\n    /**14bit */\n    timestampOffset?: number;\n  }[] = [];\n\n  static deSerialize(bufferOrArrayBuffer: Buffer | ArrayBuffer) {\n    const buf =\n      bufferOrArrayBuffer instanceof ArrayBuffer\n        ? Buffer.from(bufferOrArrayBuffer)\n        : bufferOrArrayBuffer;\n\n    const red = new Red();\n    let offset = 0;\n    [red.header, offset] = RedHeader.deSerialize(buf);\n\n    red.header.fields.forEach(({ blockLength, timestampOffset, blockPT }) => {\n      if (blockLength && timestampOffset) {\n        const block = buf.subarray(offset, offset + blockLength);\n        red.blocks.push({ block, blockPT, timestampOffset });\n        offset += blockLength;\n      } else {\n        const block = buf.subarray(offset);\n        red.blocks.push({ block, blockPT });\n      }\n    });\n\n    return red;\n  }\n\n  serialize() {\n    this.header = new RedHeader();\n\n    for (const { timestampOffset, blockPT, block } of this.blocks) {\n      if (timestampOffset) {\n        this.header.fields.push({\n          fBit: 1,\n          blockPT,\n          blockLength: block.length,\n          timestampOffset,\n        });\n      } else {\n        this.header.fields.push({ fBit: 0, blockPT });\n      }\n    }\n\n    let buf = this.header.serialize();\n    for (const { block } of this.blocks) {\n      buf = Buffer.concat([buf, block]);\n    }\n\n    return buf;\n  }\n}\n\nexport class RedHeader {\n  fields: RedHeaderField[] = [];\n\n  static deSerialize(buf: Buffer) {\n    let offset = 0;\n    const header = new RedHeader();\n\n    for (;;) {\n      const field: RedHeaderField = {} as any;\n      header.fields.push(field);\n\n      const bitStream = new BitStream(buf.subarray(offset));\n      field.fBit = bitStream.readBits(1);\n      field.blockPT = bitStream.readBits(7);\n\n      offset++;\n\n      if (field.fBit === 0) {\n        break;\n      }\n\n      field.timestampOffset = bitStream.readBits(14);\n      field.blockLength = bitStream.readBits(10);\n\n      offset += 3;\n    }\n\n    return [header, offset] as const;\n  }\n\n  serialize() {\n    let buf = Buffer.alloc(0);\n    for (const field of this.fields) {\n      try {\n        if (field.timestampOffset && field.blockLength) {\n          const bitStream = new BitStream(Buffer.alloc(4))\n            .writeBits(1, field.fBit)\n            .writeBits(7, field.blockPT)\n            .writeBits(14, field.timestampOffset)\n            .writeBits(10, field.blockLength);\n          buf = Buffer.concat([buf, bitStream.uint8Array]);\n        } else {\n          const bitStream = new BitStream(Buffer.alloc(1))\n            .writeBits(1, 0)\n            .writeBits(7, field.blockPT);\n          buf = Buffer.concat([buf, bitStream.uint8Array]);\n        }\n      } catch (error: any) {\n        log(error?.message);\n        continue;\n      }\n    }\n    return buf;\n  }\n}\n\ninterface RedHeaderField {\n  /**ヘッダーの最初のビットは、別のヘッダーブロックが続くかどうかを示す。 1の場合は、さらにヘッダーブロックが続き、0の場合は、これが最後のヘッダーブロックとなります。 */\n  fBit: number;\n  blockPT: number;\n  /**14bit */\n  timestampOffset?: number;\n  /**10bit */\n  blockLength?: number;\n}\n","import { BitWriter, getBit } from \"../../../common/src\";\n\nexport type Extension = { id: number; payload: Buffer };\n\nexport const ExtensionProfiles = {\n  OneByte: 0xbede, // 48862\n  TwoByte: 0x1000, // 4096\n} as const;\ntype ExtensionProfile =\n  typeof ExtensionProfiles[keyof typeof ExtensionProfiles];\n\nconst seqNumOffset = 2;\nconst timestampOffset = 4;\nconst ssrcOffset = 8;\nconst csrcOffset = 12;\nconst csrcSize = 4;\n\n/*\n *  0                   1                   2                   3\n *  0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n * +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n * |V=2|P|X|  CC   |M|     PT      |       sequence number         |\n * +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n * |                           timestamp                           |\n * +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n * |           synchronization source (SSRC) identifier            |\n * +=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+\n * |            contributing source (CSRC) identifiers             |\n * |                             ....                              |\n * +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n */\n\nexport class RtpHeader {\n  version: number = 2;\n  padding: boolean = false;\n  paddingSize: number = 0;\n  extension: boolean = false;\n  marker: boolean = false;\n  payloadOffset: number = 0;\n  payloadType: number = 0;\n  /**16bit, 初期値はランダムである必要があります*/\n  sequenceNumber: number = 0;\n  /**32bit microsec (milli/1000), 初期値はランダムである必要があります*/\n  timestamp: number = 0;\n  ssrc: number = 0;\n  csrcLength = 0;\n  csrc: number[] = [];\n  extensionProfile: ExtensionProfile = ExtensionProfiles.OneByte;\n  /**deserialize only */\n  extensionLength?: number;\n  extensions: Extension[] = [];\n  constructor(props: Partial<RtpHeader> = {}) {\n    Object.assign(this, props);\n  }\n\n  static deSerialize(rawPacket: Buffer) {\n    const h = new RtpHeader();\n    let currOffset = 0;\n    const v_p_x_cc = rawPacket[currOffset++];\n    h.version = getBit(v_p_x_cc, 0, 2);\n    h.padding = getBit(v_p_x_cc, 2) > 0;\n    h.extension = getBit(v_p_x_cc, 3) > 0;\n    h.csrcLength = getBit(v_p_x_cc, 4, 4);\n    h.csrc = [...Array(h.csrcLength)].map(() => {\n      const csrc = rawPacket.readUInt32BE(currOffset);\n      currOffset += 4;\n      return csrc;\n    });\n    currOffset += csrcOffset - 1;\n\n    const m_pt = rawPacket[1];\n    h.marker = getBit(m_pt, 0) > 0;\n    h.payloadType = getBit(m_pt, 1, 7);\n\n    h.sequenceNumber = rawPacket.readUInt16BE(seqNumOffset);\n    h.timestamp = rawPacket.readUInt32BE(timestampOffset);\n    h.ssrc = rawPacket.readUInt32BE(ssrcOffset);\n\n    for (let i = 0; i < h.csrc.length; i++) {\n      const offset = csrcOffset + i * csrcSize;\n      h.csrc[i] = rawPacket.subarray(offset).readUInt32BE();\n    }\n    if (h.extension) {\n      h.extensionProfile = rawPacket\n        .subarray(currOffset)\n        .readUInt16BE() as ExtensionProfile;\n      currOffset += 2;\n      const extensionLength = rawPacket.subarray(currOffset).readUInt16BE() * 4;\n      h.extensionLength = extensionLength;\n      currOffset += 2;\n\n      switch (h.extensionProfile) {\n        // RFC 8285 RTP One Byte Header Extension\n        case ExtensionProfiles.OneByte:\n          {\n            const end = currOffset + extensionLength;\n            while (currOffset < end) {\n              if (rawPacket[currOffset] === 0x00) {\n                currOffset++;\n                continue;\n              }\n\n              const extId = rawPacket[currOffset] >> 4;\n              const len =\n                (rawPacket[currOffset] & (rawPacket[currOffset] ^ 0xf0)) + 1; // and not &^\n              currOffset++;\n              if (extId === 0xf) {\n                break;\n              }\n              const extension: Extension = {\n                id: extId,\n                payload: rawPacket.subarray(currOffset, currOffset + len),\n              };\n              h.extensions = [...h.extensions, extension];\n              currOffset += len;\n            }\n          }\n          break;\n        // RFC 8285 RTP Two Byte Header Extension\n        case ExtensionProfiles.TwoByte:\n          {\n            const end = currOffset + extensionLength;\n            while (currOffset < end) {\n              if (rawPacket[currOffset] === 0x00) {\n                currOffset++;\n                continue;\n              }\n              const extId = rawPacket[currOffset];\n              currOffset++;\n              const len = rawPacket[currOffset];\n              currOffset++;\n\n              const extension: Extension = {\n                id: extId,\n                payload: rawPacket.subarray(currOffset, currOffset + len),\n              };\n              h.extensions = [...h.extensions, extension];\n              currOffset += len;\n            }\n          }\n          break;\n        default:\n          {\n            const extension: Extension = {\n              id: 0,\n              payload: rawPacket.subarray(\n                currOffset,\n                currOffset + extensionLength\n              ),\n            };\n            h.extensions = [...h.extensions, extension];\n            currOffset += h.extensions[0].payload.length;\n          }\n          break;\n      }\n    }\n    h.payloadOffset = currOffset;\n    if (h.padding) {\n      h.paddingSize = rawPacket[rawPacket.length - 1];\n    }\n\n    return h;\n  }\n\n  get serializeSize() {\n    const { csrc, extensionProfile, extensions } = this;\n\n    let size = 12 + csrc.length * csrcSize;\n\n    if (extensions.length > 0 || this.extension === true) {\n      let extSize = 4;\n      switch (extensionProfile) {\n        case ExtensionProfiles.OneByte:\n          for (const extension of extensions) {\n            extSize += 1 + extension.payload.length;\n          }\n          break;\n        case ExtensionProfiles.TwoByte:\n          for (const extension of extensions) {\n            extSize += 2 + extension.payload.length;\n          }\n          break;\n        default:\n          extSize += extensions[0].payload.length;\n      }\n      size += Math.floor((extSize + 3) / 4) * 4;\n    }\n\n    return size;\n  }\n\n  serialize(size: number) {\n    const buf = Buffer.alloc(size);\n    let offset = 0;\n\n    const v_p_x_cc = new BitWriter(8);\n    v_p_x_cc.set(2, 0, this.version);\n    if (this.padding) v_p_x_cc.set(1, 2, 1);\n    if (this.extensions.length > 0) this.extension = true;\n    if (this.extension) v_p_x_cc.set(1, 3, 1);\n    v_p_x_cc.set(4, 4, this.csrc.length);\n    buf.writeUInt8(v_p_x_cc.value, offset++);\n\n    const m_pt = new BitWriter(8);\n    if (this.marker) m_pt.set(1, 0, 1);\n    m_pt.set(7, 1, this.payloadType);\n    buf.writeUInt8(m_pt.value, offset++);\n\n    buf.writeUInt16BE(this.sequenceNumber, seqNumOffset);\n    offset += 2;\n    buf.writeUInt32BE(this.timestamp, timestampOffset);\n    offset += 4;\n    buf.writeUInt32BE(this.ssrc, ssrcOffset);\n    offset += 4;\n\n    for (const csrc of this.csrc) {\n      buf.writeUInt32BE(csrc, offset);\n      offset += 4;\n    }\n\n    if (this.extension) {\n      const extHeaderPos = offset;\n      buf.writeUInt16BE(this.extensionProfile, offset);\n      offset += 4;\n      const startExtensionsPos = offset;\n\n      switch (this.extensionProfile) {\n        case ExtensionProfiles.OneByte:\n          for (const extension of this.extensions) {\n            buf.writeUInt8(\n              (extension.id << 4) | (extension.payload.length - 1),\n              offset++\n            );\n            extension.payload.copy(buf, offset);\n            offset += extension.payload.length;\n          }\n          break;\n        case ExtensionProfiles.TwoByte: // 1バイトで収まらなくなった歴史的経緯\n          for (const extension of this.extensions) {\n            buf.writeUInt8(extension.id, offset++);\n            buf.writeUInt8(extension.payload.length, offset++);\n            extension.payload.copy(buf, offset);\n            offset += extension.payload.length;\n          }\n          break;\n        default:\n          const extLen = this.extensions[0].payload.length;\n          if (extLen % 4 != 0) {\n            throw new Error();\n          }\n          this.extensions[0].payload.copy(buf, offset);\n          offset += extLen;\n      }\n\n      const extSize = offset - startExtensionsPos;\n      const roundedExtSize = Math.trunc((extSize + 3) / 4) * 4;\n\n      buf.writeUInt16BE(Math.trunc(roundedExtSize / 4), extHeaderPos + 2);\n      // padding 4 bytes boundaries\n      for (let i = 0; i < roundedExtSize - extSize; i++) {\n        buf.writeUInt8(0, offset);\n        offset++;\n      }\n    }\n    this.payloadOffset = offset;\n    return buf;\n  }\n}\n\nexport class RtpPacket {\n  constructor(public header: RtpHeader, public payload: Buffer) {}\n\n  get serializeSize() {\n    return this.header.serializeSize + this.payload.length;\n  }\n\n  clone() {\n    return new RtpPacket(new RtpHeader({ ...this.header }), this.payload);\n  }\n\n  serialize() {\n    let buf = this.header.serialize(\n      this.header.serializeSize + this.payload.length\n    );\n    const { payloadOffset } = this.header;\n    this.payload.copy(buf, payloadOffset);\n    if (this.header.padding) {\n      const padding = Buffer.alloc(this.header.paddingSize);\n      padding.writeUInt8(this.header.paddingSize, this.header.paddingSize - 1);\n      buf = Buffer.concat([buf, padding]);\n    }\n\n    return buf;\n  }\n\n  static deSerialize(buf: Buffer) {\n    const header = RtpHeader.deSerialize(buf);\n    const p = new RtpPacket(\n      header,\n      buf.subarray(header.payloadOffset, buf.length - header.paddingSize)\n    );\n    return p;\n  }\n\n  clear() {\n    this.payload = null as any;\n  }\n}\n","import { createCipheriv, createDecipheriv, createHmac } from \"crypto\";\n\nimport { RtcpHeader } from \"../../rtcp/header\";\nimport { RtpHeader } from \"../../rtp/rtp\";\nimport { CipherAesBase } from \".\";\n\nexport class CipherAesCtr extends CipherAesBase {\n  readonly authTagLength = 10;\n\n  constructor(\n    srtpSessionKey: Buffer,\n    srtpSessionSalt: Buffer,\n    srtcpSessionKey: Buffer,\n    srtcpSessionSalt: Buffer,\n    private srtpSessionAuthTag: Buffer,\n    private srtcpSessionAuthTag: Buffer\n  ) {\n    super(srtpSessionKey, srtpSessionSalt, srtcpSessionKey, srtcpSessionSalt);\n  }\n\n  encryptRtp(header: RtpHeader, payload: Buffer, rolloverCounter: number) {\n    const headerBuffer = header.serialize(header.serializeSize);\n\n    const counter = this.generateCounter(\n      header.sequenceNumber,\n      rolloverCounter,\n      header.ssrc,\n      this.srtpSessionSalt\n    );\n\n    const cipher = createCipheriv(\"aes-128-ctr\", this.srtpSessionKey, counter);\n    const enc = cipher.update(payload);\n\n    const authTag = this.generateSrtpAuthTag(\n      rolloverCounter,\n      headerBuffer,\n      enc\n    );\n    return Buffer.concat([headerBuffer, enc, authTag]);\n  }\n\n  decryptRtp(cipherText: Buffer, rolloverCounter: number): [Buffer, RtpHeader] {\n    const header = RtpHeader.deSerialize(cipherText);\n\n    const size = cipherText.length - this.authTagLength;\n\n    cipherText = cipherText.subarray(0, cipherText.length - this.authTagLength);\n\n    const counter = this.generateCounter(\n      header.sequenceNumber,\n      rolloverCounter,\n      header.ssrc,\n      this.srtpSessionSalt\n    );\n    const cipher = createDecipheriv(\n      \"aes-128-ctr\",\n      this.srtpSessionKey,\n      counter\n    );\n    const payload = cipherText.subarray(header.payloadOffset);\n    const buf = cipher.update(payload);\n\n    const dst = Buffer.concat([\n      cipherText.subarray(0, header.payloadOffset),\n      buf,\n      Buffer.alloc(size - header.payloadOffset - buf.length),\n    ]);\n\n    return [dst, header];\n  }\n\n  encryptRTCP(rtcpPacket: Buffer, srtcpIndex: number): Buffer {\n    let out = Buffer.from(rtcpPacket);\n    const ssrc = out.readUInt32BE(4);\n\n    const counter = this.generateCounter(\n      srtcpIndex & 0xffff,\n      srtcpIndex >> 16,\n      ssrc,\n      this.srtcpSessionSalt\n    );\n    const cipher = createCipheriv(\"aes-128-ctr\", this.srtcpSessionKey, counter);\n    // Encrypt everything after header\n    const buf = cipher.update(out.slice(8));\n    buf.copy(out, 8);\n    out = Buffer.concat([out, Buffer.alloc(4)]);\n    out.writeUInt32BE(srtcpIndex, out.length - 4);\n    out[out.length - 4] |= 0x80;\n    const authTag = this.generateSrtcpAuthTag(out);\n    out = Buffer.concat([out, authTag]);\n\n    return out;\n  }\n\n  decryptRTCP(encrypted: Buffer): [Buffer, RtcpHeader] {\n    const header = RtcpHeader.deSerialize(encrypted);\n\n    const tailOffset = encrypted.length - (this.authTagLength + srtcpIndexSize);\n    const out = Buffer.from(encrypted).slice(0, tailOffset);\n\n    const isEncrypted = encrypted[tailOffset] >> 7;\n    if (isEncrypted === 0) return [out, header];\n\n    let srtcpIndex = encrypted.readUInt32BE(tailOffset);\n    srtcpIndex &= ~(1 << 31);\n\n    const ssrc = encrypted.readUInt32BE(4);\n\n    // todo impl compare\n    const actualTag = encrypted.subarray(encrypted.length - 10);\n\n    const counter = this.generateCounter(\n      srtcpIndex & 0xffff,\n      srtcpIndex >> 16,\n      ssrc,\n      this.srtcpSessionSalt\n    );\n    const cipher = createDecipheriv(\n      \"aes-128-ctr\",\n      this.srtcpSessionKey,\n      counter\n    );\n    const buf = cipher.update(out.subarray(8));\n    buf.copy(out, 8);\n    return [out, header];\n  }\n\n  generateSrtcpAuthTag(buf: Buffer) {\n    const srtcpSessionAuth = createHmac(\"sha1\", this.srtcpSessionAuthTag);\n    return srtcpSessionAuth.update(buf).digest().slice(0, 10);\n  }\n\n  generateCounter(\n    sequenceNumber: number,\n    rolloverCounter: number,\n    ssrc: number,\n    sessionSalt: Buffer\n  ) {\n    const counter = Buffer.alloc(16);\n    counter.writeUInt32BE(ssrc, 4);\n    counter.writeUInt32BE(rolloverCounter, 8);\n    counter.writeUInt32BE(Number(BigInt(sequenceNumber) << 16n), 12);\n\n    for (let i = 0; i < sessionSalt.length; i++) {\n      counter[i] ^= sessionSalt[i];\n    }\n    return counter;\n  }\n\n  generateSrtpAuthTag(roc: number, ...buffers: Buffer[]) {\n    const srtpSessionAuth = createHmac(\"sha1\", this.srtpSessionAuthTag);\n    const rocRaw = Buffer.alloc(4);\n    rocRaw.writeUInt32BE(roc);\n\n    for (const buf of buffers) {\n      srtpSessionAuth.update(buf);\n    }\n    return srtpSessionAuth.update(rocRaw).digest().subarray(0, 10);\n  }\n}\n\nconst srtcpIndexSize = 4;\n","import { createCipheriv, createDecipheriv } from \"crypto\";\n\nimport { createBufferWriter } from \"../../../../common/src\";\nimport { growBufferSize } from \"../../helper\";\nimport { RtcpHeader } from \"../../rtcp/header\";\nimport { RtpHeader } from \"../../rtp/rtp\";\nimport { CipherAesBase } from \".\";\n\nexport class CipherAesGcm extends CipherAesBase {\n  readonly aeadAuthTagLen = 16;\n  readonly rtpIvWriter = createBufferWriter([2, 4, 4, 2], true);\n  readonly rtcpIvWriter = createBufferWriter([2, 4, 2, 4], true);\n  readonly aadWriter = createBufferWriter([4], true);\n\n  constructor(\n    srtpSessionKey: Buffer,\n    srtpSessionSalt: Buffer,\n    srtcpSessionKey: Buffer,\n    srtcpSessionSalt: Buffer\n  ) {\n    super(srtpSessionKey, srtpSessionSalt, srtcpSessionKey, srtcpSessionSalt);\n  }\n\n  encryptRtp(header: RtpHeader, payload: Buffer, rolloverCounter: number) {\n    const hdr = header.serialize(header.serializeSize);\n\n    const iv = this.rtpInitializationVector(header, rolloverCounter);\n\n    const cipher = createCipheriv(\"aes-128-gcm\", this.srtpSessionKey, iv);\n    cipher.setAAD(hdr);\n    const enc = cipher.update(payload);\n    cipher.final();\n\n    const authTag = cipher.getAuthTag();\n\n    const dst = Buffer.concat([hdr, enc, authTag]);\n    return dst;\n  }\n\n  decryptRtp(cipherText: Buffer, rolloverCounter: number): [Buffer, RtpHeader] {\n    const header = RtpHeader.deSerialize(cipherText);\n\n    let dst = Buffer.from([]);\n    dst = growBufferSize(dst, cipherText.length - this.aeadAuthTagLen);\n    cipherText.slice(0, header.payloadOffset).copy(dst);\n\n    const iv = this.rtpInitializationVector(header, rolloverCounter);\n\n    const enc = cipherText.slice(\n      header.payloadOffset,\n      cipherText.length - this.aeadAuthTagLen\n    );\n\n    const cipher = createDecipheriv(\"aes-128-gcm\", this.srtpSessionKey, iv);\n    const dec = cipher.update(enc);\n\n    dec.copy(dst, header.payloadOffset);\n\n    return [dst, header];\n  }\n\n  encryptRTCP(rtcpPacket: Buffer, srtcpIndex: number): Buffer {\n    const ssrc = rtcpPacket.readUInt32BE(4);\n\n    const addPos = rtcpPacket.length + this.aeadAuthTagLen;\n    let dst = Buffer.from([]);\n    dst = growBufferSize(dst, addPos + srtcpIndexSize);\n    rtcpPacket.slice(0, 8).copy(dst);\n\n    const iv = this.rtcpInitializationVector(ssrc, srtcpIndex);\n    const aad = this.rtcpAdditionalAuthenticatedData(rtcpPacket, srtcpIndex);\n\n    const cipher = createCipheriv(\"aes-128-gcm\", this.srtcpSessionKey, iv);\n    cipher.setAAD(aad);\n    const enc = cipher.update(rtcpPacket.slice(8));\n    cipher.final();\n    enc.copy(dst, 8);\n\n    const authTag = cipher.getAuthTag();\n    authTag.copy(dst, 8 + enc.length);\n    aad.slice(8, 12).copy(dst, addPos);\n\n    return dst;\n  }\n\n  decryptRTCP(encrypted: Buffer): [Buffer, RtcpHeader] {\n    const header = RtcpHeader.deSerialize(encrypted);\n    const aadPos = encrypted.length - srtcpIndexSize;\n\n    const dst = Buffer.alloc(aadPos - this.aeadAuthTagLen);\n    encrypted.slice(0, 8).copy(dst);\n\n    const ssrc = encrypted.readUInt32BE(4);\n\n    let srtcpIndex = encrypted.readUInt32BE(encrypted.length - 4);\n    srtcpIndex &= ~(rtcpEncryptionFlag << 24);\n\n    const iv = this.rtcpInitializationVector(ssrc, srtcpIndex);\n    const aad = this.rtcpAdditionalAuthenticatedData(encrypted, srtcpIndex);\n\n    const cipher = createDecipheriv(\"aes-128-gcm\", this.srtcpSessionKey, iv);\n    cipher.setAAD(aad);\n    const dec = cipher.update(encrypted.slice(8, aadPos));\n\n    dec.copy(dst, 8);\n\n    return [dst, header];\n  }\n\n  // https://tools.ietf.org/html/rfc7714#section-8.1\n  private rtpInitializationVector(header: RtpHeader, rolloverCounter: number) {\n    const iv = this.rtpIvWriter([\n      0,\n      header.ssrc,\n      rolloverCounter,\n      header.sequenceNumber,\n    ]);\n    for (let i = 0; i < iv.length; i++) {\n      iv[i] ^= this.srtpSessionSalt[i];\n    }\n    return iv;\n  }\n\n  // https://tools.ietf.org/html/rfc7714#section-9.1\n  private rtcpInitializationVector(ssrc: number, srtcpIndex: number) {\n    const iv = this.rtcpIvWriter([0, ssrc, 0, srtcpIndex]);\n    for (let i = 0; i < iv.length; i++) {\n      iv[i] ^= this.srtcpSessionSalt[i];\n    }\n    return iv;\n  }\n\n  // https://datatracker.ietf.org/doc/html/rfc7714#section-17\n  private rtcpAdditionalAuthenticatedData(\n    rtcpPacket: Buffer,\n    srtcpIndex: number\n  ) {\n    const aad = Buffer.concat([\n      rtcpPacket.subarray(0, 8),\n      this.aadWriter([srtcpIndex]),\n    ]);\n    aad[8] |= rtcpEncryptionFlag;\n    return aad;\n  }\n}\n\nconst srtcpIndexSize = 4;\nconst rtcpEncryptionFlag = 0x80;\n","import { RtcpHeader } from \"../../rtcp/header\";\nimport { RtpHeader } from \"../../rtp/rtp\";\n\nexport abstract class CipherAesBase {\n  constructor(\n    public srtpSessionKey: Buffer,\n    public srtpSessionSalt: Buffer,\n    public srtcpSessionKey: Buffer,\n    public srtcpSessionSalt: Buffer\n  ) {}\n\n  encryptRtp(\n    header: RtpHeader,\n    payload: Buffer,\n    rolloverCounter: number\n  ): Buffer {\n    return Buffer.from([]);\n  }\n\n  decryptRtp(cipherText: Buffer, rolloverCounter: number): [Buffer, RtpHeader] {\n    return [] as any;\n  }\n\n  encryptRTCP(rawRtcp: Buffer, srtcpIndex: number): Buffer {\n    return Buffer.from([]);\n  }\n\n  decryptRTCP(encrypted: Buffer): [Buffer, RtcpHeader] {\n    return [] as any;\n  }\n}\n","export const ProtectionProfileAes128CmHmacSha1_80 = 0x0001 as const;\nexport const ProtectionProfileAeadAes128Gcm = 0x0007 as const;\n\nexport type Profile =\n  | typeof ProtectionProfileAes128CmHmacSha1_80\n  | typeof ProtectionProfileAeadAes128Gcm;\n\nexport const keyLength = (profile: Profile) => {\n  switch (profile) {\n    case ProtectionProfileAes128CmHmacSha1_80:\n    case ProtectionProfileAeadAes128Gcm:\n      return 16;\n  }\n};\n\nexport const saltLength = (profile: Profile) => {\n  switch (profile) {\n    case ProtectionProfileAes128CmHmacSha1_80:\n      return 14;\n    case ProtectionProfileAeadAes128Gcm:\n      return 12;\n  }\n};\n","import { AES } from \"aes-js\";\nimport { createHmac, Hmac } from \"crypto\";\n\nimport { CipherAesBase } from \"../cipher\";\nimport { CipherAesCtr } from \"../cipher/ctr\";\nimport { CipherAesGcm } from \"../cipher/gcm\";\nimport {\n  Profile,\n  ProtectionProfileAeadAes128Gcm,\n  ProtectionProfileAes128CmHmacSha1_80,\n} from \"../const\";\n\nexport class Context {\n  srtpSSRCStates: { [ssrc: number]: SrtpSsrcState } = {};\n  srtpSessionKey: Buffer;\n  srtpSessionSalt: Buffer;\n  srtpSessionAuthTag: Buffer;\n  srtpSessionAuth: Hmac;\n  srtcpSSRCStates: { [ssrc: number]: SrtcpSSRCState } = {};\n  srtcpSessionKey: Buffer;\n  srtcpSessionSalt: Buffer;\n  srtcpSessionAuthTag: Buffer;\n  srtcpSessionAuth: Hmac;\n\n  cipher: CipherAesBase;\n\n  constructor(\n    public masterKey: Buffer,\n    public masterSalt: Buffer,\n    public profile: Profile\n  ) {\n    {\n      // aes-js plaintext require 16byte\n      // so need to padding to 14 byte\n      const diff = 14 - masterSalt.length;\n      if (diff > 0) {\n        this.masterSalt = Buffer.concat([masterSalt, Buffer.alloc(diff)]);\n      }\n    }\n\n    this.srtpSessionKey = this.generateSessionKey(0);\n    this.srtpSessionSalt = this.generateSessionSalt(2);\n    this.srtpSessionAuthTag = this.generateSessionAuthTag(1);\n    this.srtpSessionAuth = createHmac(\"sha1\", this.srtpSessionAuthTag);\n\n    this.srtcpSessionKey = this.generateSessionKey(3);\n    this.srtcpSessionSalt = this.generateSessionSalt(5);\n    this.srtcpSessionAuthTag = this.generateSessionAuthTag(4);\n    this.srtcpSessionAuth = createHmac(\"sha1\", this.srtcpSessionAuthTag);\n\n    switch (profile) {\n      case ProtectionProfileAes128CmHmacSha1_80:\n        this.cipher = new CipherAesCtr(\n          this.srtpSessionKey,\n          this.srtpSessionSalt,\n          this.srtcpSessionKey,\n          this.srtcpSessionSalt,\n          this.srtpSessionAuthTag,\n          this.srtcpSessionAuthTag\n        );\n        break;\n      case ProtectionProfileAeadAes128Gcm:\n        this.cipher = new CipherAesGcm(\n          this.srtpSessionKey,\n          this.srtpSessionSalt,\n          this.srtcpSessionKey,\n          this.srtcpSessionSalt\n        );\n        break;\n    }\n  }\n\n  generateSessionKey(label: number) {\n    let sessionKey = Buffer.from(this.masterSalt);\n\n    const labelAndIndexOverKdr = Buffer.from([\n      label,\n      0x00,\n      0x00,\n      0x00,\n      0x00,\n      0x00,\n      0x00,\n    ]);\n    for (\n      let i = labelAndIndexOverKdr.length - 1, j = sessionKey.length - 1;\n      i >= 0;\n      i--, j--\n    ) {\n      sessionKey[j] = sessionKey[j] ^ labelAndIndexOverKdr[i];\n    }\n\n    sessionKey = Buffer.concat([sessionKey, Buffer.from([0x00, 0x00])]);\n    const block = new AES(this.masterKey);\n    return Buffer.from(block.encrypt(sessionKey) as ArrayBuffer);\n  }\n\n  generateSessionSalt(label: number) {\n    let sessionSalt = Buffer.from(this.masterSalt);\n    const labelAndIndexOverKdr = Buffer.from([\n      label,\n      0x00,\n      0x00,\n      0x00,\n      0x00,\n      0x00,\n      0x00,\n    ]);\n    for (\n      let i = labelAndIndexOverKdr.length - 1, j = sessionSalt.length - 1;\n      i >= 0;\n      i--, j--\n    ) {\n      sessionSalt[j] = sessionSalt[j] ^ labelAndIndexOverKdr[i];\n    }\n    sessionSalt = Buffer.concat([sessionSalt, Buffer.from([0x00, 0x00])]);\n    const block = new AES(this.masterKey);\n    sessionSalt = Buffer.from(block.encrypt(sessionSalt) as ArrayBuffer);\n    return sessionSalt.slice(0, 14);\n  }\n\n  generateSessionAuthTag(label: number) {\n    const sessionAuthTag = Buffer.from(this.masterSalt);\n    const labelAndIndexOverKdr = Buffer.from([\n      label,\n      0x00,\n      0x00,\n      0x00,\n      0x00,\n      0x00,\n      0x00,\n    ]);\n    for (\n      let i = labelAndIndexOverKdr.length - 1, j = sessionAuthTag.length - 1;\n      i >= 0;\n      i--, j--\n    ) {\n      sessionAuthTag[j] = sessionAuthTag[j] ^ labelAndIndexOverKdr[i];\n    }\n    let firstRun = Buffer.concat([sessionAuthTag, Buffer.from([0x00, 0x00])]);\n    let secondRun = Buffer.concat([sessionAuthTag, Buffer.from([0x00, 0x01])]);\n    const block = new AES(this.masterKey);\n    firstRun = Buffer.from(block.encrypt(firstRun) as ArrayBuffer);\n    secondRun = Buffer.from(block.encrypt(secondRun) as ArrayBuffer);\n    return Buffer.concat([firstRun, secondRun.slice(0, 4)]);\n  }\n\n  getSrtpSsrcState(ssrc: number) {\n    let s = this.srtpSSRCStates[ssrc];\n    if (s) return s;\n    s = {\n      ssrc,\n      rolloverCounter: 0,\n      lastSequenceNumber: 0,\n    };\n    this.srtpSSRCStates[ssrc] = s;\n    return s;\n  }\n\n  getSrtcpSsrcState(ssrc: number) {\n    let s = this.srtcpSSRCStates[ssrc];\n    if (s) return s;\n    s = {\n      srtcpIndex: 0,\n      ssrc,\n    };\n    this.srtcpSSRCStates[ssrc] = s;\n    return s;\n  }\n\n  // 3.3.1.  Packet Index Determination, and ROC, s_l Update\n  // In particular, out-of-order RTP packets with\n  // sequence numbers close to 2^16 or zero must be properly handled.\n  updateRolloverCount(sequenceNumber: number, s: SrtpSsrcState) {\n    if (!s.rolloverHasProcessed) {\n      s.rolloverHasProcessed = true;\n    } else if (sequenceNumber === 0) {\n      if (s.lastSequenceNumber > MaxROCDisorder) {\n        s.rolloverCounter++;\n      }\n    } else if (\n      s.lastSequenceNumber < MaxROCDisorder &&\n      sequenceNumber > MaxSequenceNumber - MaxROCDisorder\n    ) {\n      // https://github.com/shinyoshiaki/werift-webrtc/issues/94\n      if (s.rolloverCounter > 0) {\n        s.rolloverCounter--;\n      }\n    } else if (\n      sequenceNumber < MaxROCDisorder &&\n      s.lastSequenceNumber > MaxSequenceNumber - MaxROCDisorder\n    ) {\n      s.rolloverCounter++;\n    }\n    s.lastSequenceNumber = sequenceNumber;\n  }\n\n  generateSrtpAuthTag(buf: Buffer, roc: number) {\n    this.srtpSessionAuth = createHmac(\"sha1\", this.srtpSessionAuthTag);\n    const rocRaw = Buffer.alloc(4);\n    rocRaw.writeUInt32BE(roc);\n\n    return this.srtpSessionAuth\n      .update(buf)\n      .update(rocRaw)\n      .digest()\n      .slice(0, 10);\n  }\n\n  index(ssrc: number) {\n    const s = this.srtcpSSRCStates[ssrc];\n    if (!s) {\n      return 0;\n    }\n    return s.srtcpIndex;\n  }\n\n  setIndex(ssrc: number, index: number) {\n    const s = this.getSrtcpSsrcState(ssrc);\n    s.srtcpIndex = index % 0x7fffffff;\n  }\n}\n\nexport interface SrtpSsrcState {\n  ssrc: number;\n  rolloverCounter: number;\n  rolloverHasProcessed?: boolean;\n  lastSequenceNumber: number;\n}\n\nexport type SrtcpSSRCState = {\n  srtcpIndex: number;\n  ssrc: number;\n};\n\nconst MaxROCDisorder = 100;\nconst MaxSequenceNumber = 65535;\n","import { RtcpHeader } from \"../../rtcp/header\";\nimport { Profile } from \"../const\";\nimport { Context } from \"./context\";\n\nexport class SrtcpContext extends Context {\n  constructor(masterKey: Buffer, masterSalt: Buffer, profile: Profile) {\n    super(masterKey, masterSalt, profile);\n  }\n\n  encryptRTCP(rawRtcp: Buffer) {\n    const ssrc = rawRtcp.readUInt32BE(4);\n    const s = this.getSrtcpSsrcState(ssrc);\n    s.srtcpIndex++;\n    if (s.srtcpIndex >> maxSRTCPIndex) {\n      s.srtcpIndex = 0;\n    }\n    const enc = this.cipher.encryptRTCP(rawRtcp, s.srtcpIndex);\n    return enc;\n  }\n\n  decryptRTCP(encrypted: Buffer): [Buffer, RtcpHeader] {\n    const dec = this.cipher.decryptRTCP(encrypted);\n    return dec;\n  }\n}\n\nconst maxSRTCPIndex = 0x7fffffff;\n","import { RtpHeader } from \"../../rtp/rtp\";\nimport { Profile } from \"../const\";\nimport { Context } from \"./context\";\n\nexport class SrtpContext extends Context {\n  constructor(masterKey: Buffer, masterSalt: Buffer, profile: Profile) {\n    super(masterKey, masterSalt, profile);\n  }\n\n  encryptRtp(payload: Buffer, header: RtpHeader) {\n    const s = this.getSrtpSsrcState(header.ssrc);\n    this.updateRolloverCount(header.sequenceNumber, s);\n\n    const enc = this.cipher.encryptRtp(header, payload, s.rolloverCounter);\n    return enc;\n  }\n\n  decryptRtp(cipherText: Buffer): [Buffer, RtpHeader] {\n    const header = RtpHeader.deSerialize(cipherText);\n\n    const s = this.getSrtpSsrcState(header.ssrc);\n    this.updateRolloverCount(header.sequenceNumber, s);\n\n    const dec = this.cipher.decryptRtp(cipherText, s.rolloverCounter);\n    return dec;\n  }\n}\n","import { Context } from \"./context/context\";\n\nexport type SessionKeys = {\n  localMasterKey: Buffer;\n  localMasterSalt: Buffer;\n  remoteMasterKey: Buffer;\n  remoteMasterSalt: Buffer;\n};\n\nexport type Config = {\n  keys: SessionKeys;\n  profile: number;\n};\n\nexport class Session<T extends Context> {\n  localContext!: T;\n  remoteContext!: T;\n  onData?: (buf: Buffer) => void;\n\n  constructor(private ContextCls: any) {}\n\n  start(\n    localMasterKey: Buffer,\n    localMasterSalt: Buffer,\n    remoteMasterKey: Buffer,\n    remoteMasterSalt: Buffer,\n    profile: number\n  ) {\n    this.localContext = new this.ContextCls(\n      localMasterKey,\n      localMasterSalt,\n      profile\n    );\n    this.remoteContext = new this.ContextCls(\n      remoteMasterKey,\n      remoteMasterSalt,\n      profile\n    );\n  }\n}\n","import { SrtcpContext } from \"./context/srtcp\";\nimport { Config, Session } from \"./session\";\n\nexport class SrtcpSession extends Session<SrtcpContext> {\n  constructor(public config: Config) {\n    super(SrtcpContext);\n\n    this.start(\n      config.keys.localMasterKey,\n      config.keys.localMasterSalt,\n      config.keys.remoteMasterKey,\n      config.keys.remoteMasterSalt,\n      config.profile\n    );\n  }\n\n  decrypt = (buf: Buffer) => {\n    const [decrypted] = this.remoteContext.decryptRTCP(buf);\n    return decrypted;\n  };\n\n  encrypt(rawRtcp: Buffer) {\n    const enc = this.localContext.encryptRTCP(rawRtcp);\n    return enc;\n  }\n}\n","import { RtpHeader } from \"../rtp/rtp\";\nimport { SrtpContext } from \"./context/srtp\";\nimport { Config, Session } from \"./session\";\n\nexport class SrtpSession extends Session<SrtpContext> {\n  constructor(public config: Config) {\n    super(SrtpContext);\n    this.start(\n      config.keys.localMasterKey,\n      config.keys.localMasterSalt,\n      config.keys.remoteMasterKey,\n      config.keys.remoteMasterSalt,\n      config.profile\n    );\n  }\n\n  decrypt = (buf: Buffer) => {\n    const [decrypted] = this.remoteContext.decryptRtp(buf);\n    return decrypted;\n  };\n\n  encrypt(payload: Buffer, header: RtpHeader) {\n    return this.localContext.encryptRtp(payload, header);\n  }\n}\n","// ID Value    Chunk Type\n// -----       ----------\n// 0          - Payload Data (DATA)\n// 1          - Initiation (INIT)\n// 2          - Initiation Acknowledgement (INIT ACK)\n// 3          - Selective Acknowledgement (SACK)\n// 4          - Heartbeat Request (HEARTBEAT)\n// 5          - Heartbeat Acknowledgement (HEARTBEAT ACK)\n// 6          - Abort (ABORT)\n// 7          - Shutdown (SHUTDOWN)\n// 8          - Shutdown Acknowledgement (SHUTDOWN ACK)\n// 9          - Operation Error (ERROR)\n// 10         - State Cookie (COOKIE ECHO)\n// 11         - Cookie Acknowledgement (COOKIE ACK)\n// 12         - Reserved for Explicit Congestion Notification Echo\n//              (ECNE)\n// 13         - Reserved for Congestion Window Reduced (CWR)\n// 14         - Shutdown Complete (SHUTDOWN COMPLETE)\n// 15 to 62   - available\n// 63         - reserved for IETF-defined Chunk Extensions\n// 64 to 126  - available\n// 127        - reserved for IETF-defined Chunk Extensions\n// 128 to 190 - available\n// 191        - reserved for IETF-defined Chunk Extensions\n// 192 to 254 - available\n// 255        - reserved for IETF-defined Chunk Extensions\n\nimport { jspack } from \"jspack\";\nconst crc32c = require(\"turbo-crc32/crc32c\");\n\nexport class Chunk {\n  public get body(): Buffer | undefined {\n    return this._body;\n  }\n  public set body(value: Buffer | undefined) {\n    this._body = value;\n  }\n  static type = -1;\n\n  constructor(\n    public flags = 0,\n    private _body: Buffer | undefined = Buffer.from(\"\")\n  ) {}\n\n  get type() {\n    return Chunk.type;\n  }\n\n  get bytes() {\n    if (!this.body) throw new Error();\n\n    const data = Buffer.concat([\n      Buffer.from(\n        jspack.Pack(\"!BBH\", [this.type, this.flags, this.body.length + 4])\n      ),\n      this.body,\n      ...[...Array(padL(this.body.length))].map(() => Buffer.from(\"\\x00\")),\n    ]);\n    return data;\n  }\n}\n\nexport class BaseInitChunk extends Chunk {\n  initiateTag: number;\n  advertisedRwnd: number;\n  outboundStreams: number;\n  inboundStreams: number;\n  initialTsn: number;\n  params: [number, Buffer][];\n  constructor(public flags = 0, body?: Buffer) {\n    super(flags, body);\n\n    if (body) {\n      [\n        this.initiateTag,\n        this.advertisedRwnd,\n        this.outboundStreams,\n        this.inboundStreams,\n        this.initialTsn,\n      ] = jspack.Unpack(\"!LLHHL\", body);\n      this.params = decodeParams(body.slice(16));\n    } else {\n      this.initiateTag = 0;\n      this.advertisedRwnd = 0;\n      this.outboundStreams = 0;\n      this.inboundStreams = 0;\n      this.initialTsn = 0;\n      this.params = [];\n    }\n  }\n\n  get body() {\n    let body = Buffer.from(\n      jspack.Pack(\"!LLHHL\", [\n        this.initiateTag,\n        this.advertisedRwnd,\n        this.outboundStreams,\n        this.inboundStreams,\n        this.initialTsn,\n      ])\n    );\n    body = Buffer.concat([body, encodeParams(this.params)]);\n    return body;\n  }\n}\n\nexport class InitChunk extends BaseInitChunk {\n  static type = 1 as const;\n\n  get type() {\n    return InitChunk.type;\n  }\n}\n\nexport class InitAckChunk extends BaseInitChunk {\n  static type = 2 as const;\n\n  get type() {\n    return InitAckChunk.type;\n  }\n}\n\nexport class ReConfigChunk extends BaseInitChunk {\n  static type = 130 as const;\n\n  get type() {\n    return ReConfigChunk.type;\n  }\n}\n\nexport class ForwardTsnChunk extends Chunk {\n  static type = 192 as const;\n  streams: [number, number][] = [];\n  cumulativeTsn: number;\n\n  constructor(public flags = 0, body: Buffer | undefined) {\n    super(flags, body);\n\n    if (body) {\n      this.cumulativeTsn = jspack.Unpack(\"!L\", body)[0];\n      let pos = 4;\n      while (pos < body.length) {\n        this.streams.push(\n          jspack.Unpack(\"!HH\", body.slice(pos)) as [number, number]\n        );\n        pos += 4;\n      }\n    } else {\n      this.cumulativeTsn = 0;\n    }\n  }\n\n  get type() {\n    return ForwardTsnChunk.type;\n  }\n\n  set body(_: Buffer) {}\n\n  get body() {\n    const body = Buffer.from(jspack.Pack(\"!L\", [this.cumulativeTsn]));\n    return Buffer.concat([\n      body,\n      ...this.streams.map(([id, seq]) =>\n        Buffer.from(jspack.Pack(\"!HH\", [id, seq]))\n      ),\n    ]);\n  }\n}\n\nexport class DataChunk extends Chunk {\n  static type = 0 as const;\n  get type() {\n    return DataChunk.type;\n  }\n  tsn: number = 0;\n  streamId: number = 0;\n  streamSeqNum: number = 0;\n  protocol: number = 0;\n  userData: Buffer = Buffer.from(\"\");\n  abandoned: boolean = false;\n  acked: boolean = false;\n  misses: number = 0;\n  retransmit: boolean = false;\n  sentCount: number = 0;\n  bookSize: number = 0;\n  expiry?: number;\n  maxRetransmits?: number;\n  sentTime?: number;\n\n  constructor(public flags = 0, body: Buffer | undefined) {\n    super(flags, body);\n    if (body) {\n      [this.tsn, this.streamId, this.streamSeqNum, this.protocol] =\n        jspack.Unpack(\"!LHHL\", body);\n      this.userData = body.slice(12);\n    }\n  }\n\n  get bytes() {\n    const length = 16 + this.userData.length;\n    let data = Buffer.concat([\n      Buffer.from(\n        jspack.Pack(\"!BBHLHHL\", [\n          this.type,\n          this.flags,\n          length,\n          this.tsn,\n          this.streamId,\n          this.streamSeqNum,\n          this.protocol,\n        ])\n      ),\n      this.userData,\n    ]);\n    if (length % 4) {\n      data = Buffer.concat([\n        data,\n        ...[...Array(padL(length))].map(() => Buffer.from(\"\\x00\")),\n      ]);\n    }\n    return data;\n  }\n}\n\nexport class CookieEchoChunk extends Chunk {\n  static type = 10 as const;\n\n  get type() {\n    return CookieEchoChunk.type;\n  }\n}\n\nexport class CookieAckChunk extends Chunk {\n  static type = 11 as const;\n\n  get type() {\n    return CookieAckChunk.type;\n  }\n}\n\nexport class BaseParamsChunk extends Chunk {\n  params: [number, Buffer][] = [];\n  constructor(public flags = 0, body: Buffer | undefined = undefined) {\n    super(flags, body);\n    if (body) {\n      this.params = decodeParams(body);\n    }\n  }\n\n  get body() {\n    return encodeParams(this.params);\n  }\n}\n\nexport class AbortChunk extends BaseParamsChunk {\n  static type = 6 as const;\n\n  get type() {\n    return AbortChunk.type;\n  }\n}\n\nexport class ErrorChunk extends BaseParamsChunk {\n  static type = 9 as const;\n  static readonly CODE = {\n    InvalidStreamIdentifier: 1,\n    MissingMandatoryParameter: 2,\n    StaleCookieError: 3,\n    OutofResource: 4,\n    UnresolvableAddress: 5,\n    UnrecognizedChunkType: 6,\n    InvalidMandatoryParameter: 7,\n    UnrecognizedParameters: 8,\n    NoUserData: 9,\n    CookieReceivedWhileShuttingDown: 10,\n    RestartofanAssociationwithNewAddresses: 11,\n    UserInitiatedAbort: 12,\n    ProtocolViolation: 13,\n  } as const;\n\n  get type() {\n    return ErrorChunk.type;\n  }\n\n  get descriptions() {\n    return this.params.map(([code, body]) => {\n      const name = (Object.entries(ErrorChunk.CODE).find(\n        ([, num]) => num === code\n      ) || [])[0];\n      return { name, body };\n    });\n  }\n}\n\nexport class HeartbeatChunk extends BaseParamsChunk {\n  static type = 4 as const;\n\n  get type() {\n    return HeartbeatChunk.type;\n  }\n}\n\nexport class HeartbeatAckChunk extends BaseParamsChunk {\n  static type = 5 as const;\n\n  get type() {\n    return HeartbeatAckChunk.type;\n  }\n}\n\n// https://tools.ietf.org/html/rfc6525#section-3.1\n// chunkReconfig represents an SCTP Chunk used to reconfigure streams.\n//\n//  0                   1                   2                   3\n//  0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n// +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n// | Type = 130    |  Chunk Flags  |      Chunk Length             |\n// +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n// \\                                                               \\\n// /                  Re-configuration Parameter                   /\n// \\                                                               \\\n// +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n// \\                                                               \\\n// /             Re-configuration Parameter (optional)             /\n// \\                                                               \\\n// +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\nexport class ReconfigChunk extends BaseParamsChunk {\n  static type = 130 as const;\n\n  get type() {\n    return ReconfigChunk.type;\n  }\n}\n\nexport class SackChunk extends Chunk {\n  static type = 3;\n  get type() {\n    return SackChunk.type;\n  }\n\n  gaps: [number, number][] = [];\n  duplicates: number[] = [];\n  cumulativeTsn = 0;\n  advertisedRwnd = 0;\n\n  constructor(public flags = 0, body: Buffer | undefined) {\n    super(flags, body);\n\n    if (body) {\n      const [cumulativeTsn, advertisedRwnd, nbGaps, nbDuplicates] =\n        jspack.Unpack(\"!LLHH\", body);\n      this.cumulativeTsn = cumulativeTsn;\n      this.advertisedRwnd = advertisedRwnd;\n\n      let pos = 12;\n\n      [...Array(nbGaps)].forEach(() => {\n        this.gaps.push(\n          jspack.Unpack(\"!HH\", body.slice(pos)) as [number, number]\n        );\n        pos += 4;\n      });\n\n      [...Array(nbDuplicates)].forEach(() => {\n        this.duplicates.push(jspack.Unpack(\"!L\", body.slice(pos))[0]);\n        pos += 4;\n      });\n    }\n  }\n\n  get bytes() {\n    const length = 16 + 4 * (this.gaps.length + this.duplicates.length);\n    let data = Buffer.from(\n      jspack.Pack(\"!BBHLLHH\", [\n        this.type,\n        this.flags,\n        length,\n        this.cumulativeTsn,\n        this.advertisedRwnd,\n        this.gaps.length,\n        this.duplicates.length,\n      ])\n    );\n    data = Buffer.concat([\n      data,\n      ...this.gaps.map((gap) => Buffer.from(jspack.Pack(\"!HH\", gap))),\n    ]);\n    data = Buffer.concat([\n      data,\n      ...this.duplicates.map((tsn) => Buffer.from(jspack.Pack(\"!L\", [tsn]))),\n    ]);\n    return data;\n  }\n}\n\nexport class ShutdownChunk extends Chunk {\n  static type = 7;\n  get type() {\n    return ShutdownChunk.type;\n  }\n\n  cumulativeTsn = 0;\n\n  constructor(public flags = 0, body: Buffer | undefined) {\n    super(flags, body);\n\n    if (body) {\n      this.cumulativeTsn = jspack.Unpack(\"!L\", body)[0];\n    }\n  }\n\n  get body() {\n    return Buffer.from(jspack.Pack(\"!L\", [this.cumulativeTsn]));\n  }\n}\n\nexport class ShutdownAckChunk extends Chunk {\n  static type = 8;\n  get type() {\n    return ShutdownAckChunk.type;\n  }\n}\n\nexport class ShutdownCompleteChunk extends Chunk {\n  static type = 14;\n  get type() {\n    return ShutdownCompleteChunk.type;\n  }\n}\n\nconst CHUNK_CLASSES: typeof Chunk[] = [\n  DataChunk,\n  InitChunk,\n  InitAckChunk,\n  SackChunk,\n  HeartbeatChunk,\n  HeartbeatAckChunk,\n  AbortChunk,\n  ShutdownChunk,\n  ShutdownAckChunk,\n  ErrorChunk,\n  CookieEchoChunk,\n  CookieAckChunk,\n  ShutdownCompleteChunk,\n  ReconfigChunk,\n  ForwardTsnChunk,\n];\n\nexport const CHUNK_BY_TYPE = CHUNK_CLASSES.reduce(\n  (acc: { [key: string]: typeof Chunk }, cur) => {\n    acc[cur.type] = cur;\n    return acc;\n  },\n  {}\n);\n\nfunction padL(l: number) {\n  const m = l % 4;\n  return m ? 4 - m : 0;\n}\n\nfunction encodeParams(params: [number, Buffer][]) {\n  let body = Buffer.from(\"\");\n  let padding = Buffer.from(\"\");\n  params.forEach(([type, value]) => {\n    const length = value.length + 4;\n    body = Buffer.concat([\n      body,\n      padding,\n      Buffer.from(jspack.Pack(\"!HH\", [type, length])),\n      value,\n    ]);\n    padding = Buffer.concat(\n      [...Array(padL(length))].map(() => Buffer.from(\"\\x00\"))\n    );\n  });\n  return body;\n}\n\nexport function decodeParams(body: Buffer): [number, Buffer][] {\n  const params: [number, Buffer][] = [];\n  let pos = 0;\n  while (pos <= body.length - 4) {\n    const [type, length] = jspack.Unpack(\"!HH\", body.slice(pos));\n    params.push([type, body.slice(pos + 4, pos + length)]);\n    pos += length + padL(length);\n  }\n  return params;\n}\n\nexport function parsePacket(data: Buffer): [number, number, number, Chunk[]] {\n  if (data.length < 12)\n    throw new Error(\"SCTP packet length is less than 12 bytes\");\n\n  const [sourcePort, destinationPort, verificationTag] = jspack.Unpack(\n    \"!HHL\",\n    data\n  );\n\n  const checkSum = data.readUInt32LE(8);\n\n  const expect = crc32c(\n    Buffer.concat([\n      data.slice(0, 8),\n      Buffer.from(\"\\x00\\x00\\x00\\x00\"),\n      data.slice(12),\n    ])\n  );\n\n  if (checkSum !== expect) throw new Error(\"SCTP packet has invalid checksum\");\n\n  const chunks: Chunk[] = [];\n  let pos = 12;\n  while (pos + 4 <= data.length) {\n    const [chunkType, chunkFlags, chunkLength] = jspack.Unpack(\n      \"!BBH\",\n      data.slice(pos)\n    );\n    const chunkBody = data.slice(pos + 4, pos + chunkLength);\n    const ChunkClass = CHUNK_BY_TYPE[chunkType.toString()];\n    if (ChunkClass) {\n      chunks.push(new ChunkClass(chunkFlags, chunkBody));\n    } else {\n      throw new Error(\"unknown\");\n    }\n    pos += chunkLength + padL(chunkLength);\n  }\n  return [sourcePort, destinationPort, verificationTag, chunks];\n}\n\nexport function serializePacket(\n  sourcePort: number,\n  destinationPort: number,\n  verificationTag: number,\n  chunk: Chunk\n) {\n  const header = Buffer.from(\n    jspack.Pack(\"!HHL\", [sourcePort, destinationPort, verificationTag])\n  );\n  const body = chunk.bytes;\n\n  const checksum: number = crc32c(\n    Buffer.concat([header, Buffer.from(\"\\x00\\x00\\x00\\x00\"), body])\n  );\n  const checkSumBuf = Buffer.alloc(4);\n  checkSumBuf.writeUInt32LE(checksum, 0);\n\n  const packet = Buffer.concat([header, checkSumBuf, body]);\n\n  return packet;\n}\n","export enum WEBRTC_PPID {\n  DCEP = 50,\n  STRING = 51,\n  BINARY = 53,\n  STRING_EMPTY = 56,\n  BINARY_EMPTY = 57,\n}\n\nexport enum SCTP_STATE {\n  CLOSED = 1,\n  COOKIE_WAIT = 2,\n  COOKIE_ECHOED = 3,\n  ESTABLISHED = 4,\n  SHUTDOWN_PENDING = 5,\n  SHUTDOWN_SENT = 6,\n  SHUTDOWN_RECEIVED = 7,\n  SHUTDOWN_ACK_SENT = 8,\n}\n","import Event from \"rx.mini\";\n\nexport function enumerate<T>(arr: T[]): [number, T][] {\n  return arr.map((v, i) => [i, v]);\n}\n\nexport type Unpacked<T> = T extends { [K in keyof T]: infer U } ? U : never;\n\nexport function createEventsFromList<T>(list: readonly T[]) {\n  return list.reduce((acc: any, cur: T) => {\n    acc[cur] = new Event();\n    return acc;\n  }, {});\n}\n","export { SCTP_STATE, WEBRTC_PPID } from \"./const\";\nexport { SCTP } from \"./sctp\";\nexport { Transport } from \"./transport\";\n","import { jspack } from \"jspack\";\nimport range from \"lodash/range\";\n\n// This parameter is used by the sender to request the reset of some or\n// all outgoing streams.\n//  0                   1                   2                   3\n//  0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n// +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n// |     Parameter Type = 13       | Parameter Length = 16 + 2 * N |\n// +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n// |           Re-configuration Request Sequence Number            |\n// +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n// |           Re-configuration Response Sequence Number           |\n// +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n// |                Sender's Last Assigned TSN                     |\n// +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n// |  Stream Number 1 (optional)   |    Stream Number 2 (optional) |\n// +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n// /                            ......                             /\n// +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n// |  Stream Number N-1 (optional) |    Stream Number N (optional) |\n// +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\nexport class OutgoingSSNResetRequestParam {\n  static type = 13; // Outgoing SSN Reset Request Parameter\n\n  constructor(\n    public requestSequence: number,\n    public responseSequence: number,\n    public lastTsn: number,\n    public streams: number[]\n  ) {}\n\n  get type() {\n    return OutgoingSSNResetRequestParam.type;\n  }\n\n  get bytes() {\n    const data = Buffer.from(\n      jspack.Pack(\"!LLL\", [\n        this.requestSequence,\n        this.responseSequence,\n        this.lastTsn,\n      ])\n    );\n\n    return Buffer.concat([\n      data,\n      ...this.streams.map((stream) => Buffer.from(jspack.Pack(\"!H\", [stream]))),\n    ]);\n  }\n\n  static parse(data: Buffer) {\n    const [requestSequence, responseSequence, lastTsn] = jspack.Unpack(\n      \"!LLL\",\n      data\n    );\n    const stream = range(12, data.length, 2).map(\n      (pos) => jspack.Unpack(\"!H\", data.slice(pos))[0]\n    );\n\n    return new OutgoingSSNResetRequestParam(\n      requestSequence,\n      responseSequence,\n      lastTsn,\n      stream\n    );\n  }\n}\n\nexport class StreamAddOutgoingParam {\n  static type = 17; // Add Outgoing Streams Request Parameter\n\n  constructor(public requestSequence: number, public newStreams: number) {}\n\n  get type() {\n    return StreamAddOutgoingParam.type;\n  }\n\n  get bytes() {\n    return Buffer.from(\n      jspack.Pack(\"!LHH\", [this.requestSequence, this.newStreams, 0])\n    );\n  }\n\n  static parse(data: Buffer) {\n    const [requestSequence, newStreams] = jspack.Unpack(\"!LHH\", data);\n    return new StreamAddOutgoingParam(requestSequence, newStreams);\n  }\n}\n\n// This parameter is used by the receiver of a Re-configuration Request\n// Parameter to respond to the request.\n//\n// 0                   1                   2                   3\n// 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1\n// +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n// |     Parameter Type = 16       |      Parameter Length         |\n// +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n// |         Re-configuration Response Sequence Number             |\n// +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n// |                            Result                             |\n// +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n// |                   Sender's Next TSN (optional)                |\n// +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n// |                  Receiver's Next TSN (optional)               |\n// +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\nexport const reconfigResult = {\n  ReconfigResultSuccessPerformed: 1,\n  BadSequenceNumber: 5,\n} as const;\ntype ReconfigResult = typeof reconfigResult[keyof typeof reconfigResult];\n\nexport class ReconfigResponseParam {\n  static type = 16; // Re-configuration Response Parameter\n  constructor(public responseSequence: number, public result: ReconfigResult) {}\n\n  get type() {\n    return ReconfigResponseParam.type;\n  }\n\n  get bytes() {\n    return Buffer.from(\n      jspack.Pack(\"!LL\", [this.responseSequence, this.result])\n    );\n  }\n\n  static parse(data: Buffer) {\n    const [requestSequence, result] = jspack.Unpack(\"!LL\", data);\n    return new ReconfigResponseParam(requestSequence, result as ReconfigResult);\n  }\n}\n\nexport type StreamParam =\n  | OutgoingSSNResetRequestParam\n  | StreamAddOutgoingParam\n  | ReconfigResponseParam;\n\nexport type StreamParamType =\n  | typeof OutgoingSSNResetRequestParam\n  | typeof StreamAddOutgoingParam\n  | typeof ReconfigResponseParam;\n\nexport const RECONFIG_PARAM_BY_TYPES: { [type: number]: StreamParamType } = {\n  13: OutgoingSSNResetRequestParam, // Outgoing SSN Reset Request Parameter\n  16: ReconfigResponseParam, // Re-configuration Response Parameter\n  17: StreamAddOutgoingParam, // Add Outgoing Streams Request Parameter\n};\n","import { createHmac, randomBytes } from \"crypto\";\nimport debug from \"debug\";\nimport { jspack } from \"jspack\";\nimport range from \"lodash/range\";\nimport { Event } from \"rx.mini\";\n\nimport {\n  random32,\n  uint16Add,\n  uint16Gt,\n  uint32Gt,\n  uint32Gte,\n} from \"../../common/src\";\nimport {\n  AbortChunk,\n  Chunk,\n  CookieAckChunk,\n  CookieEchoChunk,\n  DataChunk,\n  ErrorChunk,\n  ForwardTsnChunk,\n  HeartbeatAckChunk,\n  HeartbeatChunk,\n  InitAckChunk,\n  InitChunk,\n  parsePacket,\n  ReConfigChunk,\n  ReconfigChunk,\n  SackChunk,\n  serializePacket,\n  ShutdownAckChunk,\n  ShutdownChunk,\n  ShutdownCompleteChunk,\n} from \"./chunk\";\nimport { SCTP_STATE } from \"./const\";\nimport { createEventsFromList, enumerate, Unpacked } from \"./helper\";\nimport {\n  OutgoingSSNResetRequestParam,\n  RECONFIG_PARAM_BY_TYPES,\n  ReconfigResponseParam,\n  reconfigResult,\n  StreamAddOutgoingParam,\n  StreamParam,\n} from \"./param\";\nimport { Transport } from \"./transport\";\n\nconst log = debug(\"werift/sctp/sctp\");\n\n// SSN: Stream Sequence Number\n\n// # local constants\nconst COOKIE_LENGTH = 24;\nconst COOKIE_LIFETIME = 60;\nconst MAX_STREAMS = 65535;\nconst USERDATA_MAX_LENGTH = 1200;\n\n// # protocol constants\nconst SCTP_DATA_LAST_FRAG = 0x01;\nconst SCTP_DATA_FIRST_FRAG = 0x02;\nconst SCTP_DATA_UNORDERED = 0x04;\n\nconst SCTP_MAX_ASSOCIATION_RETRANS = 10;\nconst SCTP_MAX_INIT_RETRANS = 8;\nconst SCTP_RTO_ALPHA = 1 / 8;\nconst SCTP_RTO_BETA = 1 / 4;\nconst SCTP_RTO_INITIAL = 3;\nconst SCTP_RTO_MIN = 1;\nconst SCTP_RTO_MAX = 60;\nconst SCTP_TSN_MODULO = 2 ** 32;\n\nconst RECONFIG_MAX_STREAMS = 135;\n\n// # parameters\nconst SCTP_STATE_COOKIE = 0x0007;\nconst SCTP_SUPPORTED_CHUNK_EXT = 0x8008; //32778\nconst SCTP_PRSCTP_SUPPORTED = 0xc000; //49152\n\nconst SCTPConnectionStates = [\n  \"new\",\n  \"closed\",\n  \"connected\",\n  \"connecting\",\n] as const;\ntype SCTPConnectionState = Unpacked<typeof SCTPConnectionStates>;\n\nexport class SCTP {\n  readonly stateChanged: {\n    [key in SCTPConnectionState]: Event<[]>;\n  } = createEventsFromList(SCTPConnectionStates);\n  readonly onReconfigStreams = new Event<[number[]]>();\n  /**streamId: number, ppId: number, data: Buffer */\n  readonly onReceive = new Event<[number, number, Buffer]>();\n  onSackReceived: () => Promise<void> = async () => {};\n\n  associationState = SCTP_STATE.CLOSED;\n  started = false;\n  state: SCTPConnectionState = \"new\";\n  isServer = true;\n\n  private hmacKey = randomBytes(16);\n  private localPartialReliability = true;\n  private localPort: number;\n  private localVerificationTag = random32();\n\n  remoteExtensions: number[] = [];\n  remotePartialReliability = true;\n  private remotePort?: number;\n  private remoteVerificationTag = 0;\n\n  // inbound\n  private advertisedRwnd = 1024 * 1024; // Receiver Window\n  private inboundStreams: { [key: number]: InboundStream } = {};\n  _inboundStreamsCount = 0;\n  _inboundStreamsMax = MAX_STREAMS;\n  private lastReceivedTsn?: number; // Transmission Sequence Number\n  private sackDuplicates: number[] = [];\n  private sackMisOrdered = new Set<number>();\n  private sackNeeded = false;\n\n  // # outbound\n  private cwnd = 3 * USERDATA_MAX_LENGTH; // Congestion Window\n  private fastRecoveryExit?: number;\n  private fastRecoveryTransmit = false;\n  private forwardTsnChunk?: ForwardTsnChunk;\n  private flightSize = 0;\n  outboundQueue: DataChunk[] = [];\n  private outboundStreamSeq: { [streamId: number]: number } = {};\n  _outboundStreamsCount = MAX_STREAMS;\n  /**local transmission sequence number */\n  private localTsn = Number(random32());\n  private lastSackedTsn = tsnMinusOne(this.localTsn);\n  private advancedPeerAckTsn = tsnMinusOne(this.localTsn); // acknowledgement\n  private partialBytesAcked = 0;\n  private sentQueue: DataChunk[] = [];\n\n  // # reconfiguration\n\n  /**初期TSNと同じ値に初期化される単調に増加する数です. これは、新しいre-configuration requestパラメーターを送信するたびに1ずつ増加します */\n  reconfigRequestSeq = this.localTsn;\n  /**このフィールドは、incoming要求のre-configuration requestシーケンス番号を保持します. 他の場合では、次に予想されるre-configuration requestシーケンス番号から1を引いた値が保持されます */\n  reconfigResponseSeq = 0;\n  reconfigRequest?: OutgoingSSNResetRequestParam;\n  reconfigQueue: number[] = [];\n\n  // rtt calculation\n  private srtt?: number;\n  private rttvar?: number;\n\n  // timers\n  private rto = SCTP_RTO_INITIAL;\n  /**t1 is wait for initAck or cookieAck */\n  private timer1Handle?: any;\n  private timer1Chunk?: Chunk;\n  private timer1Failures = 0;\n  /**t2 is wait for shutdown */\n  private timer2Handle?: any;\n  private timer2Chunk?: Chunk;\n  private timer2Failures = 0;\n  /**t3 is wait for data sack */\n  private timer3Handle?: any;\n  /**Re-configuration Timer */\n  private timerReconfigHandle?: any;\n  private timerReconfigFailures = 0;\n\n  // etc\n  private ssthresh?: number; // slow start threshold\n\n  constructor(public transport: Transport, public port = 5000) {\n    this.localPort = this.port;\n    this.transport.onData = (buf) => {\n      this.handleData(buf);\n    };\n  }\n\n  get maxChannels() {\n    if (this._inboundStreamsCount > 0)\n      return Math.min(this._inboundStreamsCount, this._outboundStreamsCount);\n  }\n\n  static client(transport: Transport, port = 5000) {\n    const sctp = new SCTP(transport, port);\n    sctp.isServer = false;\n    return sctp;\n  }\n\n  static server(transport: Transport, port = 5000) {\n    const sctp = new SCTP(transport, port);\n    sctp.isServer = true;\n    return sctp;\n  }\n\n  // call from dtls transport\n  private async handleData(data: Buffer) {\n    let expectedTag: number;\n\n    const [, , verificationTag, chunks] = parsePacket(data);\n    const initChunk = chunks.filter((v) => v.type === InitChunk.type).length;\n    if (initChunk > 0) {\n      if (chunks.length != 1) {\n        throw new Error();\n      }\n      expectedTag = 0;\n    } else {\n      expectedTag = this.localVerificationTag;\n    }\n\n    if (verificationTag !== expectedTag) {\n      return;\n    }\n\n    for (const chunk of chunks) {\n      await this.receiveChunk(chunk);\n    }\n\n    if (this.sackNeeded) {\n      await this.sendSack();\n    }\n  }\n\n  private async sendSack() {\n    const gaps: [number, number][] = [];\n    let gapNext: number;\n    [...this.sackMisOrdered].sort().forEach((tsn) => {\n      const pos = (tsn - this.lastReceivedTsn!) % SCTP_TSN_MODULO;\n      if (tsn === gapNext) {\n        gaps[gaps.length - 1][1] = pos;\n      } else {\n        gaps.push([pos, pos]);\n      }\n      gapNext = tsnPlusOne(tsn);\n    });\n    const sack = new SackChunk(0, undefined);\n    sack.cumulativeTsn = this.lastReceivedTsn!;\n    sack.advertisedRwnd = Math.max(0, this.advertisedRwnd);\n    sack.duplicates = [...this.sackDuplicates];\n    sack.gaps = gaps;\n\n    await this.sendChunk(sack).catch((err: Error) => {\n      log(\"send sack failed\", err.message);\n    });\n\n    this.sackDuplicates = [];\n    this.sackNeeded = false;\n  }\n\n  private async receiveChunk(chunk: Chunk) {\n    switch (chunk.type) {\n      case DataChunk.type:\n        {\n          this.receiveDataChunk(chunk as DataChunk);\n        }\n        break;\n      case InitChunk.type:\n        {\n          if (!this.isServer) return;\n          const init = chunk as InitChunk;\n\n          log(\"receive init\", init);\n          this.lastReceivedTsn = tsnMinusOne(init.initialTsn);\n          this.reconfigResponseSeq = tsnMinusOne(init.initialTsn);\n          this.remoteVerificationTag = init.initiateTag;\n          this.ssthresh = init.advertisedRwnd;\n          this.getExtensions(init.params);\n\n          this._inboundStreamsCount = Math.min(\n            init.outboundStreams,\n            this._inboundStreamsMax\n          );\n          this._outboundStreamsCount = Math.min(\n            this._outboundStreamsCount,\n            init.inboundStreams\n          );\n\n          const ack = new InitAckChunk();\n          ack.initiateTag = this.localVerificationTag;\n          ack.advertisedRwnd = this.advertisedRwnd;\n          ack.outboundStreams = this._outboundStreamsCount;\n          ack.inboundStreams = this._inboundStreamsCount;\n          ack.initialTsn = this.localTsn;\n          this.setExtensions(ack.params);\n\n          const time = Date.now() / 1000;\n          let cookie = Buffer.from(jspack.Pack(\"!L\", [time]));\n          cookie = Buffer.concat([\n            cookie,\n            createHmac(\"sha1\", this.hmacKey).update(cookie).digest(),\n          ]);\n          ack.params.push([SCTP_STATE_COOKIE, cookie]);\n          log(\"send initAck\", ack);\n          await this.sendChunk(ack).catch((err: Error) => {\n            log(\"send initAck failed\", err.message);\n          });\n        }\n        break;\n      case InitAckChunk.type:\n        {\n          if (this.associationState != SCTP_STATE.COOKIE_WAIT) return;\n\n          const initAck = chunk as InitAckChunk;\n          this.timer1Cancel();\n          this.lastReceivedTsn = tsnMinusOne(initAck.initialTsn);\n          this.reconfigResponseSeq = tsnMinusOne(initAck.initialTsn);\n          this.remoteVerificationTag = initAck.initiateTag;\n          this.ssthresh = initAck.advertisedRwnd;\n          this.getExtensions(initAck.params);\n\n          this._inboundStreamsCount = Math.min(\n            initAck.outboundStreams,\n            this._inboundStreamsMax\n          );\n          this._outboundStreamsCount = Math.min(\n            this._outboundStreamsCount,\n            initAck.inboundStreams\n          );\n\n          const echo = new CookieEchoChunk();\n          for (const [k, v] of initAck.params) {\n            if (k === SCTP_STATE_COOKIE) {\n              echo.body = v;\n              break;\n            }\n          }\n          await this.sendChunk(echo).catch((err: Error) => {\n            log(\"send echo failed\", err.message);\n          });\n\n          this.timer1Start(echo);\n          this.setState(SCTP_STATE.COOKIE_ECHOED);\n        }\n        break;\n      case SackChunk.type:\n        {\n          await this.receiveSackChunk(chunk as SackChunk);\n        }\n        break;\n      case HeartbeatChunk.type:\n        {\n          const ack = new HeartbeatAckChunk();\n          ack.params = (chunk as HeartbeatChunk).params;\n          await this.sendChunk(ack).catch((err: Error) => {\n            log(\"send heartbeat ack failed\", err.message);\n          });\n        }\n        break;\n      case AbortChunk.type:\n        {\n          this.setState(SCTP_STATE.CLOSED);\n        }\n        break;\n      case ShutdownChunk.type:\n        {\n          this.timer2Cancel();\n          this.setState(SCTP_STATE.SHUTDOWN_RECEIVED);\n          const ack = new ShutdownAckChunk();\n          await this.sendChunk(ack).catch((err: Error) => {\n            log(\"send shutdown ack failed\", err.message);\n          });\n          this.t2Start(ack);\n          this.setState(SCTP_STATE.SHUTDOWN_SENT);\n        }\n        break;\n      case ErrorChunk.type:\n        {\n          // 3.3.10.  Operation Error (ERROR) (9)\n          // An Operation Error is not considered fatal in and of itself, but may be\n          // used with an ABORT chunk to report a fatal condition.  It has the\n          // following parameters:\n          log(\"ErrorChunk\", (chunk as ErrorChunk).descriptions);\n        }\n        break;\n      case CookieEchoChunk.type:\n        {\n          if (!this.isServer) return;\n          const data = chunk as CookieEchoChunk;\n          const cookie = data.body!;\n          const digest = createHmac(\"sha1\", this.hmacKey)\n            .update(cookie.slice(0, 4))\n            .digest();\n          if (\n            cookie?.length != COOKIE_LENGTH ||\n            !cookie.slice(4).equals(digest)\n          ) {\n            log(\"x State cookie is invalid\");\n            return;\n          }\n          const now = Date.now() / 1000;\n          const stamp = jspack.Unpack(\"!L\", cookie)[0];\n          if (stamp < now - COOKIE_LIFETIME || stamp > now) {\n            const error = new ErrorChunk(0, undefined);\n            error.params.push([\n              ErrorChunk.CODE.StaleCookieError,\n              Buffer.concat([...Array(8)].map(() => Buffer.from(\"\\x00\"))),\n            ]);\n            await this.sendChunk(error).catch((err: Error) => {\n              log(\"send errorChunk failed\", err.message);\n            });\n            return;\n          }\n          const ack = new CookieAckChunk();\n          await this.sendChunk(ack).catch((err: Error) => {\n            log(\"send cookieAck failed\", err.message);\n          });\n          this.setState(SCTP_STATE.ESTABLISHED);\n        }\n        break;\n      case CookieAckChunk.type:\n        {\n          if (this.associationState != SCTP_STATE.COOKIE_ECHOED) return;\n          this.timer1Cancel();\n          this.setState(SCTP_STATE.ESTABLISHED);\n        }\n        break;\n      case ShutdownCompleteChunk.type:\n        {\n          if (this.associationState != SCTP_STATE.SHUTDOWN_ACK_SENT) return;\n          this.timer2Cancel();\n          this.setState(SCTP_STATE.CLOSED);\n        }\n        break;\n      // extensions\n      case ReconfigChunk.type:\n        {\n          if (this.associationState != SCTP_STATE.ESTABLISHED) return;\n          const reconfig = chunk as ReConfigChunk;\n          for (const [type, body] of reconfig.params) {\n            const target = RECONFIG_PARAM_BY_TYPES[type];\n            if (target) {\n              await this.receiveReconfigParam(target.parse(body));\n            }\n          }\n        }\n        break;\n      case ForwardTsnChunk.type:\n        {\n          this.receiveForwardTsnChunk(chunk as ForwardTsnChunk);\n        }\n        break;\n    }\n  }\n\n  private getExtensions(params: [number, Buffer][]) {\n    for (const [k, v] of params) {\n      if (k === SCTP_PRSCTP_SUPPORTED) {\n        this.remotePartialReliability = true;\n      } else if (k === SCTP_SUPPORTED_CHUNK_EXT) {\n        this.remoteExtensions = [...v];\n      }\n    }\n  }\n\n  private async receiveReconfigParam(param: StreamParam) {\n    log(\"receiveReconfigParam\", RECONFIG_PARAM_BY_TYPES[param.type]);\n    switch (param.type) {\n      case OutgoingSSNResetRequestParam.type:\n        {\n          const p = param as OutgoingSSNResetRequestParam;\n\n          // # send response\n          const response = new ReconfigResponseParam(\n            p.requestSequence,\n            reconfigResult.ReconfigResultSuccessPerformed\n          );\n          this.reconfigResponseSeq = p.requestSequence;\n          await this.sendReconfigParam(response);\n\n          // # mark closed inbound streams\n          await Promise.all(\n            p.streams.map(async (streamId) => {\n              delete this.inboundStreams[streamId];\n              if (this.outboundStreamSeq[streamId]) {\n                this.reconfigQueue.push(streamId);\n                // await this.sendResetRequest(streamId);\n              }\n            })\n          );\n          await this.transmitReconfigRequest();\n          // # close data channel\n          this.onReconfigStreams.execute(p.streams);\n        }\n        break;\n      case ReconfigResponseParam.type:\n        {\n          const reset = param as ReconfigResponseParam;\n          if (reset.result !== reconfigResult.ReconfigResultSuccessPerformed) {\n            log(\n              \"OutgoingSSNResetRequestParam failed\",\n              Object.keys(reconfigResult).find(\n                (key) => reconfigResult[key as never] === reset.result\n              )\n            );\n          } else if (\n            reset.responseSequence === this.reconfigRequest?.requestSequence\n          ) {\n            const streamIds = this.reconfigRequest.streams.map((streamId) => {\n              delete this.outboundStreamSeq[streamId];\n              return streamId;\n            });\n\n            this.onReconfigStreams.execute(streamIds);\n\n            this.reconfigRequest = undefined;\n            this.timerReconfigCancel();\n            if (this.reconfigQueue.length > 0) {\n              await this.transmitReconfigRequest();\n            }\n          }\n        }\n        break;\n      case StreamAddOutgoingParam.type:\n        {\n          const add = param as StreamAddOutgoingParam;\n          this._inboundStreamsCount += add.newStreams;\n          const res = new ReconfigResponseParam(add.requestSequence, 1);\n          this.reconfigResponseSeq = add.requestSequence;\n          await this.sendReconfigParam(res);\n        }\n        break;\n    }\n  }\n\n  private receiveDataChunk(chunk: DataChunk) {\n    this.sackNeeded = true;\n\n    if (this.markReceived(chunk.tsn)) return;\n\n    const inboundStream = this.getInboundStream(chunk.streamId);\n\n    inboundStream.addChunk(chunk);\n    this.advertisedRwnd -= chunk.userData.length;\n    for (const message of inboundStream.popMessages()) {\n      this.advertisedRwnd += message[2].length;\n      this.receive(...message);\n    }\n  }\n\n  private async receiveSackChunk(chunk: SackChunk) {\n    // \"\"\"\n    // Handle a SACK chunk.\n    // \"\"\"\n\n    if (uint32Gt(this.lastSackedTsn, chunk.cumulativeTsn)) return;\n\n    const receivedTime = Date.now() / 1000;\n    this.lastSackedTsn = chunk.cumulativeTsn;\n    const cwndFullyUtilized = this.flightSize >= this.cwnd;\n    let done = 0,\n      doneBytes = 0;\n\n    // # handle acknowledged data\n    while (\n      this.sentQueue.length > 0 &&\n      uint32Gte(this.lastSackedTsn, this.sentQueue[0].tsn)\n    ) {\n      const sChunk = this.sentQueue.shift()!;\n      done++;\n      if (!sChunk?.acked) {\n        doneBytes += sChunk.bookSize;\n        this.flightSizeDecrease(sChunk);\n      }\n\n      if (done === 1 && sChunk.sentCount === 1) {\n        this.updateRto(receivedTime - sChunk.sentTime!);\n      }\n    }\n\n    // # handle gap blocks\n    let loss = false;\n    if (chunk.gaps.length > 0) {\n      const seen = new Set();\n      let highestSeenTsn: number;\n      chunk.gaps.forEach((gap) =>\n        range(gap[0], gap[1] + 1).forEach((pos) => {\n          highestSeenTsn = (chunk.cumulativeTsn + pos) % SCTP_TSN_MODULO;\n          seen.add(highestSeenTsn);\n        })\n      );\n\n      let highestNewlyAcked = chunk.cumulativeTsn;\n      for (const sChunk of this.sentQueue) {\n        if (uint32Gt(sChunk.tsn, highestSeenTsn!)) {\n          break;\n        }\n        if (seen.has(sChunk.tsn) && !sChunk.acked) {\n          doneBytes += sChunk.bookSize;\n          sChunk.acked = true;\n          this.flightSizeDecrease(sChunk);\n          highestNewlyAcked = sChunk.tsn;\n        }\n      }\n\n      // # strike missing chunks prior to HTNA\n      for (const sChunk of this.sentQueue) {\n        if (uint32Gt(sChunk.tsn, highestNewlyAcked)) {\n          break;\n        }\n        if (!seen.has(sChunk.tsn)) {\n          sChunk.misses++;\n          if (sChunk.misses === 3) {\n            sChunk.misses = 0;\n            if (!this.maybeAbandon(sChunk)) {\n              sChunk.retransmit = true;\n            }\n            sChunk.acked = false;\n            this.flightSizeDecrease(sChunk);\n            loss = true;\n          }\n        }\n      }\n    }\n\n    // # adjust congestion window\n    if (this.fastRecoveryExit === undefined) {\n      if (done && cwndFullyUtilized) {\n        if (this.cwnd <= this.ssthresh!) {\n          this.cwnd += Math.min(doneBytes, USERDATA_MAX_LENGTH);\n        } else {\n          this.partialBytesAcked += doneBytes;\n          if (this.partialBytesAcked >= this.cwnd) {\n            this.partialBytesAcked -= this.cwnd;\n            this.cwnd += USERDATA_MAX_LENGTH;\n          }\n        }\n      }\n      if (loss) {\n        this.ssthresh = Math.max(\n          Math.floor(this.cwnd / 2),\n          4 * USERDATA_MAX_LENGTH\n        );\n        this.cwnd = this.ssthresh;\n        this.partialBytesAcked = 0;\n        this.fastRecoveryExit = this.sentQueue[this.sentQueue.length - 1].tsn;\n        this.fastRecoveryTransmit = true;\n      }\n    } else if (uint32Gte(chunk.cumulativeTsn, this.fastRecoveryExit)) {\n      this.fastRecoveryExit = undefined;\n    }\n\n    if (this.sentQueue.length === 0) {\n      this.timer3Cancel();\n    } else if (done > 0) {\n      this.timer3Restart();\n    }\n\n    this.updateAdvancedPeerAckPoint();\n    await this.onSackReceived();\n    await this.transmit();\n  }\n\n  receiveForwardTsnChunk(chunk: ForwardTsnChunk) {\n    this.sackNeeded = true;\n\n    if (uint32Gte(this.lastReceivedTsn!, chunk.cumulativeTsn)) {\n      return;\n    }\n\n    const isObsolete = (x: number) => uint32Gt(x, this.lastReceivedTsn!);\n\n    // # advance cumulative TSN\n    this.lastReceivedTsn = chunk.cumulativeTsn;\n    this.sackMisOrdered = new Set([...this.sackMisOrdered].filter(isObsolete));\n    for (const tsn of [...this.sackMisOrdered].sort()) {\n      if (tsn === tsnPlusOne(this.lastReceivedTsn)) {\n        this.lastReceivedTsn = tsn;\n      } else {\n        break;\n      }\n    }\n\n    // # filter out obsolete entries\n    this.sackDuplicates = this.sackDuplicates.filter(isObsolete);\n    this.sackMisOrdered = new Set([...this.sackMisOrdered].filter(isObsolete));\n\n    // # update reassembly\n    for (const [streamId, streamSeqNum] of chunk.streams) {\n      const inboundStream = this.getInboundStream(streamId);\n\n      // # advance sequence number and perform delivery\n      inboundStream.streamSequenceNumber = uint16Add(streamSeqNum, 1);\n      for (const message of inboundStream.popMessages()) {\n        this.advertisedRwnd += message[2].length;\n        this.receive(...message);\n      }\n    }\n\n    // # prune obsolete chunks\n    Object.values(this.inboundStreams).forEach((inboundStream) => {\n      this.advertisedRwnd += inboundStream.pruneChunks(this.lastReceivedTsn!);\n    });\n  }\n\n  private updateRto(R: number) {\n    if (!this.srtt) {\n      this.rttvar = R / 2;\n      this.srtt = R;\n    } else {\n      this.rttvar =\n        (1 - SCTP_RTO_BETA) * this.rttvar! +\n        SCTP_RTO_BETA * Math.abs(this.srtt - R);\n      this.srtt = (1 - SCTP_RTO_ALPHA) * this.srtt + SCTP_RTO_ALPHA * R;\n    }\n    this.rto = Math.max(\n      SCTP_RTO_MIN,\n      Math.min(this.srtt + 4 * this.rttvar, SCTP_RTO_MAX)\n    );\n  }\n\n  private receive(streamId: number, ppId: number, data: Buffer) {\n    this.onReceive.execute(streamId, ppId, data);\n  }\n\n  private getInboundStream(streamId: number) {\n    if (!this.inboundStreams[streamId]) {\n      this.inboundStreams[streamId] = new InboundStream();\n    }\n    return this.inboundStreams[streamId];\n  }\n\n  private markReceived(tsn: number) {\n    if (uint32Gte(this.lastReceivedTsn!, tsn) || this.sackMisOrdered.has(tsn)) {\n      this.sackDuplicates.push(tsn);\n      return true;\n    }\n\n    this.sackMisOrdered.add(tsn);\n    for (const tsn of [...this.sackMisOrdered].sort()) {\n      if (tsn === tsnPlusOne(this.lastReceivedTsn!)) {\n        this.lastReceivedTsn = tsn;\n      } else {\n        break;\n      }\n    }\n\n    const isObsolete = (x: number) => uint32Gt(x, this.lastReceivedTsn!);\n\n    this.sackDuplicates = this.sackDuplicates.filter(isObsolete);\n    this.sackMisOrdered = new Set([...this.sackMisOrdered].filter(isObsolete));\n\n    return false;\n  }\n\n  send = async (\n    streamId: number,\n    ppId: number,\n    userData: Buffer,\n    {\n      expiry,\n      maxRetransmits,\n      ordered,\n    }: {\n      expiry?: number | undefined;\n      maxRetransmits?: number | undefined;\n      ordered?: boolean;\n    } = { expiry: undefined, maxRetransmits: undefined, ordered: true }\n  ) => {\n    const streamSeqNum = ordered ? this.outboundStreamSeq[streamId] || 0 : 0;\n\n    const fragments = Math.ceil(userData.length / USERDATA_MAX_LENGTH);\n    let pos = 0;\n    const chunks: DataChunk[] = [];\n    for (const fragment of range(0, fragments)) {\n      const chunk = new DataChunk(0, undefined);\n      chunk.flags = 0;\n      if (!ordered) {\n        chunk.flags = SCTP_DATA_UNORDERED;\n      }\n      if (fragment === 0) {\n        chunk.flags |= SCTP_DATA_FIRST_FRAG;\n      }\n      if (fragment === fragments - 1) {\n        chunk.flags |= SCTP_DATA_LAST_FRAG;\n      }\n      chunk.tsn = this.localTsn;\n      chunk.streamId = streamId;\n      chunk.streamSeqNum = streamSeqNum;\n      chunk.protocol = ppId;\n      chunk.userData = userData.slice(pos, pos + USERDATA_MAX_LENGTH);\n      chunk.bookSize = chunk.userData.length;\n      chunk.expiry = expiry;\n      chunk.maxRetransmits = maxRetransmits;\n\n      pos += USERDATA_MAX_LENGTH;\n      this.localTsn = tsnPlusOne(this.localTsn);\n      chunks.push(chunk);\n    }\n\n    chunks.forEach((chunk) => {\n      this.outboundQueue.push(chunk);\n    });\n\n    if (ordered) {\n      this.outboundStreamSeq[streamId] = uint16Add(streamSeqNum, 1);\n    }\n\n    if (!this.timer3Handle) {\n      await this.transmit();\n    } else {\n      await new Promise((r) => setImmediate(r));\n    }\n  };\n\n  private async transmit() {\n    // \"\"\"\n    // Transmit outbound data.\n    // \"\"\"\n\n    // # send FORWARD TSN\n    if (this.forwardTsnChunk) {\n      await this.sendChunk(this.forwardTsnChunk).catch((err: Error) => {\n        log(\"send forwardTsn failed\", err.message);\n      });\n      this.forwardTsnChunk = undefined;\n\n      if (!this.timer3Handle) {\n        this.timer3Start();\n      }\n    }\n\n    const burstSize =\n      this.fastRecoveryExit != undefined\n        ? 2 * USERDATA_MAX_LENGTH\n        : 4 * USERDATA_MAX_LENGTH;\n\n    const cwnd = Math.min(this.flightSize + burstSize, this.cwnd);\n\n    let retransmitEarliest = true;\n    for (const dataChunk of this.sentQueue) {\n      if (dataChunk.retransmit) {\n        if (this.fastRecoveryTransmit) {\n          this.fastRecoveryTransmit = false;\n        } else if (this.flightSize >= cwnd) {\n          return;\n        }\n        this.flightSizeIncrease(dataChunk);\n\n        dataChunk.misses = 0;\n        dataChunk.retransmit = false;\n        dataChunk.sentCount++;\n        await this.sendChunk(dataChunk).catch((err: Error) => {\n          log(\"send data failed\", err.message);\n        });\n\n        if (retransmitEarliest) {\n          this.timer3Restart();\n        }\n      }\n      retransmitEarliest = false;\n    }\n\n    // for performance todo fix\n    while (this.outboundQueue.length > 0) {\n      const chunk = this.outboundQueue.shift();\n      if (!chunk) return;\n\n      this.sentQueue.push(chunk);\n      this.flightSizeIncrease(chunk);\n\n      // # update counters\n      chunk.sentCount++;\n      chunk.sentTime = Date.now() / 1000;\n\n      await this.sendChunk(chunk).catch((err: Error) => {\n        log(\"send data outboundQueue failed\", err.message);\n      });\n      if (!this.timer3Handle) {\n        this.timer3Start();\n      }\n    }\n  }\n\n  async transmitReconfigRequest() {\n    if (\n      this.reconfigQueue.length > 0 &&\n      this.associationState === SCTP_STATE.ESTABLISHED &&\n      !this.reconfigRequest\n    ) {\n      const streams = this.reconfigQueue.slice(0, RECONFIG_MAX_STREAMS);\n\n      this.reconfigQueue = this.reconfigQueue.slice(RECONFIG_MAX_STREAMS);\n      const param = new OutgoingSSNResetRequestParam(\n        this.reconfigRequestSeq,\n        this.reconfigResponseSeq,\n        tsnMinusOne(this.localTsn),\n        streams\n      );\n      this.reconfigRequestSeq = tsnPlusOne(this.reconfigRequestSeq);\n\n      this.reconfigRequest = param;\n      await this.sendReconfigParam(param);\n      this.timerReconfigHandleStart();\n    }\n  }\n\n  async sendReconfigParam(param: StreamParam) {\n    log(\"sendReconfigParam\", param);\n    const chunk = new ReconfigChunk();\n    chunk.params.push([param.type, param.bytes]);\n    await this.sendChunk(chunk).catch((err: Error) => {\n      log(\"send reconfig failed\", err.message);\n    });\n  }\n\n  // https://github.com/pion/sctp/pull/44/files\n  private async sendResetRequest(streamId: number) {\n    log(\"sendResetRequest\", streamId);\n    const chunk = new DataChunk(0, undefined);\n    chunk.streamId = streamId;\n    this.outboundQueue.push(chunk);\n    if (!this.timer3Handle) {\n      await this.transmit();\n    }\n  }\n\n  private flightSizeIncrease(chunk: DataChunk) {\n    this.flightSize += chunk.bookSize;\n  }\n\n  private flightSizeDecrease(chunk: DataChunk) {\n    this.flightSize = Math.max(0, this.flightSize - chunk.bookSize);\n  }\n\n  // # timers\n\n  /**t1 is wait for initAck or cookieAck */\n  private timer1Start(chunk: Chunk) {\n    if (this.timer1Handle) throw new Error();\n    this.timer1Chunk = chunk;\n    this.timer1Failures = 0;\n    this.timer1Handle = setTimeout(this.timer1Expired, this.rto * 1000);\n  }\n\n  private timer1Expired = () => {\n    this.timer1Failures++;\n    this.timer1Handle = undefined;\n    if (this.timer1Failures > SCTP_MAX_INIT_RETRANS) {\n      this.setState(SCTP_STATE.CLOSED);\n    } else {\n      setImmediate(() => {\n        this.sendChunk(this.timer1Chunk!).catch((err: Error) => {\n          log(\"send timer1 chunk failed\", err.message);\n        });\n      });\n      this.timer1Handle = setTimeout(this.timer1Expired, this.rto * 1000);\n    }\n  };\n\n  private timer1Cancel() {\n    if (this.timer1Handle) {\n      clearTimeout(this.timer1Handle);\n      this.timer1Handle = undefined;\n      this.timer1Chunk = undefined;\n    }\n  }\n\n  /**t2 is wait for shutdown */\n  private t2Start(chunk: Chunk) {\n    if (this.timer2Handle) throw new Error();\n    this.timer2Chunk = chunk;\n    this.timer2Failures = 0;\n    this.timer2Handle = setTimeout(this.timer2Expired, this.rto * 1000);\n  }\n\n  private timer2Expired = () => {\n    this.timer2Failures++;\n    this.timer2Handle = undefined;\n    if (this.timer2Failures > SCTP_MAX_ASSOCIATION_RETRANS) {\n      this.setState(SCTP_STATE.CLOSED);\n    } else {\n      setImmediate(() => {\n        this.sendChunk(this.timer2Chunk!).catch((err: Error) => {\n          log(\"send timer2Chunk failed\", err.message);\n        });\n      });\n      this.timer2Handle = setTimeout(this.timer2Expired, this.rto * 1000);\n    }\n  };\n\n  private timer2Cancel() {\n    if (this.timer2Handle) {\n      clearTimeout(this.timer2Handle);\n      this.timer2Handle = undefined;\n      this.timer2Chunk = undefined;\n    }\n  }\n\n  /**t3 is wait for data sack */\n  private timer3Start() {\n    if (this.timer3Handle) throw new Error();\n    this.timer3Handle = setTimeout(this.timer3Expired, this.rto * 1000);\n  }\n\n  private timer3Restart() {\n    this.timer3Cancel();\n    // for performance\n    this.timer3Handle = setTimeout(this.timer3Expired, this.rto);\n  }\n\n  private timer3Expired = () => {\n    this.timer3Handle = undefined;\n\n    // # mark retransmit or abandoned chunks\n    this.sentQueue.forEach((chunk) => {\n      if (!this.maybeAbandon(chunk)) {\n        chunk.retransmit = true;\n      }\n    });\n    this.updateAdvancedPeerAckPoint();\n\n    // # adjust congestion window\n    this.fastRecoveryExit = undefined;\n    this.flightSize = 0;\n    this.partialBytesAcked = 0;\n\n    this.ssthresh = Math.max(\n      Math.floor(this.cwnd / 2),\n      4 * USERDATA_MAX_LENGTH\n    );\n    this.cwnd = USERDATA_MAX_LENGTH;\n\n    this.transmit();\n  };\n\n  private timer3Cancel() {\n    if (this.timer3Handle) {\n      clearTimeout(this.timer3Handle);\n      this.timer3Handle = undefined;\n    }\n  }\n\n  /**Re-configuration Timer */\n  private timerReconfigHandleStart() {\n    if (this.timerReconfigHandle) return;\n    log(\"timerReconfigHandleStart\", { rto: this.rto });\n    this.timerReconfigFailures = 0;\n    this.timerReconfigHandle = setTimeout(\n      this.timerReconfigHandleExpired,\n      this.rto * 1000\n    );\n  }\n\n  private timerReconfigHandleExpired = async () => {\n    this.timerReconfigFailures++;\n    // back off\n    this.rto = Math.ceil(this.rto * 1.5);\n\n    if (this.timerReconfigFailures > SCTP_MAX_ASSOCIATION_RETRANS) {\n      log(\"timerReconfigFailures\", this.timerReconfigFailures);\n      this.setState(SCTP_STATE.CLOSED);\n\n      this.timerReconfigHandle = undefined;\n    } else if (this.reconfigRequest) {\n      log(\"timerReconfigHandleExpired\", this.timerReconfigFailures, this.rto);\n      await this.sendReconfigParam(this.reconfigRequest);\n\n      this.timerReconfigHandle = setTimeout(\n        this.timerReconfigHandleExpired,\n        this.rto * 1000\n      );\n    }\n  };\n\n  private timerReconfigCancel() {\n    if (this.timerReconfigHandle) {\n      log(\"timerReconfigCancel\");\n      clearTimeout(this.timerReconfigHandle);\n      this.timerReconfigHandle = undefined;\n    }\n  }\n\n  private updateAdvancedPeerAckPoint() {\n    if (uint32Gt(this.lastSackedTsn, this.advancedPeerAckTsn)) {\n      this.advancedPeerAckTsn = this.lastSackedTsn;\n    }\n\n    let done = 0;\n    const streams: { [key: number]: number } = {};\n    while (this.sentQueue.length > 0 && this.sentQueue[0].abandoned) {\n      const chunk = this.sentQueue.shift()!;\n      this.advancedPeerAckTsn = chunk.tsn;\n      done++;\n      if (!(chunk.flags & SCTP_DATA_UNORDERED)) {\n        streams[chunk.streamId] = chunk.streamSeqNum;\n      }\n    }\n\n    if (done) {\n      this.forwardTsnChunk = new ForwardTsnChunk(0, undefined);\n      this.forwardTsnChunk.cumulativeTsn = this.advancedPeerAckTsn;\n      this.forwardTsnChunk.streams = Object.entries(streams).map(([k, v]) => [\n        Number(k),\n        v,\n      ]);\n    }\n  }\n\n  private maybeAbandon(chunk: DataChunk): boolean {\n    if (chunk.abandoned) return true;\n    const abandon =\n      (!!chunk.maxRetransmits && chunk.maxRetransmits < chunk.sentCount!) ||\n      (!!chunk.expiry && chunk.expiry < Date.now() / 1000);\n    if (!abandon) return false;\n\n    const chunkPos = this.sentQueue.findIndex((v) => v.type === chunk.type);\n    for (const pos of range(chunkPos, -1, -1)) {\n      const oChunk = this.sentQueue[pos];\n      oChunk.abandoned = true;\n      oChunk.retransmit = false;\n      if (oChunk.flags & SCTP_DATA_LAST_FRAG) {\n        break;\n      }\n    }\n\n    for (const pos of range(chunkPos, this.sentQueue.length)) {\n      const oChunk = this.sentQueue[pos];\n      oChunk.abandoned = true;\n      oChunk.retransmit = false;\n      if (oChunk.flags & SCTP_DATA_LAST_FRAG) {\n        break;\n      }\n    }\n\n    return true;\n  }\n\n  static getCapabilities() {\n    return new RTCSctpCapabilities(65536);\n  }\n\n  setRemotePort(port: number) {\n    this.remotePort = port;\n  }\n\n  async start(remotePort?: number) {\n    if (!this.started) {\n      this.started = true;\n      this.setConnectionState(\"connecting\");\n\n      if (remotePort) {\n        this.setRemotePort(remotePort);\n      }\n\n      if (!this.isServer) {\n        await this.init();\n      }\n    }\n  }\n\n  private async init() {\n    const init = new InitChunk();\n    init.initiateTag = this.localVerificationTag;\n    init.advertisedRwnd = this.advertisedRwnd;\n    init.outboundStreams = this._outboundStreamsCount;\n    init.inboundStreams = this._inboundStreamsMax;\n    init.initialTsn = this.localTsn;\n    this.setExtensions(init.params);\n    log(\"send init\", init);\n\n    try {\n      await this.sendChunk(init);\n\n      // # start T1 timer and enter COOKIE-WAIT state\n      this.timer1Start(init);\n      this.setState(SCTP_STATE.COOKIE_WAIT);\n    } catch (error: any) {\n      log(\"send init failed\", error.message);\n    }\n  }\n\n  private setExtensions(params: [number, Buffer][]) {\n    const extensions: number[] = [];\n    if (this.localPartialReliability) {\n      params.push([SCTP_PRSCTP_SUPPORTED, Buffer.from(\"\")]);\n      extensions.push(ForwardTsnChunk.type);\n    }\n\n    extensions.push(ReConfigChunk.type);\n    params.push([SCTP_SUPPORTED_CHUNK_EXT, Buffer.from(extensions)]);\n  }\n\n  async sendChunk(chunk: Chunk) {\n    if (this.state === \"closed\") return;\n    if (this.remotePort === undefined) {\n      throw new Error(\"invalid remote port\");\n    }\n\n    const packet = serializePacket(\n      this.localPort,\n      this.remotePort,\n      this.remoteVerificationTag,\n      chunk\n    );\n    await this.transport.send(packet);\n  }\n\n  setState(state: SCTP_STATE) {\n    if (state != this.associationState) {\n      this.associationState = state;\n    }\n    if (state === SCTP_STATE.ESTABLISHED) {\n      this.setConnectionState(\"connected\");\n    } else if (state === SCTP_STATE.CLOSED) {\n      this.timer1Cancel();\n      this.timer2Cancel();\n      this.timer3Cancel();\n      this.setConnectionState(\"closed\");\n      this.removeAllListeners();\n    }\n  }\n\n  setConnectionState(state: SCTPConnectionState) {\n    this.state = state;\n    log(\"setConnectionState\", state);\n    this.stateChanged[state].execute();\n  }\n\n  async stop() {\n    if (this.associationState !== SCTP_STATE.CLOSED) {\n      await this.abort();\n    }\n    this.setState(SCTP_STATE.CLOSED);\n    clearTimeout(this.timer1Handle);\n    clearTimeout(this.timer2Handle);\n    clearTimeout(this.timer3Handle);\n  }\n\n  async abort() {\n    const abort = new AbortChunk();\n    await this.sendChunk(abort).catch((err: Error) => {\n      log(\"send abort failed\", err.message);\n    });\n  }\n\n  private removeAllListeners() {\n    Object.values(this.stateChanged).forEach((v) => v.allUnsubscribe());\n  }\n}\n\nexport class InboundStream {\n  reassembly: DataChunk[] = [];\n  streamSequenceNumber = 0; // SSN\n\n  constructor() {}\n\n  addChunk(chunk: DataChunk) {\n    if (\n      this.reassembly.length === 0 ||\n      uint32Gt(chunk.tsn, this.reassembly[this.reassembly.length - 1].tsn)\n    ) {\n      this.reassembly.push(chunk);\n      return;\n    }\n\n    for (const [i, v] of enumerate(this.reassembly)) {\n      if (v.tsn === chunk.tsn) throw new Error(\"duplicate chunk in reassembly\");\n\n      if (uint32Gt(v.tsn, chunk.tsn)) {\n        this.reassembly.splice(i, 0, chunk);\n        break;\n      }\n    }\n  }\n\n  *popMessages(): Generator<[number, number, Buffer]> {\n    let pos = 0;\n    let startPos: number | undefined;\n    let expectedTsn: number;\n    let ordered: boolean | undefined;\n    while (pos < this.reassembly.length) {\n      const chunk = this.reassembly[pos];\n      if (startPos === undefined) {\n        ordered = !(chunk.flags & SCTP_DATA_UNORDERED);\n        if (!(chunk.flags & SCTP_DATA_FIRST_FRAG)) {\n          if (ordered) {\n            break;\n          } else {\n            pos++;\n            continue;\n          }\n        }\n        if (\n          ordered &&\n          uint16Gt(chunk.streamSeqNum, this.streamSequenceNumber)\n        ) {\n          break;\n        }\n        expectedTsn = chunk.tsn;\n        startPos = pos;\n      } else if (chunk.tsn !== expectedTsn!) {\n        if (ordered!) {\n          break;\n        } else {\n          startPos = undefined;\n          pos++;\n          continue;\n        }\n      }\n\n      if (chunk.flags & SCTP_DATA_LAST_FRAG) {\n        const arr = this.reassembly\n          .slice(startPos, pos + 1)\n          .map((c) => c.userData)\n          .reduce((acc, cur) => {\n            acc.push(cur);\n            acc.push(Buffer.from(\"\"));\n            return acc;\n          }, [] as Buffer[]);\n        arr.pop();\n        const userData = Buffer.concat(arr);\n\n        this.reassembly = [\n          ...this.reassembly.slice(0, startPos),\n          ...this.reassembly.slice(pos + 1),\n        ];\n        if (ordered && chunk.streamSeqNum === this.streamSequenceNumber) {\n          this.streamSequenceNumber = uint16Add(this.streamSequenceNumber, 1);\n        }\n        pos = startPos;\n        yield [chunk.streamId, chunk.protocol, userData];\n      } else {\n        pos++;\n      }\n      expectedTsn = tsnPlusOne(expectedTsn);\n    }\n  }\n\n  pruneChunks(tsn: number) {\n    // \"\"\"\n    // Prune chunks up to the given TSN.\n    // \"\"\"\n\n    let pos = -1,\n      size = 0;\n\n    for (const [i, chunk] of this.reassembly.entries()) {\n      if (uint32Gte(tsn, chunk.tsn)) {\n        pos = i;\n        size += chunk.userData.length;\n      } else {\n        break;\n      }\n    }\n\n    this.reassembly = this.reassembly.slice(pos + 1);\n    return size;\n  }\n}\n\nexport class RTCSctpCapabilities {\n  constructor(public maxMessageSize: number) {}\n}\n\nfunction tsnMinusOne(a: number) {\n  return (a - 1) % SCTP_TSN_MODULO;\n}\n\nfunction tsnPlusOne(a: number) {\n  return (a + 1) % SCTP_TSN_MODULO;\n}\n","import {\n  HashAlgorithms,\n  SignatureAlgorithm,\n} from \"../../dtls/src/cipher/const\";\nimport {\n  ProtectionProfileAeadAes128Gcm,\n  ProtectionProfileAes128CmHmacSha1_80,\n} from \"../../dtls/src/context/srtp\";\nimport { DtlsRole } from \"./transport/dtls\";\n\n// data channel export constants\nexport const DATA_CHANNEL_ACK = 2;\nexport const DATA_CHANNEL_OPEN = 3;\n\n// 5.1.  DATA_CHANNEL_OPEN Message\nexport const DATA_CHANNEL_RELIABLE = 0x00;\nexport const DATA_CHANNEL_PARTIAL_RELIABLE_REXMIT = 0x01;\nexport const DATA_CHANNEL_PARTIAL_RELIABLE_TIMED = 0x02;\nexport const DATA_CHANNEL_RELIABLE_UNORDERED = 0x80;\nexport const DATA_CHANNEL_PARTIAL_RELIABLE_REXMIT_UNORDERED = 0x81;\nexport const DATA_CHANNEL_PARTIAL_RELIABLE_TIMED_UNORDERED = 0x82;\n\nexport const WEBRTC_DCEP = 50;\nexport const WEBRTC_STRING = 51;\nexport const WEBRTC_BINARY = 53;\nexport const WEBRTC_STRING_EMPTY = 56;\nexport const WEBRTC_BINARY_EMPTY = 57;\n\nexport const DISCARD_HOST = \"0.0.0.0\";\nexport const DISCARD_PORT = 9;\nexport const MEDIA_KINDS = [\"audio\", \"video\"];\n\nexport const DIRECTIONS = [\"inactive\", \"sendonly\", \"recvonly\", \"sendrecv\"];\nexport const DTLS_ROLE_SETUP = {\n  auto: \"actpass\",\n  client: \"active\",\n  server: \"passive\",\n};\nexport const DTLS_SETUP_ROLE: { [key: string]: DtlsRole } = Object.keys(\n  DTLS_ROLE_SETUP\n).reduce((acc, cur) => {\n  const key = (DTLS_ROLE_SETUP as any)[cur];\n  acc[key] = cur;\n  return acc;\n}, {} as any);\nexport const FMTP_INT_PARAMETERS = [\n  \"apt\",\n  \"max-fr\",\n  \"max-fs\",\n  \"maxplaybackrate\",\n  \"minptime\",\n  \"stereo\",\n  \"useinbandfec\",\n];\n\nexport const SSRC_INFO_ATTRS = [\"cname\", \"msid\", \"mslabel\", \"label\"];\n\nexport const SRTP_PROFILE = {\n  SRTP_AES128_CM_HMAC_SHA1_80: ProtectionProfileAes128CmHmacSha1_80,\n  SRTP_AEAD_AES_128_GCM: ProtectionProfileAeadAes128Gcm,\n} as const;\n\nexport const SenderDirections = [\"sendonly\", \"sendrecv\"];\nexport const ReceiverDirection = [\"sendrecv\", \"recvonly\"];\n\nexport { HashAlgorithms, SignatureAlgorithm };\n","import debug from \"debug\";\nimport { Event } from \"rx.mini\";\n\nimport { EventTarget } from \"./helper\";\nimport { RTCSctpTransport } from \"./transport/sctp\";\nimport { Callback, CallbackWithValue } from \"./types/util\";\n\nconst log = debug(\"werift:packages/webrtc/src/dataChannel.ts\");\n\nexport class RTCDataChannel extends EventTarget {\n  readonly stateChanged = new Event<[DCState]>();\n  readonly message = new Event<[string | Buffer]>();\n  // todo impl\n  readonly error = new Event<[Error]>();\n  readonly bufferedAmountLow = new Event();\n  onopen?: Callback;\n  onclose?: Callback;\n  onclosing?: Callback;\n  onmessage?: CallbackWithValue<MessageEvent>;\n  // todo impl\n  onerror?: CallbackWithValue<RTCErrorEvent>;\n  isCreatedByRemote = false;\n  id: number;\n  readyState: DCState = \"connecting\";\n\n  bufferedAmount = 0;\n  private _bufferedAmountLowThreshold = 0;\n\n  constructor(\n    private readonly transport: RTCSctpTransport,\n    private readonly parameters: RTCDataChannelParameters,\n    public readonly sendOpen = true\n  ) {\n    super();\n\n    this.id = this.parameters.id;\n\n    if (parameters.negotiated) {\n      if (this.id == undefined || this.id < 0 || this.id > 65534) {\n        throw new Error(\n          \"ID must be in range 0-65534 if data channel is negotiated out-of-band\"\n        );\n      }\n      this.transport.dataChannelAddNegotiated(this);\n    } else {\n      if (sendOpen) {\n        this.sendOpen = false;\n        this.transport.dataChannelOpen(this);\n      }\n    }\n  }\n\n  get ordered() {\n    return this.parameters.ordered;\n  }\n\n  get maxRetransmits() {\n    return this.parameters.maxRetransmits;\n  }\n\n  get maxPacketLifeTime() {\n    return this.parameters.maxPacketLifeTime;\n  }\n\n  get label() {\n    return this.parameters.label;\n  }\n\n  get protocol() {\n    return this.parameters.protocol;\n  }\n\n  get negotiated() {\n    return this.parameters.negotiated;\n  }\n\n  get bufferedAmountLowThreshold() {\n    return this._bufferedAmountLowThreshold;\n  }\n\n  set bufferedAmountLowThreshold(value: number) {\n    if (value < 0 || value > 4294967295) {\n      throw new Error(\n        \"bufferedAmountLowThreshold must be in range 0 - 4294967295\"\n      );\n    }\n    this._bufferedAmountLowThreshold = value;\n  }\n\n  setId(id: number) {\n    this.id = id;\n  }\n\n  setReadyState(state: DCState) {\n    if (state !== this.readyState) {\n      this.readyState = state;\n      this.stateChanged.execute(state);\n\n      switch (state) {\n        case \"open\":\n          if (this.onopen) this.onopen();\n          this.emit(\"open\");\n          break;\n        case \"closed\":\n          if (this.onclose) this.onclose();\n          this.emit(\"close\");\n          break;\n        case \"closing\":\n          if (this.onclosing) this.onclosing();\n          break;\n      }\n      log(\"change state\", state);\n    }\n  }\n\n  addBufferedAmount(amount: number) {\n    const crossesThreshold =\n      this.bufferedAmount > this.bufferedAmountLowThreshold &&\n      this.bufferedAmount + amount <= this.bufferedAmountLowThreshold;\n    this.bufferedAmount += amount;\n    if (crossesThreshold) {\n      this.bufferedAmountLow.execute();\n      this.emit(\"bufferedamountlow\");\n    }\n  }\n\n  send(data: Buffer | string) {\n    this.transport.datachannelSend(this, data);\n  }\n\n  close() {\n    this.transport.dataChannelClose(this);\n  }\n}\n\nexport type DCState = \"open\" | \"closed\" | \"connecting\" | \"closing\";\n\nexport class RTCDataChannelParameters {\n  label = \"\";\n  maxPacketLifeTime?: number; // sec\n  maxRetransmits?: number;\n  ordered = true;\n  protocol = \"\";\n  negotiated = false;\n  id!: number;\n  constructor(props: Partial<RTCDataChannelParameters> = {}) {\n    Object.assign(this, props);\n  }\n}\n\nexport interface MessageEvent {\n  data: string | Buffer;\n}\n\nexport interface RTCErrorEvent {\n  error: any;\n}\n","import EventEmitter from \"events\";\n\nexport function enumerate<T>(arr: T[]): [number, T][] {\n  return arr.map((v, i) => [i, v]);\n}\n\nexport function divide(from: string, split: string): [string, string] {\n  const arr = from.split(split);\n  return [arr[0], arr.slice(1).join(split)];\n}\n\nexport class PromiseQueue {\n  queue: { promise: () => Promise<any>; done: () => void }[] = [];\n  running = false;\n\n  push = (promise: () => Promise<any>) =>\n    new Promise<void>((r) => {\n      this.queue.push({ promise, done: r });\n      if (!this.running) this.run();\n    });\n\n  private async run() {\n    const task = this.queue.shift();\n    if (task) {\n      this.running = true;\n      await task.promise();\n      task.done();\n\n      this.run();\n    } else {\n      this.running = false;\n    }\n  }\n}\n\nexport class EventTarget extends EventEmitter {\n  addEventListener = (type: string, listener: (...args: any[]) => void) => {\n    this.addListener(type, listener);\n  };\n\n  removeEventListener = (type: string, listener: (...args: any[]) => void) => {\n    this.removeListener(type, listener);\n  };\n}\n","export * from \"../../common/src\";\nexport * from \"../../dtls/src/cipher/const\";\nexport * from \"../../ice/src\";\nexport * from \"../../rtp/src\";\nexport * from \"./dataChannel\";\nexport * from \"./media/extension/rtcpFeedback\";\nexport * from \"./media/extension/rtpExtension\";\nexport * from \"./media/parameters\";\nexport * from \"./media/rtpTransceiver\";\nexport * from \"./media/track\";\nexport * from \"./nonstandard/recorder\";\nexport * from \"./nonstandard/userMedia\";\nexport * from \"./peerConnection\";\nexport * from \"./sdp\";\nexport * from \"./transport/dtls\";\nexport * from \"./transport/ice\";\nexport * from \"./transport/sctp\";\nexport * from \"./types/domain\";\nexport * from \"./utils\";\n","import { RTCPFB } from \"../parameters\";\n\nexport const useFIR = (): RTCPFB => ({ type: \"ccm\", parameter: \"fir\" });\n\nexport const useNACK = (): RTCPFB => ({ type: \"nack\" });\n\nexport const usePLI = (): RTCPFB => ({ type: \"nack\", parameter: \"pli\" });\n\nexport const useREMB = (): RTCPFB => ({ type: \"goog-remb\" });\n\nexport const useTWCC = (): RTCPFB => ({ type: \"transport-cc\" });\n","import { RTCRtpHeaderExtensionParameters } from \"../parameters\";\n\nexport const RTP_EXTENSION_URI = {\n  sdesMid: \"urn:ietf:params:rtp-hdrext:sdes:mid\",\n  sdesRTPStreamID: \"urn:ietf:params:rtp-hdrext:sdes:rtp-stream-id\",\n  repairedRtpStreamId: \"urn:ietf:params:rtp-hdrext:sdes:repaired-rtp-stream-id\",\n  transportWideCC:\n    \"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01\",\n  absSendTime: \"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time\",\n  dependencyDescriptor:\n    \"https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension\",\n} as const;\n\nexport function useSdesMid() {\n  return new RTCRtpHeaderExtensionParameters({\n    uri: RTP_EXTENSION_URI.sdesMid,\n  });\n}\n\nexport function useSdesRTPStreamId() {\n  return new RTCRtpHeaderExtensionParameters({\n    uri: RTP_EXTENSION_URI.sdesRTPStreamID,\n  });\n}\n\nexport function useRepairedRtpStreamId() {\n  return new RTCRtpHeaderExtensionParameters({\n    uri: RTP_EXTENSION_URI.repairedRtpStreamId,\n  });\n}\n\nexport function useTransportWideCC() {\n  return new RTCRtpHeaderExtensionParameters({\n    uri: RTP_EXTENSION_URI.transportWideCC,\n  });\n}\n\nexport function useAbsSendTime() {\n  return new RTCRtpHeaderExtensionParameters({\n    uri: RTP_EXTENSION_URI.absSendTime,\n  });\n}\n\nexport function useDependencyDescriptor() {\n  return new RTCRtpHeaderExtensionParameters({\n    uri: RTP_EXTENSION_URI.dependencyDescriptor,\n  });\n}\n","import { Direction } from \"./rtpTransceiver\";\n\nexport interface RTCRtpParameters {\n  codecs: RTCRtpCodecParameters[];\n  headerExtensions: RTCRtpHeaderExtensionParameters[];\n  muxId?: string;\n  rtpStreamId?: string;\n  repairedRtpStreamId?: string;\n  rtcp?: RTCRtcpParameters;\n}\n\nexport type RTCPFB = { type: string; parameter?: string };\n\nexport class RTCRtpCodecParameters {\n  /**\n   * When specifying a codec with a fixed payloadType such as PCMU,\n   * it is necessary to set the correct PayloadType in RTCRtpCodecParameters in advance.\n   */\n  payloadType!: number;\n  mimeType!: string;\n  clockRate!: number;\n  channels?: number;\n  rtcpFeedback: RTCPFB[] = [];\n  parameters?: string;\n  direction: Direction | \"all\" = \"all\";\n\n  constructor(\n    props: Pick<RTCRtpCodecParameters, \"mimeType\" | \"clockRate\"> &\n      Partial<RTCRtpCodecParameters>\n  ) {\n    Object.assign(this, props);\n  }\n\n  get name() {\n    return this.mimeType.split(\"/\")[1];\n  }\n\n  get contentType() {\n    return this.mimeType.split(\"/\")[0];\n  }\n\n  get str() {\n    let s = `${this.name}/${this.clockRate}`;\n    if (this.channels === 2) s += \"/2\";\n    return s;\n  }\n}\n\nexport class RTCRtpHeaderExtensionParameters {\n  id!: number;\n  uri!: string;\n\n  constructor(\n    props: Partial<RTCRtpHeaderExtensionParameters> &\n      Pick<RTCRtpHeaderExtensionParameters, \"uri\">\n  ) {\n    Object.assign(this, props);\n  }\n}\n\nexport class RTCRtcpParameters {\n  cname?: string;\n  mux: boolean = false;\n  ssrc?: number;\n\n  constructor(props: Partial<RTCRtcpParameters> = {}) {\n    Object.assign(this, props);\n  }\n}\n\nexport class RTCRtcpFeedback {\n  type!: string;\n  parameter?: string;\n\n  constructor(props: Partial<RTCRtcpFeedback> = {}) {\n    Object.assign(this, props);\n  }\n}\nexport class RTCRtpRtxParameters {\n  ssrc!: number;\n\n  constructor(props: Partial<RTCRtpRtxParameters> = {}) {\n    Object.assign(this, props);\n  }\n}\n\nexport class RTCRtpCodingParameters {\n  ssrc!: number;\n  payloadType!: number;\n  rtx?: RTCRtpRtxParameters;\n\n  constructor(\n    props: Partial<RTCRtpCodingParameters> &\n      Pick<RTCRtpCodingParameters, \"ssrc\" | \"payloadType\">\n  ) {\n    Object.assign(this, props);\n  }\n}\n\nexport interface RTCRtpReceiveParameters extends RTCRtpParameters {\n  encodings: RTCRtpCodingParameters[];\n}\n\nexport interface RTCRtpSendParameters extends RTCRtpParameters {}\n\nexport class RTCRtpSimulcastParameters {\n  rid!: string;\n  direction!: \"send\" | \"recv\";\n  constructor(props: RTCRtpSimulcastParameters) {\n    Object.assign(this, props);\n  }\n}\n","import debug from \"debug\";\nimport range from \"lodash/range\";\nimport Event from \"rx.mini\";\n\nimport { uint16Add } from \"../../../../common/src\";\nimport {\n  GenericNack,\n  RtcpTransportLayerFeedback,\n  RtpPacket,\n} from \"../../../../rtp/src\";\nimport { RTCRtpReceiver } from \"../rtpReceiver\";\n\nconst log = debug(\"werift:packages/webrtc/src/media/receiver/nack.ts\");\n\nconst LOST_SIZE = 30 * 5;\n\nexport class NackHandler {\n  private newEstSeqNum = 0;\n  private _lost: { [seqNum: number]: number } = {};\n  private nackLoop: any;\n\n  readonly onPacketLost = new Event<[GenericNack]>();\n  mediaSourceSsrc?: number;\n  retryCount = 10;\n  closed = false;\n\n  constructor(private receiver: RTCRtpReceiver) {}\n\n  get lostSeqNumbers() {\n    return Object.keys(this._lost).map(Number).sort();\n  }\n\n  private getLost(seq: number) {\n    return this._lost[seq];\n  }\n\n  private setLost(seq: number, count: number) {\n    this._lost[seq] = count;\n\n    if (this.nackLoop || this.closed) {\n      return;\n    }\n    this.nackLoop = setInterval(async () => {\n      try {\n        await this.sendNack();\n        if (!Object.keys(this._lost).length) {\n          clearInterval(this.nackLoop);\n          this.nackLoop = undefined;\n        }\n      } catch (error) {\n        log(\"failed to send nack\", error);\n      }\n    }, 5);\n  }\n\n  private removeLost(sequenceNumber: number) {\n    delete this._lost[sequenceNumber];\n  }\n\n  addPacket(packet: RtpPacket) {\n    const { sequenceNumber, ssrc } = packet.header;\n    this.mediaSourceSsrc = ssrc;\n\n    if (this.newEstSeqNum === 0) {\n      this.newEstSeqNum = sequenceNumber;\n      return;\n    }\n\n    if (this.getLost(sequenceNumber)) {\n      // log(\"packetLoss resolved\", { sequenceNumber });\n      this.removeLost(sequenceNumber);\n      return;\n    }\n\n    if (sequenceNumber === uint16Add(this.newEstSeqNum, 1)) {\n      this.newEstSeqNum = sequenceNumber;\n    } else if (sequenceNumber > uint16Add(this.newEstSeqNum, 1)) {\n      // packet lost detected\n      range(uint16Add(this.newEstSeqNum, 1), sequenceNumber).forEach((seq) => {\n        this.setLost(seq, 1);\n      });\n      // this.receiver.sendRtcpPLI(this.mediaSourceSsrc);\n\n      this.newEstSeqNum = sequenceNumber;\n      this.pruneLost();\n    }\n  }\n\n  private pruneLost() {\n    if (this.lostSeqNumbers.length > LOST_SIZE) {\n      this._lost = Object.entries(this._lost)\n        .slice(-LOST_SIZE)\n        .reduce((acc, [key, v]) => {\n          acc[key] = v;\n          return acc;\n        }, {} as { [seqNum: number]: number });\n    }\n  }\n\n  close() {\n    this.closed = true;\n    clearInterval(this.nackLoop);\n    this._lost = {};\n  }\n\n  private updateRetryCount() {\n    this.lostSeqNumbers.forEach((seq) => {\n      const count = this._lost[seq]++;\n      if (count > this.retryCount) {\n        this.removeLost(seq);\n        return seq;\n      }\n    });\n  }\n\n  private sendNack = () =>\n    new Promise((r, f) => {\n      if (this.lostSeqNumbers.length > 0 && this.mediaSourceSsrc) {\n        const nack = new GenericNack({\n          senderSsrc: this.receiver.rtcpSsrc,\n          mediaSourceSsrc: this.mediaSourceSsrc,\n          lost: this.lostSeqNumbers,\n        });\n        // log(\"sendNack\", nack.toJSON());\n        const rtcp = new RtcpTransportLayerFeedback({\n          feedback: nack,\n        });\n        this.receiver.dtlsTransport.sendRtcp([rtcp]).then(r).catch(f);\n\n        this.updateRetryCount();\n        this.onPacketLost.execute(nack);\n      }\n    });\n}\n","import debug from \"debug\";\nimport { setTimeout } from \"timers/promises\";\n\nimport { uint8Add, uint16Add, uint24 } from \"../../../../common/src\";\nimport {\n  PacketStatus,\n  RecvDelta,\n  RtcpTransportLayerFeedback,\n  RunLengthChunk,\n  StatusVectorChunk,\n  TransportWideCC,\n} from \"../../../../rtp/src\";\nimport { RTCDtlsTransport } from \"../../transport/dtls\";\nimport { microTime } from \"../../utils\";\n\nconst log = debug(\"werift:packages/webrtc/media/receiver/receiverTwcc\");\n\ntype ExtensionInfo = { tsn: number; timestamp: number };\n\nexport class ReceiverTWCC {\n  extensionInfo: {\n    [tsn: number]: ExtensionInfo;\n  } = {};\n  twccRunning = false;\n  /** uint8 */\n  fbPktCount = 0;\n  lastTimestamp?: number;\n\n  constructor(\n    private dtlsTransport: RTCDtlsTransport,\n    private rtcpSsrc: number,\n    private mediaSourceSsrc: number\n  ) {\n    this.runTWCC();\n  }\n\n  handleTWCC(transportSequenceNumber: number) {\n    this.extensionInfo[transportSequenceNumber] = {\n      tsn: transportSequenceNumber,\n      timestamp: microTime(),\n    };\n\n    if (Object.keys(this.extensionInfo).length > 10) {\n      this.sendTWCC();\n    }\n  }\n\n  private async runTWCC() {\n    while (this.twccRunning) {\n      this.sendTWCC();\n      await setTimeout(100);\n    }\n  }\n\n  private sendTWCC() {\n    if (Object.keys(this.extensionInfo).length === 0) return;\n    const extensionsArr = Object.values(this.extensionInfo).sort(\n      (a, b) => a.tsn - b.tsn\n    );\n\n    const minTSN = extensionsArr[0].tsn;\n    const maxTSN = extensionsArr.slice(-1)[0].tsn;\n\n    const packetChunks: (RunLengthChunk | StatusVectorChunk)[] = [];\n    const baseSequenceNumber = extensionsArr[0].tsn;\n    const packetStatusCount = uint16Add(maxTSN - minTSN, 1);\n    /**micro sec */\n    let referenceTime!: number;\n    let lastPacketStatus: { status: PacketStatus; minTSN: number } | undefined;\n    const recvDeltas: RecvDelta[] = [];\n\n    for (let i = minTSN; i <= maxTSN; i++) {\n      /**micro sec */\n      const timestamp = this.extensionInfo[i]?.timestamp;\n\n      if (timestamp) {\n        if (!this.lastTimestamp) {\n          this.lastTimestamp = timestamp;\n        }\n        if (!referenceTime) {\n          referenceTime = this.lastTimestamp;\n        }\n\n        const delta = timestamp - this.lastTimestamp;\n        this.lastTimestamp = timestamp;\n\n        const recvDelta = new RecvDelta({\n          delta: Number(delta),\n        });\n        recvDelta.parseDelta();\n        recvDeltas.push(recvDelta);\n\n        // when status changed\n        if (\n          lastPacketStatus != undefined &&\n          lastPacketStatus.status !== recvDelta.type\n        ) {\n          packetChunks.push(\n            new RunLengthChunk({\n              packetStatus: lastPacketStatus.status,\n              runLength: i - lastPacketStatus.minTSN,\n            })\n          );\n          lastPacketStatus = { minTSN: i, status: recvDelta.type! };\n        }\n        // last status\n        if (i === maxTSN) {\n          if (lastPacketStatus != undefined) {\n            packetChunks.push(\n              new RunLengthChunk({\n                packetStatus: lastPacketStatus.status,\n                runLength: i - lastPacketStatus.minTSN + 1,\n              })\n            );\n          } else {\n            packetChunks.push(\n              new RunLengthChunk({\n                packetStatus: recvDelta.type,\n                runLength: 1,\n              })\n            );\n          }\n        }\n\n        if (lastPacketStatus == undefined) {\n          lastPacketStatus = { minTSN: i, status: recvDelta.type! };\n        }\n      }\n    }\n\n    if (!referenceTime) {\n      return;\n    }\n\n    const packet = new RtcpTransportLayerFeedback({\n      feedback: new TransportWideCC({\n        senderSsrc: this.rtcpSsrc,\n        mediaSourceSsrc: this.mediaSourceSsrc,\n        baseSequenceNumber,\n        packetStatusCount,\n        referenceTime: uint24(Math.floor(referenceTime / 1000 / 64)),\n        fbPktCount: this.fbPktCount,\n        recvDeltas,\n        packetChunks,\n      }),\n    });\n\n    this.dtlsTransport.sendRtcp([packet]).catch((err) => {\n      log(err);\n    });\n    this.extensionInfo = {};\n    this.fbPktCount = uint8Add(this.fbPktCount, 1);\n  }\n}\n","import { int, uint16Gt } from \"../../../../common/src\";\nimport { RtpPacket } from \"../../../../rtp/src\";\n\n// from aiortc\n\nexport class StreamStatistics {\n  base_seq?: number;\n  max_seq?: number;\n  cycles = 0;\n  packets_received = 0;\n\n  // # jitter\n  private clockRate: number;\n  jitter_q4 = 0;\n  private last_arrival?: number;\n  private last_timestamp?: number;\n\n  // # fraction lost\n  expected_prior = 0;\n  received_prior = 0;\n\n  constructor(clockRate: number) {\n    this.clockRate = clockRate;\n  }\n\n  add(packet: RtpPacket, now: number = Date.now() / 1000) {\n    const inOrder =\n      this.max_seq == undefined ||\n      uint16Gt(packet.header.sequenceNumber, this.max_seq);\n    this.packets_received++;\n\n    if (this.base_seq == undefined) {\n      this.base_seq = packet.header.sequenceNumber;\n    }\n\n    if (inOrder) {\n      const arrival = int(now * this.clockRate);\n\n      if (\n        this.max_seq != undefined &&\n        packet.header.sequenceNumber < this.max_seq\n      ) {\n        this.cycles += 1 << 16;\n      }\n      this.max_seq = packet.header.sequenceNumber;\n\n      if (\n        packet.header.timestamp !== this.last_timestamp &&\n        this.packets_received > 1\n      ) {\n        const diff = Math.abs(\n          arrival -\n            (this.last_arrival ?? 0) -\n            (packet.header.timestamp - (this.last_timestamp ?? 0))\n        );\n        this.jitter_q4 += diff - ((this.jitter_q4 + 8) >> 4);\n      }\n\n      this.last_arrival = arrival;\n      this.last_timestamp = packet.header.timestamp;\n    }\n  }\n\n  get fraction_lost() {\n    const expected_interval = this.packets_expected - this.expected_prior;\n    this.expected_prior = this.packets_expected;\n    const received_interval = this.packets_received - this.received_prior;\n    this.received_prior = this.packets_received;\n    const lost_interval = expected_interval - received_interval;\n    if (expected_interval == 0 || lost_interval <= 0) {\n      return 0;\n    } else {\n      return Math.floor((lost_interval << 8) / expected_interval);\n    }\n  }\n\n  get jitter() {\n    return this.jitter_q4 >> 4;\n  }\n\n  get packets_expected() {\n    return this.cycles + (this.max_seq ?? 0) - (this.base_seq ?? 0) + 1;\n  }\n\n  get packets_lost() {\n    const lost = this.packets_expected - this.packets_received;\n    return lost < 0 ? 0 : lost;\n  }\n}\n","import debug from \"debug\";\n\nimport { bufferReader } from \"../../../common/src\";\nimport {\n  Extension,\n  ReceiverEstimatedMaxBitrate,\n  RtcpPacket,\n  RtcpPayloadSpecificFeedback,\n  RtcpRrPacket,\n  RtcpSourceDescriptionPacket,\n  RtcpSrPacket,\n  RtcpTransportLayerFeedback,\n  RtpPacket,\n} from \"../../../rtp/src\";\nimport { RTP_EXTENSION_URI } from \"./extension/rtpExtension\";\nimport {\n  RTCRtpReceiveParameters,\n  RTCRtpSimulcastParameters,\n} from \"./parameters\";\nimport { RTCRtpReceiver } from \"./rtpReceiver\";\nimport { RTCRtpSender } from \"./rtpSender\";\nimport { RTCRtpTransceiver } from \"./rtpTransceiver\";\nimport { MediaStreamTrack } from \"./track\";\n\nconst log = debug(\"werift:packages/webrtc/src/media/router.ts\");\n\nexport type Extensions = { [uri: string]: number | string };\n\nexport class RtpRouter {\n  ssrcTable: { [ssrc: number]: RTCRtpReceiver | RTCRtpSender } = {};\n  ridTable: { [rid: string]: RTCRtpReceiver | RTCRtpSender } = {};\n  extIdUriMap: { [id: number]: string } = {};\n\n  constructor() {}\n\n  registerRtpSender(sender: RTCRtpSender) {\n    this.ssrcTable[sender.ssrc] = sender;\n  }\n\n  private registerRtpReceiver(receiver: RTCRtpReceiver, ssrc: number) {\n    log(\"registerRtpReceiver\", ssrc);\n    this.ssrcTable[ssrc] = receiver;\n  }\n\n  registerRtpReceiverBySsrc(\n    transceiver: RTCRtpTransceiver,\n    params: RTCRtpReceiveParameters\n  ) {\n    log(\"registerRtpReceiverBySsrc\", params);\n\n    params.encodings\n      .filter((e) => e.ssrc != undefined) // todo fix\n      .forEach((encode, i) => {\n        this.registerRtpReceiver(transceiver.receiver, encode.ssrc);\n        transceiver.addTrack(\n          new MediaStreamTrack({\n            ssrc: encode.ssrc,\n            kind: transceiver.kind,\n            id: transceiver.sender.trackId,\n            remote: true,\n            codec: params.codecs[i],\n          })\n        );\n        if (encode.rtx) {\n          this.registerRtpReceiver(transceiver.receiver, encode.rtx.ssrc);\n        }\n      });\n\n    params.headerExtensions.forEach((extension) => {\n      this.extIdUriMap[extension.id] = extension.uri;\n    });\n  }\n\n  registerRtpReceiverByRid(\n    transceiver: RTCRtpTransceiver,\n    param: RTCRtpSimulcastParameters,\n    params: RTCRtpReceiveParameters\n  ) {\n    // サイマルキャスト利用時のRTXをサポートしていないのでcodecs/encodingsは常に一つ\n    const [codec] = params.codecs;\n\n    log(\"registerRtpReceiverByRid\", param);\n    transceiver.addTrack(\n      new MediaStreamTrack({\n        rid: param.rid,\n        kind: transceiver.kind,\n        id: transceiver.sender.trackId,\n        remote: true,\n        codec,\n      })\n    );\n    this.ridTable[param.rid] = transceiver.receiver;\n  }\n\n  static rtpHeaderExtensionsParser(\n    extensions: Extension[],\n    extIdUriMap: { [id: number]: string }\n  ): Extensions {\n    return extensions\n      .map((extension) => {\n        const uri = extIdUriMap[extension.id];\n        switch (uri) {\n          case RTP_EXTENSION_URI.sdesMid:\n          case RTP_EXTENSION_URI.sdesRTPStreamID:\n          case RTP_EXTENSION_URI.repairedRtpStreamId:\n            return { uri, value: extension.payload.toString() };\n          case RTP_EXTENSION_URI.transportWideCC:\n            return { uri, value: extension.payload.readUInt16BE() };\n          case RTP_EXTENSION_URI.absSendTime:\n            return {\n              uri,\n              value: bufferReader(extension.payload, [3])[0],\n            };\n          default:\n            return { uri, value: 0 };\n        }\n      })\n      .reduce((acc: { [uri: string]: any }, cur) => {\n        if (cur) acc[cur.uri] = cur.value;\n        return acc;\n      }, {});\n  }\n\n  routeRtp = (packet: RtpPacket) => {\n    const extensions = RtpRouter.rtpHeaderExtensionsParser(\n      packet.header.extensions,\n      this.extIdUriMap\n    );\n\n    let rtpReceiver: RTCRtpReceiver | undefined = this.ssrcTable[\n      packet.header.ssrc\n    ] as RTCRtpReceiver;\n\n    const rid = extensions[RTP_EXTENSION_URI.sdesRTPStreamID];\n    if (typeof rid === \"string\") {\n      rtpReceiver = this.ridTable[rid] as RTCRtpReceiver;\n      rtpReceiver.latestRid = rid;\n      rtpReceiver.handleRtpByRid(packet, rid, extensions);\n    } else if (rtpReceiver) {\n      rtpReceiver.handleRtpBySsrc(packet, extensions);\n    } else {\n      // simulcast after send receiver report\n      rtpReceiver = Object.values(this.ridTable)\n        .filter((r): r is RTCRtpReceiver => r instanceof RTCRtpReceiver)\n        .find((r) => r.trackBySSRC[packet.header.ssrc]);\n      if (rtpReceiver) {\n        log(\"simulcast register receiver by ssrc\", packet.header.ssrc);\n        this.registerRtpReceiver(rtpReceiver, packet.header.ssrc);\n        rtpReceiver.handleRtpBySsrc(packet, extensions);\n      } else {\n        // bug\n      }\n    }\n\n    if (!rtpReceiver) {\n      log(\"ssrcReceiver not found\");\n      return;\n    }\n\n    const sdesMid = extensions[RTP_EXTENSION_URI.sdesMid];\n    if (typeof sdesMid === \"string\") {\n      rtpReceiver.sdesMid = sdesMid;\n    }\n\n    const repairedRid = extensions[\n      RTP_EXTENSION_URI.repairedRtpStreamId\n    ] as string;\n    if (typeof repairedRid === \"string\") {\n      rtpReceiver.latestRepairedRid = repairedRid;\n    }\n  };\n\n  routeRtcp = (packet: RtcpPacket) => {\n    const recipients: (RTCRtpReceiver | RTCRtpSender)[] = [];\n\n    switch (packet.type) {\n      case RtcpSrPacket.type:\n        {\n          packet = packet as RtcpSrPacket;\n          recipients.push(this.ssrcTable[packet.ssrc]);\n        }\n        break;\n      case RtcpRrPacket.type:\n        {\n          packet = packet as RtcpRrPacket;\n          packet.reports.forEach((report) => {\n            recipients.push(this.ssrcTable[report.ssrc]);\n          });\n        }\n        break;\n      case RtcpSourceDescriptionPacket.type:\n        {\n          const sdes = packet as RtcpSourceDescriptionPacket;\n          // log(\"sdes\", JSON.stringify(sdes.chunks));\n        }\n        break;\n      case RtcpTransportLayerFeedback.type:\n        {\n          const rtpfb = packet as RtcpTransportLayerFeedback;\n          if (rtpfb.feedback) {\n            recipients.push(this.ssrcTable[rtpfb.feedback.mediaSourceSsrc]);\n          }\n        }\n        break;\n      case RtcpPayloadSpecificFeedback.type:\n        {\n          const psfb = packet as RtcpPayloadSpecificFeedback;\n          switch (psfb.feedback.count) {\n            case ReceiverEstimatedMaxBitrate.count:\n              const remb = psfb.feedback as ReceiverEstimatedMaxBitrate;\n              recipients.push(this.ssrcTable[remb.ssrcFeedbacks[0]]);\n              break;\n            default:\n              recipients.push(this.ssrcTable[psfb.feedback.senderSsrc]);\n          }\n        }\n        break;\n    }\n    recipients\n      .filter((v) => v) // todo simulcast\n      .forEach((recipient) => recipient.handleRtcpPacket(packet));\n  };\n}\n","import { debug } from \"debug\";\nimport { jspack } from \"jspack\";\nimport Event from \"rx.mini\";\nimport { setTimeout } from \"timers/promises\";\nimport { v4 as uuid } from \"uuid\";\n\nimport { int } from \"../../../common/src\";\nimport {\n  PictureLossIndication,\n  Red,\n  RedHandler,\n  RtcpPacket,\n  RtcpPayloadSpecificFeedback,\n  RtcpReceiverInfo,\n  RtcpRrPacket,\n  RtcpSrPacket,\n  RtpHeader,\n  RtpPacket,\n} from \"../../../rtp/src\";\nimport { codecParametersFromString, PeerConfig, usePLI, useTWCC } from \"..\";\nimport { RTCDtlsTransport } from \"../transport/dtls\";\nimport { Kind } from \"../types/domain\";\nimport { compactNtp, timestampSeconds } from \"../utils\";\nimport { RTP_EXTENSION_URI } from \"./extension/rtpExtension\";\nimport { RTCRtpCodecParameters, RTCRtpReceiveParameters } from \"./parameters\";\nimport { NackHandler } from \"./receiver/nack\";\nimport { ReceiverTWCC } from \"./receiver/receiverTwcc\";\nimport { StreamStatistics } from \"./receiver/statistics\";\nimport { Extensions } from \"./router\";\nimport { MediaStreamTrack } from \"./track\";\n\nconst log = debug(\"werift:packages/webrtc/src/media/rtpReceiver.ts\");\n\nexport class RTCRtpReceiver {\n  private readonly codecs: { [pt: number]: RTCRtpCodecParameters } = {};\n  private get codecArray() {\n    return Object.values(this.codecs).sort(\n      (a, b) => a.payloadType - b.payloadType\n    );\n  }\n  private readonly ssrcByRtx: { [rtxSsrc: number]: number } = {};\n  private readonly nack = new NackHandler(this);\n  private readonly audioRedHandler = new RedHandler();\n\n  readonly type = \"receiver\";\n  readonly uuid = uuid();\n  readonly tracks: MediaStreamTrack[] = [];\n  readonly trackBySSRC: { [ssrc: string]: MediaStreamTrack } = {};\n  readonly trackByRID: { [rid: string]: MediaStreamTrack } = {};\n  /**last sender Report Timestamp\n   * compactNtp\n   */\n  readonly lastSRtimestamp: { [ssrc: number]: number } = {};\n  /**seconds */\n  readonly receiveLastSRTimestamp: { [ssrc: number]: number } = {};\n  readonly onPacketLost = this.nack.onPacketLost;\n  readonly onRtcp = new Event<[RtcpPacket]>();\n\n  dtlsTransport!: RTCDtlsTransport;\n  sdesMid?: string;\n  latestRid?: string;\n  latestRepairedRid?: string;\n\n  receiverTWCC?: ReceiverTWCC;\n  stopped = false;\n  remoteStreamId?: string;\n  remoteTrackId?: string;\n\n  rtcpRunning = false;\n  private rtcpCancel = new AbortController();\n  private remoteStreams: { [ssrc: number]: StreamStatistics } = {};\n\n  constructor(\n    readonly config: PeerConfig,\n    public kind: Kind,\n    public rtcpSsrc: number\n  ) {}\n\n  setDtlsTransport(dtls: RTCDtlsTransport) {\n    this.dtlsTransport = dtls;\n  }\n\n  // todo fix\n  get track() {\n    return this.tracks[0];\n  }\n\n  get nackEnabled() {\n    return this.codecArray[0]?.rtcpFeedback.find((f) => f.type === \"nack\");\n  }\n\n  get twccEnabled() {\n    return this.codecArray[0]?.rtcpFeedback.find(\n      (f) => f.type === useTWCC().type\n    );\n  }\n\n  get pliEnabled() {\n    return this.codecArray[0]?.rtcpFeedback.find(\n      (f) => f.type === usePLI().type\n    );\n  }\n\n  prepareReceive(params: RTCRtpReceiveParameters) {\n    params.codecs.forEach((c) => {\n      this.codecs[c.payloadType] = c;\n    });\n    params.encodings.forEach((e) => {\n      if (e.rtx) {\n        this.ssrcByRtx[e.rtx.ssrc] = e.ssrc;\n      }\n    });\n  }\n\n  /**\n   * setup TWCC if supported\n   */\n  setupTWCC(mediaSourceSsrc: number) {\n    if (this.twccEnabled && !this.receiverTWCC) {\n      this.receiverTWCC = new ReceiverTWCC(\n        this.dtlsTransport,\n        this.rtcpSsrc,\n        mediaSourceSsrc\n      );\n    }\n  }\n\n  addTrack(track: MediaStreamTrack) {\n    const exist = this.tracks.find((t) => {\n      if (t.rid) {\n        return t.rid === track.rid;\n      }\n      if (t.ssrc) {\n        return t.ssrc === track.ssrc;\n      }\n    });\n    if (exist) {\n      return false;\n    }\n    this.tracks.push(track);\n    if (track.ssrc) {\n      this.trackBySSRC[track.ssrc] = track;\n    }\n    if (track.rid) {\n      this.trackByRID[track.rid] = track;\n    }\n    return true;\n  }\n\n  stop() {\n    this.stopped = true;\n    this.rtcpRunning = false;\n    this.rtcpCancel.abort();\n\n    if (this.receiverTWCC) this.receiverTWCC.twccRunning = false;\n    this.nack.close();\n  }\n\n  async runRtcp() {\n    if (this.rtcpRunning || this.stopped) return;\n    this.rtcpRunning = true;\n\n    try {\n      while (this.rtcpRunning) {\n        await setTimeout(500 + Math.random() * 1000, undefined, {\n          signal: this.rtcpCancel.signal,\n        });\n\n        const reports = Object.entries(this.remoteStreams).map(\n          ([ssrc, stream]) => {\n            let lastSRtimestamp = 0,\n              delaySinceLastSR = 0;\n            if (this.lastSRtimestamp[ssrc]) {\n              lastSRtimestamp = this.lastSRtimestamp[ssrc];\n              const delaySeconds =\n                timestampSeconds() - this.receiveLastSRTimestamp[ssrc];\n              if (delaySeconds > 0 && delaySeconds < 65536) {\n                delaySinceLastSR = int(delaySeconds * 65536);\n              }\n            }\n\n            return new RtcpReceiverInfo({\n              ssrc: Number(ssrc),\n              fractionLost: stream.fraction_lost,\n              packetsLost: stream.packets_lost,\n              highestSequence: stream.max_seq,\n              jitter: stream.jitter,\n              lsr: lastSRtimestamp,\n              dlsr: delaySinceLastSR,\n            });\n          }\n        );\n\n        const packet = new RtcpRrPacket({ ssrc: this.rtcpSsrc, reports });\n\n        try {\n          if (this.config.debug.receiverReportDelay) {\n            await setTimeout(this.config.debug.receiverReportDelay);\n          }\n          await this.dtlsTransport.sendRtcp([packet]);\n        } catch (error) {\n          log(\"sendRtcp failed\", error);\n          await setTimeout(500 + Math.random() * 1000);\n        }\n      }\n    } catch (error) {}\n  }\n\n  /**todo impl */\n  getStats() {}\n\n  async sendRtcpPLI(mediaSsrc: number) {\n    if (!this.pliEnabled) {\n      log(\"pli not supported\", { mediaSsrc });\n      return;\n    }\n\n    if (this.stopped) {\n      return;\n    }\n\n    log(\"sendRtcpPLI\", { mediaSsrc });\n\n    const packet = new RtcpPayloadSpecificFeedback({\n      feedback: new PictureLossIndication({\n        senderSsrc: this.rtcpSsrc,\n        mediaSsrc,\n      }),\n    });\n    try {\n      await this.dtlsTransport.sendRtcp([packet]);\n    } catch (error) {\n      log(error);\n    }\n  }\n\n  handleRtcpPacket(packet: RtcpPacket) {\n    switch (packet.type) {\n      case RtcpSrPacket.type:\n        {\n          const sr = packet as RtcpSrPacket;\n          this.lastSRtimestamp[sr.ssrc] = compactNtp(\n            sr.senderInfo.ntpTimestamp\n          );\n          this.receiveLastSRTimestamp[sr.ssrc] = timestampSeconds();\n\n          const track = this.trackBySSRC[packet.ssrc];\n          if (track) {\n            track.onReceiveRtcp.execute(packet);\n          }\n        }\n        break;\n    }\n    this.onRtcp.execute(packet);\n  }\n\n  handleRtpBySsrc = (packet: RtpPacket, extensions: Extensions) => {\n    const track = this.trackBySSRC[packet.header.ssrc];\n\n    this.handleRTP(packet, extensions, track);\n  };\n\n  handleRtpByRid = (packet: RtpPacket, rid: string, extensions: Extensions) => {\n    const track = this.trackByRID[rid];\n    if (!this.trackBySSRC[packet.header.ssrc]) {\n      this.trackBySSRC[packet.header.ssrc] = track;\n    }\n\n    this.handleRTP(packet, extensions, track);\n  };\n\n  private handleRTP(\n    packet: RtpPacket,\n    extensions: Extensions,\n    track?: MediaStreamTrack\n  ) {\n    if (this.stopped) {\n      return;\n    }\n\n    const codec = this.codecs[packet.header.payloadType];\n    if (!codec) {\n      // log(\"unknown codec \" + packet.header.payloadType);\n      return;\n    }\n\n    this.remoteStreams[packet.header.ssrc] =\n      this.remoteStreams[packet.header.ssrc] ??\n      new StreamStatistics(codec.clockRate);\n    this.remoteStreams[packet.header.ssrc].add(packet);\n\n    if (this.receiverTWCC) {\n      const transportSequenceNumber = extensions[\n        RTP_EXTENSION_URI.transportWideCC\n      ] as number;\n      if (!transportSequenceNumber == undefined) {\n        throw new Error(\"undefined\");\n      }\n\n      this.receiverTWCC.handleTWCC(transportSequenceNumber);\n    } else if (this.twccEnabled) {\n      this.setupTWCC(packet.header.ssrc);\n    }\n\n    if (codec.name.toLowerCase() === \"rtx\") {\n      const originalSsrc = this.ssrcByRtx[packet.header.ssrc];\n      const codecParams = codecParametersFromString(codec.parameters ?? \"\");\n      const rtxCodec = this.codecs[codecParams[\"apt\"]];\n      if (packet.payload.length < 2) return;\n\n      packet = unwrapRtx(packet, rtxCodec.payloadType, originalSsrc);\n      track = this.trackBySSRC[originalSsrc];\n    }\n\n    let red: Red | undefined;\n    if (codec.name.toLowerCase() === \"red\") {\n      red = Red.deSerialize(packet.payload);\n      if (\n        !Object.keys(this.codecs).includes(\n          red.header.fields[0].blockPT.toString()\n        )\n      ) {\n        return;\n      }\n    }\n\n    if (track?.kind === \"video\" && this.nackEnabled) {\n      this.nack.addPacket(packet);\n    }\n\n    if (track) {\n      if (red) {\n        if (track.kind === \"audio\") {\n          const payloads = this.audioRedHandler.push(red, packet);\n          for (const packet of payloads) {\n            track.onReceiveRtp.execute(packet.clone());\n          }\n        } else {\n        }\n      } else {\n        track.onReceiveRtp.execute(packet.clone());\n      }\n    }\n\n    this.runRtcp();\n  }\n}\n\nexport function unwrapRtx(rtx: RtpPacket, payloadType: number, ssrc: number) {\n  const packet = new RtpPacket(\n    new RtpHeader({\n      payloadType,\n      marker: rtx.header.marker,\n      sequenceNumber: jspack.Unpack(\"!H\", rtx.payload.subarray(0, 2))[0],\n      timestamp: rtx.header.timestamp,\n      ssrc,\n    }),\n    rtx.payload.subarray(2)\n  );\n  return packet;\n}\n","/**\n   [10 Nov 1995 11:33:25.125 UTC]       [10 Nov 1995 11:33:36.5 UTC]\n   n                 SR(n)              A=b710:8000 (46864.500 s)\n   ---------------------------------------------------------------->\n                      v                 ^\n   ntp_sec =0xb44db705 v               ^ dlsr=0x0005:4000 (    5.250s)\n   ntp_frac=0x20000000  v             ^  lsr =0xb705:2000 (46853.125s)\n     (3024992005.125 s)  v           ^\n   r                      v         ^ RR(n)\n   ---------------------------------------------------------------->\n                          |<-DLSR->|\n                           (5.250 s)\n        \n   A     0xb710:8000 (46864.500 s)\n   DLSR -0x0005:4000 (    5.250 s)\n   LSR  -0xb705:2000 (46853.125 s)\n   -------------------------------\n   delay 0x0006:2000 (    6.125 s)\n        \nFigure 2: Example for round-trip time computation\n */\n\nimport { randomBytes } from \"crypto\";\nimport debug from \"debug\";\nimport { jspack } from \"jspack\";\nimport Event from \"rx.mini\";\nimport { setTimeout } from \"timers/promises\";\nimport * as uuid from \"uuid\";\n\nimport {\n  bufferWriter,\n  random16,\n  uint16Add,\n  uint32Add,\n} from \"../../../common/src\";\nimport {\n  Extension,\n  GenericNack,\n  PictureLossIndication,\n  ReceiverEstimatedMaxBitrate,\n  RedEncoder,\n  RtcpPacket,\n  RtcpPayloadSpecificFeedback,\n  RtcpRrPacket,\n  RtcpSenderInfo,\n  RtcpSourceDescriptionPacket,\n  RtcpSrPacket,\n  RtcpTransportLayerFeedback,\n  RtpHeader,\n  RtpPacket,\n  SourceDescriptionChunk,\n  SourceDescriptionItem,\n  TransportWideCC,\n} from \"../../../rtp/src\";\nimport { codecParametersFromString } from \"..\";\nimport { RTCDtlsTransport } from \"../transport/dtls\";\nimport { Kind } from \"../types/domain\";\nimport { compactNtp, milliTime, ntpTime, timestampSeconds } from \"../utils\";\nimport { RTP_EXTENSION_URI } from \"./extension/rtpExtension\";\nimport {\n  RTCRtpCodecParameters,\n  RTCRtpHeaderExtensionParameters,\n  RTCRtpSendParameters,\n} from \"./parameters\";\nimport { SenderBandwidthEstimator, SentInfo } from \"./sender/senderBWE\";\nimport { MediaStreamTrack } from \"./track\";\n\nconst log = debug(\"werift:packages/webrtc/src/media/rtpSender.ts\");\n\nconst RTP_HISTORY_SIZE = 128;\nconst RTT_ALPHA = 0.85;\n\nexport class RTCRtpSender {\n  readonly type = \"sender\";\n  readonly kind: Kind;\n  readonly ssrc = jspack.Unpack(\"!L\", randomBytes(4))[0];\n  readonly rtxSsrc = jspack.Unpack(\"!L\", randomBytes(4))[0];\n  streamId = uuid.v4();\n  readonly trackId = uuid.v4();\n  readonly onReady = new Event();\n  readonly onRtcp = new Event<[RtcpPacket]>();\n  readonly onPictureLossIndication = new Event<[]>();\n  readonly onGenericNack = new Event<[GenericNack]>();\n  readonly senderBWE = new SenderBandwidthEstimator();\n\n  private cname?: string;\n  private mid?: string;\n  private rtpStreamId?: string;\n  private repairedRtpStreamId?: string;\n  private rtxPayloadType?: number;\n  private rtxSequenceNumber = random16();\n  redRedundantPayloadType?: number;\n  private _redDistance = 2;\n  redEncoder = new RedEncoder(this._redDistance);\n  private headerExtensions: RTCRtpHeaderExtensionParameters[] = [];\n  private disposeTrack?: () => void;\n\n  // # stats\n  private lastSRtimestamp?: number;\n  private lastSentSRTimestamp?: number;\n  private ntpTimestamp = 0n;\n  private rtpTimestamp = 0;\n  private octetCount = 0;\n  private packetCount = 0;\n  private rtt?: number;\n  receiverEstimatedMaxBitrate: bigint = 0n;\n\n  // rtp\n  private sequenceNumber?: number;\n  private timestamp?: number;\n  private timestampOffset = 0;\n  private seqOffset = 0;\n  private rtpCache: RtpPacket[] = [];\n  codec?: RTCRtpCodecParameters;\n  public dtlsTransport!: RTCDtlsTransport;\n  private dtlsDisposer: (() => void)[] = [];\n\n  track?: MediaStreamTrack;\n  stopped = false;\n  rtcpRunning = false;\n  private rtcpCancel = new AbortController();\n\n  constructor(public trackOrKind: Kind | MediaStreamTrack) {\n    this.kind =\n      typeof this.trackOrKind === \"string\"\n        ? this.trackOrKind\n        : this.trackOrKind.kind;\n    if (trackOrKind instanceof MediaStreamTrack) {\n      if (trackOrKind.streamId) {\n        this.streamId = trackOrKind.streamId;\n      }\n      this.registerTrack(trackOrKind);\n    }\n  }\n\n  setDtlsTransport(dtlsTransport: RTCDtlsTransport) {\n    if (this.dtlsTransport) {\n      this.dtlsDisposer.forEach((dispose) => dispose());\n    }\n\n    this.dtlsTransport = dtlsTransport;\n    this.dtlsDisposer = [\n      this.dtlsTransport.onStateChange.subscribe((state) => {\n        if (state === \"connected\") {\n          this.onReady.execute();\n        }\n      }).unSubscribe,\n    ];\n  }\n\n  get redDistance() {\n    return this._redDistance;\n  }\n  set redDistance(n: number) {\n    this._redDistance = n;\n    this.redEncoder.distance = n;\n  }\n\n  prepareSend(params: RTCRtpSendParameters) {\n    this.cname = params.rtcp?.cname;\n    this.mid = params.muxId;\n    this.headerExtensions = params.headerExtensions;\n    this.rtpStreamId = params.rtpStreamId;\n    this.repairedRtpStreamId = params.repairedRtpStreamId;\n\n    this.codec = params.codecs[0];\n    if (this.track) {\n      this.track.codec = this.codec;\n    }\n\n    params.codecs.forEach((codec) => {\n      const codecParams = codecParametersFromString(codec.parameters ?? \"\");\n      if (\n        codec.name.toLowerCase() === \"rtx\" &&\n        codecParams[\"apt\"] === this.codec?.payloadType\n      ) {\n        this.rtxPayloadType = codec.payloadType;\n      }\n      if (codec.name.toLowerCase() === \"red\") {\n        this.redRedundantPayloadType = Number(\n          (codec.parameters ?? \"\").split(\"/\")[0]\n        );\n      }\n    });\n  }\n\n  registerTrack(track: MediaStreamTrack) {\n    if (track.stopped) throw new Error(\"track is ended\");\n\n    if (this.disposeTrack) {\n      this.disposeTrack();\n    }\n\n    track.id = this.trackId;\n\n    const { unSubscribe } = track.onReceiveRtp.subscribe(async (rtp) => {\n      await this.sendRtp(rtp);\n    });\n    this.track = track;\n    this.disposeTrack = unSubscribe;\n\n    if (this.codec) {\n      track.codec = this.codec;\n    }\n\n    track.onSourceChanged.subscribe((header) => {\n      this.replaceRTP(header);\n    });\n  }\n\n  async replaceTrack(track: MediaStreamTrack | null) {\n    if (track === null) {\n      // todo impl\n      return;\n    }\n\n    if (track.stopped) throw new Error(\"track is ended\");\n\n    if (this.sequenceNumber != undefined) {\n      const header =\n        track.header || (await track.onReceiveRtp.asPromise())[0].header;\n\n      this.replaceRTP(header);\n    }\n\n    this.registerTrack(track);\n    log(\"replaceTrack\", \"ssrc\", track.ssrc, \"rid\", track.rid);\n  }\n\n  stop() {\n    this.stopped = true;\n    this.rtcpRunning = false;\n    this.rtcpCancel.abort();\n    if (this.disposeTrack) {\n      this.disposeTrack();\n    }\n    this.track = undefined;\n  }\n\n  async runRtcp() {\n    if (this.rtcpRunning || this.stopped) return;\n    this.rtcpRunning = true;\n\n    try {\n      while (this.rtcpRunning) {\n        await setTimeout(500 + Math.random() * 1000, undefined, {\n          signal: this.rtcpCancel.signal,\n        });\n\n        const packets: RtcpPacket[] = [\n          new RtcpSrPacket({\n            ssrc: this.ssrc,\n            senderInfo: new RtcpSenderInfo({\n              ntpTimestamp: this.ntpTimestamp,\n              rtpTimestamp: this.rtpTimestamp,\n              packetCount: this.packetCount,\n              octetCount: this.octetCount,\n            }),\n          }),\n        ];\n        this.lastSRtimestamp = compactNtp(this.ntpTimestamp);\n        this.lastSentSRTimestamp = timestampSeconds();\n\n        if (this.cname) {\n          packets.push(\n            new RtcpSourceDescriptionPacket({\n              chunks: [\n                new SourceDescriptionChunk({\n                  source: this.ssrc,\n                  items: [\n                    new SourceDescriptionItem({ type: 1, text: this.cname }),\n                  ],\n                }),\n              ],\n            })\n          );\n        }\n\n        try {\n          await this.dtlsTransport.sendRtcp(packets);\n        } catch (error) {\n          log(\"sendRtcp failed\", error);\n          await setTimeout(500 + Math.random() * 1000);\n        }\n      }\n    } catch (error) {}\n  }\n\n  replaceRTP(\n    {\n      sequenceNumber,\n      timestamp,\n    }: Pick<RtpHeader, \"sequenceNumber\" | \"timestamp\">,\n    discontinuity = false\n  ) {\n    if (this.sequenceNumber != undefined) {\n      this.seqOffset = uint16Add(this.sequenceNumber, -sequenceNumber);\n      if (discontinuity) {\n        this.seqOffset = uint16Add(this.seqOffset, 2);\n      }\n    }\n    if (this.timestamp != undefined) {\n      this.timestampOffset = uint32Add(this.timestamp, -timestamp);\n      if (discontinuity) {\n        this.timestampOffset = uint16Add(this.timestampOffset, 1);\n      }\n    }\n    this.rtpCache = [];\n    log(\"replaceRTP\", this.sequenceNumber, sequenceNumber, this.seqOffset);\n  }\n\n  async sendRtp(rtp: Buffer | RtpPacket) {\n    if (this.dtlsTransport.state !== \"connected\" || !this.codec) {\n      return;\n    }\n\n    rtp = Buffer.isBuffer(rtp) ? RtpPacket.deSerialize(rtp) : rtp;\n\n    const { header, payload } = rtp;\n    header.ssrc = this.ssrc;\n    header.payloadType = this.codec.payloadType;\n    header.timestamp = uint32Add(header.timestamp, this.timestampOffset);\n    header.sequenceNumber = uint16Add(header.sequenceNumber, this.seqOffset);\n    this.timestamp = header.timestamp;\n    this.sequenceNumber = header.sequenceNumber;\n\n    const ntptime = ntpTime();\n\n    header.extensions = this.headerExtensions\n      .map((extension) => {\n        const payload = (() => {\n          switch (extension.uri) {\n            case RTP_EXTENSION_URI.sdesMid:\n              if (this.mid) {\n                return Buffer.from(this.mid);\n              }\n              return;\n            // todo : sender simulcast unsupported now\n            case RTP_EXTENSION_URI.sdesRTPStreamID:\n              if (this.rtpStreamId) {\n                return Buffer.from(this.rtpStreamId);\n              }\n              return;\n            // todo : sender simulcast unsupported now\n            case RTP_EXTENSION_URI.repairedRtpStreamId:\n              if (this.repairedRtpStreamId) {\n                return Buffer.from(this.repairedRtpStreamId);\n              }\n              return;\n            case RTP_EXTENSION_URI.transportWideCC:\n              this.dtlsTransport.transportSequenceNumber = uint16Add(\n                this.dtlsTransport.transportSequenceNumber,\n                1\n              );\n              return bufferWriter(\n                [2],\n                [this.dtlsTransport.transportSequenceNumber]\n              );\n            case RTP_EXTENSION_URI.absSendTime:\n              const buf = Buffer.alloc(3);\n              const time = (ntptime >> 14n) & 0x00ffffffn;\n              buf.writeUIntBE(Number(time), 0, 3);\n              return buf;\n          }\n        })();\n\n        if (payload) return { id: extension.id, payload };\n      })\n      .filter((v) => v) as Extension[];\n\n    this.ntpTimestamp = ntptime;\n    this.rtpTimestamp = header.timestamp;\n    this.octetCount += payload.length;\n    this.packetCount = uint32Add(this.packetCount, 1);\n\n    this.rtpCache[header.sequenceNumber % RTP_HISTORY_SIZE] = rtp;\n\n    let rtpPayload = payload;\n\n    if (this.redRedundantPayloadType) {\n      this.redEncoder.push({\n        block: rtpPayload,\n        timestamp: header.timestamp,\n        blockPT: this.redRedundantPayloadType,\n      });\n      const red = this.redEncoder.build();\n      rtpPayload = red.serialize();\n    }\n\n    const size = await this.dtlsTransport.sendRtp(rtpPayload, header);\n\n    this.runRtcp();\n    const millitime = milliTime();\n    const sentInfo: SentInfo = {\n      wideSeq: this.dtlsTransport.transportSequenceNumber,\n      size,\n      sendingAtMs: millitime,\n      sentAtMs: millitime,\n    };\n    this.senderBWE.rtpPacketSent(sentInfo);\n  }\n\n  handleRtcpPacket(rtcpPacket: RtcpPacket) {\n    switch (rtcpPacket.type) {\n      case RtcpSrPacket.type:\n      case RtcpRrPacket.type:\n        {\n          const packet = rtcpPacket as RtcpSrPacket | RtcpRrPacket;\n          packet.reports\n            .filter((report) => report.ssrc === this.ssrc)\n            .forEach((report) => {\n              if (this.lastSRtimestamp === report.lsr && report.dlsr) {\n                if (this.lastSentSRTimestamp) {\n                  const rtt =\n                    timestampSeconds() -\n                    this.lastSentSRTimestamp -\n                    report.dlsr / 65536;\n                  if (this.rtt === undefined) {\n                    this.rtt = rtt;\n                  } else {\n                    this.rtt = RTT_ALPHA * this.rtt + (1 - RTT_ALPHA) * rtt;\n                  }\n                }\n              }\n            });\n        }\n        break;\n      case RtcpTransportLayerFeedback.type:\n        {\n          const packet = rtcpPacket as RtcpTransportLayerFeedback;\n          switch (packet.feedback.count) {\n            case TransportWideCC.count:\n              {\n                const feedback = packet.feedback as TransportWideCC;\n                this.senderBWE.receiveTWCC(feedback);\n              }\n              break;\n            case GenericNack.count:\n              {\n                const feedback = packet.feedback as GenericNack;\n                feedback.lost.forEach(async (seqNum) => {\n                  let packet: RtpPacket | undefined =\n                    this.rtpCache[seqNum % RTP_HISTORY_SIZE];\n                  if (packet && packet.header.sequenceNumber !== seqNum) {\n                    packet = undefined;\n                  }\n                  if (packet) {\n                    if (this.rtxPayloadType != undefined) {\n                      packet = wrapRtx(\n                        packet,\n                        this.rtxPayloadType,\n                        this.rtxSequenceNumber,\n                        this.rtxSsrc\n                      );\n                      this.rtxSequenceNumber = uint16Add(\n                        this.rtxSequenceNumber,\n                        1\n                      );\n                    }\n                    await this.dtlsTransport.sendRtp(\n                      packet.payload,\n                      packet.header\n                    );\n                  }\n                });\n                this.onGenericNack.execute(feedback);\n              }\n              break;\n          }\n        }\n        break;\n      case RtcpPayloadSpecificFeedback.type:\n        {\n          const packet = rtcpPacket as RtcpPayloadSpecificFeedback;\n          switch (packet.feedback.count) {\n            case ReceiverEstimatedMaxBitrate.count:\n              {\n                const feedback = packet.feedback as ReceiverEstimatedMaxBitrate;\n                this.receiverEstimatedMaxBitrate = feedback.bitrate;\n              }\n              break;\n            case PictureLossIndication.count:\n              {\n                this.onPictureLossIndication.execute();\n              }\n              break;\n          }\n        }\n        break;\n    }\n    this.onRtcp.execute(rtcpPacket);\n  }\n}\n\nexport function wrapRtx(\n  packet: RtpPacket,\n  payloadType: number,\n  sequenceNumber: number,\n  ssrc: number\n) {\n  const rtx = new RtpPacket(\n    new RtpHeader({\n      payloadType,\n      marker: packet.header.marker,\n      sequenceNumber,\n      timestamp: packet.header.timestamp,\n      ssrc,\n      csrc: packet.header.csrc,\n      extensions: packet.header.extensions,\n    }),\n    Buffer.concat([\n      Buffer.from(jspack.Pack(\"!H\", [packet.header.sequenceNumber])),\n      packet.payload,\n    ])\n  );\n  return rtx;\n}\n","import Event from \"rx.mini\";\nimport * as uuid from \"uuid\";\n\nimport { RTCDtlsTransport } from \"..\";\nimport { SenderDirections } from \"../const\";\nimport { Kind } from \"../types/domain\";\nimport {\n  RTCRtpCodecParameters,\n  RTCRtpHeaderExtensionParameters,\n} from \"./parameters\";\nimport { RTCRtpReceiver } from \"./rtpReceiver\";\nimport { RTCRtpSender } from \"./rtpSender\";\nimport { MediaStreamTrack } from \"./track\";\n\nexport class RTCRtpTransceiver {\n  readonly id = uuid.v4();\n  readonly onTrack = new Event<[MediaStreamTrack, RTCRtpTransceiver]>();\n  mid?: string;\n  mLineIndex?: number;\n  /**should not be reused because it has been used for sending before. */\n  usedForSender = false;\n  private _currentDirection?: Direction;\n  offerDirection!: Direction;\n  _codecs: RTCRtpCodecParameters[] = [];\n  set codecs(codecs: RTCRtpCodecParameters[]) {\n    this._codecs = codecs;\n  }\n  get codecs() {\n    return this._codecs;\n  }\n  headerExtensions: RTCRtpHeaderExtensionParameters[] = [];\n  options: Partial<TransceiverOptions> = {};\n  stopping = false;\n  stopped = false;\n\n  constructor(\n    public readonly kind: Kind,\n    dtlsTransport: RTCDtlsTransport,\n    public receiver: RTCRtpReceiver,\n    public sender: RTCRtpSender,\n    /**RFC 8829 4.2.4.  direction the transceiver was initialized with */\n    private _direction: Direction\n  ) {\n    this.setDtlsTransport(dtlsTransport);\n  }\n\n  get dtlsTransport() {\n    return this.receiver.dtlsTransport;\n  }\n\n  /**RFC 8829 4.2.4. setDirectionに渡された最後の値を示します */\n  get direction() {\n    return this._direction;\n  }\n\n  setDirection(direction: Direction) {\n    this._direction = direction;\n    if (SenderDirections.includes(this._currentDirection ?? \"\")) {\n      this.usedForSender = true;\n    }\n  }\n\n  /**RFC 8829 4.2.5. last negotiated direction */\n  get currentDirection(): Direction | undefined {\n    return this._currentDirection;\n  }\n\n  setCurrentDirection(direction: Direction | undefined) {\n    this._currentDirection = direction;\n  }\n\n  setDtlsTransport(dtls: RTCDtlsTransport) {\n    this.receiver.setDtlsTransport(dtls);\n    this.sender.setDtlsTransport(dtls);\n  }\n\n  get msid() {\n    return `${this.sender.streamId} ${this.sender.trackId}`;\n  }\n\n  addTrack(track: MediaStreamTrack) {\n    const res = this.receiver.addTrack(track);\n    if (res) {\n      this.onTrack.execute(track, this);\n    }\n  }\n\n  // todo impl\n  // https://www.w3.org/TR/webrtc/#methods-8\n  stop() {\n    if (this.stopping) {\n      return;\n    }\n\n    // todo Stop sending and receiving with transceiver.\n\n    this.stopping = true;\n  }\n\n  getPayloadType(mimeType: string) {\n    return this.codecs.find((codec) =>\n      codec.mimeType.toLowerCase().includes(mimeType.toLowerCase())\n    )?.payloadType;\n  }\n}\n\nexport const Inactive = \"inactive\";\nexport const Sendonly = \"sendonly\";\nexport const Recvonly = \"recvonly\";\nexport const Sendrecv = \"sendrecv\";\n\nexport const Directions = [Inactive, Sendonly, Recvonly, Sendrecv] as const;\n\nexport type Direction = typeof Directions[number];\n\ntype SimulcastDirection = \"send\" | \"recv\";\n\nexport interface TransceiverOptions {\n  direction: Direction;\n  simulcast: { direction: SimulcastDirection; rid: string }[];\n}\n","import { Int } from \"../../../../rtp/src/helper\";\n\n// refer by mediasoup\nexport class CumulativeResult {\n  numPackets = 0;\n  /**byte */\n  totalSize = 0;\n  firstPacketSentAtMs = 0;\n  lastPacketSentAtMs = 0;\n  firstPacketReceivedAtMs = 0;\n  lastPacketReceivedAtMs = 0;\n\n  /**\n   *\n   * @param size byte\n   * @param sentAtMs\n   * @param receivedAtMs\n   */\n  addPacket(size: number, sentAtMs: number, receivedAtMs: number) {\n    if (this.numPackets === 0) {\n      this.firstPacketSentAtMs = sentAtMs;\n      this.firstPacketReceivedAtMs = receivedAtMs;\n      this.lastPacketSentAtMs = sentAtMs;\n      this.lastPacketReceivedAtMs = receivedAtMs;\n    } else {\n      if (sentAtMs < this.firstPacketSentAtMs)\n        this.firstPacketSentAtMs = sentAtMs;\n      if (receivedAtMs < this.firstPacketReceivedAtMs)\n        this.firstPacketReceivedAtMs = receivedAtMs;\n      if (sentAtMs > this.lastPacketSentAtMs)\n        this.lastPacketSentAtMs = sentAtMs;\n      if (receivedAtMs > this.lastPacketReceivedAtMs)\n        this.lastPacketReceivedAtMs = receivedAtMs;\n    }\n\n    this.numPackets++;\n    this.totalSize += size;\n  }\n\n  reset() {\n    this.numPackets = 0;\n    this.totalSize = 0;\n    this.firstPacketSentAtMs = 0;\n    this.lastPacketSentAtMs = 0;\n    this.firstPacketReceivedAtMs = 0;\n    this.lastPacketReceivedAtMs = 0;\n  }\n\n  get receiveBitrate() {\n    const recvIntervalMs =\n      this.lastPacketReceivedAtMs - this.firstPacketReceivedAtMs;\n    const bitrate = (this.totalSize / recvIntervalMs) * 8 * 1000;\n    return Int(bitrate);\n  }\n\n  get sendBitrate() {\n    const sendIntervalMs = this.lastPacketSentAtMs - this.firstPacketSentAtMs;\n    const bitrate = (this.totalSize / sendIntervalMs) * 8 * 1000;\n    return Int(bitrate);\n  }\n}\n","import Event from \"rx.mini\";\n\nimport { TransportWideCC } from \"../../../../rtp/src\";\nimport { Int } from \"../../../../rtp/src/helper\";\nimport { milliTime } from \"../../utils\";\nimport { CumulativeResult } from \"./cumulativeResult\";\n\nconst COUNTER_MAX = 20;\nconst SCORE_MAX = 10;\n\nexport class SenderBandwidthEstimator {\n  congestion = false;\n\n  readonly onAvailableBitrate = new Event<[number]>();\n  /**congestion occur or not */\n  readonly onCongestion = new Event<[boolean]>();\n  readonly onCongestionScore = new Event<[number]>();\n\n  private congestionCounter = 0;\n  private cumulativeResult = new CumulativeResult();\n  private sentInfos: { [key: number]: SentInfo } = {};\n  private _congestionScore = 1;\n  /**1~10 big is worth*/\n  get congestionScore() {\n    return this._congestionScore;\n  }\n  set congestionScore(v: number) {\n    this._congestionScore = v;\n    this.onCongestionScore.execute(v);\n  }\n  private _availableBitrate: number = 0;\n  get availableBitrate() {\n    return this._availableBitrate;\n  }\n  set availableBitrate(v: number) {\n    this._availableBitrate = v;\n    this.onAvailableBitrate.execute(v);\n  }\n\n  constructor() {}\n\n  receiveTWCC(feedback: TransportWideCC) {\n    const nowMs = milliTime();\n    const elapsedMs = nowMs - this.cumulativeResult.firstPacketSentAtMs;\n    if (elapsedMs > 1000) {\n      this.cumulativeResult.reset();\n\n      // Congestion may be occurring.\n\n      if (this.congestionCounter < COUNTER_MAX) {\n        this.congestionCounter++;\n      } else if (this.congestionScore < SCORE_MAX) {\n        this.congestionScore++;\n      }\n\n      if (this.congestionCounter >= COUNTER_MAX && !this.congestion) {\n        this.congestion = true;\n        this.onCongestion.execute(this.congestion);\n      }\n    }\n\n    for (const result of feedback.packetResults) {\n      if (!result.received) continue;\n\n      const wideSeq = result.sequenceNumber;\n      const info = this.sentInfos[wideSeq];\n      if (!info) continue;\n      if (!result.receivedAtMs) continue;\n\n      this.cumulativeResult.addPacket(\n        info.size,\n        info.sendingAtMs,\n        result.receivedAtMs\n      );\n    }\n\n    if (elapsedMs >= 100 && this.cumulativeResult.numPackets >= 20) {\n      this.availableBitrate = Math.min(\n        this.cumulativeResult.sendBitrate,\n        this.cumulativeResult.receiveBitrate\n      );\n      this.cumulativeResult.reset();\n\n      if (this.congestionCounter > -COUNTER_MAX) {\n        const maxBonus = Int(COUNTER_MAX / 2) + 1;\n        const minBonus = Int(COUNTER_MAX / 4) + 1;\n        const bonus =\n          maxBonus - ((maxBonus - minBonus) / 10) * this.congestionScore;\n\n        this.congestionCounter = this.congestionCounter - bonus;\n      }\n\n      if (this.congestionCounter <= -COUNTER_MAX) {\n        if (this.congestionScore > 1) {\n          this.congestionScore--;\n          this.onCongestion.execute(false);\n        }\n        this.congestionCounter = 0;\n      }\n\n      if (this.congestionCounter <= 0 && this.congestion) {\n        this.congestion = false;\n        this.onCongestion.execute(this.congestion);\n      }\n    }\n  }\n\n  rtpPacketSent(sentInfo: SentInfo) {\n    Object.keys(sentInfo)\n      .map((v) => Number(v))\n      .sort()\n      .filter((seq) => seq < sentInfo.wideSeq)\n      .forEach((seq) => {\n        delete this.sentInfos[seq];\n      });\n    this.sentInfos[sentInfo.wideSeq] = sentInfo;\n  }\n}\n\nexport interface SentInfo {\n  wideSeq: number;\n  /**\n   * byte\n   */\n  size: number;\n  isProbation?: boolean;\n  sendingAtMs: number;\n  sentAtMs: number;\n}\n","import Event from \"rx.mini\";\nimport { v4 } from \"uuid\";\n\nimport { RtcpPacket, RtpHeader, RtpPacket } from \"../../../rtp/src\";\nimport { EventTarget } from \"../helper\";\nimport { Kind } from \"../types/domain\";\nimport { RTCRtpCodecParameters } from \"./parameters\";\n\nexport class MediaStreamTrack extends EventTarget {\n  readonly uuid = v4();\n  /**MediaStream ID*/\n  streamId?: string;\n  remote = false;\n  label: string;\n  kind!: Kind;\n  id?: string;\n  /**mediaSsrc */\n  ssrc?: number;\n  rid?: string;\n  header?: RtpHeader;\n  codec?: RTCRtpCodecParameters;\n  /**todo impl */\n  enabled = true;\n\n  readonly onReceiveRtp = new Event<[RtpPacket]>();\n  readonly onReceiveRtcp = new Event<[RtcpPacket]>();\n  readonly onSourceChanged = new Event<\n    [Pick<RtpHeader, \"sequenceNumber\" | \"timestamp\">]\n  >();\n\n  stopped = false;\n  muted = true;\n\n  constructor(\n    props: Partial<MediaStreamTrack> & Pick<MediaStreamTrack, \"kind\">\n  ) {\n    super();\n    Object.assign(this, props);\n\n    this.onReceiveRtp.subscribe((rtp) => {\n      this.muted = false;\n      this.header = rtp.header;\n    });\n\n    this.label = `${this.remote ? \"remote\" : \"local\"} ${this.kind}`;\n  }\n\n  stop = () => {\n    this.stopped = true;\n    this.muted = true;\n    this.onReceiveRtp.complete();\n  };\n\n  writeRtp = (rtp: RtpPacket | Buffer) => {\n    if (this.remote) {\n      throw new Error(\"this is remoteTrack\");\n    }\n    if (this.stopped) {\n      return;\n    }\n\n    const packet = Buffer.isBuffer(rtp) ? RtpPacket.deSerialize(rtp) : rtp;\n    packet.header.payloadType =\n      this.codec?.payloadType ?? packet.header.payloadType;\n    this.onReceiveRtp.execute(packet);\n  };\n}\n\nexport class MediaStream {\n  id!: string;\n  tracks: MediaStreamTrack[] = [];\n\n  constructor(props: Partial<MediaStream> & Pick<MediaStream, \"id\">) {\n    Object.assign(this, props);\n  }\n\n  addTrack(track: MediaStreamTrack) {\n    track.streamId = this.id;\n    this.tracks.push(track);\n  }\n\n  getTracks() {\n    return this.tracks;\n  }\n}\n","import Event from \"rx.mini\";\n\nimport { MediaStreamTrack } from \"../../media/track\";\nimport { MediaWriter } from \"./writer\";\nimport { WebmFactory } from \"./writer/webm\";\n\nexport class MediaRecorder {\n  writer: MediaWriter;\n  ext: string;\n  tracks: MediaStreamTrack[] = [];\n  started = false;\n  onError = new Event<[Error]>();\n\n  constructor(\n    public path: string,\n    public numOfTracks = 1,\n    public options: Partial<MediaRecorderOptions> = {}\n  ) {\n    this.ext = path.split(\".\").slice(-1)[0];\n    this.writer = (() => {\n      switch (this.ext) {\n        case \"webm\":\n          return new WebmFactory(path, options);\n        default:\n          throw new Error();\n      }\n    })();\n\n    this.tracks = options.tracks ?? this.tracks;\n    if (this.tracks.length === numOfTracks) {\n      this.start().catch((error) => {\n        this.onError.execute(error);\n      });\n    }\n  }\n\n  async addTrack(track: MediaStreamTrack) {\n    this.tracks.push(track);\n    await this.start();\n  }\n\n  private async start() {\n    if (this.tracks.length === this.numOfTracks && this.started === false) {\n      this.started = true;\n      await this.writer.start(this.tracks);\n    }\n  }\n\n  async stop() {\n    await this.writer.stop();\n  }\n}\n\nexport interface MediaRecorderOptions {\n  width: number;\n  height: number;\n  jitterBufferLatency: number;\n  jitterBufferSize: number;\n  waitForKeyframe: boolean;\n  defaultDuration: number;\n  tracks: MediaStreamTrack[];\n}\n","import { MediaStreamTrack } from \"../../..\";\nimport { MediaRecorderOptions } from \"..\";\n\nexport abstract class MediaWriter {\n  constructor(\n    protected path: string,\n    protected options: Partial<MediaRecorderOptions>\n  ) {}\n\n  async start(tracks: MediaStreamTrack[]) {}\n\n  async stop() {}\n}\n","import { unlink } from \"fs/promises\";\nimport { EventDisposer } from \"rx.mini\";\n\nimport { SupportedCodec } from \"../../../../../rtp/src/container/webm\";\nimport {\n  DepacketizeCallback,\n  JitterBufferCallback,\n  LipsyncCallback,\n  MediaStreamTrack,\n  NtpTimeCallback,\n  RtcpSourceCallback,\n  RtpSourceCallback,\n  saveToFileSystem,\n  WebmCallback,\n  WeriftError,\n} from \"../../..\";\nimport { MediaWriter } from \".\";\n\nconst sourcePath = \"packages/webrtc/src/nonstandard/recorder/writer/webm.ts\";\n\nexport class WebmFactory extends MediaWriter {\n  rtpSources: RtpSourceCallback[] = [];\n\n  unSubscribers = new EventDisposer();\n\n  async start(tracks: MediaStreamTrack[]) {\n    await unlink(this.path).catch((e) => e);\n\n    const inputTracks = tracks.map((track, i) => {\n      const trackNumber = i + 1;\n      const payloadType = track.codec!.payloadType;\n\n      if (track.kind === \"video\") {\n        const codec = ((): SupportedCodec => {\n          switch (track.codec?.name.toLowerCase() as SupportedVideoCodec) {\n            case \"vp8\":\n              return \"VP8\";\n            case \"vp9\":\n              return \"VP9\";\n            case \"h264\":\n              return \"MPEG4/ISO/AVC\";\n            case \"av1x\":\n              return \"AV1\";\n            default:\n              throw new WeriftError({\n                message: \"unsupported codec\",\n                payload: { track, path: sourcePath },\n              });\n          }\n        })();\n        return {\n          kind: \"video\" as const,\n          codec,\n          clockRate: 90000,\n          trackNumber,\n          width: this.options.width,\n          height: this.options.height,\n          payloadType,\n          track,\n        };\n      } else {\n        return {\n          kind: \"audio\" as const,\n          codec: \"OPUS\" as const,\n          clockRate: 48000,\n          trackNumber,\n          payloadType,\n          track,\n        };\n      }\n    });\n\n    const webm = new WebmCallback(inputTracks, {\n      duration: this.options.defaultDuration ?? 1000 * 60 * 60 * 24,\n    });\n    const lipsync = new LipsyncCallback();\n\n    this.rtpSources = inputTracks.map(({ track, clockRate, codec }) => {\n      const rtpSource = new RtpSourceCallback();\n      const rtcpSource = new RtcpSourceCallback();\n      track.onReceiveRtp\n        .subscribe((rtp) => {\n          rtpSource.input(rtp.clone());\n        })\n        .disposer(this.unSubscribers);\n      track.onReceiveRtcp\n        .subscribe((rtcp) => {\n          rtcpSource.input(rtcp);\n        })\n        .disposer(this.unSubscribers);\n      const ntpTime = new NtpTimeCallback(clockRate);\n\n      if (track.kind === \"video\") {\n        const depacketizer = new DepacketizeCallback(codec, {\n          isFinalPacketInSequence: (h) => h.marker,\n        });\n        const jitterBuffer = new JitterBufferCallback(clockRate);\n\n        rtpSource.pipe(jitterBuffer.input);\n        rtcpSource.pipe(ntpTime.input);\n\n        jitterBuffer.pipe(ntpTime.input);\n        ntpTime.pipe(depacketizer.input);\n        depacketizer.pipe(lipsync.inputVideo);\n        lipsync.pipeVideo(webm.inputVideo);\n      } else {\n        const depacketizer = new DepacketizeCallback(codec);\n\n        rtpSource.pipe(ntpTime.input);\n        rtcpSource.pipe(ntpTime.input);\n\n        ntpTime.pipe(depacketizer.input);\n        depacketizer.pipe(lipsync.inputAudio);\n        lipsync.pipeAudio(webm.inputAudio);\n      }\n\n      return rtpSource;\n    });\n    webm.pipe(saveToFileSystem(this.path));\n  }\n\n  async stop() {\n    await Promise.all(this.rtpSources.map((r) => r.stop()));\n    this.unSubscribers.dispose();\n  }\n}\n\nconst supportedVideoCodecs = [\"h264\", \"vp8\", \"vp9\", \"av1x\"] as const;\ntype SupportedVideoCodec = typeof supportedVideoCodecs[number];\n","import { ChildProcess, exec } from \"child_process\";\nimport { createSocket } from \"dgram\";\nimport { setImmediate } from \"timers/promises\";\nimport { v4 } from \"uuid\";\n\nimport { randomPort, uint32Add } from \"../../../common/src\";\nimport { RtpPacket } from \"../../../rtp/src\";\nimport { MediaStreamTrack } from \"../media/track\";\n\nexport const getUserMedia = async (path: string, loop?: boolean) => {\n  const audioPort = await randomPort();\n  const videoPort = await randomPort();\n\n  if (path.endsWith(\".mp4\")) {\n    return new MediaPlayerMp4(audioPort, videoPort, path, loop);\n  } else {\n    return new MediaPlayerWebm(audioPort, videoPort, path, loop);\n  }\n};\n\nexport class MediaPlayerMp4 {\n  private streamId = v4();\n  audio = new MediaStreamTrack({ kind: \"audio\", streamId: this.streamId });\n  video = new MediaStreamTrack({ kind: \"video\", streamId: this.streamId });\n  private process!: ChildProcess;\n  stopped = false;\n\n  constructor(\n    private videoPort: number,\n    private audioPort: number,\n    private path: string,\n    private loop?: boolean\n  ) {\n    this.setupTrack(audioPort, this.audio);\n    this.setupTrack(videoPort, this.video);\n  }\n\n  private setupTrack = (port: number, track: MediaStreamTrack) => {\n    let payloadType = 0;\n\n    const socket = createSocket(\"udp4\");\n    socket.bind(port);\n    socket.on(\"message\", async (buf) => {\n      const rtp = RtpPacket.deSerialize(buf);\n      if (!payloadType) {\n        payloadType = rtp.header.payloadType;\n      }\n\n      // detect gStreamer restarted\n      if (payloadType !== rtp.header.payloadType) {\n        payloadType = rtp.header.payloadType;\n        track.onSourceChanged.execute(rtp.header);\n      }\n\n      track.writeRtp(buf);\n    });\n  };\n\n  async start() {\n    let payloadType = 96;\n    const run = async () => {\n      if (payloadType > 100) payloadType = 96;\n\n      const cmd = `gst-launch-1.0 filesrc location= ${this.path} ! \\\nqtdemux name=d ! \\\nqueue ! h264parse ! rtph264pay config-interval=10 pt=${payloadType++} ! \\\nudpsink host=127.0.0.1 port=${this.videoPort} d. ! \\\nqueue ! aacparse ! avdec_aac ! audioresample ! audioconvert ! opusenc ! rtpopuspay pt=${payloadType++} ! \\\nudpsink host=127.0.0.1 port=${this.audioPort}`;\n      this.process = exec(cmd);\n\n      if (this.loop) {\n        await new Promise((r) => this.process.on(\"close\", r));\n        if (!this.stopped) {\n          run();\n        }\n      }\n    };\n    await setImmediate();\n    run();\n  }\n\n  stop() {\n    this.stopped = true;\n    this.process.kill(\"SIGINT\");\n  }\n}\n\nexport class MediaPlayerWebm {\n  private streamId = v4();\n  audio = new MediaStreamTrack({ kind: \"audio\", streamId: this.streamId });\n  video = new MediaStreamTrack({ kind: \"video\", streamId: this.streamId });\n  private process!: ChildProcess;\n  stopped = false;\n\n  constructor(\n    private videoPort: number,\n    private audioPort: number,\n    private path: string,\n    private loop?: boolean\n  ) {\n    this.setupTrack(audioPort, this.audio);\n    this.setupTrack(videoPort, this.video);\n  }\n\n  private setupTrack = (port: number, track: MediaStreamTrack) => {\n    let payloadType = 0;\n    let latestTimestamp = 0;\n    let timestampDiff = 0;\n\n    const socket = createSocket(\"udp4\");\n    socket.bind(port);\n    socket.on(\"message\", async (buf) => {\n      const rtp = RtpPacket.deSerialize(buf);\n      if (!payloadType) {\n        payloadType = rtp.header.payloadType;\n      }\n\n      // detect gStreamer restarted\n      if (payloadType !== rtp.header.payloadType) {\n        payloadType = rtp.header.payloadType;\n        track.onSourceChanged.execute(rtp.header);\n        timestampDiff = uint32Add(rtp.header.timestamp, -latestTimestamp);\n        console.log({ timestampDiff });\n      }\n      latestTimestamp = rtp.header.timestamp;\n      rtp.header.timestamp = uint32Add(rtp.header.timestamp, -timestampDiff);\n      track.writeRtp(rtp.serialize());\n    });\n  };\n\n  async start() {\n    let payloadType = 96;\n    const run = async () => {\n      if (payloadType > 100) payloadType = 96;\n\n      const cmd = `gst-launch-1.0 filesrc location=${\n        this.path\n      } ! matroskademux name=d \\\nd.video_0 ! queue ! rtpvp8pay pt=${payloadType++} ! \\\nudpsink host=127.0.0.1 port=${this.videoPort} \\\nd.audio_0 ! queue ! rtpopuspay pt=${payloadType++} ! \\\nudpsink host=127.0.0.1 port=${this.audioPort}`;\n      this.process = exec(cmd);\n      console.log(cmd);\n\n      if (this.loop) {\n        await new Promise((r) => this.process.on(\"close\", r));\n        if (!this.stopped) {\n          run();\n        }\n      }\n    };\n    await setImmediate();\n    run();\n  }\n\n  stop() {\n    this.stopped = true;\n    this.process.kill(\"SIGINT\");\n  }\n}\n","import debug from \"debug\";\nimport cloneDeep from \"lodash/cloneDeep\";\nimport isEqual from \"lodash/isEqual\";\nimport Event from \"rx.mini\";\nimport * as uuid from \"uuid\";\n\nimport { Profile } from \"../../dtls/src/context/srtp\";\nimport { Message } from \"../../ice/src/stun/message\";\nimport { Protocol } from \"../../ice/src/types/model\";\nimport {\n  Address,\n  deepMerge,\n  InterfaceAddresses,\n  Recvonly,\n  Sendonly,\n  Sendrecv,\n} from \".\";\nimport {\n  codecParametersFromString,\n  DtlsKeys,\n  useNACK,\n  usePLI,\n  useREMB,\n} from \".\";\nimport {\n  DISCARD_HOST,\n  DISCARD_PORT,\n  ReceiverDirection,\n  SenderDirections,\n  SRTP_PROFILE,\n} from \"./const\";\nimport { RTCDataChannel, RTCDataChannelParameters } from \"./dataChannel\";\nimport { enumerate, EventTarget } from \"./helper\";\nimport {\n  RTCRtpCodecParameters,\n  RTCRtpCodingParameters,\n  RTCRtpHeaderExtensionParameters,\n  RTCRtpParameters,\n  RTCRtpReceiveParameters,\n  RTCRtpRtxParameters,\n  RTCRtpSimulcastParameters,\n} from \"./media/parameters\";\nimport { RtpRouter } from \"./media/router\";\nimport { RTCRtpReceiver } from \"./media/rtpReceiver\";\nimport { RTCRtpSender } from \"./media/rtpSender\";\nimport {\n  Direction,\n  RTCRtpTransceiver,\n  TransceiverOptions,\n} from \"./media/rtpTransceiver\";\nimport { MediaStream, MediaStreamTrack } from \"./media/track\";\nimport {\n  addSDPHeader,\n  GroupDescription,\n  MediaDescription,\n  SessionDescription,\n  SsrcDescription,\n} from \"./sdp\";\nimport { RTCCertificate, RTCDtlsTransport } from \"./transport/dtls\";\nimport {\n  IceCandidate,\n  IceGathererState,\n  RTCIceCandidate,\n  RTCIceConnectionState,\n  RTCIceGatherer,\n  RTCIceTransport,\n} from \"./transport/ice\";\nimport { RTCSctpTransport } from \"./transport/sctp\";\nimport { ConnectionState, Kind, RTCSignalingState } from \"./types/domain\";\nimport { Callback, CallbackWithValue } from \"./types/util\";\nimport {\n  andDirection,\n  parseIceServers,\n  reverseDirection,\n  reverseSimulcastDirection,\n} from \"./utils\";\n\nconst log = debug(\"werift:packages/webrtc/src/peerConnection.ts\");\n\nexport class RTCPeerConnection extends EventTarget {\n  readonly cname = uuid.v4();\n  sctpTransport?: RTCSctpTransport;\n  transportEstablished = false;\n  config: Required<PeerConfig> = cloneDeep<PeerConfig>(defaultPeerConfig);\n  connectionState: ConnectionState = \"new\";\n  iceConnectionState: RTCIceConnectionState = \"new\";\n  iceGatheringState: IceGathererState = \"new\";\n  signalingState: RTCSignalingState = \"stable\";\n  negotiationneeded = false;\n  private readonly transceivers: RTCRtpTransceiver[] = [];\n  private pushTransceiver(t: RTCRtpTransceiver) {\n    this.transceivers.push(t);\n  }\n  private replaceTransceiver(t: RTCRtpTransceiver, index: number) {\n    this.transceivers[index] = t;\n  }\n\n  candidatesSent = new Set<string>();\n\n  readonly iceGatheringStateChange = new Event<[IceGathererState]>();\n  readonly iceConnectionStateChange = new Event<[RTCIceConnectionState]>();\n  readonly signalingStateChange = new Event<[RTCSignalingState]>();\n  readonly connectionStateChange = new Event<[ConnectionState]>();\n  readonly onDataChannel = new Event<[RTCDataChannel]>();\n  readonly onRemoteTransceiverAdded = new Event<[RTCRtpTransceiver]>();\n  readonly onTransceiverAdded = new Event<[RTCRtpTransceiver]>();\n  readonly onIceCandidate = new Event<[RTCIceCandidate]>();\n  readonly onNegotiationneeded = new Event<[]>();\n  readonly onTrack = new Event<[MediaStreamTrack]>();\n\n  ondatachannel?: CallbackWithValue<RTCDataChannelEvent>;\n  onicecandidate?: CallbackWithValue<RTCPeerConnectionIceEvent>;\n  onnegotiationneeded?: CallbackWithValue<any>;\n  onsignalingstatechange?: CallbackWithValue<any>;\n  ontrack?: CallbackWithValue<RTCTrackEvent>;\n  onconnectionstatechange?: Callback;\n\n  private readonly router = new RtpRouter();\n  private readonly certificates: RTCCertificate[] = [];\n  sctpRemotePort?: number;\n  private seenMid = new Set<string>();\n  private currentLocalDescription?: SessionDescription;\n  private currentRemoteDescription?: SessionDescription;\n  private pendingLocalDescription?: SessionDescription;\n  private pendingRemoteDescription?: SessionDescription;\n  private isClosed = false;\n  private shouldNegotiationneeded = false;\n\n  get dtlsTransports() {\n    const transports = this.transceivers.map((t) => t.dtlsTransport);\n    if (this.sctpTransport) {\n      transports.push(this.sctpTransport.dtlsTransport);\n    }\n    return transports.reduce((acc: RTCDtlsTransport[], cur) => {\n      if (!acc.map((d) => d.id).includes(cur.id)) {\n        acc.push(cur);\n      }\n      return acc;\n    }, []);\n  }\n  get iceTransports() {\n    return this.dtlsTransports.map((d) => d.iceTransport);\n  }\n\n  constructor(config: Partial<PeerConfig> = {}) {\n    super();\n\n    deepMerge(this.config, config);\n\n    if (this.config.icePortRange) {\n      const [min, max] = this.config.icePortRange;\n      if (min === max) throw new Error(\"should not be same value\");\n      if (min >= max) throw new Error(\"The min must be less than max\");\n    }\n\n    for (const [i, codecParams] of enumerate([\n      ...(this.config.codecs.audio || []),\n      ...(this.config.codecs.video || []),\n    ])) {\n      if (codecParams.payloadType != undefined) {\n        continue;\n      }\n\n      codecParams.payloadType = 96 + i;\n      switch (codecParams.name.toLowerCase()) {\n        case \"rtx\":\n          {\n            codecParams.parameters = `apt=${codecParams.payloadType - 1}`;\n          }\n          break;\n        case \"red\":\n          {\n            if (codecParams.contentType === \"audio\") {\n              const redundant = codecParams.payloadType + 1;\n              codecParams.parameters = `${redundant}/${redundant}`;\n              codecParams.payloadType = 63;\n            }\n          }\n          break;\n      }\n    }\n\n    [\n      ...(this.config.headerExtensions.audio || []),\n      ...(this.config.headerExtensions.video || []),\n    ].forEach((v, i) => {\n      v.id = 1 + i;\n    });\n\n    if (this.config.dtls) {\n      const { keys } = this.config.dtls;\n      if (keys) {\n        this.certificates.push(\n          new RTCCertificate(keys.keyPem, keys.certPem, keys.signatureHash)\n        );\n      }\n    }\n\n    this.iceConnectionStateChange.subscribe((state) => {\n      switch (state) {\n        case \"disconnected\":\n          this.setConnectionState(\"disconnected\");\n          break;\n        case \"closed\":\n          this.close();\n          break;\n      }\n    });\n  }\n\n  get localDescription() {\n    if (!this._localDescription) return;\n    return this._localDescription.toJSON();\n  }\n\n  get remoteDescription() {\n    if (!this._remoteDescription) return;\n    return this._remoteDescription.toJSON();\n  }\n\n  private get _localDescription() {\n    return this.pendingLocalDescription || this.currentLocalDescription;\n  }\n\n  private get _remoteDescription() {\n    return this.pendingRemoteDescription || this.currentRemoteDescription;\n  }\n\n  private getTransceiverByMid(mid: string) {\n    return this.transceivers.find((transceiver) => transceiver.mid === mid);\n  }\n\n  private getTransceiverByMLineIndex(index: number) {\n    return this.transceivers.find(\n      (transceiver) => transceiver.mLineIndex === index\n    );\n  }\n\n  async createOffer() {\n    await this.ensureCerts();\n    const description = this.buildOfferSdp();\n    return description.toJSON();\n  }\n\n  private assignTransceiverCodecs(transceiver: RTCRtpTransceiver) {\n    const codecs = (\n      this.config.codecs[transceiver.kind] as RTCRtpCodecParameters[]\n    ).filter((codecCandidate) => {\n      switch (codecCandidate.direction) {\n        case \"recvonly\": {\n          if (ReceiverDirection.includes(transceiver.direction)) return true;\n          return false;\n        }\n        case \"sendonly\": {\n          if (SenderDirections.includes(transceiver.direction)) return true;\n          return false;\n        }\n        case \"sendrecv\": {\n          if ([Sendrecv, Recvonly, Sendonly].includes(transceiver.direction))\n            return true;\n          return false;\n        }\n        case \"all\": {\n          return true;\n        }\n        default:\n          return false;\n      }\n    });\n    transceiver.codecs = codecs;\n  }\n\n  buildOfferSdp() {\n    this.transceivers.forEach((transceiver) => {\n      if (transceiver.codecs.length === 0) {\n        this.assignTransceiverCodecs(transceiver);\n      }\n      if (transceiver.headerExtensions.length === 0) {\n        transceiver.headerExtensions =\n          this.config.headerExtensions[transceiver.kind] ?? [];\n      }\n    });\n\n    const description = new SessionDescription();\n    addSDPHeader(\"offer\", description);\n\n    // # handle existing transceivers / sctp\n\n    const currentMedia = this._localDescription\n      ? this._localDescription.media\n      : [];\n\n    currentMedia.forEach((m, i) => {\n      const mid = m.rtp.muxId;\n      if (!mid) {\n        log(\"mid missing\", m);\n        return;\n      }\n      if (m.kind === \"application\") {\n        if (!this.sctpTransport) {\n          throw new Error(\"sctpTransport not found\");\n        }\n        this.sctpTransport.mLineIndex = i;\n        description.media.push(\n          createMediaDescriptionForSctp(this.sctpTransport)\n        );\n      } else {\n        const transceiver = this.getTransceiverByMid(mid);\n        if (!transceiver) {\n          if (m.direction === \"inactive\") {\n            description.media.push(m);\n            return;\n          }\n          throw new Error(\"transceiver not found\");\n        }\n        transceiver.mLineIndex = i;\n        description.media.push(\n          createMediaDescriptionForTransceiver(\n            transceiver,\n            this.cname,\n            transceiver.direction\n          )\n        );\n      }\n    });\n\n    // # handle new transceivers / sctp\n    this.transceivers\n      .filter((t) => !description.media.find((m) => m.rtp.muxId === t.mid))\n      .forEach((transceiver) => {\n        if (transceiver.mid == undefined) {\n          transceiver.mid = allocateMid(this.seenMid, \"av\");\n        }\n        const mediaDescription = createMediaDescriptionForTransceiver(\n          transceiver,\n          this.cname,\n          transceiver.direction\n        );\n        if (transceiver.mLineIndex === undefined) {\n          transceiver.mLineIndex = description.media.length;\n          description.media.push(mediaDescription);\n        } else {\n          description.media[transceiver.mLineIndex] = mediaDescription;\n        }\n      });\n\n    if (\n      this.sctpTransport &&\n      !description.media.find((m) => m.kind === \"application\")\n    ) {\n      this.sctpTransport.mLineIndex = description.media.length;\n      if (this.sctpTransport.mid == undefined) {\n        this.sctpTransport.mid = allocateMid(this.seenMid, \"dc\");\n      }\n      description.media.push(createMediaDescriptionForSctp(this.sctpTransport));\n    }\n\n    if (this.config.bundlePolicy !== \"disable\") {\n      const mids = description.media\n        .map((m) => (m.direction !== \"inactive\" ? m.rtp.muxId : undefined))\n        .filter((v) => v) as string[];\n      if (mids.length) {\n        const bundle = new GroupDescription(\"BUNDLE\", mids);\n        description.group.push(bundle);\n      }\n    }\n\n    return description;\n  }\n\n  createDataChannel(\n    label: string,\n    options: Partial<{\n      maxPacketLifeTime?: number;\n      protocol: string;\n      maxRetransmits?: number;\n      ordered: boolean;\n      negotiated: boolean;\n      id?: number;\n    }> = {}\n  ): RTCDataChannel {\n    const base: typeof options = {\n      protocol: \"\",\n      ordered: true,\n      negotiated: false,\n    };\n    const settings: Required<typeof base> = { ...base, ...options } as any;\n\n    if (settings.maxPacketLifeTime && settings.maxRetransmits) {\n      throw new Error(\"can not select both\");\n    }\n\n    if (!this.sctpTransport) {\n      this.sctpTransport = this.createSctpTransport();\n      this.needNegotiation();\n    }\n\n    const parameters = new RTCDataChannelParameters({\n      id: settings.id,\n      label,\n      maxPacketLifeTime: settings.maxPacketLifeTime,\n      maxRetransmits: settings.maxRetransmits,\n      negotiated: settings.negotiated,\n      ordered: settings.ordered,\n      protocol: settings.protocol,\n    });\n\n    const channel = new RTCDataChannel(this.sctpTransport, parameters);\n    return channel;\n  }\n\n  removeTrack(sender: RTCRtpSender) {\n    if (this.isClosed) throw new Error(\"peer closed\");\n    if (!this.getSenders().find(({ ssrc }) => sender.ssrc === ssrc)) {\n      throw new Error(\"unExist\");\n    }\n\n    const transceiver = this.transceivers.find(\n      ({ sender: { ssrc } }) => sender.ssrc === ssrc\n    );\n    if (!transceiver) throw new Error(\"unExist\");\n\n    sender.stop();\n\n    if (transceiver.currentDirection === \"recvonly\") {\n      this.needNegotiation();\n      return;\n    }\n\n    if (transceiver.stopping || transceiver.stopped) {\n      transceiver.setDirection(\"inactive\");\n    } else {\n      if (transceiver.direction === \"sendrecv\") {\n        transceiver.setDirection(\"recvonly\");\n      } else if (\n        transceiver.direction === \"sendonly\" ||\n        transceiver.direction === \"recvonly\"\n      ) {\n        transceiver.setDirection(\"inactive\");\n      }\n    }\n    this.needNegotiation();\n  }\n\n  private needNegotiation = async () => {\n    this.shouldNegotiationneeded = true;\n    if (this.negotiationneeded || this.signalingState !== \"stable\") return;\n    this.shouldNegotiationneeded = false;\n    setImmediate(() => {\n      this.negotiationneeded = true;\n      this.onNegotiationneeded.execute();\n      if (this.onnegotiationneeded) this.onnegotiationneeded({});\n    });\n  };\n\n  private createTransport(srtpProfiles: Profile[] = []) {\n    const [existing] = this.iceTransports;\n\n    // Gather ICE candidates for only one track. If the remote endpoint is not bundle-aware, negotiate only one media track.\n    // https://w3c.github.io/webrtc-pc/#rtcbundlepolicy-enum\n    if (this.config.bundlePolicy === \"max-bundle\") {\n      if (existing) {\n        return this.dtlsTransports[0];\n      }\n    }\n\n    const iceGatherer = new RTCIceGatherer({\n      ...parseIceServers(this.config.iceServers),\n      forceTurn: this.config.iceTransportPolicy === \"relay\",\n      portRange: this.config.icePortRange,\n      interfaceAddresses: this.config.iceInterfaceAddresses,\n      additionalHostAddresses: this.config.iceAdditionalHostAddresses,\n      filterStunResponse: this.config.iceFilterStunResponse,\n      useIpv4: this.config.iceUseIpv4,\n      useIpv6: this.config.iceUseIpv6,\n    });\n    if (existing) {\n      iceGatherer.connection.localUserName = existing.connection.localUserName;\n      iceGatherer.connection.localPassword = existing.connection.localPassword;\n    }\n    iceGatherer.onGatheringStateChange.subscribe(() => {\n      this.updateIceGatheringState();\n    });\n    this.updateIceGatheringState();\n    const iceTransport = new RTCIceTransport(iceGatherer);\n    iceTransport.onStateChange.subscribe(() => {\n      this.updateIceConnectionState();\n    });\n\n    iceTransport.iceGather.onIceCandidate = (candidate) => {\n      if (!this.localDescription) return;\n\n      if (this.config.bundlePolicy === \"max-bundle\" || this.remoteIsBundled) {\n        candidate.sdpMLineIndex = 0;\n        const media = this._localDescription?.media[0];\n        if (media) {\n          candidate.sdpMid = media.rtp.muxId;\n        }\n      } else {\n        const transceiver = this.transceivers.find(\n          (t) => t.dtlsTransport.iceTransport.id === iceTransport.id\n        );\n        if (transceiver) {\n          candidate.sdpMLineIndex = transceiver.mLineIndex;\n          candidate.sdpMid = transceiver.mid;\n        }\n        if (\n          this.sctpTransport?.dtlsTransport.iceTransport.id === iceTransport.id\n        ) {\n          candidate.sdpMLineIndex = this.sctpTransport.mLineIndex;\n          candidate.sdpMid = this.sctpTransport.mid;\n        }\n      }\n\n      candidate.foundation = \"candidate:\" + candidate.foundation;\n\n      // prevent ice candidates that have already been sent from being being resent\n      // when the connection is renegotiated during a later setLocalDescription call.\n      if (candidate.sdpMid) {\n        const candidateKey = `${candidate.foundation}:${candidate.sdpMid}`;\n        if (this.candidatesSent.has(candidateKey)) {\n          return;\n        }\n        this.candidatesSent.add(candidateKey);\n      }\n\n      this.onIceCandidate.execute(candidate.toJSON());\n      if (this.onicecandidate) {\n        this.onicecandidate({ candidate: candidate.toJSON() });\n      }\n      this.emit(\"icecandidate\", { candidate });\n    };\n\n    const dtlsTransport = new RTCDtlsTransport(\n      this.config,\n      iceTransport,\n      this.router,\n      this.certificates,\n      srtpProfiles\n    );\n\n    return dtlsTransport;\n  }\n\n  private createSctpTransport() {\n    const dtlsTransport = this.createTransport([\n      SRTP_PROFILE.SRTP_AEAD_AES_128_GCM, // prefer\n      SRTP_PROFILE.SRTP_AES128_CM_HMAC_SHA1_80,\n    ]);\n    const sctp = new RTCSctpTransport();\n    sctp.setDtlsTransport(dtlsTransport);\n    sctp.mid = undefined;\n\n    sctp.onDataChannel.subscribe((channel) => {\n      this.onDataChannel.execute(channel);\n\n      const event: RTCDataChannelEvent = { channel };\n      if (this.ondatachannel) this.ondatachannel(event);\n      this.emit(\"datachannel\", event);\n    });\n\n    this.sctpTransport = sctp;\n    this.updateIceConnectionState();\n\n    return sctp;\n  }\n\n  async setLocalDescription(sessionDescription: {\n    type: \"offer\" | \"answer\";\n    sdp: string;\n  }): Promise<SessionDescription> {\n    // # parse and validate description\n    const description = SessionDescription.parse(sessionDescription.sdp);\n    description.type = sessionDescription.type;\n    this.validateDescription(description, true);\n\n    // # update signaling state\n    if (description.type === \"offer\") {\n      this.setSignalingState(\"have-local-offer\");\n    } else if (description.type === \"answer\") {\n      this.setSignalingState(\"stable\");\n    }\n\n    // # assign MID\n    description.media.forEach((media, i) => {\n      const mid = media.rtp.muxId!;\n      this.seenMid.add(mid);\n      if ([\"audio\", \"video\"].includes(media.kind)) {\n        const transceiver = this.getTransceiverByMLineIndex(i);\n        if (transceiver) {\n          transceiver.mid = mid;\n        }\n      }\n      if (media.kind === \"application\" && this.sctpTransport) {\n        this.sctpTransport.mid = mid;\n      }\n    });\n\n    const setupRole = (dtlsTransport: RTCDtlsTransport) => {\n      const iceTransport = dtlsTransport.iceTransport;\n\n      // # set ICE role\n      if (description.type === \"offer\") {\n        iceTransport.connection.iceControlling = true;\n      } else {\n        iceTransport.connection.iceControlling = false;\n      }\n      // One agent full, one lite:  The full agent MUST take the controlling role, and the lite agent MUST take the controlled role\n      // RFC 8445 S6.1.1\n      if (iceTransport.connection.remoteIsLite) {\n        iceTransport.connection.iceControlling = true;\n      }\n\n      // # set DTLS role for mediasoup\n      if (description.type === \"answer\") {\n        const role = description.media.find((media) => media.dtlsParams)\n          ?.dtlsParams?.role;\n        if (role) {\n          dtlsTransport.role = role;\n        }\n      }\n    };\n    this.dtlsTransports.forEach((d) => setupRole(d));\n\n    // # configure direction\n    if ([\"answer\", \"pranswer\"].includes(description.type)) {\n      this.transceivers.forEach((t) => {\n        const direction = andDirection(t.direction, t.offerDirection);\n        t.setCurrentDirection(direction);\n      });\n    }\n\n    // for trickle ice\n    this.setLocal(description);\n\n    // connect transports\n    if (description.type === \"answer\") {\n      this.connect().catch((err) => {\n        log(\"connect failed\", err);\n        this.setConnectionState(\"failed\");\n      });\n    }\n\n    // # gather candidates\n    const connected = this.iceTransports.find(\n      (transport) => transport.state === \"connected\"\n    );\n    if (this.remoteIsBundled && connected) {\n      // no need to gather ice candidates on an existing bundled connection\n      await connected.iceGather.gather();\n    } else {\n      await Promise.all(\n        this.iceTransports.map((iceTransport) =>\n          iceTransport.iceGather.gather()\n        )\n      );\n    }\n\n    description.media\n      .filter((m) => [\"audio\", \"video\"].includes(m.kind))\n      .forEach((m, i) => {\n        addTransportDescription(m, this.transceivers[i].dtlsTransport);\n      });\n    const sctpMedia = description.media.find((m) => m.kind === \"application\");\n    if (this.sctpTransport && sctpMedia) {\n      addTransportDescription(sctpMedia, this.sctpTransport.dtlsTransport);\n    }\n\n    this.setLocal(description);\n\n    if (this.shouldNegotiationneeded) {\n      this.needNegotiation();\n    }\n\n    return description;\n  }\n\n  private setLocal(description: SessionDescription) {\n    if (description.type === \"answer\") {\n      this.currentLocalDescription = description;\n      this.pendingLocalDescription = undefined;\n    } else {\n      this.pendingLocalDescription = description;\n    }\n  }\n\n  private getTransportByMid(mid: string) {\n    let iceTransport: RTCIceTransport | undefined;\n\n    const transceiver = this.transceivers.find((t) => t.mid === mid);\n    if (transceiver) {\n      iceTransport = transceiver.dtlsTransport.iceTransport;\n    } else if (!iceTransport && this.sctpTransport?.mid === mid) {\n      iceTransport = this.sctpTransport?.dtlsTransport.iceTransport;\n    }\n\n    return iceTransport;\n  }\n\n  private getTransportByMLineIndex(index: number) {\n    const sdp = this.buildOfferSdp();\n    const media = sdp.media[index];\n    if (!media) {\n      return;\n    }\n    const transport = this.getTransportByMid(media.rtp.muxId!);\n\n    return transport;\n  }\n\n  async addIceCandidate(candidateMessage: RTCIceCandidate) {\n    const candidate = IceCandidate.fromJSON(candidateMessage);\n    if (!candidate) {\n      return;\n    }\n\n    let iceTransport: RTCIceTransport | undefined;\n\n    if (typeof candidate.sdpMid === \"number\") {\n      iceTransport = this.getTransportByMid(candidate.sdpMid);\n    }\n\n    if (!iceTransport && typeof candidate.sdpMLineIndex === \"number\") {\n      iceTransport = this.getTransportByMLineIndex(candidate.sdpMLineIndex);\n    }\n\n    if (!iceTransport) {\n      iceTransport = this.iceTransports[0];\n    }\n\n    if (iceTransport) {\n      await iceTransport.addRemoteCandidate(candidate);\n    } else {\n      log(\"iceTransport not found\", candidate);\n    }\n  }\n\n  private async connect() {\n    if (this.transportEstablished) {\n      return;\n    }\n    log(\"start connect\");\n\n    this.setConnectionState(\"connecting\");\n\n    await Promise.all(\n      this.dtlsTransports.map(async (dtlsTransport) => {\n        const { iceTransport } = dtlsTransport;\n        await iceTransport.start().catch((err) => {\n          log(\"iceTransport.start failed\", err);\n          throw err;\n        });\n        await dtlsTransport.start().catch((err) => {\n          log(\"dtlsTransport.start failed\", err);\n          throw err;\n        });\n        if (\n          this.sctpTransport &&\n          this.sctpRemotePort &&\n          this.sctpTransport.dtlsTransport.id === dtlsTransport.id\n        ) {\n          await this.sctpTransport.start(this.sctpRemotePort);\n          await this.sctpTransport.sctp.stateChanged.connected.asPromise();\n          log(\"sctp connected\");\n        }\n      })\n    );\n\n    this.transportEstablished = true;\n    this.setConnectionState(\"connected\");\n  }\n\n  private getLocalRtpParams(transceiver: RTCRtpTransceiver): RTCRtpParameters {\n    if (transceiver.mid == undefined) throw new Error(\"mid not assigned\");\n\n    const rtp: RTCRtpParameters = {\n      codecs: transceiver.codecs,\n      muxId: transceiver.mid,\n      headerExtensions: transceiver.headerExtensions,\n      rtcp: { cname: this.cname, ssrc: transceiver.sender.ssrc, mux: true },\n    };\n    return rtp;\n  }\n\n  private getRemoteRtpParams(\n    media: MediaDescription,\n    transceiver: RTCRtpTransceiver\n  ): RTCRtpReceiveParameters {\n    const receiveParameters: RTCRtpReceiveParameters = {\n      muxId: media.rtp.muxId,\n      rtcp: media.rtp.rtcp,\n      codecs: transceiver.codecs,\n      headerExtensions: transceiver.headerExtensions,\n      encodings: Object.values(\n        transceiver.codecs.reduce(\n          (acc: { [pt: number]: RTCRtpCodingParameters }, codec) => {\n            if (codec.name.toLowerCase() === \"rtx\") {\n              const params = codecParametersFromString(codec.parameters ?? \"\");\n              const apt = acc[params[\"apt\"]];\n              if (apt && media.ssrc.length === 2) {\n                apt.rtx = new RTCRtpRtxParameters({ ssrc: media.ssrc[1].ssrc });\n              }\n              return acc;\n            }\n            acc[codec.payloadType] = new RTCRtpCodingParameters({\n              ssrc: media.ssrc[0]?.ssrc,\n              payloadType: codec.payloadType,\n            });\n            return acc;\n          },\n          {}\n        )\n      ),\n    };\n\n    return receiveParameters;\n  }\n\n  get remoteIsBundled() {\n    const remoteSdp = this._remoteDescription;\n    if (!remoteSdp) return;\n    const bundle = remoteSdp.group.find(\n      (g) => g.semantic === \"BUNDLE\" && this.config.bundlePolicy !== \"disable\"\n    );\n    return bundle;\n  }\n\n  async setRemoteDescription(sessionDescription: {\n    type: \"offer\" | \"answer\";\n    sdp: string;\n  }) {\n    // # parse and validate description\n    const remoteSdp = SessionDescription.parse(sessionDescription.sdp);\n    remoteSdp.type = sessionDescription.type;\n    this.validateDescription(remoteSdp, false);\n\n    if (remoteSdp.type === \"answer\") {\n      this.currentRemoteDescription = remoteSdp;\n      this.pendingRemoteDescription = undefined;\n    } else {\n      this.pendingRemoteDescription = remoteSdp;\n    }\n\n    let bundleTransport: RTCDtlsTransport | undefined;\n\n    // # apply description\n\n    const matchTransceiverWithMedia = (\n      transceiver: RTCRtpTransceiver,\n      media: MediaDescription\n    ) =>\n      transceiver.kind === media.kind &&\n      [undefined, media.rtp.muxId].includes(transceiver.mid);\n\n    let transports = remoteSdp.media.map((remoteMedia, i) => {\n      let dtlsTransport: RTCDtlsTransport;\n\n      if ([\"audio\", \"video\"].includes(remoteMedia.kind)) {\n        let transceiver = this.transceivers.find((t) =>\n          matchTransceiverWithMedia(t, remoteMedia)\n        );\n        if (!transceiver) {\n          // create remote transceiver\n          transceiver = this._addTransceiver(remoteMedia.kind, {\n            direction: \"recvonly\",\n          });\n          transceiver.mid = remoteMedia.rtp.muxId;\n          this.onRemoteTransceiverAdded.execute(transceiver);\n        } else {\n          if (transceiver.direction === \"inactive\" && transceiver.stopping) {\n            transceiver.stopped = true;\n\n            if (sessionDescription.type === \"answer\") {\n              transceiver.setCurrentDirection(\"inactive\");\n            }\n            return;\n          }\n        }\n\n        if (this.remoteIsBundled) {\n          if (!bundleTransport) {\n            bundleTransport = transceiver.dtlsTransport;\n          } else {\n            transceiver.setDtlsTransport(bundleTransport);\n          }\n        }\n\n        dtlsTransport = transceiver.dtlsTransport;\n\n        this.setRemoteRTP(transceiver, remoteMedia, remoteSdp.type, i);\n      } else if (remoteMedia.kind === \"application\") {\n        if (!this.sctpTransport) {\n          this.sctpTransport = this.createSctpTransport();\n          this.sctpTransport.mid = remoteMedia.rtp.muxId;\n        }\n\n        if (this.remoteIsBundled) {\n          if (!bundleTransport) {\n            bundleTransport = this.sctpTransport.dtlsTransport;\n          } else {\n            this.sctpTransport.setDtlsTransport(bundleTransport);\n          }\n        }\n\n        dtlsTransport = this.sctpTransport.dtlsTransport;\n\n        this.setRemoteSCTP(remoteMedia, this.sctpTransport, i);\n      } else {\n        throw new Error(\"invalid media kind\");\n      }\n\n      const iceTransport = dtlsTransport.iceTransport;\n\n      if (remoteMedia.iceParams && remoteMedia.dtlsParams) {\n        iceTransport.setRemoteParams(remoteMedia.iceParams);\n        dtlsTransport.setRemoteParams(remoteMedia.dtlsParams);\n\n        // One agent full, one lite:  The full agent MUST take the controlling role, and the lite agent MUST take the controlled role\n        // RFC 8445 S6.1.1\n        if (remoteMedia.iceParams?.iceLite) {\n          iceTransport.connection.iceControlling = true;\n        }\n      }\n\n      // # add ICE candidates\n      remoteMedia.iceCandidates.forEach(iceTransport.addRemoteCandidate);\n\n      if (remoteMedia.iceCandidatesComplete) {\n        iceTransport.addRemoteCandidate(undefined);\n      }\n\n      // # set DTLS role\n      if (remoteSdp.type === \"answer\" && remoteMedia.dtlsParams?.role) {\n        dtlsTransport.role =\n          remoteMedia.dtlsParams.role === \"client\" ? \"server\" : \"client\";\n      }\n      return iceTransport;\n    }) as RTCIceTransport[];\n\n    // filter out inactive transports\n    transports = transports.filter((iceTransport) => !!iceTransport);\n\n    const removedTransceivers = this.transceivers.filter(\n      (t) =>\n        remoteSdp.media.find((m) => matchTransceiverWithMedia(t, m)) ==\n        undefined\n    );\n\n    if (sessionDescription.type === \"answer\") {\n      for (const transceiver of removedTransceivers) {\n        // todo: handle answer side transceiver removal work.\n        // event should trigger to notify media source to stop.\n        transceiver.stop();\n        transceiver.stopped = true;\n      }\n    }\n\n    if (remoteSdp.type === \"offer\") {\n      this.setSignalingState(\"have-remote-offer\");\n    } else if (remoteSdp.type === \"answer\") {\n      this.setSignalingState(\"stable\");\n    }\n\n    // connect transports\n    if (remoteSdp.type === \"answer\") {\n      log(\"caller start connect\");\n      this.connect().catch((err) => {\n        log(\"connect failed\", err);\n        this.setConnectionState(\"failed\");\n      });\n    }\n\n    const connected = this.iceTransports.find(\n      (transport) => transport.state === \"connected\"\n    );\n    if (this.remoteIsBundled && connected) {\n      // no need to gather ice candidates on an existing bundled connection\n      await connected.iceGather.gather();\n    } else {\n      await Promise.all(\n        transports.map((iceTransport) => iceTransport.iceGather.gather())\n      );\n    }\n\n    this.negotiationneeded = false;\n    if (this.shouldNegotiationneeded) {\n      this.needNegotiation();\n    }\n  }\n\n  private setRemoteRTP(\n    transceiver: RTCRtpTransceiver,\n    remoteMedia: MediaDescription,\n    type: \"offer\" | \"answer\",\n    mLineIndex: number\n  ) {\n    if (!transceiver.mid) {\n      transceiver.mid = remoteMedia.rtp.muxId;\n    }\n    transceiver.mLineIndex = mLineIndex;\n\n    // # negotiate codecs\n    transceiver.codecs = remoteMedia.rtp.codecs.filter((remoteCodec) => {\n      const localCodecs = this.config.codecs[remoteMedia.kind] || [];\n\n      const existCodec = findCodecByMimeType(localCodecs, remoteCodec);\n      if (!existCodec) return false;\n\n      if (existCodec?.name.toLowerCase() === \"rtx\") {\n        const params = codecParametersFromString(existCodec.parameters ?? \"\");\n        const pt = params[\"apt\"];\n        const origin = remoteMedia.rtp.codecs.find((c) => c.payloadType === pt);\n        if (!origin) return false;\n        return !!findCodecByMimeType(localCodecs, origin);\n      }\n\n      return true;\n    });\n\n    log(\"negotiated codecs\", transceiver.codecs);\n    if (transceiver.codecs.length === 0) {\n      throw new Error(\"negotiate codecs failed.\");\n    }\n    transceiver.headerExtensions = remoteMedia.rtp.headerExtensions.filter(\n      (extension) =>\n        (this.config.headerExtensions[remoteMedia.kind as Media] || []).find(\n          (v) => v.uri === extension.uri\n        )\n    );\n\n    // # configure direction\n    const mediaDirection = remoteMedia.direction ?? \"inactive\";\n    const direction = reverseDirection(mediaDirection);\n    if ([\"answer\", \"pranswer\"].includes(type)) {\n      transceiver.setCurrentDirection(direction);\n    } else {\n      transceiver.offerDirection = direction;\n    }\n    const localParams = this.getLocalRtpParams(transceiver);\n    transceiver.sender.prepareSend(localParams);\n\n    if ([\"recvonly\", \"sendrecv\"].includes(transceiver.direction)) {\n      const remotePrams = this.getRemoteRtpParams(remoteMedia, transceiver);\n\n      // register simulcast receiver\n      remoteMedia.simulcastParameters.forEach((param) => {\n        this.router.registerRtpReceiverByRid(transceiver, param, remotePrams);\n      });\n\n      transceiver.receiver.prepareReceive(remotePrams);\n      // register ssrc receiver\n      this.router.registerRtpReceiverBySsrc(transceiver, remotePrams);\n    }\n    if ([\"sendonly\", \"sendrecv\"].includes(mediaDirection)) {\n      // assign msid\n      if (remoteMedia.msid != undefined) {\n        const [streamId, trackId] = remoteMedia.msid.split(\" \");\n        transceiver.receiver.remoteStreamId = streamId;\n        transceiver.receiver.remoteTrackId = trackId;\n\n        this.fireOnTrack(\n          transceiver.receiver.track,\n          transceiver,\n          new MediaStream({\n            id: streamId,\n            tracks: [transceiver.receiver.track],\n          })\n        );\n      }\n    }\n\n    if (remoteMedia.ssrc[0]?.ssrc) {\n      transceiver.receiver.setupTWCC(remoteMedia.ssrc[0].ssrc);\n    }\n  }\n\n  private setRemoteSCTP(\n    remoteMedia: MediaDescription,\n    sctpTransport: RTCSctpTransport,\n    mLineIndex: number\n  ) {\n    // # configure sctp\n    this.sctpRemotePort = remoteMedia.sctpPort;\n    if (!this.sctpRemotePort) {\n      throw new Error(\"sctpRemotePort not exist\");\n    }\n\n    sctpTransport.setRemotePort(this.sctpRemotePort);\n    sctpTransport.mLineIndex = mLineIndex;\n    if (!sctpTransport.mid) {\n      sctpTransport.mid = remoteMedia.rtp.muxId;\n    }\n  }\n\n  private validateDescription(\n    description: SessionDescription,\n    isLocal: boolean\n  ) {\n    if (isLocal) {\n      if (description.type === \"offer\") {\n        if (![\"stable\", \"have-local-offer\"].includes(this.signalingState))\n          throw new Error(\"Cannot handle offer in signaling state\");\n      } else if (description.type === \"answer\") {\n        if (\n          ![\"have-remote-offer\", \"have-local-pranswer\"].includes(\n            this.signalingState\n          )\n        ) {\n          throw new Error(\"Cannot handle answer in signaling state\");\n        }\n      }\n    } else {\n      if (description.type === \"offer\") {\n        if (![\"stable\", \"have-remote-offer\"].includes(this.signalingState)) {\n          throw new Error(\"Cannot handle offer in signaling state\");\n        }\n      } else if (description.type === \"answer\") {\n        if (\n          ![\"have-local-offer\", \"have-remote-pranswer\"].includes(\n            this.signalingState\n          )\n        ) {\n          throw new Error(\"Cannot handle answer in signaling state\");\n        }\n      }\n    }\n\n    description.media.forEach((media) => {\n      if (media.direction === \"inactive\") return;\n      if (\n        !media.iceParams ||\n        !media.iceParams.usernameFragment ||\n        !media.iceParams.password\n      )\n        throw new Error(\"ICE username fragment or password is missing\");\n    });\n\n    if ([\"answer\", \"pranswer\"].includes(description.type || \"\")) {\n      const offer = isLocal ? this._remoteDescription : this._localDescription;\n      if (!offer) throw new Error();\n\n      const answerMedia = description.media.map((v, i) => [v.kind, i]);\n      const offerMedia = offer.media.map((v, i) => [v.kind, i]);\n      if (!isEqual(offerMedia, answerMedia)) {\n        throw new Error(\"Media sections in answer do not match offer\");\n      }\n    }\n  }\n\n  private fireOnTrack(\n    track: MediaStreamTrack,\n    transceiver: RTCRtpTransceiver,\n    stream: MediaStream\n  ) {\n    const event: RTCTrackEvent = {\n      track,\n      streams: [stream],\n      transceiver,\n      receiver: transceiver.receiver,\n    };\n    this.onTrack.execute(track);\n    this.emit(\"track\", event);\n    if (this.ontrack) this.ontrack(event);\n  }\n\n  addTransceiver(\n    trackOrKind: Kind | MediaStreamTrack,\n    options: Partial<TransceiverOptions> = {}\n  ) {\n    return this._addTransceiver(trackOrKind, options);\n  }\n\n  private _addTransceiver(\n    trackOrKind: Kind | MediaStreamTrack,\n    options: Partial<TransceiverOptions> = {}\n  ) {\n    const kind =\n      typeof trackOrKind === \"string\" ? trackOrKind : trackOrKind.kind;\n\n    const direction = options.direction || \"sendrecv\";\n\n    const dtlsTransport = this.createTransport([\n      SRTP_PROFILE.SRTP_AEAD_AES_128_GCM, // prefer\n      SRTP_PROFILE.SRTP_AES128_CM_HMAC_SHA1_80,\n    ]);\n\n    const sender = new RTCRtpSender(trackOrKind);\n    const receiver = new RTCRtpReceiver(this.config, kind, sender.ssrc);\n    const newTransceiver = new RTCRtpTransceiver(\n      kind,\n      dtlsTransport,\n      receiver,\n      sender,\n      direction\n    );\n    newTransceiver.options = options;\n    this.router.registerRtpSender(newTransceiver.sender);\n\n    // reuse inactive\n    const inactiveTransceiverIndex = this.transceivers.findIndex(\n      (t) => t.currentDirection === \"inactive\"\n    );\n    const inactiveTransceiver = this.transceivers.find(\n      (t) => t.currentDirection === \"inactive\"\n    );\n    if (inactiveTransceiverIndex > -1 && inactiveTransceiver) {\n      this.replaceTransceiver(newTransceiver, inactiveTransceiverIndex);\n      newTransceiver.mLineIndex = inactiveTransceiver.mLineIndex;\n      inactiveTransceiver.setCurrentDirection(undefined);\n    } else {\n      this.pushTransceiver(newTransceiver);\n    }\n    this.onTransceiverAdded.execute(newTransceiver);\n\n    this.updateIceConnectionState();\n    this.needNegotiation();\n\n    return newTransceiver;\n  }\n\n  getTransceivers() {\n    return this.transceivers;\n  }\n\n  getSenders(): RTCRtpSender[] {\n    return this.getTransceivers().map((t) => t.sender);\n  }\n\n  getReceivers() {\n    return this.getTransceivers().map((t) => t.receiver);\n  }\n\n  // todo fix\n  addTrack(\n    track: MediaStreamTrack,\n    /**todo impl */\n    ms?: MediaStream\n  ) {\n    if (this.isClosed) throw new Error(\"is closed\");\n    if (this.getSenders().find((sender) => sender.track?.uuid === track.uuid)) {\n      throw new Error(\"track exist\");\n    }\n\n    const emptyTrackSender = this.transceivers.find(\n      (t) =>\n        t.sender.track == undefined &&\n        t.kind === track.kind &&\n        SenderDirections.includes(t.direction) === true\n    );\n    if (emptyTrackSender) {\n      const sender = emptyTrackSender.sender;\n      sender.registerTrack(track);\n      this.needNegotiation();\n      return sender;\n    }\n\n    const notSendTransceiver = this.transceivers.find(\n      (t) =>\n        t.sender.track == undefined &&\n        t.kind === track.kind &&\n        SenderDirections.includes(t.direction) === false &&\n        !t.usedForSender\n    );\n    if (notSendTransceiver) {\n      const sender = notSendTransceiver.sender;\n      sender.registerTrack(track);\n      switch (notSendTransceiver.direction) {\n        case \"recvonly\":\n          notSendTransceiver.setDirection(\"sendrecv\");\n          break;\n        case \"inactive\":\n          notSendTransceiver.setDirection(\"sendonly\");\n          break;\n      }\n      this.needNegotiation();\n      return sender;\n    } else {\n      const transceiver = this._addTransceiver(track, {\n        direction: \"sendrecv\",\n      });\n      this.needNegotiation();\n      return transceiver.sender;\n    }\n  }\n\n  private async ensureCerts() {\n    const ensureCert = async (dtlsTransport: RTCDtlsTransport) => {\n      if (this.certificates.length === 0) {\n        const localCertificate = await dtlsTransport.setupCertificate();\n        this.certificates.push(localCertificate);\n      } else {\n        dtlsTransport.localCertificate = this.certificates[0];\n      }\n    };\n\n    for (const dtlsTransport of this.dtlsTransports) {\n      await ensureCert(dtlsTransport);\n    }\n  }\n\n  async createAnswer() {\n    await this.ensureCerts();\n    const description = this.buildAnswer();\n    return description.toJSON();\n  }\n\n  private buildAnswer() {\n    this.assertNotClosed();\n    if (\n      ![\"have-remote-offer\", \"have-local-pranswer\"].includes(\n        this.signalingState\n      )\n    ) {\n      throw new Error(\"createAnswer failed\");\n    }\n    if (!this._remoteDescription) {\n      throw new Error(\"wrong state\");\n    }\n\n    const description = new SessionDescription();\n    addSDPHeader(\"answer\", description);\n\n    this._remoteDescription.media.forEach((remoteMedia) => {\n      let dtlsTransport!: RTCDtlsTransport;\n      let media: MediaDescription;\n\n      if ([\"audio\", \"video\"].includes(remoteMedia.kind)) {\n        const transceiver = this.getTransceiverByMid(remoteMedia.rtp.muxId!)!;\n        media = createMediaDescriptionForTransceiver(\n          transceiver,\n          this.cname,\n          andDirection(transceiver.direction, transceiver.offerDirection)\n        );\n        dtlsTransport = transceiver.dtlsTransport;\n      } else if (remoteMedia.kind === \"application\") {\n        if (!this.sctpTransport || !this.sctpTransport.mid) {\n          throw new Error(\"sctpTransport not found\");\n        }\n        media = createMediaDescriptionForSctp(this.sctpTransport);\n\n        dtlsTransport = this.sctpTransport.dtlsTransport;\n      } else {\n        throw new Error(\"invalid kind\");\n      }\n\n      // # determine DTLS role, or preserve the currently configured role\n      if (media.dtlsParams) {\n        if (dtlsTransport.role === \"auto\") {\n          media.dtlsParams.role = \"client\";\n        } else {\n          media.dtlsParams.role = dtlsTransport.role;\n        }\n      }\n\n      media.simulcastParameters = remoteMedia.simulcastParameters.map((v) => ({\n        ...v,\n        direction: reverseSimulcastDirection(v.direction),\n      }));\n\n      description.media.push(media);\n    });\n\n    if (this.config.bundlePolicy !== \"disable\") {\n      const bundle = new GroupDescription(\"BUNDLE\", []);\n      description.media.forEach((media) => {\n        bundle.items.push(media.rtp.muxId!);\n      });\n      description.group.push(bundle);\n    }\n\n    return description;\n  }\n\n  async close() {\n    if (this.isClosed) return;\n\n    this.isClosed = true;\n    this.setSignalingState(\"closed\");\n    this.setConnectionState(\"closed\");\n\n    this.transceivers.forEach((transceiver) => {\n      transceiver.receiver.stop();\n      transceiver.sender.stop();\n    });\n\n    if (this.sctpTransport) {\n      await this.sctpTransport.stop();\n    }\n    for (const dtlsTransport of this.dtlsTransports) {\n      await dtlsTransport.stop();\n      await dtlsTransport.iceTransport.stop();\n    }\n\n    this.dispose();\n    log(\"peerConnection closed\");\n  }\n\n  private assertNotClosed() {\n    if (this.isClosed) {\n      throw new Error(\"RTCPeerConnection is closed\");\n    }\n  }\n\n  // https://w3c.github.io/webrtc-pc/#dom-rtcicegatheringstate\n  private updateIceGatheringState() {\n    const all = this.iceTransports;\n\n    function allMatch(...state: IceGathererState[]) {\n      return (\n        all.filter((check) => state.includes(check.iceGather.gatheringState))\n          .length === all.length\n      );\n    }\n\n    let newState: IceGathererState;\n\n    if (all.length && allMatch(\"complete\")) {\n      newState = \"complete\";\n    } else if (!all.length || allMatch(\"new\", \"complete\")) {\n      newState = \"new\";\n    } else if (\n      all.map((check) => check.iceGather.gatheringState).includes(\"gathering\")\n    ) {\n      newState = \"gathering\";\n    } else {\n      newState = \"new\";\n    }\n\n    if (this.iceGatheringState === newState) {\n      return;\n    }\n\n    log(\"iceGatheringStateChange\", newState);\n    this.iceGatheringState = newState;\n    this.iceGatheringStateChange.execute(newState);\n    this.emit(\"icegatheringstatechange\", newState);\n  }\n\n  // https://w3c.github.io/webrtc-pc/#dom-rtciceconnectionstate\n  private updateIceConnectionState() {\n    const all = this.iceTransports;\n    let newState: RTCIceConnectionState;\n\n    function allMatch(...state: RTCIceConnectionState[]) {\n      return (\n        all.filter((check) => state.includes(check.state)).length === all.length\n      );\n    }\n\n    if (this.connectionState === \"closed\") {\n      newState = \"closed\";\n    } else if (allMatch(\"failed\")) {\n      newState = \"failed\";\n    } else if (allMatch(\"disconnected\")) {\n      newState = \"disconnected\";\n    } else if (allMatch(\"new\", \"closed\")) {\n      newState = \"new\";\n    } else if (allMatch(\"new\", \"checking\")) {\n      newState = \"checking\";\n    } else if (allMatch(\"completed\", \"closed\")) {\n      newState = \"completed\";\n    } else if (allMatch(\"connected\", \"completed\", \"closed\")) {\n      newState = \"connected\";\n    } else {\n      // unreachable?\n      newState = \"new\";\n    }\n\n    if (this.iceConnectionState === newState) {\n      return;\n    }\n\n    log(\"iceConnectionStateChange\", newState);\n    this.iceConnectionState = newState;\n    this.iceConnectionStateChange.execute(newState);\n    this.emit(\"iceconnectionstatechange\", newState);\n  }\n\n  private setSignalingState(state: RTCSignalingState) {\n    log(\"signalingStateChange\", state);\n    this.signalingState = state;\n    this.signalingStateChange.execute(state);\n    if (this.onsignalingstatechange) this.onsignalingstatechange({});\n  }\n\n  private setConnectionState(state: ConnectionState) {\n    log(\"connectionStateChange\", state);\n    this.connectionState = state;\n    this.connectionStateChange.execute(state);\n    if (this.onconnectionstatechange) this.onconnectionstatechange();\n    this.emit(\"connectionstatechange\");\n  }\n\n  private dispose() {\n    this.onDataChannel.allUnsubscribe();\n    this.iceGatheringStateChange.allUnsubscribe();\n    this.iceConnectionStateChange.allUnsubscribe();\n    this.signalingStateChange.allUnsubscribe();\n    this.onTransceiverAdded.allUnsubscribe();\n    this.onRemoteTransceiverAdded.allUnsubscribe();\n    this.onIceCandidate.allUnsubscribe();\n  }\n}\n\nexport function createMediaDescriptionForTransceiver(\n  transceiver: RTCRtpTransceiver,\n  cname: string,\n  direction: Direction\n) {\n  const media = new MediaDescription(\n    transceiver.kind,\n    9,\n    \"UDP/TLS/RTP/SAVPF\",\n    transceiver.codecs.map((c) => c.payloadType)\n  );\n  media.direction = direction;\n  media.msid = transceiver.msid;\n  media.rtp = {\n    codecs: transceiver.codecs,\n    headerExtensions: transceiver.headerExtensions,\n    muxId: transceiver.mid,\n  };\n  media.rtcpHost = \"0.0.0.0\";\n  media.rtcpPort = 9;\n  media.rtcpMux = true;\n  media.ssrc = [new SsrcDescription({ ssrc: transceiver.sender.ssrc, cname })];\n\n  if (transceiver.options.simulcast) {\n    media.simulcastParameters = transceiver.options.simulcast.map(\n      (o) => new RTCRtpSimulcastParameters(o)\n    );\n  }\n\n  if (media.rtp.codecs.find((c) => c.name.toLowerCase() === \"rtx\")) {\n    media.ssrc.push(\n      new SsrcDescription({ ssrc: transceiver.sender.rtxSsrc, cname })\n    );\n    media.ssrcGroup = [\n      new GroupDescription(\"FID\", [\n        transceiver.sender.ssrc.toString(),\n        transceiver.sender.rtxSsrc.toString(),\n      ]),\n    ];\n  }\n\n  addTransportDescription(media, transceiver.dtlsTransport);\n  return media;\n}\n\nexport function createMediaDescriptionForSctp(sctp: RTCSctpTransport) {\n  const media = new MediaDescription(\n    \"application\",\n    DISCARD_PORT,\n    \"UDP/DTLS/SCTP\",\n    [\"webrtc-datachannel\"]\n  );\n  media.sctpPort = sctp.port;\n  media.rtp.muxId = sctp.mid;\n  media.sctpCapabilities = RTCSctpTransport.getCapabilities();\n\n  addTransportDescription(media, sctp.dtlsTransport);\n  return media;\n}\n\nexport function addTransportDescription(\n  media: MediaDescription,\n  dtlsTransport: RTCDtlsTransport\n) {\n  const iceTransport = dtlsTransport.iceTransport;\n  const iceGatherer = iceTransport.iceGather;\n\n  media.iceCandidates = iceGatherer.localCandidates;\n  media.iceCandidatesComplete = iceGatherer.gatheringState === \"complete\";\n  media.iceParams = iceGatherer.localParameters;\n  media.iceOptions = \"trickle\";\n\n  media.host = DISCARD_HOST;\n  media.port = DISCARD_PORT;\n\n  if (media.direction === \"inactive\") {\n    media.port = 0;\n    media.msid = undefined;\n  }\n\n  if (!media.dtlsParams) {\n    media.dtlsParams = dtlsTransport.localParameters;\n    if (!media.dtlsParams.fingerprints) {\n      media.dtlsParams.fingerprints =\n        dtlsTransport.localParameters.fingerprints;\n    }\n  }\n}\n\nexport function allocateMid(mids: Set<string>, type: \"dc\" | \"av\") {\n  let mid = \"\";\n  for (let i = 0; ; ) {\n    // rfc9143.html#name-security-considerations\n    // SHOULD be 3 bytes or fewer to allow them to efficiently fit into the MID RTP header extension\n    mid = (i++).toString() + type;\n    if (!mids.has(mid)) break;\n  }\n  mids.add(mid);\n  return mid;\n}\n\nexport type BundlePolicy = \"max-compat\" | \"max-bundle\" | \"disable\";\n\nexport interface PeerConfig {\n  codecs: Partial<{\n    /**\n     * When specifying a codec with a fixed payloadType such as PCMU,\n     * it is necessary to set the correct PayloadType in RTCRtpCodecParameters in advance.\n     */\n    audio: RTCRtpCodecParameters[];\n    video: RTCRtpCodecParameters[];\n  }>;\n  headerExtensions: Partial<{\n    audio: RTCRtpHeaderExtensionParameters[];\n    video: RTCRtpHeaderExtensionParameters[];\n  }>;\n  iceTransportPolicy: \"all\" | \"relay\";\n  iceServers: RTCIceServer[];\n  /**Minimum port and Maximum port must not be the same value */\n  icePortRange: [number, number] | undefined;\n  iceInterfaceAddresses: InterfaceAddresses | undefined;\n  /** Add additional host (local) addresses to use for candidate gathering.\n   * Notably, you can include hosts that are normally excluded, such as loopback, tun interfaces, etc.\n   */\n  iceAdditionalHostAddresses: string[] | undefined;\n  iceUseIpv4: boolean;\n  iceUseIpv6: boolean;\n  /** If provided, is called on each STUN request.\n   * Return `true` if a STUN response should be sent, false if it should be skipped. */\n  iceFilterStunResponse:\n    | ((message: Message, addr: Address, protocol: Protocol) => boolean)\n    | undefined;\n  dtls: Partial<{\n    keys: DtlsKeys;\n  }>;\n  bundlePolicy: BundlePolicy;\n  debug: Partial<{\n    /**% */\n    inboundPacketLoss: number;\n    /**% */\n    outboundPacketLoss: number;\n    /**ms */\n    receiverReportDelay: number;\n    disableSendNack: boolean;\n    disableRecvRetransmit: boolean;\n  }>;\n}\n\nexport const findCodecByMimeType = (\n  codecs: RTCRtpCodecParameters[],\n  target: RTCRtpCodecParameters\n) =>\n  codecs.find(\n    (localCodec) =>\n      localCodec.mimeType.toLowerCase() === target.mimeType.toLowerCase()\n  )\n    ? target\n    : undefined;\n\nexport type RTCIceServer = {\n  urls: string;\n  username?: string;\n  credential?: string;\n};\n\nexport const defaultPeerConfig: PeerConfig = {\n  codecs: {\n    audio: [\n      new RTCRtpCodecParameters({\n        mimeType: \"audio/opus\",\n        clockRate: 48000,\n        channels: 2,\n      }),\n      new RTCRtpCodecParameters({\n        mimeType: \"audio/PCMU\",\n        clockRate: 8000,\n        channels: 1,\n        payloadType: 0,\n      }),\n    ],\n    video: [\n      new RTCRtpCodecParameters({\n        mimeType: \"video/VP8\",\n        clockRate: 90000,\n        rtcpFeedback: [useNACK(), usePLI(), useREMB()],\n      }),\n    ],\n  },\n  headerExtensions: {\n    audio: [],\n    video: [],\n  },\n  iceTransportPolicy: \"all\",\n  iceServers: [{ urls: \"stun:stun.l.google.com:19302\" }],\n  icePortRange: undefined,\n  iceInterfaceAddresses: undefined,\n  iceAdditionalHostAddresses: undefined,\n  iceUseIpv4: true,\n  iceUseIpv6: true,\n  iceFilterStunResponse: undefined,\n  dtls: {},\n  bundlePolicy: \"max-compat\",\n  debug: {},\n};\n\nexport interface RTCTrackEvent {\n  track: MediaStreamTrack;\n  streams: MediaStream[];\n  transceiver: RTCRtpTransceiver;\n  receiver: RTCRtpReceiver;\n}\n\nexport interface RTCDataChannelEvent {\n  channel: RTCDataChannel;\n}\n\nexport interface RTCPeerConnectionIceEvent {\n  candidate: RTCIceCandidate;\n}\n\ntype Media = \"audio\" | \"video\";\n","import { randomBytes } from \"crypto\";\nimport { Uint64BE } from \"int64-buffer\";\nimport range from \"lodash/range\";\nimport { isIPv4 } from \"net\";\n\nimport {\n  DTLS_ROLE_SETUP,\n  DTLS_SETUP_ROLE,\n  FMTP_INT_PARAMETERS,\n  SSRC_INFO_ATTRS,\n} from \"./const\";\nimport { divide } from \"./helper\";\nimport {\n  RTCRtcpFeedback,\n  RTCRtpCodecParameters,\n  RTCRtpHeaderExtensionParameters,\n  RTCRtpParameters,\n  RTCRtpSimulcastParameters,\n} from \"./media/parameters\";\nimport { Direction } from \"./media/rtpTransceiver\";\nimport {\n  DtlsRole,\n  RTCDtlsFingerprint,\n  RTCDtlsParameters,\n} from \"./transport/dtls\";\nimport { IceCandidate, RTCIceParameters } from \"./transport/ice\";\nimport { RTCSctpCapabilities } from \"./transport/sctp\";\nimport { Kind } from \"./types/domain\";\n\nexport class SessionDescription {\n  version = 0;\n  origin?: string;\n  name = \"-\";\n  time = \"0 0\";\n  host?: string;\n  group: GroupDescription[] = [];\n  extMapAllowMixed = true;\n  msidSemantic: GroupDescription[] = [];\n  media: MediaDescription[] = [];\n  type!: \"offer\" | \"answer\";\n  dtlsRole!: DtlsRole;\n  iceOptions!: string;\n  iceLite!: boolean;\n  icePassword!: string;\n  iceUsernameFragment!: string;\n  dtlsFingerprints: RTCDtlsFingerprint[] = [];\n\n  static parse(sdp: string) {\n    const [sessionLines, mediaGroups] = groupLines(sdp);\n\n    const session = new SessionDescription();\n    sessionLines.forEach((line) => {\n      if (line.startsWith(\"v=\")) {\n        session.version = parseInt(line.slice(2), 10);\n      } else if (line.startsWith(\"o=\")) {\n        session.origin = line.slice(2);\n      } else if (line.startsWith(\"s=\")) {\n        session.name = line.slice(2);\n      } else if (line.startsWith(\"c=\")) {\n        session.host = ipAddressFromSdp(line.slice(2));\n      } else if (line.startsWith(\"t=\")) {\n        session.time = line.slice(2);\n      } else if (line.startsWith(\"a=\")) {\n        const [attr, value] = parseAttr(line);\n        switch (attr) {\n          case \"fingerprint\":\n            const [algorithm, fingerprint] = value?.split(\" \") || [];\n            session.dtlsFingerprints.push(\n              new RTCDtlsFingerprint(algorithm, fingerprint)\n            );\n            break;\n          case \"ice-lite\":\n            session.iceLite = true;\n            break;\n          case \"ice-options\":\n            session.iceOptions = value;\n            break;\n          case \"ice-pwd\":\n            session.icePassword = value;\n            break;\n          case \"ice-ufrag\":\n            session.iceUsernameFragment = value;\n            break;\n          case \"group\":\n            parseGroup(session.group, value);\n            break;\n          case \"msid-semantic\":\n            parseGroup(session.msidSemantic, value);\n            break;\n          case \"setup\":\n            session.dtlsRole = DTLS_SETUP_ROLE[value];\n            break;\n          case \"extmap-allow-mixed\":\n            session.extMapAllowMixed = true;\n            break;\n        }\n      }\n    });\n\n    const bundle = session.group.find((g) => g.semantic === \"BUNDLE\");\n\n    mediaGroups.forEach((mediaLines) => {\n      const target = mediaLines[0];\n      const m = target.match(/^m=([^ ]+) ([0-9]+) ([A-Z/]+) (.+)/);\n      if (!m) {\n        throw new Error(\"m line not found\");\n      }\n\n      const kind = m[1] as Kind;\n      const fmt = m[4].split(\" \");\n      // todo fix\n      const fmtInt = [\"audio\", \"video\"].includes(kind)\n        ? fmt.map((v) => Number(v))\n        : undefined;\n\n      const currentMedia = new MediaDescription(\n        kind,\n        parseInt(m[2]),\n        m[3],\n        fmtInt || fmt\n      );\n      currentMedia.dtlsParams = new RTCDtlsParameters(\n        [...session.dtlsFingerprints],\n        session.dtlsRole\n      );\n\n      currentMedia.iceParams = new RTCIceParameters({\n        iceLite: session.iceLite,\n        usernameFragment: session.iceUsernameFragment,\n        password: session.icePassword,\n      });\n\n      currentMedia.iceOptions = session.iceOptions;\n      session.media.push(currentMedia);\n\n      mediaLines.slice(1).forEach((line) => {\n        if (line.startsWith(\"c=\")) {\n          currentMedia.host = ipAddressFromSdp(line.slice(2));\n        } else if (line.startsWith(\"a=\")) {\n          const [attr, value] = parseAttr(line);\n\n          switch (attr) {\n            case \"candidate\":\n              if (!value) throw new Error();\n              currentMedia.iceCandidates.push(candidateFromSdp(value));\n              break;\n            case \"end-of-candidates\":\n              currentMedia.iceCandidatesComplete = true;\n              break;\n            case \"extmap\":\n              // eslint-disable-next-line prefer-const\n              let [extId, extUri] = value.split(\" \");\n              if (extId.includes(\"/\")) {\n                [extId] = extId.split(\"/\");\n              }\n              currentMedia.rtp.headerExtensions.push(\n                new RTCRtpHeaderExtensionParameters({\n                  id: parseInt(extId),\n                  uri: extUri,\n                })\n              );\n              break;\n            case \"fingerprint\":\n              if (!value) throw new Error();\n              const [algorithm, fingerprint] = value.split(\" \");\n              currentMedia.dtlsParams?.fingerprints.push(\n                new RTCDtlsFingerprint(algorithm, fingerprint)\n              );\n              break;\n            case \"ice-options\":\n              currentMedia.iceOptions = value;\n              break;\n            case \"ice-pwd\":\n              currentMedia.iceParams!.password = value;\n              break;\n            case \"ice-ufrag\":\n              currentMedia.iceParams!.usernameFragment = value;\n              break;\n            case \"ice-lite\":\n              currentMedia.iceParams!.iceLite = true;\n              break;\n            case \"max-message-size\":\n              currentMedia.sctpCapabilities = new RTCSctpCapabilities(\n                parseInt(value, 10)\n              );\n              break;\n            case \"mid\":\n              currentMedia.rtp.muxId = value;\n              break;\n            case \"msid\":\n              currentMedia.msid = value;\n              break;\n            case \"rtcp\":\n              const [port, rest] = divide(value, \" \");\n              currentMedia.rtcpPort = parseInt(port);\n              currentMedia.rtcpHost = ipAddressFromSdp(rest);\n              break;\n            case \"rtcp-mux\":\n              currentMedia.rtcpMux = true;\n              break;\n            case \"setup\":\n              currentMedia.dtlsParams!.role = DTLS_SETUP_ROLE[value];\n              break;\n            case \"recvonly\":\n            case \"sendonly\":\n            case \"sendrecv\":\n            case \"inactive\":\n              currentMedia.direction = attr;\n              break;\n            case \"rtpmap\":\n              {\n                const [formatId, formatDesc] = divide(value, \" \");\n                const [type, clock, channel] = formatDesc.split(\"/\");\n                let channels: number | undefined;\n                if (currentMedia.kind === \"audio\") {\n                  channels = channel ? parseInt(channel) : 1;\n                }\n                const codec = new RTCRtpCodecParameters({\n                  mimeType: currentMedia.kind + \"/\" + type,\n                  channels,\n                  clockRate: parseInt(clock),\n                  payloadType: parseInt(formatId),\n                });\n                currentMedia.rtp.codecs.push(codec);\n              }\n              break;\n            case \"sctpmap\":\n              if (!value) throw new Error();\n              const [formatId, formatDesc] = divide(value, \" \");\n              currentMedia.sctpMap[parseInt(formatId)] = formatDesc;\n              currentMedia.sctpPort = parseInt(formatId);\n              break;\n            case \"sctp-port\":\n              if (!value) throw new Error();\n              currentMedia.sctpPort = parseInt(value);\n              break;\n            case \"ssrc\":\n              const [ssrcStr, ssrcDesc] = divide(value, \" \");\n              const ssrc = parseInt(ssrcStr);\n              const [ssrcAttr, ssrcValue] = divide(ssrcDesc, \":\");\n              let ssrcInfo = currentMedia.ssrc.find((v) => v.ssrc === ssrc);\n              if (!ssrcInfo) {\n                ssrcInfo = new SsrcDescription({ ssrc });\n                currentMedia.ssrc.push(ssrcInfo);\n              }\n              if (SSRC_INFO_ATTRS.includes(ssrcAttr)) {\n                ssrcInfo[ssrcAttr] = ssrcValue;\n              }\n              break;\n            case \"ssrc-group\":\n              parseGroup(currentMedia.ssrcGroup, value);\n              break;\n            case \"rid\":\n              {\n                const [rid, direction] = divide(value, \" \");\n\n                currentMedia.simulcastParameters.push(\n                  new RTCRtpSimulcastParameters({\n                    rid,\n                    direction: direction as any,\n                  })\n                );\n              }\n              break;\n          }\n        }\n      });\n\n      if (\n        !currentMedia.iceParams.usernameFragment ||\n        !currentMedia.iceParams.password\n      ) {\n        if (\n          currentMedia.rtp.muxId &&\n          bundle &&\n          bundle.items.includes(currentMedia.rtp.muxId)\n        ) {\n          for (let i = 0; i < bundle.items.length; i++) {\n            if (!bundle.items.includes(i.toString())) continue;\n            const check = session.media[i];\n            if (\n              check?.iceParams &&\n              check.iceParams.usernameFragment &&\n              check.iceParams.password\n            ) {\n              currentMedia.iceParams = {\n                ...check.iceParams,\n              };\n              break;\n            }\n          }\n        }\n      }\n\n      if (!currentMedia.dtlsParams.role) {\n        currentMedia.dtlsParams = undefined;\n      }\n\n      const findCodec = (pt: number) =>\n        currentMedia.rtp.codecs.find((v) => v.payloadType === pt);\n\n      mediaLines.slice(1).forEach((line) => {\n        if (line.startsWith(\"a=\")) {\n          const [attr, value] = parseAttr(line);\n          if (attr === \"fmtp\") {\n            const [formatId, formatDesc] = divide(value, \" \");\n            const codec = findCodec(Number(formatId))!;\n            codec.parameters = formatDesc;\n          } else if (attr === \"rtcp-fb\") {\n            const [payloadType, feedbackType, feedbackParam] = value.split(\" \");\n            currentMedia.rtp.codecs.forEach((codec) => {\n              if ([\"*\", codec.payloadType!.toString()].includes(payloadType)) {\n                codec.rtcpFeedback.push(\n                  new RTCRtcpFeedback({\n                    type: feedbackType,\n                    parameter: feedbackParam,\n                  })\n                );\n              }\n            });\n          }\n        }\n      });\n    });\n\n    return session;\n  }\n\n  webrtcTrackId(media: MediaDescription) {\n    if (media.msid && media.msid.includes(\" \")) {\n      const bits = media.msid.split(\" \");\n      for (const group of this.msidSemantic) {\n        if (\n          group.semantic === \"WMS\" &&\n          (group.items.includes(bits[0]) || group.items.includes(\"*\"))\n        ) {\n          return bits[1];\n        }\n      }\n    }\n    return;\n  }\n\n  get string() {\n    const lines = [`v=${this.version}`, `o=${this.origin}`, `s=${this.name}`];\n    if (this.host) {\n      lines.push(`c=${ipAddressToSdp(this.host)}`);\n    }\n    lines.push(`t=${this.time}`);\n    this.group.forEach((group) => lines.push(`a=group:${group.str}`));\n    if (this.extMapAllowMixed) {\n      lines.push(`a=extmap-allow-mixed`);\n    }\n    this.msidSemantic.forEach((group) =>\n      lines.push(`a=msid-semantic:${group.str}`)\n    );\n    const media = this.media.map((m) => m.toString()).join(\"\");\n    const sdp = lines.join(\"\\r\\n\") + \"\\r\\n\" + media;\n    return sdp;\n  }\n\n  toJSON() {\n    return new RTCSessionDescription(this.string, this.type);\n  }\n}\n\nexport class MediaDescription {\n  // rtp\n  host?: string;\n  direction?: Direction;\n  msid?: string;\n\n  // rtcp\n  rtcpPort?: number;\n  rtcpHost?: string;\n  rtcpMux = false;\n\n  // ssrc\n  ssrc: SsrcDescription[] = [];\n  ssrcGroup: GroupDescription[] = [];\n\n  // formats\n  rtp: RTCRtpParameters = { codecs: [], headerExtensions: [] };\n\n  // sctp\n  sctpCapabilities?: RTCSctpCapabilities;\n  sctpMap: { [key: number]: string } = {};\n  sctpPort?: number;\n\n  // DTLS\n  dtlsParams?: RTCDtlsParameters;\n\n  // ICE\n  iceParams?: RTCIceParameters;\n  iceCandidates: IceCandidate[] = [];\n  iceCandidatesComplete = false;\n  iceOptions?: string;\n\n  // Simulcast\n  simulcastParameters: RTCRtpSimulcastParameters[] = [];\n\n  constructor(\n    public kind: Kind,\n    public port: number,\n    public profile: string,\n    public fmt: string[] | number[]\n  ) {}\n\n  toString() {\n    const lines: string[] = [];\n    lines.push(\n      `m=${this.kind} ${this.port} ${this.profile} ${(this.fmt as number[])\n        .map((v) => v.toString())\n        .join(\" \")}`\n    );\n    if (this.host) {\n      lines.push(`c=${ipAddressToSdp(this.host)}`);\n    }\n    // ice\n    this.iceCandidates.forEach((candidate) => {\n      lines.push(`a=candidate:${candidateToSdp(candidate)}`);\n    });\n    if (this.iceCandidatesComplete) {\n      lines.push(\"a=end-of-candidates\");\n    }\n    if (this.iceParams?.usernameFragment) {\n      lines.push(`a=ice-ufrag:${this.iceParams.usernameFragment}`);\n    }\n    if (this.iceParams?.password) {\n      lines.push(`a=ice-pwd:${this.iceParams.password}`);\n    }\n    if (this.iceParams?.iceLite) {\n      lines.push(`a=ice-lite`);\n    }\n    if (this.iceOptions) {\n      lines.push(`a=ice-options:${this.iceOptions}`);\n    }\n\n    // dtls\n    if (this.dtlsParams) {\n      this.dtlsParams.fingerprints.forEach((fingerprint) => {\n        lines.push(\n          `a=fingerprint:${fingerprint.algorithm} ${fingerprint.value}`\n        );\n      });\n      lines.push(`a=setup:${DTLS_ROLE_SETUP[this.dtlsParams.role]}`);\n    }\n\n    if (this.direction) {\n      lines.push(`a=${this.direction}`);\n    }\n    if (this.rtp.muxId) {\n      lines.push(`a=mid:${this.rtp.muxId}`);\n    }\n    if (this.msid) {\n      lines.push(`a=msid:${this.msid}`);\n    }\n\n    if (this.rtcpPort && this.rtcpHost) {\n      lines.push(`a=rtcp:${this.rtcpPort} ${ipAddressToSdp(this.rtcpHost)}`);\n      if (this.rtcpMux) {\n        lines.push(\"a=rtcp-mux\");\n      }\n    }\n\n    this.ssrcGroup.forEach((group) => {\n      lines.push(`a=ssrc-group:${group.str}`);\n    });\n    this.ssrc.forEach((ssrcInfo) => {\n      SSRC_INFO_ATTRS.forEach((ssrcAttr) => {\n        const ssrcValue = ssrcInfo[ssrcAttr];\n        if (ssrcValue !== undefined) {\n          lines.push(`a=ssrc:${ssrcInfo.ssrc} ${ssrcAttr}:${ssrcValue}`);\n        }\n      });\n    });\n\n    this.rtp.codecs.forEach((codec) => {\n      lines.push(`a=rtpmap:${codec.payloadType} ${codec.str}`);\n\n      codec.rtcpFeedback.forEach((feedback) => {\n        let value = feedback.type;\n        if (feedback.parameter) value += ` ${feedback.parameter}`;\n        lines.push(`a=rtcp-fb:${codec.payloadType} ${value}`);\n      });\n\n      if (codec.parameters) {\n        lines.push(`a=fmtp:${codec.payloadType} ${codec.parameters}`);\n      }\n    });\n\n    Object.keys(this.sctpMap).forEach((k) => {\n      const v = this.sctpMap[Number(k)];\n      lines.push(`a=sctpmap:${k} ${v}`);\n    });\n    if (this.sctpPort) {\n      lines.push(`a=sctp-port:${this.sctpPort}`);\n    }\n    if (this.sctpCapabilities) {\n      lines.push(`a=max-message-size:${this.sctpCapabilities.maxMessageSize}`);\n    }\n\n    // rtp extension\n    this.rtp.headerExtensions.forEach((extension) =>\n      lines.push(`a=extmap:${extension.id} ${extension.uri}`)\n    );\n\n    // simulcast\n    if (this.simulcastParameters.length) {\n      this.simulcastParameters.forEach((param) => {\n        lines.push(`a=rid:${param.rid} ${param.direction}`);\n      });\n      let line = `a=simulcast:`;\n      const recv = this.simulcastParameters.filter(\n        (v) => v.direction === \"recv\"\n      );\n      if (recv.length) {\n        line += `recv ${recv.map((v) => v.rid).join(\";\")} `;\n      }\n      const send = this.simulcastParameters.filter(\n        (v) => v.direction === \"send\"\n      );\n      if (send.length) {\n        line += `send ${send.map((v) => v.rid).join(\";\")}`;\n      }\n\n      lines.push(line);\n    }\n\n    return lines.join(\"\\r\\n\") + \"\\r\\n\";\n  }\n}\n\nexport class GroupDescription {\n  constructor(public semantic: string, public items: string[]) {}\n\n  get str() {\n    return `${this.semantic} ${this.items.join(\" \")}`;\n  }\n}\n\nfunction ipAddressFromSdp(sdp: string) {\n  const m = sdp.match(/^IN (IP4|IP6) ([^ ]+)$/);\n  if (!m) throw new Error(\"exception\");\n  return m[2];\n}\n\nfunction ipAddressToSdp(addr: string) {\n  const version = isIPv4(addr) ? 4 : 6;\n  return `IN IP${version} ${addr}`;\n}\n\nexport function candidateToSdp(c: IceCandidate) {\n  let sdp = `${c.foundation} ${c.component} ${c.protocol} ${c.priority} ${c.ip} ${c.port} typ ${c.type}`;\n  if (c.relatedAddress) {\n    sdp += ` raddr ${c.relatedAddress}`;\n  }\n  if (c.relatedPort) {\n    sdp += ` rport ${c.relatedPort}`;\n  }\n  if (c.tcpType) {\n    sdp += ` tcptype ${c.tcpType}`;\n  }\n  return sdp;\n}\n\nfunction groupLines(sdp: string): [string[], string[][]] {\n  const session: string[] = [];\n  const media: string[][] = [];\n\n  let lines = sdp.split(\"\\r\\n\");\n  if (lines.length === 1) {\n    lines = sdp.split(\"\\n\");\n  }\n\n  lines.forEach((line) => {\n    if (line.startsWith(\"m=\")) {\n      media.push([line]);\n    } else if (media.length > 0) {\n      media[media.length - 1].push(line);\n    } else {\n      session.push(line);\n    }\n  });\n\n  return [session, media];\n}\n\nfunction parseAttr(line: string): [string, string] {\n  if (line.includes(\":\")) {\n    const bits = divide(line.slice(2), \":\");\n    return [bits[0], bits[1]];\n  } else {\n    return [line.slice(2), undefined as any];\n  }\n}\n\nexport function parseGroup(\n  dest: GroupDescription[],\n  value: string,\n  type: (v: string) => any = (v) => v.toString()\n) {\n  const bits = value.split(\" \");\n  if (bits.length > 0) {\n    dest.push(new GroupDescription(bits[0], bits.slice(1).map(type)));\n  }\n}\n\nexport function candidateFromSdp(sdp: string) {\n  const bits = sdp.split(\" \");\n  if (bits.length < 8) {\n    throw new Error();\n  }\n\n  const candidate = new IceCandidate(\n    parseInt(bits[1], 10),\n    bits[0],\n    bits[4],\n    parseInt(bits[5], 10),\n    parseInt(bits[3], 10),\n    bits[2],\n    bits[7]\n  );\n\n  range(8, bits.length - 1, 2).forEach((i) => {\n    switch (bits[i]) {\n      case \"raddr\":\n        candidate.relatedAddress = bits[i + 1];\n        break;\n      case \"rport\":\n        candidate.relatedPort = parseInt(bits[i + 1]);\n        break;\n      case \"tcptype\":\n        candidate.tcpType = bits[i + 1];\n        break;\n    }\n  });\n\n  return candidate;\n}\n\nexport class RTCSessionDescription {\n  constructor(public sdp: string, public type: \"offer\" | \"answer\") {}\n  static isThis(o: any) {\n    if (typeof o?.sdp === \"string\") return true;\n  }\n}\n\nexport function addSDPHeader(\n  type: \"offer\" | \"answer\",\n  description: SessionDescription\n) {\n  const username = \"-\";\n  const sessionId = new Uint64BE(randomBytes(64)).toString().slice(0, 8);\n  const sessionVersion = 0;\n\n  description.origin = `${username} ${sessionId} ${sessionVersion} IN IP4 0.0.0.0`;\n  description.msidSemantic.push(new GroupDescription(\"WMS\", [\"*\"]));\n  description.type = type;\n}\n\nexport function codecParametersFromString(str: string) {\n  const parameters = {};\n  str.split(\";\").forEach((param) => {\n    if (param.includes(\"=\")) {\n      const [k, v] = divide(param, \"=\");\n      if (FMTP_INT_PARAMETERS.includes(k)) {\n        parameters[k] = Number(v);\n      } else {\n        parameters[k] = v;\n      }\n    } else {\n      parameters[param] = undefined;\n    }\n  });\n  return parameters;\n}\n\nexport function codecParametersToString(parameters: {\n  [key: string]: string | number;\n}) {\n  const params = Object.entries(parameters).map(([k, v]) => {\n    if (v) return `${k}=${v}`;\n    else return k;\n  });\n  if (params.length > 0) {\n    return params.join(\";\");\n  }\n  return undefined;\n}\n\nexport class SsrcDescription {\n  ssrc!: number;\n  cname?: string;\n  msid?: string;\n  msLabel?: string;\n  label?: string;\n\n  constructor(props: Partial<SsrcDescription>) {\n    Object.assign(this, props);\n  }\n}\n","import { Certificate, PrivateKey } from \"@fidm/x509\";\nimport debug from \"debug\";\nimport Event from \"rx.mini\";\nimport { setTimeout } from \"timers/promises\";\nimport { v4 } from \"uuid\";\n\nimport {\n  DtlsClient,\n  DtlsServer,\n  DtlsSocket,\n  Transport,\n} from \"../../../dtls/src\";\nimport {\n  HashAlgorithm,\n  NamedCurveAlgorithm,\n  SignatureAlgorithm,\n  SignatureHash,\n} from \"../../../dtls/src/cipher/const\";\nimport { CipherContext } from \"../../../dtls/src/context/cipher\";\nimport { Profile } from \"../../../dtls/src/context/srtp\";\nimport { Connection } from \"../../../ice/src\";\nimport {\n  isRtcp,\n  RtcpPacket,\n  RtcpPacketConverter,\n  RtpHeader,\n  RtpPacket,\n  SrtcpSession,\n  SrtpSession,\n} from \"../../../rtp/src\";\nimport { keyLength, saltLength } from \"../../../rtp/src/srtp/const\";\nimport { RtpRouter } from \"../media/router\";\nimport { PeerConfig } from \"../peerConnection\";\nimport { fingerprint, isDtls, isMedia } from \"../utils\";\nimport { RTCIceTransport } from \"./ice\";\n\nconst log = debug(\"werift:packages/webrtc/src/transport/dtls.ts\");\n\nexport class RTCDtlsTransport {\n  id = v4();\n  state: DtlsState = \"new\";\n  role: DtlsRole = \"auto\";\n  srtpStarted = false;\n  transportSequenceNumber = 0;\n\n  dataReceiver: (buf: Buffer) => void = () => {};\n  dtls?: DtlsSocket;\n  srtp!: SrtpSession;\n  srtcp!: SrtcpSession;\n\n  readonly onStateChange = new Event<[DtlsState]>();\n\n  localCertificate?: RTCCertificate;\n  private remoteParameters?: RTCDtlsParameters;\n\n  constructor(\n    readonly config: PeerConfig,\n    readonly iceTransport: RTCIceTransport,\n    readonly router: RtpRouter,\n    readonly certificates: RTCCertificate[],\n    private readonly srtpProfiles: Profile[] = []\n  ) {\n    this.localCertificate = this.certificates[0];\n  }\n\n  get localParameters() {\n    return new RTCDtlsParameters(\n      this.localCertificate ? this.localCertificate.getFingerprints() : [],\n      this.role\n    );\n  }\n\n  async setupCertificate() {\n    if (!this.localCertificate) {\n      const { certPem, keyPem, signatureHash } =\n        await CipherContext.createSelfSignedCertificateWithKey(\n          {\n            signature: SignatureAlgorithm.ecdsa_3,\n            hash: HashAlgorithm.sha256_4,\n          },\n          NamedCurveAlgorithm.secp256r1_23\n        );\n      this.localCertificate = new RTCCertificate(\n        keyPem,\n        certPem,\n        signatureHash\n      );\n    }\n    return this.localCertificate;\n  }\n\n  setRemoteParams(remoteParameters: RTCDtlsParameters) {\n    this.remoteParameters = remoteParameters;\n  }\n\n  async start() {\n    if (this.state !== \"new\") throw new Error();\n    if (this.remoteParameters?.fingerprints.length === 0) throw new Error();\n\n    if (this.role === \"auto\") {\n      if (this.iceTransport.role === \"controlling\") {\n        this.role = \"server\";\n      } else {\n        this.role = \"client\";\n      }\n    }\n\n    this.setState(\"connecting\");\n\n    await new Promise<void>(async (r) => {\n      if (this.role === \"server\") {\n        this.dtls = new DtlsServer({\n          cert: this.localCertificate?.certPem,\n          key: this.localCertificate?.privateKey,\n          signatureHash: this.localCertificate?.signatureHash,\n          transport: createIceTransport(this.iceTransport.connection),\n          srtpProfiles: this.srtpProfiles,\n          extendedMasterSecret: true,\n          // certificateRequest: true,\n        });\n      } else {\n        this.dtls = new DtlsClient({\n          cert: this.localCertificate?.certPem,\n          key: this.localCertificate?.privateKey,\n          signatureHash: this.localCertificate?.signatureHash,\n          transport: createIceTransport(this.iceTransport.connection),\n          srtpProfiles: this.srtpProfiles,\n          extendedMasterSecret: true,\n        });\n      }\n      this.dtls.onData.subscribe((buf) => {\n        if (\n          this.config.debug.inboundPacketLoss &&\n          this.config.debug.inboundPacketLoss / 100 < Math.random()\n        ) {\n          return;\n        }\n        this.dataReceiver(buf);\n      });\n      this.dtls.onClose.subscribe(() => {\n        this.setState(\"closed\");\n      });\n      this.dtls.onConnect.once(r);\n      this.dtls.onError.subscribe((error) => {\n        this.setState(\"failed\");\n        log(\"dtls failed\", error);\n      });\n\n      if (this.dtls instanceof DtlsClient) {\n        await setTimeout(100);\n        this.dtls.connect().catch((error) => {\n          this.setState(\"failed\");\n          log(\"dtls connect failed\", error);\n        });\n      }\n    });\n\n    if (this.srtpProfiles.length > 0) {\n      this.startSrtp();\n    }\n    this.dtls!.onConnect.subscribe(() => {\n      this.updateSrtpSession();\n      this.setState(\"connected\");\n    });\n    this.setState(\"connected\");\n\n    log(\"dtls connected\");\n  }\n\n  updateSrtpSession() {\n    if (!this.dtls) throw new Error();\n\n    const profile = this.dtls.srtp.srtpProfile;\n    if (!profile) {\n      throw new Error(\"need srtpProfile\");\n    }\n    log(\"selected SRTP Profile\", profile);\n\n    const { localKey, localSalt, remoteKey, remoteSalt } =\n      this.dtls.extractSessionKeys(keyLength(profile), saltLength(profile));\n\n    const config = {\n      keys: {\n        localMasterKey: localKey,\n        localMasterSalt: localSalt,\n        remoteMasterKey: remoteKey,\n        remoteMasterSalt: remoteSalt,\n      },\n      profile,\n    };\n    this.srtp = new SrtpSession(config);\n    this.srtcp = new SrtcpSession(config);\n  }\n\n  startSrtp() {\n    if (this.srtpStarted) return;\n    this.srtpStarted = true;\n\n    this.updateSrtpSession();\n\n    this.iceTransport.connection.onData.subscribe((data) => {\n      if (\n        this.config.debug.inboundPacketLoss &&\n        this.config.debug.inboundPacketLoss / 100 < Math.random()\n      ) {\n        return;\n      }\n\n      if (!isMedia(data)) return;\n      if (isRtcp(data)) {\n        const dec = this.srtcp.decrypt(data);\n        const rtcps = RtcpPacketConverter.deSerialize(dec);\n        rtcps.forEach((rtcp) => this.router.routeRtcp(rtcp));\n      } else {\n        const dec = this.srtp.decrypt(data);\n        const rtp = RtpPacket.deSerialize(dec);\n        try {\n          this.router.routeRtp(rtp);\n        } catch (error) {\n          log(\"router error\", error);\n        }\n      }\n    });\n  }\n\n  readonly sendData = async (data: Buffer) => {\n    if (\n      this.config.debug.outboundPacketLoss &&\n      this.config.debug.outboundPacketLoss / 100 < Math.random()\n    ) {\n      return;\n    }\n\n    if (!this.dtls) {\n      throw new Error(\"dtls not established\");\n    }\n    await this.dtls.send(data);\n  };\n\n  async sendRtp(payload: Buffer, header: RtpHeader): Promise<number> {\n    const enc = this.srtp.encrypt(payload, header);\n\n    if (\n      this.config.debug.outboundPacketLoss &&\n      this.config.debug.outboundPacketLoss / 100 < Math.random()\n    ) {\n      return enc.length;\n    }\n\n    await this.iceTransport.connection.send(enc).catch(() => {});\n    return enc.length;\n  }\n\n  async sendRtcp(packets: RtcpPacket[]) {\n    const payload = Buffer.concat(packets.map((packet) => packet.serialize()));\n    const enc = this.srtcp.encrypt(payload);\n\n    if (\n      this.config.debug.outboundPacketLoss &&\n      this.config.debug.outboundPacketLoss / 100 < Math.random()\n    ) {\n      return enc.length;\n    }\n\n    await this.iceTransport.connection.send(enc).catch(() => {});\n  }\n\n  private setState(state: DtlsState) {\n    if (state != this.state) {\n      this.state = state;\n      this.onStateChange.execute(state);\n    }\n  }\n\n  async stop() {\n    this.setState(\"closed\");\n    // todo impl send alert\n  }\n}\n\nexport const DtlsStates = [\n  \"new\",\n  \"connecting\",\n  \"connected\",\n  \"closed\",\n  \"failed\",\n] as const;\nexport type DtlsState = typeof DtlsStates[number];\n\nexport type DtlsRole = \"auto\" | \"server\" | \"client\";\n\nexport class RTCCertificate {\n  publicKey: string;\n  privateKey: string;\n\n  constructor(\n    privateKeyPem: string,\n    public certPem: string,\n    public signatureHash: SignatureHash\n  ) {\n    const cert = Certificate.fromPEM(Buffer.from(certPem));\n    this.publicKey = cert.publicKey.toPEM();\n    this.privateKey = PrivateKey.fromPEM(Buffer.from(privateKeyPem)).toPEM();\n  }\n\n  getFingerprints(): RTCDtlsFingerprint[] {\n    return [\n      new RTCDtlsFingerprint(\n        \"sha-256\",\n        fingerprint(\n          Certificate.fromPEM(Buffer.from(this.certPem)).raw,\n          \"sha256\"\n        )\n      ),\n    ];\n  }\n}\n\nexport type DtlsKeys = {\n  certPem: string;\n  keyPem: string;\n  signatureHash: SignatureHash;\n};\n\nexport class RTCDtlsFingerprint {\n  constructor(public algorithm: string, public value: string) {}\n}\n\nexport class RTCDtlsParameters {\n  constructor(\n    public fingerprints: RTCDtlsFingerprint[] = [],\n    public role: \"auto\" | \"client\" | \"server\"\n  ) {}\n}\n\nclass IceTransport implements Transport {\n  constructor(private ice: Connection) {\n    ice.onData.subscribe((buf) => {\n      if (isDtls(buf)) {\n        if (this.onData) this.onData(buf);\n      }\n    });\n  }\n  onData?: (buf: Buffer) => void;\n\n  readonly send = (data: Buffer) => {\n    return this.ice.send(data);\n  };\n\n  close() {\n    this.ice.close();\n  }\n}\n\nconst createIceTransport = (ice: Connection) => new IceTransport(ice);\n","import debug from \"debug\";\nimport Event from \"rx.mini\";\nimport { v4 } from \"uuid\";\n\nimport { Candidate, Connection, IceOptions } from \"../../../ice/src\";\nimport { candidateFromSdp, candidateToSdp } from \"../sdp\";\n\nconst log = debug(\"werift:packages/webrtc/src/transport/ice.ts\");\n\nexport class RTCIceTransport {\n  readonly id = v4();\n  connection: Connection;\n  state: RTCIceConnectionState = \"new\";\n\n  readonly onStateChange = new Event<[RTCIceConnectionState]>();\n\n  private waitStart?: Event<[]>;\n\n  constructor(private gather: RTCIceGatherer) {\n    this.connection = this.gather.connection;\n    this.connection.stateChanged.subscribe((state) => {\n      this.setState(state);\n    });\n  }\n\n  get iceGather() {\n    return this.gather;\n  }\n\n  get role() {\n    if (this.connection.iceControlling) return \"controlling\";\n    else return \"controlled\";\n  }\n\n  private setState(state: RTCIceConnectionState) {\n    if (state !== this.state) {\n      this.state = state;\n\n      if (this.onStateChange.ended) return;\n\n      if (state === \"closed\") {\n        this.onStateChange.execute(state);\n        this.onStateChange.complete();\n      } else {\n        this.onStateChange.execute(state);\n      }\n    }\n  }\n\n  addRemoteCandidate = (candidate?: IceCandidate) => {\n    if (!this.connection.remoteCandidatesEnd) {\n      if (!candidate) {\n        return this.connection.addRemoteCandidate(undefined);\n      } else {\n        return this.connection.addRemoteCandidate(candidateToIce(candidate));\n      }\n    }\n  };\n\n  setRemoteParams(remoteParameters: RTCIceParameters) {\n    if (\n      this.connection.remoteUsername &&\n      this.connection.remotePassword &&\n      (this.connection.remoteUsername !== remoteParameters.usernameFragment ||\n        this.connection.remotePassword !== remoteParameters.password)\n    ) {\n      log(\"restartIce\", remoteParameters);\n      this.connection.resetNominatedPair();\n    }\n    this.connection.setRemoteParams(remoteParameters);\n  }\n\n  async start() {\n    if (this.state === \"closed\") throw new Error(\"RTCIceTransport is closed\");\n    if (!this.connection.remotePassword || !this.connection.remoteUsername)\n      throw new Error(\"remoteParams missing\");\n\n    if (this.waitStart) await this.waitStart.asPromise();\n    this.waitStart = new Event();\n\n    this.setState(\"checking\");\n\n    try {\n      await this.connection.connect();\n    } catch (error) {\n      this.setState(\"failed\");\n      throw error;\n    }\n\n    this.waitStart.complete();\n  }\n\n  async stop() {\n    if (this.state !== \"closed\") {\n      this.setState(\"closed\");\n      await this.connection.close();\n    }\n  }\n}\n\nexport const IceTransportStates = [\n  \"new\",\n  \"checking\",\n  \"connected\",\n  \"completed\",\n  \"disconnected\",\n  \"failed\",\n  \"closed\",\n] as const;\nexport type RTCIceConnectionState = typeof IceTransportStates[number];\n\nexport const IceGathererStates = [\"new\", \"gathering\", \"complete\"] as const;\nexport type IceGathererState = typeof IceGathererStates[number];\n\nexport class RTCIceGatherer {\n  onIceCandidate: (candidate: IceCandidate) => void = () => {};\n  gatheringState: IceGathererState = \"new\";\n\n  readonly onGatheringStateChange = new Event<[IceGathererState]>();\n  readonly connection: Connection;\n\n  constructor(private options: Partial<IceOptions> = {}) {\n    this.connection = new Connection(false, this.options);\n  }\n\n  async gather() {\n    if (this.gatheringState === \"new\") {\n      this.setState(\"gathering\");\n      await this.connection.gatherCandidates((candidate) =>\n        this.onIceCandidate(candidateFromIce(candidate))\n      );\n      this.setState(\"complete\");\n    }\n  }\n\n  get localCandidates() {\n    return this.connection.localCandidates.map(candidateFromIce);\n  }\n\n  get localParameters() {\n    const params = new RTCIceParameters({\n      usernameFragment: this.connection.localUserName,\n      password: this.connection.localPassword,\n    });\n\n    return params;\n  }\n\n  private setState(state: IceGathererState) {\n    if (state !== this.gatheringState) {\n      this.gatheringState = state;\n      this.onGatheringStateChange.execute(state);\n    }\n  }\n}\n\nexport function candidateFromIce(c: Candidate) {\n  const candidate = new IceCandidate(\n    c.component,\n    c.foundation,\n    c.host,\n    c.port,\n    c.priority,\n    c.transport,\n    c.type\n  );\n  candidate.relatedAddress = c.relatedAddress;\n  candidate.relatedPort = c.relatedPort;\n  candidate.tcpType = c.tcptype;\n  return candidate;\n}\n\nexport function candidateToIce(x: IceCandidate) {\n  return new Candidate(\n    x.foundation,\n    x.component,\n    x.protocol,\n    x.priority,\n    x.ip,\n    x.port,\n    x.type,\n    x.relatedAddress,\n    x.relatedPort,\n    x.tcpType\n  );\n}\n\nexport class RTCIceCandidate {\n  candidate!: string;\n  sdpMid?: string;\n  sdpMLineIndex?: number;\n\n  constructor(props: Partial<RTCIceCandidate>) {\n    Object.assign(this, props);\n  }\n\n  static isThis(o: any) {\n    if (typeof o?.candidate === \"string\") return true;\n  }\n\n  toJSON() {\n    return {\n      candidate: this.candidate,\n      sdpMid: this.sdpMid,\n      sdpMLineIndex: this.sdpMLineIndex,\n    };\n  }\n}\n\nexport class IceCandidate {\n  // \"\"\"\n  // The :class:`RTCIceCandidate` interface represents a candidate Interactive\n  // Connectivity Establishment (ICE) configuration which may be used to\n  // establish an RTCPeerConnection.\n  // \"\"\"\n  public relatedAddress?: string;\n  public relatedPort?: number;\n  public sdpMid?: string;\n  public sdpMLineIndex?: number;\n  public tcpType?: string;\n\n  constructor(\n    public component: number,\n    public foundation: string,\n    public ip: string,\n    public port: number,\n    public priority: number,\n    public protocol: string,\n    public type: string\n  ) {}\n\n  toJSON(): RTCIceCandidate {\n    return new RTCIceCandidate({\n      candidate: candidateToSdp(this),\n      sdpMLineIndex: this.sdpMLineIndex,\n      sdpMid: this.sdpMid,\n    });\n  }\n\n  static fromJSON(data: RTCIceCandidate) {\n    try {\n      const candidate = candidateFromSdp(data.candidate);\n      candidate.sdpMLineIndex = data.sdpMLineIndex;\n      candidate.sdpMid = data.sdpMid;\n      return candidate;\n    } catch (error) {}\n  }\n}\n\nexport class RTCIceParameters {\n  iceLite: boolean = false;\n  usernameFragment!: string;\n  password!: string;\n\n  constructor(props: Partial<RTCIceParameters> = {}) {\n    Object.assign(this, props);\n  }\n}\n","import debug from \"debug\";\nimport { jspack } from \"jspack\";\nimport { Event } from \"rx.mini\";\nimport * as uuid from \"uuid\";\n\nimport { SCTP, SCTP_STATE, Transport } from \"../../../sctp/src\";\nimport {\n  DATA_CHANNEL_ACK,\n  DATA_CHANNEL_OPEN,\n  DATA_CHANNEL_RELIABLE,\n  WEBRTC_BINARY,\n  WEBRTC_BINARY_EMPTY,\n  WEBRTC_DCEP,\n  WEBRTC_STRING,\n  WEBRTC_STRING_EMPTY,\n} from \"../const\";\nimport {\n  DCState,\n  RTCDataChannel,\n  RTCDataChannelParameters,\n} from \"../dataChannel\";\nimport { RTCDtlsTransport } from \"./dtls\";\n\nconst log = debug(\"werift:packages/webrtc/src/transport/sctp.ts\");\n\nexport class RTCSctpTransport {\n  dtlsTransport!: RTCDtlsTransport;\n  sctp!: SCTP;\n\n  readonly onDataChannel = new Event<[RTCDataChannel]>();\n  readonly id = uuid.v4();\n\n  mid?: string;\n  mLineIndex?: number;\n  bundled = false;\n  dataChannels: { [key: number]: RTCDataChannel } = {};\n\n  private dataChannelQueue: [RTCDataChannel, number, Buffer][] = [];\n  private dataChannelId?: number;\n  private eventDisposer: (() => void)[] = [];\n\n  constructor(public port = 5000) {}\n\n  setDtlsTransport(dtlsTransport: RTCDtlsTransport) {\n    if (this.dtlsTransport && this.dtlsTransport.id === dtlsTransport.id) {\n      return;\n    }\n\n    this.eventDisposer.forEach((dispose) => dispose());\n\n    this.dtlsTransport = dtlsTransport;\n    this.sctp = new SCTP(new BridgeDtls(this.dtlsTransport), this.port);\n\n    this.eventDisposer = [\n      ...[\n        this.sctp.onReceive.subscribe(this.datachannelReceive),\n        this.sctp.onReconfigStreams.subscribe((ids: number[]) => {\n          ids.forEach((id) => {\n            const dc = this.dataChannels[id];\n            if (!dc) return;\n            // todo fix\n            dc.setReadyState(\"closing\");\n            dc.setReadyState(\"closed\");\n            delete this.dataChannels[id];\n          });\n        }),\n        this.sctp.stateChanged.connected.subscribe(() => {\n          Object.values(this.dataChannels).forEach((channel) => {\n            if (channel.negotiated && channel.readyState !== \"open\") {\n              channel.setReadyState(\"open\");\n            }\n          });\n          this.dataChannelFlush();\n        }),\n        this.sctp.stateChanged.closed.subscribe(() => {\n          Object.values(this.dataChannels).forEach((dc) => {\n            dc.setReadyState(\"closed\");\n          });\n          this.dataChannels = {};\n        }),\n        this.dtlsTransport.onStateChange.subscribe((state) => {\n          if (state === \"closed\") {\n            this.sctp.setState(SCTP_STATE.CLOSED);\n          }\n        }),\n      ].map((e) => e.unSubscribe),\n      () => (this.sctp.onSackReceived = async () => {}),\n    ];\n\n    this.sctp.onSackReceived = async () => {\n      await this.dataChannelFlush();\n    };\n  }\n\n  private get isServer() {\n    return this.dtlsTransport.iceTransport.role !== \"controlling\";\n  }\n\n  channelByLabel(label: string) {\n    return Object.values(this.dataChannels).find((d) => d.label === label);\n  }\n\n  private datachannelReceive = async (\n    streamId: number,\n    ppId: number,\n    data: Buffer\n  ) => {\n    if (ppId === WEBRTC_DCEP && data.length > 0) {\n      log(\"DCEP\", streamId, ppId, data);\n      switch (data[0]) {\n        case DATA_CHANNEL_OPEN:\n          {\n            if (data.length < 12) {\n              log(\"DATA_CHANNEL_OPEN data.length not enough\");\n              return;\n            }\n\n            if (!Object.keys(this.dataChannels).includes(streamId.toString())) {\n              const [\n                ,\n                channelType,\n                ,\n                reliability,\n                labelLength,\n                protocolLength,\n              ] = jspack.Unpack(\"!BBHLHH\", data);\n\n              let pos = 12;\n              const label = data.slice(pos, pos + labelLength).toString(\"utf8\");\n              pos += labelLength;\n              const protocol = data\n                .slice(pos, pos + protocolLength)\n                .toString(\"utf8\");\n\n              log(\"DATA_CHANNEL_OPEN\", {\n                channelType,\n                reliability,\n                streamId,\n                label,\n                protocol,\n              });\n\n              const maxRetransmits =\n                (channelType & 0x03) === 1 ? reliability : undefined;\n              const maxPacketLifeTime =\n                (channelType & 0x03) === 2 ? reliability : undefined;\n\n              // # register channel\n              const parameters = new RTCDataChannelParameters({\n                label,\n                ordered: (channelType & 0x80) === 0,\n                maxPacketLifeTime,\n                maxRetransmits,\n                protocol,\n                id: streamId,\n              });\n              const channel = new RTCDataChannel(this, parameters, false);\n              channel.isCreatedByRemote = true;\n              this.dataChannels[streamId] = channel;\n\n              this.onDataChannel.execute(channel);\n              channel.setReadyState(\"open\");\n            } else {\n              log(\"datachannel already opened\", \"retransmit ack\");\n            }\n\n            const channel = this.dataChannels[streamId];\n            this.dataChannelQueue.push([\n              channel,\n              WEBRTC_DCEP,\n              Buffer.from(jspack.Pack(\"!B\", [DATA_CHANNEL_ACK])),\n            ]);\n            await this.dataChannelFlush();\n          }\n          break;\n        case DATA_CHANNEL_ACK:\n          log(\"DATA_CHANNEL_ACK\", streamId, ppId);\n          const channel = this.dataChannels[streamId];\n          if (!channel) {\n            throw new Error(\"channel not found\");\n          }\n          channel.setReadyState(\"open\");\n          break;\n      }\n    } else {\n      const channel = this.dataChannels[streamId];\n      if (channel) {\n        const msg = (() => {\n          switch (ppId) {\n            case WEBRTC_STRING:\n              return data.toString(\"utf8\");\n            case WEBRTC_STRING_EMPTY:\n              return \"\";\n            case WEBRTC_BINARY:\n              return data;\n            case WEBRTC_BINARY_EMPTY:\n              return Buffer.from([]);\n            default:\n              throw new Error();\n          }\n        })();\n\n        channel.message.execute(msg);\n        channel.emit(\"message\", { data: msg });\n        if (channel.onmessage) {\n          channel.onmessage({ data: msg });\n        }\n      }\n    }\n  };\n\n  dataChannelAddNegotiated(channel: RTCDataChannel) {\n    if (channel.id == undefined) {\n      throw new Error();\n    }\n    if (this.dataChannels[channel.id]) {\n      throw new Error();\n    }\n\n    this.dataChannels[channel.id] = channel;\n\n    if (this.sctp.associationState === SCTP_STATE.ESTABLISHED) {\n      channel.setReadyState(\"open\");\n    }\n  }\n\n  dataChannelOpen(channel: RTCDataChannel) {\n    if (channel.id) {\n      if (this.dataChannels[channel.id])\n        throw new Error(\n          `Data channel with ID ${channel.id} already registered`\n        );\n      this.dataChannels[channel.id] = channel;\n    }\n\n    let channelType = DATA_CHANNEL_RELIABLE;\n    const priority = 0;\n    let reliability = 0;\n\n    if (!channel.ordered) {\n      channelType = 0x80;\n    }\n    if (channel.maxRetransmits) {\n      channelType = 1;\n      reliability = channel.maxRetransmits;\n    } else if (channel.maxPacketLifeTime) {\n      channelType = 2;\n      reliability = channel.maxPacketLifeTime;\n    }\n\n    // 5.1.  DATA_CHANNEL_OPEN Message\n    const data = jspack.Pack(\"!BBHLHH\", [\n      DATA_CHANNEL_OPEN,\n      channelType,\n      priority,\n      reliability,\n      channel.label.length,\n      channel.protocol.length,\n    ]);\n    const send = Buffer.concat([\n      Buffer.from(data),\n      Buffer.from(channel.label, \"utf8\"),\n      Buffer.from(channel.protocol, \"utf8\"),\n    ]);\n    this.dataChannelQueue.push([channel, WEBRTC_DCEP, send]);\n    this.dataChannelFlush();\n  }\n\n  private async dataChannelFlush() {\n    // \"\"\"\n    // Try to flush buffered data to the SCTP layer.\n\n    // We wait until the association is established, as we need to know\n    // whether we are a client or a server to correctly assign an odd/even ID\n    // to the data channels.\n    // \"\"\"\n\n    if (this.sctp.associationState != SCTP_STATE.ESTABLISHED) return;\n    if (this.sctp.outboundQueue.length > 0) return;\n\n    while (this.dataChannelQueue.length > 0) {\n      const [channel, protocol, userData] = this.dataChannelQueue.shift()!;\n\n      let streamId = channel.id;\n      if (streamId === undefined) {\n        streamId = this.dataChannelId!;\n        while (Object.keys(this.dataChannels).includes(streamId.toString())) {\n          streamId += 2;\n        }\n        this.dataChannels[streamId] = channel;\n        channel.setId(streamId);\n      }\n\n      if (protocol === WEBRTC_DCEP) {\n        await this.sctp.send(streamId, protocol, userData, {\n          ordered: true,\n        });\n      } else {\n        const expiry = channel.maxPacketLifeTime\n          ? Date.now() + channel.maxPacketLifeTime / 1000\n          : undefined;\n\n        await this.sctp.send(streamId, protocol, userData, {\n          expiry,\n          maxRetransmits: channel.maxRetransmits,\n          ordered: channel.ordered,\n        });\n        channel.addBufferedAmount(-userData.length);\n      }\n    }\n  }\n\n  datachannelSend = (channel: RTCDataChannel, data: Buffer | string) => {\n    channel.addBufferedAmount(data.length);\n\n    this.dataChannelQueue.push(\n      typeof data === \"string\"\n        ? [channel, WEBRTC_STRING, Buffer.from(data)]\n        : [channel, WEBRTC_BINARY, data]\n    );\n\n    if (this.sctp.associationState !== SCTP_STATE.ESTABLISHED) {\n      log(\"sctp not established\", this.sctp.associationState);\n    }\n\n    this.dataChannelFlush();\n  };\n\n  static getCapabilities() {\n    return new RTCSctpCapabilities(65536);\n  }\n\n  setRemotePort(port: number) {\n    this.sctp.setRemotePort(port);\n  }\n\n  async start(remotePort: number) {\n    if (this.isServer) {\n      this.dataChannelId = 0;\n    } else {\n      this.dataChannelId = 1;\n    }\n    this.sctp.isServer = this.isServer;\n\n    await this.sctp.start(remotePort);\n  }\n\n  async stop() {\n    this.dtlsTransport.dataReceiver = () => {};\n    await this.sctp.stop();\n  }\n\n  dataChannelClose(channel: RTCDataChannel) {\n    if (!([\"closing\", \"closed\"] as DCState[]).includes(channel.readyState)) {\n      channel.setReadyState(\"closing\");\n\n      if (this.sctp.associationState === SCTP_STATE.ESTABLISHED) {\n        this.sctp.reconfigQueue.push(channel.id);\n        if (this.sctp.reconfigQueue.length === 1) {\n          this.sctp.transmitReconfigRequest();\n        }\n      } else {\n        this.dataChannelQueue = this.dataChannelQueue.filter(\n          (queueItem) => queueItem[0].id !== channel.id\n        );\n        if (channel.id) {\n          delete this.dataChannels[channel.id];\n        }\n        channel.setReadyState(\"closed\");\n      }\n    }\n  }\n}\n\nexport class RTCSctpCapabilities {\n  constructor(public maxMessageSize: number) {}\n}\n\nclass BridgeDtls implements Transport {\n  constructor(private dtls: RTCDtlsTransport) {}\n  set onData(onData: (buf: Buffer) => void) {\n    this.dtls.dataReceiver = onData;\n  }\n  readonly send = (data: Buffer) => {\n    return this.dtls.sendData(data);\n  };\n  close() {}\n}\n","export type Kind = \"audio\" | \"video\" | \"application\" | \"unknown\";\n\nexport const SignalingStates = [\n  \"stable\",\n  \"have-local-offer\",\n  \"have-remote-offer\",\n  \"have-local-pranswer\",\n  \"have-remote-pranswer\",\n  \"closed\",\n] as const;\n\nexport type RTCSignalingState = typeof SignalingStates[number];\n\nexport const ConnectionStates = [\n  \"closed\",\n  \"failed\",\n  \"disconnected\",\n  \"new\",\n  \"connecting\",\n  \"connected\",\n] as const;\n\nexport type ConnectionState = typeof ConnectionStates[number];\n","/* eslint-disable prefer-const */\nimport { createHash } from \"crypto\";\nimport debug from \"debug\";\nimport { performance } from \"perf_hooks\";\n\nimport {\n  bufferReader,\n  bufferWriter,\n  random16,\n  random32,\n  uint16Add,\n  uint32Add,\n} from \"../../common/src\";\nimport { CipherContext } from \"../../dtls/src/context/cipher\";\nimport { Address } from \"../../ice/src\";\nimport { RtpHeader, RtpPacket } from \"../../rtp/src\";\nimport { Direction, Directions } from \"./media/rtpTransceiver\";\nimport { RTCIceServer } from \"./peerConnection\";\nconst now = require(\"nano-time\");\n\nconst log = debug(\"werift:packages/webrtc/src/utils.ts\");\n\nexport function fingerprint(file: Buffer, hashName: string) {\n  const upper = (s: string) => s.toUpperCase();\n  const colon = (s: any) => s.match(/(.{2})/g).join(\":\");\n\n  const hash = createHash(hashName).update(file).digest(\"hex\");\n\n  return colon(upper(hash));\n}\n\nexport function isDtls(buf: Buffer) {\n  const firstByte = buf[0];\n  return firstByte > 19 && firstByte < 64;\n}\n\nexport function isMedia(buf: Buffer) {\n  const firstByte = buf[0];\n  return firstByte > 127 && firstByte < 192;\n}\n\nexport function reverseSimulcastDirection(dir: \"recv\" | \"send\") {\n  if (dir === \"recv\") return \"send\";\n  return \"recv\";\n}\n\nexport const andDirection = (a: Direction, b: Direction) =>\n  Directions[Directions.indexOf(a) & Directions.indexOf(b)];\n\nexport function reverseDirection(dir: Direction): Direction {\n  if (dir === \"sendonly\") return \"recvonly\";\n  if (dir === \"recvonly\") return \"sendonly\";\n  return dir;\n}\n\nexport const microTime = () => now.micro() as number;\n\nexport const milliTime = () => new Date().getTime();\n\nexport const timestampSeconds = () => Date.now() / 1000;\n\n/**https://datatracker.ietf.org/doc/html/rfc3550#section-4 */\nexport const ntpTime = () => {\n  const now = performance.timeOrigin + performance.now() - Date.UTC(1900, 0, 1);\n\n  const seconds = now / 1000;\n  const [sec, msec] = seconds.toString().split(\".\").map(Number);\n\n  const buf = bufferWriter([4, 4], [sec, msec]);\n\n  return buf.readBigUInt64BE();\n};\n\n/**\n * https://datatracker.ietf.org/doc/html/rfc3550#section-4\n * @param ntp\n * @returns 32bit\n */\nexport const compactNtp = (ntp: bigint) => {\n  const buf = bufferWriter([8], [ntp]);\n  const [, sec, msec] = bufferReader(buf, [2, 2, 2, 2]);\n  return bufferWriter([2, 2], [sec, msec]).readUInt32BE();\n};\n\nexport function parseIceServers(iceServers: RTCIceServer[]) {\n  const url2Address = (url?: string) => {\n    if (!url) return;\n    const [address, port] = url.split(\":\");\n    return [address, parseInt(port)] as Address;\n  };\n\n  const stunServer = url2Address(\n    iceServers.find(({ urls }) => urls.includes(\"stun:\"))?.urls.slice(5)\n  );\n  const turnServer = url2Address(\n    iceServers.find(({ urls }) => urls.includes(\"turn:\"))?.urls.slice(5)\n  );\n  const { credential, username } =\n    iceServers.find(({ urls }) => urls.includes(\"turn:\")) || {};\n\n  const options = {\n    stunServer,\n    turnServer,\n    turnUsername: username,\n    turnPassword: credential,\n  };\n  log(\"iceOptions\", options);\n  return options;\n}\n\nexport class RtpBuilder {\n  sequenceNumber = random16();\n  timestamp = random32();\n\n  create(payload: Buffer) {\n    this.sequenceNumber = uint16Add(this.sequenceNumber, 1);\n    this.timestamp = uint32Add(this.timestamp, 960);\n\n    const header = new RtpHeader({\n      sequenceNumber: this.sequenceNumber,\n      timestamp: Number(this.timestamp),\n      payloadType: 96,\n      extension: true,\n      marker: false,\n      padding: false,\n    });\n    const rtp = new RtpPacket(header, payload);\n    return rtp;\n  }\n}\n\n/**\n *\n * @param signatureHash\n * @param namedCurveAlgorithm necessary when use ecdsa\n */\nexport const createSelfSignedCertificate =\n  CipherContext.createSelfSignedCertificateWithKey;\n","import { isNextSequenceNumber, JitterBuffer, RtpPacket } from \"./jitter-buffer\";\n\n// https://yumichan.net/video-processing/video-compression/introduction-to-h264-nal-unit/\nexport const NAL_TYPE_STAP_A = 24;\nexport const NAL_TYPE_FU_A = 28;\nexport const NAL_TYPE_NON_IDR = 1;\nexport const NAL_TYPE_IDR = 5;\nexport const NAL_TYPE_SEI = 6;\nexport const NAL_TYPE_SPS = 7;\nexport const NAL_TYPE_PPS = 8;\nexport const NAL_TYPE_DELIMITER = 9;\n\nconst NAL_HEADER_SIZE = 1;\nconst FU_A_HEADER_SIZE = 2;\nconst LENGTH_FIELD_SIZE = 2;\nconst STAP_A_HEADER_SIZE = NAL_HEADER_SIZE + LENGTH_FIELD_SIZE;\n\n\n// a stap a packet is a packet that aggregates multiple nals\nfunction depacketizeStapA(data: Buffer) {\n    const ret: Buffer[] = [];\n    let lastPos: number;\n    let pos = NAL_HEADER_SIZE;\n    while (pos < data.length) {\n        if (lastPos !== undefined)\n            ret.push(data.subarray(lastPos, pos));\n        const naluSize = data.readUInt16BE(pos);\n        pos += LENGTH_FIELD_SIZE;\n        lastPos = pos;\n        pos += naluSize;\n    }\n    ret.push(data.subarray(lastPos));\n    return ret;\n}\n\nexport function splitH264NaluStartCode(data: Buffer) {\n    const ret: Buffer[] = [];\n    let previous = 0;\n    let offset = 0;\n    const maybeAddSlice = () => {\n        const slice = data.subarray(previous, offset);\n        if (slice.length)\n            ret.push(slice);\n        offset += 4;\n        previous = offset;\n    }\n\n    while (offset < data.length - 4) {\n        const startCode = data.readUInt32BE(offset);\n        if (startCode === 1) {\n            maybeAddSlice();\n        }\n        else {\n            offset++;\n        }\n    }\n    offset = data.length;\n    maybeAddSlice();\n\n    return ret;\n}\n\nexport class H264Repacketizer {\n    extraPackets = 0;\n    fuaMax: number;\n    pendingFuA: RtpPacket[];\n    // log whether a stapa sps/pps has been seen.\n    // resets on every idr frame, to trigger codec information\n    // to be resent.\n    seenStapASps = false;\n    fuaMin: number;\n\n    constructor(public console: Console, public maxPacketSize: number, public codecInfo: {\n        sps: Buffer,\n        pps: Buffer,\n    }, public jitterBuffer = new JitterBuffer(console, 4)) {\n        // 12 is the rtp/srtp header size.\n        this.fuaMax = maxPacketSize - FU_A_HEADER_SIZE;\n        this.fuaMin = Math.round(maxPacketSize * .8);\n    }\n\n    ensureCodecInfo() {\n        if (!this.codecInfo) {\n            this.codecInfo = {\n                sps: undefined,\n                pps: undefined,\n            };\n        }\n    }\n\n    updateSps(sps: Buffer) {\n        this.ensureCodecInfo();\n        this.codecInfo.sps = sps;\n    }\n\n    updatePps(pps: Buffer) {\n        this.ensureCodecInfo();\n        this.codecInfo.pps = pps;\n    }\n\n    shouldFilter(nalType: number) {\n        // currently nothing is filtered, but it seems that some SEI packets cause issues\n        // and should be ignored, while others show up in the stap-a sps/pps packet\n        // and work just fine. unclear what these packets contain, but handling them properly\n        // is one of the last necessary steps to make the rtp sender reliable.\n        return false;\n        return nalType === NAL_TYPE_SEI;\n    }\n\n    // a fragmentation unit (fua) is a NAL unit broken into multiple fragments.\n    // https://datatracker.ietf.org/doc/html/rfc6184#section-5.8\n    packetizeFuA(data: Buffer, noStart?: boolean, noEnd?: boolean): Buffer[] {\n        // handle both normal packets and fua packets.\n        // a fua packet can be fragmented easily into smaller packets, as\n        // it is already a fragment, and splitting segments is\n        // trivial.\n\n        const initialNalType = data[0] & 0x1f;\n\n        if (initialNalType === NAL_TYPE_FU_A) {\n            const fnri = data[0] & (0x80 | 0x60);\n            const originalNalType = data[1] & 0x1f;\n            const isFuStart = !!(data[1] & 0x80);\n            const isFuEnd = !!(data[1] & 0x40);\n            const isFuMiddle = !isFuStart && !isFuEnd;\n\n            const originalNalHeader = Buffer.from([fnri | originalNalType]);\n            data = Buffer.concat([originalNalHeader, data.subarray(FU_A_HEADER_SIZE)]);\n\n            if (isFuStart) {\n                noEnd = true;\n            }\n            else if (isFuEnd) {\n                noStart = true;\n            }\n            else if (isFuMiddle) {\n                noStart = true;\n                noEnd = true;\n            }\n        }\n\n        const fnri = data[0] & (0x80 | 0x60);\n        const nalType = data[0] & 0x1F;\n\n        const fuIndicator = fnri | NAL_TYPE_FU_A;\n\n        const fuHeaderMiddle = Buffer.from([fuIndicator, nalType]);\n        const fuHeaderStart = noStart ? fuHeaderMiddle : Buffer.from([fuIndicator, nalType | 0x80]);\n        const fuHeaderEnd = noEnd ? fuHeaderMiddle : Buffer.from([fuIndicator, nalType | 0x40]);\n        let fuHeader = fuHeaderStart;\n\n        const packages: Buffer[] = [];\n        let offset = NAL_HEADER_SIZE;\n\n        while (offset < data.length) {\n            let payload: Buffer;\n            const packageSize = Math.min(this.fuaMax, data.length - offset);\n            payload = data.subarray(offset, offset + packageSize);\n            offset += packageSize;\n\n            if (offset === data.length) {\n                fuHeader = fuHeaderEnd;\n            }\n\n            packages.push(Buffer.concat([fuHeader, payload]));\n\n            fuHeader = fuHeaderMiddle;\n        }\n\n        return packages;\n    }\n\n    // https://datatracker.ietf.org/doc/html/rfc6184#section-5.7.1\n    packetizeOneStapA(datas: Buffer[]): Buffer {\n        const payload: Buffer[] = [];\n\n        if (!datas.length)\n            throw new Error('packetizeOneStapA requires at least one NAL');\n\n        let counter = 0;\n        let availableSize = this.maxPacketSize - STAP_A_HEADER_SIZE;\n\n        // h264/rtp spec: https://datatracker.ietf.org/doc/html/rfc6184#section-5.6\n        // The value of NRI MUST be the maximum of all the NAL units carried\n        // in the aggregation packet.\n\n        // homekit does not want NRI aggregation in the sps/pps stap-a for some reason?\n        const stapHeader = NAL_TYPE_STAP_A;\n\n        while (datas.length && datas[0].length + LENGTH_FIELD_SIZE <= availableSize && counter < 9) {\n            const nalu = datas.shift();\n            availableSize -= LENGTH_FIELD_SIZE + nalu.length;\n            counter += 1;\n            const packed = Buffer.alloc(2);\n            packed.writeUInt16BE(nalu.length, 0);\n            payload.push(packed, nalu);\n        }\n\n        // is this possible?\n        if (counter === 0) {\n            this.console.warn('stap a packet is too large. this may be a bug.');\n            return datas.shift();\n        }\n\n        payload.unshift(Buffer.from([stapHeader]));\n        return Buffer.concat(payload);\n    }\n\n    packetizeStapA(datas: Buffer[]) {\n        const ret: Buffer[] = [];\n        while (datas.length) {\n            ret.push(this.packetizeOneStapA(datas));\n        }\n        return ret;\n    }\n\n    createPacket(rtp: RtpPacket, data: Buffer, marker: boolean) {\n        const ret = rtp.clone();\n        ret.header.sequenceNumber = (rtp.header.sequenceNumber + this.extraPackets + 0x10000) % 0x10000;\n        ret.header.marker = marker;\n        ret.header.padding = false;\n        ret.payload = data;\n        if (data.length > this.maxPacketSize)\n            this.console.warn('packet exceeded max packet size. this may a bug.');\n        return ret;\n    }\n\n    flushPendingFuA(ret: RtpPacket[]) {\n        if (!this.pendingFuA)\n            return;\n\n        // defragmenting assumes packets are sorted by sequence number,\n        // and are all available, which is guaranteed over rtsp/tcp, but not over rtp/udp.\n        const first = this.pendingFuA[0];\n        const last = this.pendingFuA[this.pendingFuA.length - 1];\n        const originalNalType = first.payload[1] & 0x1f;\n        const hasFuStart = !!(first.payload[1] & 0x80);\n        const hasFuEnd = !!(last.payload[1] & 0x40);\n\n        const fnri = first.payload[0] & (0x80 | 0x60);\n        const originalNalHeader = Buffer.from([fnri | originalNalType]);\n\n        const getDefragmentedPendingFua = () => {\n            const originalFragments = this.pendingFuA.map(packet => packet.payload.subarray(FU_A_HEADER_SIZE));\n            originalFragments.unshift(originalNalHeader);\n            const defragmented = Buffer.concat(originalFragments);\n            return defragmented;\n        }\n\n        // have seen cameras that toss sps/pps/idr into a fua, delimited by start codes?\n        // this probably is not compliant...\n        // so the fua packet looks like:\n        // sps | start code | pps | start code | idr\n        if (originalNalType === NAL_TYPE_SPS) {\n            const defragmented = getDefragmentedPendingFua();\n\n            const splits = splitH264NaluStartCode(defragmented);\n            while (splits.length) {\n                const split = splits.shift();\n                const splitNaluType = split[0] & 0x1f;\n                if (splitNaluType === NAL_TYPE_SPS) {\n                    this.updateSps(split);\n                }\n                else if (splitNaluType === NAL_TYPE_PPS) {\n                    this.updatePps(split);\n                }\n                else {\n                    if (splitNaluType === NAL_TYPE_IDR)\n                        this.maybeSendSpsPps(first, ret);\n\n                    this.fragment(first, ret, {\n                        payload: split,\n                        noStart: !hasFuStart,\n                        noEnd: !hasFuEnd,\n                        marker: last.header.marker,\n                    });\n                }\n            }\n        }\n        else {\n            while (this.pendingFuA.length) {\n                const fua = this.pendingFuA[0];\n                if (fua.payload.length > this.maxPacketSize || fua.payload.length < this.fuaMin)\n                    break;\n                this.pendingFuA.shift();\n                ret.push(this.createPacket(fua, fua.payload, fua.header.marker));\n            }\n\n            if (!this.pendingFuA.length) {\n                this.pendingFuA = undefined;\n                return;\n            }\n\n            const first = this.pendingFuA[0];\n            const last = this.pendingFuA[this.pendingFuA.length - 1];\n            const hasFuStart = !!(first.payload[1] & 0x80);\n            const hasFuEnd = !!(last.payload[1] & 0x40);\n\n            const defragmented = getDefragmentedPendingFua();\n\n            this.fragment(first, ret, {\n                payload: defragmented,\n                noStart: !hasFuStart,\n                noEnd: !hasFuEnd,\n                marker: last.header.marker\n            });\n        }\n\n        this.extraPackets -= this.pendingFuA.length - 1;\n        this.pendingFuA = undefined;\n    }\n\n    createRtpPackets(packet: RtpPacket, nalus: Buffer[], ret: RtpPacket[], hadMarker = packet.header.marker) {\n        nalus.forEach((packetized, index) => {\n            if (index !== 0)\n                this.extraPackets++;\n            const marker = hadMarker && index === nalus.length - 1;\n            ret.push(this.createPacket(packet, packetized, marker));\n        });\n    }\n\n    maybeSendSpsPps(packet: RtpPacket, ret: RtpPacket[]) {\n        if (!this.codecInfo?.sps || !this.codecInfo?.pps)\n            return;\n\n        const aggregates = this.packetizeStapA([this.codecInfo.sps, this.codecInfo.pps]);\n        if (aggregates.length !== 1) {\n            this.console.error('expected only 1 packet for sps/pps stapa');\n            return;\n        }\n        this.createRtpPackets(packet, aggregates, ret);\n        this.extraPackets++;\n    }\n\n    // given the packet, fragment it into multiple packets as needed.\n    // a fragment of a payload may be provided via fuaOptions.\n    fragment(packet: RtpPacket, ret: RtpPacket[], fuaOptions: {\n        payload: Buffer;\n        noStart: boolean;\n        noEnd: boolean;\n        marker: boolean;\n    } = {\n            payload: packet.payload,\n            noStart: false,\n            noEnd: false,\n            marker: packet.header.marker\n        }) {\n        const { payload, noStart, noEnd, marker } = fuaOptions;\n        if (payload.length > this.maxPacketSize || noStart || noEnd) {\n            const fragments = this.packetizeFuA(payload, noStart, noEnd);\n            this.createRtpPackets(packet, fragments, ret, marker);\n        }\n        else {\n            // can send this packet as is!\n            ret.push(this.createPacket(packet, payload, marker));\n        }\n    }\n\n    repacketize<T extends RtpPacket>(packet: T): T[] {\n        const ret: T[] = [];\n        for (const dejittered of this.jitterBuffer.queue(packet)) {\n            this.repacketizeOne(dejittered, ret);\n        }\n        return ret;\n    }\n\n    repacketizeOne(packet: RtpPacket, ret: RtpPacket[]) {\n\n        // empty packets are apparently valid from webrtc. filter those out.\n        if (!packet.payload.length) {\n            this.flushPendingFuA(ret);\n            this.extraPackets--;\n            return;\n        }\n\n        const nalType = packet.payload[0] & 0x1F;\n\n        // fragmented packets must share a timestamp\n        if (this.pendingFuA && this.pendingFuA[0].header.timestamp !== packet.header.timestamp) {\n            this.flushPendingFuA(ret);\n        }\n\n        if (nalType === NAL_TYPE_FU_A) {\n            // ideally send the packets through as is from the upstream source.\n            // refragment only if the incoming fua packet is larger than\n            // the max packet size.\n\n            const data = packet.payload;\n            const originalNalType = data[1] & 0x1f;\n\n            if (this.shouldFilter(originalNalType)) {\n                this.extraPackets--;\n                return;\n            }\n\n            const isFuStart = !!(data[1] & 0x80);\n            const isFuEnd = !!(packet.payload[1] & 0x40);\n\n            if (isFuStart) {\n                if (this.pendingFuA)\n                    this.console.error('fua restarted. skipping refragmentation of previous fua.', originalNalType);\n\n                this.pendingFuA = undefined;\n\n                // if this is an idr frame, but no sps has been sent via a stapa, dummy one up.\n                // the stream may not contain codec information in stapa or may be sending it\n                // in separate sps/pps packets which is not supported by homekit.\n                if (originalNalType === NAL_TYPE_IDR) {\n                    if (!this.seenStapASps)\n                        this.maybeSendSpsPps(packet, ret);\n                    this.seenStapASps = false;\n                }\n\n            }\n            else {\n                if (this.pendingFuA) {\n                    // check if packet were missing earlier from the previously queued fua packets.\n                    // if so, don't queue the current packet.\n                    // all further fua packets will continue to be dropped until a later fua start\n                    // is received. the fua series up to the point of validity will then be flushed,\n                    // although it will be incomplete, it is valid.\n                    const last = this.pendingFuA[this.pendingFuA.length - 1];\n                    if (!isNextSequenceNumber(last.header.sequenceNumber, packet.header.sequenceNumber)) {\n                        this.console.error('fua packet missing. skipping refragmentation.', originalNalType);\n                        return;\n                    }\n                }\n            }\n\n            if (!this.pendingFuA)\n                this.pendingFuA = [];\n\n            this.pendingFuA.push(packet);\n\n            if (isFuEnd) {\n                this.flushPendingFuA(ret);\n            }\n            else if (this.pendingFuA.reduce((p, c) => p + c.payload.length - FU_A_HEADER_SIZE, NAL_HEADER_SIZE) > this.maxPacketSize) {\n                // refragment fua packets as they are received, saving the last undersized packet for\n                // the next fua packet.\n                const last = this.pendingFuA[this.pendingFuA.length - 1].clone();\n                const partial: RtpPacket[] = [];\n                this.flushPendingFuA(partial);\n                // retain a fua packet to validate subsequent fua packets.\n                const retain = partial.pop();\n                last.payload = retain.payload;\n                this.pendingFuA = [last];\n                ret.push(...partial);\n            }\n        }\n        else if (nalType === NAL_TYPE_STAP_A) {\n            this.flushPendingFuA(ret);\n\n            // break the aggregated packet up and send it.\n            const depacketized = depacketizeStapA(packet.payload)\n                .filter(payload => {\n                    const nalType = payload[0] & 0x1F;\n                    this.seenStapASps = this.seenStapASps || (nalType === NAL_TYPE_SPS);\n                    if (this.shouldFilter(nalType)) {\n                        return false;\n                    }\n                    if (nalType === NAL_TYPE_SPS)\n                        this.updateSps(payload);\n                    if (nalType === NAL_TYPE_PPS)\n                        this.updatePps(payload);\n                    return true;\n                });\n            if (depacketized.length === 0) {\n                this.extraPackets--;\n                return;\n            }\n            const aggregates = this.packetizeStapA(depacketized);\n            this.createRtpPackets(packet, aggregates, ret);\n        }\n        else if (nalType >= 1 && nalType < 24) {\n            this.flushPendingFuA(ret);\n\n            if (this.shouldFilter(nalType)) {\n                this.extraPackets--;\n                return;\n            }\n\n            // codec information should be aggregated into a stapa. usually around 50 bytes total.\n            if (nalType === NAL_TYPE_SPS) {\n                this.extraPackets--;\n                this.updateSps(packet.payload);\n                return;\n            }\n            else if (nalType === NAL_TYPE_PPS) {\n                this.extraPackets--;\n                this.updatePps(packet.payload);\n                return;\n            }\n\n            if (this.shouldFilter(nalType)) {\n                this.extraPackets--;\n                return;\n            }\n\n            if (nalType === NAL_TYPE_IDR) {\n                // if this is an idr frame, but no sps has been sent, dummy one up.\n                // the stream may not contain sps.\n                if (!this.seenStapASps)\n                    this.maybeSendSpsPps(packet, ret);\n                this.seenStapASps = false;\n            }\n\n            this.fragment(packet, ret);\n        }\n        else {\n            this.console.error('unknown nal unit type ' + nalType);\n            this.extraPackets--;\n        }\n\n        return;\n    }\n}\n","/**\n * This is a subset of Werift's RtpPacket.\n */\nexport interface RtpPacket {\n    payload: Buffer;\n    header: {\n        padding: boolean;\n        marker: boolean;\n        timestamp: number;\n        sequenceNumber: number;\n    };\n    clone(): RtpPacket;\n    serialize(): Buffer;\n}\n\nexport function sequenceNumberDistance(s1: number, s2: number): number {\n    if (s2 === s1)\n        return 0;\n    const distance = s2 - s1;\n    let rolloverDistance: number;\n    if (s2 > s1)\n        rolloverDistance = s1 + 0x10000 - s2;\n    else\n        rolloverDistance = s2 + 0x10000 - s1;\n\n    if (Math.abs(distance) < Math.abs(rolloverDistance))\n        return distance;\n    return rolloverDistance;\n}\n\nexport function nextSequenceNumber(current: number, increment = 1) {\n    return (current + increment + 0x10000) % 0x10000;\n}\n\nconst maxRtpTimestamp = BigInt(0xFFFFFFFF);\nexport function addRtpTimestamp(current: number, adjust: number) {\n    return Number(maxRtpTimestamp & (BigInt(current) + BigInt(adjust)));\n}\n\nexport function isNextSequenceNumber(current: number, next: number) {\n    return nextSequenceNumber(current) === next;\n}\n\nexport class JitterBuffer {\n    lastSequenceNumber: number;\n    pending: RtpPacket[] = [];\n\n    constructor(public console: Console, public jitterSize: number,) {\n    }\n\n    flushPending(afterSequenceNumber: number, ret: RtpPacket[]): RtpPacket[] {\n        if (!this.pending)\n            return ret;\n\n        const start = nextSequenceNumber(afterSequenceNumber);\n\n        for (let i = 0; i < this.jitterSize; i++) {\n            const index = (start + i) % this.jitterSize;\n            const packet = this.pending[index];\n            if (!packet)\n                continue;\n            const { sequenceNumber } = packet.header;\n            const sd = sequenceNumberDistance(this.lastSequenceNumber, sequenceNumber);\n            // packet needs to be purged from the the buffer for being too old.\n            if (sd <= 0) {\n                this.console.log('jitter buffer purged packet:', sequenceNumber);\n                this.pending[index] = undefined;\n                ret.push(packet);\n            }\n            else if (sd === 1) {\n                this.pending[index] = undefined;\n                this.lastSequenceNumber = sequenceNumber;\n                ret.push(packet);\n            }\n            else {\n                // can't do anything with this packet yet.\n            }\n        }\n        return ret;\n    }\n\n    queue(packet: RtpPacket): RtpPacket[] {\n        if (this.lastSequenceNumber === undefined || isNextSequenceNumber(this.lastSequenceNumber, packet.header.sequenceNumber)) {\n            this.lastSequenceNumber = packet.header.sequenceNumber;\n            return this.flushPending(this.lastSequenceNumber, [packet]);\n        }\n\n        const { sequenceNumber } = packet.header;\n        const packetDistance = sequenceNumberDistance(this.lastSequenceNumber, sequenceNumber);\n        // late/duplicate packet\n        if (packetDistance <= 0)\n            return [];\n\n        const ret: RtpPacket[] = [];\n\n        // missed/late bunch of packets\n        if (packetDistance > this.jitterSize) {\n            this.console.log('jitter buffer skipped packets:', packetDistance);\n            const { lastSequenceNumber } = this;\n            this.lastSequenceNumber = sequenceNumber - this.jitterSize;\n            // use the previous sequence number to flush any packets that are too old compared\n            // to the new sequence number.\n            this.flushPending(lastSequenceNumber, ret);\n        }\n\n        this.pending[packet.header.sequenceNumber % this.jitterSize] = packet;\n        return this.flushPending(this.lastSequenceNumber, ret);\n    }\n}\n","const maxPacketSize = 1 << 16;\n\nexport class DataChannelDebouncer {\n    timeout: NodeJS.Timeout;\n    pending: Buffer;\n    maxWait = 10;\n\n    constructor(public dc: { send: (buffer: Buffer) => void }, public kill: (e: Error) => void) {\n    }\n\n    send(data: Buffer) {\n        // if this buffer would exceed the max packet size, flush now to ensure only large packets are flushed.\n        if (this.pending?.length + data.length >= maxPacketSize)\n            this.flush();\n\n        if (!this.pending)\n            this.pending = data;\n        else\n            this.pending = Buffer.concat([this.pending, data]);\n        clearTimeout(this.timeout);\n        this.timeout = setTimeout(() => this.flush(), this.maxWait);\n\n        // if this buffer exceeds the max packet size, flush now to send the entire message immediately.\n        if (this.pending?.length + data.length >= maxPacketSize)\n            this.flush();\n    }\n\n    flush() {\n        try {\n            let offset = 0;\n            while (offset < this.pending.length) {\n                this.dc.send(this.pending.slice(offset, offset + maxPacketSize));\n                offset += maxPacketSize;\n            }\n    \n            this.pending = undefined;\n            clearTimeout(this.timeout);\n            this.timeout = undefined;\n        }\n        catch (e) {\n            this.kill(e);\n        }\n    }\n}\n","import { MediaStreamTrack, PeerConfig, RTCPeerConnection, RTCRtpCodecParameters, RTCRtpTransceiver, RtpPacket } from \"./werift\";\n\nimport { Deferred } from \"@scrypted/common/src/deferred\";\nimport sdk, { FFmpegInput, FFmpegTranscodeStream, Intercom, MediaObject, MediaStreamDestination, MediaStreamFeedback, RequestMediaStream, RTCAVSignalingSetup, RTCConnectionManagement, RTCMediaObjectTrack, RTCSignalingOptions, RTCSignalingSession, ScryptedDevice, ScryptedMimeTypes } from \"@scrypted/sdk\";\nimport { ScryptedSessionControl } from \"./session-control\";\nimport { requiredAudioCodecs, requiredVideoCodec } from \"./webrtc-required-codecs\";\nimport { isPrivateIceTransport, logIsPrivateIceTransport } from \"./werift-util\";\n\nimport { addVideoFilterArguments } from \"@scrypted/common/src/ffmpeg-helpers\";\nimport { connectRTCSignalingClients } from \"@scrypted/common/src/rtc-signaling\";\nimport { getSpsPps } from \"@scrypted/common/src/sdp-utils\";\nimport { H264Repacketizer } from \"../../homekit/src/types/camera/h264-packetizer\";\nimport { logConnectionState, waitClosed, waitConnected, waitIceConnected } from \"./peerconnection-util\";\nimport { RtpCodecCopy, RtpTrack, RtpTracks, startRtpForwarderProcess } from \"./rtp-forwarders\";\nimport { getAudioCodec, getFFmpegRtpAudioOutputArguments } from \"./webrtc-required-codecs\";\nimport { WeriftSignalingSession } from \"./werift-signaling-session\";\n\nexport const RTC_BRIDGE_NATIVE_ID = 'rtc-bridge';\n\nfunction getDebugModeH264EncoderArgs() {\n    return [\n        '-profile:v', 'baseline',\n        // ultrafast seems to have the lowest latency but forces constrained baseline\n        // so the prior argument is redundant. It actualy seems like decoding non-baseline\n        // on mac, at least, causes inherent latency which can't be flushed from upstream.\n        '-preset', 'ultrafast',\n        '-g', '60',\n        \"-c:v\", \"libx264\",\n        \"-bf\", \"0\",\n        // \"-tune\", \"zerolatency\",\n    ];\n}\n\nexport async function createTrackForwarder(options: {\n    timeStart: number,\n    isPrivate: boolean, destinationId: string, ipv4: boolean,\n    requestMediaStream: RequestMediaStream,\n    videoTransceiver: RTCRtpTransceiver, audioTransceiver: RTCRtpTransceiver,\n    maximumCompatibilityMode: boolean, clientOptions: RTCSignalingOptions,\n}) {\n    const {\n        timeStart,\n        isPrivate, destinationId,\n        requestMediaStream,\n        videoTransceiver, audioTransceiver,\n        maximumCompatibilityMode,\n        clientOptions,\n    } = options;\n\n    const { sessionSupportsH264High, transcodeWidth, isMediumResolution, width, height } = parseOptions(clientOptions);\n\n    let transcodeBaseline = maximumCompatibilityMode;\n    // const transcodeBaseline = !sessionSupportsH264High || maximumCompatibilityMode;\n    const handlesHighResolution = !isMediumResolution && !transcodeBaseline;\n\n    let requestDestination: MediaStreamDestination;\n    if (transcodeBaseline) {\n        requestDestination = 'medium-resolution';\n    }\n    else if (!isPrivate) {\n        requestDestination = 'remote';\n    }\n\n    const mo = await requestMediaStream({\n        video: {\n            codec: 'h264',\n            width,\n            height,\n        },\n        audio: {\n            codec: 'opus',\n        },\n        adaptive: handlesHighResolution,\n        destination: requestDestination,\n        destinationId,\n        tool: !handlesHighResolution ? 'ffmpeg' : 'scrypted',\n    });\n\n    if (!mo)\n        return;\n\n    let mediaStreamFeedback: MediaStreamFeedback;\n    try {\n        mediaStreamFeedback = await sdk.mediaManager.convertMediaObject(mo, ScryptedMimeTypes.MediaStreamFeedback);\n    }\n    catch (e) {\n    }\n    if (mediaStreamFeedback) {\n        videoTransceiver.sender.onRtcp.subscribe(rtcp => {\n            mediaStreamFeedback.onRtcp(rtcp.serialize());\n        });\n    }\n\n    const console = sdk.deviceManager.getMixinConsole(mo.sourceId, RTC_BRIDGE_NATIVE_ID);\n    const ffmpegInput = await sdk.mediaManager.convertMediaObjectToJSON<FFmpegInput>(mo, ScryptedMimeTypes.FFmpegInput);\n    const { mediaStreamOptions } = ffmpegInput;\n\n    if (isMediumResolution && !transcodeBaseline) {\n        const width = ffmpegInput?.mediaStreamOptions?.video?.width;\n        transcodeBaseline = !width || width > 1280;\n    }\n\n    console.log('Client Stream Profile', {\n        transcodeBaseline,\n        sessionSupportsH264High,\n        maximumCompatibilityMode,\n        ...clientOptions,\n    });\n\n    if (!maximumCompatibilityMode) {\n        let found: RTCRtpCodecParameters;\n        if (mediaStreamOptions?.audio?.codec === 'pcm_mulaw') {\n            found = audioTransceiver.codecs.find(codec => codec.mimeType === 'audio/PCMU')\n        }\n        else if (mediaStreamOptions?.audio?.codec === 'pcm_alaw') {\n            found = audioTransceiver.codecs.find(codec => codec.mimeType === 'audio/PCMA')\n        }\n        if (found)\n            audioTransceiver.sender.codec = found;\n    }\n\n    const { name: audioCodecName } = getAudioCodec(audioTransceiver.sender.codec);\n    let audioCodecCopy = maximumCompatibilityMode ? undefined : audioCodecName;\n\n    const videoTranscodeArguments: string[] = [];\n    const transcode = transcodeBaseline\n        || mediaStreamOptions?.video?.codec !== 'h264'\n        || ffmpegInput.h264EncoderArguments?.length\n        || ffmpegInput.h264FilterArguments?.length;\n\n    // let videoCodecCopy: RtpCodecCopy = transcode ? undefined : 'h264';\n    const compatibleH264 = !mediaStreamOptions?.video?.h264Info?.reserved30 && !mediaStreamOptions?.video?.h264Info?.reserved31;\n    let videoCodecCopy: RtpCodecCopy;\n    if (!transcode && compatibleH264)\n        videoCodecCopy = 'h264';\n\n    if (ffmpegInput.mediaStreamOptions?.oobCodecParameters)\n        videoTranscodeArguments.push(\"-bsf:v\", \"dump_extra\");\n    videoTranscodeArguments.push(...(ffmpegInput.h264FilterArguments || []));\n\n    if (transcode) {\n        const conservativeDefaultBitrate = isPrivate ? 1000000 : 500000;\n        const bitrate = maximumCompatibilityMode ? conservativeDefaultBitrate : (ffmpegInput.destinationVideoBitrate || conservativeDefaultBitrate);\n        videoTranscodeArguments.push(\n            // this seems to cause issues with presets i think.\n            // '-level:v', '4.0',\n            \"-b:v\", bitrate.toString(),\n            \"-bufsize\", (2 * bitrate).toString(),\n            \"-maxrate\", bitrate.toString(),\n            '-r', '15',\n        );\n\n        const scaleFilter = `scale='min(${transcodeWidth},iw)':-2`;\n        addVideoFilterArguments(videoTranscodeArguments, scaleFilter);\n\n        if (transcodeBaseline) {\n            // baseline profile must use libx264, not sure other encoders properly support it.\n            videoTranscodeArguments.push(\n\n                ...getDebugModeH264EncoderArgs(),\n            );\n\n            // unable to find conditions to make this working properly.\n            // encoding results in chop if bitrate is not sufficient.\n            // this may need to be aligned with h264 level?\n            // or no bitrate hint?\n            // videoArgs.push('-tune', 'zerolatency');\n        }\n        else {\n            videoTranscodeArguments.push(...(ffmpegInput.h264EncoderArguments || getDebugModeH264EncoderArgs()));\n        }\n    }\n    else {\n        videoTranscodeArguments.push('-vcodec', 'copy')\n    }\n\n    const audioTranscodeArguments = getFFmpegRtpAudioOutputArguments(ffmpegInput.mediaStreamOptions?.audio?.codec, audioTransceiver.sender.codec, maximumCompatibilityMode);\n\n    let needPacketization = !!videoCodecCopy;\n    if (transcode) {\n        try {\n            const transcodeStream: FFmpegTranscodeStream = await sdk.mediaManager.convertMediaObject(mo, ScryptedMimeTypes.FFmpegTranscodeStream);\n            await transcodeStream({\n                videoDecoderArguments: ffmpegInput.videoDecoderArguments,\n                videoTranscodeArguments,\n                audioTranscodeArguments,\n            });\n            videoTranscodeArguments.splice(0, videoTranscodeArguments.length);\n            videoCodecCopy = 'copy';\n            audioCodecCopy = 'copy';\n            // is this really necessary?\n            needPacketization = true;\n        }\n        catch (e) {\n        }\n    }\n\n    const audioRtpTrack: RtpTrack = {\n        codecCopy: audioCodecCopy,\n        onRtp: audioTransceiver.sender.sendRtp.bind(audioTransceiver.sender),\n        encoderArguments: [\n            ...audioTranscodeArguments,\n        ],\n        firstPacket: rtp => {\n            const packet = RtpPacket.deSerialize(rtp);\n            audioTransceiver.sender.replaceRTP(packet.header, true);\n        },\n    };\n\n    // ipv4 mtu is 1500\n    // so max usable packet size is 1500 - tcp header - ip header\n    // 1500 - 20 - 20 = 1460.\n    // but set to 1440 just to be safe.\n    // 1/9/2023: bug report from eweber discovered that usable MTU on tmobile is 1424.\n    // additional consideration should be given whether to always enforce ipv6 mtu on\n    // non-local destination?\n    // const videoPacketSize = options.ipv4 ? 1424 : 1300;\n    // 1/9/2023:\n    // 1378 is what homekit requests, regardless of local or remote network.\n    // so setting 1378 as the fixed value seems wise, given apple probably has\n    // better knowledge of network capabilities, and also mirrors \n    // from my cursory research into ipv6, the MTU is no lesser than ipv4, in fact\n    // the min mtu is larger.\n    const videoPacketSize = 1378;\n    let h264Repacketizer: H264Repacketizer;\n    let spsPps: ReturnType<typeof getSpsPps>;\n\n    const videoRtpTrack: RtpTrack = {\n        codecCopy: videoCodecCopy,\n        packetSize: videoPacketSize,\n        onMSection: (videoSection) => spsPps = getSpsPps(videoSection),\n        onRtp: (buffer) => {\n            let onRtp: (rtp: Buffer) => void;\n\n            if (needPacketization) {\n                if (!h264Repacketizer) {\n                    // adjust packet size for the rtp packet header (12).\n                    h264Repacketizer = new H264Repacketizer(console, videoPacketSize - 12, {\n                        ...spsPps,\n                    });\n                }\n                onRtp = buffer => {\n                    const repacketized = h264Repacketizer.repacketize(RtpPacket.deSerialize(buffer));\n                    for (const packet of repacketized) {\n                        videoTransceiver.sender.sendRtp(packet);\n                    }\n                };\n            }\n            else {\n                onRtp = buffer => {\n                    videoTransceiver.sender.sendRtp(buffer);\n                };\n            }\n\n            videoRtpTrack.onRtp = onRtp;\n            videoRtpTrack.onRtp(buffer);\n        },\n        encoderArguments: [\n            ...videoTranscodeArguments,\n        ],\n        firstPacket: rtp => {\n            console.log('first video packet', Date.now() - timeStart);\n            const packet = RtpPacket.deSerialize(rtp);\n            videoTransceiver.sender.replaceRTP(packet.header, true);\n        },\n    };\n\n    let tracks: RtpTracks;\n    if (ffmpegInput.mediaStreamOptions?.audio === null || !audioTransceiver) {\n        tracks = {\n            video: videoRtpTrack,\n        }\n    }\n    else if (ffmpegInput.mediaStreamOptions?.video === null || !videoTransceiver) {\n        tracks = {\n            audio: audioRtpTrack,\n        }\n    }\n    else {\n        tracks = {\n            video: videoRtpTrack,\n            audio: audioRtpTrack,\n        }\n    }\n\n    return startRtpForwarderProcess(console, ffmpegInput, tracks);\n}\n\n// https://en.wikipedia.org/wiki/Advanced_Video_Coding#Profiles\nconst highProfiles = [\n    100,\n    110,\n    122,\n    244,\n];\nconst highProfilesHex = highProfiles.map(p => p.toString(16));\n\nexport function parseOptions(options: RTCSignalingOptions) {\n    // should really inspect the session description here.\n    // we assume that the camera doesn't output h264 baseline, because\n    // that is awful quality. so check to see if the session has an\n    // explicit list of supported codecs with a passable h264 high on it.\n    let sessionSupportsH264High = !!options?.capabilities?.video?.codecs\n        ?.filter(codec => codec.mimeType.toLowerCase() === 'video/h264')\n        // 42 is baseline profile\n        // 64001f (chrome) or 640c1f (safari) is high profile.\n        // firefox only advertises 42e01f.\n        // nest hub max offers high 640015. this means the level (hex 15) is 2.1,\n        // this corresponds to a resolution of 480p according to the spec?\n        // https://en.wikipedia.org/wiki/Advanced_Video_Coding#Levels\n        // however, the 640x1f indicates a max resolution of 720p, but\n        // desktop browsers can handle 1080p+ fine regardless, since it does\n        // not actually seem to confirm the level. the level is merely a hint\n        // to make a rough guess as to the decoding capability of the client.\n        ?.find(codec => {\n            let sdpFmtpLine = codec.sdpFmtpLine.toLowerCase();\n            for (const hex of highProfilesHex) {\n                if (sdpFmtpLine.includes(`profile-level-id=${hex}`))\n                    return true;\n            }\n            return false;\n        });\n\n\n    // firefox is misleading. special case that to disable transcoding.\n    if (options?.userAgent?.includes('Firefox/'))\n        sessionSupportsH264High = true;\n\n    const transcodeWidth = Math.max(640, Math.min(options?.screen?.width || 960, 1280));\n    const width = options?.screen?.width;\n    const height = options?.screen?.height;\n    const max = Math.max(width, height) * options?.screen?.devicePixelRatio;\n    const isMediumResolution = !sessionSupportsH264High || (max && max < 1920);\n\n    return {\n        sessionSupportsH264High,\n        transcodeWidth,\n        isMediumResolution,\n        width: isMediumResolution ? 1280 : width,\n        height: isMediumResolution ? 720 : height,\n    };\n}\n\nclass WebRTCTrack implements RTCMediaObjectTrack {\n    control: ScryptedSessionControl;\n    removed = new Deferred<void>();\n\n    constructor(public connectionManagement: WebRTCConnectionManagement, public video: RTCRtpTransceiver, public audio: RTCRtpTransceiver, intercom: Intercom) {\n        this.control = new ScryptedSessionControl(intercom, audio);\n    }\n\n    async onStop(): Promise<void> {\n        return this.removed.promise;\n    }\n\n    attachForwarder(f: Awaited<ReturnType<typeof createTrackForwarder>>) {\n        const stopped = this.removed;\n        f.killPromise.then(() => stopped.resolve(undefined)).catch(e => stopped.reject(e));\n    }\n\n    async replace(mediaObject: MediaObject): Promise<void> {\n        const { createTrackForwarder, intercom } = await this.connectionManagement.createTracks(mediaObject);\n\n        this.cleanup(true);\n\n        this.removed = new Deferred();\n        this.control = new ScryptedSessionControl(intercom, this.audio);\n\n        const f = await createTrackForwarder(this.video, this.audio);\n        this.attachForwarder(f);\n        waitClosed(this.connectionManagement.pc).finally(() => f.kill());\n        this.removed.promise.finally(() => f.kill());\n    }\n\n    cleanup(cleanupTrackOnly: boolean) {\n        if (this.removed.finished)\n            return;\n        this.removed.resolve(undefined);\n        this.control.killed.resolve(undefined);\n        this.video.sender.onRtcp.allUnsubscribe();\n\n        if (cleanupTrackOnly)\n            return;\n\n        this.connectionManagement.activeTracks.delete(this);\n        this.video.stop();\n        this.audio.stop();\n        this.connectionManagement.pc.removeTrack(this.video.sender);\n        this.connectionManagement.pc.removeTrack(this.audio.sender);\n    }\n\n    async stop(): Promise<void> {\n        return this.cleanup(false);\n    }\n\n    setPlayback(options: { audio: boolean; video: boolean; }): Promise<void> {\n        return this.control.setPlayback(options);\n    }\n}\n\nexport class WebRTCConnectionManagement implements RTCConnectionManagement {\n    pc: RTCPeerConnection;\n    private negotiationDeferred = new Deferred<void>();\n    weriftSignalingSession: WeriftSignalingSession;\n    activeTracks = new Set<WebRTCTrack>();\n    closed = false;\n\n    constructor(public console: Console, public clientSession: RTCSignalingSession,\n        public maximumCompatibilityMode: boolean,\n        public clientOptions: RTCSignalingOptions,\n        public options: {\n            configuration: RTCConfiguration,\n            weriftConfiguration: Partial<PeerConfig>,\n        }) {\n\n        this.pc = new RTCPeerConnection({\n            // werift supports ice servers, but it seems to fail for some reason.\n            // it does not matter, as we can send the ice servers to the browser instead.\n            // the cameras and alexa targets will also provide externally reachable addresses.\n            codecs: {\n                audio: [\n                    ...requiredAudioCodecs,\n                ],\n                video: [\n                    requiredVideoCodec,\n                ],\n            },\n            ...options.weriftConfiguration,\n        });\n        logConnectionState(console, this.pc);\n        waitConnected(this.pc)\n            .then(() => logIsPrivateIceTransport(this.console, this.pc)).catch(() => {});\n\n        this.weriftSignalingSession = new WeriftSignalingSession(console, this.pc);\n    }\n\n    async probe() {\n    }\n\n    async createTracks(mediaObject: MediaObject, intercomId?: string) {\n        let requestMediaStream: RequestMediaStream;\n\n        try {\n            requestMediaStream = await sdk.mediaManager.convertMediaObject(mediaObject, ScryptedMimeTypes.RequestMediaStream);\n        }\n        catch (e) {\n            requestMediaStream = async () => mediaObject;\n        }\n\n        const intercom = sdk.systemManager.getDeviceById<Intercom>(intercomId);\n\n        const vtrack = new MediaStreamTrack({\n            kind: \"video\", codec: requiredVideoCodec,\n        });\n\n        const atrack = new MediaStreamTrack({ kind: \"audio\" });\n        const console = sdk.deviceManager.getMixinConsole(mediaObject?.sourceId || intercomId);\n\n        const timeStart = Date.now();\n\n        return {\n            vtrack,\n            atrack,\n            intercom,\n            createTrackForwarder: async (videoTransceiver: RTCRtpTransceiver, audioTransceiver: RTCRtpTransceiver) => {\n                const ret = await createTrackForwarder({\n                    timeStart,\n                    ...isPrivateIceTransport(this.pc),\n                    requestMediaStream,\n                    videoTransceiver,\n                    audioTransceiver,\n                    maximumCompatibilityMode: this.maximumCompatibilityMode,\n                    clientOptions: this.clientOptions,\n                });\n                return ret;\n            },\n        }\n    }\n\n    get negotiation() {\n        if (this.negotiationDeferred.finished)\n            this.negotiationDeferred = new Deferred();\n        return this.negotiationDeferred.promise;\n    }\n\n    async negotiateRTCSignalingSession() {\n        return this.negotiateRTCSignalingSessionInternal({\n            configuration: this.options?.configuration,\n        });\n    }\n\n    async negotiateRTCSignalingSessionInternal(clientSetup: Partial<RTCAVSignalingSetup>, clientOffer?: boolean): Promise<void> {\n        try {\n            if (clientOffer) {\n                await connectRTCSignalingClients(this.console,\n                    this.clientSession, clientSetup,\n                    this.weriftSignalingSession, {});\n            }\n            else {\n                await connectRTCSignalingClients(this.console,\n                    this.weriftSignalingSession, {},\n                    this.clientSession, clientSetup,\n                );\n            }\n            this.negotiationDeferred.resolve(undefined);\n        }\n        catch (e) {\n            this.console.error('negotiation failed', e);\n            this.negotiationDeferred.reject(e);\n            throw e;\n        }\n    }\n\n    async addTrack(mediaObject: MediaObject, options?: {\n        videoMid?: string,\n        audioMid?: string,\n        intercomId?: string,\n    }) {\n        const { atrack, vtrack, createTrackForwarder, intercom } = await this.createTracks(mediaObject, options?.intercomId);\n\n        const videoTransceiver = this.pc.addTransceiver(vtrack, {\n            direction: 'sendonly',\n        });\n\n        videoTransceiver.mid = options?.videoMid;\n\n        const audioTransceiver = this.pc.addTransceiver(atrack, {\n            direction: intercom ? 'sendrecv' : 'sendonly',\n        });\n        audioTransceiver.mid = options?.audioMid;\n\n        const ret = new WebRTCTrack(this, videoTransceiver, audioTransceiver, intercom);\n\n        this.negotiation.then(async () => {\n            this.console.log('waiting ice connected');\n            if (this.pc.remoteIsBundled)\n                await waitConnected(this.pc);\n            else\n                await waitIceConnected(this.pc);\n            if (ret.removed.finished)\n                return;\n            this.console.log('done waiting ice connected');\n            const f = await createTrackForwarder(videoTransceiver, audioTransceiver);\n            ret.attachForwarder(f);\n            waitClosed(this.pc).finally(() => f?.kill());\n            ret.removed.promise.finally(() => f?.kill());\n        });\n\n        return ret;\n    }\n\n    async close(): Promise<void> {\n        for (const track of this.activeTracks) {\n            track.cleanup(true);\n        }\n        this.activeTracks.clear();\n        this.pc.close();\n    }\n\n    async waitClosed() {\n        await waitClosed(this.pc);\n    }\n\n    async waitConnected() {\n        await waitIceConnected(this.pc);\n        await waitConnected(this.pc);\n    }\n}\n\nexport async function createRTCPeerConnectionSink(\n    clientSignalingSession: RTCSignalingSession,\n    console: Console,\n    intercom: ScryptedDevice & Intercom,\n    mo: MediaObject,\n    maximumCompatibilityMode: boolean,\n    configuration: RTCConfiguration,\n    weriftConfiguration: Partial<PeerConfig>,\n    clientOffer = true,\n) {\n    const clientOptions = await clientSignalingSession.getOptions();\n    // console.log('remote options', clientOptions);\n\n    const connection = new WebRTCConnectionManagement(console, clientSignalingSession, maximumCompatibilityMode, clientOptions, {\n        configuration,\n        weriftConfiguration,\n    });\n\n    const track = await connection.addTrack(mo, {\n        intercomId: intercom?.id,\n    });\n\n    track.control.killed.promise.then(() => {\n        track.cleanup(true);\n        connection.pc.close();\n    });\n\n    const setup: Partial<RTCAVSignalingSetup> = {\n        audio: {\n            direction: intercom ? 'sendrecv' : 'recvonly',\n        },\n        video: {\n            direction: 'recvonly',\n        },\n        configuration,\n    };\n\n    connection.negotiateRTCSignalingSessionInternal(setup, clientOffer);\n\n    return track.control;\n}\n","const server = \"turn.scrypted.app:3478\";\nconst turn = `turn:${server}`;\nconst stun = `stun:${server}`;\nconst creds = {\n    username: \"foo\",\n    credential: \"bar\",\n};\n\nexport const turnServer = {\n    urls: [turn],\n    ...creds,\n};\nexport const stunServer = {\n    urls: [stun],\n    ...creds,\n};\nconst googleStunServer = {\n    urls: [\"stun:stun.l.google.com:19302\"],\n};\nexport const turnIceServers = [\n    googleStunServer,\n    turnServer,\n];\nexport const stunIceServers = [\n    googleStunServer,\n];\n\nfunction toWerift(s: typeof turnServer | RTCIceServer) {\n    return {\n        urls: typeof s.urls === 'string' ? s.urls : s.urls[0],\n        username: s.username,\n        credential: s.credential,\n    }\n}\n\nexport function toWeriftConfiguration(configuration: RTCConfiguration) {\n    return {\n        iceServers: configuration.iceServers.map(toWerift),\n    }\n}\n\nexport const weriftTurnServer = toWerift(turnServer);\nexport const weriftStunServer = toWerift(stunServer);\n\n","import { AutoenableMixinProvider } from '@scrypted/common/src/autoenable-mixin-provider';\nimport { Deferred } from '@scrypted/common/src/deferred';\nimport { listenZeroSingleClient } from '@scrypted/common/src/listen-cluster';\nimport { createBrowserSignalingSession } from \"@scrypted/common/src/rtc-connect\";\nimport { SettingsMixinDeviceBase, SettingsMixinDeviceOptions } from '@scrypted/common/src/settings-mixin';\nimport sdk, { BufferConverter, ConnectOptions, DeviceCreator, DeviceCreatorSettings, DeviceProvider, FFmpegInput, HttpRequest, Intercom, MediaObject, MediaObjectOptions, MixinProvider, RequestMediaStream, RequestMediaStreamOptions, ResponseMediaStreamOptions, RTCSessionControl, RTCSignalingChannel, RTCSignalingClient, RTCSignalingOptions, RTCSignalingSession, ScryptedDeviceBase, ScryptedDeviceType, ScryptedInterface, ScryptedMimeTypes, Setting, Settings, SettingValue, VideoCamera } from '@scrypted/sdk';\nimport { StorageSettings } from '@scrypted/sdk/storage-settings';\nimport crypto from 'crypto';\nimport ip from 'ip';\nimport net from 'net';\nimport { DataChannelDebouncer } from './datachannel-debouncer';\nimport { createRTCPeerConnectionSink, createTrackForwarder, RTC_BRIDGE_NATIVE_ID, WebRTCConnectionManagement } from \"./ffmpeg-to-wrtc\";\nimport { stunServer, turnServer, weriftStunServer, weriftTurnServer } from './ice-servers';\nimport { waitClosed } from './peerconnection-util';\nimport { WebRTCCamera } from \"./webrtc-camera\";\nimport { defaultPeerConfig, InterfaceAddresses, MediaStreamTrack, PeerConfig, RTCPeerConnection } from './werift';\nimport { WeriftSignalingSession } from './werift-signaling-session';\nimport { createRTCPeerConnectionSource, getRTCMediaStreamOptions } from './wrtc-to-rtsp';\nimport { createZygote } from './zygote';\n\nconst { mediaManager, systemManager, deviceManager } = sdk;\n\n// https://github.com/shinyoshiaki/werift-webrtc/issues/240\ndefaultPeerConfig.headerExtensions = {\n    video: [],\n    audio: [],\n};\n\nconst zygote = createZygote<ReturnType<typeof fork>>();\n\nclass WebRTCMixin extends SettingsMixinDeviceBase<RTCSignalingClient & VideoCamera & RTCSignalingChannel & Intercom> implements RTCSignalingChannel, VideoCamera, Intercom {\n    storageSettings = new StorageSettings(this, {});\n    webrtcIntercom: Promise<Intercom>;\n\n    constructor(public plugin: WebRTCPlugin, options: SettingsMixinDeviceOptions<RTCSignalingClient & RTCSignalingChannel & Settings & VideoCamera & Intercom>) {\n        super(options);\n    }\n\n    async startIntercom(media: MediaObject): Promise<void> {\n        if (this.webrtcIntercom) {\n            const intercom = await this.webrtcIntercom;\n            return intercom.startIntercom(media);\n        }\n        if (this.mixinDeviceInterfaces.includes(ScryptedInterface.Intercom))\n            return this.mixinDevice.startIntercom(media);\n\n        if (this.mixinDeviceInterfaces.includes(ScryptedInterface.RTCSignalingClient)) {\n            const session = await this.mixinDevice.createRTCSignalingSession();\n\n            const ret = await createRTCPeerConnectionSink(\n                session,\n                this.console,\n                undefined,\n                media,\n                this.plugin.storageSettings.values.maximumCompatibilityMode,\n                this.plugin.getRTCConfiguration(),\n                await this.plugin.getWeriftConfiguration(),\n            );\n            return;\n        }\n\n        // odd code path for arlo that has a webrtc connection only for the speaker\n        if ((this.type === ScryptedDeviceType.Speaker || this.type === ScryptedDeviceType.SmartSpeaker)\n            && this.mixinDeviceInterfaces.includes(ScryptedInterface.RTCSignalingChannel)) {\n\n            this.console.log('starting webrtc speaker intercom');\n\n            const pc = new RTCPeerConnection();\n            const atrack = new MediaStreamTrack({ kind: 'audio' });\n            const audioTransceiver = pc.addTransceiver(atrack);\n            const weriftSignalingSession = new WeriftSignalingSession(this.console, pc);\n            const control = await this.mixinDevice.startRTCSignalingSession(weriftSignalingSession);\n\n            const forwarder = await createTrackForwarder({\n                timeStart: Date.now(),\n                videoTransceiver: undefined,\n                audioTransceiver,\n                isPrivate: undefined, destinationId: undefined, ipv4: undefined,\n                requestMediaStream: async () => media,\n                maximumCompatibilityMode: false,\n                clientOptions: undefined,\n            });\n\n            waitClosed(pc).finally(() => forwarder.kill());\n            forwarder.killPromise.finally(() => pc.close());\n\n            forwarder.killPromise.finally(() => control.endSession());\n            return;\n        }\n\n        throw new Error(\"webrtc session not connected.\");\n    }\n\n    async stopIntercom(): Promise<void> {\n        if (this.webrtcIntercom) {\n            const intercom = await this.webrtcIntercom;\n            return intercom.stopIntercom();\n        }\n\n        if (this.mixinDeviceInterfaces.includes(ScryptedInterface.Intercom))\n            return this.mixinDevice.stopIntercom();\n        throw new Error(\"webrtc session not connected.\");\n    }\n\n    async startRTCSignalingSession(session: RTCSignalingSession): Promise<RTCSessionControl> {\n        // if the camera natively has RTCSignalingChannel and the client is not a weird non-browser\n        // thing like Alexa, etc, pass through. Otherwise proxy/transcode.\n\n        // but, maybe we should always proxy?\n\n        const options = await session.getOptions();\n        if (this.mixinDeviceInterfaces.includes(ScryptedInterface.RTCSignalingChannel) && !options?.proxy)\n            return this.mixinDevice.startRTCSignalingSession(session);\n\n        const device = systemManager.getDeviceById<VideoCamera & Intercom>(this.id);\n        const hasIntercom = this.mixinDeviceInterfaces.includes(ScryptedInterface.Intercom);\n\n        const requestMediaStream: RequestMediaStream = async options => device.getVideoStream(options);\n        const mo = await mediaManager.createMediaObject(requestMediaStream, ScryptedMimeTypes.RequestMediaStream, {\n            sourceId: device.id,\n        });\n\n        return createRTCPeerConnectionSink(\n            session,\n            this.console,\n            hasIntercom ? device : undefined,\n            mo,\n            this.plugin.storageSettings.values.maximumCompatibilityMode,\n            this.plugin.getRTCConfiguration(),\n            await this.plugin.getWeriftConfiguration(options?.disableTurn),\n            options?.requiresAnswer === true ? false : true,\n        );\n    }\n\n    getMixinSettings(): Promise<Setting[]> {\n        return this.storageSettings.getSettings();\n    }\n\n    putMixinSetting(key: string, value: SettingValue): Promise<void> {\n        return this.storageSettings.putSetting(key, value);\n    }\n\n    createVideoStreamOptions() {\n        const ret = getRTCMediaStreamOptions('webrtc', 'WebRTC');\n        ret.source = 'cloud';\n        return ret;\n    }\n\n    async getVideoStream(options?: RequestMediaStreamOptions): Promise<MediaObject> {\n        if (this.mixinDeviceInterfaces.includes(ScryptedInterface.VideoCamera) && options?.id !== 'webrtc') {\n            return this.mixinDevice.getVideoStream(options);\n        }\n\n        const { intercom, mediaObject, pcClose } = await createRTCPeerConnectionSource({\n            console: this.console,\n            mediaStreamOptions: this.createVideoStreamOptions(),\n            channel: this.mixinDevice,\n            maximumCompatibilityMode: this.plugin.storageSettings.values.maximumCompatibilityMode,\n        });\n\n        this.webrtcIntercom = intercom;\n        pcClose.finally(() => this.webrtcIntercom = undefined);\n\n        return mediaObject;\n    }\n\n    async getVideoStreamOptions(): Promise<ResponseMediaStreamOptions[]> {\n        let ret: ResponseMediaStreamOptions[] = [];\n        if (this.mixinDeviceInterfaces.includes(ScryptedInterface.VideoCamera)) {\n            ret = await this.mixinDevice.getVideoStreamOptions();\n        }\n        ret.push(this.createVideoStreamOptions());\n        return ret;\n    }\n}\n\nexport class WebRTCPlugin extends AutoenableMixinProvider implements DeviceCreator, DeviceProvider, BufferConverter, MixinProvider, Settings {\n    storageSettings = new StorageSettings(this, {\n        maximumCompatibilityMode: {\n            title: 'Maximum Compatibility Mode',\n            description: 'Enables maximum compatibility with WebRTC clients by using the most conservative transcode options.',\n            defaultValue: false,\n            type: 'boolean',\n        },\n        iceInterfaceAddresses: {\n            title: 'ICE Interface Addresses',\n            description: 'The ICE interface addresses to bind and share with the peer.',\n            choices: [\n                'Default',\n                'Scrypted Server Address',\n                'All Addresses',\n            ],\n            defaultValue: 'Default',\n        },\n        useTurnServer: {\n            title: 'Use TURN Servers',\n            description: 'Use a intermediary server to send video streams. Reduces performance and should only be used with restrictive NATs.',\n            type: 'boolean',\n            defaultValue: true,\n        },\n        useIPv6: {\n            title: 'Use IPv6',\n            description: 'Use IPv6 addresses when connecting. This is disabled by default due to commonly misconfigured IPv6 local networks.',\n            type: 'boolean',\n            defaultValue: false,\n        },\n        activeConnections: {\n            readonly: true,\n            title: \"Current Open Connections\",\n            description: \"The WebRTC connections that are currently open.\",\n            onGet: async () => {\n                return {\n                    defaultValue: this.activeConnections,\n                }\n            },\n        },\n        rtcConfiguration: {\n            title: \"Custom Client RTC Configuration\",\n            type: 'textarea',\n            description: \"RTCConfiguration that can be used to specify custom TURN and STUN servers. https://gist.github.com/koush/f7dafec7dbca04982a76db8243abc57e\",\n        },\n        weriftConfiguration: {\n            title: \"Custom Server RTC Configuration\",\n            type: 'textarea',\n            description: \"RTCConfiguration that can be used to specify custom TURN and STUN servers. https://gist.github.com/koush/631d38ac8647a86baaac7b22d863f010\",\n        },\n        debugLog: {\n            title: 'Debug Log',\n            type: 'boolean',\n        }\n    });\n    bridge: WebRTCBridge;\n    activeConnections = 0;\n\n    constructor() {\n        super();\n        this.unshiftMixin = true;\n\n        this.fromMimeType = '*/*';\n        this.toMimeType = ScryptedMimeTypes.RTCSignalingChannel;\n\n        deviceManager.onDeviceDiscovered({\n            name: 'RTC Connection Bridge',\n            type: ScryptedDeviceType.API,\n            nativeId: RTC_BRIDGE_NATIVE_ID,\n            interfaces: [\n                ScryptedInterface.BufferConverter,\n            ],\n        })\n            .then(() => this.bridge = new WebRTCBridge(this, RTC_BRIDGE_NATIVE_ID));\n    }\n\n    getSettings(): Promise<Setting[]> {\n        return this.storageSettings.getSettings();\n    }\n\n    putSetting(key: string, value: SettingValue): Promise<void> {\n        return this.storageSettings.putSetting(key, value);\n    }\n\n    async convert(data: any, fromMimeType: string, toMimeType: string, options?: MediaObjectOptions): Promise<RTCSignalingChannel> {\n        const plugin = this;\n\n        const console = deviceManager.getMixinConsole(options?.sourceId, this.nativeId);\n\n        if (fromMimeType === ScryptedMimeTypes.FFmpegInput) {\n            const ffmpegInput: FFmpegInput = JSON.parse(data.toString());\n            const mo = await mediaManager.createFFmpegMediaObject(ffmpegInput);\n\n            class OnDemandSignalingChannel implements RTCSignalingChannel {\n                async startRTCSignalingSession(session: RTCSignalingSession): Promise<RTCSessionControl> {\n                    return createRTCPeerConnectionSink(session, console,\n                        undefined,\n                        mo,\n                        plugin.storageSettings.values.maximumCompatibilityMode,\n                        plugin.getRTCConfiguration(),\n                        await plugin.getWeriftConfiguration(),\n                    );\n                }\n            }\n\n            return new OnDemandSignalingChannel();\n        }\n        else if (fromMimeType === ScryptedMimeTypes.RequestMediaStream) {\n            const rms = data as RequestMediaStream;\n            const mo = await mediaManager.createMediaObject(rms, ScryptedMimeTypes.RequestMediaStream);\n            class OnDemandSignalingChannel implements RTCSignalingChannel {\n                async startRTCSignalingSession(session: RTCSignalingSession): Promise<RTCSessionControl> {\n                    return createRTCPeerConnectionSink(session, console,\n                        undefined,\n                        mo,\n                        plugin.storageSettings.values.maximumCompatibilityMode,\n                        plugin.getRTCConfiguration(),\n                        await plugin.getWeriftConfiguration(),\n                    );\n                }\n            }\n\n            return new OnDemandSignalingChannel();\n        }\n        else {\n            throw new Error(`@scrypted/webrtc is unable to convert ${fromMimeType} to ${ScryptedMimeTypes.RTCSignalingChannel}`);\n        }\n    }\n\n    async canMixin(type: ScryptedDeviceType, interfaces: string[]): Promise<string[]> {\n        // if this is a webrtc camera, also proxy the signaling channel too\n        // for inflexible clients.\n        if (interfaces.includes(ScryptedInterface.RTCSignalingChannel) || interfaces.includes(ScryptedInterface.RTCSignalingClient)) {\n            const ret = [\n                ScryptedInterface.RTCSignalingChannel,\n                ScryptedInterface.Settings,\n            ];\n            if (type === ScryptedDeviceType.Speaker) {\n                ret.push(ScryptedInterface.Intercom);\n            }\n            else if (type === ScryptedDeviceType.SmartSpeaker) {\n                ret.push(ScryptedInterface.Intercom, ScryptedInterface.Microphone);\n            }\n            else if (type === ScryptedDeviceType.Camera || type === ScryptedDeviceType.Doorbell) {\n                ret.push(ScryptedInterface.VideoCamera, ScryptedInterface.Intercom);\n            }\n            else if (type === ScryptedDeviceType.Display) {\n                // intercom too?\n                ret.push(ScryptedInterface.Intercom, ScryptedInterface.Display);\n            }\n            else if (type === ScryptedDeviceType.SmartDisplay) {\n                // intercom too?\n                ret.push(ScryptedInterface.Intercom, ScryptedInterface.Microphone, ScryptedInterface.Display, ScryptedInterface.VideoCamera);\n            }\n            else {\n                return;\n            }\n\n            return ret;\n        }\n        else if ([\n            ScryptedDeviceType.Camera,\n            ScryptedDeviceType.Doorbell,\n        ].includes(type) && interfaces.includes(ScryptedInterface.VideoCamera)) {\n            return [\n                ScryptedInterface.RTCSignalingChannel,\n                // ScryptedInterface.Settings,\n            ];\n        }\n    }\n\n    async getMixin(mixinDevice: any, mixinDeviceInterfaces: ScryptedInterface[], mixinDeviceState: { [key: string]: any; }): Promise<any> {\n        return new WebRTCMixin(this, {\n            mixinDevice,\n            mixinDeviceInterfaces,\n            mixinDeviceState,\n            group: 'WebRTC',\n            groupKey: 'webrtc',\n            mixinProviderNativeId: this.nativeId,\n        })\n    }\n\n    async releaseMixin(id: string, mixinDevice: any): Promise<void> {\n        await mixinDevice.release();\n    }\n\n    async getCreateDeviceSettings(): Promise<Setting[]> {\n        return [\n            {\n                key: 'name',\n                title: 'Name',\n                description: 'The name of the browser connected camera.',\n            }\n        ];\n    }\n\n    async createDevice(settings: DeviceCreatorSettings): Promise<string> {\n        const nativeId = crypto.randomBytes(8).toString('hex');\n        await deviceManager.onDeviceDiscovered({\n            name: settings.name?.toString(),\n            type: ScryptedDeviceType.Camera,\n            nativeId,\n            interfaces: [\n                ScryptedInterface.RTCSignalingClient,\n                ScryptedInterface.Display,\n                ScryptedInterface.Intercom,\n\n                // RTCSignalingChannel is actually implemented as a loopback from the browser, but\n                // since the feed needs to be tee'd to multiple clients, use VideoCamera instead\n                // to do that.\n                ScryptedInterface.VideoCamera,\n            ],\n        });\n        return nativeId;\n    }\n\n    async getDevice(nativeId: string) {\n        if (nativeId === RTC_BRIDGE_NATIVE_ID)\n            return this.bridge;\n        return new WebRTCCamera(this, nativeId);\n    }\n\n    async releaseDevice(id: string, nativeId: string): Promise<void> {\n    }\n\n    getRTCConfiguration(): RTCConfiguration {\n        if (this.storageSettings.values.rtcConfiguration) {\n            try {\n                return JSON.parse(this.storageSettings.values.rtcConfiguration);\n            }\n            catch (e) {\n                this.console.error('Custom RTC configuration failed. Invalid JSON?', e);\n            }\n        }\n        // google seems to be throttling requests on their open stun server... using a hosted one seems faster.\n        const iceServers = this.storageSettings.values.useTurnServer ? [turnServer] : [stunServer];\n        return {\n            iceServers,\n        };\n    }\n\n    async getWeriftConfiguration(disableTurn?: boolean): Promise<Partial<PeerConfig>> {\n        let ret: Partial<PeerConfig>;\n        if (this.storageSettings.values.weriftConfiguration) {\n            try {\n                ret = JSON.parse(this.storageSettings.values.weriftConfiguration);\n            }\n            catch (e) {\n                this.console.error('Custom Werift configuration failed. Invalid JSON?', e);\n            }\n        }\n\n        const iceServers = this.storageSettings.values.useTurnServer && !disableTurn\n            ? [weriftStunServer, weriftTurnServer]\n            : [weriftStunServer];\n\n        let iceInterfaceAddresses: InterfaceAddresses;\n        if (this.storageSettings.values.iceInterfaceAddresses !== 'All Addresses') {\n            try {\n                for (const address of await sdk.endpointManager.getLocalAddresses()) {\n                    if (ip.isV4Format(address)) {\n                        iceInterfaceAddresses ||= {};\n                        iceInterfaceAddresses.udp4 = address;\n                    }\n                    else if (ip.isV6Format(address)) {\n                        iceInterfaceAddresses ||= {};\n                        iceInterfaceAddresses.udp6 = address;\n                    }\n                }\n            }\n            catch (e) {\n            }\n        }\n\n        return {\n            iceUseIpv6: false,\n            iceServers,\n            iceInterfaceAddresses,\n            ...ret,\n        };\n    }\n\n    async onConnection(request: HttpRequest, webSocketUrl: string) {\n        const cleanup = new Deferred<string>();\n        cleanup.promise.catch(e => this.console.log('cleaning up rtc connection:', e.message));\n\n        const ws = new WebSocket(webSocketUrl);\n        cleanup.promise.finally(() => ws.close());\n\n        if (request.isPublicEndpoint) {\n            ws.close();\n            return;\n        }\n\n        const client = await listenZeroSingleClient();\n        cleanup.promise.finally(() => {\n            client.clientPromise.then(cp => cp.destroy());\n        });\n\n        const message = await new Promise<{\n            connectionManagementId: string,\n            updateSessionId: string,\n        } & ConnectOptions>((resolve, reject) => {\n            const close = () => {\n                const str = 'Connection closed while waiting for message';\n                reject(new Error(str));\n                cleanup.resolve(str);\n            };\n            ws.addEventListener('close', close);\n\n            ws.onmessage = message => {\n                ws.removeEventListener('close', close);\n                resolve(JSON.parse(message.data));\n            }\n        });\n\n        message.username = request.username;\n\n        const { connectionManagementId, updateSessionId } = message;\n        if (connectionManagementId) {\n            cleanup.promise.finally(async () => {\n                const plugins = await systemManager.getComponent('plugins');\n                plugins.setHostParam('@scrypted/webrtc', connectionManagementId);\n            });\n        }\n        if (updateSessionId) {\n            cleanup.promise.finally(async () => {\n                const plugins = await systemManager.getComponent('plugins');\n                plugins.setHostParam('@scrypted/webrtc', updateSessionId);\n            });\n        }\n\n        try {\n            const session = await createBrowserSignalingSession(ws, '@scrypted/webrtc', 'remote');\n            const clientOptions = await session.getOptions();\n\n            const result = zygote();\n            this.activeConnections++;\n            result.worker.on('exit', () => {\n                this.activeConnections--;\n                cleanup.resolve('worker exited');\n            });\n            cleanup.promise.finally(() => {\n                result.worker.terminate()\n            });\n\n            const { createConnection } = await result.result;\n            const connection = await createConnection(message, client.port, session,\n                this.storageSettings.values.maximumCompatibilityMode, clientOptions, {\n                configuration: this.getRTCConfiguration(),\n                weriftConfiguration: await this.getWeriftConfiguration(),\n            });\n            cleanup.promise.finally(() => connection.close().catch(() => { }));\n            connection.waitClosed().finally(() => cleanup.resolve('peer connection closed'));\n\n            await connection.negotiateRTCSignalingSession();\n\n            const cp = await client.clientPromise;\n            cp.on('close', () => cleanup.resolve('socket client closed'));\n            // TODO: remove process.send hack\n            // 12/16/2022\n            if (sdk.connect)\n                sdk.connect(cp, message);\n            else\n                process.send(message, cp);\n        }\n        catch (e) {\n            console.error(\"error negotiating browser RTCC signaling\", e);\n            cleanup.resolve('error');\n            throw e;\n        }\n    }\n}\n\nexport async function fork() {\n    return {\n        async createConnection(message: any, port: number, clientSession: RTCSignalingSession, maximumCompatibilityMode: boolean, clientOptions: RTCSignalingOptions, options: { disableIntercom?: boolean; configuration: RTCConfiguration, weriftConfiguration: Partial<PeerConfig>; }) {\n            const cleanup = new Deferred<string>();\n            cleanup.promise.catch(e => this.console.log('cleaning up rtc connection:', e.message));\n            cleanup.promise.finally(() => setTimeout(() => process.exit(), 10000));\n\n            const connection = new WebRTCConnectionManagement(console, clientSession, maximumCompatibilityMode, clientOptions, options);\n            const { pc } = connection;\n            waitClosed(pc).then(() => cleanup.resolve('peer connection closed'));\n\n            const { connectionManagementId, updateSessionId } = message;\n            if (connectionManagementId || updateSessionId) {\n                const plugins = await systemManager.getComponent('plugins');\n                if (connectionManagementId) {\n                    plugins.setHostParam('@scrypted/webrtc', connectionManagementId, connection);\n                }\n                if (updateSessionId) {\n                    await plugins.setHostParam('@scrypted/webrtc', updateSessionId, (session: RTCSignalingSession) => connection.clientSession = session);\n                }\n            }\n\n            if (port) {\n                const socket = net.connect(port, '127.0.0.1');\n                cleanup.promise.finally(() => socket.destroy());\n\n                const dc = pc.createDataChannel('rpc');\n                dc.message.subscribe(message => socket.write(message));\n\n                const debouncer = new DataChannelDebouncer({\n                    send: u8 => dc.send(Buffer.from(u8)),\n                }, e => {\n                    this.console.error('datachannel send error', e);\n                    socket.destroy();\n                });\n                socket.on('data', data => debouncer.send(data));\n                socket.on('close', () => cleanup.resolve('socket closed'));\n                socket.on('error', () => cleanup.resolve('socket error'));\n            }\n            else {\n                pc.createDataChannel('dummy');\n            }\n\n            return connection;\n        }\n    }\n}\n\nclass WebRTCBridge extends ScryptedDeviceBase implements BufferConverter {\n    constructor(public plugin: WebRTCPlugin, nativeId: string) {\n        super(nativeId);\n\n        this.fromMimeType = ScryptedMimeTypes.RTCSignalingSession;\n        this.toMimeType = ScryptedMimeTypes.RTCConnectionManagement;\n    }\n\n    async convert(data: any, fromMimeType: string, toMimeType: string, options?: MediaObjectOptions): Promise<any> {\n        const session = data as RTCSignalingSession;\n        const maximumCompatibilityMode = !!this.plugin.storageSettings.values.maximumCompatibilityMode;\n        const clientOptions = await session.getOptions();\n\n        const result = zygote();\n\n        const cleanup = new Deferred<string>();\n\n        this.plugin.activeConnections++;\n        result.worker.on('exit', () => {\n            this.plugin.activeConnections--;\n            cleanup.resolve('worker exited');\n        });\n        cleanup.promise.finally(() => {\n            result.worker.terminate()\n        });\n\n        const { createConnection } = await result.result;\n        const connection = await createConnection({}, undefined, session,\n            maximumCompatibilityMode,\n            clientOptions,\n            {\n                configuration: this.plugin.getRTCConfiguration(),\n                weriftConfiguration: await this.plugin.getWeriftConfiguration(),\n            }\n        );\n        cleanup.promise.finally(() => connection.close().catch(() => { }));\n        connection.waitClosed().finally(() => cleanup.resolve('peer connection closed'));\n        await connection.negotiateRTCSignalingSession();\n        await connection.waitConnected();\n\n        // await connection.negotiateRTCSignalingSession();\n\n        return connection;\n    }\n}\n\nexport default WebRTCPlugin;\n","import { RTCPeerConnection } from \"./werift\";\n\ninterface Event {\n    subscribe: (execute: () => void) => {\n        unSubscribe: () => void;\n    };\n}\n\nasync function statePromise(e: Event, check: () => boolean): Promise<void> {\n    if (check())\n        return;\n\n    return new Promise((r, f) => {\n        const u = e.subscribe(() => {\n            try {\n                if (check()) {\n                    u.unSubscribe();\n                    r(undefined);\n                }\n            }\n            catch (e) {\n                u.unSubscribe();\n                f(e);\n            }\n        });\n    })\n}\n\nfunction isPeerConnectionClosed(pc: RTCPeerConnection) {\n    return (pc.connectionState === 'closed'\n        || pc.connectionState === 'disconnected'\n        || pc.connectionState === 'failed')\n}\n\nexport function waitConnected(pc: RTCPeerConnection) {\n    return statePromise(pc.connectionStateChange, () => {\n        if (isPeerConnectionClosed(pc))\n            throw new Error('peer connection closed');\n        return pc.connectionState === 'connected';\n    })\n}\n\nfunction isPeerIceConnectionClosed(pc: RTCPeerConnection) {\n    return (pc.iceConnectionState === 'disconnected'\n        || pc.iceConnectionState === 'failed'\n        || pc.iceConnectionState === 'closed')\n}\n\nexport function waitIceConnected(pc: RTCPeerConnection) {\n    return statePromise(pc.iceConnectionStateChange, () => {\n        if (isPeerIceConnectionClosed(pc))\n            throw new Error('peer ice connection closed');\n        return pc.iceConnectionState === 'connected' || pc.iceConnectionState === 'completed';\n    })\n}\n\nexport function waitClosed(pc: RTCPeerConnection) {\n    return statePromise(pc.connectionStateChange, () => {\n        return isPeerConnectionClosed(pc) || isPeerIceConnectionClosed(pc);\n    })\n}\n\nexport function logConnectionState(console: Console, pc: RTCPeerConnection) {\n    pc.iceConnectionStateChange.subscribe(() => console.log('iceConnectionState', pc.iceConnectionState));\n    pc.iceGatheringStateChange.subscribe(() => console.log('iceGatheringState', pc.iceGatheringState));\n    pc.signalingStateChange.subscribe(() => console.log('signalingState', pc.signalingState));\n    pc.connectionStateChange.subscribe(() => console.log('connectionState', pc.connectionState));\n}\n","import { RtpPacket } from \"../../../external/werift/packages/rtp/src/rtp/rtp\";\nimport { Deferred } from \"@scrypted/common/src/deferred\";\nimport { closeQuiet, createBindZero, listenZeroSingleClient, reserveUdpPort } from \"@scrypted/common/src/listen-cluster\";\nimport { ffmpegLogInitialOutput, safeKillFFmpeg, safePrintFFmpegArguments } from \"@scrypted/common/src/media-helpers\";\nimport { RtspClient, RtspServer, RtspServerResponse, RtspStatusError } from \"@scrypted/common/src/rtsp-server\";\nimport { addTrackControls, MSection, parseSdp, replaceSectionPort } from \"@scrypted/common/src/sdp-utils\";\nimport sdk, { FFmpegInput } from \"@scrypted/sdk\";\nimport child_process, { ChildProcess } from 'child_process';\nimport dgram from 'dgram';\nimport { Socket } from \"net\";\nimport { Writable } from \"stream\";\n\nconst { mediaManager } = sdk;\n\ntype StringWithAutocomplete<T> = T | (string & Record<never, never>);\n\nexport type RtpCodecCopy = StringWithAutocomplete<\"copy\">;\n\nexport interface RtpTrack {\n    codecCopy?: RtpCodecCopy;\n    ffmpegDestination?: string;\n    packetSize?: number;\n    encoderArguments: string[];\n    outputArguments?: string[];\n    onRtp(rtp: Buffer): void;\n    onMSection?: (msection: MSection) => void;\n    firstPacket?: (rtp: Buffer) => void;\n    payloadType?: number;\n    rtcpPort?: number;\n    ssrc?: number;\n    srtp?: {\n        crytoSuite: string;\n        key: Buffer;\n    };\n    bind?: Awaited<ReturnType<typeof createBindZero>>;\n}\n\nexport type RtpTracks = {\n    audio?: RtpTrack;\n    video?: RtpTrack;\n};\n\nexport type RtpSockets = {\n    audio?: dgram.Socket;\n    video?: dgram.Socket;\n};\n\nfunction createPacketDelivery(track: RtpTrack) {\n    const original = track.onRtp;\n    track.onRtp = rtp => {\n        track.onRtp = original;\n        track.firstPacket?.(rtp);\n        track.onRtp(rtp);\n    }\n\n    return (rtp: Buffer) => track.onRtp(rtp);\n}\n\nfunction attachTrackDgram(track: RtpTrack, server: dgram.Socket) {\n    server?.on('message', createPacketDelivery(track));\n}\n\nasync function setupRtspClient(console: Console, rtspClient: RtspClient, channel: number, section: MSection, rtspClientForceTcp: boolean, deliver: ReturnType<typeof createPacketDelivery>) {\n    try {\n        if (!rtspClientForceTcp) {\n            const result = await rtspClient.setup({\n                type: 'udp',\n                path: section.control,\n                onRtp: (rtspHeader, rtp) => deliver(rtp),\n            });\n            console.log('rtsp/udp', section.codec, result);\n            return false;\n        }\n    }\n    catch (e) {\n        if (!(e instanceof RtspStatusError))\n            throw e;\n    }\n    await rtspClient.setup({\n        type: 'tcp',\n        port: channel,\n        path: section.control,\n        onRtp: (rtspHeader, rtp) => deliver(rtp),\n    });\n    console.log('rtsp/tcp', section.codec);\n    return true;\n}\n\nasync function createTrackForwarders(console: Console, killDeferred: Deferred<void>, rtpTracks: RtpTracks) {\n\n    for (const key of Object.keys(rtpTracks)) {\n        const track: RtpTrack = rtpTracks[key];\n        track.bind = await createBindZero();\n        track.bind.server.setRecvBufferSize(1024 * 1024);\n        const { server, port } = track.bind;\n        killDeferred.promise.finally(() => closeQuiet(server));\n        const outputArguments = track.outputArguments = [];\n        if (track.payloadType)\n            outputArguments.push('-payload_type', track.payloadType.toString());\n        if (track.ssrc)\n            outputArguments.push('-ssrc', track.ssrc.toString());\n\n        attachTrackDgram(track, server);\n    }\n}\n\nfunction isCodecCopy(desiredCodec: RtpCodecCopy, checkCodec: string) {\n    return desiredCodec === 'copy'\n        || (desiredCodec && desiredCodec === checkCodec);\n}\n\nexport type RtpForwarderProcess = Awaited<ReturnType<typeof startRtpForwarderProcess>>;\n\nexport async function startRtpForwarderProcess(console: Console, ffmpegInput: FFmpegInput, rtpTracks: RtpTracks, options?: {\n    rtspClientForceTcp?: boolean,\n    rtspMode?: 'udp' | 'tcp' | 'pull',\n    onRtspClient?: (rtspClient: RtspClient, optionsResponse: RtspServerResponse) => Promise<boolean>,\n}) {\n    if (!rtpTracks.audio)\n        delete rtpTracks.audio;\n    if (!rtpTracks.video)\n        delete rtpTracks.video;\n\n    const killDeferred = new Deferred<void>();\n\n    const killGuard = (track: RtpTrack) => {\n        const old = track?.onRtp;\n        if (old) {\n            track.onRtp = rtp => {\n                if (killDeferred.finished)\n                    return;\n                const payloadType = rtp.readUint8(1) & 0x7f;\n                // ignore rtcp.\n                if (payloadType >= 72 && payloadType <= 76)\n                    return;\n                old(rtp);\n            }\n        }\n    }\n    killGuard(rtpTracks.video);\n    killGuard(rtpTracks.audio);\n\n    let { inputArguments, videoDecoderArguments } = ffmpegInput;\n    let rtspClient: RtspClient;\n    killDeferred.promise.finally(() => rtspClient?.safeTeardown());\n    let pipeSdp: string;\n\n    let rtspClientHooked = false;\n    const { rtspMode, onRtspClient, rtspClientForceTcp } = options || {};\n    const { video, audio } = rtpTracks;\n    rtpTracks = Object.assign({}, rtpTracks);\n    const videoCodec = video?.codecCopy;\n    const audioCodec = audio?.codecCopy;\n    const ffmpegPath = await mediaManager.getFFmpegPath();\n\n    const isRtsp = ffmpegInput.container?.startsWith('rtsp');\n\n    let rtspSdp: string;\n    const sdpDeferred = new Deferred<string>();\n    const videoSectionDeferred = new Deferred<MSection>();\n    const audioSectionDeferred = new Deferred<MSection>();\n    videoSectionDeferred.promise.then(s => video?.onMSection?.(s));\n    audioSectionDeferred.promise.then(s => audio?.onMSection?.(s));\n    let allowAudioTranscoderExit = false;\n\n    if (ffmpegInput.url\n        && isRtsp\n        && isCodecCopy(videoCodec, ffmpegInput.mediaStreamOptions?.video?.codec)) {\n\n        // console.log('video codec matched:', rtpTracks.video.codecCopy);\n\n        delete rtpTracks.video;\n\n        rtspClient = new RtspClient(ffmpegInput.url);\n        rtspClient.requestTimeout = 10000;\n\n        try {\n            const optionsResponse = await rtspClient.options();\n            const describe = await rtspClient.describe();\n            rtspSdp = describe.body.toString();\n            const parsedSdp = parseSdp(rtspSdp);\n\n            const videoSection = parsedSdp.msections.find(msection => msection.type === 'video' && (msection.codec === videoCodec || videoCodec === 'copy'));\n            // maybe fallback to udp forwarding/transcoding?\n            if (!videoSection)\n                throw new Error(`advertised video codec ${videoCodec} not found in sdp.`);\n\n            videoSectionDeferred.resolve(videoSection);\n\n            let channel = 0;\n            await setupRtspClient(console, rtspClient, channel, videoSection, rtspClientForceTcp, createPacketDelivery(video));\n            channel += 2;\n\n            const audioSection = parsedSdp.msections.find(msection => msection.type === 'audio' && (msection.codec === audioCodec || audioCodec === 'copy'));\n\n            console.log('a/v', videoCodec, audioCodec, 'found', videoSection.codec, audioSection?.codec);\n\n            if (audio) {\n                if (audioSection\n                    && isCodecCopy(audioCodec, audioSection?.codec)) {\n\n                    // console.log('audio codec matched:', audio.codecCopy);\n\n                    delete rtpTracks.audio;\n\n                    audioSectionDeferred.resolve(audioSection);\n\n                    await setupRtspClient(console, rtspClient, channel, audioSection, rtspClientForceTcp, createPacketDelivery(audio));\n                    channel += 2;\n                }\n                else {\n                    // console.log('audio codec transcoding:', audio.codecCopy);\n\n                    const newSdp = parseSdp(rtspSdp);\n                    let audioSection = newSdp.msections.find(msection => msection.type === 'audio' && msection.codec === audioCodec)\n                    if (!audioSection)\n                        audioSection = newSdp.msections.find(msection => msection.type === 'audio');\n\n                    if (!audioSection) {\n                        delete rtpTracks.audio;\n                        console.warn(`audio section not found in sdp.`);\n                        audioSectionDeferred.resolve(undefined);\n                    }\n                    else {\n                        newSdp.msections = newSdp.msections.filter(msection => msection === audioSection);\n                        const audioSdp = addTrackControls(replaceSectionPort(newSdp.toSdp(), 'audio', 0));\n                        const parsedAudioSdp = parseSdp(audioSdp);\n                        const audioControl = parsedAudioSdp.msections.find(msection => msection.type === 'audio').control;\n\n                        let firstPacket = true;\n                        let adts = false;\n\n                        // if the rtsp client is over tcp, then the restream server must also be tcp, as\n                        // the rtp packets (which can be a max of 64k) may be too large for udp.\n                        const clientIsTcp = await setupRtspClient(console, rtspClient, channel, audioSection, false, rtp => {\n                            // live555 sends rtp aac packets without AU header followed by ADTS packets (which contain codec info)\n                            // which ffmpeg can not handle.\n                            // the solution is to demux the adts and send that to ffmpeg raw.\n                            // https://github.com/mpv-player/mpv/issues/5669#issuecomment-932519409\n                            if (firstPacket) {\n                                firstPacket = false;\n                                if (audioSection.codec === 'aac') {\n                                    const packet = RtpPacket.deSerialize(rtp);\n                                    const buf = packet.payload;\n                                    // adts header is 12 bits of 1s\n                                    if (buf[0] == 0xff && (buf[1] & 0xf0) == 0xf0) {\n                                        adts = true;\n                                        allowAudioTranscoderExit = true;\n                                        const ffmpegArgs = [\n                                            '-hide_banner',\n                                            '-f', 'aac',\n                                            '-i', 'pipe:3',\n                                            ...audio.encoderArguments,\n                                            ...audio.outputArguments,\n                                        ];\n\n                                        safePrintFFmpegArguments(console, ffmpegArgs);\n                                        const cp = child_process.spawn(ffmpegPath, ffmpegArgs, {\n                                            stdio: ['pipe', 'pipe', 'pipe', 'pipe', 'pipe'],\n                                        });\n                                        ffmpegLogInitialOutput(console, cp);\n                                        killDeferred.promise.finally(() => safeKillFFmpeg(cp));\n                                        cp.on('exit', () => killDeferred.resolve(undefined));\n\n                                        audioPipe = cp.stdio[3] as Writable;\n                                    }\n                                }\n                            }\n\n                            if (!adts) {\n                                rtspServer?.sendTrack(audioControl, rtp, false);\n                            }\n                            else {\n                                const packet = RtpPacket.deSerialize(rtp);\n                                audioPipe?.write(packet.payload);\n                            }\n                        });\n\n                        const audioClient = await listenZeroSingleClient();\n                        let audioPipe: Writable;\n                        killDeferred.promise.finally(() => audioClient.clientPromise.then(client => client.destroy()));\n                        let rtspServer: RtspServer;\n                        audioClient.clientPromise.then(async client => {\n                            const r = new RtspServer(client, audioSdp, !clientIsTcp);\n                            killDeferred.promise.finally(() => rtspServer.destroy());\n                            await r.handlePlayback();\n                            rtspServer = r;\n                        });\n\n                        audio.ffmpegDestination = '127.0.0.1';\n                        audio.srtp = undefined;\n\n                        inputArguments = [\n                            '-i', `rtsp://${audioClient.host}:${audioClient.port}`,\n                        ];\n                    }\n                }\n            }\n            else {\n                audioSectionDeferred.resolve(undefined);\n            }\n\n            rtspClientHooked = await onRtspClient?.(rtspClient, optionsResponse);\n            if (!rtspClientHooked)\n                await rtspClient.play();\n        }\n        catch (e) {\n            rtspClient.client.destroy();\n            throw e;\n        }\n    }\n    else {\n        console.log('video codec/container not matched, transcoding:', videoCodec);\n    }\n\n    const reportTranscodedSections = (sdp: string) => {\n        sdpDeferred.resolve(sdp);\n        const parsedSdp = parseSdp(sdp);\n        const videoSection = parsedSdp.msections.find(msection => msection.type === 'video');\n        const audioSection = parsedSdp.msections.find(msection => msection.type === 'audio');\n\n        videoSectionDeferred.resolve(videoSection);\n        audioSectionDeferred.resolve(audioSection);\n\n        return { videoSection, audioSection };\n    }\n\n    await createTrackForwarders(console, killDeferred, rtpTracks);\n\n    rtspClient?.client.on('close', () => killDeferred.resolve(undefined));\n\n    const useRtp = !rtspMode;\n    const rtspServerDeferred = new Deferred<RtspServer>();\n\n    // will no op if there's no tracks\n    let cp: ChildProcess;\n    if (Object.keys(rtpTracks).length) {\n        if (useRtp) {\n            rtspServerDeferred.resolve(undefined);\n\n            for (const key of Object.keys(rtpTracks)) {\n                const track: RtpTrack = rtpTracks[key];\n\n                let destination = track.ffmpegDestination || '127.0.0.1';\n                if (destination === '127.0.0.1')\n                    destination = `${destination}:${track.bind.port}`;\n                const params = new URLSearchParams();\n                let url = `rtp://${destination}`;\n                if (track.rtcpPort)\n                    params.set('rtcpport', track.rtcpPort.toString());\n                if (track.packetSize)\n                    params.set('pkt_size', track.packetSize.toString());\n                if (track.srtp) {\n                    url = `s${url}`;\n                    track.outputArguments.push(\n                        \"-srtp_out_suite\", track.srtp.crytoSuite,\n                        \"-srtp_out_params\", track.srtp.key.toString('base64'),\n                    );\n                }\n                url = `${url}?${params}`;\n\n                track.outputArguments.push('-dn', '-sn');\n                if (key !== 'video')\n                    track.outputArguments.push('-vn');\n                if (key !== 'audio')\n                    track.outputArguments.push('-an');\n                track.outputArguments.push('-f', 'rtp');\n                track.outputArguments.push(url);\n            }\n        }\n\n        const outputArguments: string[] = [];\n\n        for (const key of Object.keys(rtpTracks)) {\n            const track: RtpTrack = rtpTracks[key];\n            outputArguments.push(...track.encoderArguments, ...track.outputArguments);\n        }\n\n        const args = [\n            '-hide_banner',\n\n            ...(videoDecoderArguments || []),\n            ...inputArguments,\n            ...outputArguments,\n        ];\n\n        if (useRtp) {\n            args.push(\n                '-sdp_file', 'pipe:4',\n            );\n        }\n        else {\n            // seems better to use udp for audio timing/chop.\n            const useUdp = rtspMode === 'udp';\n\n            const serverPort = await listenZeroSingleClient();\n\n            args.push(\n                '-rtsp_transport',\n                useUdp ? 'udp' : 'tcp',\n                '-f', 'rtsp',\n                `rtsp://127.0.0.1:${serverPort.port}`\n            );\n\n            serverPort.clientPromise.then(async (client) => {\n                client.on('close', () => killDeferred.resolve(undefined));\n                killDeferred.promise.finally(() => client.destroy());\n\n                const rtspServer = new RtspServer(client, undefined, useUdp);\n                // rtspServer.console = console;\n\n                await rtspServer.handleSetup(['announce']);\n                const { videoSection, audioSection } = reportTranscodedSections(rtspServer.sdp);\n                await rtspServer.handleSetup();\n\n                attachTrackDgram(video, rtspServer.setupTracks[videoSection?.control]?.rtp);\n                attachTrackDgram(audio, rtspServer.setupTracks[audioSection?.control]?.rtp);\n\n                rtspServerDeferred.resolve(rtspServer);\n\n                if (rtspMode !== 'pull') {\n                    let firstVideoPacket = true;\n                    let firstAudioPacket = true;\n                    for await (const rtspSample of rtspServer.handleRecord()) {\n                        if (rtspSample.type === videoSection.codec) {\n                            if (firstVideoPacket) {\n                                firstVideoPacket = false;\n                                video.firstPacket?.(rtspSample.packet);\n                            }\n                            video.onRtp(rtspSample.packet);\n                        }\n                        else if (rtspSample.type === audioSection?.codec) {\n                            if (firstAudioPacket) {\n                                firstAudioPacket = false;\n                                rtpTracks.audio.firstPacket?.(rtspSample.packet);\n                            }\n                            audio.onRtp(rtspSample.packet);\n                        }\n                        else {\n                            console.warn('unexpected rtsp sample', rtspSample.type);\n                        }\n                    }\n                }\n            });\n        }\n\n        safePrintFFmpegArguments(console, args);\n\n        cp = child_process.spawn(ffmpegPath, args, {\n            stdio: ['pipe', 'pipe', 'pipe', 'pipe', 'pipe', 'pipe'],\n        });\n        killDeferred.promise.finally(() => safeKillFFmpeg(cp));\n        cp.on('exit', () => {\n            if (!allowAudioTranscoderExit)\n                killDeferred.resolve(undefined);\n        });\n        if (pipeSdp) {\n            const pipe = cp.stdio[3] as Writable;\n            pipe.write(pipeSdp);\n            pipe.end();\n        }\n        ffmpegLogInitialOutput(console, cp);\n\n        if (useRtp) {\n            cp.stdio[4].on('data', data => {\n                const transcodeSdp = data.toString();\n                reportTranscodedSections(transcodeSdp);\n            });\n        }\n    }\n    else {\n        console.log('bypassing ffmpeg, perfect codecs');\n        sdpDeferred.resolve(rtspSdp);\n    }\n\n    if (!rtspClientHooked) {\n        process.nextTick(() => {\n            rtspClient?.readLoop().catch(() => { }).finally(() => killDeferred.resolve(undefined));\n        });\n    }\n\n    return {\n        cp,\n        rtspServer: rtspServerDeferred.promise,\n        sdpContents: sdpDeferred.promise,\n        videoSection: videoSectionDeferred.promise,\n        audioSection: audioSectionDeferred.promise,\n        kill: () => killDeferred.resolve(undefined),\n        killPromise: killDeferred.promise,\n        get killed() {\n            return killDeferred.finished;\n        },\n    }\n}\n","import { RTCRtpTransceiver } from \"./werift\";\nimport { Deferred } from \"@scrypted/common/src/deferred\";\nimport { listenZeroSingleClient } from \"@scrypted/common/src/listen-cluster\";\nimport { RtspServer } from \"@scrypted/common/src/rtsp-server\";\nimport { createSdpInput, parseSdp } from \"@scrypted/common/src/sdp-utils\";\nimport sdk, { FFmpegInput, Intercom, RTCSessionControl } from \"@scrypted/sdk\";\n\nconst { mediaManager } = sdk;\n\nexport class ScryptedSessionControl implements RTCSessionControl {\n    rtspServer: RtspServer;\n    killed = new Deferred<void>();\n\n    constructor(public intercom: Intercom, public audioTransceiver: RTCRtpTransceiver) {\n    }\n\n    async setPlayback(options: { audio: boolean; video: boolean; }) {\n        if (!this.intercom)\n            return;\n\n        if (!this.audioTransceiver.receiver.track)\n            await this.audioTransceiver.onTrack.asPromise()\n        const track = this.audioTransceiver.receiver.track;\n\n        track.onReceiveRtp.allUnsubscribe();\n        await this.intercom.stopIntercom();\n\n        if (!options.audio) {\n            return;\n        }\n\n        this.rtspServer?.client.destroy();\n\n        const rtspTcpServer = await listenZeroSingleClient();\n\n        const url = rtspTcpServer.url.replace('tcp:', 'rtsp:');\n        const ffmpegInput: FFmpegInput = {\n            url,\n            mediaStreamOptions: {\n                id: undefined,\n                video: null,\n            },\n            inputArguments: [\n                '-rtsp_transport', 'udp',\n                '-i', url,\n            ],\n        };\n\n\n        const mo = await mediaManager.createFFmpegMediaObject(ffmpegInput);\n        await this.intercom.startIntercom(mo);\n\n        const client = await rtspTcpServer.clientPromise;\n\n        const sdpReturnAudio = [\n            \"v=0\",\n            \"o=- 0 0 IN IP4 127.0.0.1\",\n            \"s=\" + \"WebRTC Audio Talkback\",\n            \"c=IN IP4 127.0.0.1\",\n            \"t=0 0\",\n            \"m=audio 0 RTP/AVP 110\",\n            \"b=AS:24\",\n            // HACK, this may not be opus\n            \"a=rtpmap:110 opus/48000/2\",\n            \"a=fmtp:101 minptime=10;useinbandfec=1\",\n        ];\n        let sdp = sdpReturnAudio.join('\\r\\n');\n        sdp = createSdpInput(0, 0, sdp);\n\n\n        const rtspServer = new RtspServer(client, sdp, true);\n        this.rtspServer = rtspServer;\n        // rtspServer.console = console;\n        await rtspServer.handlePlayback();\n        const parsedSdp = parseSdp(rtspServer.sdp);\n        const audioTrack = parsedSdp.msections.find(msection => msection.type === 'audio').control;\n\n        track.onReceiveRtp.subscribe(rtpPacket => {\n            rtpPacket.header.payloadType = 110;\n            rtspServer.sendTrack(audioTrack, rtpPacket.serialize(), false);\n        });\n    }\n\n    async getRefreshAt() {\n    }\n    async extendSession() {\n    }\n\n    async endSession() {\n        this.rtspServer?.client.destroy();\n        this.killed.resolve(undefined);\n    }\n}\n","import { Intercom, MediaObject, RequestMediaStreamOptions, ResponseMediaStreamOptions, RTCAVSignalingSetup, RTCSessionControl, RTCSignalingChannel, RTCSignalingClient, RTCSignalingOptions, RTCSignalingSendIceCandidate, RTCSignalingSession, ScryptedDeviceBase, VideoCamera } from \"@scrypted/sdk\";\nimport { WebRTCPlugin } from \"./main\";\nimport { createRTCPeerConnectionSource, getRTCMediaStreamOptions } from \"./wrtc-to-rtsp\";\n\nconst useSdp = true;\n\nexport class WebRTCCamera extends ScryptedDeviceBase implements VideoCamera, RTCSignalingClient, RTCSignalingChannel, Intercom {\n    pendingClient: (session: RTCSignalingSession) => void;\n    intercom: Promise<Intercom>;\n\n    constructor(public plugin: WebRTCPlugin, nativeId: string) {\n        super(nativeId);\n    }\n\n    async startIntercom(media: MediaObject): Promise<void> {\n        const intercom = await this.intercom;\n        if (!intercom)\n            throw new Error('no webrtc session')\n        return intercom.startIntercom(media);\n    }\n\n    async stopIntercom(): Promise<void> {\n        const intercom = await this.intercom;\n        if (!intercom)\n            throw new Error('no webrtc session')\n        return intercom.stopIntercom();\n    }\n\n    async getVideoStream(options?: RequestMediaStreamOptions): Promise<MediaObject> {\n        const mediaStreamOptions = getRTCMediaStreamOptions('webrtc', 'WebRTC');\n\n        const { mediaObject, intercom } = await createRTCPeerConnectionSource({\n            console: this.console,\n            mediaStreamOptions,\n            channel: this,\n            maximumCompatibilityMode: this.plugin.storageSettings.values.maximumCompatibilityMode,\n        });\n\n        this.intercom?.then(intercom => intercom.stopIntercom());\n        this.intercom = intercom;\n\n        return mediaObject;\n    }\n\n    async getVideoStreamOptions(): Promise<ResponseMediaStreamOptions[]> {\n        const mediaStreamOptions = getRTCMediaStreamOptions('webrtc', 'WebRTC');\n        return [\n            mediaStreamOptions,\n        ];\n    }\n\n    async startRTCSignalingSession(session: RTCSignalingSession): Promise<RTCSessionControl> {\n        if (!this.pendingClient)\n            throw new Error('Browser client is not connected. Click \"Stream Web Camera\".');\n\n        class CompletedSession implements RTCSignalingSession {\n            async getOptions(): Promise<RTCSignalingOptions> {\n                return;\n            }\n            createLocalDescription(type: \"offer\" | \"answer\", setup: RTCAVSignalingSetup, sendIceCandidate: RTCSignalingSendIceCandidate): Promise<RTCSessionDescriptionInit> {\n                return session.createLocalDescription(type, setup, sendIceCandidate);\n            }\n            setRemoteDescription(description: RTCSessionDescriptionInit, setup: RTCAVSignalingSetup): Promise<void> {\n                return session.setRemoteDescription(description, setup);\n            }\n            addIceCandidate(candidate: RTCIceCandidateInit): Promise<void> {\n                return session.addIceCandidate(candidate);\n            }\n        }\n\n        this.pendingClient(new CompletedSession());\n        this.pendingClient = undefined;\n\n        return;\n    }\n\n    createRTCSignalingSession(): Promise<RTCSignalingSession> {\n        return new Promise(resolve => {\n            this.pendingClient = resolve;\n        });\n    }\n}\n","import { RTCRtpCodecParameters } from \"./werift\";\n\nexport const requiredVideoCodec = new RTCRtpCodecParameters({\n    mimeType: \"video/H264\",\n    clockRate: 90000,\n    rtcpFeedback: [\n        { type: \"transport-cc\" },\n        { type: \"ccm\", parameter: \"fir\" },\n        { type: \"nack\" },\n        { type: \"nack\", parameter: \"pli\" },\n        { type: \"goog-remb\" },\n    ],\n    parameters: 'level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=42e01f'\n});\n\nexport const requiredAudioCodecs = [\n    new RTCRtpCodecParameters({\n        mimeType: \"audio/opus\",\n        clockRate: 48000,\n        channels: 2,\n        payloadType: 111,\n    }),\n    // new RTCRtpCodecParameters({\n    //     mimeType: \"audio/G722\",\n    //     clockRate: 8000,\n    //     channels: 1,\n    //     payloadType: 9,\n    // }),\n    new RTCRtpCodecParameters({\n        mimeType: \"audio/PCMU\",\n        clockRate: 8000,\n        channels: 1,\n        payloadType: 0,\n    }),\n    new RTCRtpCodecParameters({\n        mimeType: \"audio/PCMA\",\n        clockRate: 8000,\n        channels: 1,\n        payloadType: 8,\n    }),\n];\n\n\nexport function getAudioCodec(outputCodecParameters: RTCRtpCodecParameters) {\n    if (outputCodecParameters.name === 'PCMA') {\n        return {\n            name: 'pcm_alaw',\n            encoder: 'pcm_alaw',\n        };\n    }\n    if (outputCodecParameters.name === 'PCMU') {\n        return {\n            name: 'pcm_mulaw',\n            encoder: 'pcm_mulaw',\n        };\n    }\n    return {\n        name: 'opus',\n        encoder: 'libopus',\n    };\n}\n\nexport function getFFmpegRtpAudioOutputArguments(inputCodec: string, outputCodecParameters: RTCRtpCodecParameters, maximumCompatibilityMode: boolean) {\n    const ret: string[] = [];\n\n    const { encoder, name } = getAudioCodec(outputCodecParameters);\n\n    if (inputCodec === name && !maximumCompatibilityMode) {\n        ret.push('-acodec', 'copy');\n    }\n    else {\n        ret.push(\n            '-acodec', encoder,\n            '-flags', '+global_header',\n            '-ar', '48k',\n            // choose a better birate? this is on the high end recommendation for voice.\n            '-b:a', '40k',\n            '-bufsize', '96k',\n            '-ac', outputCodecParameters.channels.toString(),\n        )\n\n        if (encoder === 'libopus')\n            ret.push(\n                '-application', 'lowdelay',\n                // webrtc is supposed to support various frame durations but\n                // in practice it expects the default 20 in various implementations.\n                // '-frame_duration', '60',\n            );\n    }\n    return ret;\n}\n","import { RTCIceCandidate, RTCPeerConnection } from \"./werift\";\nimport { RTCAVSignalingSetup, RTCSignalingOptions, RTCSignalingSendIceCandidate, RTCSignalingSession } from '@scrypted/sdk';\nimport { createRawResponse } from \"./werift-util\";\nimport { sleep } from \"@scrypted/common/src/sleep\";\n\nexport class WeriftSignalingSession implements RTCSignalingSession {\n    remoteDescription: Promise<any>;\n\n    constructor(public console: Console, public pc: RTCPeerConnection) {\n    }\n\n    async getOptions(): Promise<RTCSignalingOptions> {\n        return;\n    }\n\n    async createLocalDescription(type: \"offer\" | \"answer\", setup: RTCAVSignalingSetup, sendIceCandidate: RTCSignalingSendIceCandidate): Promise<RTCSessionDescriptionInit> {\n        // werift turn does not seem to work? maybe? sometimes it does? we ignore it here, and that's fine as only 1 side\n        // needs turn.\n        // stun candidates will come through here, if connection is slow to establish.\n        this.pc.onIceCandidate.subscribe(candidate => {\n            // this.console.log('local candidate', candidate.candidate);\n            sendIceCandidate?.({\n                candidate: candidate.candidate,\n                sdpMid: candidate.sdpMid,\n                sdpMLineIndex: candidate.sdpMLineIndex,\n            });\n        });\n\n        let ret: RTCSessionDescriptionInit;\n        if (type === 'offer') {\n            const offer = await this.pc.createOffer();\n            if (!sendIceCandidate)\n                await this.pc.setLocalDescription(offer);\n            else\n                this.pc.setLocalDescription(offer);\n            ret = createRawResponse(offer);\n        }\n        else {\n            if (!sendIceCandidate)\n                await this.remoteDescription;\n            const answer = await this.pc.createAnswer();\n            if (!sendIceCandidate)\n                await this.pc.setLocalDescription(answer);\n            else\n                this.pc.setLocalDescription(answer);\n            ret = createRawResponse(answer);\n        }\n        return ret;\n    }\n\n    async setRemoteDescription(description: RTCSessionDescriptionInit, setup: RTCAVSignalingSetup) {\n        this.remoteDescription = this.pc.setRemoteDescription(description as any);\n    }\n\n    async addIceCandidate(candidate: RTCIceCandidateInit) {\n        // todo: fix this in werift or verify it still occurs at later point\n        // werift seems to choose whatever candidate pair results in the fastest connection.\n        // this makes it sometimes choose the STUN or TURN candidate even when\n        // on the local network.\n        if (candidate.candidate?.includes('relay'))\n            await sleep(500);\n        else if (candidate.candidate?.includes('srflx'))\n            await sleep(250);\n        await this.pc.addIceCandidate(new RTCIceCandidate(candidate));\n    }\n}\n","import { RTCIceServer, RTCPeerConnection, RTCSessionDescription } from \"./werift\";\nimport ip from 'ip';\n\nexport function createRawResponse(response: RTCSessionDescription): RTCSessionDescriptionInit {\n    return {\n        type: response.type,\n        sdp: response.sdp,\n    };\n}\n\nexport function isPeerConnectionAlive(pc: RTCPeerConnection) {\n    if (pc.iceConnectionState === 'disconnected'\n        || pc.iceConnectionState === 'failed'\n        || pc.iceConnectionState === 'closed')\n        return false;\n    if (pc.connectionState === 'closed'\n        || pc.connectionState === 'disconnected'\n        || pc.connectionState === 'failed')\n        return false;\n    return true;\n}\n\nexport function getWeriftIceServers(configuration: RTCConfiguration): RTCIceServer[] {\n    if (!configuration?.iceServers)\n        return;\n    const ret: RTCIceServer[] = [];\n    for (const ice of configuration.iceServers) {\n        if (typeof ice.urls === 'string') {\n            ret.push({\n                ...ice as RTCIceServer,\n            });\n        }\n        else {\n            for (const url of ice.urls) {\n                ret.push(Object.assign({}, ice, {\n                    urls: url,\n                }));\n            }\n        }\n    }\n\n    return ret;\n}\n\nexport function isPrivateIceTransport(pc: RTCPeerConnection) {\n    let isPrivate = true;\n    let destinationId: string;\n    for (const ice of pc.iceTransports) {\n        const [address, port] = (ice.connection as any).nominated[1].remoteAddr;\n        if (!destinationId)\n            destinationId = address;\n        isPrivate = isPrivate && ip.isPrivate(address);\n\n    }\n    console.log('Connection is local network:', isPrivate);\n    const ipv4 = ip.isV4Format(destinationId);\n    return {\n        ipv4,\n        isPrivate,\n        destinationId,\n    };\n}\n\nexport function logIsPrivateIceTransport(console: Console, pc: RTCPeerConnection) {\n    const ret = isPrivateIceTransport(pc);\n    console.log('ice transport', ret);\n    console.log('Connection is local network:', ret.isPrivate);\n    return ret;\n}\n","export * from '../../../external/werift/packages/webrtc/src/index';\n// export * from '@koush/werift';\n","import { BundlePolicy, RTCIceCandidate, RTCPeerConnection, RtcpPayloadSpecificFeedback, RTCRtpTransceiver, RtpPacket } from \"./werift\";\n// import { FullIntraRequest } from \"@koush/werift/lib/rtp/src/rtcp/psfb/fullIntraRequest\";\nimport { FullIntraRequest } from \"../../../external/werift/packages/rtp/src/rtcp/psfb/fullIntraRequest\";\nimport { Deferred } from \"@scrypted/common/src/deferred\";\nimport { listenZeroSingleClient } from \"@scrypted/common/src/listen-cluster\";\nimport { getNaluTypesInNalu, RtspServer } from \"@scrypted/common/src/rtsp-server\";\nimport { createSdpInput, parseSdp } from '@scrypted/common/src/sdp-utils';\nimport sdk, { FFmpegInput, Intercom, MediaObject, MediaStreamUrl, ResponseMediaStreamOptions, RTCAVSignalingSetup, RTCSessionControl, RTCSignalingChannel, RTCSignalingOptions, RTCSignalingSendIceCandidate, RTCSignalingSession, ScryptedMimeTypes } from \"@scrypted/sdk\";\nimport { logConnectionState, waitClosed, waitConnected, waitIceConnected } from \"./peerconnection-util\";\nimport { startRtpForwarderProcess } from \"./rtp-forwarders\";\nimport { getFFmpegRtpAudioOutputArguments, requiredAudioCodecs, requiredVideoCodec } from \"./webrtc-required-codecs\";\nimport { createRawResponse, getWeriftIceServers, isPeerConnectionAlive } from \"./werift-util\";\n\nconst { mediaManager } = sdk;\n\nexport interface RTCPeerConnectionPipe {\n    mediaObject: MediaObject;\n    intercom: Promise<Intercom>;\n    pcClose: Promise<unknown>;\n}\n\nexport async function createRTCPeerConnectionSource(options: {\n    console: Console,\n    mediaStreamOptions: ResponseMediaStreamOptions,\n    channel: RTCSignalingChannel,\n    maximumCompatibilityMode: boolean,\n}): Promise<RTCPeerConnectionPipe> {\n    const { mediaStreamOptions, channel, console, maximumCompatibilityMode } = options;\n\n    const { clientPromise, port } = await listenZeroSingleClient();\n\n    const timeStart = Date.now();\n\n    const sessionControl = new Deferred<RTCSessionControl>();\n    const peerConnection = new Deferred<RTCPeerConnection>();\n    const intercom = new Deferred<Intercom>();\n\n    const cleanup = () => {\n        console.log('webrtc/rtsp cleaning up');\n        clientPromise.then(client => client.destroy());\n        sessionControl.promise.then(sc => sc.endSession());\n        peerConnection.promise.then(pc => pc.close());\n        intercom.promise.then(intercom => intercom.stopIntercom());\n    };\n\n    clientPromise.then(socket => socket.on('close', cleanup));\n\n    const start = (async () => {\n        const client = await clientPromise;\n        const rtspServer = new RtspServer(client, undefined, true);\n        // rtspServer.console = console;\n\n        const ensurePeerConnection = (setup: RTCAVSignalingSetup) => {\n            if (peerConnection.finished)\n                return;\n            const ret = new RTCPeerConnection({\n                bundlePolicy: setup.configuration?.bundlePolicy as BundlePolicy,\n                codecs: {\n                    audio: [\n                        ...requiredAudioCodecs,\n                    ],\n                    video: [\n                        requiredVideoCodec,\n                    ],\n                },\n                iceServers: getWeriftIceServers(setup.configuration),\n            });\n\n            logConnectionState(console, ret);\n            peerConnection.resolve(ret);\n        }\n\n        let audioTrack: string;\n        let videoTrack: string;\n        let audioTransceiver: RTCRtpTransceiver;\n\n        const doSetup = async (setup: RTCAVSignalingSetup) => {\n            ensurePeerConnection(setup);\n\n            let gotAudio = false;\n            let gotVideo = false;\n\n            const pc = await peerConnection.promise;\n            pc.iceConnectionStateChange.subscribe(() => {\n                console.log('iceConnectionState', pc.iceConnectionState);\n            });\n            pc.connectionStateChange.subscribe(() => {\n                console.log('connectionState', pc.connectionState);\n            });\n\n            const setupAudioTranscevier = (transciever: RTCRtpTransceiver) => {\n                audioTransceiver = transciever;\n                audioTransceiver.setDirection('sendrecv');\n                audioTransceiver.mid = '0';\n                audioTransceiver.onTrack.subscribe((track) => {\n                    track.onReceiveRtp.subscribe(rtp => {\n                        if (!gotAudio) {\n                            gotAudio = true;\n                            console.log('first audio packet', Date.now() - timeStart);\n                        }\n                        rtspServer.sendTrack(audioTrack, rtp.serialize(), false);\n                    });\n                    track.onReceiveRtcp.subscribe(rtp => rtspServer.sendTrack(audioTrack, rtp.serialize(), true));\n                });\n            };\n\n            const setupVideoTransceiver = (transceiver: RTCRtpTransceiver) => {\n                const videoTransceiver = transceiver;\n                videoTransceiver.mid = '1';\n                videoTransceiver.onTrack.subscribe((track) => {\n                    console.log('received video track');\n                    track.onReceiveRtp.subscribe(rtp => {\n                        if (!gotVideo) {\n                            gotVideo = true;\n                            console.log('first video packet', Date.now() - timeStart);\n                            const naluTypes = getNaluTypesInNalu(rtp.payload);\n                            console.log('video packet types', ...[...naluTypes]);\n                        }\n                        rtspServer.sendTrack(videoTrack, rtp.serialize(), false);\n                    });\n                    track.onReceiveRtcp.subscribe(rtp => rtspServer.sendTrack(videoTrack, rtp.serialize(), true));\n\n                    track.onReceiveRtp.once(() => {\n                        let firSequenceNumber = 0;\n                        const pictureLossInterval = setInterval(() => {\n                            // i think this is necessary for older clients like ring\n                            // which is really a sip gateway?\n                            const fir = new FullIntraRequest({\n                                senderSsrc: videoTransceiver.receiver.rtcpSsrc,\n                                mediaSsrc: track.ssrc,\n                                fir: [\n                                    {\n                                        sequenceNumber: firSequenceNumber++,\n                                        ssrc: track.ssrc,\n                                    }\n                                ]\n                            });\n                            const packet = new RtcpPayloadSpecificFeedback({\n                                feedback: fir,\n                            });\n                            videoTransceiver.receiver.dtlsTransport.sendRtcp([packet]);\n\n                            // from my testing with browser clients, the pli is what\n                            // triggers a i-frame to be sent, and not the prior FIR request.\n                            videoTransceiver.receiver.sendRtcpPLI(track.ssrc!);\n                        }, 4000);\n                        waitClosed(pc).then(() => clearInterval(pictureLossInterval));\n                    });\n                });\n            };\n\n            if (setup.type === 'answer') {\n                pc.onTransceiverAdded.subscribe(transceiver => {\n                    if (transceiver.kind === 'audio') {\n                        setupAudioTranscevier(transceiver);\n                    }\n                    else if (transceiver.kind === 'video') {\n                        setupVideoTransceiver(transceiver);\n                    }\n                });\n                return;\n            }\n\n            setupAudioTranscevier(pc.addTransceiver(\"audio\", setup.audio as any));\n            setupVideoTransceiver(pc.addTransceiver(\"video\", setup.video as any));\n        }\n\n        const handleRtspSetup = async (description: RTCSessionDescriptionInit) => {\n            if (description.type !== 'answer')\n                throw new Error('rtsp setup needs answer sdp');\n\n            rtspServer.sdp = createSdpInput(0, 0, description.sdp);\n            const parsedSdp = parseSdp(rtspServer.sdp);\n            audioTrack = parsedSdp.msections.find(msection => msection.type === 'audio').control;\n            videoTrack = parsedSdp.msections.find(msection => msection.type === 'video').control;\n            // console.log('sdp sent', rtspServer.sdp);\n\n            await rtspServer.handlePlayback();\n            console.log('rtsp server playback started');\n        }\n\n        class SignalingSession implements RTCSignalingSession {\n            getOptions(): Promise<RTCSignalingOptions> {\n                return;\n            }\n\n            async createLocalDescription(type: \"offer\" | \"answer\", setup: RTCAVSignalingSetup, sendIceCandidate: RTCSignalingSendIceCandidate): Promise<RTCSessionDescriptionInit> {\n                if (type === 'offer')\n                    await doSetup(setup);\n                const pc = await peerConnection.promise;\n                if (setup.datachannel) {\n                    pc.createDataChannel(setup.datachannel.label, setup.datachannel.dict);\n                    // pc.sctpTransport.mid = '2';\n                }\n\n                const gatheringPromise = pc.iceGatheringState === 'complete' ? Promise.resolve(undefined) : new Promise(resolve => pc.iceGatheringStateChange.subscribe(state => {\n                    if (state === 'complete')\n                        resolve(undefined);\n                }));\n\n                if (sendIceCandidate) {\n                    pc.onicecandidate = ev => {\n                        console.log('sendIceCandidate', ev.candidate.sdpMLineIndex, ev.candidate.candidate);\n                        sendIceCandidate({\n                            ...ev.candidate,\n                        });\n                    };\n                }\n\n                if (type === 'answer') {\n                    let answer = await pc.createAnswer();\n                    console.log('createLocalDescription', answer.sdp)\n                    const ret = createRawResponse(answer);\n                    await handleRtspSetup(ret);\n                    const set = pc.setLocalDescription(answer);\n                    if (sendIceCandidate)\n                        return ret;\n                    await set;\n                    await gatheringPromise;\n                    answer = pc.localDescription || answer;\n                    return createRawResponse(answer);\n                }\n                else {\n                    let offer = await pc.createOffer();\n                    console.log('createLocalDescription', offer.sdp)\n                    const set = pc.setLocalDescription(offer);\n                    if (sendIceCandidate)\n                        return createRawResponse(offer);\n                    await set;\n                    await gatheringPromise;\n                    offer = await pc.createOffer();\n                    return createRawResponse(offer);\n                }\n            }\n            async setRemoteDescription(description: RTCSessionDescriptionInit, setup: RTCAVSignalingSetup): Promise<void> {\n                console.log('setRemoteDescription', description.sdp)\n                if (description.type === 'offer')\n                    await doSetup(setup);\n                else\n                    await handleRtspSetup(description);\n                const pc = await peerConnection.promise;\n                await pc.setRemoteDescription(description as any);\n            }\n            async addIceCandidate(candidate: RTCIceCandidateInit): Promise<void> {\n                console.log('addIceCandidate', candidate.sdpMLineIndex, candidate.candidate)\n                const pc = await peerConnection.promise;\n                await pc.addIceCandidate(candidate as RTCIceCandidate);\n            }\n        }\n\n        const session = new SignalingSession();\n        const sc = await channel.startRTCSignalingSession(session);\n        sessionControl.resolve(sc);\n        console.log('waiting for peer connection');\n        const pc = await peerConnection.promise;\n        console.log('waiting for ice connected');\n        await waitIceConnected(pc);\n\n        let destroyProcess: () => void;\n\n        const track = audioTransceiver.sender.sendRtp;\n\n        const ic: Intercom = {\n            async startIntercom(media: MediaObject) {\n                if (!isPeerConnectionAlive(pc))\n                    throw new Error('peer connection is closed');\n\n                if (!track)\n                    throw new Error('peer connection does not support two way audio');\n\n\n                const ffmpegInput = await mediaManager.convertMediaObjectToJSON<FFmpegInput>(media, ScryptedMimeTypes.FFmpegInput);\n\n                const { kill: destroy } = await startRtpForwarderProcess(console, ffmpegInput, {\n                    audio: {\n                        encoderArguments: getFFmpegRtpAudioOutputArguments(ffmpegInput.mediaStreamOptions?.audio?.codec, audioTransceiver.sender.codec, maximumCompatibilityMode),\n                        onRtp: (rtp) => audioTransceiver.sender.sendRtp(rtp),\n                    },\n                });\n\n                ic.stopIntercom();\n\n                destroyProcess = destroy;\n\n                const sc = await sessionControl.promise;\n                sc.setPlayback({\n                    audio: true,\n                    video: false,\n                });\n            },\n            async stopIntercom() {\n                destroyProcess?.();\n\n                sc.setPlayback({\n                    audio: false,\n                    video: false,\n                });\n            },\n        };\n\n        intercom.resolve(ic);\n    })();\n\n    start.catch(e => {\n        console.error('session start failed', e);\n        sessionControl.reject(e);\n        peerConnection.reject(e);\n        intercom.reject(e);\n\n        cleanup();\n    });\n\n    const pcClose = peerConnection.promise.then(pc => waitClosed(pc));\n    pcClose.finally(cleanup);\n\n    peerConnection.promise.catch(e => {\n        console.error('failed to create webrtc signaling session', e);\n        cleanup();\n    });\n\n    const url = `rtsp://127.0.0.1:${port}`;\n    const mediaStreamUrl: MediaStreamUrl = {\n        url,\n        container: 'rtsp',\n        mediaStreamOptions,\n    };\n\n    return {\n        mediaObject: await mediaManager.createMediaObject(mediaStreamUrl, ScryptedMimeTypes.MediaStreamUrl),\n        intercom: intercom.promise,\n        pcClose,\n    };\n}\n\ninterface ReceivedRtpPacket extends RtpPacket {\n    uptime?: number;\n}\n\nexport function getRTCMediaStreamOptions(id: string, name: string): ResponseMediaStreamOptions {\n    return {\n        // set by consumer\n        id,\n        name,\n        // not compatible with scrypted parser currently due to jitter issues\n        tool: 'scrypted',\n        container: 'rtsp',\n        video: {\n            codec: 'h264',\n        },\n        audio: {\n        },\n    };\n}\n","import sdk, { PluginFork } from '@scrypted/sdk';\nimport worker_threads from 'worker_threads';\n\nexport type Zygote<T> = () => PluginFork<T>;\n\nexport function createZygote<T>(): Zygote<T> {\n    if (!worker_threads.isMainThread)\n        return;\n\n    let zygote = sdk.fork<T>();\n    function* next() {\n        while (true) {\n            const cur = zygote;\n            zygote = sdk.fork<T>();\n            yield cur;\n        }\n    }\n\n    const gen = next();\n    return () => gen.next().value as PluginFork<T>;\n}\n","import { once } from 'events';\nimport net from 'net';\n\nexport class ListenZeroSingleClientTimeoutError extends Error {\n    constructor() {\n        super('timeout waiting for client')\n    }\n}\n\nexport async function listenZero(server: net.Server, hostname?: string) {\n    server.listen(0, hostname);\n    await once(server, 'listening');\n    return (server.address() as net.AddressInfo).port;\n}\n\nexport async function listenZeroSingleClient(hostname?: string) {\n    const server = new net.Server();\n    const port = await listenZero(server, hostname);\n\n    const clientPromise = new Promise<net.Socket>((resolve, reject) => {\n        const timeout = setTimeout(() => {\n            server.close();\n            reject(new ListenZeroSingleClientTimeoutError());\n        }, 30000)\n        server.on('connection', client => {\n            server.close();\n            clearTimeout(timeout);\n\n            resolve(client);\n        });\n    });\n\n    clientPromise.catch(() => { });\n\n    let host = hostname;\n    if (!host || host === '0.0.0.0')\n        host = '127.0.0.1';\n\n    return {\n        server,\n        url: `tcp://${host}:${port}`,\n        host,\n        port,\n        clientPromise,\n    }\n}\n","import { ChildProcess } from \"child_process\";\nimport process from 'process';\n\nconst filtered = [\n    'decode_slice_header error',\n    'no frame!',\n    'non-existing PPS',\n];\n\nexport function safeKillFFmpeg(cp: ChildProcess) {\n    if (!cp)\n        return;\n    // this will allow ffmpeg to send rtsp TEARDOWN etc\n    try {\n        cp.stdin.write('q\\n');\n    }\n    catch (e) {\n    }\n    setTimeout(() => {\n        for (const f of cp.stdio) {\n            try {\n                f?.destroy();\n            }\n            catch (e) {\n            }\n        }\n        cp.kill();\n        setTimeout(() => {\n            cp.kill('SIGKILL');\n        }, 2000);\n    }, 2000);\n}\n\nexport function ffmpegLogInitialOutput(console: Console, cp: ChildProcess, forever?: boolean, storage?: Storage) {\n    if (!console)\n        return;\n\n    const SCRYPTED_FFMPEG_NOISY = !!process.env.SCRYPTED_FFMPEG_NOISY || !!storage?.getItem('SCRYPTED_FFMPEG_NOISY');\n\n    function logger(log: (str: string) => void): (buffer: Buffer) => void {\n        const ret = (buffer: Buffer) => {\n            const str = buffer.toString();\n\n            for (const filter of filtered) {\n                if (str.indexOf(filter) !== -1)\n                    return;\n            }\n\n            if (!SCRYPTED_FFMPEG_NOISY && !forever && (str.indexOf('frame=') !== -1 || str.indexOf('size=') !== -1)) {\n                log(str);\n                log('video/audio detected, discarding further input');\n                cp.stdout.removeListener('data', ret);\n                cp.stderr.removeListener('data', ret);\n                return;\n            }\n\n            log(str);\n        }\n\n        return ret;\n    };\n    cp.stdout?.on('data', logger(console.log));\n    cp.stderr?.on('data', logger(console.error));\n    cp.on('exit', () => console.log('ffmpeg exited'));\n}\n\nexport function safePrintFFmpegArguments(console: Console, args: string[]) {\n    if (!console)\n        return;\n    const ret = [];\n    let redactNext = false;\n    for (const arg of args) {\n        try {\n            if (redactNext) {\n                const url = new URL(arg);\n                ret.push(`${url.protocol}[REDACTED]`)\n            }\n            else {\n                ret.push(arg);\n            }\n        }\n        catch (e) {\n            ret.push(arg);\n        }\n\n        // input arguments may contain passwords.\n        redactNext = arg === '-i';\n    }\n\n    console.log(ret.join(' '));\n}\n","import { RpcSerializer } from \"./rpc\";\n\nexport class BufferSerializer implements RpcSerializer {\n    serialize(value: Buffer) {\n        return value.toString('base64');\n    }\n    deserialize(serialized: any) {\n        return Buffer.from(serialized, 'base64');\n    }\n}\n\nexport class SidebandBufferSerializer implements RpcSerializer {\n    bufferSerializer = new BufferSerializer();\n\n    serialize(value: any, serializationContext?: any) {\n        if (!serializationContext)\n            return this.bufferSerializer.serialize(value);\n        const buffers: Buffer[] = serializationContext.buffers = serializationContext.buffers || [];\n        buffers.push(value);\n        return buffers.length - 1;\n    }\n\n    deserialize(serialized: any, serializationContext?: any) {\n        if (!serializationContext?.buffers)\n            return this.bufferSerializer.deserialize(serialized);\n        const buffers: Buffer[] = serializationContext.buffers;\n        return buffers[serialized];\n    }\n}\n","import type { Readable, Writable } from \"stream\";\nimport { SidebandBufferSerializer } from \"./rpc-buffer-serializer\";\nimport { RpcPeer } from \"./rpc\";\n\nexport function createDuplexRpcPeer(selfName: string, peerName: string, readable: Readable, writable: Writable) {\n    const serializer = createRpcDuplexSerializer(writable);\n\n    const rpcPeer = new RpcPeer(selfName, peerName, (message, reject, serializationContext) => {\n        try {\n            serializer.sendMessage(message, reject, serializationContext);\n        }\n        catch (e) {\n            reject?.(e);\n            readable.destroy();\n        }\n    });\n\n    serializer.setupRpcPeer(rpcPeer);\n    readable.on('data', data => serializer.onData(data));\n    readable.on('close', serializer.onDisconnected);\n    readable.on('error', serializer.onDisconnected);\n    return rpcPeer;\n}\n\nexport function createRpcSerializer(options: {\n    sendMessageBuffer: (buffer: Buffer) => void,\n    sendMessageFinish: (message: any) => void,\n}) {\n    let rpcPeer: RpcPeer;\n\n    const { sendMessageBuffer, sendMessageFinish } = options;\n    let connected = true;\n    const onDisconnected = () => {\n        connected = false;\n        rpcPeer.kill('connection closed.');\n    }\n\n    const sendMessage = (message: any, reject: (e: Error) => void, serializationContext: any,) => {\n        if (!connected) {\n            reject?.(new Error('peer disconnected'));\n            return;\n        }\n\n        const buffers = serializationContext?.buffers;\n        if (buffers) {\n            for (const buffer of buffers) {\n                sendMessageBuffer(buffer);\n            }\n        }\n        sendMessageFinish(message);\n    }\n\n    let pendingSerializationContext: any = {};\n    const setupRpcPeer = (peer: RpcPeer) => {\n        rpcPeer = peer;\n        rpcPeer.addSerializer(Buffer, 'Buffer', new SidebandBufferSerializer());\n        rpcPeer.constructorSerializerMap.set(Uint8Array, 'Buffer');\n    }\n\n    const onMessageBuffer = (buffer: Buffer) => {\n        pendingSerializationContext = pendingSerializationContext || {\n            buffers: [],\n        };\n        const buffers: Buffer[] = pendingSerializationContext.buffers;\n        buffers.push(buffer);\n    };\n\n    const onMessageFinish = (message: any) => {\n        const messageSerializationContext = pendingSerializationContext;\n        pendingSerializationContext = undefined;\n        rpcPeer.handleMessage(message, messageSerializationContext);\n    };\n\n    const kill = (message: string) => {\n        rpcPeer.kill(message);\n    };\n\n    return {\n        kill,\n        sendMessage,\n        setupRpcPeer,\n        onMessageBuffer,\n        onMessageFinish,\n        onDisconnected,\n    };\n}\n\nexport function createRpcDuplexSerializer(writable: {\n    write: (data: Buffer) => void;\n}) {\n    const socketSend = (type: number, data: Buffer) => {\n        const header = Buffer.alloc(5);\n        header.writeUInt32BE(data.length + 1, 0);\n        header.writeUInt8(type, 4);\n\n        writable.write(Buffer.concat([header, data]));\n    }\n\n    const createSocketSend = (type: number) => {\n        return (data: Buffer) => {\n            return socketSend(type, data);\n        }\n    }\n\n    const sendMessageBuffer = createSocketSend(1);\n    const sendMessageFinish = createSocketSend(0);\n\n    const serializer = createRpcSerializer({\n        sendMessageBuffer,\n        sendMessageFinish: (message) => sendMessageFinish(Buffer.from(JSON.stringify(message))),\n    });\n\n    let header: Buffer;\n    let pending: Buffer;\n\n    const readPending = (length: number) => {\n        if (!pending || pending.length < length)\n            return;\n\n        const ret = pending.slice(0, length);\n        pending = pending.slice(length);\n        if (!pending.length)\n            pending = undefined;\n        return ret;\n    }\n\n    const onData = (data: Buffer) => {\n        if (!pending)\n            pending = data;\n        else\n            pending = Buffer.concat([pending, data]);\n\n        while (true) {\n            if (!header) {\n                header = readPending(5);\n                if (!header)\n                    return;\n            }\n\n            const length = header.readUInt32BE(0);\n            const type = header.readUInt8(4);\n            const payload: Buffer = readPending(length - 1);\n            if (!payload)\n                return;\n\n            header = undefined;\n\n            if (type === 0) {\n                try {\n                    const message = JSON.parse(payload.toString());\n                    serializer.onMessageFinish(message);\n                }\n                catch (e) {\n                    serializer.kill('message parse failure ' + e.message);\n                }\n            }\n            else {\n                serializer.onMessageBuffer(payload);\n            }\n        }\n    }\n\n    return {\n        onData,\n        setupRpcPeer: serializer.setupRpcPeer,\n        sendMessage: serializer.sendMessage,\n        onDisconnected: serializer.onDisconnected,\n    };\n}\n","import type { CompileFunctionOptions } from 'vm';\ntype CompileFunction = (code: string, params?: ReadonlyArray<string>, options?: CompileFunctionOptions) => Function;\n\nexport function startPeriodicGarbageCollection() {\n    if (!global.gc) {\n        console.warn('rpc peer garbage collection not available: global.gc is not exposed.');\n    }\n    let g: typeof global;\n    try {\n        g = global;\n    }\n    catch (e) {\n    }\n\n    // periodically see if new objects were created or finalized,\n    // and collect gc if so.\n    let lastCollection = 0;\n    return setInterval(() => {\n        const now = Date.now();\n        const sinceLastCollection = now - lastCollection;\n        const remotesCreated = RpcPeer.remotesCreated;\n        RpcPeer.remotesCreated = 0;\n        const remotesCollected = RpcPeer.remotesCollected;\n        RpcPeer.remotesCollected = 0;\n        if (remotesCreated || remotesCollected || sinceLastCollection > 5 * 60 * 1000) {\n            lastCollection = now;\n            g?.gc?.();\n        }\n    }, 10000);\n}\n\nexport interface RpcMessage {\n    type: 'apply' | 'result' | 'finalize' | 'param';\n}\n\nexport interface RpcParam extends RpcMessage {\n    type: 'param';\n    id: string;\n    param: string;\n}\n\nexport interface RpcApply extends RpcMessage {\n    type: 'apply';\n    id: string | undefined;\n    proxyId: string;\n    args: any[];\n    method: string;\n    oneway?: boolean;\n}\n\nexport interface RpcResult extends RpcMessage {\n    type: 'result';\n    id: string;\n    // TODO 3/2/2023\n    // deprecate these properties from rpc protocol. treat error results like any other result\n    // and auto serialize them.\n    /**\n     * @deprecated\n     */\n    stack?: string;\n    /**\n     * @deprecated\n     */\n    message?: string;\n    throw?: boolean;\n    result?: any;\n}\n\ninterface RpcFinalize extends RpcMessage {\n    type: 'finalize';\n    __local_proxy_id: string;\n    __local_proxy_finalizer_id: string | undefined;\n}\n\ninterface RpcRemoteProxyValue {\n    __remote_proxy_id: string | undefined;\n    __remote_proxy_finalizer_id: string | undefined;\n    __remote_constructor_name: string;\n    __remote_proxy_props: any;\n    __remote_proxy_oneway_methods: string[];\n    __serialized_value?: any;\n}\n\ninterface RpcLocalProxyValue {\n    __local_proxy_id: string;\n}\n\ninterface Deferred {\n    resolve: any;\n    reject: any;\n}\n\nexport interface PrimitiveProxyHandler<T extends object> extends ProxyHandler<T> {\n    toPrimitive(): any;\n}\n\nclass RpcProxy implements PrimitiveProxyHandler<any> {\n    static iteratorMethods = new Set([\n        'next',\n        'throw',\n        'return',\n    ]);\n\n    constructor(public peer: RpcPeer,\n        public entry: LocalProxiedEntry,\n        public constructorName: string,\n        public proxyProps: any,\n        public proxyOneWayMethods: string[]) {\n    }\n\n    toPrimitive() {\n        const peer = this.peer;\n        return `RpcProxy-${peer.selfName}:${peer.peerName}: ${this.constructorName}`;\n    }\n\n    get(target: any, p: PropertyKey, receiver: any): any {\n        if (p === Symbol.asyncIterator) {\n            if (!this.proxyProps?.[Symbol.asyncIterator.toString()])\n                return;\n            return () => {\n                return new Proxy(() => { }, this);\n            };\n        }\n        if (RpcProxy.iteratorMethods.has(p?.toString())) {\n            const asyncIteratorMethod = this.proxyProps?.[Symbol.asyncIterator.toString()]?.[p];\n            if (asyncIteratorMethod)\n                return new Proxy(() => asyncIteratorMethod, this);\n        }\n        if (p === RpcPeer.PROPERTY_PROXY_ID)\n            return this.entry.id;\n        if (p === '__proxy_constructor')\n            return this.constructorName;\n        if (p === '__proxy_peer')\n            return this.peer;\n        if (p === RpcPeer.PROPERTY_PROXY_PROPERTIES)\n            return this.proxyProps;\n        if (p === RpcPeer.PROPERTY_PROXY_ONEWAY_METHODS)\n            return this.proxyOneWayMethods;\n        if (p === RpcPeer.PROPERTY_JSON_DISABLE_SERIALIZATION || p === RpcPeer.PROPERTY_JSON_COPY_SERIALIZE_CHILDREN)\n            return;\n        if (p === 'then')\n            return;\n        if (p === 'constructor')\n            return;\n        if (this.proxyProps?.[p] !== undefined)\n            return this.proxyProps?.[p];\n        const handled = RpcPeer.handleFunctionInvocations(this, target, p, receiver);\n        if (handled)\n            return handled;\n        return new Proxy(() => p, this);\n    }\n\n    set(target: any, p: string | symbol, value: any, receiver: any): boolean {\n        if (p === RpcPeer.finalizerIdSymbol) {\n            this.entry.finalizerId = value;\n        }\n        else {\n            this.proxyProps ||= {};\n            this.proxyProps[p] = value;\n        }\n\n        return true;\n    }\n\n    apply(target: any, thisArg: any, argArray?: any): any {\n        const method = target() || null;\n        const oneway = this.proxyOneWayMethods?.includes?.(method);\n\n        if (Object.isFrozen(this.peer.pendingResults)) {\n            if (oneway)\n                return Promise.resolve();\n            return Promise.reject(new RPCResultError(this.peer, 'RpcPeer has been killed (apply) ' + target()));\n        }\n\n        // rpc objects can be functions. if the function is a oneway method,\n        // it will have a null in the oneway method list. this is because\n        // undefined is not JSON serializable.\n        const args: any[] = [];\n        const serializationContext: any = {};\n        for (const arg of (argArray || [])) {\n            args.push(this.peer.serialize(arg, serializationContext));\n        }\n\n        const rpcApply: RpcApply = {\n            type: \"apply\",\n            id: undefined,\n            proxyId: this.entry.id,\n            args,\n            method,\n        };\n\n        if (oneway) {\n            rpcApply.oneway = true;\n            // a oneway callable object doesn't need to be in the JSON payload.\n            if (method === null)\n                delete rpcApply.method;\n            this.peer.send(rpcApply, undefined, serializationContext);\n            return Promise.resolve();\n        }\n\n        const pendingResult = this.peer.createPendingResult((id, reject) => {\n            rpcApply.id = id;\n            this.peer.send(rpcApply, reject, serializationContext);\n        });\n\n        const asyncIterator = this.proxyProps?.[Symbol.asyncIterator.toString()];\n        if (!asyncIterator || (method !== asyncIterator.next && method !== asyncIterator.return))\n            return pendingResult;\n\n        return pendingResult\n            .then(value => {\n                if (method === asyncIterator.return) {\n                    return {\n                        done: true,\n                        value: undefined,\n                    }\n                }\n                return ({\n                    value,\n                    done: false,\n                });\n            })\n            .catch(e => {\n                if (e.name === 'StopAsyncIteration') {\n                    return {\n                        done: true,\n                        value: undefined,\n                    }\n                }\n                throw e;\n            })\n    }\n}\n\ninterface SerialiedRpcResultError {\n    name: string;\n    stack: string;\n    message: string;\n}\n\n// todo: error constructor adds a \"cause\" variable in Chrome 93, Node v??\nexport class RPCResultError extends Error {\n    constructor(peer: RpcPeer, message: string, public cause?: Error, options?: { name: string, stack: string | undefined }) {\n        super(`${message}\\n${peer.selfName}:${peer.peerName}`);\n\n        if (options?.name) {\n            this.name = options?.name;\n        }\n        if (options?.stack) {\n            this.stack = `${cause?.stack || options.stack}\\n${peer.peerName}:${peer.selfName}`;\n        }\n    }\n}\n\nfunction compileFunction(code: string, params?: ReadonlyArray<string>, options?: CompileFunctionOptions): any {\n    params = params || [];\n    const f = `(function(${params.join(',')}) {;${code};})`;\n    return eval(f);\n}\n\ndeclare class WeakRef<T> {\n    target: T;\n    constructor(target: any);\n    deref(): T;\n}\n\ntry {\n    // @ts-ignore\n    const fr = FinalizationRegistry;\n}\ncatch (e) {\n    (window as any).WeakRef = class WeakRef {\n        target: any;\n        constructor(target: any) {\n            this.target = target;\n        }\n        deref(): any {\n            return this.target;\n        }\n    };\n\n    (window as any).FinalizationRegistry = class FinalizationRegistry {\n        register() {\n        }\n    }\n}\n\nexport interface RpcSerializer {\n    serialize(value: any, serializationContext?: any): any;\n    deserialize(serialized: any, serializationContext?: any): any;\n}\n\ninterface LocalProxiedEntry {\n    id: string;\n    finalizerId: string | undefined;\n}\n\ninterface ErrorType {\n    name: string;\n    message: string;\n    stack?: string;\n}\n\nexport class RpcPeer {\n    idCounter = 1;\n    params: { [name: string]: any } = {};\n    pendingResults: { [id: string]: Deferred } = {};\n    proxyCounter = 1;\n    localProxied = new Map<any, LocalProxiedEntry>();\n    localProxyMap = new Map<string, any>();\n    // @ts-ignore\n    remoteWeakProxies: { [id: string]: WeakRef<any> } = {};\n    // @ts-ignore\n    finalizers = new FinalizationRegistry(entry => this.finalize(entry as LocalProxiedEntry));\n    nameDeserializerMap = new Map<string, RpcSerializer>();\n    onProxyTypeSerialization = new Map<string, (value: any) => void>();\n    onProxySerialization: (value: any, proxyId: string) => any;\n    constructorSerializerMap = new Map<any, string>();\n    transportSafeArgumentTypes = RpcPeer.getDefaultTransportSafeArgumentTypes();\n    killed: Promise<string>;\n    killedDeferred: Deferred;\n    tags: any = {};\n\n    static readonly finalizerIdSymbol = Symbol('rpcFinalizerId');\n    static remotesCollected = 0;\n    static remotesCreated = 0;\n    static activeRpcPeer: RpcPeer;\n\n    static isRpcProxy(value: any) {\n        return !!value?.[RpcPeer.PROPERTY_PROXY_ID];\n    }\n\n    static getDefaultTransportSafeArgumentTypes() {\n        const jsonSerializable = new Set<string>();\n        jsonSerializable.add(Number.name);\n        jsonSerializable.add(String.name);\n        jsonSerializable.add(Object.name);\n        jsonSerializable.add(Boolean.name);\n        jsonSerializable.add(Array.name);\n        return jsonSerializable;\n    }\n\n    static handleFunctionInvocations(thiz: PrimitiveProxyHandler<any>, target: any, p: PropertyKey, receiver: any): any {\n        if (p === 'apply') {\n            return (thisArg: any, args: any[]) => {\n                return thiz.apply!(target, thiz, args);\n            }\n        }\n        else if (p === 'call') {\n            return (thisArg: any, ...args: any[]) => {\n                return thiz.apply!(target, thiz, args);\n            }\n        }\n        else if (p === 'toString' || p === Symbol.toPrimitive) {\n            return (thisArg: any, ...args: any[]) => {\n                return thiz.toPrimitive();\n            }\n        }\n    }\n\n    // static setProxyProperties(value: any, properties: any) {\n    //     value[RpcPeer.PROPERTY_PROXY_PROPERTIES] = properties;\n    // }\n\n    // static getProxyProperties(value: any) {\n    //     return value?.[RpcPeer.PROPERTY_PROXY_PROPERTIES];\n    // }\n\n    static getIteratorNext(target: any): string {\n        if (!target[Symbol.asyncIterator])\n            return;\n        const proxyProps = target[this.PROPERTY_PROXY_PROPERTIES]?.[Symbol.asyncIterator.toString()];\n        return proxyProps?.next || 'next';\n    }\n\n    static prepareProxyProperties(value: any) {\n        let props = value?.[RpcPeer.PROPERTY_PROXY_PROPERTIES];\n        if (!value[Symbol.asyncIterator])\n            return props;\n        props ||= {};\n        if (!props[Symbol.asyncIterator.toString()]) {\n            props[Symbol.asyncIterator.toString()] = {\n                next: 'next',\n                throw: 'throw',\n                return: 'return',\n            };\n        }\n        return props;\n    }\n\n    static readonly RPC_RESULT_ERROR_NAME = 'RPCResultError';\n    static readonly PROPERTY_PROXY_ID = '__proxy_id';\n    static readonly PROPERTY_PROXY_ONEWAY_METHODS = '__proxy_oneway_methods';\n    static readonly PROPERTY_JSON_DISABLE_SERIALIZATION = '__json_disable_serialization';\n    static readonly PROPERTY_PROXY_PROPERTIES = '__proxy_props';\n    static readonly PROPERTY_JSON_COPY_SERIALIZE_CHILDREN = '__json_copy_serialize_children';\n    static readonly PROBED_PROPERTIES = new Set<any>([\n        'then',\n        'constructor',\n        '__proxy_id',\n        '__proxy_constructor',\n        '__proxy_peer',\n        RpcPeer.PROPERTY_PROXY_ONEWAY_METHODS,\n        RpcPeer.PROPERTY_JSON_DISABLE_SERIALIZATION,\n        RpcPeer.PROPERTY_PROXY_PROPERTIES,\n        RpcPeer.PROPERTY_JSON_COPY_SERIALIZE_CHILDREN,\n    ]);\n\n    constructor(public selfName: string, public peerName: string, public send: (message: RpcMessage, reject?: (e: Error) => void, serializationContext?: any) => void) {\n        this.killed = new Promise<string>((resolve, reject) => {\n            this.killedDeferred = { resolve, reject };\n        }).catch(e => e.message || 'Unknown Error');\n    }\n\n    static isTransportSafe(value: any) {\n        return !value || (!value[RpcPeer.PROPERTY_JSON_DISABLE_SERIALIZATION] && this.getDefaultTransportSafeArgumentTypes().has(value.constructor?.name));\n    }\n\n    isTransportSafe(value: any) {\n        return !value || (!value[RpcPeer.PROPERTY_JSON_DISABLE_SERIALIZATION] && this.transportSafeArgumentTypes.has(value.constructor?.name));\n    }\n\n    createPendingResult(cb: (id: string, reject: (e: Error) => void) => void): Promise<any> {\n        if (Object.isFrozen(this.pendingResults))\n            return Promise.reject(new RPCResultError(this, 'RpcPeer has been killed (createPendingResult)'));\n\n        const promise = new Promise((resolve, reject) => {\n            const id = (this.idCounter++).toString();\n            this.pendingResults[id] = { resolve, reject };\n\n            cb(id, e => reject(new RPCResultError(this, e.message, e)));\n        });\n\n        // todo: make this an option so rpc doesn't nuke the process if uncaught?\n        promise.catch(() => { });\n\n        return promise;\n    }\n\n    kill(message?: string) {\n        if (Object.isFrozen(this.pendingResults))\n            return;\n        const error = new RPCResultError(this, message || 'peer was killed');\n        this.killedDeferred.reject(error);\n        for (const result of Object.values(this.pendingResults)) {\n            result.reject(error);\n        }\n        this.pendingResults = Object.freeze({});\n        this.params = Object.freeze({});\n        this.remoteWeakProxies = Object.freeze({});\n        this.localProxyMap.clear()\n        this.localProxied.clear();\n    }\n\n    // need a name/constructor map due to babel name mangling? fix somehow?\n    addSerializer(ctr: any, name: string, serializer: RpcSerializer) {\n        this.nameDeserializerMap.set(name, serializer);\n        this.constructorSerializerMap.set(ctr, name);\n    }\n\n    finalize(entry: LocalProxiedEntry) {\n        RpcPeer.remotesCollected++;\n\n        delete this.remoteWeakProxies[entry.id];\n        const rpcFinalize: RpcFinalize = {\n            __local_proxy_id: entry.id,\n            __local_proxy_finalizer_id: entry.finalizerId,\n            type: 'finalize',\n        }\n        this.send(rpcFinalize);\n    }\n\n    async getParam(param: string) {\n        return this.createPendingResult((id, reject) => {\n            const paramMessage: RpcParam = {\n                id,\n                type: 'param',\n                param,\n            };\n\n            this.send(paramMessage, reject);\n        });\n    }\n\n    evalLocal<T>(script: string, filename?: string, coercedParams?: { [name: string]: any }): T {\n        const params = Object.assign({}, this.params, coercedParams);\n        let compile: CompileFunction;\n        try {\n            // prevent bundlers from trying to include non-existent vm module.\n            compile = module[`require`]('vm').compileFunction;\n        }\n        catch (e) {\n            compile = compileFunction;\n        }\n        const f = compile(script, Object.keys(params), {\n            filename,\n        });\n        const value = f(...Object.values(params));\n        return value;\n    }\n\n    /**\n     * @deprecated\n     * @param result\n     * @param e\n     */\n    createErrorResult(result: RpcResult, e: ErrorType) {\n        result.result = this.serializeError(e);\n        result.throw = true;\n        result.message = (e as Error).message || 'no message';\n        result.stack = e.stack || 'no stack';\n    }\n\n    deserialize(value: any, deserializationContext: any): any {\n        if (!value)\n            return value;\n\n        const copySerializeChildren = value[RpcPeer.PROPERTY_JSON_COPY_SERIALIZE_CHILDREN];\n        if (copySerializeChildren) {\n            const ret: any = {};\n            for (const [key, val] of Object.entries(value)) {\n                ret[key] = this.deserialize(val, deserializationContext);\n            }\n            return ret;\n        }\n\n        const { __remote_proxy_id, __remote_proxy_finalizer_id, __local_proxy_id, __remote_constructor_name, __serialized_value, __remote_proxy_props, __remote_proxy_oneway_methods } = value;\n        if (__remote_constructor_name === RpcPeer.RPC_RESULT_ERROR_NAME)\n            return this.deserializeError(__serialized_value);\n\n        if (__remote_proxy_id) {\n            let proxy = this.remoteWeakProxies[__remote_proxy_id]?.deref();\n            if (!proxy)\n                proxy = this.newProxy(__remote_proxy_id, __remote_constructor_name, __remote_proxy_props, __remote_proxy_oneway_methods);\n            proxy[RpcPeer.finalizerIdSymbol] = __remote_proxy_finalizer_id;\n\n            const deserializer = this.nameDeserializerMap.get(__remote_constructor_name);\n            if (deserializer) {\n                return deserializer.deserialize(proxy, deserializationContext);\n            }\n\n            return proxy;\n        }\n\n        if (__local_proxy_id) {\n            const ret = this.localProxyMap.get(__local_proxy_id);\n            if (!ret)\n                throw new RPCResultError(this, `invalid local proxy id ${__local_proxy_id}`);\n            return ret;\n        }\n\n        const deserializer = this.nameDeserializerMap.get(__remote_constructor_name);\n        if (deserializer) {\n            return deserializer.deserialize(__serialized_value, deserializationContext);\n        }\n\n        return value;\n    }\n\n    deserializeError(e: SerialiedRpcResultError): RPCResultError {\n        const { name, stack, message } = e;\n        return new RPCResultError(this, message, undefined, { name, stack });\n    }\n\n    serializeError(e: ErrorType): RpcRemoteProxyValue {\n        const __serialized_value: SerialiedRpcResultError = {\n            stack: e.stack || '[no stack]',\n            name: e.name || '[no name]',\n            message: e.message || '[no message]',\n        }\n        return {\n            // probably not safe to use constructor.name\n            __remote_constructor_name: RpcPeer.RPC_RESULT_ERROR_NAME,\n            __remote_proxy_id: undefined,\n            __remote_proxy_finalizer_id: undefined,\n            __remote_proxy_oneway_methods: undefined,\n            __remote_proxy_props: undefined,\n            __serialized_value,\n        };\n    }\n\n    serialize(value: any, serializationContext: any): any {\n        if (value?.[RpcPeer.PROPERTY_JSON_COPY_SERIALIZE_CHILDREN] === true) {\n            const ret: any = {};\n            for (const [key, val] of Object.entries(value)) {\n                ret[key] = this.serialize(val, serializationContext);\n            }\n            return ret;\n        }\n\n        if (this.isTransportSafe(value)) {\n            return value;\n        }\n\n        let __remote_constructor_name = value.__proxy_constructor || value.constructor?.name?.toString();\n\n        if (value instanceof Error)\n            return this.serializeError(value);\n\n        const serializerMapName = this.constructorSerializerMap.get(value.constructor);\n        if (serializerMapName) {\n            __remote_constructor_name = serializerMapName;\n            const serializer = this.nameDeserializerMap.get(serializerMapName);\n            if (!serializer)\n                throw new Error('serializer not found for ' + serializerMapName);\n            const serialized = serializer.serialize(value, serializationContext);\n            const ret: RpcRemoteProxyValue = {\n                __remote_proxy_id: undefined,\n                __remote_proxy_finalizer_id: undefined,\n                __remote_constructor_name,\n                __remote_proxy_props: RpcPeer.prepareProxyProperties(value),\n                __remote_proxy_oneway_methods: value?.[RpcPeer.PROPERTY_PROXY_ONEWAY_METHODS],\n                __serialized_value: serialized,\n            }\n            return ret;\n        }\n\n        let proxiedEntry = this.localProxied.get(value);\n        if (proxiedEntry) {\n            const __remote_proxy_finalizer_id = (this.proxyCounter++).toString();\n            proxiedEntry.finalizerId = __remote_proxy_finalizer_id;\n            const ret: RpcRemoteProxyValue = {\n                __remote_proxy_id: proxiedEntry.id,\n                __remote_proxy_finalizer_id,\n                __remote_constructor_name,\n                __remote_proxy_props: RpcPeer.prepareProxyProperties(value),\n                __remote_proxy_oneway_methods: value?.[RpcPeer.PROPERTY_PROXY_ONEWAY_METHODS],\n            }\n            return ret;\n        }\n\n        const { __proxy_id, __proxy_peer } = value;\n        if (__proxy_id && __proxy_peer === this) {\n            const ret: RpcLocalProxyValue = {\n                __local_proxy_id: __proxy_id,\n            }\n            return ret;\n        }\n\n        this.onProxyTypeSerialization.get(__remote_constructor_name)?.(value);\n\n        const __remote_proxy_id = (this.proxyCounter++).toString();\n        proxiedEntry = {\n            id: __remote_proxy_id,\n            finalizerId: __remote_proxy_id,\n        };\n        this.localProxied.set(value, proxiedEntry);\n        this.localProxyMap.set(__remote_proxy_id, value);\n\n        const __remote_proxy_props = this.onProxySerialization ? this.onProxySerialization(value, __remote_proxy_id) : RpcPeer.prepareProxyProperties(value);\n\n        const ret: RpcRemoteProxyValue = {\n            __remote_proxy_id,\n            __remote_proxy_finalizer_id: __remote_proxy_id,\n            __remote_constructor_name,\n            __remote_proxy_props,\n            __remote_proxy_oneway_methods: value?.[RpcPeer.PROPERTY_PROXY_ONEWAY_METHODS],\n        }\n\n        return ret;\n    }\n\n    newProxy(proxyId: string, proxyConstructorName: string, proxyProps: any, proxyOneWayMethods: string[]) {\n        RpcPeer.remotesCreated++;\n\n        const localProxiedEntry: LocalProxiedEntry = {\n            id: proxyId,\n            finalizerId: undefined,\n        }\n        const rpc = new RpcProxy(this, localProxiedEntry, proxyConstructorName, proxyProps, proxyOneWayMethods);\n        const target = proxyConstructorName === 'Function' || proxyConstructorName === 'AsyncFunction' ? function () { } : rpc;\n        const proxy = new Proxy(target, rpc);\n        // @ts-ignore\n        const weakref = new WeakRef(proxy);\n        this.remoteWeakProxies[proxyId] = weakref;\n        this.finalizers.register(rpc, localProxiedEntry);\n        return proxy;\n    }\n\n    handleMessage(message: RpcMessage, deserializationContext?: any) {\n        try {\n            RpcPeer.activeRpcPeer = this;\n            this.handleMessageInternal(message, deserializationContext);\n        }\n        finally {\n            RpcPeer.activeRpcPeer = undefined;\n        }\n    }\n\n    private async handleMessageInternal(message: RpcMessage, deserializationContext?: any) {\n        if (Object.isFrozen(this.pendingResults))\n            return;\n\n        try {\n            switch (message.type) {\n                case 'param': {\n                    const rpcParam = message as RpcParam;\n                    const serializationContext: any = {};\n                    let result: RpcResult;\n                    try {\n                        result = {\n                            type: 'result',\n                            id: rpcParam.id,\n                            result: this.serialize(this.params[rpcParam.param], serializationContext)\n                        };\n                    }\n                    catch (e) {\n                        // console.error('failure', rpcApply.method, e);\n                        this.createErrorResult(result, e);\n                    }\n\n                    this.send(result, undefined, serializationContext);\n                    break;\n                }\n                case 'apply': {\n                    const rpcApply = message as RpcApply;\n                    const result: RpcResult = {\n                        type: 'result',\n                        id: rpcApply.id || '',\n                    };\n                    const serializationContext: any = {};\n\n                    try {\n                        const target = this.localProxyMap.get(rpcApply.proxyId);\n                        if (!target)\n                            throw new Error(`proxy id ${rpcApply.proxyId} not found`);\n\n                        const args = [];\n                        for (const arg of (rpcApply.args || [])) {\n                            args.push(this.deserialize(arg, deserializationContext));\n                        }\n\n                        let value: any;\n                        if (rpcApply.method) {\n                            const method = target[rpcApply.method];\n                            if (!method)\n                                throw new Error(`target ${target?.constructor?.name} does not have method ${rpcApply.method}`);\n                            value = await target[rpcApply.method](...args);\n\n                            if (RpcPeer.getIteratorNext(target) === rpcApply.method) {\n                                if (value.done) {\n                                    const errorType: ErrorType = {\n                                        name: 'StopAsyncIteration',\n                                        message: undefined,\n                                    };\n                                    throw errorType;\n                                }\n                                else {\n                                    value = value.value;\n                                }\n                            }\n                        }\n                        else {\n                            value = await target(...args);\n                        }\n\n                        result.result = this.serialize(value, serializationContext);\n                    }\n                    catch (e) {\n                        // console.error('failure', rpcApply.method, e);\n                        this.createErrorResult(result, e);\n                    }\n\n                    if (!rpcApply.oneway)\n                        this.send(result, undefined, serializationContext);\n                    break;\n                }\n                case 'result': {\n                    // console.log(message)\n                    const rpcResult = message as RpcResult;\n                    const deferred = this.pendingResults[rpcResult.id];\n                    delete this.pendingResults[rpcResult.id];\n                    if (!deferred)\n                        throw new Error(`unknown result ${rpcResult.id}`);\n                    if ((rpcResult.message || rpcResult.stack) && !rpcResult.throw) {\n                        const e = new RPCResultError(this, rpcResult.message || 'no message', undefined, {\n                            name: rpcResult.result,\n                            stack: rpcResult.stack,\n                        });\n                        deferred.reject(e);\n                        return;\n                    }\n                    const deserialized = this.deserialize(rpcResult.result, deserializationContext);\n                    if (rpcResult.throw)\n                        deferred.reject(deserialized);\n                    else\n                        deferred.resolve(deserialized);\n                    break;\n                }\n                case 'finalize': {\n                    const rpcFinalize = message as RpcFinalize;\n                    const local = this.localProxyMap.get(rpcFinalize.__local_proxy_id);\n                    if (local) {\n                        const localProxiedEntry = this.localProxied.get(local);\n                        // if a finalizer id is specified, it must match.\n                        if (rpcFinalize.__local_proxy_finalizer_id && rpcFinalize.__local_proxy_finalizer_id !== localProxiedEntry?.finalizerId) {\n                            break;\n                        }\n                        this.localProxyMap.delete(rpcFinalize.__local_proxy_id);\n                        this.localProxied.delete(local);\n                    }\n                    break;\n                }\n                default:\n                    throw new Error(`unknown rpc message type ${message.type}`);\n            }\n        }\n        catch (e) {\n            console.error('unhandled rpc error', this.peerName, e);\n            return;\n        }\n    }\n}\n\nexport function getEvalSource() {\n    return `\n    (() => {\n        ${RpcProxy}\n\n        ${RpcPeer}\n\n        ${startPeriodicGarbageCollection}\n    \n        return {\n            startPeriodicGarbageCollection,\n            RpcPeer,\n            RpcProxy,\n        };\n    })();\n    `;\n}\n","export async function sleep(ms: number) {\n    await new Promise(resolve => setTimeout(resolve, ms));\n}\n","module.exports = require(\"buffer\");","module.exports = require(\"child_process\");","module.exports = require(\"crypto\");","module.exports = require(\"dgram\");","module.exports = require(\"events\");","module.exports = require(\"fs/promises\");","module.exports = require(\"net\");","module.exports = require(\"os\");","module.exports = require(\"perf_hooks\");","module.exports = require(\"process\");","module.exports = require(\"stream\");","module.exports = require(\"stream/web\");","module.exports = require(\"timers/promises\");","module.exports = require(\"tls\");","module.exports = require(\"tty\");","module.exports = require(\"url\");","module.exports = require(\"util\");","module.exports = require(\"worker_threads\");","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _wrapNativeSuper(Class) { var _cache = typeof Map === \"function\" ? new Map() : undefined; _wrapNativeSuper = function _wrapNativeSuper(Class) { if (Class === null || !_isNativeFunction(Class)) return Class; if (typeof Class !== \"function\") { throw new TypeError(\"Super expression must either be null or a function\"); } if (typeof _cache !== \"undefined\") { if (_cache.has(Class)) return _cache.get(Class); _cache.set(Class, Wrapper); } function Wrapper() { return _construct(Class, arguments, _getPrototypeOf(this).constructor); } Wrapper.prototype = Object.create(Class.prototype, { constructor: { value: Wrapper, enumerable: false, writable: true, configurable: true } }); return _setPrototypeOf(Wrapper, Class); }; return _wrapNativeSuper(Class); }\n\nfunction _construct(Parent, args, Class) { if (_isNativeReflectConstruct()) { _construct = Reflect.construct; } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _isNativeFunction(fn) { return Function.toString.call(fn).indexOf(\"[native code]\") !== -1; }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport os from 'os';\n\nlet YError = function (_Error) {\n  _inherits(YError, _Error);\n\n  function YError(wrappedErrors, errorCode, ...params) {\n    var _this;\n\n    _classCallCheck(this, YError);\n\n    if (!(wrappedErrors instanceof Array)) {\n      params = ('undefined' === typeof errorCode ? [] : [errorCode]).concat(params);\n      errorCode = wrappedErrors;\n      wrappedErrors = [];\n    }\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(YError).call(this, errorCode));\n    _this.code = errorCode || 'E_UNEXPECTED';\n    _this.params = params;\n    _this.wrappedErrors = wrappedErrors;\n    _this.name = _this.toString();\n\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(_assertThisInitialized(_this), _this.constructor);\n    }\n\n    return _this;\n  }\n\n  _createClass(YError, [{\n    key: \"toString\",\n    value: function toString() {\n      return (this.wrappedErrors.length ? this.wrappedErrors[this.wrappedErrors.length - 1].stack + os.EOL : '') + this.constructor.name + ': ' + this.code + ' (' + this.params.join(', ') + ')';\n    }\n  }]);\n\n  return YError;\n}(_wrapNativeSuper(Error));\n\nYError.wrap = function yerrorWrap(err, errorCode, ...params) {\n  let yError = null;\n\n  const wrappedErrorIsACode = _looksLikeAYErrorCode(err.message);\n\n  const wrappedErrors = (err.wrappedErrors || []).concat(err);\n\n  if (!errorCode) {\n    if (wrappedErrorIsACode) {\n      errorCode = err.message;\n    } else {\n      errorCode = 'E_UNEXPECTED';\n    }\n  }\n\n  if (err.message && !wrappedErrorIsACode) {\n    params.push(err.message);\n  }\n\n  yError = new YError(wrappedErrors, errorCode, ...params);\n  return yError;\n};\n\nYError.cast = function yerrorCast(err, ...params) {\n  if (_looksLikeAYError(err)) {\n    return err;\n  }\n\n  return YError.wrap.apply(YError, [err].concat(params));\n};\n\nYError.bump = function yerrorBump(err, ...params) {\n  if (_looksLikeAYError(err)) {\n    return YError.wrap.apply(YError, [err, err.code].concat(err.params));\n  }\n\n  return YError.wrap.apply(YError, [err].concat(params));\n};\n\nfunction _looksLikeAYError(err) {\n  return err instanceof YError || err.constructor && err.constructor.name && err.constructor.name.endsWith('Error') && 'string' === typeof err.code && _looksLikeAYErrorCode(err.code) && err.params && err.params instanceof Array;\n}\n\nfunction _looksLikeAYErrorCode(str) {\n  return /^([A-Z0-9_]+)$/.test(str);\n}\n\nexport default YError;\n//# sourceMappingURL=index.mjs.map","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(6360);\n"],"names":["Object","defineProperty","exports","value","parseWWWAuthenticateHeader","header","authMechanisms","mechanisms","strict","result","some","authMechanism","indexOf","type","toLowerCase","data","parseWWWAuthenticateRest","substr","length","_yerror","default","parseAuthorizationHeader","parseAuthorizationRest","buildWWWAuthenticateHeader","buildWWWAuthenticateRest","buildAuthorizationHeader","buildAuthorizationRest","enumerable","get","_basic","_digest","_bearer","_interopRequireDefault","obj","__esModule","_utils","REQUIRED_WWW_AUTHENTICATE_KEYS","AUTHORIZED_WWW_AUTHENTICATE_KEYS","BASIC","rest","parseHTTPHeadersQuotedKeyValueSet","buildHTTPHeadersQuotedKeyValueSet","username","password","decodeHash","hash","computeHash","Buffer","from","toString","passwordParts","split","join","_default","AUTHORIZED_ERROR_CODES","error","_crypto","REQUIRED_AUTHORIZATION_KEYS","AUTHORIZED_AUTHORIZATION_KEYS","_computeHash","algorithm","str","hashsum","createHash","update","digest","ha1","realm","ha2","method","uri","nonce","nc","cnonce","qop","contents","authorizedKeys","requiredKeys","matches","trim","match","KEYVALUE_REGEXP","map","part","partPosition","pair","reduce","parsedValues","name","valuePosition","replace","_checkRequiredKeys","key","forEach","util_1","common_1","Class","Tag","BitString","constructor","buf","bitLen","this","at","i","Number","isInteger","x","Math","floor","y","rightAlign","shift","alloc","ASN1","static","val","asn1","UNIVERSAL","BOOLEAN","_value","Error","asn","INTEGER","isSafeInteger","writeInt8","writeIntBE","readIntBE","parseInteger","paddingBits","copy","BITSTRING","slice","NULL","values","bytes","push","mustParseInt","valueBytes","unshift","OID","oid","high","UTF8","isNumericString","NUMERICSTRING","PRINTABLESTRING","isIA5String","IA5STRING","T61STRING","GENERALSTRING","date","rval","format","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","s","UTCTIME","utc","Date","year","MM","DD","hh","mm","ss","end","c","charAt","setUTCFullYear","setUTCHours","offset","setTime","GENERALIZEDTIME","gentime","YYYY","fff","isUTC","parseFloat","setFullYear","setHours","tag","parseUTCTime","parseGeneralizedTime","objs","SET","concat","toDER","SEQUENCE","isCompound","Array","isArray","CONTEXT_SPECIFIC","deepParse","_fromDER","BufferVisitor","tagClass","class","tpl","captures","err","validate","len","bufv","readByteLen","start","mustWalk","b1","valueLen","byte","byteLen","readUIntBE","getValueLength","mustHas","_parseCompound","_der","undefined","valueOf","DER","mustCompound","msg","toJSON","equals","valueLenBytes","getValueLengthByte","allocUnsafe","writeUInt8","writeUIntBE","parseBool","parseBitString","parseNull","parseOID","parseUTF8","parseNumericString","parsePrintableString","parseT61String","parseIA5String","parseGeneralString","includes","capture","j","optional","fromDER","inspect","custom","_depth","options","depth","n","charCodeAt","radix","parseInt","isNaN","reset","walk","steps","message","requested","available","pem_1","PEM","asn1_1","pemStart","pemEnd","pemEndOfLine","procType","res","lines","filter","startsWith","parse","body","headers","create","getHeader","setHeader","rVal","keys","sort","toBuffer","line","endsWith","pem","net_1","bytesFromIP","ip","isIP","vals","writeUInt16BE","bytesToIP","zeroAt","zeroLen","maxAt","maxLen","hex","padding","oids","oidReg","initOID","getOID","nameOrId","test","getOIDName","pki_1","PublicKey","PrivateKey","RSAPublicKey","RSAPrivateKey","x509_1","Certificate","DistinguishedName","crypto_1","tweetnacl_1","publicKeyValidator","privateKeyValidator","OCTETSTRING","rsaPublicKeyValidator","rsaPrivateKeyValidator","EdDSAPrivateKeyOIDs","publicKeyOID","algo","_pkcs8","_keyRaw","publicKey","_finalKey","_finalPEM","Seq","Null","fn","_verifiers","keyRaw","verify","signature","hashAlgorithm","verifier","sum","call","createVerify","toPEM","getFingerprint","hasher","toASN1","version","parseIntegerNum","privateKeyVersion","privateKeyOID","privateKey","_publicKeyRaw","parseDER","keypair","sign","keyPair","fromSeed","secretKey","_signers","publicKeyRaw","signer","createSign","super","_pkcs1","modulus","parseIntegerStr","publicKeyModulus","exponent","publicKeyExponent","toPublicKeyPEM","trimLeadingZeroByte","publicExponent","privateKeyPublicExponent","privateExponent","privateKeyPrivateExponent","privateKeyModulus","prime1","privateKeyPrime1","prime2","privateKeyPrime2","exponent1","privateKeyExponent1","exponent2","privateKeyExponent2","coefficient","privateKeyCoefficient","toPrivateKeyPEM","addVerifier","detached","addSigner","shortNames","CN","commonName","C","countryName","L","localityName","ST","stateOrProvinceName","O","organizationName","OU","organizationalUnitName","E","emailAddress","x509CertificateValidator","NONE","attributes","uniqueId","getFieldValue","serialName","getHash","attr","getField","shortName","addField","fillMissingFields","setAttrs","attrs","certs","pems","fromPEMs","raw","certVersion","serialNumber","certSerialNumber","signatureOID","certSignatureOID","signatureAlgorithm","infoSignatureOID","certinfoSignatureOID","certSignature","validFrom","parseTime","certValidityNotBefore","validTo","certValidityNotAfter","issuer","RDNAttributesAsArray","certIssuer","certIssuerUniqueId","subject","certSubject","certSubjectUniqueId","extensions","subjectKeyIdentifier","authorityKeyIdentifier","ocspServer","issuingCertificateURL","isCA","maxPathLen","basicConstraintsValid","keyUsage","dnsNames","emailAddresses","ipAddresses","uris","certExtensions","exts","ext","certificateExtensionFromAsn1","certificateExtensionsFromAsn1","authorityInfoAccessOcsp","authorityInfoAccessIssuers","altNames","item","dnsName","email","publicKeyInfo","tbsCertificate","getExtension","checkSignature","child","isIssuer","agl","getHashAgl","parent","verifySubjectKeyIdentifier","toJSONify","e","critical","ev","b2","b3","digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly","decodeExtKeyUsage","decodeExtBasicConstraints","decodeExtExtKeyUsage","client","server","objsign","reserved","sslCA","emailCA","objCA","decodeExtNsCertType","decodeExtAltName","parseDERWithTemplate","subjectKeyIdentifierValidator","decodeExtSubjectKeyIdentifier","authorityKeyIdentifierValidator","decodeExtAuthorityKeyIdentifier","authorityInfoAccessValidator","decodeExtAuthorityInfoAccess","gn","rdn","set","valueTag","Mask","LEB128","SignedLEB128","UnsignedLEB128","int","a","mp","$scanForNullBytes","d","LOWER_7","number","check","out","UPPER_1","Uint8Array","count","tmp","byteLength","bitCount","ceil","log2","encode","$ceil7mul","r","decode","AsnPropTypes","AsnTypeTypes","params","unusedBits","ArrayBuffer","fromNumber","TypeError","fromASN","valueBlock","valueHex","toASN","toSchema","toNumber","uintArray","octet","padStart","reverse","bits","octetSize","octets","index","buffer","OctetString","param","byteOffset","AsnAnyConverter","valueBeforeDecodeView","schema","AsnIntegerConverter","valueHexView","valueDec","AsnEnumeratedConverter","AsnIntegerArrayBufferConverter","AsnBitStringConverter","AsnObjectIdentifierConverter","AsnBooleanConverter","AsnOctetStringConverter","AsnConstructedOctetStringConverter","getValue","createStringConverter","Asn1Type","AsnUtf8StringConverter","AsnBmpStringConverter","AsnUniversalStringConverter","AsnNumericStringConverter","AsnPrintableStringConverter","AsnTeletexStringConverter","AsnVideotexStringConverter","AsnIA5StringConverter","AsnGraphicStringConverter","AsnVisibleStringConverter","AsnGeneralStringConverter","AsnCharacterStringConverter","AsnUTCTimeConverter","toDate","valueDate","AsnGeneralizedTimeConverter","AsnNullConverter","Any","BmpString","Boolean","CharacterString","Enumerated","GeneralString","GeneralizedTime","GraphicString","IA5String","Integer","NumericString","ObjectIdentifier","PrintableString","TeletexString","UTCTime","UniversalString","Utf8String","VideotexString","VisibleString","isConvertible","target","prototype","isTypeOfArray","_a","proto","getPrototypeOf","isArrayEqual","bytes1","bytes2","schemaStorage","items","WeakMap","has","checkSchema","cache","createDefault","parentSchema","findParentSchema","assign","useNames","asn1Value","asn1Item","Asn1TypeName","defaultValue","repeated","context","implicit","Container","idBlock","tagNumber","isRepeated","AsnType","AsnProp","propertyKey","copyOptions","converter","defaultConverter","AsnSchemaValidationError","arguments","schemas","AsnParser","asn1Parsed","asn1Schema","targetSchema","asn1ComparedSchema","verified","itemType","element","asn1SchemaValue","schemaItem","schemaItemType","newItem","newItemAsn","toBER","AsnSerializer","asnSchema","o","toAsnItem","objProp","serialize","AsnArray","AsnConvert","JsonPropTypes","JsonError","innerError","TransformError","ParserError","ValidationError","SerializerError","schemaName","KeyError","errors","throwIfTypeIsWrong","String","checkType","fromJSON","DEFAULT_SCHEMA","Map","names","__proto__","PatternValidation","pattern","RegExp","source","flags","exec","InclusiveValidation","min","MIN_VALUE","max","MAX_VALUE","ExclusiveValidation","LengthValidation","minLength","maxLength","EnumerationValidation","enumeration","v","JsonTransform","validation","validations","JsonSerializer","replacer","space","json","JSON","stringify","namedSchema","getSchemaByName","objItem","el","checkTypes","checkValues","JsonParser","keyErrors","strictProperty","checkStrictProperty","newOptions","strictAllKeys","jsonProps","schemaProps","JsonProp","errorMessage","defaultSchema","minInclusive","maxInclusive","minExclusive","maxExclusive","getValidations","schemaNames","CryptoError","AlgorithmError","UnsupportedOperationError","methodName","OperationError","RequiredPropertyError","propName","ProviderCrypto","async","args","checkDigest","apply","onDigest","checkAlgorithmName","checkGenerateKey","onGenerateKey","extractable","keyUsages","checkGenerateKeyParams","allowedUsages","usages","checkKeyUsages","checkSign","onSign","checkAlgorithmParams","checkCryptoKey","checkVerify","onVerify","checkEncrypt","onEncrypt","checkDecrypt","onDecrypt","checkDeriveBits","onDeriveBits","baseKey","checkExportKey","onExportKey","checkKeyFormat","checkImportKey","onImportKey","keyData","checkKeyData","checkImportParams","checkDerivedKeyParams","allowed","usage","checkRequiredProperty","checkHashAlgorithm","hashAlgorithms","prepareData","AesProvider","iv","isView","counter","tagLength","DesProvider","ivSize","keySizeBits","RsaProvider","modulusLength","saltLength","RangeError","label","EllipticProvider","checkNamedCurve","namedCurve","namedCurves","KEY_TYPES","toStringTag","Symbol","public","__decorate","AlgorithmIdentifier","PrivateKeyInfo","privateKeyAlgorithm","PublicKeyInfo","publicKeyAlgorithm","JsonBase64UrlArrayBufferConverter","RsaPrivateKey","RsaPublicKey","EcPublicKey","size","EcPrivateKey","jwk","AsnIntegerWithoutPaddingConverter","newValue","index$2","freeze","EcUtils","pointSize","view","point","getSize","trimStart","EcDsaSignature","decodeSignature","ecSignature","toWebCryptoSignature","encodeSignature","OneAsymmetricKey","EdPrivateKey","EdPublicKey","CurvePrivateKey","idSecp256r1","idEllipticCurve","idSecp384r1","idSecp521r1","idSecp256k1","idVersionOne","idBrainpoolP160r1","idBrainpoolP160t1","idBrainpoolP192r1","idBrainpoolP192t1","idBrainpoolP224r1","idBrainpoolP224t1","idBrainpoolP256r1","idBrainpoolP256t1","idBrainpoolP320r1","idBrainpoolP320t1","idBrainpoolP384r1","idBrainpoolP384t1","idBrainpoolP512r1","idBrainpoolP512t1","index$1","converters","idX25519","idX448","idEd25519","idEd448","EcCurves","id","toUpperCase","find","register","getDefaultLength","algName","salt","iterations","SyntaxError","info","ShakeProvider","defaultLength","randomUUID","b","getRandomValues","uuid","substring","ProviderStorage","algorithmName","provider","removeAt","algorithms","providers","checkRequiredArguments","preparedAlgorithm","prepareAlgorithm","preparedData","getProvider","generateKey","preparedSignature","encrypt","decrypt","deriveBits","derivedKeyType","preparedDerivedKeyType","derivedBits","importKey","exportKey","kty","wrappingKey","wrapAlgorithm","wrappedKey","unwrappingKey","unwrapAlgorithm","unwrappedKeyAlgorithm","internal","isHashedAlgorithm","JsonBase64UrlConverter","CryptoKey","alg","SymmetricKey","AsymmetricKey","AesCryptoKey","keyStorage","getCryptoKey","setCryptoKey","AesCrypto","encryptAesCBC","encryptAesCTR","encryptAesGCM","encryptAesKW","encryptAesECB","decryptAesCBC","decryptAesCTR","decryptAesGCM","decryptAesKW","decryptAesECB","cipher","enc","final","decipher","dec","authTagLength","additionalData","setAAD","getAuthTag","setAuthTag","AES_KW_IV","AesCbcProvider","zero","rb","blockSize","bitShiftLeft","shifted","last","xor","output","aes","getMessageBlock","blockIndex","block","aesCmac","subkeys","l","subkey1","subkey2","generateSubkeys","lastBlockCompleteFlag","lastBlock","blockCount","lastBlockIndex","fill","getPaddedMessageBlock","AesCmacProvider","signature2","compare","AesCtrProvider","AesGcmProvider","AesKwProvider","AesEcbProvider","DesCryptoKey","DesCrypto","encryptDesCBC","encryptDesEDE3CBC","decryptDesCBC","decryptDesEDE3CBC","DesCbcProvider","DesEde3CbcProvider","getJwkAlgorithm","mdSize","getKey","keyInfo","key_ops","parameters","RsaCrypto","privateKeyUsages","publicKeyUsages","readInt32BE","publicKeyEncoding","privateKeyEncoding","asnKey","importPrivateKey","importPublicKey","signRsa","verifySSA","encryptOAEP","decryptOAEP","cryptoAlg","getCryptoAlgorithm","RsaSsaProvider","internalKey","RsaPssProvider","ShaCrypto","hashAlg","getAlgorithmName","RsaOaepProvider","dataView","keySize","hashSize","dataLength","psLength","seed","subarray","dataBlock","labelHash","dataBlockMask","mgf1","seedMask","pkcs0","z","psEnd","psz","mask","chunks","submask","chunk","RsaEsProvider","toCryptoOptions","namedOIDs","getOidByNamedCurve$1","crv","Sha1Provider","Sha256Provider","Sha384Provider","Sha512Provider","Sha3256Provider","Sha3384Provider","Sha3512Provider","EcCrypto","getOpenSSLNamedCurve","signaturePoint","ecSignatureRaw","ecdh","asnPrivateKey","asnEcPrivateKey","setPrivateKey","asnPublicKey","computeSecret","assertKeyParameters","namedCurveIdentifier","curve","EcdsaProvider","EcdhProvider","edOIDs","getOidByNamedCurve","EdCrypto","EdDsaProvider","EcdhEsProvider","PbkdfCryptoKey","Pbkdf2Provider","Promise","resolve","reject","HmacCryptoKey","HmacProvider","hmac","HkdfCryptoKey","HkdfProvider","hashLength","PRK","blocks","ShakeCrypto","outputLength","Shake128Provider","Shake256Provider","SubtleCrypto","nodeMajorVersion","hashes","Crypto","subtle","array","RelativeDistinguishedName_1","RDNSequence_1","Name_1","IpConverter","k","uint8","decodeIP","text","addr","toByteArray","DirectoryString","bmpString","printableString","teletexString","universalString","utf8String","AttributeValue","ia5String","anyValue","AttributeTypeAndValue","RelativeDistinguishedName","setPrototypeOf","RDNSequence","AsnIpConverter","fromString","OtherName","typeId","EDIPartyName","partyName","id_pkix","id_kp","AuthorityInfoAccessSyntax_1","AccessDescription","accessMethod","accessLocation","AuthorityInfoAccessSyntax","id_ce_authorityKeyIdentifier","KeyIdentifier","AuthorityKeyIdentifier","id_ce_basicConstraints","BasicConstraints","cA","GeneralNames_1","CertificateIssuer_1","CertificateIssuer","CertificatePolicies_1","id_ce_certificatePolicies","DisplayText","visibleString","NoticeReference","organization","noticeNumbers","UserNotice","Qualifier","PolicyQualifierInfo","policyQualifierId","qualifier","PolicyInformation","policyIdentifier","CertificatePolicies","CRLNumber","BaseCRLNumber","CRLDistributionPoints_1","ReasonFlags","Reason","aACompromise","affiliationChanged","cACompromise","certificateHold","cessationOfOperation","keyCompromise","privilegeWithdrawn","superseded","unused","DistributionPointName","DistributionPoint","CRLDistributionPoints","FreshestCRL_1","FreshestCRL","IssuingDistributionPoint","onlyContainsUserCerts","ONLY","onlyContainsCACerts","indirectCRL","onlyContainsAttributeCerts","id_ce_cRLReasons","CRLReasons","CRLReason","reason","unspecified","ExtendedKeyUsage_1","id_ce_extKeyUsage","ExtendedKeyUsage","id_kp_serverAuth","id_kp_clientAuth","id_kp_codeSigning","id_kp_emailProtection","id_kp_timeStamping","id_kp_OCSPSigning","InhibitAnyPolicy","id_ce_invalidityDate","InvalidityDate","IssueAlternativeName_1","IssueAlternativeName","id_ce_keyUsage","KeyUsageFlags","GeneralSubtrees_1","KeyUsage","flag","GeneralSubtree","base","minimum","GeneralSubtrees","NameConstraints","PolicyConstraints","PolicyMappings_1","PolicyMapping","issuerDomainPolicy","subjectDomainPolicy","PolicyMappings","SubjectAlternativeName_1","id_ce_subjectAltName","SubjectAlternativeName","SubjectDirectoryAttributes_1","SubjectDirectoryAttributes","id_ce_subjectKeyIdentifier","SubjectKeyIdentifier","PrivateKeyUsagePeriod","EntrustInfoFlags","SubjectInfoAccessSyntax_1","EntrustInfo","pKIXCertificate","newExtensions","keyUpdateAllowed","EntrustVersionInfo","entrustVers","entrustInfoFlags","SubjectInfoAccessSyntax","isEqual","SubjectPublicKeyInfo","subjectPublicKey","Time","time","generalTime","utcTime","getTime","Validity","notBefore","notAfter","Extensions_1","extnID","CRITICAL","extnValue","Extensions","Version","AttrSpec_1","TBSCertificate","v1","validity","subjectPublicKeyInfo","signatureValue","RevokedCertificate","userCertificate","revocationDate","TBSCertList","thisUpdate","CertificateList","tbsCertList","Attribute","attrType","attrValues","ACClearAttrs","acIssuer","acSerial","AttrSpec","AAControls","permitUnSpecified","IssuerSerial","serial","issuerUID","DigestedObjectType","ObjectDigestInfo","digestedObjectType","digestAlgorithm","objectDigest","V2Form","AttCertIssuer","AttCertValidityPeriod","notBeforeTime","notAfterTime","Holder","AttCertVersion","ClassListFlags","AttributeCertificateInfo","v2","holder","attrCertValidityPeriod","AttributeCertificate","acinfo","ClassList","SecurityCategory","Clearance","policyId","classList","unclassified","IetfAttrSyntaxValueChoices","IetfAttrSyntax","Targets_1","TargetCert","targetCertificate","Target","Targets","ProxyInfo_1","ProxyInfo","RoleSyntax","SvceAuthInfo","service","ident","CertificateSet_1","OtherCertificateFormat","otherCertFormat","otherCert","CertificateChoices","CertificateSet","ContentInfo","contentType","content","EncapsulatedContent","EncapsulatedContentInfo","eContentType","CMSVersion","DigestAlgorithmIdentifier","SignatureAlgorithmIdentifier","KeyEncryptionAlgorithmIdentifier","ContentEncryptionAlgorithmIdentifier","MessageAuthenticationCodeAlgorithm","KeyDerivationAlgorithmIdentifier","EncryptedContent","EncryptedContentInfo","contentEncryptionAlgorithm","IssuerAndSerialNumber","OtherKeyAttribute","keyAttrId","RecipientEncryptedKeys_1","RecipientKeyIdentifier","KeyAgreeRecipientIdentifier","RecipientEncryptedKey","rid","encryptedKey","RecipientEncryptedKeys","OriginatorPublicKey","OriginatorIdentifierOrKey","KeyAgreeRecipientInfo","v3","originator","keyEncryptionAlgorithm","recipientEncryptedKeys","RecipientIdentifier","KeyTransRecipientInfo","v0","KEKIdentifier","keyIdentifier","KEKRecipientInfo","v4","kekid","PasswordRecipientInfo","OtherRecipientInfo","oriType","oriValue","RecipientInfo","RecipientInfos_1","RecipientInfos","RevocationInfoChoices_1","OtherRevocationInfoFormat","otherRevInfoFormat","otherRevInfo","RevocationInfoChoice","other","RevocationInfoChoices","OriginatorInfo","UnprotectedAttributes_1","UnprotectedAttributes","EnvelopedData","recipientInfos","encryptedContentInfo","id_signedData","SignerIdentifier","SignerInfos_1","SignerInfo","sid","SignerInfos","DigestAlgorithmIdentifiers_1","DigestAlgorithmIdentifiers","SignedData","digestAlgorithms","encapContentInfo","signerInfos","id_ecPublicKey","id_ecdsaWithSHA1","id_ecdsaWithSHA224","id_ecdsaWithSHA256","id_ecdsaWithSHA384","id_ecdsaWithSHA512","id_secp256r1","id_secp384r1","id_secp521r1","ecdsaWithSHA1","ecdsaWithSHA256","ecdsaWithSHA384","ecdsaWithSHA512","ECParameters","ECPrivateKey","ECDSASigValue","id_pkcs_1","id_rsaEncryption","id_RSAES_OAEP","id_pSpecified","id_RSASSA_PSS","id_md2WithRSAEncryption","id_md5WithRSAEncryption","id_sha1WithRSAEncryption","id_sha224WithRSAEncryption","id_sha256WithRSAEncryption","id_sha384WithRSAEncryption","id_sha512WithRSAEncryption","id_sha512_224WithRSAEncryption","id_sha512_256WithRSAEncryption","id_sha1","id_sha224","id_sha256","id_sha384","id_sha512","id_mgf1","sha1","mgf1SHA1","pSpecifiedEmpty","RsaEsOaepParams","maskGenAlgorithm","pSourceAlgorithm","RsaSaPssParams","trailerField","DigestInfo","OtherPrimeInfos_1","OtherPrimeInfo","prime","OtherPrimeInfos","Lifecycle","extendStatics","p","hasOwnProperty","__","__awaiter","thisArg","_arguments","P","generator","fulfilled","step","next","rejected","done","then","__generator","f","t","g","_","sent","trys","ops","verb","iterator","op","pop","__values","m","__read","ar","isClassProvider","useClass","isFactoryProvider","useFactory","DelayedConstructor","wrap","reflectMethods","createProxy","createObject","_this","init","Proxy","createHandler","delayedObject","handler","_i","Reflect","isNormalToken","token","descriptor","isTokenProvider","useToken","isValueProvider","useValue","RegistryBase","_registryMap","entries","getAll","ensure","setAll","clear","_super","Registry","scopedResolutions","ctor","paramIdx","indent","_b","dep","idx","formatDependency","PreResolutionInterceptors","PostResolutionInterceptors","preResolution","postResolution","typeInfo","InternalDependencyContainer","_registry","interceptors","disposed","disposables","Set","providerOrConstructor","lifecycle","ensureNotDisposed","isProvider","path","tokenProvider","currentToken","registration","registerType","to","registerInstance","instance","registerSingleton","getRegistration","executePreResolutionInterceptor","resolveRegistration","executePostResolutionInterceptor","isConstructorToken","construct","resolutionType","e_1","remainingInterceptors","_c","interceptor","frequency","callback","e_1_1","return","e_2","e_2_1","resolved","isSingleton","isContainerScoped","returnInstance","resolveAll","registrations","getAllRegistrations","result_1","isRegistered","recursive","clearInstances","e_3","_d","e_3_1","createChildContainer","e_4","childContainer","e_4_1","beforeResolution","afterResolution","dispose","promises","disposable","maybePromise","all","paramInfo","resolveParams","bind","add","multiple","transform","transformArgs","INJECTION_TOKEN_METADATA_KEY","getMetadata","injectionTokens","getOwnMetadata","PKCS12AttrSet_1","PKCS12Attribute","attrId","PKCS12AttrSet","AuthenticatedSafe_1","AuthenticatedSafe","CertBag","certId","certValue","CRLBag","crlId","crltValue","EncryptedData","encryptionAlgorithm","encryptedData","Attributes_1","Attributes","KeyBag","PKCS8ShroudedKeyBag","SecretBag","secretTypeId","secretValue","MacData","mac","macSalt","PFX","authSafe","macData","SafeContents_1","SafeBag","bagId","bagValue","SafeContents","ExtensionRequest_1","ExtendedCertificateAttributes_1","SMIMECapabilities_1","id_pkcs9","id_pkcs9_at_challengePassword","id_pkcs9_at_extensionRequest","PKCS9String","Pkcs7PDU","UserPKCS12","EncryptedPrivateKeyInfo","EmailAddress","UnstructuredName","UnstructuredAddress","DateOfBirth","PlaceOfBirth","Gender","CountryOfCitizenship","CountryOfResidence","Pseudonym","ContentType","SigningTime","SequenceNumber","CounterSignature","ChallengePassword","ExtensionRequest","ExtendedCertificateAttributes","FriendlyName","SMIMECapability","SMIMECapabilities","CertificationRequestInfo","subjectPKInfo","CertificationRequest","certificationRequestInfo","diAlgorithm","AlgorithmProvider","getAlgorithms","toAsnAlgorithm","unknown","toWebAlgorithm","diAlgorithmProvider","EcAlgorithm_1","brainpoolP160r1","brainpoolP160t1","brainpoolP192r1","brainpoolP192t1","brainpoolP224r1","brainpoolP224t1","brainpoolP256r1","brainpoolP256t1","brainpoolP320r1","brainpoolP320t1","brainpoolP384r1","brainpoolP384t1","brainpoolP512r1","brainpoolP512t1","ECDSA","EcAlgorithm","SECP256K1","NAME","VALUE","TextObject","DefaultAlgorithmSerializer","OidSerializer","ecAlg","TextConverter","serializeObj","deep","pad","objValue","keyValue","toUTCString","serializeBufferSource","toTextObject","row","algorithmSerializer","oidSerializer","AsnData","rawData","onInit","equal","getTextName","toTextObjectEmpty","Extension","toTextObjectWithoutValue","CryptoProvider","self","crypto","DEFAULT","delete","callbackfn","cryptoProvider","OID_REGEX","NameIdentifier","idOrName","findId","replaceUnknownCharacter","char","Name","extraNames","getName","jsonItem","regex","level","lastChar","quotedMatches","isASCII","asnRdn","asnAttr","toArrayBuffer","ERR_GN_CONSTRUCTOR","ERR_GN_STRING_FORMAT","ERR_GUID","GUID_REGEX","id_GUID","id_UPN","DNS","DN","EMAIL","IP","URL","GUID","UPN","REGISTERED_ID","GeneralName","derName","asnName","directoryName","dNSName","rfc822Name","otherName","iPAddress","registeredID","uniformResourceIdentifier","guid","GeneralNames","nameObj","field","rEolGroup","rPem","PemConverter","base64","pemStruct","headersString","lastHeader","decodeWithHeaders","raws","encodeStruct","upperCaseType","toLocaleUpperCase","sliced","rows","CertificateTag","CrlTag","CertificateRequestTag","PublicKeyTag","PrivateKeyTag","PemData","isPem","stringRaw","isAsnEncoded","algProv","rsaPublicKey","serializeAlgorithm","ExtensionFactory","extension","Type","diAsnSignatureFormatter","AsnDefaultSignatureFormatter","toAsnSignature","toWebSignature","X509Certificate","tbs","subjectName","issuerName","getExtensions","keyAlgorithm","paramsKey","export","signatureFormatters","signatureFormatter","ok","signatureOnly","cert","issuerUniqueID","subjectUniqueID","extObj","AuthorityKeyIdentifierExtension","certIdName","authorityCertIssuer","authorityCertSerialNumber","isCryptoKey","spki","getKeyIdentifier","aki","keyId","BasicConstraintsExtension","ca","pathLength","pathLenConstraint","ExtendedKeyUsageExtension","KeyUsagesExtension","SubjectKeyIdentifierExtension","identifier","SubjectAlternativeNameExtension","namesObj","CertificatePolicyExtension","asnPolicies","policies","ChallengePasswordAttribute","ExtensionsAttribute","AttributeFactory","attribute","RsaAlgorithm","AsnEcSignatureFormatter","addPadding","removePadding","positive","namedCurveSize","defaultNamedCurveSize","uint8Signature","ecSigValue","EdAlgorithm","Pkcs10CertificateRequest","getAttribute","getAttributes","req","attrObj","Pkcs10CertificateRequestGenerator","asnReq","signingAlgorithm","asnSignature","X509Certificates","import","signedData","eContent","single","certificates","certificate","cms","contentInfo","X509ChainBuilder","chain","current","findIssuer","thumbprint","getThumbprint","thumbprint2","isSelfSigned","akiExt","skiExt","sanExt","X509CertificateGenerator","signingKey","asnX509","X509CrlReason","X509CrlEntry","crlEntryExtensions","invalidity","X509Crl","tbsCertListSignatureAlgorithm","certListSignatureAlgorithm","nextUpdate","revokedCertificates","crlExtensions","findRevoked","certOrSerialNumber","entry","X509CrlGenerator","asnX509Crl","findIndex","revokedCert","root","checkInt","checkInts","arrayish","coerceArray","arg","createArray","copyArray","sourceArray","targetArray","targetStart","sourceStart","sourceEnd","Hex","convertUtf8","toBytes","encodeURI","fromBytes","fromCharCode","convertHex","numberOfRounds","rcon","S","Si","T1","T2","T3","T4","T5","T6","T7","T8","U1","U2","U3","U4","convertToInt32","AES","_prepare","rounds","_Ke","_Kd","roundKeyCount","KC","tk","tt","rconpointer","plaintext","ciphertext","ModeOfOperationECB","description","_aes","ModeOfOperationCBC","_lastCipherblock","ModeOfOperationCFB","segmentSize","_shiftRegister","xorSegment","encrypted","ModeOfOperationOFB","_lastPrecipher","_lastPrecipherIndex","Counter","initialValue","_counter","setValue","setBytes","MAX_SAFE_INTEGER","increment","ModeOfOperationCTR","_remainingCounter","_remainingCounterIndex","aesjs","ModeOfOperation","ecb","cbc","cfb","ofb","ctr","utils","utf8","pkcs7","padder","strip","_arrayTest","module","utilFromBase","inputBuffer","inputBase","pow","utilToBase","internalReserved","internalValue","biggest","retBuf","retView","basis","utilConcatView","views","prevLength","utilDecodeTC","condition1","condition2","warnings","bigIntBuffer","bigIntView","bigInt","smallIntBuffer","smallIntView","padNumber","inputNumber","fullLength","dif","log","assertBigInt","BigInt","buffers","baseBlock","inputOffset","inputLength","ViewWriter","write","powers2","digitsString","VALUE_HEX_VIEW","EMPTY_STRING","EMPTY_BUFFER","EMPTY_VIEW","END_OF_CONTENT_NAME","OCTET_STRING_NAME","BIT_STRING_NAME","HexBlock","BaseClass","isHexOnly","fromBER","endLength","blockLength","sizeOnly","LocalBaseBlock","valueBeforeDecode","blockName","ValueBlock","writer","LocalIdentificationBlock","isConstructed","firstOctet","encodedBuf","encodedView","curView","inputView","intBuffer","tagNumberMask","intTagNumberBuffer","tagNumberBufferMaxLength","tempBufferView","LocalLengthBlock","lenBlock","isIndefiniteForm","longFormUsed","lenOffset","lengthBufferView","typeStore","BaseBlock","primitiveSchema","valueBlockType","resultOffset","_writer","prepareIndefiniteForm","idBlockBuf","valueBlockBuf","lenBlockBuf","object","encoding","onAsciiEncoding","inputBuffer1","inputBuffer2","view1","view2","Constructed","BaseStringBlock","stringValueBlockType","fromBuffer","LocalPrimitiveValueBlock","_a$w","_a$v","_a$u","_a$t","_a$s","_a$r","_a$q","_a$p","_a$o","_a$n","_a$m","_a$l","_a$k","_a$j","_a$i","_a$h","_a$g","_a$f","_a$e","_a$d","_a$c","_a$b","_a$a","_a$9","_a$8","_a$7","_a$6","_a$5","_a$4","_a$3","_a$2","_a$1","Primitive","localFromBER","incomingOffset","returnObject","newASN1Type","EndOfContent","RelativeObjectIdentifier","TIME","Sequence","DATE","TimeOfDay","DateTime","Duration","newObject","inputObject","newType","localChangeType","LocalConstructedValueBlock","currentOffset","indefiniteLength","LocalEndOfContentValueBlock","override","LocalBooleanValueBlock","LocalOctetStringValueBlock","currentBlockName","LocalBitStringValueBlock","bitsStr","viewAdd","first","second","firstView","secondView","firstViewCopy","firstViewCopyLength","secondViewCopy","secondViewCopyLength","power2","digits","viewSub","LocalIntegerValueBlock","_valueDec","setValueHex","modValue","tempBuf","tempView","expectedLength","updatedView","firstBit","currentByte","bitNumber","asn1View","byteNumber","toBigInt","bigIntValue","secondInt","convertToDER","integer","convertFromDER","LocalSidValueBlock","isFirstSid","valueBigInt","sidValue","LocalObjectIdentifierValueBlock","sidBlock","retBuffers","valueBuf","string","pos1","pos2","plus","parsedSID","sidStr","sidArray","LocalRelativeSidValueBlock","LocalRelativeObjectIdentifierValueBlock","LocalStringValueBlock","LocalSimpleStringValueBlock","LocalSimpleStringBlock","inputString","strLen","LocalUtf8StringValueBlock","ex","LocalBmpStringValueBlock","LocalUniversalStringValueBlock","copyBuffer","valueView","Uint32Array","strLength","codeBuf","codeView","month","day","hour","minute","fromDate","inputDate","UTC","parserArray","outputArray","toISOString","millisecond","getUTCMilliseconds","parser","timeString","dateTimeString","fractionPart","hourDifference","minuteDifference","multiplier","differencePosition","differenceString","fractionPointPosition","fractionPartCheck","fractionResult","tempDate","getUTCDay","Choice","Repeated","local","RawData","compareSchema","inputData","inputSchema","_result","encodedId","schemaView","admission","_optional","arrayRoot","verifySchema","BASE","MAX_INT","MAX_INT_ARR","smallToArray","DEFAULT_ALPHABET","supportsNativeBigInt","alphabet","caseSensitive","parseBase","parseValue","BigInteger","isSmall","SmallInteger","NativeBigInt","isPrecise","arrayToSmall","arr","compareAbs","truncate","l_a","l_b","carry","addAny","addSmall","subtract","difference","a_l","b_l","borrow","subtractSmall","multiplyLong","product","a_i","multiplySmall","shiftLeft","multiplyKaratsuba","ac","bd","abcd","multiplySmallAndArray","square","divModSmall","lambda","q","remainder","divisor","quotient","divModAny","negate","abs","comparison","quotientDigit","divisorMostSignificantDigit","divMod1","guess","xlen","highx","highy","divMod2","qSign","mod","mSign","isBasicPrime","isUnit","isEven","isDivisibleBy","lesser","millerRabinTest","nPrev","prev","divide","modPow","subtractAny","minus","small","multiply","l1","l2","times","_multiplyBySmall","divmod","over","_0","_1","_2","isNegative","exp","isZero","modInv","isPositive","isOdd","Infinity","compareTo","eq","notEquals","neq","greater","gt","lt","greaterOrEquals","geq","lesserOrEquals","leq","isPrime","bitLength","logN","toJSNumber","isProbablePrime","rng","randBetween","lastT","lastR","newT","one","newR","powersOfTwo","powers2Length","highestPower2","shift_isSmall","bitwise","xSign","ySign","xRem","not","yRem","xDigit","yDigit","xDivMod","yDivMod","shiftRight","remQuo","and","or","LOBMASK_I","roughLOB","integerLogarithm","gcd","absBase","alphabetValues","parseBaseFromArray","toBase","neg","left","digit","toBaseString","parseStringValue","decimalPlace","parseNumberValue","toArray","minusOne","lcm","isInstance","usedRNG","random","low","range","restricted","top","fromArray","BinaryStream","bool","numbers","when","select","encodingLength","Transaction","NotEnoughDataError","types","kschema","createEncodeStream","stream","readableObjectMode","writableObjectMode","transformEncode","createDecodeStream","bufOrSchema","isBuffer","transformDecode","append","cb","consume","transaction","commit","createEncode","createDecode","createFunction","LinkedList","BufferList","queue","head","leaf","tmpStart","subset","firstLength","bias","fixedReadMethods","readDoubleBE","readDoubleLE","readFloatBE","readFloatLE","readInt32LE","readUInt32BE","readUInt32LE","readInt16BE","readInt16LE","readUInt16BE","readUInt16LE","readInt8","readUInt8","gen","formats","toFunction","fixedWriteMethods","writeDoubleBE","writeDoubleLE","writeFloatBE","writeFloatLE","writeInt32BE","writeInt32LE","writeUInt32BE","writeUInt32LE","writeInt16BE","writeInt16LE","writeUInt16LE","Chunk","tail","isEmpty","ret","list","offsetStart","offsetEnd","symbols","Metadata","node","metadata","meta","skip","Transform","kbuffer","readBuffer","assertSize","writeBuffer","isType","isUserType","isDecodeType","decodeCommon","rstream","typeOrSchema","decodeSchema","assertSchema","decodeStream","clean","isEncodeType","encodeCommon","wstream","encodeSchema","encodingLengthCommon","encodingLengthSchema","expected","received","methods","isPlainObject","isFunction","isObject","checkArray","checkArraySizeType","checkArraySize","requiredSize","havingSize","lengthType","isLengthInBytes","isnum","istype","isfunc","clone","expectedSize","lengthContext","lengthBytes","before","decodeBytes","decodeCount","checkBuffer","checkLength","checkLengthType","isNull","createFastStub","read","genread","genwrite","createFastStubGeneric","doublebe","doublele","floatbe","floatle","int8","int16be","uint16be","int16le","uint16le","int32be","uint32be","int32le","uint32le","int24be","uint24be","int24le","uint24le","int40be","uint40be","int40le","uint40le","int48be","uint48be","int48le","uint48le","whenTypes","probalyValue","encodeNullString","decodeNullString","bytesWithNull","encodeFixedString","decodeFixedString","encodeSizePrefixedString","decodeSizePrefixedString","encodingLengthSizePrefixedString","encodeCallback","decodeCallback","isEncoding","condition","status","assert","inherits","superCtor","super_","TempCtor","BN","endian","isBN","negative","words","red","_init","wordSize","window","parseHex4Bits","parseHexByte","lowerBound","mul","num","right","cmp","_initNumber","_initArray","_parseHex","_parseBase","w","off","limbLen","limbPow","total","word","imuln","_iaddn","dest","_expand","_normSign","zeros","groupSizes","groupBases","smallMulTo","lo","ncarry","rword","maxJ","groupSize","groupBase","modn","idivn","toArrayLike","ArrayType","reqLength","littleEndian","andln","iushrn","clz32","_countBits","_zeroBits","hi","zeroBits","toTwos","width","inotn","iaddn","fromTwos","testn","notn","ineg","isNeg","iuor","ior","uor","iuand","iand","uand","iuxor","ixor","uxor","bytesNeeded","bitsLeft","setn","bit","wbit","iadd","isub","sub","comb10MulTo","mid","a0","al0","ah0","a1","al1","ah1","a2","al2","ah2","a3","al3","ah3","a4","al4","ah4","a5","al5","ah5","a6","al6","ah6","a7","al7","ah7","a8","al8","ah8","a9","al9","ah9","b0","bl0","bh0","bl1","bh1","bl2","bh2","bl3","bh3","b4","bl4","bh4","b5","bl5","bh5","b6","bl6","bh6","b7","bl7","bh7","b8","bl8","bh8","b9","bl9","bh9","w0","imul","w1","w2","w3","w4","w5","w6","w7","w8","w9","w10","w11","w12","w13","w14","w15","w16","w17","w18","jumboMulTo","FFTM","mulp","mulTo","hncarry","bigMulTo","makeRBT","N","revBin","permute","rbt","rws","iws","rtws","itws","rtwdf","cos","PI","itwdf","sin","rtwdf_","itwdf_","re","ie","ro","io","rx","guessLen13b","odd","conjugate","normalize13b","ws","round","convert13b","stub","ph","rwst","iwst","nrws","nrwst","niwst","rmws","mulf","muln","sqr","isqr","toBitArray","iushln","carryMask","newCarry","ishln","hint","extended","h","maskedWords","ishrn","shln","ushln","shrn","ushrn","imaskn","maskn","isubn","addn","subn","iabs","_ishlnsubmul","_wordDiv","mode","bhi","diff","qj","div","divn","umod","divRound","dm","half","r2","acc","egcd","A","B","D","yp","xp","im","jm","_invmp","x1","x2","delta","cmpn","invm","bincn","ucmp","gtn","gten","gte","ltn","lten","lte","eqn","Red","toRed","ctx","convertTo","_forceRed","fromRed","convertFrom","forceRed","redAdd","redIAdd","redSub","redISub","redShl","shl","redMul","_verify2","redIMul","redSqr","_verify1","redISqr","redSqrt","sqrt","redInvm","redNeg","redPow","primes","k256","p224","p192","p25519","MPrime","_tmp","K256","P224","P192","P25519","_prime","Mont","imod","rinv","minv","ireduce","rlen","imulK","_strip","input","outLen","mod3","nOne","lpow","inv","wnd","currentLen","mont","u","Rand","rand","generate","_rand","getBytes","getByte","msCrypto","randomBytes","CRC_TABLE","ensureBuffer","hasNewBufferAPI","bufferizeInt","_crc32","previous","crc","crc32","Int32Array","signed","unsigned","toInteger","dirtyNumber","NaN","requiredArgs","required","_typeof","argument","argStr","console","warn","stack","addMonths","dirtyDate","dirtyAmount","amount","dayOfMonth","getDate","endOfDesiredMonth","setMonth","getMonth","daysInMonth","getFullYear","addYears","formatArgs","useColors","namespace","humanize","color","splice","lastC","save","namespaces","storage","setItem","removeItem","load","getItem","process","env","DEBUG","__nwjs","navigator","userAgent","document","documentElement","style","WebkitAppearance","firebug","exception","table","$1","localStorage","localstorage","destroy","warned","colors","debug","formatters","createDebug","prevTime","namespacesCache","enabledCache","enableOverride","enabled","curr","ms","coerce","formatter","selectColor","extend","configurable","delimiter","newDebug","toNamespace","regexp","disable","skips","enable","browser","tty","util","inspectOpts","stderr","colorCode","prefix","hideDate","isatty","fd","deprecate","supportsColor","prop","elliptic","curves","ec","eddsa","getNAF","getJSF","BaseCurve","conf","two","pointFromJSON","gRed","_wnafT1","_wnafT2","_wnafT3","_wnafT4","_bitLength","adjustCount","redN","_maxwellTrick","BasePoint","precomputed","_fixedNafMul","doubles","_getDoubles","naf","I","nafW","repr","jpoint","mixedAdd","points","toP","_wnafMul","nafPoints","_getNAFPoints","dblp","_wnafMulAdd","defW","coeffs","jacobianResult","wndWidth","comb","toJ","jsf","ja","jb","decodePoint","pointFromX","encodeCompressed","_encode","compact","getX","getY","precompute","power","beta","_getBeta","_hasDoubles","dbl","Base","EdwardsCurve","twisted","mOneA","c2","dd","oneC","Point","zOne","_mulA","_mulC","rhs","lhs","y2","pointFromY","isInfinity","normalize","_extDbl","nx","ny","nt","nz","_projDbl","_extAdd","_projAdd","mulAdd","k1","k2","jmulAdd","zi","eqXToP","xc","short","edwards","MontCurve","i4","a24","aa","bb","diffAdd","da","jumlAdd","ShortCurve","tinv","zeroA","threeA","endo","_getEndomorphism","_endoWnafT1","_endoWnafT2","isRed","inf","JPoint","betas","_getEndoRoots","lambdas","vec","_getEndoBasis","ntinv","prevR","aprxSqrt","y1","len1","_endoSplit","c1","p1","p2","q1","q2","ax","_endoWnafMulAdd","npoints","ncoeffs","pre","endoMul","obj2point","ys1","dyinv","_precompute","zinv","zinv2","ay","pz2","z2","u1","u2","s1","s2","h2","h3","jx","jy","jz","jz4","jyd","jx2","jyd2","jyd4","t1","t2","dny","_zeroDbl","_threeDbl","_dbl","xx","yy","yyyy","yyyy8","c8","gamma","alpha","beta4","beta8","ggamma8","jy2","jxd4","jyd8","trpl","zz","ee","yyu4","kbase","z3","pz3","zs","PresetCurve","defineCurve","sha256","sha384","sha512","HmacDRBG","KeyPair","Signature","EC","nh","keyFromPrivate","priv","fromPrivate","keyFromPublic","pub","fromPublic","genKeyPair","drbg","pers","persEnc","entropy","hmacStrength","entropyEnc","ns2","_truncateToN","truncOnly","bkey","getPrivate","ns1","iter","kp","kpX","recoveryParam","canonical","sinv","getPublic","recoverPubKey","isYOdd","isSecondKey","rInv","getKeyRecoveryParam","Q","Qprime","_importPrivate","privEnc","_importPublic","pubEnc","derive","_importDER","Position","place","getLength","initial","octetLen","rmPadding","constructLength","LN2","slen","backHalf","parseBytes","EDDSA","pointClass","secret","keyFromSecret","hashInt","messagePrefix","R","Rencoded","encodePoint","s_","pubBytes","makeSignature","sig","SG","intFromLE","fromSecret","lastIx","normed","xIsOdd","encodeInt","decodeInt","isPoint","cachedProperty","_secret","_pub","_pubBytes","privBytes","getSecret","_R","_S","_Rencoded","_Sencoded","Sencoded","toHex","minAssert","minUtils","zero2","m8","d1","d2","m14","m24","computer","isProperty","INDENT_START","INDENT_END","RESERVED","RESERVED_MAP","isVariable","genfun","vars","spaces","pushLine","fmt","scope","sym","property","src","Function","argv","position","terminatorPosition","common","sha","ripemd","sha224","ripemd160","BlockHash","pending","pendingTotal","outSize","padLength","_delta8","_delta32","join32","_update","_pad","Hmac","Hash","inner","outer","rotl32","sum32","sum32_3","sum32_4","RIPEMD160","K","Kh","Ah","Bh","Ch","Dh","Eh","T","rh","sh","toHex32","split32","shaCommon","sum32_5","ft_1","sha1_K","SHA1","W","SHA256","SHA224","ch32","maj32","s0_256","s1_256","g0_256","g1_256","sha256_K","SHA512","SHA384","rotr64_hi","rotr64_lo","shr64_hi","shr64_lo","sum64","sum64_hi","sum64_lo","sum64_4_hi","sum64_4_lo","sum64_5_hi","sum64_5_lo","sha512_K","ch64_hi","xh","xl","yh","yl","zh","ch64_lo","zl","maj64_hi","maj64_lo","s0_512_hi","s0_512_lo","s1_512_hi","s1_512_lo","g0_512_hi","g0_512_lo","g1_512_hi","g1_512_lo","_prepareBlock","c0_hi","c0_lo","c1_hi","c1_lo","c2_hi","c2_lo","c3_hi","c3_lo","ah","al","bh","bl","ch","cl","dh","dl","eh","fh","fl","gh","gl","hl","c4_hi","c4_lo","T1_hi","T1_lo","T2_hi","T2_lo","rotr32","p32","isSurrogatePair","htonl","zero8","pos","predResist","minEntropy","_reseed","reseedInterval","V","nonceEnc","_hmac","kmac","reseed","addEnc","temp","writable","UNDEFINED","BUFFER","UINT8ARRAY","ARRAYBUFFER","ZERO","BIT32","factory","bigendian","posH","posL","pos0","pos3","fromPositive","fromPositiveBE","fromPositiveLE","fromNegative","fromNegativeBE","fromNegativeLE","Int64","isName","_isInt64","readInt32","raddix","that","newArray","isValidBuffer","_storage","chr","writeInt32","arrbuf","destbuf","destoff","srcbuf","srcoff","nodeName","ipv4Part","ipv4Regexes","fourOctet","threeOctet","twoOctet","longValue","octalRegex","hexRegex","zoneIndex","ipv6Part","ipv6Regexes","deprecatedTransitional","transitional","expandIPv6","parts","lastIndexOf","replacement","replacementCount","colonCount","lastColon","zoneId","ref","results","matchCIDR","partSize","cidrBits","parseIntAuto","padPart","ipaddr","IPv4","SpecialRanges","broadcast","multicast","linkLocal","loopback","carrierGradeNat","kind","cidrRange","prefixLengthFromSubnetMask","cidr","stop","zerotable","subnetMatch","toIPv4MappedAddress","IPv6","toNormalizedString","broadcastAddressFromCIDR","parseCIDR","ipInterfaceOctets","subnetMaskOctets","subnetMaskFromPrefixLength","isIPv4","isValid","isValidFourPartDecimal","networkAddressFromCIDR","maskLength","parsed","filledOctetCount","uniqueLocal","ipv4Mapped","rfc6145","rfc6052","teredo","isIPv4MappedAddress","toFixedLengthString","suffix","toIPv4Address","toRFC5952String","bestMatchIndex","bestMatchLength","isIPv6","native","fromByteArray","e2","address","rangeList","defaultName","rangeName","rangeSubnets","subnet","isObjectObject","prot","jspack","bBE","_DeArray","_EnArray","_DeChar","_EnChar","_DeInt","rv","lsb","nsb","bSigned","_EnInt","_DeString","_EnString","_De754","nBits","mLen","eLen","eBias","eMax","_En754","rt","_DeInt64","rvi","_EnInt64","_sPattern","_lenLut","_elLut","en","de","_UnpackSeries","fxn","_PackSeries","Unpack","PackTo","Pack","CalcLength","DataView","getNative","hashClear","hashDelete","hashGet","hashHas","hashSet","listCacheClear","listCacheDelete","listCacheGet","listCacheHas","listCacheSet","ListCache","mapCacheClear","mapCacheDelete","mapCacheGet","mapCacheHas","mapCacheSet","MapCache","setCacheAdd","setCacheHas","SetCache","__data__","stackClear","stackDelete","stackGet","stackHas","stackSet","Stack","func","iteratee","predicate","resIndex","baseTimes","isArguments","isIndex","isTypedArray","inherited","isArr","isArg","isBuff","skipIndexes","baseAssignValue","copyObject","keysIn","arrayEach","assignValue","baseAssign","baseAssignIn","cloneBuffer","copySymbols","copySymbolsIn","getAllKeys","getAllKeysIn","getTag","initCloneArray","initCloneByTag","initCloneObject","isMap","isSet","argsTag","funcTag","objectTag","cloneableTags","baseClone","bitmask","customizer","isDeep","isFlat","isFull","isFunc","stacked","subValue","props","objectCreate","baseCreate","baseFor","createBaseFor","arrayPush","keysFunc","symbolsFunc","getRawTag","objectToString","symToStringTag","baseGetTag","isObjectLike","baseIsEqualDeep","baseIsEqual","equalArrays","equalByTag","equalObjects","arrayTag","equalFunc","objIsArr","othIsArr","objTag","othTag","objIsObj","othIsObj","isSameTag","objIsWrapped","othIsWrapped","objUnwrapped","othUnwrapped","isMasked","toSource","reIsHostCtor","funcProto","objectProto","funcToString","reIsNative","isLength","typedArrayTags","isPrototype","nativeKeys","nativeKeysIn","isProto","assignMergeValue","baseMergeDeep","safeGet","baseMerge","srcIndex","srcValue","cloneTypedArray","isArrayLikeObject","toPlainObject","mergeFunc","isCommon","isTyped","nativeCeil","nativeMax","fromRight","identity","overRest","setToString","constant","baseSetToString","trimmedEndIndex","reTrimStart","arrayBuffer","freeExports","nodeType","freeModule","cloneArrayBuffer","reFlags","lastIndex","symbolProto","symbolValueOf","symbol","typedArray","isNew","getSymbols","getSymbolsIn","coreJsData","baseRest","isIterateeCall","assigner","sources","guard","iterable","baseRange","toFinite","arraySome","cacheHas","isPartial","arrLength","othLength","arrStacked","othStacked","seen","arrValue","othValue","compared","othIndex","mapToArray","setToArray","convert","objProps","objLength","objStacked","skipCtor","objCtor","othCtor","freeGlobal","global","baseGetAllKeys","isKeyable","baseIsNative","getPrototype","overArg","nativeObjectToString","isOwn","unmasked","arrayFilter","stubArray","propertyIsEnumerable","nativeGetSymbols","getOwnPropertySymbols","mapTag","promiseTag","setTag","weakMapTag","dataViewTag","dataViewCtorString","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","Ctor","ctorString","nativeCreate","cloneDataView","cloneRegExp","cloneSymbol","reIsUint","isArrayLike","uid","maskSrcKey","IE_PROTO","assocIndexOf","getMapData","freeProcess","nodeUtil","require","binding","otherArgs","freeSelf","shortOut","nativeNow","now","lastCalled","stamp","remaining","pairs","LARGE_ARRAY_SIZE","reWhitespace","CLONE_DEEP_FLAG","baseIsArguments","stubFalse","baseIsMap","baseUnary","nodeIsMap","objectCtorString","baseIsSet","nodeIsSet","baseIsTypedArray","nodeIsTypedArray","arrayLikeKeys","baseKeys","baseKeysIn","memoize","resolver","memoized","Cache","mergeWith","createAssigner","createRange","castFunction","MAX_ARRAY_LENGTH","nativeMin","INFINITY","baseTrim","isSymbol","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","isBinary","plural","msAbs","isPlural","isFinite","long","fmtLong","fmtShort","loadNs","hrtime","loadMs","nanoseconds","diffNs","microseconds","micro","BufferSourceConverter","isArrayBuffer","toUint8Array","toView","isArrayBufferView","aView","bView","Utf8Converter","unescape","encodeURIComponent","encodedString","decodeURIComponent","escape","Utf16Converter","code","getUint16","setUint16","Convert","ToUtf8String","ToBinary","ToHex","ToBase64","ToBase64Url","FromUtf8String","FromBinary","FromHex","FromBase64","FromBase64Url","btoa","binary","ToString","formatted","formatString","isBase64","atob","base64url","isBase64Url","Base64Padding","DEFAULT_UTF8_ENCODING","stringLength","resultView","hexString","isHex","padCount","combine","totalByteLength","cur","currentPos","item2","exporter","makeExporter","hasOwn","supportsSymbol","toPrimitiveSymbol","toPrimitive","iteratorSymbol","supportsCreate","supportsProto","downLevel","HashMap","MakeDictionary","functionPrototype","usePolyfill","_Map","CreateMapPolyfill","_Set","CreateSetPolyfill","CreateWeakMapPolyfill","decorate","decorators","IsUndefined","IsArray","IsConstructor","DecorateConstructor","IsObject","IsNull","DecorateProperty","ToPropertyKey","metadataKey","metadataValue","decorator","IsPropertyKey","OrdinaryDefineOwnMetadata","defineMetadata","hasMetadata","OrdinaryHasMetadata","hasOwnMetadata","OrdinaryHasOwnMetadata","OrdinaryGetMetadata","OrdinaryGetOwnMetadata","getMetadataKeys","OrdinaryMetadataKeys","getOwnMetadataKeys","OrdinaryOwnMetadataKeys","deleteMetadata","metadataMap","GetOrCreateMetadataMap","targetMetadata","decorated","Create","MetadataKey","OrdinaryGetPrototypeOf","ToBoolean","MetadataValue","ownKeys","parentKeys","ownKeys_1","parentKeys_1","GetIterator","IteratorStep","nextValue","IteratorValue","IteratorClose","IsSymbol","ToPrimitive","PreferredType","exoticToPrim","GetMethod","OrdinaryToPrimitive","toString_1","IsCallable","toString_2","iterResult","prototypeProto","cacheSentinel","arraySentinel","MapIterator","selector","_index","_keys","_values","_selector","throw","_cacheKey","_cacheIndex","_find","getEntry","insert","_map","UUID_SIZE","rootKey","CreateUniqueKey","_key","GetOrCreateWeakMapTable","CreateUUID","FillRandomBytes","GenRandomBytes","EventDisposer","Event","event","ended","execute","complete","allUnsubscribe","subscribe","unSubscribe","disposer","once","watch","timeLimit","timeout","setTimeout","clearTimeout","asPromise","_disposer","core_1","observable","pool","fulled","events","finishAll","tslib_1","__1","__importDefault","Wait","candidates","exist","kid","job","event_1","__exportStar","os","hasFlag","forceColor","translateLevel","hasBasic","has256","has16m","haveStream","streamIsTTY","TERM","platform","osRelease","release","CI_NAME","TEAMCITY_VERSION","COLORTERM","TERM_PROGRAM_VERSION","TERM_PROGRAM","FORCE_COLOR","isTTY","stdout","__extends","__assign","__rest","desc","getOwnPropertyDescriptor","__param","paramIndex","__metadata","__createBinding","__spread","__spreadArrays","il","jl","__spreadArray","pack","__await","__asyncGenerator","asyncIterator","resume","fulfill","settle","__asyncDelegator","__asyncValues","__makeTemplateObject","cooked","__setModuleDefault","__importStar","__classPrivateFieldGet","receiver","state","__classPrivateFieldSet","__classPrivateFieldIn","createSlicedTable","crc32By8","CRC32C_LOOKUP","crc32By1","pointer","crc32By4","byte1","byte2","createTable","polynom","lookup","nacl","gf","Float64Array","randombytes","_9","gf0","gf1","_121665","D2","X","Y","ts64","vn","xi","yi","crypto_verify_16","crypto_verify_32","crypto_core_salsa20","inp","j0","j1","j2","j3","j4","j5","j6","j7","j8","j9","j10","j11","j12","j13","j14","j15","x0","x3","x4","x5","x6","x7","x8","x9","x10","x11","x12","x13","x14","x15","core_salsa20","crypto_core_hsalsa20","core_hsalsa20","sigma","crypto_stream_salsa20_xor","cpos","mpos","crypto_stream_salsa20","crypto_stream","sn","crypto_stream_xor","poly1305","t0","t3","t4","t5","t6","t7","Uint16Array","leftover","fin","crypto_onetimeauth","outpos","finish","crypto_onetimeauth_verify","hpos","crypto_secretbox","crypto_secretbox_open","set25519","car25519","sel25519","pack25519","neq25519","par25519","unpack25519","Z","M","t8","t9","t10","t11","t12","t13","t14","t15","t16","t17","t18","t19","t20","t21","t22","t23","t24","t25","t26","t27","t28","t29","t30","b10","b11","b12","b13","b14","b15","inv25519","pow2523","crypto_scalarmult","x32","x16","crypto_scalarmult_base","crypto_box_keypair","crypto_box_beforenm","d0","d3","d4","d5","d6","d7","d8","d9","hibit","h0","h1","h4","h5","h6","h7","h8","h9","r0","r1","r3","r4","r5","r6","r7","r8","r9","macpos","want","crypto_box_afternm","crypto_box_open_afternm","crypto_hashblocks_hl","th","tl","wh","wl","crypto_hash","cswap","tx","ty","scalarmult","scalarbase","crypto_sign_keypair","pk","sk","seeded","modL","crypto_sign","sm","smlen","crypto_sign_open","chk","den","den2","den4","den6","unpackneg","crypto_secretbox_BOXZEROBYTES","crypto_sign_BYTES","crypto_sign_PUBLICKEYBYTES","crypto_sign_SECRETKEYBYTES","checkLengths","checkArrayTypes","cleanup","lowlevel","crypto_box","crypto_box_open","crypto_secretbox_KEYBYTES","crypto_secretbox_NONCEBYTES","crypto_secretbox_ZEROBYTES","crypto_scalarmult_BYTES","crypto_scalarmult_SCALARBYTES","crypto_box_PUBLICKEYBYTES","crypto_box_SECRETKEYBYTES","crypto_box_BEFORENMBYTES","crypto_box_NONCEBYTES","crypto_box_ZEROBYTES","crypto_box_BOXZEROBYTES","crypto_sign_SEEDBYTES","crypto_hash_BYTES","secretbox","open","box","keyLength","nonceLength","overheadLength","scalarMult","scalarLength","groupElementLength","checkBoxLengths","after","fromSecretKey","publicKeyLength","secretKeyLength","sharedKeyLength","signedMsg","mlen","seedLength","signatureLength","setPRNG","rnds8Pool","poolPtr","byteToHex","unsafeStringify","_nodeId","_clockseq","_lastMSecs","_lastNSecs","clockseq","seedBytes","msecs","nsecs","dt","tmh","v35","hashfunc","generateUUID","_namespace","stringToBytes","rnds","buff","isV4Format","isV6Format","sections","v4Buffer","ipv4Regex","ipv6Regex","_normalizeFamily","family","fromPrefixLen","prefixlen","cidrString","cidrParts","networkAddress","toLong","maskBuffer","numberOfAddresses","fromLong","firstAddress","lastAddress","broadcastAddress","subnetMask","subnetMaskLength","numHosts","contains","cidrSubnet","isPrivate","isPublic","isLoopback","interfaces","networkInterfaces","details","nic","addresses","ipl","CancelError","isCanceled","PCancelable","userFn","arguments_","onCancel","executor","_cancelHandlers","_isPending","_isCanceled","_rejectOnCancel","_promise","_reject","defineProperties","shouldReject","boolean","onFulfilled","onRejected","catch","finally","onFinally","cancel","MixinDeviceBase","ScryptedDeviceBase","index_1","DeviceBase","nativeId","deviceManager","getDeviceStorage","_log","getDeviceLogger","_console","getDeviceConsole","mimeType","mediaManager","createMediaObject","sourceId","getMediaObjectConsole","mediaObject","getMixinConsole","_lazyLoadDeviceState","_deviceState","getDeviceState","onDeviceEvent","eventInterface","eventData","_listeners","systemManager","getDeviceById","mixinDevice","mixinDeviceInterfaces","mixinStorageSuffix","mixinDeviceState","__rpcproxy_traps_all_properties","createDeviceState","setState","mixinProviderNativeId","mixinStorageKey","getMixinStorage","onMixinEvent","manageListener","listener","removeListener","_createGetState","_createSetState","ScryptedInterfaceProperty","sdk","runtimeAPI","pluginRuntimeAPI","endpointManager","pluginHostAPI","setScryptedInterfaceDescriptors","TYPES_VERSION","ScryptedInterfaceDescriptors","StorageSettings","device","settings","hasValue","setting","rawGet","putSetting","onGet","hide","getItemInternal","onPut","mapPut","mapGet","oldValue","putSettingInternal","noStore","ScryptedInterface","Settings","rawDevice","readDefaultValue","persistedDefaultValue","ScryptedMimeTypes","MediaPlayerState","SecuritySystemObstruction","SecuritySystemMode","AirQuality","ChargeState","LockState","PanTiltZoomMovement","ThermostatMode","TemperatureUnit","FanMode","HumidityMode","ScryptedDeviceType","ScryptedInterfaceMethod","ScryptedDevice","properties","ScryptedPlugin","OnOff","Brightness","ColorSettingTemperature","ColorSettingRgb","ColorSettingHsv","Notifier","StartStop","Pause","Dock","TemperatureSetting","Thermometer","HumiditySensor","Camera","Microphone","Display","VideoCamera","VideoRecorder","PanTiltZoom","EventRecorder","VideoClips","VideoCameraConfiguration","Intercom","Lock","PasswordStore","Scene","Entry","EntrySensor","DeviceProvider","DeviceDiscovery","DeviceCreator","Battery","Charger","Refresh","MediaPlayer","Online","BufferConverter","BinarySensor","TamperSensor","PowerSensor","AudioSensor","MotionSensor","AmbientLightSensor","OccupancySensor","FloodSensor","UltravioletSensor","LuminanceSensor","PositionSensor","SecuritySystem","PM10Sensor","PM25Sensor","VOCSensor","NOXSensor","CO2Sensor","AirQualitySensor","Readme","OauthClient","MixinProvider","HttpRequestHandler","EngineIOHandler","PushHandler","Program","Scriptable","ObjectTracker","ObjectDetector","ObjectDetection","HumiditySetting","Fan","RTCSignalingChannel","RTCSignalingClient","LauncherApplication","ScryptedUser","VideoFrameGenerator","autoIncludeToken","AutoenableMixinProvider","hasEnabledMixin","unshiftMixin","pluginsComponent","getComponent","listen","eventSource","eventDetails","maybeEnableMixin","getSystemState","mixins","canMixin","shouldEnableMixin","plugins","setMixins","setHasEnabledMixin","finished","promise","videoArgs","videoFilter","filterName","filterIndex","bindUdp","usePort","port","url","createBindZero","socketType","createBindUdp","createSocket","socket","close","udp","listenZero","listenZeroSingleClient","ListenZeroSingleClientTimeoutError","rp","cacheDuration","TimeoutError","isTimedOut","keyStr","readable","skipHeader","headerLength","on","skipCount","readCount","resumeRead","StreamEndError","readLength","readableEnded","destroyed","CHARCODE_NEWLINE","readUntil","charCode","localName","remoteName","serializer","createRpcSerializer","sendMessageBuffer","send","sendMessageFinish","rpcPeer","RpcPeer","serializationContext","sendMessage","addEventListener","kill","onmessage","onMessageBuffer","onMessageFinish","setupRpcPeer","getParam","getUserAgent","waitPeerIceConnectionClosed","pc","isPeerConnectionClosed","iceConnectionState","createCandidateQueue","session","ready","candidateQueue","ls","candidate","sdpMLineIndex","addIceCandidate","logSendCandidate","flush","queueSendCandidate","pcDeferred","Deferred","dcDeferred","micEnabled","capabilities","audio","RTCRtpReceiver","getCapabilities","codecs","headerExtensions","video","screen","devicePixelRatio","height","microphone","mic","mediaDevices","getUserMedia","replaceTrack","getTracks","track","getTransceivers","sender","setup","RTCPeerConnection","configuration","onPeerConnection","connectionState","datachannel","dc","createDataChannel","dict","binaryType","getUserMediaSafariHack","addTransceiver","streams","direction","camera","addTrack","sendIceCandidate","createPeerConnection","gatheringPromise","onicecandidate","onicegatheringstatechange","iceGatheringState","toDescription","sdp","offer","createOffer","offerToReceiveAudio","offerToReceiveVideo","setLocalDescription","answer","createAnswer","currentLocalDescription","setRemoteDescription","offerClient","offerSetup","answerClient","answerSetup","offerOptions","getOptions","answerOptions","disableTrickle","requiresOffer","answerQueue","offerQueue","createLocalDescription","readMessage","currentHeaders","readLine","readBody","response","writeMessage","messageLine","findH264NaluType","streamChunk","naluType","findH264NaluTypeInNalu","nalu","checkNaluType","H264_NAL_TYPE_STAP_A","naluLength","H264_NAL_TYPE_FU_A","fuaType","isFuStart","getNaluTypesInNalu","fuaRequireStart","fuaRequireEnd","stapaType","parseHeaders","getFirstAuthenticateHeader","parseSemicolonDelimited","RTSP_FRAME_MAGIC","H264_NAL_TYPE_RESERVED0","H264_NAL_TYPE_RESERVED30","H264_NAL_TYPE_RESERVED31","H264_NAL_TYPE_IDR","H264_NAL_TYPE_SEI","H264_NAL_TYPE_SPS","H264_NAL_TYPE_PPS","H264_NAL_TYPE_STAP_B","H264_NAL_TYPE_FU_B","H264_NAL_TYPE_MTAP16","H264_NAL_TYPE_MTAP32","fua","fuaStart","fuaEnd","container","tcpProtocol","inputArguments","outputArguments","vcodec","acodec","findSyncFrame","streamChunks","foundIndex","nonVideo","createSyncFrame","prebufferIndex","duplex","RtspServer","handleSetup","rtcp","packet","handleRecord","RtspStatusError","RtspBase","cseq","needKeepAlive","setupOptions","issuedTeardown","hasGetParameter","connect","rejectUnauthorized","host","hostname","writeTeardown","sleep","writeRequest","fullUrl","sanitized","wwwAuthenticate","createAuthorizationHeader","channel","onRtp","handleDataPayload","createBadHeader","getParameter","readDataPayload","deferred","writeGetParameter","writeOptions","wwwAuth","authedUrl","strippedUrl","authenticating","requestTimeout","timeoutPromise","statusLine","codeString","request","publicHeader","Accept","protocol","dgram","closeQuiet","Transport","interleaved","sessionDict","timer","setInterval","clearInterval","transport","begin","writePlay","Range","writeRtpPayload","rtp","checkRequest","setupTracks","availableOptions","Socket","setNoDelay","destination","codec","sendUdp","sendTrack","trackId","requestHeaders","respond","describe","setupInterleaved","msection","control","parseSdp","msections","resolveInterleaved","rtpServer","rtcpServer","play","rtpInfo","contentLength","sdpBuffer","allow","pathToken","clientPromise","rtspServerPath","rtspServerPromise","rtspServer","createServer","pathname","addTrackControls","trackCount","findTrackByType","directions","getSections","section","returnTrack","controlString","dir","parseMLinePayloadTypes","mline","payloadTypes","pt","parseMLine","audioPort","videoPort","outputSdp","payloadType","fmtpPrefix","fmtp","parseFmtp","fmtpLine","firstSpace","paramLine","parseRtpMap","mlineType","rtpmap","rawCodec","clock","acontrol","artpmap","parseMSection","rtpmapFirst","rtpmaps","checkDirection","toSdp","flat","spspps","sps","pps","SettingsMixinDeviceBase","settingsGroup","group","settingsGroupKey","groupKey","nextTick","settingsPromise","getSettings","mixinSettingsPromise","getMixinSettings","allSettings","title","readonly","mixinSettings","putMixinSetting","deepMerge","dst","xored","startIndex","createBufferWriter","singleBuffer","reuseBuffer","writeBigUInt64BE","value_b","size_b","bin","expectLength","writeBigUInt64LE","writeUIntLE","readBigUInt64BE","dumpBuffer","uint8Array","bitsPending","writeBits","bitsConsumed","readBits","bitBuffer","partial","seekTo","bitPos","WeriftError","payload","randomPort","interfaceAddresses","setImmediate","interfaceAddress","uint16Gt","uint32Gt","halfMod","running","failed","run","task","SignatureAlgorithm","rsa_1","ecdsa_3","HashAlgorithm","sha256_4","CipherSuite","TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256_49195","TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256_49199","CipherSuiteList","NamedCurveAlgorithm","x25519_29","secp256r1_23","NamedCurveAlgorithmList","CurveType","named_curve_3","SignatureScheme","rsa_pkcs1_sha256","ecdsa_secp256r1_sha256","cipherSuites","AEAD_AES_128_GCM","K_LEN","N_MIN","N_MAX","P_MAX","A_MAX","C_MAX","AEAD_AES_256_GCM","RSA_KEY_EXCHANGE","createRSAKeyExchange","ECDHE_RSA_KEY_EXCHANGE","createECDHERSAKeyExchange","ECDHE_ECDSA_KEY_EXCHANGE","createECDHEECDSAKeyExchange","PSK_KEY_EXCHANGE","createPSKKeyExchange","ECDHE_PSK_KEY_EXCHANGE","createECDHEPSKKeyExchange","createAEADCipher","kx","constants","blockAlgorithm","nonceImplicitLength","nonceExplicitLength","ivLength","signTypes","keyTypes","kxTypes","KeyExchange","exchange","keyType","signType","createHmac","prfPHash","requestedLegth","totalLength","bufs","Ai","prfVerifyData","masterSecret","handshakes","preMasterSecret","clientRandom","serverRandom","sessionHash","localRandom","remoteRandom","isClient","prfKeyLen","prfIvLen","prfNonceLen","keyBlock","clientWriteKey","serverWriteKey","clientNonceImplicit","serverNonceImplicit","clientNonce","serverNonce","SessionType","CLIENT","SERVER","verifyDataLength","AEADAdditionalData","epoch","sequence","AEADCipher","summary","getObjectSummary","prfEncryptionKeys","writeKey","sequenceNumber","explicitNonce","additionalBuffer","createCipheriv","plaintextLength","headPart","finalPart","authTag","createDecipheriv","DtlsClient","DtlsSocket","handleHandshakes","assembled","dtls","sessionId","msg_type","handshake","HandshakeType","hello_verify_request_3","verifyReq","ServerHelloVerifyRequest","deSerialize","fragment","Flight3","server_hello_2","connected","flight5","Flight5","srtp","handleHandshake","certificate_11","server_key_exchange_12","certificate_request_13","waitForReady","server_hello_done_14","targets","certificateRequest","checkHandshakesExist","finished_20","flight","onConnect","onHandleHandshakes","Flight1","x509","CipherContext","sessionType","certPem","keyPem","signatureHashAlgorithm","parseX509","encryptPacket","pkt","recordLayerHeader","protocolVersion","ProtocolVersion","contentLen","decryptPacket","verifyData","prfVerifyDataClient","prfVerifyDataServer","signatureData","localPrivateKey","generateKeySignature","valueKeySignature","localKeyPair","signatureHash","fromPEM","sec","localCert","serverParams","createSelfSignedCertificateWithKey","namedCurveAlgorithm","signatureAlgorithmName","createSelfSigned","major","minor","lastFlight","lastMessage","recordSequenceNumber","handshakeCache","requestedCertificateTypes","requestedSignatureAlgorithms","remoteExtendedMasterSecret","sortedHandshakeCache","cookie","message_seq","flatMap","bufferHandshakeCache","isLocal","filtered","remote","ProtectionProfileAes128CmHmacSha1_80","ProtectionProfileAeadAes128Gcm","Profiles","Flight","hello","ClientHello","DtlsRandom","clientVersion","packets","createPacket","transmit","clientHello","ServerHello","ServerKeyExchange","ServerCertificateRequest","ServerHelloDone","handlers","msgType","needCertificate","messages","sendCertificate","sendClientKeyExchange","sendCertificateVerify","sendChangeCipherSpec","sendFinished","clientKeyExchange","ClientKeyExchange","remoteKeyPair","prfPreMasterSecret","extendedMasterSecret","prfExtendedMasterSecret","prfMasterSecret","createCipher","cipherSuite","signatureScheme","certificateVerify","CertificateVerify","changeCipherSpec","ChangeCipherSpec","createEmpty","createPlaintext","localVerifyData","Finished","UseSRTP","useSrtp","fromData","profile","SrtpContext","findMatchingSRTPProfile","profiles","srtpProfiles","srtpProfile","ExtendedMasterSecret","RenegotiationIndication","remoteCertificate","certificateList","generateKeyPair","certificateTypes","signatures","nextFlight","fragments","createFragments","retransmitCount","RetransmitCount","flight2","EllipticCurves","suites","suite","helloVerifyReq","Flight4","sendServerHello","sendServerKeyExchange","sendCertificateRequest","sendServerHelloDone","renegotiationIndication","serverHello","keyExchange","Flight6","certificate_verify_15","client_key_exchange_16","ExtensionList","ASN11Cert","ClientCertificateType","SignatureHashAlgorithm","spec","mki","profileLength","Alert","toFragment","FragmentedHandshake","messageSeq","compressionMethods","client_hello_1","authorities","serverVersion","compressionMethod","cls","ellipticCurveType","encodeBuffer","gmt_unix_time","random_bytes","DtlsServer","createUdpTransport","UdpTransport","DtlsPlaintext","AlertDesc","fragment_offset","fragment_length","maxFragmentLength","fragmentLength","combined","reference","DtlsPlaintextHeader","MACHeader","computeMACHeader","parsePacket","parsePlainText","plain","applicationData","alert","renegotiation","dtlsCookie","helloCookie","flight6","onData","onError","onClose","bufferFragmentedHandshakes","udpOnMessage","handleFragmentHandshake","assemble","DtlsContext","TransportContext","setupExtensions","extractSessionKeys","keyingMaterial","exportKeyingMaterial","clientKey","serverKey","clientSalt","serverSalt","localKey","localSalt","remoteKey","remoteSalt","upd","rinfo","Candidate","foundation","component","priority","relatedAddress","relatedPort","tcptype","generation","kwargs","canPairWith","candidateType","candidateTransport","baseAddress","candidateComponent","localPref","typePref","lookupEval","worker_thread","parentPort","postMessage","exit","dnsLookup","thread","Worker","eval","setMaxListeners","cached","exitListener","exitCode","threadMessageListener","terminate","TransactionError","getAttributeValue","wait","put","future","pCancel","nominatedKeys","nominated","iceControlling","localUserName","randomString","localPassword","remotePassword","remoteUsername","remoteIsLite","checkList","localCandidates","remoteCandidatesEnd","_localCandidatesEnd","_tieBreaker","Uint64BE","stateChanged","_remoteCandidates","nominating","checkListDone","checkListState","PQueue","earlyChecks","localCandidatesStart","protocols","queryConsent","failures","cancelEvent","AbortController","CONSENT_FAILURES","abort","CONSENT_INTERVAL","signal","buildRequest","remoteAddr","queryConsentHandle","sendTo","checkStart","setPairState","CandidatePairState","IN_PROGRESS","nominate","exc","attributesKeys","switchRole","FAILED","checkComplete","remoteNominated","SUCCEEDED","pairRemoteCandidate","remoteCandidate","localCandidate","findPair","CandidatePair","WAITING","defaultOptions","components","stunServer","turnServer","useIpv4","useIpv6","validateAddress","_components","setRemoteParams","iceLite","usernameFragment","promiseGatherCandidates","getHostAddresses","filteredAddresses","additionalHostAddresses","getComponentCandidates","StunProtocol","connectionMade","portRange","localAddress","candidateAddress","getExtraInfo","candidateFoundation","candidatePriority","candidatePromises","stunPromises","serverReflexiveCandidate","turnUsername","turnPassword","turnCandidate","createTurnEndpoint","turn","relayedAddress","mappedAddress","forceTurn","extraCandidates","remoteCandidates","sortCheckList","unfreezeInitial","earlyCheck","checkIncoming","schedulingChecks","ICE_FAILED","handle","ICE_COMPLETED","firstPair","FROZEN","seenFoundations","pruneComponents","DnsLookup","validateRemoteCandidate","activePair","sendData","getDefaultCandidate","requestReceived","messageMethod","BINDING","respondError","parseMessage","rxUsername","filterStunResponse","Message","classes","RESPONSE","transactionId","setAttribute","addMessageIntegrity","addFingerprint","sendStun","dataReceived","seenComponents","sortCandidatePairs","updateState","resetNominatedPair","txUsername","REQUEST","errorCode","ERROR","_state","candidatePairPriority","G","nodeIpAddress","costlyNetworks","banNetworks","normalizeFamilyNodeV18","nodeIp","localeCompare","Connection","packAddress","IPV4_PROTOCOL","IPV6_PROTOCOL","unpackErrorCode","codeHigh","codeLow","unpackAddress","xorAddress","xPad","COOKIE","xData","unpackXorAddress","packErrorCode","packXorAddress","packUnsigned","unpackUnsigned","packUnsigned64","Int64BE","unpackUnsigned64","packString","unpackString","packBytes","unpackBytes","ATTRIBUTES","ATTRIBUTES_BY_TYPE","ATTRIBUTES_BY_NAME","FINGERPRINT_LENGTH","FINGERPRINT_XOR","HEADER_LENGTH","INTEGRITY_LENGTH","RETRY_MAX","RETRY_RTO","AttributeKeys","integrityKey","messageType","attributeRepository","AttributeRepository","attrLen","padLen","attrName","attrUnpack","fingerprint","messageFingerprint","integrity","messageIntegrity","expect","messageClass","randomTransactionId","transactionIdHex","attrValue","attrPack","checkData","setBodyLength","crc32Buf","xorBuf","bufferXor","transactionsKeys","transactions","closed","datagramReceived","connectionLost","responseReceived","retransmissions","timeoutDelay","tries","onResponse","TransactionFailed","retry","timeoutHandle","triesMax","TransactionTimeout","findPort","UDP_TRANSPORT","TurnTransport","onDatagramReceived","TurnClient","lifetime","channelNumber","refresh","REFRESH","handleChannelData","handleSTUNMessage","isChannelData","withoutCred","ALLOCATE","makeIntegrityKey","refreshHandle","peerAddress","CREATE_PERMISSION","getChannel","channelBinding","channelBind","CHANNEL_BIND","serverAddr","turnClient","connection","gatherCandidates","AV1RtpPayload","obu_or_fragment","marker","isKeyframe","nBit_RtpStartsNewCodedVideoSequence","payloads","frames","objects","isFragment","obus","AV1Obu","lastObu","obu_has_size_field","zBit_RtpStartsWithFragment","getBit","yBit_RtpEndsWithFragment","w_RtpNumObus","elementSize","leb128decode","obu","obu_forbidden_bit","obu_type","OBU_TYPES","obu_extension_flag","obu_reserved_1bit","BitWriter2","OBU_TYPE_IDS","obuSize","leb128bytes","leb128byte","H264RtpPayload","h264","nri","nalUnitType","nalUnitPayloadType","packaging","NalUnitType","stap_a","stap_aHeaderSize","naluSize","stap_aNALULengthSize","annex_bNALUStartCode","idrSlice","isPartitionHead","fu_a","fu_b","stap_b","mtap16","mtap24","basicCodecParser","DePacketizer","partitions","timestamp","getFrame","Vp8RtpPayload","Vp9RtpPayload","OpusRtpPayload","opus","samplingFrequency","bufferWriter","bufferWriterLE","size0","size1","size2","xBit","nBit","sBit","pid","iBit","lBit","tBit","kBit","mBit","_7","paddingByte","_8","pictureId","payloadHeaderExist","hBit","ver","pBit","pDiff","n_g","pgT","pgU","pgP_Diff","parseRtpPayload","fBit","bBit","eBit","vBit","zBit","tid","tl0PicIdx","n_s","Value","countSize","Element","children","isSizeUnknown","bodySize","sizeMetaData","UNKNOWN_SIZE","vintEncode","numberToByteArray","getEBMLByteLength","float","float32bit","vintEncodedNumber","stringToByteArray","unknownSizeElement","build","byteArray","getSizeMask","ID","EBML","of","EBMLVersion","EBMLReadVersion","EBMLMaxIDLength","EBMLMaxSizeLength","DocType","DocTypeVersion","DocTypeReadVersion","Void","CRC32","Segment","SeekHead","Seek","SeekID","SeekPosition","Info","SegmentUID","SegmentFilename","PrevUID","PrevFilename","NextUID","NextFilename","SegmentFamily","ChapterTranslate","ChapterTranslateEditionUID","ChapterTranslateCodec","ChapterTranslateID","TimecodeScale","DateUTC","Title","MuxingApp","WritingApp","Cluster","Timecode","SilentTracks","SilentTrackNumber","PrevSize","SimpleBlock","BlockGroup","Block","BlockAdditions","BlockMore","BlockAddID","BlockAdditional","BlockDuration","ReferencePriority","ReferenceBlock","CodecState","DiscardPadding","Slices","TimeSlice","LaceNumber","Tracks","TrackEntry","TrackNumber","TrackUID","TrackType","FlagEnabled","FlagDefault","FlagForced","FlagLacing","MinCache","MaxCache","DefaultDuration","DefaultDecodedFieldDuration","MaxBlockAdditionID","Language","CodecID","CodecPrivate","CodecName","AttachmentLink","CodecDecodeAll","TrackOverlay","CodecDelay","SeekPreRoll","TrackTranslate","TrackTranslateEditionUID","TrackTranslateCodec","TrackTranslateTrackID","Video","FlagInterlaced","FieldOrder","StereoMode","AlphaMode","PixelWidth","PixelHeight","PixelCropBottom","PixelCropTop","PixelCropLeft","PixelCropRight","DisplayWidth","DisplayHeight","DisplayUnit","AspectRatioType","ColourSpace","Colour","MatrixCoefficients","BitsPerChannel","ChromaSubsamplingHorz","ChromaSubsamplingVert","CbSubsamplingHorz","CbSubsamplingVert","ChromaSitingHorz","ChromaSitingVert","TransferCharacteristics","Primaries","MaxCLL","MaxFALL","MasteringMetadata","PrimaryRChromaticityX","PrimaryRChromaticityY","PrimaryGChromaticityX","PrimaryGChromaticityY","PrimaryBChromaticityX","PrimaryBChromaticityY","WhitePointChromaticityX","WhitePointChromaticityY","LuminanceMax","LuminanceMin","Audio","SamplingFrequency","OutputSamplingFrequency","Channels","BitDepth","TrackOperation","TrackCombinePlanes","TrackPlane","TrackPlaneUID","TrackPlaneType","TrackJoinBlocks","TrackJoinUID","ContentEncodings","ContentEncoding","ContentEncodingOrder","ContentEncodingScope","ContentEncodingType","ContentCompression","ContentCompAlgo","ContentCompSettings","ContentEncryption","ContentEncAlgo","ContentEncKeyID","ContentSignature","ContentSigKeyID","ContentSigAlgo","ContentSigHashAlgo","Cues","CuePoint","CueTime","CueTrackPositions","CueTrack","CueClusterPosition","CueRelativePosition","CueDuration","CueBlockNumber","CueCodecState","CueReference","CueRefTime","Attachments","AttachedFile","FileDescription","FileName","FileMimeType","FileData","FileUID","Chapters","EditionEntry","EditionUID","EditionFlagHidden","EditionFlagDefault","EditionFlagOrdered","EncryptionAlgorithm","EncryptionKeyID","ContentEncAESSettings","AESSettingsCipherMode","ChapterAtom","ChapterUID","ChapterStringUID","ChapterTimeStart","ChapterTimeEnd","ChapterFlagHidden","ChapterFlagEnabled","ChapterSegmentUID","ChapterSegmentEditionUID","ChapterPhysicalEquiv","ChapterTrack","ChapterTrackNumber","ChapterDisplay","ChapString","ChapLanguage","ChapCountry","ChapProcess","ChapProcessCodecID","ChapProcessPrivate","ChapProcessCommand","ChapProcessTime","ChapProcessData","Tags","TargetTypeValue","TargetType","TagTrackUID","TagEditionUID","TagChapterUID","TagAttachmentUID","SimpleTag","TagName","TagLanguage","TagDefault","TagString","TagBinary","getNumberByteLength","setUint8","setUint32","codePointAt","int16Bit","ab","setInt16","setFloat32","dumpBytes","tracks","encryptionKey","ebmlHeader","trackEntries","trackIvs","trackKeyIds","encryptionKeyID","trackNumber","createTrackEntry","ivCounter","randomFillSync","trackElements","createCodecPrivate","createSegment","duration","elements","createDuration","createCuePoint","relativeTimestamp","clusterPosition","blockNumber","createCues","cuePoints","createCluster","timecode","createSimpleBlock","frame","elementId","singleByte","contentSize","keyframe","BufferChain","glow","buffering","frameBroken","keyframeReceived","onNeedKeyFrame","processInput","eol","isFinalPacketInSequence","checkFinalPacket","dePacketizeRtpPackets","waitForKeyframe","rtpSeq","clearBuffer","lastSeqNum","uint16Add","finalPacket","enumerate","DepacketizeCallback","DepacketizeBase","pipe","depacketizeTransformer","DepacketizeTransformer","TransformStream","enqueue","expectNextSeqNum","presentSeqNum","clockRate","rtpBuffer","latency","bufferSize","sortAndClearBuffer","timeoutSeqNum","processRtp","isPacketLost","uint16Gte","nothing","resolveBuffer","disposeTimeoutPackets","pushRtpBuffer","latestTimeoutSeqNum","sorted","seqNumFrom","baseTimestamp","elapsedSec","uint32Add","JitterBufferCallback","JitterBufferBase","jitterBufferTransformer","JitterBufferTransformer","audioOutput","videoOutput","stopped","started","lastCommited","processAudioInput","baseTime","elapsed","interval","bufferLength","audioBuffer","seq","processVideoInput","videoBuffer","LipsyncCallback","LipsyncBase","audioCb","videoCb","pipeAudio","pipeVideo","inputAudio","inputVideo","RtcpSrPacket","ntpTimestamp","rtpTimestamp","senderInfo","ntp","calcNtp","Max32bit","ntpTime2Time","ntpSec","ntpMsec","bufferReader","NtpTimeCallback","Max32Uint","RtpTimeCallback","RtpTimeBase","onStopped","RtpPacket","clearInvalidPTPacket","ReadableStream","controller","timestamps","clusterCounts","audioStopped","videoStopped","videoKeyframeReceived","builder","WEBMBuilder","ClusterTimestamp","onFrameReceived","staticPart","saveToFile","timestampManager","MaxSinged16Int","cluster","previousDuration","strictTimestamp","present","cuePoint","latestTimestamp","cues","durationElement","cuesLength","DurationPosition","SegmentSizePosition","totalFileSize","resize","todoFill","WebmCallback","WebmBase","PromiseQueue","saveToFileSystem","appendFile","stat","replaceSegmentSize","WebmStream","audioStream","WritableStream","videoStream","webmStream","disposers","rtpStream","pushRtpPackets","rtcpStream","pushRtcpPackets","LipSync","Pipeline","mismatch","rtpPackets","sr","srReceived","baseNtpTimestamp","baseRtpTimestamp","lastA","calcNtpTime","lastB","RTCP_HEADER_SIZE","RtcpHeader","v_p_rc","BitWriter","FullIntraRequest","fir","senderSsrc","mediaSsrc","ssrc","ssrcs","RtcpPayloadSpecificFeedback","feedback","RtcpPacketConverter","PictureLossIndication","ReceiverEstimatedMaxBitrate","uniqueID","ssrcNum","ssrcFeedbacks","e_m","brExp","brMantissa","bitrate","feedbacks","RtcpRrPacket","reports","report","RtcpReceiverInfo","fractionLost","packetsLost","highestSequence","jitter","lsr","dlsr","RtcpSourceDescriptionPacket","RtcpTransportLayerFeedback","GenericNack","TransportWideCC","lost","mediaSourceSsrc","blp","ssrcPair","fci","headPid","packetChunks","recvDeltas","baseSequenceNumber","packetStatusCount","referenceTime","fbPktCount","packetStatusPos","processedPacketNum","iPacketStatus","PacketChunk","TypeTCCRunLengthChunk","packetStatus","RunLengthChunk","packetNumberToProcess","runLength","PacketStatus","TypeTCCPacketReceivedSmallDelta","TypeTCCPacketReceivedLargeDelta","RecvDelta","TypeTCCStatusVectorChunk","StatusVectorChunk","symbolSize","symbolList","recvDeltaPos","constBuf","deltas","packetResults","currentSequenceNumber","deltaIdx","currentReceivedAtMs","recvDelta","receivedAtMs","PacketResult","parseDelta","SourceDescriptionChunk","getPadding","SourceDescriptionItem","octetCount","RtcpSenderInfo","packetCount","distance","cacheSize","redundantPayloads","presentPayload","redundant","timestampOffset","Max14Uint","blockPT","sequenceNumbers","RtpHeader","bufferOrArrayBuffer","RedHeader","fields","bitStream","BitStream","ExtensionProfiles","OneByte","TwoByte","paddingSize","payloadOffset","csrcLength","csrc","extensionProfile","rawPacket","currOffset","v_p_x_cc","csrcOffset","m_pt","extensionLength","extId","serializeSize","extSize","extHeaderPos","startExtensionsPos","extLen","roundedExtSize","trunc","CipherAesCtr","CipherAesBase","srtpSessionKey","srtpSessionSalt","srtcpSessionKey","srtcpSessionSalt","srtpSessionAuthTag","srtcpSessionAuthTag","encryptRtp","rolloverCounter","headerBuffer","generateCounter","generateSrtpAuthTag","decryptRtp","cipherText","encryptRTCP","rtcpPacket","srtcpIndex","generateSrtcpAuthTag","decryptRTCP","tailOffset","srtcpIndexSize","sessionSalt","roc","srtpSessionAuth","rocRaw","CipherAesGcm","aeadAuthTagLen","rtpIvWriter","rtcpIvWriter","aadWriter","hdr","rtpInitializationVector","growBufferSize","addPos","rtcpInitializationVector","aad","rtcpAdditionalAuthenticatedData","aadPos","rtcpEncryptionFlag","rawRtcp","masterKey","masterSalt","srtpSSRCStates","srtcpSSRCStates","generateSessionKey","generateSessionSalt","generateSessionAuthTag","srtcpSessionAuth","sessionKey","labelAndIndexOverKdr","sessionAuthTag","firstRun","secondRun","getSrtpSsrcState","lastSequenceNumber","getSrtcpSsrcState","updateRolloverCount","rolloverHasProcessed","MaxROCDisorder","MaxSequenceNumber","setIndex","SrtcpContext","Context","maxSRTCPIndex","ContextCls","localMasterKey","localMasterSalt","remoteMasterKey","remoteMasterSalt","localContext","remoteContext","SrtcpSession","Session","config","decrypted","SrtpSession","crc32c","_body","padL","BaseInitChunk","initiateTag","advertisedRwnd","outboundStreams","inboundStreams","initialTsn","decodeParams","encodeParams","InitChunk","InitAckChunk","ReConfigChunk","ForwardTsnChunk","cumulativeTsn","DataChunk","tsn","streamId","streamSeqNum","userData","abandoned","acked","misses","retransmit","sentCount","bookSize","CookieEchoChunk","CookieAckChunk","BaseParamsChunk","AbortChunk","ErrorChunk","descriptions","CODE","InvalidStreamIdentifier","MissingMandatoryParameter","StaleCookieError","OutofResource","UnresolvableAddress","UnrecognizedChunkType","InvalidMandatoryParameter","UnrecognizedParameters","NoUserData","CookieReceivedWhileShuttingDown","RestartofanAssociationwithNewAddresses","UserInitiatedAbort","ProtocolViolation","HeartbeatChunk","HeartbeatAckChunk","ReconfigChunk","SackChunk","gaps","duplicates","nbGaps","nbDuplicates","gap","ShutdownChunk","ShutdownAckChunk","ShutdownCompleteChunk","CHUNK_CLASSES","CHUNK_BY_TYPE","sourcePort","destinationPort","verificationTag","chunkType","chunkFlags","chunkLength","chunkBody","ChunkClass","checksum","checkSumBuf","WEBRTC_PPID","SCTP_STATE","SCTP","OutgoingSSNResetRequestParam","requestSequence","responseSequence","lastTsn","StreamAddOutgoingParam","newStreams","reconfigResult","ReconfigResultSuccessPerformed","BadSequenceNumber","ReconfigResponseParam","RECONFIG_PARAM_BY_TYPES","USERDATA_MAX_LENGTH","SCTP_TSN_MODULO","SCTPConnectionStates","createEventsFromList","onReconfigStreams","onReceive","onSackReceived","associationState","CLOSED","isServer","hmacKey","localPartialReliability","localVerificationTag","random32","remoteExtensions","remotePartialReliability","remoteVerificationTag","_inboundStreamsCount","_inboundStreamsMax","sackDuplicates","sackMisOrdered","sackNeeded","cwnd","fastRecoveryTransmit","flightSize","outboundQueue","outboundStreamSeq","_outboundStreamsCount","localTsn","lastSackedTsn","tsnMinusOne","advancedPeerAckTsn","partialBytesAcked","sentQueue","reconfigRequestSeq","reconfigResponseSeq","reconfigQueue","rto","timer1Failures","timer2Failures","timerReconfigFailures","ppId","expiry","maxRetransmits","ordered","tsnPlusOne","timer3Handle","timer1Expired","timer1Handle","sendChunk","timer1Chunk","timer2Expired","timer2Handle","timer2Chunk","timer3Expired","maybeAbandon","updateAdvancedPeerAckPoint","fastRecoveryExit","ssthresh","timerReconfigHandleExpired","timerReconfigHandle","reconfigRequest","sendReconfigParam","localPort","handleData","maxChannels","sctp","expectedTag","receiveChunk","sendSack","gapNext","lastReceivedTsn","sack","receiveDataChunk","ack","setExtensions","COOKIE_WAIT","initAck","timer1Cancel","echo","timer1Start","COOKIE_ECHOED","receiveSackChunk","timer2Cancel","SHUTDOWN_RECEIVED","t2Start","SHUTDOWN_SENT","ESTABLISHED","SHUTDOWN_ACK_SENT","reconfig","receiveReconfigParam","receiveForwardTsnChunk","transmitReconfigRequest","streamIds","timerReconfigCancel","markReceived","inboundStream","getInboundStream","addChunk","popMessages","receive","receivedTime","cwndFullyUtilized","doneBytes","uint32Gte","sChunk","flightSizeDecrease","updateRto","sentTime","loss","highestSeenTsn","highestNewlyAcked","timer3Cancel","timer3Restart","isObsolete","streamSequenceNumber","pruneChunks","srtt","rttvar","InboundStream","forwardTsnChunk","timer3Start","burstSize","retransmitEarliest","dataChunk","flightSizeIncrease","timerReconfigHandleStart","chunkPos","oChunk","RTCSctpCapabilities","setRemotePort","remotePort","setConnectionState","serializePacket","removeAllListeners","reassembly","startPos","expectedTsn","maxMessageSize","DATA_CHANNEL_ACK","DATA_CHANNEL_OPEN","DATA_CHANNEL_RELIABLE","DATA_CHANNEL_PARTIAL_RELIABLE_REXMIT","DATA_CHANNEL_PARTIAL_RELIABLE_TIMED","DATA_CHANNEL_RELIABLE_UNORDERED","DATA_CHANNEL_PARTIAL_RELIABLE_REXMIT_UNORDERED","DATA_CHANNEL_PARTIAL_RELIABLE_TIMED_UNORDERED","WEBRTC_DCEP","WEBRTC_STRING","WEBRTC_BINARY","WEBRTC_STRING_EMPTY","WEBRTC_BINARY_EMPTY","DISCARD_HOST","DISCARD_PORT","MEDIA_KINDS","DIRECTIONS","DTLS_ROLE_SETUP","auto","DTLS_SETUP_ROLE","FMTP_INT_PARAMETERS","SSRC_INFO_ATTRS","SRTP_PROFILE","SRTP_AES128_CM_HMAC_SHA1_80","SRTP_AEAD_AES_128_GCM","SenderDirections","ReceiverDirection","RTCDataChannel","EventTarget","sendOpen","bufferedAmountLow","isCreatedByRemote","readyState","bufferedAmount","_bufferedAmountLowThreshold","negotiated","dataChannelAddNegotiated","dataChannelOpen","maxPacketLifeTime","bufferedAmountLowThreshold","setId","setReadyState","onopen","emit","onclose","onclosing","addBufferedAmount","crossesThreshold","datachannelSend","dataChannelClose","addListener","removeEventListener","useFIR","parameter","useNACK","usePLI","useREMB","useTWCC","RTP_EXTENSION_URI","sdesMid","sdesRTPStreamID","repairedRtpStreamId","transportWideCC","absSendTime","dependencyDescriptor","RTCRtpHeaderExtensionParameters","rtcpFeedback","channels","mux","newEstSeqNum","_lost","onPacketLost","retryCount","sendNack","lostSeqNumbers","nack","rtcpSsrc","dtlsTransport","sendRtcp","updateRetryCount","getLost","setLost","nackLoop","removeLost","addPacket","pruneLost","extensionInfo","twccRunning","runTWCC","handleTWCC","transportSequenceNumber","microTime","sendTWCC","extensionsArr","minTSN","maxTSN","lastPacketStatus","lastTimestamp","uint24","uint8Add","cycles","packets_received","jitter_q4","expected_prior","received_prior","inOrder","max_seq","base_seq","arrival","last_timestamp","last_arrival","fraction_lost","expected_interval","packets_expected","received_interval","lost_interval","packets_lost","RtpRouter","ssrcTable","ridTable","extIdUriMap","routeRtp","rtpHeaderExtensionsParser","rtpReceiver","latestRid","handleRtpByRid","handleRtpBySsrc","trackBySSRC","registerRtpReceiver","repairedRid","latestRepairedRid","routeRtcp","recipients","rtpfb","psfb","remb","recipient","handleRtcpPacket","registerRtpSender","registerRtpReceiverBySsrc","transceiver","encodings","MediaStreamTrack","rtx","registerRtpReceiverByRid","unwrapRtx","codecArray","ssrcByRtx","NackHandler","audioRedHandler","RedHandler","trackByRID","lastSRtimestamp","receiveLastSRTimestamp","onRtcp","rtcpRunning","rtcpCancel","remoteStreams","handleRTP","setDtlsTransport","nackEnabled","twccEnabled","pliEnabled","prepareReceive","setupTWCC","receiverTWCC","ReceiverTWCC","delaySinceLastSR","delaySeconds","timestampSeconds","receiverReportDelay","getStats","compactNtp","onReceiveRtcp","StreamStatistics","originalSsrc","codecParams","codecParametersFromString","rtxCodec","onReceiveRtp","runRtcp","wrapRtx","trackOrKind","rtxSsrc","onReady","onPictureLossIndication","onGenericNack","senderBWE","SenderBandwidthEstimator","rtxSequenceNumber","random16","_redDistance","redEncoder","RedEncoder","receiverEstimatedMaxBitrate","seqOffset","rtpCache","dtlsDisposer","registerTrack","onStateChange","redDistance","prepareSend","cname","muxId","rtpStreamId","rtxPayloadType","redRedundantPayloadType","disposeTrack","sendRtp","onSourceChanged","replaceRTP","lastSentSRTimestamp","discontinuity","ntptime","ntpTime","rtpPayload","millitime","milliTime","sentInfo","wideSeq","sendingAtMs","sentAtMs","rtpPacketSent","rtt","receiveTWCC","seqNum","_codecs","_direction","onTrack","usedForSender","stopping","setDirection","_currentDirection","currentDirection","setCurrentDirection","msid","getPayloadType","Inactive","Sendonly","Recvonly","Sendrecv","Directions","numPackets","totalSize","firstPacketSentAtMs","lastPacketSentAtMs","firstPacketReceivedAtMs","lastPacketReceivedAtMs","receiveBitrate","recvIntervalMs","Int","sendBitrate","sendIntervalMs","COUNTER_MAX","congestionScore","_congestionScore","onCongestionScore","availableBitrate","_availableBitrate","onAvailableBitrate","congestion","onCongestion","congestionCounter","cumulativeResult","CumulativeResult","sentInfos","elapsedMs","maxBonus","bonus","muted","writeRtp","numOfTracks","WebmFactory","MediaWriter","rtpSources","unSubscribers","unlink","inputTracks","webm","defaultDuration","lipsync","rtpSource","RtpSourceCallback","rtcpSource","RtcpSourceCallback","depacketizer","jitterBuffer","loop","MediaPlayerMp4","MediaPlayerWebm","setupTrack","cmd","timestampDiff","pushTransceiver","transceivers","replaceTransceiver","dtlsTransports","transports","sctpTransport","iceTransports","iceTransport","transportEstablished","defaultPeerConfig","signalingState","negotiationneeded","candidatesSent","iceGatheringStateChange","iceConnectionStateChange","signalingStateChange","connectionStateChange","onDataChannel","onRemoteTransceiverAdded","onTransceiverAdded","onIceCandidate","onNegotiationneeded","router","seenMid","isClosed","shouldNegotiationneeded","needNegotiation","onnegotiationneeded","icePortRange","RTCCertificate","localDescription","_localDescription","remoteDescription","_remoteDescription","pendingLocalDescription","pendingRemoteDescription","currentRemoteDescription","getTransceiverByMid","getTransceiverByMLineIndex","mLineIndex","ensureCerts","buildOfferSdp","assignTransceiverCodecs","codecCandidate","SessionDescription","addSDPHeader","media","createMediaDescriptionForSctp","createMediaDescriptionForTransceiver","allocateMid","mediaDescription","bundlePolicy","mids","bundle","GroupDescription","createSctpTransport","RTCDataChannelParameters","removeTrack","getSenders","createTransport","existing","iceGatherer","RTCIceGatherer","parseIceServers","iceServers","iceTransportPolicy","iceInterfaceAddresses","iceAdditionalHostAddresses","iceFilterStunResponse","iceUseIpv4","iceUseIpv6","onGatheringStateChange","updateIceGatheringState","RTCIceTransport","updateIceConnectionState","iceGather","remoteIsBundled","sdpMid","candidateKey","RTCDtlsTransport","RTCSctpTransport","ondatachannel","sessionDescription","validateDescription","setSignalingState","role","dtlsParams","setupRole","andDirection","offerDirection","setLocal","gather","addTransportDescription","sctpMedia","getTransportByMid","getTransportByMLineIndex","candidateMessage","IceCandidate","addRemoteCandidate","sctpRemotePort","getLocalRtpParams","getRemoteRtpParams","apt","RTCRtpRtxParameters","RTCRtpCodingParameters","remoteSdp","semantic","bundleTransport","matchTransceiverWithMedia","remoteMedia","_addTransceiver","setRemoteRTP","setRemoteSCTP","iceParams","iceCandidates","iceCandidatesComplete","removedTransceivers","remoteCodec","localCodecs","existCodec","findCodecByMimeType","origin","mediaDirection","reverseDirection","localParams","remotePrams","simulcastParameters","remoteStreamId","remoteTrackId","fireOnTrack","MediaStream","sctpPort","answerMedia","offerMedia","ontrack","RTCRtpSender","newTransceiver","RTCRtpTransceiver","inactiveTransceiverIndex","inactiveTransceiver","getReceivers","emptyTrackSender","notSendTransceiver","ensureCert","localCertificate","setupCertificate","buildAnswer","assertNotClosed","reverseSimulcastDirection","allMatch","gatheringState","newState","onsignalingstatechange","onconnectionstatechange","MediaDescription","rtcpHost","rtcpPort","rtcpMux","SsrcDescription","simulcast","RTCRtpSimulcastParameters","ssrcGroup","sctpCapabilities","localParameters","iceOptions","fingerprints","localCodec","RTCRtpCodecParameters","urls","extMapAllowMixed","msidSemantic","dtlsFingerprints","sessionLines","mediaGroups","groupLines","ipAddressFromSdp","parseAttr","RTCDtlsFingerprint","icePassword","iceUsernameFragment","parseGroup","dtlsRole","mediaLines","fmtInt","currentMedia","RTCDtlsParameters","RTCIceParameters","candidateFromSdp","extUri","formatId","formatDesc","sctpMap","ssrcStr","ssrcDesc","ssrcAttr","ssrcValue","ssrcInfo","feedbackType","feedbackParam","RTCRtcpFeedback","webrtcTrackId","ipAddressToSdp","RTCSessionDescription","candidateToSdp","recv","tcpType","srtpStarted","dataReceiver","outboundPacketLoss","getFingerprints","remoteParameters","createIceTransport","inboundPacketLoss","startSrtp","updateSrtpSession","srtcp","isMedia","isRtcp","DtlsStates","privateKeyPem","IceTransport","ice","isDtls","candidateToIce","waitStart","IceTransportStates","IceGathererStates","candidateFromIce","RTCIceCandidate","bundled","dataChannels","dataChannelQueue","eventDisposer","datachannelReceive","channelType","reliability","labelLength","protocolLength","dataChannelFlush","BridgeDtls","ids","channelByLabel","dataChannelId","queueItem","SignalingStates","ConnectionStates","file","hashName","colon","firstByte","seconds","performance","timeOrigin","msec","url2Address","credential","createSelfSignedCertificate","NAL_TYPE_STAP_A","NAL_TYPE_FU_A","NAL_TYPE_NON_IDR","NAL_TYPE_IDR","NAL_TYPE_SEI","NAL_TYPE_SPS","NAL_TYPE_PPS","NAL_TYPE_DELIMITER","splitH264NaluStartCode","maybeAddSlice","maxPacketSize","codecInfo","JitterBuffer","extraPackets","seenStapASps","fuaMax","fuaMin","ensureCodecInfo","updateSps","updatePps","shouldFilter","nalType","packetizeFuA","noStart","noEnd","fnri","originalNalType","isFuEnd","isFuMiddle","originalNalHeader","fuIndicator","fuHeaderMiddle","fuHeaderStart","fuHeaderEnd","fuHeader","packages","packageSize","packetizeOneStapA","datas","availableSize","NAL_HEADER_SIZE","stapHeader","packed","packetizeStapA","flushPendingFuA","pendingFuA","hasFuStart","hasFuEnd","getDefragmentedPendingFua","originalFragments","splits","splitNaluType","maybeSendSpsPps","defragmented","createRtpPackets","nalus","hadMarker","packetized","aggregates","fuaOptions","repacketize","dejittered","repacketizeOne","isNextSequenceNumber","retain","depacketized","lastPos","depacketizeStapA","sequenceNumberDistance","rolloverDistance","nextSequenceNumber","maxRtpTimestamp","adjust","jitterSize","flushPending","afterSequenceNumber","sd","packetDistance","maxWait","createTrackForwarder","timeStart","destinationId","requestMediaStream","videoTransceiver","audioTransceiver","maximumCompatibilityMode","clientOptions","sessionSupportsH264High","transcodeWidth","isMediumResolution","parseOptions","transcodeBaseline","handlesHighResolution","requestDestination","mo","adaptive","tool","mediaStreamFeedback","convertMediaObject","MediaStreamFeedback","RTC_BRIDGE_NATIVE_ID","ffmpegInput","convertMediaObjectToJSON","FFmpegInput","mediaStreamOptions","found","audioCodecName","getAudioCodec","audioCodecCopy","videoTranscodeArguments","transcode","h264EncoderArguments","h264FilterArguments","videoCodecCopy","h264Info","reserved30","reserved31","oobCodecParameters","conservativeDefaultBitrate","destinationVideoBitrate","scaleFilter","addVideoFilterArguments","audioTranscodeArguments","getFFmpegRtpAudioOutputArguments","needPacketization","transcodeStream","FFmpegTranscodeStream","videoDecoderArguments","audioRtpTrack","codecCopy","encoderArguments","firstPacket","h264Repacketizer","spsPps","videoRtpTrack","packetSize","onMSection","videoSection","getSpsPps","H264Repacketizer","videoPacketSize","repacketized","startRtpForwarderProcess","highProfilesHex","sdpFmtpLine","WebRTCTrack","connectionManagement","intercom","removed","ScryptedSessionControl","attachForwarder","killPromise","createTracks","waitClosed","cleanupTrackOnly","killed","activeTracks","setPlayback","WebRTCConnectionManagement","clientSession","negotiationDeferred","requiredAudioCodecs","requiredVideoCodec","weriftConfiguration","logConnectionState","waitConnected","logIsPrivateIceTransport","weriftSignalingSession","WeriftSignalingSession","intercomId","RequestMediaStream","vtrack","atrack","isPrivateIceTransport","negotiation","negotiateRTCSignalingSessionInternal","clientSetup","clientOffer","connectRTCSignalingClients","videoMid","audioMid","waitIceConnected","clientSignalingSession","stun","creds","googleStunServer","toWerift","turnIceServers","stunIceServers","weriftTurnServer","weriftStunServer","zygote","createZygote","WebRTCMixin","plugin","storageSettings","webrtcIntercom","startIntercom","Speaker","SmartSpeaker","startRTCSignalingSession","forwarder","ipv4","endSession","createRTCSignalingSession","createRTCPeerConnectionSink","getRTCConfiguration","getWeriftConfiguration","stopIntercom","proxy","hasIntercom","getVideoStream","disableTurn","requiresAnswer","createVideoStreamOptions","getRTCMediaStreamOptions","pcClose","createRTCPeerConnectionSource","getVideoStreamOptions","WebRTCPlugin","choices","useTurnServer","useIPv6","activeConnections","rtcConfiguration","debugLog","fromMimeType","toMimeType","onDeviceDiscovered","API","bridge","WebRTCBridge","createFFmpegMediaObject","OnDemandSignalingChannel","rms","Doorbell","SmartDisplay","WebRTCCamera","getLocalAddresses","udp4","udp6","webSocketUrl","WebSocket","isPublicEndpoint","cp","connectionManagementId","updateSessionId","setHostParam","createBrowserSignalingSession","worker","createConnection","negotiateRTCSignalingSession","debouncer","DataChannelDebouncer","u8","RTCSignalingSession","RTCConnectionManagement","statePromise","isPeerIceConnectionClosed","createPacketDelivery","original","attachTrackDgram","setupRtspClient","rtspClient","rtspClientForceTcp","deliver","rtspHeader","isCodecCopy","desiredCodec","checkCodec","rtpTracks","killDeferred","killGuard","old","readUint8","safeTeardown","rtspClientHooked","rtspMode","onRtspClient","videoCodec","audioCodec","ffmpegPath","getFFmpegPath","isRtsp","rtspSdp","sdpDeferred","videoSectionDeferred","audioSectionDeferred","allowAudioTranscoderExit","RtspClient","optionsResponse","parsedSdp","audioSection","newSdp","audioSdp","replaceSectionPort","audioControl","adts","clientIsTcp","ffmpegArgs","safePrintFFmpegArguments","spawn","stdio","ffmpegLogInitialOutput","safeKillFFmpeg","audioPipe","audioClient","handlePlayback","ffmpegDestination","reportTranscodedSections","setRecvBufferSize","createTrackForwarders","useRtp","rtspServerDeferred","URLSearchParams","crytoSuite","useUdp","serverPort","firstVideoPacket","firstAudioPacket","rtspSample","transcodeSdp","readLoop","sdpContents","rtspTcpServer","createSdpInput","audioTrack","rtpPacket","pendingClient","outputCodecParameters","encoder","inputCodec","createRawResponse","sessionControl","peerConnection","sc","videoTrack","doSetup","getWeriftIceServers","ensurePeerConnection","gotAudio","gotVideo","setupAudioTranscevier","transciever","setupVideoTransceiver","naluTypes","firSequenceNumber","pictureLossInterval","sendRtcpPLI","handleRtspSetup","destroyProcess","ic","isPeerConnectionAlive","mediaStreamUrl","MediaStreamUrl","isMainThread","fork","Server","stdin","forever","SCRYPTED_FFMPEG_NOISY","logger","redactNext","BufferSerializer","deserialize","serialized","bufferSerializer","pendingSerializationContext","peer","addSerializer","SidebandBufferSerializer","constructorSerializerMap","messageSerializationContext","handleMessage","onDisconnected","createRpcDuplexSerializer","createSocketSend","socketSend","readPending","selfName","peerName","startPeriodicGarbageCollection","gc","lastCollection","sinceLastCollection","remotesCreated","remotesCollected","RpcProxy","constructorName","proxyProps","proxyOneWayMethods","iteratorMethods","asyncIteratorMethod","PROPERTY_PROXY_ID","PROPERTY_PROXY_PROPERTIES","PROPERTY_PROXY_ONEWAY_METHODS","PROPERTY_JSON_DISABLE_SERIALIZATION","PROPERTY_JSON_COPY_SERIALIZE_CHILDREN","handled","handleFunctionInvocations","finalizerIdSymbol","finalizerId","argArray","oneway","isFrozen","pendingResults","RPCResultError","rpcApply","proxyId","pendingResult","createPendingResult","cause","compileFunction","fr","FinalizationRegistry","WeakRef","deref","jsonSerializable","thiz","idCounter","proxyCounter","localProxied","localProxyMap","remoteWeakProxies","finalizers","finalize","nameDeserializerMap","onProxyTypeSerialization","transportSafeArgumentTypes","getDefaultTransportSafeArgumentTypes","tags","killedDeferred","isTransportSafe","rpcFinalize","__local_proxy_id","__local_proxy_finalizer_id","paramMessage","evalLocal","script","filename","coercedParams","compile","createErrorResult","serializeError","deserializationContext","__remote_proxy_id","__remote_proxy_finalizer_id","__remote_constructor_name","__serialized_value","__remote_proxy_props","__remote_proxy_oneway_methods","RPC_RESULT_ERROR_NAME","deserializeError","newProxy","deserializer","__proxy_constructor","serializerMapName","prepareProxyProperties","proxiedEntry","__proxy_id","__proxy_peer","onProxySerialization","proxyConstructorName","localProxiedEntry","rpc","weakref","activeRpcPeer","handleMessageInternal","rpcParam","getIteratorNext","rpcResult","deserialized","getEvalSource","PROBED_PROPERTIES","_defineProperties","_assertThisInitialized","ReferenceError","_wrapNativeSuper","_cache","Wrapper","_construct","_getPrototypeOf","_setPrototypeOf","Parent","_isNativeReflectConstruct","sham","YError","_Error","wrappedErrors","Constructor","_classCallCheck","_possibleConstructorReturn","captureStackTrace","protoProps","staticProps","subClass","superClass","_inherits","_looksLikeAYError","_looksLikeAYErrorCode","yError","wrappedErrorIsACode","cast","bump","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","loaded","__webpack_modules__","getter","definition","nmd","paths","__webpack_exports__"],"sourceRoot":""}